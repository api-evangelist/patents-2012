---

title: System and method for importing NetCDF data
abstract: System and method for providing an automated method of importing NetCDF formatted data from a variety of sources that contain a variety of internal datasets. Options for processing and analysis can be provided and can occur simultaneously as the data are being processed. Storage and organization options provide efficient viewing and analysis of NetCDF datasets.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08949246&OS=08949246&RS=08949246
owner: The United States of America, as represented by the Secretary of the Navy
number: 08949246
owner_city: Washington
owner_country: US
publication_date: 20121207
---
This application is a non provisional application claiming priority to provisional application 61 582 381 filed on Jan. 1 2012 under 35 USC 119 e . The entire disclosure of the provisional application is incorporated herein by reference.

Methods and systems disclosed herein relate generally to accessing and importing data and more particularly to accessing Network Common Data Format NetCDF datasets and importing those datasets into geospatial map displays.

NetCDF is an Application Programming Interface API that is used to manage array based scientific data in a machine independent format. A variety of data types are typically stored in NetCDF files such as single point observations time series regular spaced grids and satellite or radar images. The API is intended to provide a common data access method for all applications that generate and or make use of NetCDF data.

Oceanographers plan and monitor the use of underwater gliders to collect environmental data and use numerical model forecasts stored in NetCDF files to study the effects of environmental forces on glider missions. The datasets provided within a numerical model forecast range from two dimensional scalar to four dimensional vector information. Physical aspects provided in these datasets that affect vehicle mission planning and monitoring include temperature salinity and current magnitude and direction. Being able to import these datasets into a Geospatial Information System GIS for analysis is crucial to safe and successful operation of these vehicles.

Currently users load datasets one file at a time one layer at a time for every time slice. Each of the data layers then need to be custom clipped if a subset is all that is needed. Custom calculations have to be made manually. Further the data display is disorganized and crowds the root level of the table of contents hindering the navigation of those data layers for viewing and analysis. Also any tool tip information is limited to a single attribute field within the dataset. Finally if the data are viewed again later the entire process has to be repeated.

Accordingly there is a need for a method and system that provide 1 automatic extraction of each two dimensional slice of data for each depth for every time interval 2 subset area determination when needed 3 automatic organization of the information into a manageable tree structure as in many cases there can be over 1000 layers that could possibly be imported per dataset and 4 automatic calculation of a time depth average for all of the imported layers.

The system and method of the present embodiment for providing improved import organization and analysis functionality for multi dimensional datasets stored in NetCDF from within a Geospatial Information System GIS . The graphical user interface GUI can be for example but not limited to a compatible plug in tool for use in GIS systems provided by the Environmental Systems Research Institute ESRI .

The system and method of the present embodiment overcome existing limitations by automatically handling multiple file structures and internal formats of NetCDF files. The system and method automatically detect internal file formats and extract metadata and data ranges within the file s . Thus file contents can be verified prior to processing and storage of extracted data. A subset of the data can be chosen to limit processing to the data most pertinent to a particular project.

The method for populating a map in a geospatial environment from NetCDF data can include but is not limited to including the steps of automatically determining characteristics of the NetCDF data automatically displaying the characteristics for interactive modification of the characteristics automatically distinguishing the NetCDF data that are scalar values from the NetCDF data that are vector values automatically creating an index map in computer memory automatically extracting a subset of the NetCDF data based on the modified characteristics and the index map the subset being extracted in three or four dimensions depending on whether the NetCDF data are scalar values or vector values respectively automatically providing the extracted subset to the geospatial environment to create the map and automatically manipulating a table of contents in the geospatial environment to reference the extracted subset directly. The NetCDF data can include a plurality of files.

Optionally the method can include the steps of automatically determining the extent of the NetCDF data and automatically determining the resolution of the NetCDF data. Further optionally the method can include the step of automatically performing time depth averaging on the extracted subset automatically exporting the extracted subset to a KML format and automatically storing the extracted subset on a computer readable medium. The four dimensions comprise u and v components of the vector values depth and time and the three dimensions comprise the scalar value depth and time. The method can optionally include the steps of requesting from the geospatial environment the u and v components associated with each of the depths at each of the times and calculating a magnitude and a direction of the vector values based on the u and v components. The method can further optionally include the steps of automatically creating two dimensional arrays automatically computing time depth averages over the extracted subset storing intermediate values of the time depth averages in the two dimensional arrays. The method step of manipulating can include but is not limited to including the steps of identifying the extracted subset as a string representative of a hierarchy and storing the string in the table of contents according to the hierarchy.

The method of the present embodiment for accessing NetCDF formatted datasets and importing the datasets into a geospatial map can include but is not limited to including the steps of receiving a file structure and an identifier for the NetCDF formatted dataset automatically detecting an internal format of a file from the NetCDF formatted dataset identified by the identifier based on the file structure automatically extracting metadata and data ranges from the file based on the internal format automatically enabling verification of NetCDF data in the file based on the metadata and the data ranges receiving subset information and customization information and simultaneously automatically extracting the NetCDF data from the file based on the subset information and the customization information automatically calculating a time depth average for all layers in the extracted NetCDF data and automatically storing the extracted NetCDF data and the average in Keyhole Markup Language KML files on a computer readable medium.

The method can further optionally include the steps of automatically detecting if the file includes multiple time slices or a single time slice automatically detecting in the file includes scalar or vector data automatically detecting dimensionality of the NetCDF data automatically detecting a security classification of the NetCDF data automatically displaying an outline of the extent of the dataset on the map automatically creating and storing on the computer readable medium an electronic table of contents for electronic navigation of the NetCDF dataset automatically storing on the computer readable medium the extracted NetCDF data in an electronic geodatabase automatically overriding based on the metadata an ESRI limitation to a single attribute for mouse over tooltip generation automatically organizes the extracted data to support custom animation on the map enabling automatic modification of the extracted data and storing on the computer readable medium a geospatial relational database schema and database manager API to manage the metadata the layers and the time depth average.

A computer system for populating a map in a geospatial environment from NetCDF data can include but is not limited to including a characteristics processor automatically determining characteristics of the NetCDF data a display processor automatically displaying the characteristics for interactive modification of the characteristics a scalar vector processor automatically distinguishing the NetCDF data that are scalar values from the NetCDF data that are vector values an index map processor automatically creating an index map in computer memory a data extractor automatically extracting a subset of the NetCDF data based on the modified characteristics and the index map the subset being extracted in three or four dimensions depending on whether the NetCDF data are scalar values or vector values respectively the data extractor automatically providing the extracted subset to the geospatial environment to create the map and a table of contents processor automatically manipulating a table of contents in the geospatial environment to reference the extracted subset directly. The characteristics processor can optionally automatically determine the extent of the NetCDF data and automatically determines the resolution of the NetCDF data. The data extractor can optionally automatically perform time depth averaging on the extracted subset can automatically export the extracted subset to a KML format can request from the geospatial environment the u and v components associated with each of the depths at each of the times and calculates a magnitude and a direction of the vector values based on the u and v components and can automatically create two dimensional arrays and automatically computes time depth averages over the extracted subset storing intermediate values of the time depth averages in the two dimensional arrays. The table of contents processor identifies the extracted subset as a string representative of a hierarchy and stores the string in the table of contents according to the hierarchy.

A computer system for accessing NetCDF formatted datasets and importing the datasets into a geospatial map can include but is not limited to including a format processor receiving a file structure and an identifier for the NetCDF formatted dataset the format processor automatically detecting an internal format of a file from the NetCDF formatted dataset identified by the identifier the identifier based on a file structure a metadata data range extractor automatically extracting metadata and data ranges from the file based on the internal format a verification processor automatically enabling verification of NetCDF data in the file based on the metadata the data ranges and verification information the verification processor producing verified data a subset customization processor receiving subset information and customization information the subset customization processor simultaneously automatically extracting the NetCDF data from the file based on the subset information and the customization information the subset customization processor calculating subsetted customized data in layers a time depth average processor automatically calculating a time depth average for all the layers in the extracted NetCDF data and a storage processor automatically storing formatted subsetted customized data in the layers the storage processor automatically storing an average in Keyhole Markup Language KML files on a computer readable medium. The format processor can include computer code stored on a computer readable medium for automatically detecting if the file includes multiple time slices or a single time slice automatically detecting if the file includes scalar or vector data automatically detecting dimensionality of the NetCDF data and automatically detecting a security classification of the NetCDF data. The storage processor can include computer code stored on a computer readable medium for automatically displaying an outline of the extent of the dataset on the map automatically creating and storing on the computer readable medium an electronic table of contents for electronic navigation of the NetCDF dataset and automatically storing on the computer readable medium the extracted NetCDF data in an electronic geodatabase. The metadata data range extractor processor can include but is not limited to including computer code stored on a computer readable medium for automatically overriding based on the metadata ESRI limitation to a single attribute for mouse over too generation. The storage processor can optionally include computer code stored on a computer readable medium for automatically organizing the extracted data to support custom animation on the map enabling automatic modification of the extracted data storing a geospatial relational database schema and database manager API to manage the metadata the layers and the time depth average automatically organizing 4D data for traversal and review on the map display automatically creating a result dataset including calibration adjustments for source data by adding or subtracting a known amount across the entire field of data and automatically making the result dataset available and viewable within the map display.

These and other aspects and features of the present teachings will become apparent from the following detailed description of the exemplary embodiments read in conjunction with and with reference to the accompanying drawings.

The problems set forth above as well as further and other problems are solved by the present teachings. These solutions and other advantages are achieved by the various embodiments of the teachings described herein below.

Referring now to system for populating a map in a geospatial environment from NetCDF data can include but is not limited to including characteristics processor automatically determining characteristics of the NetCDF data display processor automatically displaying characteristics for interactive modification of characteristics and scalar vector processor automatically distinguishing NetCDF data that are scalar values from NetCDF data that are vector values and setting S V flag accordingly. Characteristics processor can automatically determine the extent of NetCDF data and can automatically determine the resolution of NetCDF data . System can further include index map processor automatically creating index map in computer memory data extractor automatically extracting a subset of NetCDF data based on modified characteristics and index map the subset being extracted in three or four dimensions depending on the value of S V flag i.e. whether the NetCDF data are scalar values or vector values respectively. The four dimensions can include u and v components of the vector values depth and time. The three dimensions can include a scalar value depth and time. Data extractor can automatically provide extracted subset to geospatial environment to create map . System can still further include table of contents processor automatically manipulating table of contents in geospatial environment by creating TOC info to reference extracted subset directly. NetCDF data can include a plurality of files. Data extractor can automatically perform time depth averaging on the extracted subset export extracted subset to a KML format request from the geospatial environment the u and v components associated with each of the depths at each of the times calculate a magnitude and a direction of the vector values based on the u and v components create two dimensional arrays and automatically compute time depth averages over the extracted subset storing intermediate values of the time depth averages in the two dimensional arrays. Table of contents processor can identify extracted subset as a string representative of a hierarchy and can store the string in table of contents according to the hierarchy.

Referring now primarily to method for populating map in geospatial environment from NetCDF data which can optionally include a plurality of files can include but is not limited to including the steps of automatically determining characteristics of NetCDF data automatically displaying characteristics for interactive modification of characteristics automatically distinguishing NetCDF data that are scalar values from NetCDF data that are vector values automatically creating index map in computer memory automatically extracting a subset of NetCDF data based on modified characteristics and index map the subset being extracted in three or four dimensions depending on whether NetCDF data are scalar values or vector values respectively. The four dimensions can include but are not limited to including u and v components of the vector values depth and time. The three dimensions can include but are not limited to including a scalar value depth and time. Method can further include the steps of automatically providing extracted subset to geospatial environment to create map and automatically manipulating table of contents in geospatial environment to reference extracted subset directly. Method can optionally include the steps of automatically determining the extent of NetCDF data and automatically determining the resolution of NetCDF data . Method can further optionally include the steps of automatically performing time depth averaging on extracted subset automatically exporting extracted subset to a KML format automatically storing extracted subset on a computer readable medium requesting from geospatial environment the u and v components associated with each of the depths at each of the times calculating a magnitude and a direction of the vector values based on the u and v components automatically creating two dimensional arrays and automatically computing time depth averages over extracted subset storing intermediate values of the time depth averages in the two dimensional arrays. The step of manipulating can include but is not limited to including the steps of identifying extracted subset as a string representative of a hierarchy and storing the string in table of contents according to the hierarchy.

Referring now to system for accessing NetCDF formatted datasets and importing the datasets into a geospatial map can include but is not limited to including format processor receiving for example but not limited to from input through electronic communications file structure and identifier for the NetCDF formatted dataset and automatically detecting an internal format of file from NetCDF formatted dataset identified by identifier based on file structure and metadata data range extractor automatically extracting metadata and data ranges from file based on the internal format. System can automatically organize the data ranges and file structures into an indexed memory map to allow programmatically traversing the entire 4D dataset during processing as needed. System can also include verification processor automatically enabling verification of NetCDF data in file based on metadata data ranges and verification info producing verified data and subset customization processor receiving subset information and customization information and simultaneously automatically extracting NetCDF data from file based on subset information and the customization information and calculating subsetted customized data in layers . Subset customization processor can automatically create a result dataset that represents calibration adjustments for source data by adding or subtracting a known amount across the entire field of data. Mapping manager can automatically make the resultant datasets available and viewable within the map display. System can also include time depth average processor automatically calculating time depth average for all layers in the extracted NetCDF data and storage processor automatically storing formatted subsetted customized data in layers and average in for example but not limited to Keyhole Markup Language KML files on computer readable media. Format processor can automatically detect if file includes multiple time slices or a single time slice can automatically detect if file includes scalar or vector data can automatically detect dimensionality of the NetCDF data in file and can automatically detect a security classification of the NetCDF data in file . Metadata data range extractor can automatically override based on the metadata a geospatial environment limitation to a single attribute for mouse over tooltip generation.

Referring now to primarily mapping manager can automatically display an outline of the extent of the NetCDF data on the map and TOC manager can automatically create and store on the computer readable media an electronic table of contents for electronic navigation of the NetCDF data. Database manager can automatically store on the computer readable media the extracted NetCDF data in an electronic geodatabase . TOC manager can automatically organize the extracted data to support custom animation on the map and can enable automatic modification of the extracted data . Database manager can store on the computer readable media a geospatial relational database schema and a database manager API to manage the metadata the layers and the time depth average.

Referring now primarily to method for accessing NetCDF formatted datasets and importing the datasets into a geospatial map can include but is not limited to including the steps of receiving a file structure and an identifier for the NetCDF formatted dataset automatically detecting an internal format of a file from the NetCDF formatted dataset identified by the identifier based on the file structure automatically extracting metadata and data ranges from the file based on the internal format automatically enabling verification of NetCDF data in the file based on the metadata and the data ranges receiving subset verification information and customization information and simultaneously automatically extracting the NetCDF data from the file based on the subset verification information and the customization information automatically calculating a time depth average for all layers in the extracted NetCDF data and automatically storing the extracted NetCDF data and the average in Keyhole Markup Language KML files on a computer readable medium. If there are more data to process method can include the step of processing the next time depth latitude and longitude dataset array within the selection. If there are no more data to process method can include the step of finalizing the time depth averaging and file output.

Method can optionally include the steps of automatically detecting if the file includes multiple time slices or a single time slice automatically detecting if the file includes scalar or vector data automatically detecting dimensionality of the NetCDF data automatically detecting a security classification of the NetCDF data automatically displaying an outline of the extent of the dataset on the map automatically creating and storing on the computer readable medium an electronic table of contents for electronic navigation of the NetCDF dataset automatically storing on the computer readable medium the extracted. NetCDF data in an electronic geodatabase automatically overriding based on the metadata a geospatial environment limitation to a single attribute for mouse over tooltip generation automatically organizing the extracted data to support custom animation on the map enabling automatic modification of the extracted data and storing on the computer readable medium a geospatial relational database schema and database manager API to manage the metadata the layers and the time depth average .

Referring now primarily to the present embodiment can include graphical user interface GUI that can provide a multi function approach to accessing datasets stored in the NetCDF format. The present embodiment can overcome existing limitations by handling more than one file structure and internal format of NetCDF files. Once the user indicates the file structure and selects the dataset of interest the present embodiment can automatically detect the internal format and can extract the metadata and data ranges within the file s . This can allow verification of the contents of the file prior to processing and storage of the extracted data . In order to customize the import of the dataset the user can be presented with options for defining a subset of the data to be loaded. Once the limits have been received for example but not limited to selected by a user additional options can enable several types of custom processing as the data are extracted from the files loaded into memory and prepared for display. From GUI file selector choice classification level scalar vector choice number of selected layers default layer name clip subset choice animation choice KML generation choice metadata selector data range selector and customization info selector can be selected for example but not limited to by a user. These inputs can also be automatically provided.

Referring now to a display of outline of the extent of the dataset on the map can be provided for example for a visual location verification.

Referring now to static value can be added or subtracted across the board for a magnitude and or direction if vector based for a database import.

Referring now primarily to mapping manager can include a set of object classes that can manage the preparation and display of data to the table of contents and can create the map display . TOC processor can organize extracted data for easy access as shown. Raster and feature generation for dataset display can be included and a table of contents hierarchy based on root level can provide linkage to organized time versus depth map data.

Referring now primarily to a custom layer display that includes magnitude scalar data and an additional direction indication for vector data can be output by scalar vector processor to the geospatial environment . In addition the present embodiment overcomes the geospatial environment limitation of displaying one attribute per maptip which are displayed when the mouse hovers over a map feature within the geospatial environment to being able to display as much attribute information as needed as shown . As previously mentioned ESRI only allows associating one attribute within the maptip . The present embodiment allows displaying one or more of the attribute information through the use of an extra attribute which is assigned to the maptip and by programmatically adding text and formatting chosen from one or more of the other attributes .

Computer system input can be bound to geospatial environment such as an ESRI GIS application. Input can be for example a GUI having a user interface to customize input process input and output options. Input can enable processing of NetCDF files that contain multiple time slices per file for a given of the NetCDF datasets selected as by the screen in for example processing of NetCDF folders that contain a single NetCDF file for each time slice for the given dataset processing of standard numerical model forecast files such as for example but not limited to NAVOCEANO NCOM files as can be selected by the screen in for example processing of a NRL modified NAVOCEANO NCOM format for additional environmental datasets processing both scalar and vector based datasets as can be selected by the screen in for example processing of 2D to 4D datasets as can be selected by the screen in for example and metadata review of the selected dataset for verification prior to processing when for example classification file type and time period choices are selected by the screen in for example . Verification can be directed to for example but not limited to security classification file internal format type data source forecast model for NCOM parameter dataset name and measurement units. Input can also display an outline of the extent of the dataset on the map for a visual location verification as can be selected by the screen in . Input can also limit the subset based on latitude and longitude for a defined area of interest limit to subset by selecting date and time range within the dataset limit the subset by selecting a depth level range within dataset provide a default layer name based on metadata add or subtract a static value across the board for magnitude and or direction if vector based for entire the dataset import provide an indication of how much data is currently selected to be processed perform subsetting and processing simultaneously as data are imported choose to preview the results and optionally to also store the results for later viewing and analysis so reprocessing is not required all as shown in and output a custom layer display that includes magnitude and an additional direction indication for vector data as chosen by a selection made on the screen shown in . Input can optionally output a time depth average for subset range selected using the screen in output the imported layer as modified by the custom calculation settings made using the screen in output custom Keyhole Markup Language KML files for display in for example but not limited to GOOGLE Earth as selected in the screen in output an organized table of contents TOC for navigating the dataset while viewing within the GIS map display see and output the imported base data into the geodatabase for later viewing and analysis as selected by the screen in .

The present embodiment can further include a custom geospatial relational database schema which is configured within geodatabase that can store processing results from extractor and verification processor subset customization processor and time depth average processor through the use of the storage processor . What gets stored is based on input options selected through for example a screen such as in such as for example but not limited to original subset metadata original subset data layers custom calculation results time depth average calculations and tool tip metadata. The custom geospatial relational database schema can be configured in the geodatabase so that the storage processor can store hierarchy information for loading data into organized TOC tree structure and can allow custom animation within the geospatial environment . The geospatial relational database schema can allow reloading previously processed data to save processing time from the geodatabase .

Storage processor can also include a database manager having an API Object Library including for example but not limited to a set of object classes that allow the storage processor to manage the geospatial database that can support dataset metadata geospatial relational data and data hierarchy information within the geospatial database . Further storage processor can include a map manager having an API Object Library that can include a set of object classes that can allow the storage processor through electronic communications to manage the preparation and display of data to the table of contents and GIS Map display within the geospatial environment . Geospatial environment can include rasters and features generated by subset customization processor and time depth average processor for dataset display and creation of table of contents hierarchy and linkage between table of contents and map data display see and handling of metadata to support custom tool tips from the TOC manager and storage processor .

Raw data and results from the computations of the systems and methods present embodiments can be stored for future retrieval and processing printed displayed transferred to another computer and or transferred elsewhere. Input through electronic communications can provide file structure through which formatted customized subsetted data can be transmitted. Electronic communications can be wired or wireless for example using cellular communication systems military communications systems and satellite communications systems. Any software required to implement the system can be written in a variety of conventional programming languages. Systems including any possible software firmware and hardware can operate on a computer having a variable number of CPUs. Other alternative computer platforms can be used. The operating system can be for example but is not limited to WINDOWS or LINUX .

Referring again primarily to methods can be in whole or in part implemented electronically. Signals representing actions taken by elements of systems and other disclosed embodiments can travel over at least one live communications network . Control and data information can be electronically executed and stored on at least one computer readable medium such as for example formatted customized subsetted data . System can be implemented to execute on at least one computer node in at least one live communications network . Common forms of at least one computer readable medium can include for example but not be limited to a floppy disk a flexible disk a hard disk magnetic tape or any other magnetic medium a compact disk read only memory or any other optical medium punched cards paper tape or any other physical medium with patterns of holes a random access memory a programmable read only memory and erasable programmable read only memory EPROM a Flash EPROM or any other memory chip or cartridge or any other medium from which a computer can read. Further the at least one computer readable medium can contain graphs in any form including but not limited to Graphic Interchange Format GIF Joint Photographic Experts Group JPEG Portable Network Graphics PNG Scalable Vector Graphics SVG and Tagged Image File Format TIFF .

Although the present teachings have been described with respect to various embodiments it should be realized these teachings are also capable of a wide variety of further and other embodiments.

