---

title: Managing gateway access
abstract: A storage system provides a content manager configured to initiate transfer of media content from a first device to a second device. Responsive to a transfer request from the second device and during the transfer, gateway logic coupled to the content manager disables a gateway executing on the first device, responsive to the transfer request from the second device. Power logic coupled to the content manager enters a low power mode in the first device, responsive to completion of the transfer of the media content from the first device to the second device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09229520&OS=09229520&RS=09229520
owner: Seagate Technology LLC
number: 09229520
owner_city: Cupertino
owner_country: US
publication_date: 20121130
---
The present application is related to U.S. patent application Ser. No. 13 691 368 entitled Media Content Caching and filed concurrently herewith which is specifically incorporated by reference herein for all that it discloses and teaches.

When a user plays a movie or other content on a mobile device such as a tablet or a smart phone he or she can wirelessly stream the movie from a storage device such as a remote battery powered storage device. However having a storage device stream a movie or other content to a mobile device can unnecessarily use extra power.

Implementations described and claimed herein manage power of a remote communications device e.g. a personal WiFi device a remote storage device that provides a gateway to another network etc. in the context of loading streamable media content to a client device e.g. a device executing a media player . The remote communications device loads the media content to the client device at a rate faster than a buffered streaming rate caching the media content on the client device. When the entire media content or some large segment thereof is loaded to the client device the remote communications device transitions operation to a low power mode in order to conserve battery power. The amount of media content that is cached during any loading phase may be dependent upon available storage capacity of the client device upon user provided settings etc. In one implementation the transition to a low power mode is accomplished by disabling gateway access by the client device at the remote communications device. Such disabling may be performed using the dynamic host configuration protocol DHCP .

A storage system provides a content manager configured to initiate transfer of media content from a first device to a second device. Responsive to a transfer request from the second device and during the transfer gateway logic coupled to the content manager disables a gateway executing on the first device responsive to the transfer request from the second device. Power logic coupled to the content manager enters a low power mode in the first device responsive to completion of the transfer of the media content from the first device to the second device.

The client device can play a movie or audio content examples of a streamable media content resource through its display or through other output interfaces such as speakers or tactile outputs. The movie has been transferred from the remote storage device and wirelessly loaded onto the client device . If the client device streams the movie from the remote storage device the remote storage device would typically be operating in a standard power mode e.g. with the disc spinning or flash media data being read data being received and transmitted etc. for most of the length of the movie. In an example of a two hour movie the remote storage device is operated in a standard power mode for about two hours as the media content is concurrently loaded from and displayed on the client device with a small amount of buffering where the buffering can be employed to reduce or eliminate jitter during playback on the client device . Other examples of media content may include without limitation audio content slide shows documents video games and other streamable data content that may be presented e.g. played to a user while loading onto the user s device.

In an alternative mode however the client device receives media content data from the remote storage device at a faster rate than that employed in a typical buffered streaming mode. Rather than loading data at a relatively minimum rate sufficient for playback potentially with a smaller amount of buffering the client device starts to concurrently load and playback the media content but the client device also loads the entire media content resource at a relatively faster rate into local storage of the client device e.g. to a hard drive to solid state memory to flash media to RAM etc. . After the loading has completed the remote storage device can enter a lower power mode to conserve energy. When a new movie is selected for playback the client device can restore communications with the remote storage device which can resume standard power mode and begins transfer of the new movie content to the client device .

It should be understood that in other implementations while the transfer of an entire or substantially entire media content resource may trigger the entry into low power mode other segments of the resource may be configured to trigger entry into low power mode. For example the remote storage device may quickly transfer a smaller portion of the resource such as an hour of a two hour movie or some similar segment thereof such as may be limited by available storage capacity on the client device or user settings enter a lower power mode of a period of time and then resume its transfer in a standard power mode thereafter.

In one implementation the client device initiates the transfer of the media content with a Transfer API application programming interface call to the IP internet protocol address of the remote storage device which causes the remote storage device to initiate the transfer of the media content resource. While receiving the media content the client device can begin playback of the media content resource e.g. in a streaming playback mode . However the Transfer API call also causes the remote storage device to enter a new state in which the remote storage device disables its gateway. In one implementation the remote storage device disables its gateway by deleting addresses in the DHCP gateway address setting and the DNS domain name server address setting. A gateway refers to a router in a TCP IP transmission control protocol internet protocol network that serves as an access point to another network. When the client device attempts to renew its DHCP lease with the remote storage device the gateway is disabled and so the client device terminates attempts to re connect with the remote storage device for other purposes. Accordingly the remote storage device maintains its communication connection with the client device via the remote storage device s IP address to continue transferring the media content resource but terminates the client device s ability to access the remote storage device as an access point e.g. terminating gateway accesses to the remote storage device by the client device . Accordingly after the media content resource is transferred to the client device and assuming no other client devices are accessing the remote storage device the remote storage device detects a period of communication inactivity and enters a low power mode. Meanwhile the client device can continue playback of the media content from its local storage without interaction with the remote storage device .

After playback of the media content resources is terminated at the client device the client device wakes up the remote storage device by issuing a Wake API call to the IP address of the remote storage device which directs the remote storage device to restore its gateway. Waking up the remote storage device involves transitioning the remote storage device into a higher power mode and or an enabling of additional or different functionality in the remote storage device . In one implementation restoration of the gateway in the remote storage device involves restoring valid addresses to the DHCP gateway address setting and the DNS server address setting. In this state the remote storage device can establish access point connections with the client device and other devices.

After a successful restoration of the gateway in the remote storage device the client device can issue a Restore API call to reset the communications connection with the remote storage device . In one implementation resetting the communications connection involves the client device renewing its DHCP lease with the gateway in the remote storage device .

The client device includes communications interface logic . In one implementation the communications interface logic includes a proxy server that interfaces between media player logic in the client device and gateway logic in the remote storage device . In other implementations the communications interface logic does not include the proxy server but still provides a communications interface between the media player logic and the gateway logic in the remote storage device . The presence of the proxy server in the client device isolates the media player logic from the specific implementation of the gateway interaction between the client device and the remote storage device . In this manner various existing media player applications may be employed with the described technology without modification.

As described with regard to the client device can initiate the loading of media content from the remote storage device by issuing an API call to the remote storage device . In response to the API call the remote storage device initiates transfer of the requested media content and enters a state in which the remote storage device may enter a low power mode upon completion of the transfer. In one implementation the remote storage device deletes its DHCP gateway address setting and its DNS server address setting and increases the lease time to prevent frequent DHCP negotiations that wake up the remote storage device from its low power mode which it will enter after completion of the media content transfer.

Concurrently when the client device receives a sufficient segment of the content media resource from the remote storage device to storage e.g. flash memory a solid state drive etc. to provide enough buffering for uncorrupted playback the media player logic plays the media content via an output interface such as a video display a speaker etc.

At some future point the client device will attempt to renew its DHCP lease with the remote storage device . Because the DHCP gateway address and DNS server address settings are null on the remote storage device the corresponding address settings are deleted at the client device . Accordingly the operating system of the client device will stop trying to connect to the Internet through the gateway of remote storage device . In absence of communications with the client device the remote storage device can enter a low power mode. Therefore if no other devices are connected to the remote storage device the remote storage device will enter a low power mode when it has completed its transfer of the media content resource or predetermined segment thereof to the client device .

A power logic and supply module provides power from a battery or other power supply e.g. an electrical connection and manages the power consumption of the remote storage device . In one implementation the power logic and supply module manages multiple power modes examples of which are shown below 

It should be understood that a low power mode is an operational mode of a device that consumes relatively less power than a high power mode. 

The remote storage device also includes a content manager that manages content stored on the remote storage device . The content manager among other functions 1 manages receipt of content via its interface logic and or other storage interfaces 2 stores such content in and accesses such content from content storage and 3 transfers such content from the content storage to other devices via its interface logic and . Storage modules may be combined into an integrated module and may include combinations of memory SSD solid state drive magnetic storage discs and other storage components. The content manager processes the API calls from one or more client devices to manage content transfers communications and power management.

When a user selects a media selection for playback on the client device a Transfer API call is sent from the client device to the remote storage device. The call initiates the transfer of the selected media content resource from the remote storage device to the client device for playback and also causes the remote storage device to disable its gateway in a Disabled Gateway State .

In one implementation the Disabled Gateway State involves the clearing of the DHCP gateway address and the DNS server address and the increasing of the lease time e.g. from a typical 5 minutes to 6 hours . For example the DHCP configuration of the Disabled Gateway State may be set as follows 

When the media content resource or a predetermined segment thereof is completely transferred to the client device and if no other devices are in communicative connection with the remote storage device the remote storage device enters a Low Power State e.g. lower power consumption than in the Standard Operating State . In one implementation the entire media content resource is transferred before the next state i.e. Low Power State . In another implementation the issuance of a Transfer API call may be conditioned on an available capacity check at the client device to ensure there is enough storage space available for the requested media content resource . In yet another implementation the issuance of the Transfer API call may cause a negotiation between the client device and the remote storage device about the size of segments of the media content resource loaded in each loading phase. For example the media content may be incrementally loaded to the client device in segments between which the remote storage device may enter a low power state until the next segment is requested.

After the transfer of the media content is completed the client device can wake up the remote storage device by issuing a Wake API call to the IP address of the remote storage device. This API call may be made in background processing on the client device. Responsive to this API call the remote storage device transitions to a higher power mode and restores its gateway settings in a Restored Gateway State . An example of such settings are shown below 

Although the Restored Gateway State includes a restoration of the gateway at the remote storage device the DHCP settings in the client device are not yet restore. Therefore the client device does not have gateway access to the remote storage device. Accordingly the client device can issue a Restore API call to the IP address of the remote storage device. This API call may also be made in background processing on the client device. Responsive to this API call the remote storage device and the client device reset the communications connection e.g. renewing the DHCP lease for the client device which sets the client device s DHCP gateway address and DNS server address to match those of the remote storage device. Accordingly the remote storage device returns to the Standard Operating State with regard to the client device.

The client device receives the media content from the remote storage device in a receiving operation and begins playing the media content in a playback operation . At some point during playback the client device attempts to renew its DHCP lease e.g. 5 minutes after its last renewal attempt . Based on the disabled gateway at the remote storage device the renewal attempt by the client device results in its DHCP settings being modified to reflect the disabled state of the gateway e.g. setting the DHCP gateway address and DNS server address to NULL and increasing the lease time . Because the lease time is increased to such a long time e.g. 6 hours the client device will not frequently wake up the remote storage device after in enters low power mode in an attempt to renew the lease.

The client device and remote storage device complete the media content transfer in transfer operations and respectively. Thereafter the client device continues to playback the media content from its internal storage in a playback operation and the remote storage device enters a low power mode in a suspend operation .

The I O section may connect to one or more user interface devices e.g. a keyboard a touch screen display unit etc. or a disc storage unit . Computer program products containing mechanisms to effectuate the systems and methods in accordance with the described technology may reside in the memory section or on the storage unit of such a system .

A communication interface is capable of connecting the computer system to a network via the network link through which the computer system can receive instructions and data embodied in a carrier wave. When used in a local area networking LAN environment the computing system is connected by wired connection or wirelessly to a local network through the communication interface which is one type of communications device. When used in a wide area networking WAN environment the computing system typically includes a modem a network adapter or any other type of communications device for establishing communications over the wide area network. In a networked environment program modules depicted relative to the computing system or portions thereof may be stored in a remote memory storage device. It is appreciated that the network connections shown are examples of communications devices for and other means of establishing a communications link between the computers may be used.

In an example implementation gateway functionality media content transfer modules power management modules API calling modules and other modules and services may be embodied by instructions stored in memory and or the storage unit and executed by the processor . Further local computing systems remote data sources and or services and other associated logic represent firmware hardware and or software configured to manage gateway access communications and power management. Such services may be implemented using a general purpose computer and specialized software such as a server executing service software a special purpose computing system and specialized software such as a mobile device or network appliance executing service software or other computing configurations. In addition program data such as media content DHCP settings data read from and written to a storage device and other data may be stored in the memory and or the storage unit and executed by the processor .

The implementations of the invention described herein are implemented as logical steps in one or more computer systems. The logical operations of the present invention are implemented 1 as a sequence of processor implemented steps executing in one or more computer systems and 2 as interconnected machine or circuit modules within one or more computer systems. The implementation is a matter of choice dependent on the performance requirements of the computer system implementing the invention. Accordingly the logical operations making up the implementations of the invention described herein are referred to variously as operations steps objects or modules. Furthermore it should be understood that logical operations may be performed in any order unless explicitly claimed otherwise or a specific order is inherently necessitated by the claim language. Furthermore one of more portions of the various processes disclosed above with respect to may be implemented by software hardware firmware or combination thereof.

A power logic and supply module provides power from a battery or other power supply e.g. an electrical connection and manages the power consumption of the remote storage device . In one implementation the power logic and supply module manages multiple power modes examples of which are shown below 

It should be understood that a low power mode is an operational mode of a device that consumes relatively less power than a high power mode. 

The remote storage device also includes a content manager that manages content stored on the remote storage device . The content manager among other functions 1 manages receipt of content 2 stores such content in and accesses such content from content storage and 3 transfers such content from the content storage to other devices via its interface logic. Storage modules may be combined into an integrated module and may include combinations of memory SSD magnetic storage discs and other storage components. The content manager processes the API calls from one or more client devices to manage content transfers communications and power management.

It should be understood that described and recited operations may be performed in any order unless explicitly claimed otherwise or a specific order is inherently necessitated by the claim language. The data storage and or memory may be embodied by various types of storage such as hard disc media optical media solid state drive technology ROM read only memory RAM and other technology. The operations may be implemented in firmware software hard wired circuitry gate array technology and other technologies whether executed or assisted by a microprocessor a microprocessor core a microcontroller special purpose circuitry or other processing technologies.

The above specification examples and data provide a complete description of the structure and use of exemplary embodiments of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended. Furthermore structural features of the different embodiments may be combined in yet another embodiment without departing from the recited claims.

