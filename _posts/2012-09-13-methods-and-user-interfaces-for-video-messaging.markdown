---

title: Methods and user interfaces for video messaging
abstract: Systems and techniques for transferring electronic data between users of a communications system by receiving, at an instant messaging host, a video file from a sender and intended for a recipient; authenticating the video file; and sending the video file to the intended recipient.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09071725&OS=09071725&RS=09071725
owner: FACEBOOK, INC.
number: 09071725
owner_city: Menlo Park
owner_country: US
publication_date: 20120913
---
The present application is a continuation of U.S. application Ser. No. 13 316 362 filed Dec. 9 2011 entitled Video Messaging which is a continuation of U.S. application Ser. No. 13 118 187 filed May 27 2011 which is now issued as U.S. Pat. No. 8 087 678 which is a continuation of U.S. application Ser. No. 09 911 799 filed Jul. 25 2001 which is now issued as U.S. Pat. No. 7 984 098 which claims priority from U.S. provisional application No. 60 220 648 filed Jul. 25 2000. Each of the aforementioned patent s and applications s are hereby incorporated by reference in their entirety.

The present invention relates generally to transferring electronic data between subscribers of a communications system and more particularly to transferring video instant messages between subscribers of an instant messaging host.

Online service providers offer new services and upgrade existing services to enhance their subscribers online experience. Subscribers have on demand access to news weather financial sports and entertainment services as well as the ability to transmit electronic messages and to participate in online discussion groups. For example subscribers of online service providers such as America Online or CompuServe may view and retrieve information on a wide variety of topics from servers located throughout the world. A server may be maintained by the service provider or by a third party provider who makes information and services available through the worldwide network of computers that make up the online service.

America Online has provided subscribers with the ability to send and receive instant messages. Instant messages are private online conversations between two or more people who have subscribed to the instant messaging service and have installed the necessary software. Because such online conversations take place virtually in real time instant messaging can provide immediate access to desired information. Instant messaging is becoming a preferred means of communicating among online subscribers.

In one general aspect electronic data is transferred between users of a communications system by enabling instant messaging communication between a sender and at least one recipient through an instant messaging host. In addition video communication is enabled between the sender and the recipient through the instant messaging host.

Implementations may include one or more of the following features. For example implementations may include receiving and authenticating a text instant message from the sender at the instant messaging host determining capabilities of the recipient reporting the capabilities of the recipient receiving a request to establish video communication from the sender and or the recipient and or authenticating the request. Authenticating may include identifying a screen name and or an IP address of the sender and or the recipient. Determining capabilities of the recipient may include identifying hardware or software associated with the recipient. A user interface may be displayed according to the capabilities of the recipient.

Video communication may be enabled by establishing a generic signaling interface channel a control channel and an audio channel between the sender and the recipient. The control channel may include a TCP IP socket. The audio channel may include a UDP or TCP channel.

These and other general aspects may be implemented by an apparatus and or by a computer program stored on a computer readable medium. The computer readable medium may comprise a disc a client device a host device and or a propagated signal.

Other features and advantages will be apparent from the following description including the drawings and from the claims.

For illustrative purposes show aspects of a communications system for transferring electronic data between a client and a host. For brevity several elements in the figures are represented as monolithic entities. Such elements however may represent numerous interconnected computer systems and or components. An addressing scheme such as for example Uniform Resource Locators URLs may be used to define the location and type of each element and or component of the communications system.

The terms client and host generally refer to a role as a requester of data client or a provider of data host . For example data requested by a client may be transferred directly or indirectly from a host through a network and finally to the client. Elements of the communications system however may request data in one transaction and provide data in another transaction thus having dual and or changing roles.

Referring to a communications system is capable of delivering and exchanging data between a client system and a host system through a communications link . The client system may include one or more client devices and or client controllers and the host system may include one or more host devices and or host controllers . For example the client system or the host system may include one or more general purpose computers e.g. personal computers one or more special purpose computers e.g. devices specifically programmed to communicate with each other and or the client system or the host system or a combination of one or more general purpose computers and one or more special purpose computers. The client system and the host system may be arranged to operate within or in concert with one or more other systems such as for example one or more local area networks LANs and or one or more wide area networks WANs . The client device the client controller the host device and the host controller each may include one or more hardware components and or software components.

In general a device e.g. client device and or host device executes instructions under the command of a controller e.g. client controller and or host controller and is connected to such controller by a wired and or wireless data pathway e.g. pathway and or pathway capable of delivering data. An example of a device e.g. client device and or host device is a general purpose computer e.g. a personal computer server capable of responding to and executing instructions in a defined manner. Other examples include a special purpose computer a workstation a component other physical or virtual equipment and or some combination thereof capable of responding to and executing instructions and or capable of peer to peer communications.

An example of a controller e.g. client controller and or host controller is a software application for commanding and directing communications. Other examples include a program a piece of code an instruction a computer a computer system and or a combination thereof for independently or collectively instructing a device e.g. client device and or host device to interact and operate as described. A controller e.g. client controller and or host controller may be embodied permanently or temporarily in any type of machine component physical or virtual equipment storage medium or propagated signal capable of providing instructions to a device e.g. client device and or host device .

The communications link may include a delivery network for directly or indirectly connecting the client system and the host system irrespective of physical separation. The delivery network may include one or more interconnected networks such as for example the Internet the World Wide Web Web a WAN a LAN an analog and or a digital wired or wireless telephone network e.g. PSTN ISDN and xDSL a radio network a television network a cable network a satellite network and or any other delivery mechanism for carrying data. The delivery network also may include several intermediate and or routing devices such as for example proxy servers bridges and routers. The communications link may include one or more communication pathways e.g. pathway and or pathway that enable communications through the delivery network . Each communication pathway e.g. pathway and or pathway may include for example a wired wireless cable or satellite communication pathway.

Examples of each element within the communications system of are broadly described above with respect to . In particular the host system and communications link may have attributes comparable to those described with respect to host system and communications link of . Likewise the client system of may have attributes comparable to and illustrates one possible implementation of the client system of .

In one implementation the client device includes a general purpose computer having an internal or external storage for storing data and programs such as an operating system e.g. DOS Windows Windows 95 Windows 98 Windows 2000 Windows Me Windows XP Windows NT OS 2 or Linux and one or more application programs. Examples of application programs include authoring applications e.g. word processing database programs spreadsheet programs or graphics programs capable of generating documents or other electronic content client applications e.g. AOL client CompuServe client AIM client AOL TV client or ISP client capable of communicating with other computer users accessing various computer resources and viewing creating or otherwise manipulating electronic content and browser applications e.g. Netscape s Navigator Microsoft s Internet Explorer Java s microbrowser capable of rendering Internet content.

The general purpose computer also includes a central processing unit CPU for executing instructions in response to commands from the client controller . The client controller may include one or more of the application programs installed on the internal or external storage of the general purpose computer . The client controller also may include application programs externally stored in and performed by one or more device s external to the general purpose computer .

The general purpose computer includes a communication device for sending and receiving data. One example of the communication device is a modem. Other examples include a transceiver a set top box a communication card a satellite dish an antenna or another network adapter capable of transmitting and receiving data over the communications link through a wired or wireless data pathway . The general purpose computer also may include a television TV tuner for receiving TV programming in the form of a broadcast reception satellite transmission and or cable signal. As a result the client device can selectively and or simultaneously display network content received by communications device and television programming content received by the TV tuner .

The general purpose computer also includes an input output interface for wired or wireless connection to various peripheral devices . Examples of peripheral devices include but are not limited to a mouse a mobile phone a personal digital assistant PDA an MP3 player not shown a keyboard a display monitor with or without a touch screen input a TV remote control for receiving information from and rendering information to subscribers and an audiovisual input device e.g. Web cam video camera microphone speakers .

Although illustrates devices such as a mobile telephone a PDA an MP3 player not shown and a TV remote control as being peripheral with respect to the general purpose computer in another implementation such devices may themselves include the functionality of the general purpose computer and operate as the client device . For example the mobile phone or the PDA may include computing and networking capabilities and function as a client device by accessing the delivery network and communicating with the host system . Furthermore the client system may include one some or all of the components and devices described above.

Referring to a communications system is capable of delivering and exchanging information between a client system and a host system through a communication link . The client system may include one or more client devices and one or more client controllers for controlling the client devices . The host system may include one or more host devices and one or more host controllers for controlling the host devices . The communications link may include communication pathways enabling communications through the one or more delivery networks .

Examples of each element within the communications system of are broadly described above with respect to . In particular the client system and the communications link may have attributes comparable to those described with respect to client systems and and communications links and of . Likewise the host system of may have attributes comparable to and illustrates one possible implementation of the host systems and shown in .

The host system includes a host device and a host controller . The host controller is generally capable of transmitting instructions to any or all of the elements of the host device . For example in one implementation the host controller includes one or more software applications loaded on the host device . In other implementations as described above the host controller may include any of several other programs machines and devices operating independently or collectively to control the host device .

The host device includes a login server for enabling access by subscribers and for routing communications between the client system and other elements of the host device . The host device also includes various host complexes such as the depicted OSP Online Service Provider host complex and IM Instant Messaging host complex . To enable access to these host complexes by subscribers the client system includes communication software for example an OSP client application and an IM client application. The OSP and IM communication software applications are designed to facilitate the subscriber s interactions with the respective services and in particular may provide access to all the services available within the respective host complexes.

Typically the OSP host complex supports different services such as email discussion groups chat news services and Internet access. The OSP host complex is generally designed with an architecture that enables the machines within the OSP host complex to communicate with each other and employs certain protocols i.e. standards formats conventions rules and structures to transfer data. Examples of protocols include but are not limited to hypertext transfer protocol HTTP user datagram protocol UDP and or layer two tunneling protocol L2TP . The OSP host complex also may employ one or more proprietary OSP protocols and custom dialing engines to enable access by selected client applications. The OSP host complex may define one or more specific protocols for each service based on an underlying protocol.

The IM host complex may be independent of or included in the OSP host complex . The IM host complex may support instant messaging services for OSP subscribers as well as for subscribers to other networks. Thus the IM host complex may enable instant messaging irrespective of an IM subscriber s Internet service provider. The IM host complex also may support associated services such as administrative support advertising directory services chat and interest groups related to the instant messaging. The IM host complex has an architecture that enables all of the machines within the IM host complex to communicate with each other. The IM host complex may employ one or more standard and or proprietary protocols to transfer data.

The host device may include one or more gateways e.g. OSP host complex gateway and or IM host complex gateway that connect and link complexes e.g. the OSP host complex and the IM host complex . Such gateways may directly or indirectly link host complexes through wired and or wireless pathways. Ordinarily when used to facilitate a link between complexes a gateway e.g. OSP host complex gateway and or IM host complex gateway is privy to information regarding the protocol type anticipated by a destination complex which enables any necessary protocol conversion to be performed incident to the transfer of data from one complex to another. For instance the OSP host complex and IM host complex may use different protocols such that transferring data between the complexes requires protocol conversion by or at the request of a gateway e.g. OSP host complex gateway and or the IM host complex gateway .

Referring to a communications system is capable of delivering and exchanging information between a client system and a host system through a communication link . The client system may include one or more client devices and one or more client controllers for controlling the client devices . The host system may include one or more host devices and one or more host controllers for controlling the host devices . The communications link may include communication pathways enabling communications through the one or more delivery networks . As shown the client system may access the Internet through the host system .

Examples of each element within the communications system of are broadly described above with respect to . In particular the client system and the communications link may have attributes comparable to those described with respect to client systems and and communications links and of . Likewise the host system of may have attributes comparable to and illustrates one possible implementation of the host systems and shown in . describes an aspect of the host system focusing primarily on one particular implementation of OSP host complex .

The client system includes a client device and a client controller . The client controller is generally capable of establishing a connection to the host system including the OSP host complex the IM host complex and or the Internet . In one implementation the client controller includes an OSP application for communicating with servers in the OSP host complex using exclusive OSP protocols. The client controller also may include applications such as an IM client application and or an Internet browser application for communicating with the IM host complex and the Internet .

The host system includes a host device and a host controller . In general the host controller is capable of transmitting instructions to any or all of the elements of the host device . For example in one implementation the host controller includes one or more software applications loaded on one or more elements of the host device . In other implementations as described above the host controller may include any of several other programs machines and devices operating independently or collectively to control the host device .

The host system includes a login server capable of enabling communications with and authorizing access by client systems to various elements of the host system including an OSP host complex and an IM host complex . The login server may implement one or more authorization procedures to enable simultaneous access to the OSP host complex and the IM host complex . The OSP host complex and the IM host complex are connected through one or more OSP host complex gateways and one or more IM host complex gateways . Each OSP host complex gateway and IM host complex gateway may perform any protocol conversions necessary to enable communications between the OSP host complex the IM host complex and the Internet .

The OSP host complex supports a set of services from one or more servers located internal to and external from the OSP host complex . Servers external to the OSP host complex generally may be viewed as existing on the Internet . Servers internal to the OSP complex may be arranged in one or more configurations. For example servers may be arranged in centralized or localized clusters in order to distribute servers and subscribers within the OSP host complex .

In one implementation of the OSP host complex includes a routing processor . In general the routing processor will examine an address field of a data request use a mapping table to determine the appropriate destination for the data request and direct the data request to the appropriate destination. In a packet based implementation the client system may generate information requests convert the requests into data packets sequence the data packets perform error checking and other packet switching techniques and transmit the data packets to the routing processor . Upon receiving data packets from the client system the routing processor may directly or indirectly route the data packets to a specified destination within or outside of the OSP host complex . For example in the event that a data request from the client system can be satisfied locally the routing processor may direct the data request to a local server . In the event that the data request cannot be satisfied locally the routing processor may direct the data request externally to the Internet or the IM host complex through the gateway .

The OSP host complex also includes a proxy server for directing data requests and or otherwise facilitating communication between the client system and the Internet . The proxy server may include an IP Internet Protocol tunnel for converting data from OSP protocol into standard Internet protocol and transmitting the data to the Internet . The IP tunnel also converts data received from the Internet in the standard Internet protocol back into the OSP protocol and sends the converted data to the routing processor for delivery back to the client system .

The proxy server also may allow the client system to use standard Internet protocols and formatting to access the OSP host complex and the Internet . For example the subscriber may use an OSP TV client application having an embedded browser application installed on the client system to generate a request in standard Internet protocol such as HTTP. In a packet based implementation data packets may be encapsulated inside a standard Internet tunneling protocol such as UDP for example and routed to the proxy server . The proxy server also may include an L2TP tunnel capable of establishing a point to point protocol PPP session with the client system .

The proxy server may act as a buffer between the client system and the Internet and may implement content filtering and time saving techniques. For example the proxy server can check parental controls settings of the client system and request and transmit content from the Internet according to the parental control settings. In addition the proxy server may include one or more caches for storing frequently accessed information. If requested data is determined to be stored in the caches the proxy server may send the information to the client system from the caches and avoid the need to access the Internet .

Referring to a communications system is capable of delivering and exchanging information between a client system and a host system through a communication link . The client system may include one or more client devices and one or more client controllers for controlling the client devices . The host system may include one or more host devices and one or more host controllers for controlling the host devices . The communications link may include communication pathways enabling communications through the one or more delivery networks . As shown the client system may access the Internet through the host system .

Examples of each element within the communications system of are broadly described above with respect to . In particular the client system and the communications link may have attributes comparable to those described with respect to client systems and and communications links and of . Likewise the host system of may have attributes comparable to and illustrates one possible implementation of the host systems and shown in . describes an aspect of the host system focusing primarily on one particular implementation of the IM host complex .

The client system includes a client device and a client controller . In general the client controller is capable of establishing a connection to the host system including the OSP host complex the IM host complex and or the Internet . In one implementation the client controller includes an IM application for communicating with servers in the IM host complex utilizing exclusive i.e. proprietary IM protocols. The client controller also may include applications such as an OSP client application and or an Internet browser application for communicating with the OSP host complex and the Internet respectively.

The host system includes a host device and a host controller . In general the host controller is capable of transmitting instructions to any or all of the elements of the host device . For example in one implementation the host controller includes one or more software applications loaded on one or more elements of the host device . However in other implementations as described above the host controller may include any of several other programs machines and devices operating independently or collectively to control the host device .

The host system includes a login server capable of enabling communications with and authorizing access by client systems to various elements of the host system including an OSP host complex and an IM host complex . The login server may implement one or more authorization procedures to enable simultaneous access to the OSP host complex and the IM host complex . The OSP host complex and the IM host complex are connected through one or more OSP host complex gateways and one or more IM host complex gateways . Each OSP host complex gateway and IM host complex gateway may perform any necessary protocol conversions to enable communication among the OSP host complex the IM host complex and or the Internet .

In one implementation to begin an instant messaging session the client system accesses the IM host complex and establishes a connection to the login server . The login server determines whether the particular subscriber is authorized to access the IM host complex by verifying a subscriber identification and password. If the subscriber is authorized to access the IM host complex the login server employs a hashing technique on the subscriber s screen name to identify a particular IM server for use during the subscriber s session. The login server provides the client system with the IP address of the particular IM server gives the client system an encrypted key i.e. a cookie and breaks the connection. The client system then uses the IP address to establish a connection to the particular IM server through the communications link and obtains access to that IM server using the encrypted key. The client system may be equipped with a Winsock application programming interface API that enables the client system to establish an open transmission control protocol TCP connection to the IM server .

Once a connection to the IM server has been established the client system may directly or indirectly transmit data to and access content from the IM server and one or more associated domain servers . The IM server supports the fundamental instant messaging services and the domain servers may support associated services such as for example administrative matters directory services chat and interest groups. In general the purpose of the domain servers is to lighten the load placed on the IM server by assuming responsibility for some of the services within the IM host complex . By accessing the IM server and or the domain server a subscriber can use the IM client application to view whether particular subscribers buddies are online exchange instant messages with particular subscribers participate in group chat rooms trade files such as pictures invitations or documents find other subscribers with similar interests get customized news and stock quotes and search the World Wide Web.

In the implementation of the IM server is directly or indirectly connected to a routing gateway . The routing gateway facilitates the connection between the IM server and one or more alert MUXs MUXs for example by serving as a link minimization tool or hub to connect several IM servers to several alert MUXs . In general an alert MUX maintains a record of alerts and subscribers registered to receive the alerts.

Once the client system is connected to the alert MUX a subscriber can register for and or receive one or more types of alerts. The connection pathway between the client system and the alert MUX is determined by employing another hashing technique at the IM server to identify the particular alert MUX to be used for the subscriber s session. Once the particular MUX has been identified the IM server provides the client system with the IP address of the particular alert MUX and gives the client system an encrypted key i.e. a cookie . The client system then uses the IP address to connect to the particular alert MUX through the communication link and obtains access to the alert MUX using the encrypted key.

The alert MUX is connected to an alert gate that like the IM host complex gateway is capable of performing the necessary protocol conversions to form a bridge to the OSP host complex . The alert gate is the interface between the IM host complex and the physical servers such as servers in the OSP host complex where state changes are occurring. In general the information regarding state changes will be gathered and used by the IM host complex . However the alert MUX also may communicate with the OSP host complex through the IM host complex gateway for example to provide the servers and subscribers of the OSP host complex with certain information gathered from the alert gate .

The alert gate can detect an alert feed corresponding to a particular type of alert. The alert gate may include a piece of code i.e. alert receive code capable of interacting with another piece of code i.e. alert broadcast code on the physical server where a state change occurs. In general the alert receive code installed on the alert gate instructs the alert broadcast code installed on the physical server to send a feed to the alert gate upon the occurrence of a particular state change. Upon detecting a feed the alert gate contacts the alert MUX which in turn informs the client system of the detected feed.

In the implementation of the IM host complex also includes a subscriber profile server connected to a database for storing large amounts of subscriber profile data. The subscriber profile server may be used to enter retrieve edit manipulate or otherwise process subscriber profile data. In one implementation a subscriber s profile data includes for example the subscriber s buddy list alert preferences designated stocks identified interests and geographic location. The subscriber may enter edit and or delete profile data using an installed IM client application on the client system to interact with the subscriber profile server .

Because the subscriber s data is stored in the IM host complex the subscriber does not have to reenter or update such information in the event that the subscriber accesses the IM host complex using a new and or different client system . Accordingly when a subscriber accesses the IM host complex the IM server can instruct the subscriber profile server to retrieve the subscriber s profile data from the database and to provide for example the subscriber s buddy list to the IM server and the subscriber s alert preferences to the alert MUX . The subscriber profile server also may communicate with other servers in the OSP host complex to share subscriber profile data with other services. Alternatively user profile data may be saved locally on the client device .

Referring to a sender a recipient and a host transfer video data according to a procedure . The procedure may be implemented by any suitable type of hardware e.g. device computer computer system equipment component software e.g. program application instructions code storage medium e.g. disk external memory internal memory propagated signal or combination thereof.

Examples of each element of are broadly described with respect to above. In particular the sender and the recipient may have attributes comparable to those described with respect to client devices and and or client controllers and . The host may have attributes comparable to those described with respect to host device and and or host controllers and . The sender the recipient and or the host may be directly or indirectly interconnected through a known or described delivery network.

In one implementation the sender is associated with a first subscriber and the recipient is associated with a second subscriber and each of the sender and the recipient include a client application for accessing the host . Each subscriber may use the client application to set individual preferences for allowing messages and or files to be transferred to and from other subscribers. Typically a graphical user interface UI is displayed that allows each subscriber to select among various levels of security and or to grant or deny access to others subscribers. A subscriber s transfer preferences may be maintained locally at the client or remotely at the host . In this example the transfer preferences are set to allow messages and files to be transferred between the sender and the recipient

In order to communicate using instant messaging the sender and the recipient must be accessing the host at the same time. To access the host the sender and the recipient each send a separate request to the host . The request identifies the associated subscriber to the host and to other subscribers using a unique screen name. The host verifies a subscriber s information e.g. screen name and password against data stored in a subscriber database. If the subscriber s information is verified the host authorizes access. If the subscriber s information is not verified the host denies access and sends an error message.

After being authorized the sender and the recipient can communicate over a direct i.e. socket connection established through the host . The sender and the recipient use the connection to communicate with the host and with each other. The connection remains open during the time that the sender and the recipient are accessing the host . The sender and the recipient each may include a Winsock API for opening and establishing a TCP connection to the host .

Upon accessing the host a buddy list is displayed to the subscriber. In general a subscriber s buddy list is a user interface that lists the online status and capabilities of certain screen names i.e. buddies identified by the subscriber. In particular the host informs the sender whether identified buddies are online i.e. currently accessing the host . The host also informs any subscriber who has identified the sender as a buddy that the sender is currently online. The buddy list also facilitates instant messaging communication between subscribers. A subscriber can activate an instant messaging message user interface pre addressed to a buddy simply by clicking the screen name of a buddy on the buddy list. If a recipient is not a buddy the first subscriber must activate a blank instant messaging user interface and then address it to the screen name of the intended recipient. When necessary a subscriber can look up the screen name of an intended recipient using the intended recipient s e mail address. In addition to exchanging instant messages with online buddies the sender may participate in group chat rooms locate other subscribers with similar interests get customized news and stock quotes search the Web and transfer files to and from other subscribers.

Video messaging i.e. video enabled instant messaging further extends the functionality of instant messaging by allowing the sender and the recipient to communicate peer to peer using video i.e. camera microphone and speaker. In the implementation of a sender a recipient and a host interact according to a procedure to send and receive a video message i.e. video instant message .

Initially the sender accesses the host step . In one implementation the sender is a subscriber and or a client e.g. client system and the host includes one or more host complexes e.g. OSP host complex and or IM host complex for providing instant messaging capability and coordinating the transfer of electronic data between subscribers. The sender may access the host using any available device e.g. computer PC laptop appliance pager PDA interactive TV telephone and or a controller e.g. software program client application browser application .

The sender designates at least one recipient to receive an instant message step generates an instant message step and then transmits the instant message to the host step . The instant message may be for example a text instant message or other non video instant message e.g. voice message created by the sender . The recipient may be a subscriber and or client e.g. client system capable of accessing the host using a device e.g. computer PC laptop appliance pager PDA interactive TV telephone and or a controller e.g. software program client application browser application . In one implementation a screen name associated with the intended recipient has been identified as a buddy of the sender and a UI e.g. buddy list indicating the online status and capabilities of the recipient is displayed to the sender . Thus the sender can confirm that the recipient is able to communicate i.e. is online and then open an IM box by selecting e.g. clicking the screen name associated with the recipient . After composing an instant message and clicking a Send button the sender transmits the instant message to the host step .

The host receives the instant message from the sender step and then authenticates the instant message step . In one implementation the instant message includes header information identifying the message type the screen name and or IP address of the sender and the recipient and a randomly generated security number. A server e.g. IM server on the host may authenticate the instant message by matching the screen names and or IP addresses with those of valid subscribers stored in a reverse look up table. In the event that either the sender or recipient is not associated with a valid subscriber the host reports an error message.

After authenticating the instant message step the host detects the capabilities of the recipient step and reports the capabilities of the recipient to the sender step . In one implementation a network of servers e.g. IM servers on the host monitors and updates the online status client version and device type of connected subscribers in real time. The capability to use video messaging i.e. to receive a video instant message may depend on factors such as a subscriber s hardware e.g. device type software e.g. client version and or transfer preferences e.g. blocked screen names . In general to be video enabled the necessary software e.g. video enabled IM client application and video equipment e.g. audiovisual input device must be available to the sender and the recipient

Next the sender receives the report from the host step and displays a UI corresponding to the capabilities of the sender and or the recipient step . In general if the sender e.g. client system is not video enabled the sender displays a standard instant messaging UI. If the sender is video enabled then the sender displays a video enabled UI. In one implementation shown in a Video Messaging Buddy List UI includes a buddy list and a Video Message button for instructing the host to request a video message connection when clicked. The UI also may include other buttons not shown corresponding to additional capabilities e.g. voice IM of the sender and or the recipient

In another implementation shown in a Start Video Message UI includes an IM window for displaying a running transcript of an IM session a text message area for entering the text of an instant message and an IM toolbar for changing text or background colors changing text size emphasizing text e.g. bold italic or underlining and inserting objects e.g. emoticons hyperlinks images . The Start Video Message UI also includes IM buttons for performing IM functions such as sending instant messages canceling an instant message or IM session getting the profile of a sender and notifying the OSP of offending conduct. In addition the Start Video Message UI includes a notification and a Start VM Video Message button for instructing the host to request a video message connection when clicked.

After reporting the capabilities of the recipient to the sender step or at any time after authenticating the instant message step the host sends the instant message to the recipient step . The recipient accepts the instant message from the host step and displays a UI corresponding to the capabilities of the sender and or the recipient step . In general if the recipient is not video enabled then the recipient displays a standard instant messaging UI. If the recipient is video enabled the recipient displays a video messaging UI e.g. UI UI .

In the event both the sender and the recipient are video enabled either can initiate a video message session. In the implementation of the sender initiates a video message session by sending a connect request to the host step . The connect request may contain information including but not limited to the message type the screen name and or IP address of the sender and recipient and a randomly generated security number. The connect request may be created and sent automatically by clicking the Video Message button of the UI and or the Start VM button of the UI for example.

The host receives the connect request from the sender step authenticates the connect request from the sender step and then sends the connect request to the recipient step . The host may authenticate the video request for example by using a reverse look up table to match the screen names and or IP addresses with those of valid subscribers. In the event that either the sender or recipient is not associated with a valid subscriber the host reports an error message.

The recipient receives the connect request step and then displays a UI informing the recipient that the sender wants to engage in a video message session step . In one implementation shown in a Connect UI includes an IM window for displaying a running transcript of an IM session a text message area for entering the text of an instant message and an IM toolbar for changing text or background colors changing text size emphasizing text e.g. bold italic or underlining and inserting objects e.g. emoticons hyperlinks images . The Connect UI also includes IM buttons for performing IM functions such as sending instant messages canceling an instant message or IM session getting the profile of a sender and notifying the OSP of offending conduct. In addition the Connect UI includes a notification and a connect button for authorizing the host to establish a video message connection when clicked.

When presented with the connect request the recipient may ignore the connect request accept the connect request or cancel the instant message session. If the recipient accepts the connect request step for example by clicking the connect button the host establishes a video message session step that allows the sender to communicate with the recipient using video messaging.

After the host establishes a video message session step the sender generates a video message step . In one implementation shown in the sender is presented with an Instant Video Message UI . The Instant Video Message UI includes an IM window for displaying a running transcript of an IM session and a text message area for entering the text of an instant message. The Instant Video Message UI also includes a send video message window for recording previewing and or sending a video message a transfer indicator for indicating the transfer of data from the sender a Record button to start recording a video message a Send button to send a recorded video message and Clear button to delete a recorded video message. A screen name associated with the sender is displayed at the top of the send video message window . The Instant Video Message UI additionally includes a receive move message window for viewing a received video message and a transfer indicator for indicating the transfer of data to the sender . A screen name associated with the recipient is displayed at the top of the receive video message window .

Referring to a subscriber associated with the sender e.g. computer system running a video enabled instant messaging client may generate a video message step by clicking the Record button and speaking a message into video recording equipment such as for example a video camera with a speaker or other recording device e.g. audiovisual device capable of capturing sight and sound. In one implementation there are recording restrictions e.g. time size number for video messages placed on the sender . The sender e.g. IM client application and or the host e.g. IM may impose and or enforce the recording restrictions. For example the sender may not be able to record a video message longer than 15 seconds. The client may be configured however to automatically send a video message when the limit is reached and to begin recording another video message without user intervention.

After recording is complete the subscriber can preview the generated video message step . In one implementation the subscriber uses a display toolbar to play rewind fast forward and or otherwise view the recorded video message. If desired the subscriber can delete the recorded video message by clicking the clear button and record a new video message.

Referring to after determining that a recorded video message is acceptable for example by previewing step the subscriber and or sender can send the video message step . In one implementation the subscriber clicks the Send button which initiates the transfer of the video message to the recipient . The transfer indicator may change colors to indicate that video message data is being transmitted.

Referring to in one implementation the Instant Video Message UI includes only the send video message window the transfer indicator the Record button the Send button the Clear button the receive move message window and the transfer indicator to save screen real estate. This implementation may be especially attractive to a subscriber who does not like to type.

The host receives the video message from the client step . In one implementation a server e.g. IM server Domain Server on the host is configured to receive video messages. The host e.g. IM server Domain Server then authenticates the video message from the sender step . The host may authenticate the video message for example by using a reverse look up table to match the screen names and or IP addresses associated with the sender and or recipient to those of valid subscribers. In the event that either the sender or recipient is not associated with a valid subscriber the host reports an error message.

Next the host moderates the video message session step . In one implementation a server e.g. IM server Domain Server on the host is configured to moderate a video message session between at least one sender and at least one recipient . Moderating may include managing load conditions of the host by compressing decompressing caching and or allocating resources to efficiently store and forward video messages. Moderating also may include sampling and filtering video messages based on the capabilities and or preferences of a recipient . For example the host may sample a video message to determine viewing requirements and or content of the video message. If the host determines that the intended recipient is not capable of or does not wish to view a particular video message the host may discard modify and or otherwise filter the video message.

Moderating the video message session may include controlling the ability of at least one recipient to view a video message. For example the host may structure the video message session such that one or more recipients view the video message simultaneously. This type of control may be useful in a lecture setting in which one sender is responsible for a majority of the video messages. Moderating also may include controlling the ability of at least one sender to transmit a video message. For example when several senders are participating in a video message the host may limit the ability to transmit a video message only to one sender at a time. This type of control may be useful in a conference setting in which many senders are transmitting video messages.

Moderating the video message session also may include logging and or storing video messages in a queue as they are received. If video messages are received from several senders the host may queue the video messages according to arrival according to sender according to topic according to relevance and or according to any other ranking criteria. Video messages in the queue may be ordered deleted edited and or otherwise managed by the host .

The host also may allow the video message in the queue to be managed by at least one sender and or by at least one recipient . In the implementation shown in the recipient displays a Instant Video Message UI including a video message session window a Start Saving Session button a storage capacity bar a Play button and a Delete button . When clicked the Start Saving Session button requests the and or the host to save the video message session e.g. pending and viewed video messages . A video message session may be saved locally at the recipient or remotely at the host e.g. in a temporary file . The storage capacity bar indicates the percentage of storage capacity used. When the Play button is clicked a pending video message can be played out of order or a viewed video message can be replayed. When the Delete button is clicked a pending and or viewed video message can be deleted.

In another implementation the creator of a video message may decide that a pending video message has become irrelevant and instruct the host to delete the video message from the queue. The host would remove the pending video message from the queue and the pending video message would disappear from the video message session window displayed by the recipient

The host then sends the video message to the recipient step . The host may send the video message to the recipient without user intervention from the recipient and or may hold at the video message until receipt of a request from the recipient . For example referring again to the host may hold the video message and send a hypertext message identifying a pending video message to the sender . The hypertext message is displayed in the IM window and when clicked requests the host to download the pending video message to the recipient . When the video message is transferred from the to the recipient the transfer indicator may change colors.

The recipient receives step and displays step the video message. In one implementation the video message is displayed in the receive video message window . The video message may be displayed automatically after the hypertext message is clicked or delayed until the display toolbar is clicked. If the hypertext message is clicked again after the video message has been viewed the video message will be retrieved and replayed. The video message may be stored by the recipient as a video file e.g. QuickTime file or AVI file . Stored video files may be replayed or transferred to other users as an e mail attachment for example.

In one implementation an active video messaging session uses three communication channels a Generic Signaling Interface GSI channel a Control channel and a Video channel. The GSI channel is used by the video session to establish the initial connection. During this connection the local IP addresses are exchanged. After the initial connection phase is done the GSI channel is no longer used. By using the GSI channel the exchange of local IF addresses is only done when both users authorize such an exchange by for example clicking on the Connect button . These actions protect users from having their local LP address automatically obtained without their consent.

The Control channel is a TCP IP socket where the IP address and port number of the remote side are obtained through the GSI channel. The Control channel is used to send receive control attributes of the video session while the session is active. For example because some firewalls will not allow an external connection to a socket on the inside of the firewall the video tool attempts a connection from both sides of the session. This action allows a connection to be made if there is a maximum of one firewall within the connection. If there is a firewall on both sides the chances are that no connection can be made and the video session will fail. To work across two firewalls the user must obtain the port range used by video such that one of the firewalls can be modified to pass the range through.

The Video channel is a TCP IP socket used to transport video packets. This channel can either be UDP or TCP. In general UDP is used since it minimizes latency. However because some firewalls will not allow UDP packets to pass through the video channel may have to use TCP. The video tool indicates the mode i.e. TCP UDP or an auto mode where it attempts a UDP test and upon failure resorts to TCP.

Referring to a video tool displays a UI and a UI for allowing a user to tailor video message functionality. The UI enables the user to control video message compression. The video tool also may include security features to protect the integrity of transferred data. For example the video tool may compress data using a proprietary algorithm or may send the data in a proprietary protocol. The UI also enables the user to control the volume gain and level for the speaker and microphone.

The UI enables the user to control the display of the video picture. For example the UI includes settings for white balance gamma correction exposure flicker flip and or other video features.

The video tool may be any type of client controller e.g. software application program loaded on to a client device. The video tool responds to user interfaces and translates user commands into the appropriate actions with the client device. For example the video tool opens reads writes and closes the physical components on the client devices needed for video. The video tool also controls video and control channels with callbacks being executed to indicate status change.

A number of implementations have been described. Nevertheless it will be understood that various modifications may be made. In particular a video enabled IM client can conduct messaging sessions with any type of IM client capable of messaging. For example if the recipient does not have the capability to receive a video message the sender may store the video message as a video file and then transfer the video file to the recipient . The video file may be transferred as an e mail attachment or transferred directly through a socket connection as described in commonly owned U.S. patent application Ser. No. 09 572 952 which is incorporated by reference in its entirety. In this way a subscriber without camera equipment can still communicate with video enabled IM clients by viewing a transferred video file and then responding to the video file by sending an instant message.

