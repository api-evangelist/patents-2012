---

title: System for preventing unauthorized acquisition of information and method thereof
abstract: A server apparatus includes: an output detector for detecting output-processing which is processing of outputting data from the application program into a shared area; and an output control section for storing instruction information in the shared area, instead of storing the output data outputted from the application program therein, in response to the detection of the output-processing, the instruction information specifying an acquisition method by which an authorized client apparatus acquires the output data. The client apparatus includes: a reading detection section for detecting reading-processing which is processing of reading data from the shared area; and a reading control section which reads the instruction information from the shared area in response to the detection of the reading-processing, and which acquires the output data by the acquisition method specified by the instruction information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08881298&OS=08881298&RS=08881298
owner: International Business Machines Corporation
number: 08881298
owner_city: Armonk
owner_country: US
publication_date: 20120913
---
This application is a divisional application of U.S. patent application Ser. No. 12 095 033 now U.S. Pat. No. 8 380 937 and claims priority to PCT application JP2006 323748 filed Nov. 28 2006 which is based on Japanese patent application JP2005 341712 filed Nov. 28 2005.

The present invention relates to a system for preventing unauthorized acquisition of information and a method thereof. The present invention particularly relates to a system for preventing an unauthorized client apparatus from acquiring information from a server apparatus and a method thereof.

In recent years server based computing hereinafter referred to as SBC has drawn attention as a technique for preventing leakage of information. In the SBC a server apparatus executing an application program while a client apparatus displays an output from the server apparatus on a screen or transmits an input of a user to the server apparatus. Therefore data necessary for executing the application program and execution results are stored only in the server apparatus but are not stored in the client apparatus. In this manner unauthorized acquisition of confidential information through the client apparatus can be prevented.

In order to thoroughly preventing leakage of information it is preferable that the client apparatus do not have its own storage device therein and that the client apparatus should be a dedicated terminal called a thin client provided only with an input device and a display section. However such dedicated terminals have not been widespread in comparison with personal computers and therefore there is a problem that introduction of a dedicated terminal requires cost time and money. Additionally if the client apparatus includes its own storage device therein an application program which uses no confidential information can be operated in the client apparatus thereby making it possible to reduce a load on the server apparatus. For this reason there are many cases where a personal computer or the like is used as the client apparatus of the SBC under present circumstances.

However as long as the client apparatus includes its own storage device therein there is a risk that confidential information used in the server apparatus might be copied into the storage device of the client apparatus and be taken out illegally. For example in a Windows terminal server refer to Microsoft Corporation Terminal Service on the microsoft.com website using the following information technet prodtechnol windowsserver2003 ja library ServerHelp 7c464857 fe19 4cdf a39b dac3ff9b6b7c.mspx or the like a clipboard function for enabling the server apparatus and the client apparatus to share information in a virtual way is provided for the purpose of enhancing convenience of a user. By means of this function it is possible to output data not a displayed image of a screen but editable data such as character string data or numerical data into a clipboard from the server apparatus and then to copy the data into the storage device of the client apparatus.

On the other hand in the Windows terminal server MetaFrame of Citrix Systems Inc. refer to Citrix Systems Inc. Mechanism of MetaFrame Presentation Server available on the citrix.com.jp web site under products mps construction.html or the like a function of limiting accesses depending on an MAC address and an IP address of a client apparatus is provided. However there is a case where an access from an unauthorized client apparatus is admitted when the IP address and the MAC address are impersonated. Additionally with this function it is possible to uniformly prohibit any of accesses from a client apparatus regardless of kinds of the accesses but it is not possible to prohibit only an access of a specific kind. For example this function cannot control a certain client apparatus so as to be allowed only to read information but concurrently to be prohibited from taking out the information.

An object of the present invention is to provide a system a method a program a server apparatus and a client apparatus which are capable of solving the abovementioned problems. This object is achieved by a combination of features described in independent claims in the scope of claims. In addition dependent claims define still more advantageous examples in the present invention.

In order to solve the abovementioned problems in an embodiment of the present invention provided is a system including a server apparatus executing an application program and a client apparatus enabling a user to utilize the application program by communicating with the server apparatus based on an instruction of the user. In this system the server apparatus includes an output detection section for detecting output processing which is processing of outputting data from the application program into a shared area used for having information shared between the server apparatus and the client apparatus and an output control section for storing instruction information in the shared area instead of storing the output data outputted from the application program therein in response to the detection of the output processing the instruction information specifying an acquisition method by which an authorized client apparatus acquires the output data. Moreover in this system the client apparatus includes a reading detection section for detecting reading processing which is processing of reading data from the shared area and a reading control section which reads the instruction information from the shared area in response to the detection of the reading processing and which acquires the output data by the acquisition method specified by the instruction information.

It should be noted that all of necessary features of the present invention are not listed in the abovementioned summary of the present invention and that any sub combination consisting of a group of these features can be also considered as the present invention.

The present invention will be described by use of an embodiment of the invention hereinbelow however the following embodiment does not limit the invention described in the scope of claims. Furthermore it is not necessarily the case that all of the combinations of the features described in the embodiment are essential to solving means of the invention.

The information processing system shown in is called as SBC server based computing . In the information processing system it is not necessary to transmit data stored in the server apparatus to the client apparatus but sufficient to transmit only display screen data. Therefore the information processing system is considered to be effective in preventing the information leakage. On the other hand a clipboard function for causing the server apparatus and the client apparatus to share information has been also proposed for the SBC in order to enhance convenience of a user. Upon receipt of an instruction to copy data from a user via the application window this function makes it possible that the server apparatus writes the data stored in the server apparatus into a virtual clipboard. Additionally upon receipt of an instruction to paste data from the user via the application window the client apparatus reads out the data from the clipboard and makes the data available for use in the client apparatus .

The above mentioned clipboard function enables readout of data from the server apparatus and thereby has a possibility of being used for an unauthorized acquisition of the data. An object of the information processing system according to the embodiment of the present invention is to effectively prevent the information leakage by making various functions available only to an authorized client apparatus the various functions having a possibility of being inappropriately used in the SBC as described above. Functions for achieving this object will be described in a first example of the embodiment. Furthermore functions for control so as to prohibit a user from storing even a display image on a screen in the client apparatus will be described in second and third examples of the embodiment.

The server apparatus executing an application program a monitor program and an operating system . The client apparatus executes an application program a monitor program and an operating system . Here each of the operating system and the operating system includes not only a program which is so called a kernel for providing basic functions of the operating system but also a service program for providing various functions to an application program and various kinds of middleware for supporting operation of the application program.

The server apparatus includes a shared area in the RAM . The shared area is used for sharing information between the application program operating in the server apparatus and the application program operating in the client apparatus . Meanwhile the client apparatus includes a shared area in the RAM . The shared area is used for sharing information between the application programs and . That is for example the shared areas and are managed as virtual areas for sharing the information respectively by the service programs in the operating systems and . More specifically data written in the shared area are immediately transmitted to the client apparatus and then written in the shared area . Likewise data written in the shared area are immediately transmitted to the server apparatus and then written in the shared area .

The server apparatus further includes a local area in the RAM . The local area is accessible from the server apparatus and inaccessible from the client apparatus . Note that the shared area the local area and the shared area which have been presented hereinabove may be implemented not only by the respective RAMs but also by various recording media such as a hard disk drive.

In response to a detection of the output processing the output control section stores instruction information in the shared area instead of storing output data outputted from the application program therein. Here the instruction information specifies an acquisition method by which the authorized client apparatus acquires the output data. Specifically by use of a function of the operating system the output control section modifies the output data stored in the shared area into the instruction information by changing an argument parameter of the detected API call and the like. This instruction information may include authentication data for authenticating the client apparatus as an authorized client apparatus. Additionally the output control section stores the output data in the local area . Moreover the output control section may delete the output data from the local area in a case where an unauthorized access is detected. The authentication section receives the authentication data from the reading control section in the client apparatus in association with a request for acquiring the output data. In response to this the authentication section authenticates the client apparatus based on this authentication data. On condition that the authentication is succeeded the authentication section reads the output data from the local area and transmits the output data to the client apparatus .

Additionally the output control section stores restoration information in the shared area as the instruction information. The restoration information specifies a method of decrypting this converted output data. This restoration information includes a decrypting key for decrypting the encrypted output data and information for restoring the output data from the plurality of divided data. Furthermore this instruction information includes an identifier indicating that data stored in the shared area is not the output data but the instruction information. Thereby even if a client apparatus incapable of interpreting a meaning of this identifier can read any data from the shared area the client apparatus cannot restore output data. On the other hand an authorized client apparatus can adequately restore the original output data by appropriately allocating processing based on the identifier in a case either where the output data itself is stored in the shared area or where the instruction information is stored therein.

Note that even in a case where the output data are encrypted the output control section may not store the decrypting key as the restoration information in the shared area . In this case the client apparatus decrypts this output data by use of the decrypting key previously stored in the RAM or the like of the client apparatus . That is this decrypting key may be previously transmitted to the client apparatus from the server apparatus without using the shared area .

Hereinbelow descriptions will be given of processing flows of three applied examples to which the first example is applied.

This data copy processing is an instruction for outputting the data displayed by the application program into the shared area as internal processing data different from a displayed data image. To be more precise the internal processing data is not image data showing shapes of displayed letters but text data in which identifiers of letters constituting a character string are arranged. Such internal processing data is relatively easily reused as compared with the displayed image and is more likely to be abused when the data is taken out by an unauthorized client apparatus.

For this reason the output control section stores in the shared area the instruction information specifying an acquisition method instead of storing the output data itself outputted by data copy processing S therein. In addition the output control section stores this output data in the local area or stores in the shared area data obtained by converting this output data S . Accordingly it becomes possible to cause an unauthorized client apparatus to read the instruction information as the output data and thus to prohibit the unauthorized client apparatus from correctly acquiring the original output data.

The application program reads the internal processing data from the shared area and receives a data paste instruction from the user S . In response to the data paste instruction the data is controlled so as to be editable from the application program of the client apparatus . The reading detection section detects as the reading processing data paste processing in response to this data paste instruction S . In a case where the operating system is Windows registered trademark the output detection section may specifically detect an API call which is GetClipboardData as the reading processing. In response to the detection of the reading processing the reading control section reads the data from the shared area S .

On condition that this read data includes an identifier indicating that this data is the instruction information the reading control section acquires the output data in the acquisition method specified by the instruction information S . For example the reading control section may decrypt the encrypted output data with the decrypting key being read as the instruction information or may connect the plurality of divided data to one another based on the restoration information being read as the instruction information. This makes it possible to make the output data usable by the application program and to cause an authorized client apparatus to adequately acquire information from the server apparatus.

As mentioned hereinabove with the first applied example an unauthorized client apparatus can be prohibited from using the virtual clipboard whereby preventing data in the server apparatus from leaking in the editable form.

The application program receives an input of a print instruction S . In the client apparatus this print instruction is for example an instruction inputted to the application window by the user. The output detection section detects as the output processing processing of outputting a predetermined print command into the shared area S . This print command is a command for causing a printer accessible from the client apparatus to print data displayed by the application program . In response to the detection of the output processing the output control section outputs a dummy command into the shared area which is a print queue S . The dummy command is different from the print command and includes instruction information specifying a method of acquiring the print command. Then the output control section stores the print command in the local area or divides the print command to be stored in the shared area S . In a case of dividing the print command a plurality of virtual print queues may be provided in advance and the divided pieces of the print command may be outputted respectively into the virtual print queues.

Here in S it is not desirable that the dummy command include output data outputted from the server apparatus but it is desirable that the dummy command adhere to a print command format. Thereby a conventional print program can be used as a program for reading the command in the client apparatus whereby a cost in program development can be reduced.

In the client apparatus the application program receives an input of the print instruction S . The reading detection section detects as the above mentioned reading processing processing of reading a predetermined print command from the shared area S . This print command is a command for causing a printer accessible from the client apparatus to print the data displayed by the application program . In response to the detection of the reading processing the reading control section reads the dummy command from the shared area S . Then the reading control section acquires the print command in the acquisition method specified by the instruction information included in the dummy command and makes the print command usable by the application program S .

As described hereinabove with the second applied example an unauthorized client apparatus is prohibited from using the print function whereby preventing the information leakage caused by use of printing data stored in the server apparatus .

The application program receives a write instruction of a file into the file system S . The write instructions include instructions not only for newly producing a file in the file system but also for changing a file already stored in the file system. Then on condition that a target path which is designated for writing in the FS of the server apparatus by the application program is the shared FS the output detection section detects writing in this file system as the output processing S .

In response to the detection of the output processing the output control section writes the instruction information specifying a method of acquiring this file into this shared FS instead of writing a newly produced or updated file S . Then the output control section writes this file into the local area S .

In the client apparatus the application program receives an input of an instruction for reading a file from the file system S . Then the reading detection section detects this reading as the abovementioned reading processing on condition that the file to be targeted for readout in the shared FS is a file storing the instruction information S . In response to the detection of the reading processing the reading control section reads from this file in the shared FS the instruction information specifying the method of acquiring a file in which the normal output data is stored S . Then the reading control section reads this file from the local area in this specified acquisition method S . Thereby this file is managed so as to be available for the application program .

As described hereinabove according to the third applied example an unauthorized client apparatus is prohibited from using the function of sharing the file system whereby preventing leakage of data in the server apparatus .

In addition the output control section stores this mask pattern in the local area . Moreover the output control section transmits this scrambled pattern to the client apparatus instead of transmitting this display data so as to cause the display section to display this scrambled pattern. Processing of transmitting the scrambled pattern and causing the scrambled pattern to be displayed can be realized by a conventional known technique. For example with each of communication protocols respectively called RDP and ICA a display screen image can be transmitted and received between information processing apparatuses. In response to a screen display request received from the client apparatus the authentication section reads the mask pattern from the local area and transmits the mask pattern to the client apparatus .

As described hereinabove with the second example a client apparatus which does not perform overlay processing of the mask pattern is prohibited from displaying a normal screen image whereby preventing display data from being taken out illegally.

The information processing system includes the server apparatus and the client apparatus . The server apparatus executes an application program. the monitor program and an operating system by use of a CPU . The client apparatus executes an application program and an operating system by use of a CPU . The client apparatus does not need to execute the monitor program . Additionally the client apparatus includes a display section a graphic control section a DirectDraw control section and a RAMDAC . The graphic control section converts display data received from the server apparatus into signals transmittable to the display section and stores the signals in an on screen buffer a buffer for a main screen of a video RAM. Moreover without depending on the graphic control section the DirectDraw control section stores the display data received from the server apparatus in an off screen buffer a buffer for an overlaid screen of the video RAM. Note that each of the functions of the graphic control section and the DirectDraw control section may be implemented by a graphics chip and that a part of those functions may be implemented by software. The RAMDAC transfers the display data located on the video RAM to the display section . Additionally the RAMDAC functions as a composition processing section in the third example of the present invention. That is the RAMDAC realizes display in the display section by composing the display data stored in the on screen buffer and the display data stored in the off screen buffer and by transferring the composed display data to the display section .

As a result a screen based on the dummy display data is displayed by the graphic chip while a normal display screen is displayed by the DirectDraw control section . Since conventional functions such as PrintScreen target display screens under the control of an operating system with these functions only dummy display data is acquired and a normal display screen is not acquired. Thus according to the third example leakage of display screen data can be prevented without using a special program such as the monitor program .

The host controller mutually connects the RAM to the CPU and the graphic controller which access the RAM at a high transfer rate. The CPU operates based on the programs stored in the BIOS and RAM so as to make a control over each of the sections. The graphic controller acquires image data which the CPU or the like generates on a frame buffer provided in the RAM . Thereby the graphic controller displays the image data on a display section . Instead of this the graphic controller may include a frame buffer storing the image data generated by the CPU or the like therein. The display section in functions as for example the display section shown in . Additionally the graphic controller in functions as for example the graphics chip shown in .

The I O controller connects the host controller to the communication interface the hard disk drive and the CD ROM drive which are relatively high speed I O devices. The communication interface communicates with an external device through a network. The hard disk drive stores programs and data used by the information processing apparatus . The CD ROM drive reads a program or data from a CD ROM and provides the program or the data to the RAM or the hard disk drive .

Furthermore the BIOS as well as relatively low speed I O devices such as the flexible disk drive and the I O chip are connected to the I O controller . The BIOS stores a boot program executed by the CPU when the information processing apparatus is started other programs dependent on hardware of the information processing apparatus and the like. The flexible disk drive reads a program or data from a flexible disk and provides the program or the data to the RAM or to the hard disk drive through the I O chip . The flexible disk and various kinds of I O devices are connected to the I O chip and the latter I O devices are connected thereto respectively through for example a parallel port a serial port a keyboard port a mouse port and the like.

The information processing apparatus is provided by a user with a program stored in a recording medium such as the flexible disk the CD ROM or an IC card. The program is read from the recording medium and then is installed in the information processing apparatus through the I O chip and or I O controller so as to be executed therein. A description on operations which the program causes the information processing apparatus to perform is omitted here because these operations are identical to those in the server apparatus or the client apparatus which have been described with reference to .

The above mentioned program may be stored in an external recording medium. As the recording medium apart from the flexible disk and the CD ROM it is possible to use an optical recording medium such as DVD or PD a magneto optical recording medium such as MD a tape medium a semiconductor memory such as IC card or the like. Additionally it is also possible to use as the recording medium a recording device such as a hard disk a RAM or the like which are provided in a server system connected to a private communication network or the Internet so as to provide the program to the information processing apparatus through the network.

A service engineer installs the monitor program in a first information processing apparatus S . That is the service engineer implements at least anyone of the function of the output detection section that of the output control section and that of the authentication section in this information processing apparatus. Next the service engineer installs the monitor program in a second information processing apparatus S . That is the service engineer implements at least any of the function of the reading detection section and that of the reading control section in this information processing apparatus.

By the abovementioned processing the service engineer can cause a system consisting of a plurality of normal information processing apparatuses to function as the information processing system of the above mentioned embodiment.

According to the present invention it is possible to effectively prevent information leakage from the server apparatus.

Although the present invention has been described hereinabove by using the embodiment a technical scope of the present invention is not limited to the scope described in the above embodiment. It is obvious to those skilled in the art that various changes or modifications can be added to the above embodiment. It is obvious from descriptions in the scope of claims that a thus changed or modified embodiment can also be included in the technical scope of the present invention.

