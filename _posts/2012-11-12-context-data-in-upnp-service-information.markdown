---

title: Context data in UPNP service information
abstract: A system, device, and method provide for the selection of a device to perform a service using context information for the device. The context information may be included in a request from a control point device to the device or may be included in a response from the device to the control point device. The context information provides additional information relative to the services provided by the device or relative to the device itself. For example, if the device is a camera, the camera may include for each photograph taken by the camera a date the photograph is taken, a time the photograph is taken, a location at which the photograph is taken, a subject matter of the photograph, a temperature at the photograph location, a photographer, etc in the context information. Additionally, the camera may include the current geographic location of the camera in the context information.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08990302&OS=08990302&RS=08990302
owner: Core Wireless Licensing S.A.R.L.
number: 08990302
owner_city: Luxembourg
owner_country: LU
publication_date: 20121112
---
This application is a Divisional of U.S. patent application Ser. No. 10 922 417 entitled CONTEXT DATA IN UPNP SERVICE INFORMATION filed Aug. 20 2004 and is incorporated herein in its entirety as if set forth in full.

The present invention is related to networks. More particularly the present invention relates to resource discovery in a UPNP environment using context information.

Universal Plug and Play UPnP defines an architecture for the network connectivity of intelligent consumer electronics wireless devices printers and PCs of all form factors. The goal of UPnP technology is to provide easy to use flexible standards based connectivity for ad hoc or unmanaged networks whether in a home in a small business or in public spaces. In support of this goal UPnP supports zero configuration invisible networking and the automatic discovery of devices from a wide range of manufacturers. As a result a device can dynamically join a network obtain an IP address convey its capabilities to the network and determine the presence and capabilities of other devices. UPnP also provides a consistent interoperable framework for remote Internet Gateway Device IGD configuration and management. UPnP is built using Hypertext Transfer Protocol HTTP over the User Datagram Protocol Internet Protocol UDP IP or the Transmission Control Protocol Internet Protocol TCP IP in addition to the eXtensible Markup Language XML . HTTPU and HTTPMU are variants of HTTP defined to deliver messages over UDP IP instead of TCP IP.

Devices on a UPnP network can be connected using any communication media including Radio Frequency wireless including Radio Frequency IDentification RFID phone line power line IrDA Ethernet and Institute of Electrical and Electronics Engineers IEEE 1394. Thus any communication medium that can be used to network devices can enable UPnP.

UPnP is an open networking architecture that consists of services devices and control points. Services are groups of states and actions. For example a light switch has an on state and an off state. An action allows the network to determine the state of the switch or to change the state of the switch and is a command that can be used to trigger services to perform a function. Services typically reside in devices and provide device functionality that can be controlled using control points. A device may be a physical device such as a camcorder or a logical device such as a computer that is performing the functions of a camcorder. Devices may be physical or logical entities and are specified using simple XML descriptions and containing Application Programming Interfaces APIs for providing services. Physical devices may host multiple logical devices and each device may host multiple services. Control points are software applications that retrieve UPnP service and device descriptions that send actions to services and that receive events from services. A control point is capable of discovering and controlling other devices. An event is a message from a device to a control point that is used to keep subscribed control points informed of device status. A UPnP device may be a container for services and nested devices. For example a combination TV DVD player provides services and includes a nested device that may be the DVD player for example.

Messages are transported over UPnP networks using HTTP over the UDP IP or TCP IP. The supported message formats are Simple Service Discovery Protocol SSDP General Event Notification Architecture GENA and Simple Object Access Protocol SOAP . UPnP relies on these three protocols to enable networking without a classical network administrator. SSDP provides for the discovery of devices on the network. GENA provides for subscribing to event reports and for the publication of those events. SOAP provides for control of the network devices through remote procedure calls between control points and devices. Required UPnP information is inserted into all messages before they are formatted using SSDP GENA and SOAP and delivered via HTTP HTTPU or HTTPMU.

Given an IP address the first step in UPnP networking is discovery. The discovery process for a UPnP device includes advertisement of the device presence on the network to other devices and control points using SSDP. Thus when a device is added to a network the device advertises its services to the control points on the network. Similarly a new control point discovers UPnP devices on a network using SSDP. If an SSDP service hears a discovery request that matches a service that it offers then the service responds to the control point. Thus UPnP allows a control point to search for devices of interest on the network.

The information exchanged between the device and the control point in both cases is a discovery message that provide basic information about the devices or one of its services and a description Uniform Resource Locator URL that can be used to gather additional detailed information about the device. XML is used to describe the device features and capabilities. The notification announcement message URL points to an XML file in the network that contains a description of the UPnP device s capability. Thus by retrieving the XML file other devices can evaluate the features of the device and determine if the features satisfy their requirements. Thus after a control point discovers a device the control point retrieves the device s service description from the URL provided by the device in the discovery message. The UPnP description for a device includes a list of any embedded devices or service as well as URLs for control for eventing and for presentation.

The UPnP description for a service includes a list of actions the service responds to and a list of variables that model the state of the service. The service publishes updates when these variables change by sending event messages. A control point may subscribe to this information so that it automatically receives the updates. Event messages contain the names of one of more state variables and the current value of those variables. These messages are also expressed in XML and formatted using GENA. Thus after retrieving the description of the device the control point can send actions to a device s service by sending a suitable control message to the control URL for the service.

Control messages are also expressed in XML using SOAP. In response to the control message the service returns any action specific values. Additionally if a device has a URL for presentation the control point can retrieve a page from this URL load the page into a browser and depending on the capabilities of the page allow a user to control the device and or view device status. Each UPnP control request is a SOAP message that contains the action to invoke along with a set of parameters. The response is a soap message as well and contains the status return value and any return parameters. The control point can refine the search to find only devices of a particular type that perform particular services or a specific device. The control point can not however refine the search based on context information. Context information includes additional information about the device and the services that the device is capable of providing. For example the context information may include the current geographic location of the device. Context information may include the device availability for example if the device is a printer or a facsimile machine.

What is needed therefore is a method of including context information to refine a search for a device or a search for an item at a device in a UPnP environment. What is further needed is a method of including the existence of context information to refine a search for a device in a UPnP environment.

An exemplary embodiment of the invention relates to a device for performing a service for a second device. The device includes but is not limited to a memory a communication interface and a processor. The memory stores a device service description wherein the device service description includes context information of the device. The communication interface is configured to receive a request sent from a first device using a network the request to retrieve the device service description and to send a response to the first device using the network the response including the device service description. The processor couples to the communication interface and to the memory and is configured to select the device service description from the memory and to create the response including the device service description.

A format of the response may be but is not limited to a Simple Service Discovery Protocol and a Simple Object Access Protocol. A format of the request may be but is not limited to a Simple Service Discovery Protocol and a Simple Object Access Protocol. The context information may include but is not limited to a geographic location of the device.

Another exemplary embodiment of the invention relates to a device for selecting another device to perform a service. The device includes but is not limited to a communication interface and a processor. The communication interface is configured to send a first request to a first device using a network the first request to retrieve a first device service description from the first device the first device service description including context information of the first device and to receive a first response from the first device using the network the first response including the first device service description. The processor couples to the communication interface and is configured to select the first device to perform a first service for the device based on the context information of the first device included in the first device service description.

A format of the response may be but is not limited to a Simple Service Discovery Protocol and a Simple Object Access Protocol. A format of the request may be but is not limited to a Simple Service Discovery Protocol and a Simple Object Access Protocol. The context information may include but is not limited to a geographic location of the device.

The processor may be further configured to determine a geographic location of the device to determine a pointing direction to the first device from the device and to identify the first device based on the pointing direction to the first device from the device the geographic location of the first device and the geographic location of the device. The communication interface may be further configured to send a second request to a second device using the network the second request to retrieve a second device service description from the second device the second device service description including context information of the second device and to receive a second response from the second device using the network the second response including the second device service description. The processor may be further configured to select the second device to perform a second service related to the first service for the device based on the context information of the second device included in the second device service description. The context information of the second device may include but is not limited to a geographic location of the second device. The processor may be further configured to determine a pointing direction to the second device from the device and to identify the second device based on the pointing direction to the second device from the device the geographic location of the second device and the geographic location of the device.

Another exemplary embodiment of the invention relates to a system for selecting a device to perform a service. The system includes but is not limited to a first device and a second device. The first device includes but is not limited to a memory a first communication interface and a first processor. The memory stores a first device service description wherein the first device service description includes context information of the first device. The first communication interface is configured to receive a first request from a second device using a network the first request to retrieve the first device service description from the first device and to send a first response to the second device using the network the first response including the first device service description. The first processor couples to the first communication interface and to the memory and is configured to select the first device service description from the first memory and to create the first response including the first device service description.

The second device includes but is not limited to a second communication interface and a second processor. The second communication interface is configured to send the first request to retrieve the first device service description from the first device and to receive the first response from the first device. The second processor couples to the second communication interface and is configured to select the first device to perform a first service for the second device based on the context information of the first device included in the first device service description.

Another exemplary embodiment of the invention relates to a method of selecting a device to perform a service. The method includes but is not limited to retrieving a first device service description from a first device using a network the first device service description including context information of the first device and selecting the first device to perform a first service for a second device based on the context information of the first device included in the first device service description.

The context information of the first device may include but is not limited to a geographic location of the first device. Selecting the first device to perform the first service for the second device may include but is not limited to pointing the second device at the first device determining a geographic location of the second device determining a pointing direction to the first device from the second device and selecting the first device based on the pointing direction to the first device from the second device the geographic location of the first device and the geographic location of the second device.

The method may further include retrieving a second device service description from a third device using the network the second device service description including context information of the third device and selecting the third device to perform a second service related to the first service for the second device based on the context information of the third device included in the second device service description.

The context information of the third device may include but is not limited to a geographic location of the third device. Selecting the third device to perform the second service for the second device may include but is not limited to pointing the second device at the third device determining a pointing direction to the third device from the second device and identifying the third device based on the pointing direction to the third device from the second device the geographic location of the third device and the geographic location of the second device.

The method may further include selecting an item in a display at the second device while pointing the second device at the first device and releasing the item in the display at the second device while pointing the second device at the third device thereby copying the item from the first device to the third device.

Another exemplary embodiment of the invention relates to a computer program product for selecting a device to perform a service the computer program product includes but is not limited to computer code configured to retrieve a first device service description from a first device using a network the first device service description including context information of the first device and to select the first device to perform a first service for a second device based on the context information of the first device included in the first device service description.

Another exemplary embodiment of the invention relates to a device for performing a service for a second device. The device includes but is not limited to a communication interface and a processor. The communication interface is configured to receive a request sent from a first device using a network the request to perform a service at the device and the request including context information associated with the service and to send a response to the first device using the network. The processor couples to the communication interface and is configured to perform the service based on the context information.

Another exemplary embodiment of the invention relates to a device for requesting a service from another device. The device includes but is not limited to a communication interface and a processor. The communication interface is configured to send a request using a network to a first device the request to perform a service at the first device and the request including context information associated with the service and to receive a response from the first device. The processor couples to the communication interface and is configured to create the request including the context information.

Another exemplary embodiment of the invention relates to a system for requesting a service from another device. The system includes but is not limited to a first device and a second device. The first device includes but is not limited to a first communication interface and a first processor. The first communication interface is configured to receive a request sent from a second device using a network the request to perform a service at the first device and the request including context information associated with the service and to send a response to the second device using the network. The first processor couples to the first communication interface and is configured to perform the service based on the context information. The second device includes but is not limited to a second communication interface and a second processor. The second communication interface is configured to send the request using the network to the first device and to receive the response to the request from the first device. The second processor couples to the second communication interface and is configured to create the request including the context information.

Another exemplary embodiment of the invention relates to a method for requesting a service from another device. The method includes but is not limited to creating a request the request to perform a service at a first device and the request including context information associated with the service sending the request using a network to the first device and receiving a response to the request from the first device.

Another exemplary embodiment of the invention relates to a computer program product for requesting a service from another device. The computer program product includes but is not limited to computer code configured to create a request the request to perform a service at a first device and the request including context information associated with the service to send the request using a network to the first device and to receive a response to the request from the first device.

Another exemplary embodiment of the invention relates to a device for performing a service for a second device. The device includes but is not limited to a communication interface and a processor. The communication interface is configured to receive a request sent from a first device using a network the request to perform a service at the device and to send a response to the first device using the network the response including context information associated with the service. The processor couples to the communication interface and is configured to create the response including the context information and to perform the service.

Another exemplary embodiment of the invention relates to a device for requesting a service from another device. The device includes but is not limited to a communication interface and a processor. The communication interface is configured to send a request using a network to a first device the request to perform a service at the first device and to receive a response from the first device the response including context information associated with the service. The processor couples to the communication interface and is configured to create the request.

Another exemplary embodiment of the invention relates to a system for requesting a service from another device. The system includes but is not limited to a first device and a second device. The first device includes but is not limited to a first communication interface and a first processor. The first communication interface is configured to receive a request sent from a second device using a network the request to perform a service at the first device and to send a response to the second device using the network the response including context information associated with the service. The first processor couples to the first communication interface and is configured to create the response including the context information and to perform the service. The second device includes but is not limited to a second communication interface and a second processor. The second communication interface is configured to send the request using the network to the first device the request to perform the service at the first device and to receive a response from the first device. The second processor couples to the second communication interface and is configured to create the request.

Another exemplary embodiment of the invention relates to a method for requesting a service from another device. The method includes but is not limited to creating a request the request to perform a service at a first device sending the request using a network to the first device and receiving a response to the request from the first device the response including context information associated with the service.

Another exemplary embodiment of the invention relates to a computer program product for requesting a service from another device. The computer program product includes but is not limited to computer code configured to create a request the request to perform a service at a first device to send the request using a network to the first device and to receive a response to the request from the first device the response including context information associated with the service.

Other principal features and advantages of the invention will become apparent to those skilled in the art upon review of the following drawings the detailed description and the appended claims.

The term device as used herein includes a variety of network nodes. Such network nodes include printers workstations servers for example printer servers or file servers scanners PCs of all form factors intelligent appliances for example cameras video cameras TVs DVD players radios etc. The devices communicate over a network using communication protocols such as for example TCP IP and UDP IP. A device advertises its ability to perform a service and may be controlled by another device denoted a control point as related previously. The control point listens or searches for devices that it is capable of controlling to identify and to select devices to perform services for the control point. The device advertises its services possibly through an address to a page written in XML format. The XML formatted file includes information about the device and the services that the device may provide and is denoted a device service description. The XML formatted file may also include the address to additional information relating to the services advertised by and provided by the device. The additional information may also be captured in an XML formatted file. The control point may issue simple HTTP Get Requests to retrieve the device service description. The device may respond with an HTTP Get Response that includes the device service description. Using this description the control point may select the device to perform a particular service for the control point.

With reference to the system comprises a network . The network includes a plurality of devices . The plurality of devices may comprise a cellular telephone an Integrated Communication Device ICD a Personal Data Assistant PDA a PC of any form factor including a laptop a printer a scanner a TV a video camera etc. The devices may communicate using various transmission technologies including but not limited to Code Division Multiple Access CDMA Global System for Mobile Communications GSM Universal Mobile Telecommunications System UMTS Time Division Multiple Access TDMA TCP IP UDP IP Short Messaging Service Multimedia Messaging Service e mail Instant Messaging Bluetooth IEEE 802.11 etc. The devices may communicate using various media including but not limited to radio infrared laser cable connection etc. The network may include additional devices . Some or all of the devices of system may comprise a control point device . The system may comprise any combination of wired or wireless networks including but not limited to a cellular telephone network a wireless Local Area Network LAN a Bluetooth personal area network an Ethernet LAN token ring LAN a wide area network the Internet etc. The system may include both wired and wireless devices.

Communication between devices may be through one or more of the following connection methods without limitation a link established according to the Bluetooth Standards and Protocols an infrared communications link a wireless communications link a cellular network link a physical serial connection a physical parallel connection a link established according to TCP IP etc.

With reference to the device comprises a display a communication interface a processor a memory and a device service description . Different and additional components may be incorporated into the device . The display of the device is optional. The display presents information to a user. The display may be a thin film transistor TFT display a light emitting diode LED display a Liquid Crystal Display LCD or any of a variety of different displays known to those skilled in the art.

The communication interface provides an interface for receiving and transmitting calls messages and any other information communicable between devices. Communications between the device and other devices and or to the control point device may be through one or more of the following connection methods without limitation an infrared communications link a radio frequency communication link a wireless communications link a cellular network link a link established according to TCP IP etc. Transferring content to and from the device may be through one or more of these connection methods. The device may communicate using various transmission technologies including but not limited to CDMA GSM UMTS TDMA TCP IP Bluetooth IrDA RFID etc. The device may communicate using various media including but not limited to radio infrared laser optical range reduced Bluetooth cable connection etc.

The processor executes instructions that cause the device to behave in a predetermined manner. The instructions may be written using one or more programming languages scripting languages assembly languages etc. Additionally the instructions may be carried out by a special purpose computer logic circuits or hardware circuits. Thus the processor may be implemented in hardware firmware software or any combination of these methods. The term execution is the process of running a program or the carrying out of the operation called for by an instruction. The processor executes an instruction meaning that it performs the operations called for by that instruction. The processor couples to the communication interface .

The processor may retrieve a set of instructions from a permanent memory device and copy the instructions in an executable form to a temporary memory device. The temporary memory device is generally some form of random access memory RAM . The data in RAM is volatile meaning that it remains only as long as the device is turned on. When the device is turned off RAM loses its data. Read only memory ROM refers to special memory used to store programs that boot the device and perform diagnostics. The values stored in ROM are always there whether the power is on or not. For this reason it is called non volatile memory. Flash memory is a type of constantly powered nonvolatile memory that can be erased and reprogrammed in units of memory called blocks.

The memory stores the device service description . The device may have a plurality of memories using different memory technologies including but not limited to RAM ROM flash memory etc. The memory may include a cache. The cache may include but is not limited to a dedicated bank of high speed memory or a reserved section of regular memory used to improve performance. The cache provides a temporary storage area for instructions and data.

The device service description may be a file or web browser page written in XML format. The XML formatted file or page includes information about the device and the services that the device provides. In an exemplary embodiment the device service description includes context information for the device . The context information may include but is not limited to a geographic location of the device . The context information provides additional information relative to the services provided by the device . For example if the device is a camera the camera may store context information for each photograph taken by the camera that includes but is not limited to a date the photograph is taken a time the photograph is taken a location at which the photograph is taken a subject matter of the photograph a temperature at the photograph location a photographer etc. The camera may store context information describing the context information stored for each picture and or may store context information related to the camera itself. Context information related to the camera itself may be the geographic location of the camera a status of the camera battery a total memory size of a camera memory a remaining memory size of the camera memory etc. Context information is also saved relative to each photograph which is an item stored at the camera.

The control point device may send a request to the camera requesting the device service description that includes the context information related to the camera itself. In this example the response includes the context information in the device service description . Based on this information the control point device may send a request to the camera to send the control point device all of the pictures taken on Aug. 6 2004. The control point device discovered that the camera saved the date information associated with each photograph and thus could request the service of getting the photographs based on the date context information. In this example the request from the control point device includes the context information and the device performs the service based on the context information included with the request. In an alternative embodiment the device that is a camera may receive a request from the control point device that does not include context information. For example the control point device sends a request for a list of photographs at the device . The device responds with the list of photographs at the device with the list of pictures including the context information associated with each photograph. In this example the response includes the context information with the response.

With reference to the control point device comprises a display a communication interface and a processor . Different and additional components may be incorporated into the device . The display of the device is optional. The display presents information to a user. The display may be a TFT display an LED display an LCD or any of a variety of different displays known to those skilled in the art.

The communication interface provides an interface for receiving and transmitting calls messages and any other information communicable between devices. Communications between the control point device and other control point devices and or to devices may be through one or more of the following connection methods without limitation an infrared communications link a wireless communications link a cellular network link a link established according to TCP IP etc. Transferring content to and from the control point device may be through one or more of these connection methods. The control point device may communicate using various transmission technologies including but not limited to CDMA GSM UMTS TDMA TCP IP Bluetooth IrDA RFID etc. The control point device may communicate using various media including but not limited to radio infrared laser optical range reduced Bluetooth cable connection etc.

The processor executes instructions that cause the device to behave in a predetermined manner. The instructions may be written using one or more programming languages scripting languages assembly languages etc. Additionally the instructions may be carried out by a special purpose computer logic circuits or hardware circuits. Thus the processor may be implemented in hardware firmware software or any combination of these methods. The processor executes an instruction meaning that it performs the operations called for by that instruction. The processor couples to the communication interface .

With reference to an exemplary message sequence between the control point device and the device is shown. The communication interface of the control point device sends an HTTP Get Request to the device to retrieve the device service description from the device . The communication interface of the device receives the HTTP Get Request from the control point device . The processor of the device processes the received HTTP Get Request and selects the device service description from the memory . The processor of the device creates an HTTP Get Response that includes the device service description. The communication interface of the device sends the HTTP Get Response to the control point device . The communication interface of the control point receives the HTTP Get Response including the device service description . The processor of the control point device processes the received HTTP Get Response and selects the device to perform a service for the control point device based for example on the geographic location of the device included in the device service description and or any other the context information of the device included in the device service description . The message format may be but is not limited to SSDP or SOAP.

The cellular telephone selects the video camera to perform service request by pointing the cellular telephone at the video camera and selecting the video camera based on the geographic location information contained in the context information include in the device service description of the video camera . The cellular telephone may use a local compass or other similar sensor to determine the pointing direction of the cellular telephone to the video camera . The cellular telephone and or the video camera may use for example a global positioning system to determine the geographic location of the cellular telephone and the video camera respectively as known to those skilled in the art.

Service request may be a request that the video camera send a video clip taken at a specified time on a specified date to the cellular telephone using the context information included with the service request . Similarly the cellular telephone selects the PC to perform service request by pointing the cellular telephone at the PC and selecting the PC based on the geographic location information contained in the device service description of the PC . The cellular telephone may use a local compass or other similar sensor to identify the PC using the pointing direction of the cellular telephone . Service request may be a request that the PC copy the specified video clip sent through the cellular telephone .

Additionally a control point device may search for services based on the ability of the device to support the use of context information instead of based on the context information itself. For example a camera may attempt to locate a content directory service that supports the use of context information. The content directory service may store the content of items and or containers and provide browsing and searching for the items and or the containers. The camera provides context information with each photograph and thus requests a content directory service that also supports use of the context information.

Context information may include usage history that lists each user using the device and or service when the device and or service is used what control point is used to request the service etc. Context triggered messages may be initiated from the device such as reminders or notifications based on the context information that the device stores. Thus messages also may be initiated from the device to the control point device .

It is understood that the invention is not confined to the particular embodiments set forth herein as illustrative but embraces all such modifications combinations and permutations as come within the scope of the following claims. Thus the description of the preferred embodiments is for purposes of illustration and not limitation.

