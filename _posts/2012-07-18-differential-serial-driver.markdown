---

title: Differential serial driver
abstract: A microcontroller chip includes a serial data transmitter having a serial data output pin and an inverter having an input pin and an output pin, the input pin connected to the serial data output pin of the serial data transmitter, the output pin of the inverter and the output pin of the serial data transmitter forming a differential serial data transmission line.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08922150&OS=08922150&RS=08922150
owner: The Johns Hopkins University
number: 08922150
owner_city: Baltimore
owner_country: US
publication_date: 20120718
---
This invention was made with government support under contract number N66001 06 C 8005 awarded by the Defense Advanced Research Projects Agency DARPA . The government has certain rights in the invention.

Embodiments of the present invention generally relate to a serial driver and more specifically relate to a differential serial driver in a small microcontroller.

Microcontrollers are processing chips that may include wide varieties of features including timing circuits data processing circuits and memory circuits. However as the functionality of the microcontroller has increased a size of the microcontroller has also necessarily increased to accommodate the additional functionality.

Moreover microcontrollers located in confined spaces may require a high degree of functionality but are at the same time limited by the space in which the microcontroller is confined. Further microcontrollers that are small enough to fit within a particular confined space may encounter interference in a serial data line when the microcontroller includes only a serial data transmission line and does not include a differential serial data line.

According to one example embodiment of the present invention a microcontroller chip configured to control operation of the motor. The microcontroller chip includes a serial data transmission pin first and second oscillator connection pins and an inverter configured to be selectively connected between the first and second data transmission pins according to a transmission or receiving operation. The serial data transmission pin is connected to the first data transmission pin and the inverter is configured to be connected between the first and second oscillator connection pins during a transmission operation to form a differential serial data transmission line.

According to another embodiment of the present invention a microcontroller chip includes a serial data transmitter having a serial data output pin first and second data transmission pins the serial data output pin connected to the first data transmission pin and an inverter configured to be selectively connected between the first and second data transmission pins based on a data transmission operation or a data receiving operation such that the inverter is configured to be connected between the first and second data transmission pins during a data transmission operation to form a differential serial data transmission line.

According to yet another embodiment of the present invention a human prosthetic limb includes a motor configured to bend a joint of the human prosthetic limb and a microcontroller configured to control operation of the motor the microcontroller including a serial data transmission pin first and second data transmission pins and an inverter configured to be selectively connected between the first and second data transmission pins during a data transmission operation the serial data transmission pin connected to the first data transmission pin. The serial data transmission pin and the second data transmission pin form a differential serial data transmission line when the inverter is controlled to be connected between the first and second data transmission pins

Additional features and advantages are realized. Other embodiments and aspects of the invention are described in detail herein and are considered a part of the claimed invention. For a better understanding of the invention with the advantages and the features refer to the description and to the drawings.

With reference now to a prosthetic part system according to an embodiment of the invention includes a microcontroller motor interface and motor . The prosthetic part system further includes a power interface and power source configured to control power supplied to the microcontroller and the motor interface . The power source may be for example a battery and the power interface may be a power converter configured to convert a power level or a type of power such as alternating current AC to direct current DC or DC to AC. The prosthetic part system further includes a limb interface configured to receive prosthetic part control signals from an external prosthetic part controller not shown and to transmit status data and sensory data to the external prosthetic part controller. The prosthetic part system further includes one or more sensors and a sensor interface to transmit data from the sensors to the microcontroller .

In operation the microcontroller receives instructions from an external prosthetic part controller via the limb interface to control the motor . The external prosthetic part controller may be located externally to the prosthetic part or inside the prosthetic part at a location separated from the microcontroller . In one embodiment the microcontroller is a single chip within circuit. In one embodiment the motor is a brushless DC motor or an AC synchronous motor driven with a 3 phase AC signal. The phases may be generated by applying pulse width modulated PWM signals on three half bridges. The microcontroller transmits control signals such as the PWM signals to the motor interface and the motor interface transmits control signals to the motor .

In one embodiment the motor interface includes one or more of a gate driver and a half bridge. The microcontroller may include a pulse width modulator to generate pulse width modulated signals to control gates of the half bridge circuit. The voltage supplied by the power source and or the power interface is transmitted to the motor according to the pulse width modulated signals output from the microcontroller . For example in one embodiment the power source outputs a DC power signal and the DC power signal is pulse width modulated to supply modulated AC control signals to the motor .

The sensor detects a characteristic of the motor such as a position or rotation speed of the motor and outputs a sensor signal to the sensor interface . The sensor interface transmits the sensor signal to the microcontroller . The sensor interface may include wiring and one or more conditioning filter or voltage or current conversion or amplification circuits. The microcontroller may adjust output control signals to the motor based on the sensor signals and may output status signals to an external prosthetic part controller based on the sensor signals. In addition the microcontroller may receive sensory inputs such as temperature pressure or pain inputs from sensors in the prosthetic part system and may transmit the sensory signals to the prosthetic part controller.

In one embodiment of the invention the prosthetic part system is a prosthetic limb such as a prosthetic arm prosthetic hand prosthetic finger prosthetic leg prosthetic foot or prosthetic toe. In particular in one embodiment of the present invention the prosthetic part system is a prosthetic hand and the microcontroller power source motor sensor and other components of the prosthetic part system are all located within the prosthetic hand. In addition one or more of the microcontroller motor interface and motor may be located within a finger of the prosthetic part .

Since the power source and power interface are located in close proximity to data transmission lines such as transmission lines between the microcontroller and the limb interface and the sensor interface the power source and corresponding power transmission wiring may generate noise or interference and the prosthetic part system may be configured to reduce the effects of the noise or interference on the data lines. In particular the microcontroller may be configured such that one or more of the limb interface data line the sensor interface data line or any other data line is a differential serial transmission receiving data line.

The motor may be located in a joint of a finger of the prosthetic hand to bend the joint. The microcontroller may also be located in the finger. Since the microcontroller is located within the finger space for the microcontroller and supporting circuitry such as sensors interface circuits circuit board substrates and wiring is limited to a width W a length L and a thickness T. In one embodiment W is about 0.6 cm or less L is about 1 cm or less and T is about 0.6 mm or less. In one embodiment the dimensions of the microcontroller are about 4 6 mm in width W about 4 6 mm in length L and about 0.5 0.8 mm in thickness T.

In embodiments of the present disclosure the data outputs such as the sensory and status signals output from the microcontroller are in the vicinity of the power source and the power lines running from the power source to the microcontroller and the motor . In particular due to the space constraints within the prosthetic part system and the prosthetic hand the data lines output from the microcontroller and are within the same casing i.e. the shell of the hand as the power source and and the power lines and may be within about 1 cm of the power source and or the power lines.

In embodiments of the present invention the microcontroller or may not have an output dedicated to a differential serial communication signal which provides improved data stability relative to a non differential serial communication signal. In other words due to space cost or availability factors the microcontroller or may include only a non differential serial input pin and serial output pin. For example in one embodiment the microcontroller or may be a SILICON LABS C8051F411 12 or 13 microcontroller.

Although one microcontroller chip and one motor are illustrated in for purposes of clarity embodiments of the present disclosure encompass any number of microcontroller chips and motors. illustrates an example of a prosthetic hand including a separate microcontroller chip and motor for each joint of each finger in the hand. The power source may provide power to each microcontroller chip and motor . In addition a prosthetic hand controller may be provided to control each of the microcontroller chips .

In the embodiment illustrated in the microcontroller chip power source and motor may correspond to the microcontroller chip power source and motor of . In some embodiments each microcontroller chip includes its own power interface such as the power interface illustrated in such that each microcontroller chip may provide a separate level of power to a corresponding motor .

Although embodiments illustrated in B and illustrate a prosthetic human hand embodiments of the present invention encompass any prosthetic human limb any prosthetic limb of any animal any limb of a robot or other mechanical device or any other outer casing having stored therein a microcontroller chip and a power source power interface or power wiring in close proximity to data lines of the microcontroller chip.

In an embodiment of the present disclosure the microcontroller or does not use an external oscillator and wiring and internal programming are provided to generate a differential serial input and output signal. Referring to a microcontroller chip may include a core processor pulse width modulator internal memory on chip oscillator watchdog circuit comparator and analog to digital converter and inverter. The microcontroller chip further includes at least a power pin VDD a ground pin GND data address pins I O 0 to I O N a serial data output pin TX a serial data input pin RX external oscillator connection pins OSC1 and OSC2 and a clock output pin CLKOUT. The oscillator connection pins OSC1 and OSC2 are connected to the inverter so that when an oscillation crystal external to the microcontroller chip is connected to the oscillator connection pins OSC1 and OSC2 the oscillation crystal oscillates at a predetermined frequency. The microcontroller chip of may correspond to any one of the microcontroller chips and of A B and .

The on chip oscillator may be configured to provide a clock signal to internal and external circuits. The watchdog circuit may be configured to detect predetermined errors or failures and may initiate a reset of the microcontroller chip when the predetermined error or failure is detected. The internal memory may include data storage for storing addresses operand data and may be structured as registers stacks or in any other data structure. The A D converter is configured to receive analog signals such as sensor input signals received via the data pins I O 0 to I O N and to convert the analog signals to digital signals. The digital sensor signals may then be stored in internal memory or transmitted to the processor core for processing. The pulse width modulator is configured to output pulse width modulated signals to control a motor such as the motor of or the motor of . The processor core may control the pulse width modulator based on sensor signals and prosthetic part control signals received via the data I O pins 0 to N.

In one embodiment the microcontroller chip may be configured such that one or more of the sensor data and prosthetic part control data may is received at the oscillator pins OSC1 and OSC 2. The oscillator pins OSC1 and OSC2 may be internally connected or programmed to be transmitted to the comparator thereby providing a differential serial input to the microcontroller chip . The output from the comparator may be output via a comparator output pin CFOUT and the comparator output pin CFOUT may be electrically connected via wiring to the serial data input pin RX. Accordingly even in a processor having no dedicated serial input pins serial communication may be provided by wiring the microcontroller chip to receive serial input wires at two pins connected to a comparator and by connecting a comparator output pin CFOUT to a serial data input pin RX. While in the embodiment illustrated in the comparator output is hard wired to the serial data input pin RX via a wire external to the microcontroller chip in other embodiments the microcontroller chip may include internal wiring or programming to provide an output of the comparator to a serial data input location such as a serial data input buffer address storage in internal memory or connection to the processor core .

In addition to the differential serial input connections the serial data output pin TX may be connected via an external wire to the oscillator pin OSC1 resulting in an inverted TX signals at OSC2 and a differential serial output signal between the serial data output pin TX and the oscillator pin OSC2. As a result a serial data output may be provided without requiring external circuitry such as an inverter external to the microcontroller chip . Instead pins intended to control an oscillator may be re wired to generate a differential serial output on a microcontroller chip having no dedicated differential serial input or output pins where dedicated differential serial input and output pins are defined as pins that are pre designated or pre configured by a microcontroller chip manufacturer as corresponding to differential serial communication or pins being programmable to provide differential serial communication.

In one embodiment software is used to disconnect the inverter from the oscillator pins OSC1 and OSC2 during reception of data signals and to connect the inverter to the oscillator pins OSC1 and OSC2 during a data transmission operation. In such an embodiment the microcontroller chip is configured as a half duplex communications path where it is not possible to simultaneously transmit and receive differential data communications. Accordingly the comparator is not connected to the pins of the inverter but to the oscillator pins OSC1 and OSC2.

In one embodiment a limb chip such as the prosthetic hand controller of is a bus master that controls access to the bus for multiple motor controllers and sensors on the same communications bus. Upon receipt of a valid command software of the limb controller re configures the pins of the microcontroller chip for data transmission and sends a response message after which the software returns the configuration of the microcontroller chip to the listening mode.

In other words while illustrates the inverter connected between the oscillator pins OSC1 and OSC2 in one embodiment the inverter is connected only during a transmission operation and is disconnected during a receiving operation. In another embodiment the microcontroller chip is configured to be a full duplex system having comparator pins on a separate receive only pair of pins from the oscillator pins OSC1 and OSC2.

In embodiments of the present invention a microcontroller chip having no dedicated differential serial communication pins and having no capability to internally program pins to provide differential serial communication may be re wired to provide differential serial communication. In one embodiment external oscillator connection pins that are connected internally to an inverter may be wired externally to provide differential serial communication. In particular an oscillator pin connected to an input of the inverter may be connected to the serial data output pin and the serial data output pin and the output of the inverter may form a differential serial output.

In addition serial data communication lines may be connected to a comparator and the comparator may be connected to a non differential serial data input pin of the microcontroller. In one embodiment the microcontroller is internally programmable to connect the oscillator pins to a comparator internal to the microcontroller and a comparator output pin may be wired to be connected to the non differential serial data input pin.

In one embodiment of the present disclosure the microcontroller may be limited to a predetermined size such as a length of about 4 6 mm a width of about 4 6 mm and a thickness of about 0.5 0.8 mm. For example the microcontroller may be configured to be located within a human prosthetic limb such as a finger of a prosthetic human hand. Accordingly the differential serial communication lines may provide data reliability in a confined space which may include interference sources such as a power source and a motor.

The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used herein the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. It will be further understood that the terms comprises and or comprising when used in this specification specify the presence of stated features integers steps operations elements and or components but do not preclude the presence or addition of one more other features integers steps operations element components and or groups thereof.

The description of the various example embodiments of the present invention has been herein presented for purposes of illustration and description but is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the invention. The embodiments have been chosen and described in order to best explain the principles of the invention and the practical application and to enable others of ordinary skill in the art to understand the invention for various embodiments with various modifications as are suited to the particular use contemplated

While the preferred embodiment s to the invention have been described it will be understood that those skilled in the art both now and in the future may make various improvements and enhancements which fall within the scope of the claims which follow.

