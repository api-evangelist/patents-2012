---

title: Apparatus and methods for ensuring delivery of geographically relevant content
abstract: Apparatus and methods for ensuring delivery of geographically relevant content to IP-enabled user devices associated with a content distribution network. In one embodiment, the network (or designated content source) determines a geographic context or location of the user device, and uses this information to manage the packaging and delivery of content thereto so as to obey blackout restrictions and/or provide content which is relevant to the geographic context/location. In one variant, the user device comprises a mobile device such as a tablet computer or smartphone, and the content is delivered thereto over either a managed or unmanaged network infrastructure.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08838149&OS=08838149&RS=08838149
owner: Time Warner Cable Enterprises LLC
number: 08838149
owner_city: New York
owner_country: US
publication_date: 20120402
---
The present invention is related to co owned co pending U.S. patent application Ser. No. 13 403 802 filed on Feb. 23 2012 and entitled APPARATUS AND METHODS FOR PROVIDING CONTENT TO AN IP ENABLED DEVICE IN A CONTENT DISTRIBUTION NETWORK U.S. patent application Ser. No. 13 403 814 filed on Feb. 23 2012 and entitled APPARATUS AND METHODS FOR CONTENT DISTRIBUTION TO PACKET ENABLED DEVICES VIA A NETWORK BRIDGE and U.S. patent application Ser. No. 12 766 753 filed on Apr. 23 2010 and entitled ZONE CONTROL METHODS AND APPARATUS each of which is incorporated herein by reference in its entirety.

A portion of the disclosure of this patent document contains material that is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent files or records but otherwise reserves all copyright rights whatsoever.

The invention relates generally to the field of data and content distribution and delivery via a content distribution or other network. In one exemplary aspect the invention relates to the delivery of content which is geographically relevant to an Internet Protocol IP enabled device.

Content distribution networks such as e.g. Cable Television CATV satellite or hybrid fiber copper HFCu systems provide content from various content sources at a network headend to a plurality of subscriber devices. In a typical managed network a network operator e.g. multiple systems operator or MSO provides access to content via the network. Generally the MSO provides audio video content to subscribers via the network headend.

Recent advances in digital information processing and technology have made a broad range of services and functions available for delivery to consumers at various types of devices for very reasonable prices or subscription fees . These services and functions include delivery of digital content or programming movies etc. digital video on demand VOD services personal video recorder PVR and networked PVR nPVR services Internet Protocol television IPTV digital media playback and recording as well high speed Internet access including so called Internet TV where television programming is delivered over the Internet with or without QoS and IP based telephony e.g. VoIP . Other services available to network users include without limitation access to and recording of digital music e.g. MP3 files and submission of user generated media e.g. home grown Youtube videos etc. .

Currently many of these services are provided to users via a variety of different equipment environments and delivery paradigms including inter alia cable or satellite modems or QAMs HFCu i.e. Hybrid Fiber copper distribution via indigenous POST PSTN and or coaxial wiring in a premises optical fiber such as FTTC FTTH etc. Wi Fi hubs WiMAX 802.16 and cellular wireless networks Ethernet hubs gateways switches and routers and to a plurality of user equipment types e.g. set top boxes personal desktop computers laptop computers other mini computers such as so called netbooks and mini notebook computers and or other devices . Recent advances in consumer electronics have also led to the widespread introduction of a variety of portable media devices PMDs such as inter alia portable digital music devices such as the well known Apple iPod and iPad and other so called MP3 players cellular telephones smartphones handheld computers tablets such as the Kindle and Nook and iPad and personal digital assistants PDA which allow users to store and playback audio and video files.

Often content which is provided to consumers is in some way linked or associated to a particular geographic location or region. For example programming such as news broadcasts advertisements sporting events is tied to the geographic location in which the content is broadcast. Even movies or other programs may have particular geographic relevance such as where the story line or topic is in some tied to a geographic point of interest or locale.

Furthermore contractual provisions between content sources and content providers indicate specific programming events which may be blacked out in certain geographic areas or for which alternative programming is available depending on geographic area. For instance a sporting event may be restricted to areas outside of the local market so as to enhance ticket sales to the live event. Although the event is typically called a blackout event the subscriber will be shown or directed to an alternate program.

In another example certain so called local programming such as local advertisements or news broadcasts or even emergency broadcasts are substituted based on geographic location. The alternate program event is often based on a pre determined time and negotiated program rights by the programmer.

However the propagation of the aforementioned myriad of services and devices for receiving content including various mobile devices i.e. devices which are not fixed to a particular geographic location creates significant obstacles to the enforcement of geographic restrictions on content. Such obstacles arise for example because a typical content delivery network CDN is not physically tied to or associated with a given locality. Rather a CDN serves a broad even national footprint without knowledge of or adaptation to the particular geographic areas served.

There currently exists no mechanism for ensuring delivery of geographically relevant content to IP enabled mobile devices or other devices not associated to a fixed location . Thus what is needed is a system which is able to deliver the appropriate programming content based on locality of a mobile client device.

The present invention provides inter alia apparatus and methods for the delivery of geographically relevant content to IP enabled devices including mobile devices.

In one aspect of the present invention a method of delivering content that is geographically relevant to an IP enabled client device is disclosed. In one embodiment the method includes obtaining content which has a geographic relevance associated therewith receiving a request for the content from the client device the client device having a geographic context associated therewith generating a playlist for the requested content the generated playlist having at least one trigger associated therewith and providing the playlist to the client device for use by the client device in obtaining a redirection link based on the at least one trigger.

In another embodiment the method includes obtaining content packaging a pluality of versions of the content the plurality of versions each comprising respective triggers having different geographic contexts associated therewith and providing the plurality of different versions to respective ones of IP enabled user devices the providing being based at least in part on geography specific identification information associated with the respective client devices.

In a second aspect of the invention an IP enabled client apparatus configured to receive geographically relevant content is disclosed. In one embodiment the apparatus is a mobile device and includes a cellular or other wireless transceiver a processor in signal communication with the transceiver and logic in communication with the processor and configured to receive content in the form of a playlist having one or more triggers associated therewith. The mobile apparatus reads the playlist including the one or more triggers and uses one or more URLs or other links obtained using the playlist to obtain alterate content to the requested blacked out or geographically irrelevant content.

In another embodiment the client apparatus is a mobile apparatus configured to receive IP media data via a content distribution network and includes a processor a storage device in data communication with the processor the storage device comprising a computer program configured to generate a request for user selected content for transmission to a first entity the request including information which may be used by the first entity in determining a geographic context of the mobile apparatus receive from the network a manifest or playlist for the user selected content the manifest or playlist including one or more markers and utilize at least one of the one or more markers to access a second entity to obtain replacement or alternate content.

In a fourth aspect of the invention a computer readable apparatus is disclosed. In one embodiment the apparatus includes a storage medium having a computer program disposed thereon the program configured to when executed provide a request for content including device identification information the device identification information being useful in obtaining the geographic context of the device.

In a fifth aspect of the invention a network architecture is disclosed In one embodiment the architecture is part of a managed content distribution network and the architecture includes a geographic enforcement entity configured to determine the geographic context of requesting client devices and enforce blackout or other programming restrictions on content requested by those devices based at least on the geographic context of the requesting device 

In another embodiment the geographic enforcement entity utilizes the geographic context of the device s to suggest geographically relevant content e.g. advertisements or content particularly applicable to the location of the client device .

Other features and advantages of the present invention will immediately be recognized by persons of ordinary skill in the art with reference to the attached drawings and detailed description of exemplary embodiments as given below.

As used herein the term application refers generally and without limitation to a unit of executable software that implements a certain functionality or theme. The themes of applications vary broadly across any number of disciplines and functions such as on demand content management e commerce transactions brokerage transactions home entertainment calculator etc. and one application may have more than one theme. The unit of executable software generally runs in a predetermined environment for example the unit could comprise a downloadable Java Xlet that runs within the JavaTV environment.

As used herein the terms client device and end user device include but are not limited to set top boxes e.g. DSTBs gateways modems personal computers PCs and minicomputers whether desktop laptop or otherwise and mobile devices such as handheld computers PDAs personal media devices PMDs tablets and smartphones.

As used herein the term codec refers to a video audio or other data coding and or decoding algorithm process or apparatus including without limitation those of the MPEG e.g. MPEG 1 MPEG 2 MPEG 4 H.264 etc. Real RealVideo etc. AC 3 audio DiVX XViD ViDX Windows Media Video e.g. WMV 7 8 9 10 or 11 ATI Video codec or VC 1 SMPTE standard 421M families.

As used herein the term computer program or software is meant to include any sequence or human or machine cognizable steps which perform a function. Such program may be rendered in virtually any programming language or environment including for example C C Fortran COBOL PASCAL assembly language markup languages e.g. HTML SGML XML VoXML and the like as well as object oriented environments such as the Common Object Request Broker Architecture CORBA Java including J2ME Java Beans etc. Binary Runtime Environment e.g. BREW and the like.

The terms Consumer Premises Equipment CPE and host device refer without limitation to any type of electronic equipment located within a consumer s or user s premises and connected to a network. The term host device includes terminal devices that have access to digital television content via a satellite cable or terrestrial network. The host device functionality may be integrated into a digital television DTV set. The term consumer premises equipment CPE includes such electronic equipment such as set top boxes televisions Digital Video Recorders DVR gateway storage devices Furnace and ITV Personal Computers.

As used herein the term DOCSIS refers to any of the existing or planned variants of the Data Over Cable Services Interface Specification including for example DOCSIS versions 1.0 1.1 2.0 and 3.0.

As used herein the term gateway includes without limitation devices configured to interface with a network and pass signals to or exchange signals with another device in communication therewith. Various exemplary gateways are described in inter alia co owned and co pending U.S. patent application Ser. No. 11 818 236 filed on Jun. 13 2007 entitled PREMISES GATEWAY APPARATUS AND METHODS FOR USE IN A CONTENT BASED NETWORK U.S. patent application Ser. No. 12 582 619 filed on Oct. 20 2009 and entitled GATEWAY APPARATUS AND METHODS FOR DIGITAL CONTENT DELIVERY IN A NETWORK and U.S. patent application Ser. No. 12 480 597 filed on Jun. 8 2009 and entitled MEDIA BRIDGE APPARATUS AND METHODS each of the foregoing being incorporated herein by reference in its entirety.

As used herein the term headend refers generally to a networked system controlled by an operator e.g. an MSO or multiple systems operator that distributes programming to MSO clientele using client devices. Such programming may include literally any information source receiver including inter alia free to air TV channels pay TV channels interactive TV and the Internet.

As used herein the terms Internet and interact are used interchangeably to refer to inter networks including without limitation the Internet.

As used herein the terms microprocessor and digital processor are meant generally to include all types of digital processing devices including without limitation digital signal processors DSPs reduced instruction set computers RISC general purpose CISC processors microprocessors gate arrays e.g. FPGAs PLDs reconfigurable computer fabrics RCFs array processors secure microprocessors and application specific integrated circuits ASICs . Such digital processors may be contained on a single unitary IC die or distributed across multiple components.

As used herein the terms MSO or multiple systems operator refer without limitation to a cable fiber to the home FTTH fiber to the curb FTTC satellite Hybrid Fiber Copper HFCu or terrestrial network provider having infrastructure required to deliver services including programming and data over those mediums.

As used herein the terms network and bearer network refer generally to any type of telecommunications or data network including without limitation hybrid fiber coax HFC networks HFCu networks satellite networks telco networks and data networks including MANs WANs LANs WLANs internees and intranets . Such networks or portions thereof may utilize any one or more different topologies e.g. ring bus star loop etc. transmission media e.g. wired RF cable RF wireless millimeter wave optical etc. and or communications or networking protocols.

As used herein the term interface refers to any signal data or software interface with a component network or process including without limitation those of the FireWire e.g. FW400 FW800 etc. USB e.g. USB2 Ethernet e.g. 10 100 10 100 1000 Gigabit Ethernet 10 Gig E etc. MoCA Coaxsys e.g. TVnet radio frequency tuner e.g. in band or OOB cable modem etc. Wi Fi 802.11 WiMAX 802.16 PAN e.g. 802.15 cellular e.g. 3G LTE LTE A TD LTE GSM etc. or IrDA families.

As used herein the term node refers to any functional entity associated with a network such as for example an OLT or ONU whether physically discrete or distributed across multiple locations.

As used herein the term QAM refers to modulation schemes used for sending signals over cable networks. Such modulation scheme might use any constellation level e.g. QPSK 16 QAM 64 QAM 256 QAM etc. depending on details of a cable network. A QAM may also refer to a physical channel modulated according to the schemes.

As used herein the term server refers to any computerized component system or entity regardless of form which is adapted to provide data files applications content or other services to one or more other devices or entities on a computer system or network.

As used herein the term service content program and stream are sometimes used synonymously to refer to a sequence of packetized data that is provided in what a subscriber may perceive as a service. A service or content or stream in the former specialized sense may correspond to different types of services in the latter non technical sense. For example a service in the specialized sense may correspond to among others video broadcast audio only broadcast pay per view or video on demand. The perceivable content provided on such a service may be live pre recorded delimited in time undelimited in time or of other descriptions. In some cases a service in the specialized sense may correspond to what a subscriber would perceive as a channel in traditional broadcast television.

As used herein the term service group refers without limitation to either a group of service users e.g. subscribers or the resources shared by them in the form of for example entire cable RF signal only the RF channels used to receive the service or otherwise treated as a single logical unit by the network for resource assignment.

As used herein the term Wi Fi refers to without limitation any of the variants of IEEE Std. 802.11 or related standards including 802.11a b g n s v.

As used herein the term wireless means any wireless signal data communication or other interface including without limitation Wi Fi Bluetooth 3G 3GPP 3GPP2 HSDPA HSUPA TDMA CDMA e.g. IS 95A WCDMA etc. FHSS DSSS GSM PAN 802.15 WiMAX 802.16 802.20 narrowband FDMA OFDM PCS DCS LTE LTE A TD LTE analog cellular CDPD satellite systems millimeter wave or microwave systems acoustic and infrared i.e. IrDA .

In one salient aspect the present invention discloses methods and apparatus for ensuring delivery of geographically relevant content to IP enabled devices in or associated with a content distribution network. In one embodiment the geographic relevance of IP content having an adaptive bitrate which is provided to mobile devices such as e.g. cellular telephones laptop computers tablet devices etc. and displayed using multimedia streaming communications protocols such as e.g. Apple HTTP Live Streaming HLS or Microsoft Smooth Streaming is ensured and where the content is not relevant alternate content is provided such as via one or more URLs given to the mobile device.

In another embodiment the architecture disclosed herein provides a means for enforcing blackout and alternate program events for content programmers. One implementation of the system enables delivery of sports and other programming types over a content delivery or even unmanaged network i.e. delivery to IP enabled mobile devices while maintaining geographic restrictions thereof.

Under a first exemplary paradigm content providers are utilized to make match ups between a user s geographic area and one or more content elements. In one embodiment this is accomplished through use of a minimal data set MDS .

In an alternate paradigm the match ups are accomplished through use of a more detailed verbose data set processed by a headend or other network entity.

Additionally the methods and apparatus disclosed herein flexibly allow client devices to be redirected to geographically relevant content and away from geographically irrelevant or blacked out content at both an initial tuning event and at an event which occurs during a current session or transmission.

Exemplary embodiments of the apparatus and methods of the present invention are now described in detail. While these exemplary embodiments are described in the context of the aforementioned managed network e.g. a hybrid fiber coax cable architecture having an multiple systems operator MSO digital networking capability IP delivery capability and plurality of client devices CPE the general principles and advantages of the invention may be extended to other types of networks and architectures whether broadband narrowband wired or wireless or otherwise the following therefore being merely exemplary in nature. For example the invention may be practiced over a fiber to the home FTTH or fiber to the curb FTTC system HFCu networks or over wireless satellite or millimeter wave based networks as well as intranets and internets.

It will also be appreciated that while described generally in the context of a consumer i.e. residential end user domain the present invention may be readily adapted to other types of environments e.g. commercial enterprise government military etc. as well. Myriad other applications are possible.

It is further noted that while exemplary embodiments are described primarily in the context of a hybrid fiber conductor e.g. cable system with legacy 6 MHz RF channels the present invention is applicable to literally any network topology or paradigm and any frequency bandwidth. Furthermore as referenced above the invention is in no way limited to traditional cable system frequencies i.e. below 1 GHz and in fact may be used with systems that operate above 1 GHz band in center frequency or bandwidth to include without limitation so called ultra wideband systems.

Other features and advantages of the present invention will immediately be recognized by persons of ordinary skill in the art with reference to the attached drawings and detailed description of exemplary embodiments as given below.

The data application origination point comprises any medium that allows data and or applications such as a VOD based or Watch TV application to be transferred to a distribution server . This can include for example a third party data source application vendor website CD ROM external network interface mass storage device e.g. RAID system etc. Such transference may be automatic initiated upon the occurrence of one or more specified events such as the receipt of a request packet or ACK performed manually or accomplished in any number of other modes readily recognized by those of ordinary skill.

The application distribution server comprises a computer system where such applications can enter the network system. Distribution servers are well known in the networking arts and accordingly not described further herein.

The VOD server comprises a computer system where on demand content can be received from one or more of the aforementioned data sources and enter the network system. These servers may generate the content locally or alternatively act as a gateway or intermediary from a distant source not shown .

The CPE includes without limitation any equipment in the customers premises or other locations whether local or remote to the distribution server that can be accessed by a distribution server .

While the foregoing network architectures described herein can and in fact do carry packetized content e.g. IP over MPEG for high speed data or Internet TV MPEG2 packet content over QAM for MPTS etc. they are often not optimized for such delivery. Hence in accordance with another embodiment of the present invention a packet optimized delivery network is used for carriage of the packet content e.g. IPTV content when the request issues from an MSO network. illustrates one exemplary implementation of such a network in the context of an IMS IP Multimedia Subsystem network with common control plane and service delivery platform SDP as described in co pending U.S. patent application Ser. No. 12 764 746 filed Apr. 21 2010 entitled METHODS AND APPARATUS FOR PACKETIZED CONTENT DELIVERY OVER A CONTENT DELIVERY NETWORK incorporated herein by reference in its entirety. Such a network provides significant enhancements in terms of common control of different services implementation and management of content delivery sessions according to unicast or multicast models quality of service QoS for IP packetized content streams etc. however it is appreciated that the various features of the present invention are in no way limited to any of the foregoing architectures.

Referring now to an exemplary embodiment of a network architecture for delivery of geographically relevant content to an IP enabled device is given.

Generally an operator of a managed content delivery network such as those of above negotiates rights to content and related data with various content providers . Among these rights are rules designating content which is specific to a particular geographic region. This may include rules indicating certain geographic areas which are not to receive certain content so called blackouts as well as alternatively programming that these areas are supposed to receive. Other geographic content restrictions or guidelines may also utilized.

As will be understood in the present context the terms geographic region and location may refer to a given point of interest e.g. ZIP code account address GPS coordinate geographic feature etc. a broader region such as a metropolitan area state territory etc. or even a relative geographic reference e.g. an n mile radius around a fixed or moving reference point .

Moreover the term blackout as used herein may refer to content which has temporal or other aspects as well as geographic ones. For example programming may only be blacked out for a prescribed period of time e.g. during certain weeks of the year through the first half of a football game up until a certain point in a local state or federal election etc. after which it is freely available for viewing.

It will also be appreciated that the geographic context or relationship of certain content may be a function of other variables or considerations such as time. For instance the geographic relevance or restrictions on a given content element may expire after a prescribed period or after certain events occur thereby making it freely available for distribution.

Moreover a given content element itself may change its geographic relevance or context intra element i.e. one portion of the content element may be relevant to one location and another portion to another location such as where a travel related program addresses different travel destinations or a sports program switches between games at different locations or with teams originating from or associated with different locations.

Hence the present invention contemplates not only the enforcement and delivery of static geographically relevant content i.e. content whose relevance does not change but also content with dynamically changing relevance or restrictions.

In one embodiment of the invention the negotiated rights are implemented by the content provider . Accordingly and as illustrated in a minimal set of data MSD is provided by the content providers to the geographic enforcement service GES . The set of data includes a headend identifier or other device or user specific identifier referenced to an alternative program. As will be described in greater detail below the headend ID is used to identify a given requesting user device e.g. mobile device and associate it with a given geographic location or region.

In another embodiment the rights are implemented at the GES and thus a more detailed data set is provided as will be discussed below with respect to .

As shown in the network generally comprises a plurality of content providers providing content and or other webservices. The enforcement of geographic limitations is performed by a geographic enforcement service GES which utilizes information obtained from the content providers and an authorization service .

The GES is further configured to manage content change overs when restricted content is requested. As shown in a receiver decoder entity of the network receives content which is then encoded to an appropriate format codec bitrate etc. for the requesting device at the encoder . The content contains a trigger which marks an event that is geographically restricted or otherwise of geographic interest. Triggering functions occur using in band signaling. In one embodiment the trigger comprises an Society of Cable Telecommunication Engineers SCTE 35 trigger of the type known in the art. Specifically an SCTE 35 trigger is a cue message embedded in the transport stream which indicates an insertion event which is often used to inter alia indicate advertisement insertion points see e.g. SCTE Standards Document ANSI SCTE 118 2 2007 entitled Program Specific Ad Insertion Content Provider to Traffic Communication Applications Data Model which is incorporated herein by reference in its entirety . In the exemplary embodiment of the present invention however the SCTE 35 cue is maintained within the manifest or playlist and is used to trigger a redirection event described in greater detail below although it will be appreciated that traditional SCTE 35 cues may be used in addition to those used for content redirection.

Still further the packager may use the Placement Opportunity Interface Specification POIS as described by SCTE Standards Document ANSI SCTE 130 1 2008 entitled Digital Program Insertion Advertising Systems Interfaces which is incorporated herein by reference in its entirety to signal to the alternate event service of alternate event notifications signaled via SCTE 35 triggers.

Encoded content is passed from the encoder to the packager where various service variants are generated and distributed to an origin server . The service variants created by the packager correspond to the various services identified by the content providers . Thus each service variant is in the illustrated embodiment provided a different playlist or manifest containing one or more triggers for varying content based on geographic restrictions or considerations associated to each service group. That is to say the same content distributed to different geographic areas may have a different number of triggers different placement of triggers and or comprise triggers referring to different referred content. In addition certain service variants may have triggers embedded in the manifest which other variants may not have this is the case for example when a particular content is blacked out in one geographic region but not others.

When content is requested by the client the request is serviced via the edge cache which receives content from the origin server discussed supra. Content may be stored at the edge in order to facilitate delivery thereof with less latency than content delivered from the origin server or even deeper towards the core of the network . A content request from a client device to the edge cache in one implementation contains at least the headend ID or other identifier assigned to the device by the authorization server . Alternatively the MAC address or other device user specific identifier e.g. IP address which is associated with a known or determinable location may be utilized. The edge cache uses the identifier to ensure that the appropriate service variant is provided to the requesting device .

In another embodiment the identifier of the device may be linked to the physical location of the device at the time of the request. In one such implementation the CPE provides global positioning system GPS or other location data e.g. association with or data from a wireless base station or access point hotspot of known location IP address etc. to the authorization server which uses this information to assign a temporary headend ID or other identifier . At each new request for content GPS or other location data is provided and or requested and a new temporary headend ID is generated if necessary .

During playback of the requested content according to the playlist thereof the client may reach a trigger such as a URL redirect trigger which is placed in a manifest at each instance of an SCTE 35 marker by the packager indicating that content may no longer be provided and or alternate content is needed. The trigger event causes the CPE to request an appropriate URL from the GES . The GES consults a list of pre designated alternative content provided by the content providers to determine which URL i.e. the URL for which content should be transmitted to the device .

As will be discussed in greater detail elsewhere herein other embodiments of the invention utilize an alternate events content server to determine a geographic location of a requesting device based on information provided directly from the device or by using a look up system at the server. The look up system may comprise for example a listing of geographic location to device associations based on e.g. subscriber account IP address etc.

Referring now to an exemplary embodiment of a method for providing geographically relevant content to an IP enabled device via a content distribution network such as the exemplary network of or is illustrated.

As shown the method comprises at step an association process. During the association process the virtual IRD virtual integrated receiver decoder of the user device requesting access to content are associated to a headend identifier. The virtual IRD in one implementation includes a virtual construct of an IRD as a program provided from the provider. In a traditional blackout system an IRD is shared across a geographic region an authorization message is then sent to the regional IRD indicating a program stream suitable for that region. In this way the IRD associates programs to a physical location. The virtual IRD of the present embodiment stands in the place of the traditional IRD to accept authorization messages for a particular geographic region. The virtual IRD in one implementation does not perform any other functions of a traditional IRD such as receiving and or decoding content but merely helps maintain association of a program to a physical location. The authorization service of the exemplary network may be utilized to assign the headend identifier headend ID or other device or user specific identifier.

Each device is assigned a headend ID or other identifier upon registration of the device to the network step . Information including the headend ID or other identifier and other relevant information about the device and or user is also used to register a certain customers to a given geographic area.

In one embodiment the registration process is similar to that discussed in co owned and co pending U.S. patent application Ser. No. 13 403 802 filed Feb. 23 2012 and entitled APPARATUS AND METHODS FOR PROVIDING CONTENT TO AN IP ENABLED DEVICE IN A CONTENT DISTRIBUTION NETWORK which is incorporated herein by reference in its entirety. As discussed therein in one variant the registration process occurs at the first instance a subscriber attempts to access content via the herein described system. Alternatively the subscriber may utilize a separate channel for registration such as e.g. a website call in etc. Registration may require creation of a login identity such as a username and password combination although the present invention also contemplates use of other mechanisms for authenticating user and or requesting device identity including e.g. digital certificates cryptographic hashes key exchanges biometric data relating to user and so forth. Additionally the login information e.g. identity and password may be linked to an existing subscriber account. It is appreciated however that other registration processes may be employed the foregoing being merely illustrative of the overall concept of linking the particular subscriber account to the user device requesting access. See for example co owned and co pending U.S. patent application Ser. No. 11 440 490 filed May 24 2006 entitled PERSONAL CONTENT SERVER APPARATUS AND METHODS which is incorporated herein by reference in its entirety which describes inter alia exemplary schemes for user registration and access to content from various locations.

When a new device attempts to access content from the network by entering the login information the identity assignment and registration process are performed. If the subscriber or device has previously been registered the user may simply login to the content distribution network services the system recognizes the device and acknowledges its previously assigned headend ID.

Once the user device is logged in i.e. identified as belonging to a known subscriber it is assigned a headend ID or other identifier as discussed above. The assigned identifiers of the newly registered devices are then provided from the authorization service to the content providers .

Next per step of the method the content provider creates a cross reference list of identifiers such as headend IDs to appropriate services based on negotiated viewing rights. Each available service is associated to a relevant geographic region listed by e.g. zip code area code or other identifying information via the assigned identifiers. The match between the assigned user device identifiers e.g. headend IDs and geographic regions e.g. zip codes may be performed at the authorization service the GES or the content providers . The service list may then be utilized to coordinate the assigned identifiers with specific services.

At step the content provider publishes the matchup of headend ID to particular programming for use by the GES . A new list is generated in one embodiment based on particular events such as a user request or periodically or whenever an event notification is needed. The GES may also request or pull the list from the content provider s . The list is published to the GES in one embodiment using a WebServices interface although other approaches may be used consistent with the invention.

At step of the method the content is marked with one or more markers or triggers. In one embodiment the markers comprise SCTE 35 markers as discussed above and indicate alternate program events. In one such implementation the content provider is responsible for marking events. Alternatively the content provider may merely provide necessary information to the GES packager or the origin server and one of these entities may insert appropriate markers or triggers into the relevant events. As yet another alternative the marker insertion task may be divided between the content providers and one or more other entities such as based on a prescribed division scheme e.g. content providers insert certain types of markers while other entities insert others .

Next per step the content is encoded and published. In one embodiment the content is encoded into hypertext transfer protocol HTTP format for provision to mobile devices using e.g. HLS or Smooth Streaming as discussed above. As the content is encoded step the SCTE 35 or otherwise marked alternate program event is converted by the packager to a redirection URL in the manifest or playlist for the content which is ultimately published and stored on the origin server or edge cache . The client device plays the content from the manifest when the redirect URL is encountered it points the client to the GES .

At step the GES publishes one or more URLs for the appropriate content that will replace the requested content at the marked event. The GES may obtain the correct redirect URL from the content providers or alternatively the packager may provide the URLs of the main and alternate programs to the GES . The GES uses the URLs to create the associated service list with the appropriate URLs. In this instance when the client device encounters the event and requests a redirect URL the GES may consult the service list to redirect the device to the appropriate content.

In another variant if encryption is occurring the arrival of the playback device at an alternate program event i.e. at the redirection URL may force a key change or rotation. That is if a key rotation event is forced the device will not be able to decrypt content until it has received an appropriate key. When the appropriate key is requested the request is denied based on e.g. an evaluation of the requesting devices headend ID.

In one exemplary configuration the MSO manages the keys which are periodically rotated to inter alia maintain their freshness . The client devices request and receive a new key at the periodic rotation event. The key change or rotation ensures that the devices receiving content have not been de authorized or are otherwise rendered ineligible to receive the key s within the rotation period. In one embodiment the key s is are held at a key server within the network and managed by the MSO . The key server may utilize digital rights management DRM or another type of IP based encryption system. A key management system KMS of the type well known in the cryptographic arts may be utilized to distribute the keys. Key rotation may occur dependent or independent of a geographic location of the requesting device i.e. the keys may be issued predicated on a validated association with a location or alternatively the user or device is validated irrespective of a location. The alternative event content service is again utilized to determine where a client is located and what content the device should receive based on that location as discussed elsewhere herein.

The network of generally comprises a plurality of content providers providing content and other web services. The enforcement of geographic limitations is performed by the GES utilizing the information obtained from the content providers and an authorization service . The GES also manages content change avers i.e. provides alternative programming such during a blacked out event . The component portions of the network include inter alia a receiver decoder entity an encoder and a packager which cooperate to receive content decode content re encode content format the content for transmission to a client device including causing a playlist or manifest to be created and provide the content to an origin server and eventually to an edge cache for service to the client device .

The content in the illustrated embodiment contains a trigger which marks an event that is geographically restricted. In one implementation the trigger comprises an SCTE 35 trigger however other markers or indicators may be used with equal success. Each service variant is provided a different playlist or manifest containing triggers that indicate replacement content is to be inserted based on geographic restrictions associated to each service group.

The client device requests content from the edge cache or from the origin server . A request for content identifies the device and or the subscriber by providing e.g. the headend ID or other identifier assigned to the device from by the authorization server . Alternatively the MAC address or other pre assigned device or user specific identifier may be utilized. The identification of the device and or subscriber via the identifier ensures that the appropriate service variant is provided to the device .

In another embodiment the device may be identified based on its current physical location such as by utilizing GPS or other location data as previously set forth herein. A temporary headend ID or other identifier may be assigned based on the GPS or other data and renewed at each new request for content.

In the network embodiment of when the client device reaches a redirect URL or other trigger indicating a redirect event the device contacts the GES for a new URL for the alternate programming content. Rather than consulting a list of pre designated alternative content provided by the content providers as discussed in the embodiment of the GES uses information obtained from the content providers to determine which URL i.e. the URL for which content should be transmitted to the device .

Referring now to an exemplary method for providing geographically relevant content to an IP enabled device via a content distribution network such as the exemplary network of or is illustrated.

Per step of the method the authorization server of the exemplary network assigns a headend ID or other device and or subscriber identifier to a virtual IRD of the client device . Alternatively as noted above the device and or subscriber identifier may be a pre assigned identifier such as e.g. MAC address. The identification information is used to register a certain set of customers in a given geographic area see step . The listing is provided from the authorization server to the GES .

Each device is assigned a headend ID or other identifier upon registration of the device to the network step . Information including the headend ID or other identifier and other relevant information about the device and or user is also used to register a certain customers to a given geographic area. In one embodiment the registration process is similar to that discussed in previously incorporated U.S. patent application Ser. No. 13 403 802 entitled APPARATUS AND METHODS FOR PROVIDING CONTENT TO AN IP ENABLED DEVICE IN A CONTENT DISTRIBUTION NETWORK and generally includes creation of a login identity such as a user name and password combination. When a new device attempts to access content from the network by entering the login information the identity assignment and registration process are performed. If the subscriber device has previously registered the user may simply login to the content distribution network services the system recognizes the device and acknowledge its previously assigned headend ID or otherwise provide sufficient authentication information. It will be appreciated that while the exemplary embodiments described herein discuss a user as logging in or registering with the various entities the invention contemplates device based logins authentication as well or combinations of the foregoing e.g. the device being authenticated such as by MAC IP address or other information and the user of the device having to authenticate themselves such as by user name password etc. .

As noted above the headend ID or other device or user specific identifiers are provided from the authorization service to the GES . The GES creates a listing or association table of geographic areas such as by zip code area code etc. and associates each to the headend ID or other identifier .

Next per step the content providers provide program data or information to the GES . In one embodiment the program information identifies i when a blackout or alternate programming event is to occur ii alternate programming options for the blackout or alternate programming event and iii the geographic areas and or subscribers or subscriber types which are are not permitted access to particular content.

At step the GES uses this information and the previously assembled association table to identify URLs for the appropriate main and alternate programs during an alternate programming event the GES cross references a list of identifiers such as headend IDs to appropriate services based on negotiated viewing rights. Each available service is associated to a relevant geographic region listed by e.g. zip code area code etc. via the assigned identifiers. The cross referenced list is utilized to coordinate the assigned identifiers to specific services.

As discussed above the content provider may also provide an association of virtual IRDs to particular programming such as via a list or other data structure. The association list may be provided periodically when an event notification is needed e.g. based on a client action or request or under other conditions as required. In one embodiment the herein discussed web services interface is utilized to publish the list although other mechanisms may be used with equal success.

Next per step the content is marked with one or more markers or triggers such as e.g. the previously discussed SCTE 35 markers which indicate alternate program events. The content provider may mark the events or alternatively the GES or packager may mark the events using information received from the content provider .

At step the content is encoded and published. In one embodiment the content is encoded into HTTP format for provision to mobile devices using e.g. HLS or Smooth Streaming as discussed above. Encoding the content includes conversion of the SCTE 35 or otherwise marked alternate program event by the packager to a redirection URL. The redirection URL is listed in the manifest or playlist for the content which is ultimately published and stored on the origin server and or edge cache . During playback of the content when the client device encounters a redirect URL the device is referenced to the GES . The GES provides the appropriate URL upon the redirection.

Next at step the GES publishes URLs for the appropriate content to replace the requested content at the marked event.

In yet another variant the arrival of the playback device at an alternate program event i.e. at the redirection URL may force a key rotation. As discussed above the key rotation event causes the device to no longer be able to decrypt content until it has received an appropriate key and thereby assists in a geographic content restriction. In other words when the appropriate key is requested by the device after a key change event access is denied based on e.g. an evaluation of the requesting devices headend ID and instead the device is referred to the alternate program URL.

In yet another embodiment certain ones of the content providers or other entities are tasked with determining alternative programming and generating the content list matching geographic areas to content as discussed in above . At the same time other content providers within the same network provide the necessary information for enabling the GES to perform the geographic area to content match ups as discussed in . Accordingly the GES is in one embodiment configured to act in place of the content providers for determining appropriate content when necessary but is also configured to merely use information provided by the content providers when necessary. The necessity of the GES to perform one or the other function is determined by negotiated rights between the managed network or and the content providers .

Per step of the method the client device requests content which is geographically inappropriate for the requesting device.

When the client device receives a channel listing the list indicates which programs or channels are blacked out and or have alternative programming provided. The client selects a program from the channel listing and if the program is a among the programming or channels that is potentially blacked out or for which alternative programming is to be provided it is determined whether the content is appropriate to the geographic area associated to the requesting device. This determination is based in one implementation on the headend ID or other identifier which is provided in the request to the GES . It is also noted that the identifier may be based on the current location of the device or a location to which the device or subscriber is registered or yet other data.

At step the GES performs a search of the association table to match the subscriber or device specific identifier to a geographic region and determine whether the requested program is in the identified region. The system next identifies and returns the URL for the appropriate program which may be the requested program or alternative programming to the CPE at step .

Lastly per step the client device requests the appropriate program according to the URL delivered thereto. The client will then use this URL to begin watching the program.

Referring now to an exemplary embodiment of a method for ensuring an in band transition event yields geographically relevant content is shown and described.

Per step a program is in progress when an event marker is reached step . At this point in the manifest a redirect URL is given step . The redirect URL causes the CPE to make a new request to the GES step .

At step the GES determines appropriate content for the geographic area of the CPE based on the headend ID or other identifier provided to the GES in the request for content. As noted above the identifier may be based on the current location of the device or a registered location or subscriber account. The system next identifies and returns the URL for the appropriate program which may be the requested program or alternative programming to the CPE at step . Per step the client device requests the appropriate program according to the URL delivered thereto. The client will then use this URL to begin streaming and watching the program.

As shown the GES generally comprises an interface for communication to one or more content providers an authorization server and a packager . In a first embodiment the GES receives a list of device or subscriber identifiers correlated to appropriate programming from the content providers see discussion of above for storage in a storage device e.g. HDD or memory . In another embodiment the GES receives information enabling the GES itself to correlate programming to devices subscribers see discussion of above at e.g. the cross reference process running on the processor of the GES .

Additionally the exemplary configuration of the GES includes a registration process and a publisher process . The registration process facilitates registration of devices from the authorization server . The publisher process publishes one or more URLs for appropriate programming to requesting devices when these devices reach a redirect URL in the playback of requested content. Interface enables communication between the GES and the client devices .

The GES is in the illustrated embodiment designed to be highly scalable and can service requests to all CPE in communication therewith. That is to say it is able to handle large bursts of substantially contemporaneous requests. In one implementation a load balancer is utilized to balance requests across multiple servers which are distributed across the geographic footprint. In addition multiple servers may be provided per market location in order to accommodate large incoming requests.

Although not illustrated the GES may further comprise a look ahead feature. The look ahead feature enables the GES to review the playlists or manifests of content currently viewed on registered CPE and determine a priori which streams will require alternative programming and cue the appropriate programming. According to this model the GES once it has determined the upcoming change over events staggers or otherwise randomizes delivery of the alternate content URLs. In this manner the overall impact or burden to the GES at any given alternate programming event will be spread across a larger time period as opposed to occurring simultaneously. In one embodiment this may be accomplished using an interface to provide alternate event scheduling information in advance of the actual event. In one variant the interface may comprise XML via HTTP or HTTP S to a hosted RESTful interface scheduling proxy .

It will be recognized that while certain aspects of the invention are described in terms of a specific sequence of steps of a method these descriptions are only illustrative of the broader methods of the invention and may be modified as required by the particular application. Certain steps may be rendered unnecessary or optional under certain circumstances. Additionally certain steps or functionality may be added to the disclosed embodiments or the order of performance of two or more steps permuted. All such variations are considered to be encompassed within the invention disclosed and claimed herein.

While the above detailed description has shown described and pointed out novel features of the invention as applied to various embodiments it will be understood that various omissions substitutions and changes in the form and details of the device or process illustrated may be made by those skilled in the art without departing from the invention. The foregoing description is of the best mode presently contemplated of carrying out the invention. This description is in no way meant to be limiting but rather should be taken as illustrative of the general principles of the invention. The scope of the invention should be determined with reference to the claims.

