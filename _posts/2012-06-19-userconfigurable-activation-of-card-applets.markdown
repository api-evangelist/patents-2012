---

title: User-configurable activation of card applets
abstract: Card applets associated with an electronic wallet are activated and deactivated based on user-defined rules. Based on the rules and a device state, a card emulation state and card applet states are modified to enable or disable completion of transactions. The transactions are between a computing device and a reader such as a point-of-sale terminal. In some embodiments, a user designates a plurality of the card applets as fast cards capable of completing a transaction via near-field communication (NFC) interaction without user input at a time of the transaction.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09064247&OS=09064247&RS=09064247
owner: Microsoft Technology Licensing, LLC
number: 09064247
owner_city: Redmond
owner_country: US
publication_date: 20120619
---
Short range wireless communication protocols enable a computing device to communicate with readers proximate to the computing device. For example radio frequency identification RFID BLUETOOTH brand communications Wi Fi and near field communication NFC technology enable a user to perform actions with the computing device such as completing a financial transaction gaining access to a building and gaining entry to a transit system. Existing systems have an electronic wallet that stores a plurality of cards. In some of the existing systems however the user is limited to manually selecting and activating one of the cards to complete a transaction. In some of the existing systems where each of the cards remains activated at all times the reader rather than the user chooses among the activated cards to complete a transaction.

Embodiments of the disclosure selectively activate card applets on a computing device for completing point of sale transactions. A device state for a computing device is determined. The computing device has an electronic wallet having a plurality of card applets stored therein. Each of the card applets has a card applet state. A card emulation state is adjusted based on the determined device state. A plurality of user defined rules for each of the plurality of card applets is accessed. The card applet states are adjusted based on the adjusted card emulation state and the accessed plurality of user defined rules to enable or disable point of sale transactions via the plurality of card applets.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used as an aid in determining the scope of the claimed subject matter.

Referring to the figures embodiments of the disclosure selectively enable or disable card applets based at least on user defined rules that operate in some embodiments responsive to user actions. A card emulation state and card applet states associated with the card applets are adjusted or modified based on device state and the user defined rules . In some embodiments a user chooses which card applets in an electronic wallet are to be activated manually to complete a transaction e.g. manually activated cards and which card applets remain active to complete a transaction without user input at a time of the transaction e.g. fast cards . For each of the fast cards the user may further configure the availability conditions or criteria for activating the fast card as well as enabling card emulation. The manually activated cards may also be referred to as slow cards or one time use cards. In some embodiments the manually activated cards are used to complete only one transaction after being activated. To use one of the manually activated cards again the user re activates the manually activated card.

While some embodiments are described herein with reference to interactions via near field communication NFC aspects of the disclosure are operable with any wireless communication protocol including for example the BLUETOOTH brand wireless communications protocol. Further while some embodiments are described herein with reference to interactions between a computing device and a point of sale terminal aspects of the disclosure are operable with interactions between the computing device and any reader or other computing device. Still further while some embodiments are described herein with reference to point of sale transactions between the computing device and the reader such as those relating to the acquisition of goods and or services aspects of the disclosure are operable with any transactions. For example the transactions may include transactions not associated with goods and or services such as providing user identification location information contact information and the like.

Referring next to an exemplary block diagram illustrates an architecture for installing card applets on a secure element in the computing device . The computing device illustrated in includes one or more applications a wallet core e.g. logic for implementing the electronic wallet an NFC platform for implementing NFC interactions and an underlying operating system OS platform . The computing device also includes the secure element chip or other hardware component on the computing device for storing among other items one or more card applets . The secure element is accessible to the OS platform and to one or more of the readers that are in proximity of the computing device . The secure element may be stored in various places on the computing device such as on a motherboard or a universal integrated circuit card UICC e.g. or other removable storage card . The secure element cryptographically protects the information stored thereon e.g. the card applets .

The applications on the computing device communicate with application services . Communication between the computing device and the application services or other services or devices may occur via one or more networks using any protocol or mechanism over any wired or wireless connection. Each of the application services communicates with a service provider trusted service manager TSM . The service provider TSM communicates with a primary device TSM . The primary device TSM communicates state and or status with a mobile network operator MNO plug in or other component that is associated with the NFC platform on the computing device . The MNO plug in communicates with the secure element to install card applets received from the primary device TSM . For example the card applets are installed via over the air OTA installation.

Referring next to an exemplary block diagram illustrates the computing device storing a plurality of the card applets . In the example of the computing device represents a system for selectively activating one or more card applets on the computing device for completing any quantity of point of sale transactions with one or more of the readers e.g. point of sale terminals . The computing device represents any device executing instructions e.g. as application programs operating system functionality or both to implement the operations and functionality associated with the computing device . The computing device may include a mobile computing device or any other portable device. In some embodiments the mobile computing device includes a mobile telephone laptop tablet computing pad netbook gaming device and or portable media player. The computing device may also include less portable devices such as desktop personal computers kiosks and tabletop devices. Additionally the computing device may represent a group of processing units or other computing devices.

In some embodiments the computing device has at least one processor at least one memory area and at least one user interface not shown . The processor includes any quantity of processing units and is programmed to execute computer executable instructions for implementing aspects of the disclosure. The instructions may be performed by the processor or by multiple processors executing within the computing device or performed by a processor external to the computing device . In some embodiments the processor is programmed to execute instructions such as those illustrated in the figures e.g. .

In some embodiments the processor represents an implementation of analog techniques to perform the operations described herein. For example the operations may be performed by an analog computing device and or a digital computing device.

The computing device further has one or more computer readable media such as the memory area . The memory area includes any quantity of media associated with or accessible by the computing device . The memory area may be internal to the computing device as shown in external to the computing device not shown or both not shown . In some embodiments the memory area includes read only memory and or memory wired into an analog computing device.

The memory area stores among other data one or more applications . The applications when executed by the processor operate to perform functionality on the computing device . Exemplary applications include mail application programs web browsers calendar application programs address book application programs messaging programs media applications location based services search programs and the like. The applications may communicate with counterpart applications or services e.g. application services such as web services accessible via a network. For example the applications may represent downloaded client side applications that correspond to server side services e.g. application services executing in a cloud.

The memory area further stores the electronic wallet having a plurality of card applets stored therein such as card applet 1 through card applet N. Each of the card applets is associated with an electronic wallet item or card. For example the card applets may correspond to payment applets e.g. credit or debit access applets e.g. for gaining access to a building or other area loyalty applets transit applets coupon applets and gift card applets.

Each of the plurality of card applets has one of the card applet states associated therewith such as card applet state 1 through card applet state N. In some embodiments each card applet maintains its corresponding card applet state . The card applet states may be read into the OS via an application programming interface API or may be published to the OS by the card applets . For example another applet in the secure element may centralize the card applet states and respond to queries via the API or publish the card applet states . In some embodiments each card applet state stores data indicating whether the corresponding card applet is active or inactive e.g. available or unavailable to the reader respectively and installed or uninstalled.

The memory area also stores the card emulation state . The card emulation state affects the availability of the electronic wallet for completing transactions. For example the card emulation state may enable or disable NFC interactions between the computing device and the reader thus acting as a global setting that can enable or disable point of sale transactions without changing any of the card applet states .

While the electronic wallet card applets card applet states and card emulation state are shown as being logically stored in memory area some of this data may be physically stored elsewhere on the computing device in some embodiments. For example the secure element e.g. a module that is outside the memory area may store the card applets while the memory area stores the card applet states in the electronic wallet . In such embodiments the electronic wallet may store metadata describing the card applets such as a representation of the card applets as well as a link from each of the card applet states in the electronic wallet to the corresponding card applets physically stored in the secure element .

Further in some embodiments the card emulation state may be physically stored in an NFC driver and or hardware outside or separate from the memory area .

The user interacts with the computing device as described below to define provide or make accessible one or more of the rules . For example the user may draft the rules or may select or choose among pre defined suggested or recommended rules. The user defined rules are stored in the memory area and affect the availability of the electronic wallet and the card applets therein. For example the user defined rules may separate the card applets into categories such as fast cards and slow cards e.g. manually activated cards . Card applets designated as fast cards are capable of completing transactions without explicit or manual selection use authorization and or confirmation input by the user . In some embodiments card applets designated as fast cards are available to the readers without explicit or manual selection by the user but the readers may still attempt to challenge e.g. authenticate the user by for example asking for a personal identification number PIN . Further fast cards may remain active after completing a transaction or may be deactivated after completing the transaction e.g. depending on the user defined rules .

In contrast card applets designated as manually activated cards are capable of completing transactions only with explicit or manual selection use authorization and or confirmation input by the user .

The rules may also identify other criteria for enabling or disabling the card applets . For example the rules may identify a location for the computing device at which the card applet is enabled. The rules may also identify a time of day or durations during which the card applet is enabled. For example the user may associate a duration with one of the card applets designated as a fast card such that the fast card deactivates after expiration of the duration.

The memory area further stores one or more computer executable components. Exemplary components include an interface component a context component a driver component and a transaction preparation component . Operation of these components when executed is described below with reference to .

In some embodiments the user interface includes a display e.g. a touch screen display and or computer executable instructions e.g. a driver for operating the display. The user interface may also include one or more of the following to provide data to the user or receive data from the user speakers a sound card a camera a microphone a vibration motor one or more accelerometers a BLUETOOTH brand communication module global positioning system GPS hardware and a photoreceptive light sensor. For example the user may input commands or manipulate data by moving the computing device in a particular way.

Referring next to an exemplary flow chart illustrates operation of the computing device to enable or disable one or more of the card applets based on the card applet states and the card emulation state . While the operations illustrated in are described as being executed by the computing device aspects of the disclosure are operable with other entities executing one or more of the operations. For example one or more of the operations may be executed by a server remote from the computing device yet in communication with the computing device .

At the computing device determines a device state. Determining the device state includes but is not limited to determining a hardware state and or a software state. Determining the hardware state includes determining for example whether a display of the computing device is on or off and whether the computing device is powered on or off. Determining the software state includes determining a current execution context. The execution context for example describes one or more of the applications currently being executed by the computing device . As another example the execution context also identifies one or more of the following whether the electronic wallet is open or closed whether the electronic wallet is in a foreground of the user interface in the computing device or in the background and whether the computing device is locked or unlocked. In some embodiments the electronic wallet and or the card applets may be locked and or unlocked with a PIN or other security measure.

At the computing device adjusts or modifies the card emulation state based on the determined device state. For example the computing device may adjust the card emulation state to be active or inactive. If the card emulation state is set to active then one or more of the card applets may be available for transactions depending on the corresponding card applet states . If the card emulation state is set to inactive then none of the card applets is available for transactions regardless of the corresponding card applet states . For example modifying the card emulation state includes enabling or disabling NFC interaction between the computing device and the reader .

In some embodiments the computing device accesses a plurality of the user defined rules . For each of the plurality of card applets the user defined rules represent settings or configurations defining the conditions under which the card applets are available or unavailable for transactions. For example the user defined rules may designate one or more of the card applets as fast cards as described above that are capable of completing point of sale transactions without explicit user input.

The card emulation state may also be adjusted based on the user defined rules . For example if the user defined rules specify that none of the card applets should be available when the computing device is powered off the computing device adjusts the card emulation state to inactive when the computing device powers off thus disabling each of the card applets e.g. preventing the card applets from completing transactions while the computing device is powered off .

At the computing device adjusts or modifies the card applet states based on the adjusted card emulation state and the user defined rules to enable or disable point of sale transactions via the plurality of card applets . For example one of the card applet states may be set to inactive or otherwise disabled thus making the corresponding card applet unavailable for transactions. In another example one of the card applet states may be set to active or otherwise enabled thus making the corresponding card applet available for transactions.

In general the card emulation state and or the card applet states are used to control the availability of the card applets . In some embodiments the card emulation state is adjusted to control when card applets designated as fast cards are available while the card applet states are used to designate which of the card applets are fast cards. Other embodiments however lack the card emulation state . In such embodiments the card applet states are used both to control when the card applets are available and to designate which of the card applets are fast cards.

In embodiments in which the user defined rules identify some card applets as fast cards and other card applets as manually activated cards the computing device may adjust the card applet states to enable the fast cards when the electronic wallet is open. Alternatively or in addition the computing device may adjust the card applet states to enable the fast cards when a display of the computing device is on. As another example the computing device may adjust the card applet states to disable the fast cards when the computing device is locked. In still another example the computing device may adjust the card applet states to keep the fast cards enabled even when the computing device is powered off. In such an example the fast cards obtain power to complete transactions via the mechanism involved in the communication between the secure element and the reader . For example during an NFC interaction power is derived from an electromagnetic field provided by the reader .

Adjusting the card applet states produces a set of one or more of the card applets that are available for transactions. If a point of sale terminal or other reader is detected at the computing device presents or otherwise makes available the available set of card applets e.g. enabled at for completing the transaction. Selection of one of the available card applets may occur according to any selection process as known in the art.

While examples of the user defined rules have been described herein aspects of the disclosure are operable with any rules that affect the availability of the card applets for completing transactions.

In some embodiments the computer executable components illustrated in execute to perform one or more of the operations illustrated in . For example the interface component when executed by at least one processor of the computing device causes the processor to present to the user the electronic wallet in a user interface element and to receive from the user via the user interface element one or more of the user defined rules . The user defined rules correspond to the electronic wallet and or the plurality of card applets displayed in the electronic wallet .

The context component when executed by at least one processor of the computing device causes the processor to determine a device state for the computing device . The driver component when executed by at least one processor of the computing device causes the processor to adjust the card emulation state based on the device state determined by the context component . The transaction preparation component when executed by at least one processor of the computing device causes the processor to adjust the card applet states based on the card emulation state adjusted by the driver component and the one or more user defined rules received by the interface component to enable or disable point of sale transactions via the plurality of card applets .

Referring next to an exemplary diagram illustrates a user interface element for configuring settings associated with the electronic wallet . While the user interface element illustrated in shows a set of exemplary configurations on a mobile telephone aspects of the disclosure are operable with any quantity or type of settings or configurations on any mobile device. In the example of the user has provided a password for entry to make purchases via an online marketplace. The user has also enabled NFC transactions.

The user interface element further illustrates a set of configuration options for selection by the user . In this example the configuration options relate to enabling the user selected set of fast cards 1 only when the electronic wallet is open 2 when the mobile telephone is unlocked 3 anytime the screen or display of the mobile telephone is on or 4 even when the mobile telephone is powered down or off. If the user selects option 1 the mobile telephone turns on card emulation e.g. adjust the card emulation state to allow any card applet with a corresponding card applet state of active to complete a transaction when the user opens the electronic wallet . The mobile telephone turns off card emulation e.g. adjusts the card emulation state to disable each of the card applets regardless of the corresponding card applet states as soon as the user closes the electronic wallet or switches to another user interface element.

If the user selects option 2 the mobile telephone turns on card emulation when the user unlocks the mobile telephone and turns off card emulation when the user locks the mobile telephone. If the user selects option 3 the mobile telephone turns on card emulation when the user turns on the display even if the mobile telephone is locked. The mobile telephone turns off card emulation when the user turns off the display. If the user selects option 4 the mobile telephone keeps card emulation on even when the mobile telephone is turned off. In this option card emulation may remain on even if a battery is removed from the mobile telephone e.g. depending on whether hardware associated with the mobile telephone uses any power from the battery .

In the example of the user has selected option 1 thus enabling the selected set of fast cards only when the electronic wallet is open e.g. the electronic wallet is in the foreground of the display of the mobile telephone .

Additional user defined rules not shown may indicate whether the mobile telephone prompts for a password to open the electronic wallet or unlock the mobile telephone.

Referring next to an exemplary diagram illustrates a user interface element displaying a set of fast cards selected and configured by the user . In some embodiments the user interface element represents the electronic wallet . In this example the user has selected four card applets to be fast cards or otherwise activated the four card applets as described above. The fast cards are shown on the left side of the user interface element while a list of the available cards is shown on the right side of the user interface element . The available cards include both fast cards e.g. active and manually activated cards e.g. inactive . The user may designate one or more of the available cards as fast cards by for example selecting a menu item or dragging the card to the set of fast cards.

Referring next to an exemplary diagram illustrates a user interface element for selecting a manually activated card for a transaction. In the example of the user opens the electronic wallet and reviews the set of card applets e.g. by sliding through each of the card applets . The mobile telephone prompts the user to select the currently presented card applet to complete a transaction. The user interface element provides information relating to the presented card applet such as a company name available credit and a link or other reference to execute an application e.g. one of the applications associated with the card applet.

Referring next to an exemplary diagram illustrates a user interface element for completing a transaction using a selected manually activated card. Continuing the example from the user has selected or tapped on the presented card applet. The mobile telephone adjusts the card applet state for the selected card applet to active. The user interface element in then prompts the user to complete the transaction. The user taps on the display to complete the transaction using the selected activated card applet. Because the card applet is a manually activated card the mobile telephone adjusts the card applet state of the selected card applet to disable or deactivate the card applet after the transaction completes.

Further after the transaction completes the mobile telephone may operate to reactivate one or more of the fast cards that were deactivated to enable use of the manually activated card. For example in environments where only one payment card may be active at any given time in response to the user activating one of the manually activated cards the mobile telephone deactivates any other active payment cards that have been designated as fast cards. After the transaction with the manually activated card completes the mobile telephone re activates the fast card s that were de activated.

In some embodiments the user defined rules specify locations for enabling one or more of the card applets designated as fast cards. Such embodiments provide the user with the capability to specify one card applet e.g. corresponding to a business credit card as one of the fast cards available only while the user is near a location designated as a workplace. Similarly the user may specific a different card applet e.g. corresponding to a personal credit card as one of the fast cards available in locations other than the designated workplace location.

The user defined rules may also specify times during which one or more of the card applets designated as fast cards are available. For example the user may specify that one card applet e.g. corresponding to a business credit card as one of the fast cards available only during business hours. The user may specify a different card applet e.g. corresponding to a personal credit card as one of the fast cards available during times other than business hours.

In some embodiments the card emulation state and or one or more of the card applet states may be adjusted by the user pressing one or more physical elements of the computing device . For example the computing device may include one or more buttons e.g. virtual or physical that the user pushes to activate or deactivate one or more of the card applets . The user may toggle the card emulation state and or one or more of the card applet states in this manner or the user may push and hold the buttons to adjust the states. Further some embodiments contemplate the computing device including security elements such as a fingerprint reader to authenticate the user before adjusting the card emulation state and or the card applet states .

At least a portion of the functionality of the various elements in and may be performed by other elements in or or an entity e.g. processor web service server application program computing device etc. not shown in or .

In some embodiments the operations illustrated in may be implemented as software instructions encoded on a computer readable medium in hardware programmed or designed to perform the operations or both. For example aspects of the disclosure may be implemented as a system on a chip or other circuitry including a plurality of interconnected electrically conductive elements.

While no personally identifiable information is tracked by aspects of the disclosure embodiments have been described with reference to data monitored and or collected from users . In such embodiments notice is provided to the users of the collection of the data e.g. via a dialog box or preference setting and users are given the opportunity to give or deny consent for the monitoring and or collection. The consent may take the form of opt in consent or opt out consent.

Exemplary computer readable media include flash memory drives digital versatile discs DVDs compact discs CDs floppy disks and tape cassettes. By way of example and not limitation computer readable media comprise computer storage media and communication media. Computer storage media include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media are tangible exclude propagated data signals and are mutually exclusive to communication media. In some embodiments computer storage media are implemented in hardware. Exemplary computer storage media include hard disks flash drives and other solid state memory. In contrast communication media typically embody computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and include any information delivery media.

Although described in connection with an exemplary computing system environment embodiments of the disclosure are capable of implementation with numerous other general purpose or special purpose computing system environments configurations or devices.

Examples of well known computing systems environments and or configurations that may be suitable for use with aspects of the invention include but are not limited to mobile computing devices personal computers server computers hand held or laptop devices multiprocessor systems gaming consoles microprocessor based systems set top boxes programmable consumer electronics mobile telephones network PCs minicomputers mainframe computers distributed computing environments that include any of the above systems or devices and the like. Such systems or devices may accept input from the user in any way including from input devices such as a keyboard or pointing device via gesture input and or via voice input.

Embodiments of the invention may be described in the general context of computer executable instructions such as program modules executed by one or more computers or other devices. The computer executable instructions may be organized into one or more computer executable components or modules. Generally program modules include but are not limited to routines programs objects components and data structures that perform particular tasks or implement particular abstract data types. Aspects of the invention may be implemented with any number and organization of such components or modules. For example aspects of the invention are not limited to the specific computer executable instructions or the specific components or modules illustrated in the figures and described herein. Other embodiments of the invention may include different computer executable instructions or components having more or less functionality than illustrated and described herein.

Aspects of the invention transform a general purpose computer into a special purpose computing device when configured to execute the instructions described herein.

The embodiments illustrated and described herein as well as embodiments not specifically described herein but within the scope of aspects of the invention constitute exemplary means for selectively activating one or more of the plurality of card applets on the mobile computing device for completing point of sale transactions.

The order of execution or performance of the operations in embodiments of the invention illustrated and described herein is not essential unless otherwise specified. That is the operations may be performed in any order unless otherwise specified and embodiments of the invention may include additional or fewer operations than those disclosed herein. For example it is contemplated that executing or performing a particular operation before contemporaneously with or after another operation is within the scope of aspects of the invention.

When introducing elements of aspects of the invention or the embodiments thereof the articles a an the and said are intended to mean that there are one or more of the elements. The terms comprising including and having are intended to be inclusive and mean that there may be additional elements other than the listed elements.

Having described aspects of the invention in detail it will be apparent that modifications and variations are possible without departing from the scope of aspects of the invention as defined in the appended claims. As various changes could be made in the above constructions products and methods without departing from the scope of aspects of the invention it is intended that all matter contained in the above description and shown in the accompanying drawings shall be interpreted as illustrative and not in a limiting sense.

