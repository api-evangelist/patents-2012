---

title: Methods, systems and computer readable media for enabling a downloadable service to access components in a mobile device
abstract: Methods, systems, and computer readable media for enabling a downloadable service to access components in a mobile device are disclosed. According to one aspect, a system comprises a mobile device that includes a mobile wallet application configured to determine at least one hardware component or software component provisioned on the mobile device and to generate a capabilities object containing information identifying the at least one hardware or software component. The system further includes a network server supporting a downloadable service configured to receive the capabilities object from the mobile device, to generate personalized downloadable service content based on the information in the received capabilities object, to provide the personalized web page content to the mobile device, wherein the personalized downloadable service content is configured to access the at least one hardware component or software component on the mobile device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08959143&OS=08959143&RS=08959143
owner: Mastercard International Incorporated
number: 08959143
owner_city: Purchase
owner_country: US
publication_date: 20121026
---
The present application claims the benefit of U.S. Provisional Patent Application Ser. No. 61 551 790 filed Oct. 26 2011 the disclosure of which is incorporated herein by reference in its entirety.

The subject matter described herein relates to modifying web page content with respect to mobile phones and other devices. More particularly the subject matter described herein relates to systems methods and computer readable media for enabling a downloadable service to access components in a mobile device.

Mobile devices are presently being configured to utilize mobile wallet applications to perform a number of payment and non payment tasks. The mobile wallet application is evolving into an ecosystem component thereby creating a need for downloading third party services securely on the mobile device to extend the capabilities of the mobile wallet application. The selection of third party downloadable services may be based on a consumer s preferences location supplier carrier handset provider issuer and the like. However these third party downloadable services are typically displayed to the user irrespective of the hardware and software components provisioned on the mobile device. Notably it is currently not possible in a mobile environment for a host network server to modify the contents of a downloadable service e.g. a web page based on the hardware and software components capabilities of a mobile device.

Accordingly there is a need for systems methods and computer readable media for enabling a downloadable service to access components in a mobile device.

According to one aspect the subject matter described herein includes a system for enabling a downloadable service to access components in a mobile device. In one embodiment the system comprises a mobile device that includes a mobile wallet application configured to determine at least one hardware component or software component provisioned on the mobile device and to generate a capabilities object containing information identifying the at least one hardware or software component. The system further includes a network server supporting a downloadable service configured to receive the capabilities object from the mobile device to generate personalized downloadable service content based on the information in the received capabilities object to provide the personalized web page content to the mobile device wherein the personalized downloadable service content is configured to access the at least one hardware component or software component on the mobile device.

The subject matter described herein may be implemented in hardware software firmware or any combination thereof. As such the terms function or module as used herein refer to hardware which may also include software and or firmware components for implementing the feature being described. In one exemplary implementation the subject matter described herein may be implemented using a computer readable medium having stored thereon computer executable instructions that when executed by the processor of a computer control the computer to perform steps. Exemplary computer readable media suitable for implementing the subject matter described herein include non transitory computer readable media such as disk memory devices chip memory devices programmable logic devices and application specific integrated circuits. In addition a computer readable medium that implements the subject matter described herein may be located on a single device or computing platform or may be distributed across multiple devices or computing platforms.

The present subject matter includes systems methods and computer readable media for enabling a downloadable service to access components in a mobile device. In one embodiment a mobile wallet application provisioned on a mobile device may be configured to collect and provide hardware and or software component information to a network server that hosts the downloadable service e.g. a web server hosting a web page . The hardware and software components are then identified or detailed in a capabilities object which is subsequently provided by the mobile device to the network server. By exposing i.e. disclosing the component capability data to the host network server certain elements or interface options associated with an accessed downloadable service i.e. web page may either be displayed or hidden depending on the capabilities of the mobile device. Namely the contents of the accessed web page is personalized based on the mobile device s activated hardware components and stored software data thereby effectively increasing the functionality of the accessed web page to the mobile device user. For example the customization may include presenting a quick response QR code scanner interface option on a web page if both camera hardware and a QR code scanning library exist on the mobile device. Similarly a web page may provide secure element related services if a secure element exists on the mobile device.

Mobile device may include a near field communications NFC enabled mobile device such as smart phone personal digital assistant PDA tablet or any other like device that is configured to wirelessly communicate via NFC radio. For example mobile device may include a hardware based NFC module that enables mobile device to send and receive NFC signals. Mobile device may also be provisioned with a mobile wallet application that is used to facilitate secure payment and non payment transactions via NFC. Mobile wallet application may be configured to manage select and utilize various software based electronic certificates or softcards used to conduct the NFC payment and or non payment transactions. Exemplary softcards which may be stored in non secure memory or secure element include payment and non payment electronic certificates such as electronic credit cards electronic loyalty cards electronic tickets electronic debit cards electronic loyalty reward certificates electronic coupons electronic gift cards electronic prepaid cards and the like. In one embodiment the softcards may be securely downloaded from a trusted service provider TSP server or a trusted service manager for service providers server to mobile wallet application . In one embodiment TSP server communicates with a content provider server to obtain the softcard or electronic certificate data that is to be provisioned on mobile device . Additional information such as a check balance check due date or reward points may also be securely obtained from trusted service provider TSP server and or a service specific add on services gateway not shown .

In one embodiment mobile wallet application may also include a native software based application or module that is configured to access hardware components located in mobile device . As a native application mobile wallet application may access hardware components such as a secure element NFC module a camera e.g. a still camera and or video camera memory and the like. Additional hardware components not shown that may be accessed include but are not limited to an accelerometer add on peripherals WiFi 3G Edge LTE Bluetooth Zigbee a global positioning system GPS chip and the like. Mobile wallet application may also be configure to access software components i.e. local software content stored on mobile device . Examples of software components include but not limited to a calculator program a stock price quote checker program a currency conversion program a stored designated default credit card wallet state information and the like. Mobile wallet application is also configured to generate capabilities objects which identify and or detail the available hardware and software components provisioned on mobile device . In one embodiment a capabilities object may include a software based construct or object that may contain data or functions associated with mobile device . The capabilities object may be stored anywhere within mobile device such as capabilities object data in memory or in secure element . Mobile wallet application may also be configured to utilize application programming interfaces APIs to i determine the aforementioned available hardware and software components ii communicate with downloadable services provisioned on the mobile device and iii communicate with network servers. In one embodiment mobile wallet application may be originally provisioned on mobile device by being downloaded from application store . Application store may wirelessly provision a number of different types of mobile wallet applications e.g. a bank wallet a merchant wallet a carrier wallet and the like to a mobile device.

Mobile device may also be provisioned with a secure element . In one embodiment secure element may include any high security memory area that may be provisioned in a subscriber identity module SIM card embedded memory or added on e.g. a MicroSD memory card . Similarly secure element may include other forms of secured memory such as memory included in the main processor itself e.g. Trust Zone . As used herein the terms secure element secure memory and secure memory element includes one or more of the aforementioned forms of secured memory embodiments.

Mobile device is further provisioned with an NFC module and memory . NFC module may be configured to establish an NFC link between mobile device and a second NFC enabled device such as NFC reader . In one embodiment NFC module may comprise a hardware based circuit or chip. In some embodiments the NFC link established by NFC module may be secure or unsecure. Memory may comprise a non secure baseband memory that is configured to store data .

In one embodiment a user utilizes mobile device to establish communication with a network server to obtain a downloadable service. For example mobile device may utilize a web browser or mobile wallet application to communicate with a web content server or wallet services store server that contains a plurality of downloadable service applications . After establishing communication with the network server the downloadable content data may be provisioned on mobile device . For example the downloadable content may include web page content data. In one embodiment the communication with the network server may be established with a mobile wallet application API . Mobile device may also be configured to communicate and obtain downloadable services via APIs with a trigger manager which is communicatively connected to other network servers and or downloadable content providers. Similarly mobile device may acquire a downloadable service by wirelessly communicating with NFC reader and or point of sale POS device via NFC reader . In this scenario the downloadable content may be stored locally at point of sale POS device or may be obtained from another network server by point of sale POS device .

After receiving the web page content data mobile wallet application initiates a process that exposes i.e. discloses the hardware and software components of mobile device and enables the displayed web page content to be personalized customized for the capabilities of mobile device . In one embodiment the process is initiated by mobile wallet application determining the hardware and software components provisioned on mobile device . For example mobile wallet application may be configured to utilize low level APIs to collect data indicating the number and types of hardware components and software components contained within mobile device .

In one embodiment mobile wallet application provides a native method to determine the status of a hardware and or software component. Specifically implementation of determining the hardware and software components is written natively on each mobile device platform but is exposed to a network server in a uniform platform independent manner via a capabilities object. For example an exemplary query made by mobile wallet application to determine if mobile device is equipped with NFC service discovery and a camera may include the following 

Although this exemplary query only determines if mobile device includes NFC service discovery and camera capabilities additional hardware or software components may be inquired in a similar manner without departing from the scope of the present subject matter.

After determining the current hardware and software components capabilities of mobile device mobile wallet application may be configured to generate a capabilities object that exposes discloses the hardware capabilities and software e.g. wallet capabilities associated with mobile device . As mentioned above mobile wallet application may utilize APIs that are native to the platform to determine the hardware and software components of mobile device . In one embodiment the generated capabilities object may contain functions that learn monitor the existence of hardware and software components and capability features such as NFC capability QR scanning with a camera capability wallet features e.g. existence of default electronic payment card and the like. In one embodiment the capabilities object may be created on the fly by mobile wallet application which checks the hardware and software components in mobile device in real time and provides the capabilities object to the network server that hosts the downloadable service e.g. a loading web page . The capabilities object may include the most recent state of the hardware and software i.e. wallet capabilities available for use by the downloadable service and or host network server. For example the state of the wallet may change and hence the capabilities exposed to the web application may not always be static. Notably software components e.g. the capabilities of mobile wallet application and or activated hardware components on mobile device may frequently change. For example a user may change the default card selected for payment in mobile wallet application or the NFC chip may be temporarily deactivated e.g. to conserve battery power from settings preferences.

Although this capabilities object presented above is written in an Android based software code the capabilities object may be generated in any protocol without departing from the scope of the present subject matter. In one embodiment the capabilities object may be stored in memory as capabilities object data prior to being sent to a network server e.g. wallet services store server .

After generating a capabilities object mobile wallet application may then expose the existing hardware and software components to the network server hosting the downloadable content. In one embodiment mobile wallet application may be configured to instantiate the capabilities object and wirelessly transmit the capability object instance containing the hardware and software component data to the network server. For example an API associated with mobile wallet application may communicate with an API associated with the network server e.g. wallet services store server to provide the capabilities object over an established channel e.g. using JavaScript code .

After receiving the capabilities object from mobile device the network server may then access process the received capabilities object and generate personalized customized downloadable service content such as web page content for mobile device . The web page content may be personalized based on the active hardware components and stored cached software content provisioned on mobile device . In one embodiment the web server is configured to modify the web page content by including embedding protocol handlers e.g. add wallet or local protocol handlers in the personalized web page content code. In one example the network server includes one or more protocol handlers in the personalized downloadable service content wherein the one or more protocol handlers are specifically associated with one or more of the hardware and or software components identified in the capabilities object. Thus the personalized downloadable service content may be configured to provide an interface option associated with each of the newly included protocol handers.

Once the personalized web page content is modified the network server sends the personalized web page content back to mobile device . In one embodiment the personalized web page content is uploaded to mobile device via a wireless Internet connection. The communication link between mobile device and the sending network server may be established using APIs.

Upon receiving the personalized web page content mobile wallet application processes e.g. executes runs the personalized downloadable service content. In one embodiment the protocol handler s included in the personalized web page content establishes a link to the hardware and software components that were previously included in the capabilities object. For example an API embedded in a customized web page or data driven page may access hardware or software components on mobile device utilizing protocol handlers if an interface option associated with a linked protocol handler is selected on the displayed web page by a user . Exemplary protocol handlers for accessing camera a default softcard e.g. to conduct a payment and NFC module respectively include 

As mentioned above the customized web page content based on local hardware and software capabilities provides a user of mobile device with interface options to interact with the web page. After the link is established mobile wallet application utilizes the personalized web page to include interface options associated with the hardware and software components in a displayed web page i.e. a web page displaying the personalized customized downloadable service content . For example if the network server was provided with a capabilities object that indicated that mobile device had NFC and QR scanning capabilities then the customized web page content would display an NFC tap or QR scan interface options e.g. to tap a smart tag or scan a QR code associated with a consumer product to the user. If mobile device is not provisioned with these hardware components or these capabilities were deactivated then the customized web page may only display a text box to receive an inputted code or search term e.g. associated with the consumer product .

In one embodiment mobile device may include a lightweight mobile monitoring program not shown that is configured to monitor selected request schemes i.e. a specific portion of a protocol handler such as those triggered by selecting options on the customized web page. Exemplary request schemes may include http wallet local and the like. In one embodiment if the monitoring program determines that the request scheme does not match wallet or local then the request scheme may be processed by mobile device in a normal manner. However if the monitoring program detects a request scheme that matches either wallet or local and others supported by the monitoring program the monitoring program subsequently directs the protocol handler i.e. the request scheme and associated URI to either a wallet scheme handler module or a local scheme handler module. Notably the scheme handler modules are responsible for communicating with the underlying hardware or software component to executing a particular task. For example the wallet scheme handler module parses the uniform resource identifier URI included with the scheme request wallet to obtain information that can be translated into a command. In one embodiment the protocol handler wallet Pay DefaultCard may translate into Paying with Default Payment Card . After parsing the wallet scheme handler may utilize an API to invoke an appropriate hardware or software component to perform the task.

Similarly a local scheme handler module may parse the URI included with the local request to obtain information that can be translated into a command. For example the local scheme handler module may parse the URI included in the protocol handler and subsequently locate the required file image or other data stored locally on mobile device . After parsing the local scheme handler may use an API to invoke an appropriate hardware or software component to perform the task.

In block a determination is made as to whether the web page is accessed using a mobile wallet application. If the web page is accessed using a mobile wallet application then method proceeds to block . Otherwise method continues to block .

In block it is determined that the web page is accessed using a web browser e.g. Safari Firefox etc. provisioned on the mobile device.

In block the mobile device capabilities are determined by a web server. For example the web server may determine the hardware and software components e.g. activated hardware capabilities and or local software content on the mobile device based on communication interaction with a user agent module provisioned on the mobile device.

In block a switch from the web browser to the mobile wallet application may be performed. In one embodiment the mobile device automatically switches over to mobile wallet application if a particular web page is accessed. For example if a user selects or clicks on a link on a web page that contains a wallet or local protocol handler the mobile device will close out of the web browser and initiate a mobile wallet application. Method continues to block .

In block the hardware and software components i.e. active hardware components and local software content provisioned on the mobile device is determined. In one embodiment the mobile wallet application utilizes APIs to determine which hardware components provisioned on the mobile device are activated e.g. turned on and accessible for use . The mobile wallet application may also be configured to determine software components e.g. wallet state or local software content that are stored on the mobile device. For example the software components may include a previously downloaded application the wallet state or cached data content.

In block a capabilities object containing the active hardware and software components is generated. In one embodiment the mobile wallet application creates a capabilities object or any other like software based construct that contains the activated hardware components and or software components provisioned on the mobile device.

In block the capabilities object is sent to a web server. In one embodiment the mobile wallet application may be configured to instantiate the capabilities object and wirelessly transmit the instance containing the hardware and software data to a web server that hosts the web page content. For example an API associated with the mobile wallet application may communicate with an API associated with the web server to provide the capabilities object over an established channel e.g. using JavaScript code .

In block personalized web page content is generated. In one embodiment the web server processes the received capabilities object and generates personalized e.g. customized web page content for the associated mobile device. Notably the web page content is personalized based on the active hardware components and stored cached software content provisioned on the mobile device. In one embodiment the web server is configured to change the web page content by including embedding protocol handlers e.g. add wallet or local protocol handlers in the web page code.

In block the personalized web page content is sent. In one embodiment the web server provides the personalized web page content to the mobile device associated with the capabilities object. For example the personalized web page content is uploaded to mobile device via a wireless Internet connection.

In block a protocol handler links to one or more of the hardware and software components in the mobile device. In one embodiment at least one protocol hander that is included in the personalized web page content initiates a link or connection to an active hardware component and or to stored software content in the mobile device.

In block requests are sent to the mobile wallet application. In one embodiment a user select the at least one protocol handler in the personalized web page content sends a request to the mobile wallet application. In one embodiment an API call into a mobile wallet application is made by the monitoring program based on the request in the protocol handler uniform resource locator URL or URI.

In block the mobile wallet application processes the request. In one embodiment the mobile wallet application processes e.g. executes runs the personalized web page content in response to the request.

In block the personalized web page is displayed. In one embodiment the mobile wallet application is configured to display the personalized web page which includes interface options that link to the hardware and software components. For example if the mobile device includes hardware that supports NFC service discovery i.e. the ability for the mobile device to be tapped on a smart shelf tag equipped with an NFC tag the web page may display an interface option that prompts a user to tap mobile device on an in store smart shelf tag. Alternatively a web page when loaded on a mobile device that does not support service discovery may instead display a search box and request the user to input a code listed on the shelf tag.

It will be understood that various details of the subject matter described herein may be changed without departing from the scope of the subject matter described herein. Furthermore the foregoing description is for the purpose of illustration only and not for the purpose of limitation.

