---

title: Direct addressability and direct server return
abstract: Cloud computing platforms having computer-readable media that perform methods for direct addressability and direct server return are provided. The cloud computing platform includes a load balancer and several servers. The servers are configured with public addresses, private addresses, and an address of the load balancer. The loopback interface of the servers is configured with the address of the load balancer. This allows a server to bypass the load balancer when replying to communication messages. Additionally, the public and private addresses of the servers enable direct addressability in the cloud computing platform. Accordingly, an application executing in the cloud computing platform may connect two or more clients on the same server.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08510447&OS=08510447&RS=08510447
owner: Microsoft Corporation
number: 08510447
owner_city: Redmond
owner_country: US
publication_date: 20120814
---
This patent claims the benefit of and is a divisional of U.S. application Ser. No. 12 723 994 which was filed on 15 Mar. 2010 and is incorporated herein in the entirety by reference.

Conventionally cloud computing platforms host software applications in an Internet accessible virtual environment. The cloud computing platform allows an organization to use datacenters designed and maintained by third parties. The conventional virtual environment supplies small or large organizations with requested hardware resources software resources network resources and storage resources. The virtual environment also provides application security application reliability application scalability and availability.

The conventional datacenters provide the physical computing resources physical storage resources and physical network resources. The physical resources in the data center are virtualized and exposed to the organizations as a set of application programming interfaces. The organizations do not need to maintain their own hardware resources or software resources or maintain datacenters that are reliable and scalable.

The organizations may access these physical resources efficiently through the virtual environment without knowing the details of the software or the underlying physical hardware. The conventional data centers utilize virtual private network configurations that prevent direct internet protocol IP addressing and direct server return. Thus cloud applications that attempt to use direct IP addressing or direct server return fail to execute properly in conventional datacenters.

Embodiments of the invention relate in one regard to cloud computing platforms computer readable media and computer implemented methods that provide direct IP addressing and direct server return in a cloud computing platform. The cloud computing platform includes a load balancer and a collection of servers that process messages from client devices that communicate with the cloud computing platform.

The servers are configured to process the messages received from the client devices. In one embodiment the servers are configured with a public network interface a private network interface and a loopback interface. The loopback interface of the servers may be assigned the address of the load balancer.

The load balancer ensures that the servers distribute processing of messages among the servers. The load balancer is configured to receive a message and to select a server from the group of servers to process the message. In turn the load balancer changes the destination media access control address of the message to the media access control address of the server without altering the destination internet protocol address i.e the load balancer s internet protocol address of the message. The load balancer transmits the modified message to the selected server. The selected server sends a reply to the source of the message. The reply bypasses the load balancer. Accordingly the load balancer is configured to provide direct server return.

Additionally the servers are configured with a public address on the public interface. The server s public address may be shared with the client devices to allow multiple clients to connect to the same server. Accordingly the servers provide direct addressability when an application requires multiple client devices to connect to the same server.

This summary is provided to introduce a selection of concepts in a simplified form that are further described below in the detailed description. This summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended to be used in isolation as an aid in determining the scope of the claimed subject matter.

This patent describes the subject matter for patenting with specificity to meet statutory requirements. However the description itself is not intended to limit the scope of this patent. Rather the inventors have contemplated that the claimed subject matter might also be embodied in other ways to include different steps or combinations of steps similar to the ones described in this patent in conjunction with other present or future technologies. Moreover although the terms step and block may be used herein to connote different elements of methods employed the terms should not be interpreted as implying any particular order among or between various steps herein disclosed unless and except when the order of individual steps is explicitly described. Further embodiments are described in detail below with reference to the attached drawing figures which are incorporated in their entirety by reference herein.

A cloud computing platform is configured to perform direct addressability and direct server return. Direct addressability is a mechanism that provides direct access to servers in a cloud computing platform. Each server is associated with a public network and is configured with a public address. In certain embodiments the address is an internet protocol IP address that allows a client device to connect directly to the server. Thus applications executing in the cloud computing platform may request that multiple client devices connect to the same server. The public addresses of the servers are communicated among the client devices to allow multiple client devices to connect to the same server.

Direct server return is a mechanism that optimizes load balanced access to servers in the cloud computing platform. A load balancer connected to the servers receives a message from a client device. In turn the load balancer selects a server to process the message. The message is transmitted to the server which processes the message and responds with a reply message. The reply message from the server bypasses the load balancer and is routed to the client device the source of the message received by the load balancer without traversing the load balancer on the reply path. In certain embodiments the reply message is transmitted from a loopback interface of the server and is configured with a source internet protocol address that is set to the internet protocol address of the load balancer instead of the internet protocol address of the server. Accordingly the cloud computing platform provides both direct addressability and direct server return.

As one skilled in the art will appreciate the cloud computing platform may include hardware software or a combination of hardware and software. The hardware includes processors and memories configured to execute instructions stored in the memories. In one embodiment the memories include computer readable media that store a computer program product having computer useable instructions for a computer implemented method. Computer readable media include both volatile and nonvolatile media removable and nonremovable media and media readable by a database a switch and various other network devices. Network switches routers and related components are conventional in nature as are means of communicating with the same. By way of example and not limitation computer readable media comprise computer storage media and communications media. Computer storage media or machine readable media include media implemented in any method or technology for storing information. Examples of stored information include computer useable instructions data structures program modules and other data representations. Computer storage media include but are not limited to random access memory RAM read only memory ROM electrically erasable programmable read only memory EEPROM flash memory or other memory technology compact disc read only memory CD ROM digital versatile discs DVD holographic media or other optical disc storage magnetic cassettes magnetic tape magnetic disk storage and other magnetic storage devices. These memory technologies can store data momentarily temporarily or permanently.

In one embodiment the cloud computing platform includes cloud applications that are available to client devices. The client devices access the cloud computing platform to execute the cloud applications. The cloud applications are implemented using storage and processing resources available in the cloud computing platform.

The cloud computing platform is configured to execute cloud applications requested by the client devices . The cloud computing platform connects to the client devices via a communications network such as a wireless network local area network wired network or the Internet.

The cloud applications are available to the client devices . The software executed on the cloud computing platform implements the cloud applications . In one embodiment virtual machines in the cloud computing platform execute the cloud applications . The cloud applications may include editing applications network management applications finance applications or any application requested or developed by the client devices . A cloud application may require that multiple client devices connect to a single server of the cloud computing platform . The direct addressability mechanism implemented by the cloud computing platform allows the client devices to connect to a selected server. In certain embodiments some functionality of the cloud application may be executed on the client devices .

The client devices are utilized by a user to interact with cloud applications provided by the cloud computing platform . The client devices in some embodiments must register with the cloud computing platform to access the cloud applications . Any client device with an account from the cloud computing platform may access the cloud applications and other resources provided in the cloud computing platform . The client devices include without limitation personal digital assistants smart phones laptops personal computers gaming systems set top boxes or any other suitable client computing device. The client devices include user and system information storage to store user and system information on the client devices . The user information may include search histories cookies and passwords. The system information may include internet protocol addresses cached Web pages and system utilization. The client devices communicate with the cloud computing platform to receive results from the cloud applications .

Accordingly the computing system is configured with a cloud computing platform that provides cloud applications to the client devices . The cloud applications remove the burden of updating and managing multiple local client applications on the client devices .

In certain embodiments the cloud computing platform provides a collection of servers and a load balancer. The load balancer distributes messages among the servers. The load balancer attempts to prevent the servers from being overloaded. In some embodiments the load balancer and servers are configured to provide direct server return and direct addressability to optimize the cloud computing platform.

The client devices create communication messages that are transmitted on network . The communication messages are transmitted to the servers via the load balancer . In one embodiment the communication messages created by the client devices are packets having a destination that includes an internet protocol address of the client. The internet protocol address may include a public address or a private address associated with the load balancer.

The network may include a private network and a public network. The private network is identified using private addresses and the public network is addressed using public addresses. The client devices router load balancer switch and the server connect to the network and are assigned an internet protocol address. The network transmits communication messages among the client devices router load balancer switch and the servers .

The router receives a communication message from the client device. In turn the router parses the communication message to identify the destination of the communication message. When the destination specifies the public internet protocol address of the load balancer the router transmits the communication message to the load balancer. When the communication message specifies an address that is not readily identifiable in a look up table maintained by the route the communication message is transmitted to a default router for further processing.

The load balancer distributes the processing workload among the servers . The load balancer may be configured with a public address and a private address. In one embodiment the load balancer may receive the communication messages from the client devices over an interface associated with the public address of the load balancer . In turn the load balancer selects a server to process the message based on the relative processing and bandwidth capacities at the servers . The server with the most available capacity is selected to process the message. The load balancer modifies the communication message by changing the destination media access control address. The destination media access control address of the communication message is changed to the media access control address of the selected server . In turn the communication message is transmitted to the selected server via switch .

The switch routes the communication message to the servers selected by the load balancer . In some embodiments the switch tags the communication message with an identifier. The identifier may include a term such as public for communication messages that are communicated over a public network interface and private for communications that are transmitted over a private network interface. The switch may also be configured in a default mode to tag each received communication message as private. The switch may also select a private tag when the source of the communication message is on the private network. The switch may select a public tag when the source of the communication message is on the public network. In one embodiment the switch is a top of rack switch.

The servers process the communication message and transmit the response to the client devices . In some embodiments the response may be returned from the servers without traversing the load balancer. The servers are configured with public addresses private addresses and the load balancer address. The server checks the destination address to ensure that it matches at least one of the internet protocol addresses associated with the server . Each server may include three internet protocol addresses. The first internet protocol address may be a private address that is used by the server to communicate over the private network. The second address is a public address that is used by the server to communicate over the public network and to provide direct addressability. The third address is the load balancer address which is used by the server to implement the direct server return. However when an address resolution protocol request identifying the load balancer address is transmitted on the public network or private network the servers do not respond. This prevents conflicts between the load balancer and the servers .

In some embodiments a first network interface on the server configured the with first address receives communication messages from the load balancer . A second network interface on the server configured with the second address receives communication messages from client devices on the Internet. The loopback interface is used to prevent discarding of communication messages that have destination addresses set as the address for the load balancer. Accordingly the server is configured with weak routing to allow the first network interface and the second network interface to receive communication messages having destination addresses set as the address of the load balancer .

In one embodiment the servers may execute virtualization technology that creates a virtual network having virtual switches that connect multiple virtual machines. The virtual switches may operate similar to switch and the virtual machines may operate similar to servers . In some embodiments the virtual switches tag only the communication messages for the public network and the switches tag only the communication messages for the private network. The virtual switches and switches may be configured to connect to multiple private networks and one public network.

The servers in the cloud computing platform may implement direct server return. The direct server return bypasses the load balancer in the reply path when responding to a communication message from a client device. Direct server return reduces the number of messages that are created in the reply path. It may also decrease the round trip reply time calculated by the client device that sent the communication message.

In step the communication message addressed to a public interface of a load balancer connected to multiple servers is received by the load balancer. In step the load balancer selects one of the servers to process the communication message. The message is modified by the load balancer to include a media access control address of the selected server as the destination media access control address and to retain the internet protocol address of the load balancer as the destination internet protocol address of the message in step . In step the load balancer transmits the modified message to the selected server associated with the destination media access control address.

The selected server has a loopback interface configured to match the internet protocol address of the load balancer. The loopback interface does not respond to address resolution protocol requests that specify the internet protocol address of the load balancer. The load balancer responds to the address resolution protocol requests that specify the internet protocol address of the load balancer.

The selected server has an interface to a private network and an interface to a public network. The server communicates a reply to the source without traversing the load balancer in the reply route. The servers may include physical servers or virtual servers. The method ends in step .

In certain embodiments the servers are configured to provide direct addressability. The public interfaces of the server may allow an application to connect multiple client devices to the same server. The cloud computing platform selects the server with the most capacity to process the communication messages from multiple clients. The client devices use the public address to connect to the server selected by the cloud computing platform.

When the first server has more capacity the first server is selected by the fabric controller in step . In step the fabric controller transmits the public address of the first server to the second client. In step the fabric controller connects the second client to the first server. In turn the fabric controller disconnects the second client from the second server.

When the second server has more capacity the second server is selected by the fabric controller in step . In step the fabric controller transmits the public address of the second server to the first client. In step the fabric controller connects the first client to the second server. In turn the fabric controller disconnects the first client from the first server. The method ends in step .

In summary the cloud computing platform is configured to provide direct addressability and direct server return. The cloud applications executed in the cloud computing platform may connect multiple client devices to a single server. Additionally the load balancer in the cloud computing platform may be bypassed on reply routes when the servers respond to communication messages from the client devices.

The foregoing descriptions of the embodiments of the invention are illustrative and modifications in configuration and implementation are within the scope of the current description. For instance while the embodiments of the invention are generally described with relation to those descriptions are exemplary. Although the subject matter has been described in language specific to structural features or methodological acts it is understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims. The scope of the embodiment of the invention is accordingly intended to be limited only by the following claims.

