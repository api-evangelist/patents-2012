---

title: Haptic feedback sensations based on audio output from computer devices
abstract: Triggering haptic sensations based on sound output from a computer device. A portion of sound data is stored that is output to a user as audio from an application program running on a computer. The portion of sound data is analyzed using intelligent heuristics to extract at least one sound feature from the sound data. The execution of at least one haptic effect is triggered based on the sound feature, where the haptic effect is commanded to the haptic feedback device approximately correlated to the output of the portion of sound to the user as audio. The haptic effect causes a haptic sensation to be output to the user. Different haptic effects can be associated with different sound features, frequency ranges, amplitudes, etc.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08686941&OS=08686941&RS=08686941
owner: Immersion Corporation
number: 08686941
owner_city: San Jose
owner_country: US
publication_date: 20121219
---
This application is a continuation application of U.S. patent application Ser. No. 12 623 685 filed on Nov. 23 2009 herein incorporated by reference which is a continuation application of U.S. patent application Ser. No. 09 974 759 filed on Oct. 9 2001 now U.S. Pat. No. 7 623 114 herein incorporated by reference .

The present invention relates generally to systems for allowing humans to interface with computer systems and more particularly to methods for providing haptic feedback to the user interfacing with one or more computer applications involving sound output.

A user can interact with an environment displayed by a computer to perform functions and tasks on the computer such as playing a game experiencing a simulation or virtual reality environment using a computer aided design system operating a graphical user interface GUI navigate web pages etc. Common human computer interface devices used for such interaction include a mouse joystick trackball gamepad remote control steering wheel stylus tablet pressure sensitive sphere or the like that is in communication with the computer system controlling the computer environment. The computer updates the environment in response to the user s manipulation of a physical manipulandum such as a joystick handle button or mouse and provides visual and audio feedback to the user utilizing the display screen and audio speakers. The computer senses the user s manipulation of the user object through sensors provided on the interface device that send locative signals to the computer.

In some interface devices kinesthetic force feedback and or tactile feedback is also provided to the user more generally known collectively herein as haptic feedback. These types of interface devices can provide physical sensations which are felt by the user manipulating a user manipulandum of the interface device. One or more motors or other actuators are coupled to the manipulandum and are connected to the controlling computer system. The computer system controls forces on the manipulandum in conjunction and coordinated with computer events and interactions by sending control signals or commands to the actuators. The computer system can thus convey physical force sensations to the user in conjunction with other supplied feedback as the user is grasping or contacting the interface device or manipulatable object of the interface device.

The audio feedback provided to the user is an inherent part of many application programs especially games. Some existing haptic feedback devices are designed to provide haptic sensations based directly on the sound output from the computer. The sound output waveform is directly routed to the interface device so that tactile sensations such as vibrations are based directly on the sound output waveform or a filtered portion thereof much like the way a speaker operates.

A disadvantage of existing haptic sensations based on direct sound waveforms is that the haptic sensations are simple effects based directly on the sound signals. No evaluation or processing of the sound signals is accomplished before sending the signals to the haptic device. This can cause undesirable or disconcerting haptic sensations to be output to the user since not all of the sound output is appropriate for directly translation into haptic sensations.

The present invention is directed toward triggering the output of haptic sensations based on sound output from a computer device. The output of haptic sensations is intelligently triggered by analyzing sound data for features allowing an enhanced user experience.

More particularly an interface device of the present invention provides a method for triggering haptic sensations from sound features detected in sound output from a computer where the haptic sensations are able to be output to a user of a haptic feedback device in communication with the computer. A portion of sound data is stored that is output to a user as audio from an application program running on the computer. The sound data is stored in a memory buffer of the computer. The portion of sound data is analyzed using intelligent heuristics to extract at least one sound feature from the portion of sound data. The execution of at least one haptic effect is triggered based on the sound feature s where the haptic effect is commanded to the haptic feedback device approximately correlated to the output of the portion of sound to the user as audio. The haptic effect causes a haptic sensation to be output to the user.

The triggered haptic sensation is preferably assigned to the sound features found in the sound data. In some embodiments analyzing the portion of sound data can includes processing the sound data into multiple different frequency ranges and searching for sound features in each of the frequency ranges. A haptic effect can be triggered for each of the frequency ranges if the sound feature is present in that frequency range. Filters can be applied to the sound data or a fast Fourier transform can be used. Each frequency range can be associated with or mapped to a different haptic sensation. For example each of the frequency ranges can be associated with a periodic haptic sensation having a different frequency. Other types of haptic sensations can also be mapped and assigned to sound features so that they will trigger upon output of those sound features.

The present invention advantageously allows haptic feedback to be output by a computer system running an application program having sound output. The present invention intelligently assigns haptic sensations to features in the sound data to provide haptic feedback relevant to events in the application program which caused the sound output. This results in an overall improvement in user experience of the haptic feedback based on sound output.

These and other advantages of the present invention will become apparent to those skilled in the art upon a reading of the following specification of the invention and a study of the several figures of the drawing.

Host computer preferably includes a host microprocessor a clock a display screen and an audio output device . The host computer also includes other well known components such as random access memory RAM read only memory ROM and input output I O electronics not shown . The host computer is a computing device that can take a wide variety of forms. For example in the described embodiments computer is a personal computer or workstation such as a PC compatible computer or Macintosh personal computer or a Sun or Silicon Graphics workstation. Such a computer can operate under the Windows MacOS Unix MS DOS or other operating system. Alternatively host computer can be one of a variety of home video game console systems commonly connected to a television set or other display such as systems available from Nintendo Sega Sony or Microsoft. In other embodiments host computer can be a set top box a network or internet computer a portable computer or game device personal digital assistant PDA etc.

Host computer preferably implements a host application program with which a user is interacting via device and other peripherals if appropriate. In the context of the present invention the host application program is a digital audio editing program as described in greater detail below. Other application programs that utilize input of device and output haptic feedback commands to the device can also be used. The host application program preferably utilizes a graphical user interface GUI to present options to a user and receive input from the user. This application program may include the haptic feedback functionality described below or the haptic feedback control can be implemented in another program running on the host computer such as a driver or other application program. Herein computer may be referred as providing a graphical environment which can be a graphical user interface game simulation or other visual environment. The computer displays graphical objects or computer objects which are not physical objects but are logical software unit collections of data and or procedures that may be displayed as images by computer on display screen as is well known to those skilled in the art. Suitable software drivers which interface software with haptic feedback devices are available from Immersion Corporation of San Jose Calif.

Display device can be included in host computer system and can be a standard display screen LCD CRT flat panel etc. D goggles projection device or any other visual output device. Display device displays images as commanded by an operating system application simulation game etc.

Audio output device such as speakers provides sound output to user. In the context of the present invention other audio related devices may also be coupled to the host computer such as stereo receivers amplifiers etc. Other types of peripherals can also be coupled to host processor such as storage devices hard disk drive CD ROM drive floppy disk drive etc. printers and other input and output devices.

The haptic feedback interface device such as a mouse knob gamepad trackball joystick remote control unit PDA screen etc. is coupled to host computer by a bi directional bus . The bi directional bus sends signals in either direction between host computer and the interface device. Bus can be a serial interface bus such as an RS232 serial interface RS 422 Universal Serial Bus USB MIDI or other protocols well known to those skilled in the art or a parallel bus or wireless link. Some interfaces can also provide power to the actuators of the device .

Device can include a local processor . Local processor can optionally be included within the housing of device to allow efficient communication with other components of the mouse. Processor can be provided with software instructions to wait for commands or requests from computer host decode the command or request and handle control input and output signals according to the command or request. In addition processor can operate independently of host computer by reading sensor signals and calculating appropriate forces or commands from those sensor signals time signals and stored or relayed instructions selected in accordance with a host command. Suitable microprocessors for use as local processor include the MC68HC711E9 by Motorola the PIC16C74 by Microchip and the 82930AX by Intel Corp. for example as well as more sophisticated force feedback processors such as the Immersion Touchsense Processor. Processor can include one microprocessor chip multiple processors and or co processor chips and or digital signal processor DSP capability.

Microprocessor can receive signals from sensor s and provide signals to actuator in accordance with instructions provided by host computer over bus . For example in a local control embodiment host computer provides high level supervisory commands to processor over bus and processor decodes the commands and manages low level force control loops to sensors and the actuator in accordance with the high level commands and independently of the host computer . This operation is described in greater detail in U.S. Pat. Nos. 5 739 811 and 5 734 373 both incorporated herein by reference. In the host control loop force commands from the host computer instruct the processor to output a force or force sensation having specified characteristics. The local processor reports locative and other sensor data to the host computer which the host computer uses to update executed programs. In the local control loop actuator signals are provided from the processor to actuator and sensor signals are provided from the sensor and other input devices to the processor . The processor can process inputted sensor signals to determine appropriate output actuator signals by following stored instructions. Herein the term haptic sensation or tactile sensation refers to either a single force or a sequence of forces output by the actuator which provide a sensation to the user. The term haptic effect generally refers to the commands parameters and or data sent to the device that define a haptic effect and which results in a haptic sensation when the effect is output as forces to the user by the device.

In yet other embodiments other simpler hardware can be provided locally to device to provide functionality as processor . For example a hardware state machine or ASIC incorporating fixed logic can be used to provide signals to the actuator and receive sensor signals from sensors and to output tactile signals according to a predefined sequence algorithm or process.

In a different host controlled embodiment host computer can provide low level force commands over bus which are directly transmitted to the actuator via processor . Host computer thus directly controls and processes all signals to and from the device . In the simple host control embodiment the signal from the host to the device can command the actuator to output a force at a predefined frequency and magnitude or can include a magnitude and or a direction or be a simple command that indicates a desired force value to apply over time.

Local memory such as RAM and or ROM is preferably coupled to processor in device to store instructions for processor and store temporary and other data. For example force profiles can be stored in memory such as a sequence of stored force values that can be output by the processor or a look up table of force values to be output based on the current position of the user object. In addition a local clock can be coupled to the processor to provide timing data similar to the system clock of host computer the tithing data might be required for example to compute forces output by actuator e.g. forces dependent on calculated velocities or other time dependent factors . In embodiments using the USB communication interface timing data for processor can be alternatively retrieved from the USB signal.

Sensors sense the position or motion of the device and or one or more manipulandums or controls and provides signals to processor or host including information representative of the position or motion. Sensors suitable for detecting manipulation include digital optical encoders optical sensor systems linear optical encoders potentiometers optical sensors velocity sensors acceleration sensors strain gauge or other types of sensors can also be used and either relative or absolute sensors can be provided. Optional sensor interface can be used to convert sensor signals to signals that can be interpreted by the processor and or host .

Actuator s outputs haptic sensations by transmitting forces to the housing or one or more manipulandums of the device in response to signals received from processor and or host computer . Actuator can be any of many types of actuators including active actuators such as DC motors voice coils pneumatic or hydraulic actuators torquers piezoelectric actuators moving magnet actuators etc. or passive actuators such as brakes.

Actuator interface can be optionally connected between actuator and processor to convert signals from processor into signals appropriate to drive actuator . Interface can include power amplifiers switches digital to analog controllers DACs analog to digital controllers ADCs and other components as is well known to those skilled in the art. Other input devices are included in device and send input signals to processor or to host when manipulated by the user. Such input devices can include buttons scroll wheels d pads dials switches or other controls or mechanisms.

Power supply can optionally be included in device coupled to actuator interface and or actuator to provide electrical power to the actuator or be provided as a separate component. Alternatively power can be drawn from a power supply separate from device or be received across the bus . Also received power can be stored and regulated by device and thus used when needed to drive actuator or used in a supplementary fashion. Some embodiments can use a power storage device in the device to ensure that peak forces can be applied as described in U.S. Pat. No. 5 929 607 incorporated herein by reference . Alternatively this technology can be employed in a wireless device in which case battery power is used to drive the tactile actuators. A safety switch can optionally be included to allow a user to deactivate actuator for safety reasons.

Many types of interface or control devices may be used with the present invention described herein. For example such interface devices can include a haptic feedback trackball joystick handle steering wheel knob handheld remote control device gamepad controller for video games or computer games stylus grip wheel button cellular phone PDA touchpad or other manipulatable object surface or housing.

Mouse device includes a housing a sensing system and an actuator . Housing is shaped to fit the user s hand like a standard mouse while the user moves the mouse in the planar degrees of freedom and manipulates the buttons . Other housing shapes can be provided in many different embodiments.

Sensor detects the position of the mouse in its planar degrees of freedom e.g. along the X and Y axes. In the described embodiment sensor includes a standard mouse ball for providing directional input to the computer system. Alternatively an optical sensor or other type of sensor can be used.

Mouse device includes one or more actuators for imparting haptic feedback such as tactile sensations to the user of the mouse. Actuator is coupled to the housing to provide haptic feedback to the user. In one embodiment the actuator is coupled to an inertial mass that is moved by the actuator. Inertial forces caused by the motion of the inertial mass are applied to the housing of the mouse with respect to the inertial mass thereby conveying haptic feedback such as tactile sensations to the user who is contacting the housing. Some embodiments allow the actuator to move itself as the inertial mass. Such embodiments are described in greater detail in U.S. Pat. No. 6 211 861 and U.S. application Ser. No. 09 585 741 both incorporated herein by reference. Other types of interface devices such as gamepads handheld remote controls cellular phones PDA s etc. can include such an actuator for inertial tactile sensations.

Other types of interface devices and actuators can also be used with the present invention. For example gamepads mice or other devices can include an eccentric rotating mass coupled to a rotating shaft of an actuator to provide inertial tactile sensations on the housing or manipulandum of the device. Other types of haptic devices can provide kinesthetic force feedback such as joysticks knobs scroll wheels gamepads steering wheels trackballs mice etc. in which forces are output in the sensed degree s of freedom of a manipulandum. For example embodiments of a kinesthetic mouse haptic device are disclosed in U.S. Pat. Nos. 6 100 874 and 6 166 723 both incorporated herein by reference in their entireties.

The present invention improves the user experience in the output of haptic sensations coordinated with the sound output of one or more application programs or other programs running on the host computer.

The preferred embodiment of the present invention provides haptic effects for output to a haptic feedback device based on sound signals or data output by a host computer and which are output as haptic sensations to the user. In some alternate embodiments the haptic effects can be similarly provided based on features in sound signals or data input to a computer system e.g. from a microphone or audio device. Temporal features and characteristics of sound are identified and mapped to or associated with preprogrammed haptic effects. The haptic sensations based on these haptic effects can be rendered immediately on haptic feedback device or can be stored in memory to form a haptic profile of a given sound. The method of the present invention is not to simply route sound signals directly to a haptic device for output as haptic sensations as is done in the prior art but to associate a variety of high level sound features with a variety of high level haptic sensations using the sound features to trigger the output of the appropriate haptic sensations.

An important advantage of the present invention is that compelling haptic sensations are provided for any program that outputs sounds for a variety of events in that application program e.g. games without a software application developer having to expend effort in programming the haptic effects in the program. Thus any game program off the shelf can be easily made to work with haptic feedback devices regardless of whether the game includes code to control haptic devices or whether it was only developed for non haptic feedback devices allowing the user a more compelling interactive and immersive experience with a wide variety of programs. Furthermore the present invention can approximately distinguish between types of sound effects and associate different haptic sensations with different events allowing a more rich experience for the user.

In one embodiment a low level driver program running on the host computer performs the methods of the present invention. In other embodiments other levels of software running on the host or on a microprocessor of the haptic feedback device can perform some or all of the features or steps of the present invention application program API etc. . Program instructions for implementing the present invention can be stored as hardware e.g. logic components or software stored on a computer readable medium such as electrical memory magnetic disk optical disk magnetic tape etc.

In next step sound data is received from an application program or other software layer or program running on the host computer or alternately direction from an external audio device. The sound data is preferably digital data that can be in any standardized format such as MIDI digital sound samples in a way file an mp3 file etc. The sound data is received in step when it is also to be routed to an audio output device such as speakers and output to the user as sound. Typically the sound data is generated by the application program from a sound event occurring in the application such as a sound effect in a game resulting from game actions or events music in a game or other application program playing after a game starts or other event occurs a beep in a graphical user interface interaction the playing of music from a CD or DVD or other sound event. In the described embodiment the sound data received at this step to be analyzed is currently being output by speakers to the user. Thus by the time the sound data is processed and haptic sensations output as described below the sound data has already been output to the user. However since a small amount of sound data is stored only a delay of milliseconds occurs between sound and haptic output which the user cannot discern. In other embodiments in which the sound data output is known in advance haptic sensations can be output simultaneously or close to simultaneously with the sound data that triggered them.

In step a predetermined amount of the received sound data is stored in a temporary buffer in the memory of the host computer . In one embodiment this is an amount of data reasonably small enough to allow quick processing and associating with haptic sensations while large enough to permit meaningful processing and analysis. In one embodiment a portion of sound data equivalent to about 10 ms of play is stored although different amounts can be stored in other embodiments. For example the sound can be digitally recorded in a ms segment using DirectSound or other sound capture API on the host computer.

In step the stored sound data is processed and analyzed to identify particular sound characteristics or features which have been designated as relevant in the determination of which haptic sensations are to be output i.e. these sound features are to act as cues to trigger the output of haptic sensations. In broad terms the present invention uses intelligent heuristics to extract sound features that are likely to have meaning in an application program and to associate such sound features with predetermined preprogrammed haptic sensations that correspond appropriately with the extracted sound features and the likely events these features represent. For example likely events in many current video game applications may be explosions from bombs grenades missiles etc. the firing of a weapon such as a gun or rocket the crash of a vehicle the patter of footsteps the sound of an object splashing into water an alert sound for alerting the player to some game event etc. These events may have particular sound features which can be recognized from the received sound data after appropriate analysis.

A variety of different ways can be employed to process the data some embodiments are described below with respect to . These particular embodiments perform processing on the sound data to divide the waveform represented by the sound data into a number of different frequency ranges according to the present invention. Each frequency range of sound can then be analyzed separately for particular sound features. This frequency range division has the advantage that sounds often occur in different frequency ranges based on the event that triggered the sound for example an explosion in a game may have a low frequency sound while a gun shot may have a higher frequency sound. Types of events might therefore be approximately distinguished based on the frequency range in which the sound is located allowing different haptic effects to be commanded and output as described below.

Once the sound data has been processed and analyzed in next step haptic commands are output to the haptic device to cause haptic sensations to be output to the user manipulating the device. The haptic commands are triggered based on the sound features if any found in the sound data in step . Intelligent heuristics can be used to assign different haptic sensations to different types of sounds based for example on the frequencies of the sounds or other characteristics of the sounds. The haptic commands can cause device resident haptic effects to start playing or play at a commanded magnitude. In one embodiment the haptic effects that are already resident in memory on the device from step are modified with new parameters or data as appropriate to implement the desired haptic sensations. Alternatively new haptic effects can be created and commanded to be output immediately by the device as haptic sensations. As explained above the haptic sensations resulting from the commands may be output slightly after the associated sound features have been output as audio but preferably soon enough so that the user cannot tell that there was a delay.

In one embodiment the commanded haptic sensations can be set to a magnitude proportional to the sound data magnitude in the associated frequency range. For example embodiments discussed with reference to the sound data is filtered or organized into different frequency ranges. Each of these frequency ranges can have a different haptic sensation associated with it. For example using an available inertial tactile feedback mouse a periodic haptic effect of different frequency is associated with each of the frequency ranges. Thus for example a periodic haptic effect having a haptic frequency of 62 Hz e.g. at or near a first resonance frequency of the haptic device to cause high magnitude sensations is associated with the first sound frequency range e.g. 0 Hz to 150 Hz . The other periodic haptic effects can have haptic frequencies of 75 Hz 90 Hz 115 Hz and 250 Hz each corresponding to another sound frequency range in ascending order other periodic frequencies can be used in other embodiments . The magnitudes of each of these periodic haptic effects can be set to a value proportional to the magnitude of the sound data in the associated frequency range. A running average of magnitude of ambient sound levels can be used as a minimum threshold for haptic effect generation e.g. if the sound signal for a particular frequency range has a higher magnitude than the threshold then a haptic effect associated with that frequency range can be commanded to be output or can be commanded to have a magnitude above a zero level.

The method presented above thus varies the magnitudes of five different haptic effects based on the corresponding varying magnitudes in different frequency ranges of the sound signal represented by the sound data. With some sounds that have components in all the frequency ranges this may cause five different haptic effects to be output at once. However since many sound features that are spread across several frequency ranges last for a short amount of time the user perceives only a short vibration or series of pulses rather than a mush of different frequencies. Other more sustained sound effects may be concentrated in only one or two frequency ranges which will cause only one or two haptic effects to be output simultaneously the haptic effects for the other frequency ranges will be set to zero magnitude . The user will thus feel a haptic sensations that roughly corresponds to the sound effect s frequency. This is also discussed with respect to .

Thus the amplitude of a haptic sensation that is associated with a particular frequency range or band can correspond directly with the magnitude level of a sound signal in that frequency band as explained above. In addition to this continuous haptic output sudden spikes of amplitude in the sound signal can be mapped to additional jolts pulses or other short strong haptic sensations which can be overlaid on the continuous vibration sensations.

In other embodiments more sophisticated haptic sensations can be output based on the sound data processing and analysis of step and based on intelligent heuristics. In many applications such as games the type of sound may be able to be determined based which frequency ranges it is primarily located. This allows a more sophisticated mapping scheme where completely different haptic sensations can be mapped to different sound frequency ranges. This is also discussed with respect to .

For example it is often the case that weapon fire in a video game application is associated with a sudden burst of high frequency sound. Using this fact as an intelligent heuristic in step the sound output data from the game can be analyzed and a feature that indicates that a high frequency sound has been output identified. For example a particular frequency range can be checked for a sudden burst or spike in amplitude of sound. In step a haptic sensation associated with weapon fire can be intelligently commanded to be output based on the sound burst found in the sound. In some embodiments the haptic sensation can be modified on the fly while the sound and the haptic sensations are playing where the magnitude and duration of the haptic sensation is continually adjusted based on the magnitude of the sound burst above a predetermined threshold the duration of the burst and or the specific frequency content of the burst.

In some embodiments a completely different haptic profile can be selected for a sound feature based on the specifics of the sound feature where a pre programmed mapping between sound characteristics and haptic effects is consulted e.g. a look up table or data table can be stored in memory . For example a sound burst in a very different frequency range might trigger a completely different haptic sensation. A low frequency sound burst in a video game might be for example the sound of a footstep of a character. An appropriate haptic sensation can be mapped to that sound feature such as a low frequency vibration or undulating force.

Some games or other programs may output similar sound effects for similar events to allow approximate mapping as discussed above. Other games and programs however may have different events associated with similar sounding sounds. Therefore in one embodiment a particular look up table or other mapping data can be associated with each individual game or other application program . Using the table the method of the present invention can identify on the table which game is playing and then find the appropriate mapping between sound characteristics of that game and haptic sensations that have been assigned by the table s author. This allows for tuning of the heuristics tailored for specific games enabling more accurate mappings. This can be advantageous to developers who will not have to put haptic effects or mappings in their games themselves but can rely on the manufacturers of the haptic devices to put out driver updates including haptic mappings for games currently available based on the sound output.

In alternate embodiments the haptic effects that are associated with the found sound features are not immediately output as haptic sensations to the user but are instead stored in memory to form a haptic profile of a given sound. This can be used to assist in the design of haptic effects. For example a sound file can be loaded and the user can select a control in a graphical user interface to cause the method of the present invention to generate a compound haptic effect that corresponds to the sound. The generated haptic effect or haptic magnitudes force values etc. can be then used in a program by commanding the generated compound haptic effect. Alternatively the haptic profile generated effect can become a new haptic effect primitive to allow developers to create new effects based on this primitive e.g. periodic effects textures temporal profiles etc. can be created.

For example a game may have hundreds of sound effects. The method of the present invention can be instructed to load the game s sound files and create haptic effects from the sound data in a standardized format such as .ifr files used in protocols created by Immersion Corp. of San Jose Calif. in a few seconds. Thus a developer need not create each haptic effect manually saving great amount of development time. A designer could also examine the generated haptic effects and edit them if desired. This is advantageous to developers who wish to add code to their games to command haptic effects to haptic devices in the traditional way but who do not wish to spend large amounts of time designing the appropriate haptic effects.

After the output of the haptic sensation the method returns to step to check if further sound data is received. If so a next portion of sound data is processed as discussed above. If no further sound data is received the process is complete at to be started again the next time sound data is output .

In step a running average of the sound magnitude from each of the filter outputs is maintained. This allows ambient sounds output from the computer to be averaged out so that only sounds louder than the ambient level will trigger haptic sensations. In next step the magnitudes of the filter outputs are scaled to a range that is required for the haptic device that the user is using. Thus the actual filter outputs are not used to generate haptic sensations as in the prior art but new haptic commands and effects are created based on the filter outputs.

In some embodiments the square of each filter s output magnitude can be scaled. This may be more effective in some embodiments to pick out only the larger peaks or spikes in each frequency range of sound data and reduce a sustained rumble vibration of the device that may occur from too many peaks being detected.

In next step periodic haptic effects are assigned to each of the filter s outputs. The periodic effects can each be assigned a magnitude equal to the scaled magnitude found for each filter. If a filter has no output i.e. no sound of that frequency range is present in the sound data or if a filter s output is not above a predetermined threshold amplitude then the haptic effect assigned to that frequency range would be assigned a magnitude of zero. The periodic sensations can each have one of five haptic frequencies found to be effective in conveying the corresponding sound frequency. Such periodic haptic sensations such as vibrations are quite appropriate for tactile devices such as gamepads or mice providing inertial tactile sensations. The vibrations can also be output by kinesthetic feedback devices. Other types haptic sensations can also be output by kinesthetic device embodiments having magnitudes based on the scaled magnitudes determined above. The type of haptic sensations assigned can be different in different embodiments such as pops jolts springs damping etc. can also be output having magnitudes based on the scaled magnitudes for example a pre programmed mapping can be consulted to assign a mapped haptic effect.

The method is then complete at . The assigned periodic haptic sensations can be used in the next step of where haptic sensations are output top the user by commanding the haptic effects to the haptic feedback device.

In next step the method checks whether any of the frequency ranges grouped in step have predetermined characteristics. These characteristics are features in the sound data that are significant enough to trigger the output of haptic sensations. In one embodiment an average amplitude is maintained for each frequency range and a spike in the amplitude is looked for. If a spike in amplitude of 3 4 times the average amplitude is found then that is deemed significant and a haptic effect should be assigned to or triggered by that feature.

If predetermined characteristics are found then the process continues to step to assign haptic effects to those frequency ranges having the predetermined characteristics and the process is complete at and the method returns to step of . If in step no frequency ranges are found to have the desired characteristics then the process is complete at and the method returns to step of .

The haptic effects that are assigned to the frequency ranges having the desired characteristics can be any of several different types and or have different parameters and need not have a magnitude proportional to the amplitude of the corresponding sound data. For example a jolt pulse or detent can be mapped to any extracted sound features such as rise in amplitude . The magnitude of the jolt or detent can be based on the frequency range in which the amplitude spike was found e.g. lower frequency ranges can be assigned higher magnitude haptic sensations or vice versa . Periodic sensations directional sensations for haptic devices able to output forces in particular directions in degrees of freedom of the device spring sensations damping sensations etc. can be mapped to the different frequency ranges. In one embodiment a haptic sensation can be increased in magnitude corresponding to the increased sound data amplitude then the haptic amplitude can be ramped down automatically back to a zero level. Again a pre programmed mapping between sound features and haptic sensations can be consulted.

The FFT outputs of the embodiment of tend to be more efficient and provide more information than the filter outputs of the embodiment of . For example FFT s can provide more detailed frequency information about where a spike in amplitude occurs the phase offset of waves or features in the sound signal etc. It should also be noted that the assigning or triggering of different types of haptic sensations described above for can also be performed in the embodiment of and the magnitudes of haptic sensations proportional to sound amplitudes of can be performed in the embodiment of .

In some applications the ambient background sounds such as background music in game applications can be ignored so that only sound effects in the game trigger haptic sensations to be output. Often the sound effect magnitudes are much higher than the background music amplitudes allowing the sound effects to be found as spikes above an average amplitude. In other circumstances background music can ignored and sound effects processed by the type of audio data. For example if the background music is in a MIDI format and the sound effects are .wav files then MIDI data can be ignored and way data processed by the present invention to provide haptic sensations.

Some embodiments can also allow the user to enter preferences which can adjust how the sound data is analyzed how the haptic effects are assigned and how the haptic sensations are output. For example haptic effect strength the minimum threshold level of amplitude to recognize a sound feature e.g. so that background music can be better ignored in a game etc.

The present invention can also be used in other types of application programs besides games. For example a user s experience of streaming audio can be enhanced by adding haptic sensations to the audio output so that if the user is contacting the haptic device while listening to the audio output features in the audio such as music beats sustained notes features of speech etc. can be haptically experienced by the user. Likewise the present invention can be used with a sound track that is output with streaming video e.g. over a network such as the Internet.

While this invention has been described in terms of several preferred embodiments it is contemplated that alterations permutations and equivalents thereof will become apparent to those skilled in the art upon a reading of the specification and study of the drawings. For example many different embodiments of haptic feedback devices can be used to output the haptic sensations described herein including joysticks steering wheels gamepads and remote controls. Furthermore certain terminology has been used for the purposes of descriptive clarity and not to limit the present invention.

