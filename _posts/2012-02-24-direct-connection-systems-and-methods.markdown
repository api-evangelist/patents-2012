---

title: Direct connection systems and methods
abstract: Embodiment of the invention are directed to passing a plurality of communications directly from a merchant to a payment processing network. A first communication may include payment information in an authorization request, while a second transaction may include non-payment transaction data. The communications may be linked with a transaction identifier. In other embodiments, a capture file process is disclosed where capture files are generated by the payment processing network, and transactions are subsequently cleared and settled.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08924297&OS=08924297&RS=08924297
owner: Visa International Service Association
number: 08924297
owner_city: San Francisco
owner_country: US
publication_date: 20120224
---
This application is a non provisional application of and claims the benefit of priority of U.S. Provisional Application No. 61 446 856 filed on Feb. 25 2011 and U.S. Provisional Application No. 61 521 274 filed on Aug. 8 2011 which are herein incorporated by references in their entirety for all purposes.

As methods and devices for engaging in transactions have increased the problems and challenges that arise for merchants who are required to adapt their systems in order to process transactions with a multitude of acquirer entities have also increased.

There are many acquirers that work with payment processing networks to facilitate transactions. Some of these acquirers have specific guidelines and standards for the format of the authorization logs and captures files that they receive from various entities in the payment networks. For example if a merchant wants to be able to accept payment from consumers using a multitude of payment methods each from a different acquirer using a different payment processing network the merchant must adapt their systems establish a connection between its own systems and the systems of each acquirer and format its messages to the specifications of each acquirer.

Merchants who are limited in their resources may find it financially and technically difficult to purchase new systems or technologically difficult to adapt their current systems to meet the requirements of each and every acquirer.

Further there is a need to simplify existing payment processing systems while at the same time provide for enhanced functionality.

Embodiments of the invention address the above problems and other problems individually and collectively.

Embodiments of the present invention are directed to systems and methods for processing a transaction through a payment processing network configured to process and transmit transaction data to a multitude of payment networks and debit gateways on the merchant s behalf and without the merchant directly interacting with a plurality of acquirer computers.

One embodiment of the invention is directed to a method comprising receiving a first communication comprising an authorization request message and a second communication comprising non payment transaction data at a server computer. The authorization request message and the non payment transaction data can be associated with the same transaction identifier. The method may also comprise processing the authorization request message by the server computer and processing the non payment transaction data by the server computer.

Another embodiment of the invention is directed to a method comprising receiving from an access device associated with a merchant non payment transaction data and data relating to an authorization request message. The authorization request message is received through a first communication and the non payment transaction data is received through a second communication. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The method may further comprise formatting the authorization request message and the non payment transaction data by the server computer and transmitting by the server computer the formatted authorization request message to an issuer computer.

Another embodiment of the invention of the invention is directed to a server computer comprising a processor and a non transitory computer readable storage medium. The computer readable medium comprises code executable by the processor for implementing a method. The method comprises receiving a first communication comprising an authorization request message and a second communication comprising non payment transaction data. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The method may also comprise processing the authorization request message and processing the non payment transaction data.

Another embodiment of the invention is directed to a server computer comprising a processor and a non transitory computer readable storage medium comprising code executable by the processor for implementing a method. The method comprises receiving from an access device associated with a merchant non payment transaction data and data relating to an authorization request message. The authorization request message is received through a first communication and the non payment transaction data is received through a second communication. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The method may also comprise formatting the authorization request message and the non payment transaction data and transmitting the formatted authorization request message to an issuer computer.

Another embodiment of the invention is directed to a method. The method comprises generating by a computer a plurality of acquirer capture files for a plurality of different acquirers using different data formats. The method also comprises transmitting the capture files to the plurality of different acquirers.

Another embodiment of the invention is directed to a computer comprising a processor and a computer readable medium coupled to the processor wherein the computer readable medium comprises code executable by the processor for implementing a method. The method also comprises generating by a computer a plurality of acquirer capture files for a plurality of different acquirers using different data formats and transmitting the capture files to the plurality of different acquirers.

Another embodiment of the invention is directed to a method. The method comprises receiving a communication comprising non payment transaction data at a server computer wherein non payment transaction data is sent through a communication channel that is present between a merchant computer and the server computer and wherein the communication channel does not pass through an acquirer. The method also includes processing the non payment transaction data by the server computer.

Another embodiment of the invention is directed to a server computer comprising a processor and a computer readable medium coupled to the processor wherein the computer readable medium comprises code executable by the processor for implementing a method. The method comprises receiving a communication comprising non payment transaction data at a server computer wherein non payment transaction data is sent through a communication channel that is present between a merchant computer and the server computer and wherein the communication channel does not pass through an acquirer. The method also includes processing the non payment transaction data by the server computer.

Another embodiment of the invention is directed to a method of operating a payment processing network server computer. The method comprises the payment processing network server computer receiving from a merchant computer directly and without involving an acquirer computer a first communication comprising an authorization request message and a second communication comprising non payment transaction data. The authorization request message and the non payment transaction data can be associated with the same transaction identifier. The method also comprises processing the authorization request message by transmitting the authorization request message to an issuer computer directly and without involving a further payment processing network receiving an authorization response message from the issuer computer matching the authorization response message to the associated authorization request message by matching transaction identifiers for the two messages and transmitting the authorization response message to the merchant from which it received the authorization request message directly and without involving an acquirer computer. The method also comprises processing the non payment transaction data.

Another embodiment of the invention is directed to a method of operating a server computer the method comprising the server computer receiving from an access device associated with a merchant non payment transaction data and data relating to an authorization request message. The authorization request message is received through a first communication and the non payment transaction data is received through a second communication. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The method may further comprise formatting the authorization request message and the non payment transaction data by the server computer and transmitting by the server computer the formatted authorization request message to an issuer computer.

Another embodiment of the invention is directed to a payment processing network server computer. The payment processing network server computer comprises a means for receiving from a merchant computer directly and without involving an acquirer computer a first communication comprising an authorization request message and a second communication comprising non payment transaction data. The authorization request message and the non payment transaction data can be associated with the same transaction identifier. The payment processing network server computer also comprises a means for processing the authorization request message by transmitting the authorization request message to an issuer computer directly and without involving a further payment processing network receiving an authorization response message from the issuer computer matching the authorization response message to the associated authorization request message by matching transaction identifiers for the two messages and transmitting the authorization response message to the merchant from which it received the authorization request message directly and without involving an acquirer computer. The payment processing network server computer also comprises a means for processing the non payment transaction data.

Another embodiment of the invention is directed to a computer comprising a means for generating a plurality of acquirer capture files for a plurality of different acquirers using different data formats and a means for transmitting the capture files to the plurality of different acquirers.

Another embodiment of the invention is directed to a method comprising receiving a communication comprising non payment transaction data at a server computer wherein non payment transaction data is sent through a communication channel that is present between a merchant computer and the server computer wherein the communication channel does not pass through an acquirer. The method further comprises processing the non payment transaction data by the server computer.

Another embodiment of the invention is directed to a server computer comprising means for receiving from an access device associated with a merchant non payment transaction data and data relating to an authorization request message. The authorization request message is received through a first communication and the non payment transaction data is received through a second communication. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The server computer also comprises means for formatting the authorization request message and the non payment transaction data and transmitting the formatted authorization request message to an issuer computer.

Another embodiment of the invention is directed to a server computer comprising means for receiving a communication comprising non payment transaction data at a server computer wherein non payment transaction data is sent through a communication channel that is present between a merchant computer and the server computer wherein the communication channel does not pass through an acquirer. The server computer also comprises a means for processing the non payment transaction data by the server computer.

These and other embodiments of the invention are described in further detail below with reference to the Figures and the Detailed Description.

Prior to discussing embodiments of the invention some descriptions of some terms may be helpful in understanding embodiments of the invention.

The term authorization request message may include a message sent from a merchant requesting that an issuer authorize a financial transaction. An authorization request message may comply with ISO 8583 which is a standard for systems that exchange electronic transactions made by consumers using payment devices. An authorization request message according to other embodiments may comply with other suitable standards. In embodiments of the invention an authorization request message may include among other data a Primary Account Number PAN and expiration date associated with a payment device e.g. credit debit card of the consumer amount of the transaction which may be any type and form of a medium of exchange such a money or points and identification of a merchant e.g. merchant ID . Typically an authorization request message is generated by a server computer if the transaction is an e commerce transaction or a Point of Sale POS device if the transaction is a brick and mortar type transaction and is sent to an issuer via a payment processing network and an acquirer.

The term non payment transaction data may include any suitable type of data that is not typically present in an authorization request message. In some embodiments non payment transaction data may include data that is related to a particular transaction conducted using an authorization request message but does not include data which is provided in the authorization request message itself. For example SKU stock keeping unit data may be associated with a transaction and an authorization request message but it is not present in the authorization request message. In other embodiments non payment transaction data may include data that is not specifically related to a transaction conducted using an authorization request message. For example non payment transaction data may comprise a general coupon that can be sent from the merchant to a central server computer. That general coupon may not be specifically associated with a transaction conducted with an authorization request message. Some examples of non payment transaction data that may be sent in a non payment transaction data message includes but is not limited to chargeback data shopping cart data coupon redemption codes and enrollment information. Also in some embodiments non payment transaction data could include image and video files that cannot be embedded in standard ISO messaging.

The term access device as used can refer to a device that can initiate a payment transaction. In some embodiments an access device can be a device that can interact with a portable consumer device e.g. a payment card during a transaction. In embodiments of the invention the access device can transmit both ISO and XML transaction related messages to a payment processing network. According to embodiments of the invention the access device can be in any suitable form. Examples of access devices include point of sale POS devices cellular phones PDAs personal computers PCs tablet PCs handheld specialized readers set top boxes electronic cash registers automated teller machines ATMs virtual cash registers kiosks security systems access systems and the like. If the access device is a point of sale terminal any suitable point of sale terminal may be used including card or phone readers. The card or phone readers may include any suitable contact or contactless mode of operation. For example exemplary readers can include RF radio frequency antennas magnetic stripe readers etc. to interact with the portable consumer devices.

Embodiments of the present invention are described using Extensible Markup Language XML . XML is a widely used markup language that defines a set of rules for encoding documents in a format that is both human readable and machine readable. Using a markup language such as XML may be advantageously used between the merchant and the payment processing network since XML is a widely used and standardized means of annotating and passing information using current network technologies. However embodiments of the invention are not restricted to use of XML and may also be implemented using any other markup language such as YAML JSON etc. that allows annotating a document in a way syntactically distinguishable from the text. In some implementations of embodiments of the invention other means of organizing and sharing data such as passing information using well defined data structures and employing known network and programming protocols in the art may also be used.

A merchant computer may include any suitable computational apparatus operated by a merchant. Examples of merchant computers may include an access device or an internet merchant computer.

The term payment processing network may include a network of suitable processing entities e.g. computers that can have the ability to route transactions. have information related to an account associated with a portable consumer device such as a debit or credit card.

The payment processing network may have or operate at least a server computer and may include a database. The database may include any hardware software firmware or combination of the preceding for storing and facilitating retrieval of information. Also the database may use any of a variety of data structures arrangements and compilations to store and facilitate retrieval of information. The server computer may be coupled to the database and may include any hardware software other logic or combination of the preceding for servicing the requests from one or more client computers. The server computer may comprise one or more computational apparatuses and may use any of a variety of computing structures arrangements and compilations for servicing the requests from one or more client computers.

The payment processing network may include data processing subsystems networks and operations used to support and deliver authorization services exception file services and clearing and settlement services. An exemplary payment processing network may include VisaNet . Networks that include VisaNet are able to process credit card transactions debit card transactions and other types of commercial transactions. VisaNet in particular includes an integrated payments system Integrated Payments system which processes authorization requests and a Base II system which performs clearing and settlement services. Payment processing network may use any suitable wired or wireless network including the Internet.

The term server computer may include a powerful computer or cluster of computers. For example the server computer can be a large mainframe a minicomputer cluster or a group of servers functioning as a unit. In one example the server computer may be a database server coupled to a Web server.

The term formatting may refer to the conversion of data files and data messages e.g. authorization request messages non payment transaction data messages capture files etc. from one file format to a suitable format for transmission to payment processing networks or acquirer computers. It may also refer to the creation of a data file or the like according to a specific format. In some embodiments of the invention a suitable file format is an XML format.

The term transaction identifier may include a specific identifier associated with a financial transaction used to uniquely identify the financial transaction during processing of the financial transaction. The transaction identifier can be used to correlate or associate the non payment transaction data message from a financial transaction with the authorization request message for the same financial transaction as the two messages may be sent at different times. Suitable transaction identifiers may comprise numbers letters and combinations thereof. They may also be of any suitable length.

The term common data format may include a suitable file format for the capture files that are transmitted from a merchant access device or computer to a payment processing network. In embodiments of the invention the common data format is an XML format.

The term initial capture files may include a file that is generated and sent by the merchant access device or other computer apparatus to the payment processing network. The initial capture files may contain data at least for clearing and settlement processing. In embodiments of the invention the initial capture files are transmitted in a common data format e.g. XML format .

The term acquirer capture files may include files generated by a payment processing network or other computer apparatus from initial capture files received from a merchant access device or computer. The payment processing network generates acquirer capture files for a plurality of different acquirers based on preferences or rules for format and reception of capture files established by each acquirer. In embodiments of the invention the acquirer capture files may be in the same format or may be in different formats.

The term database of acquirer information can include a database containing acquirer preferences and rules for formatting for and receiving capture files from the payment processing network.

The term clearing and settlement process may include a process of reconciling a transaction. A clearing process is a process of exchanging financial details between an acquirer and an issuer to facilitate posting to a party s account and reconciliation of the party s settlement position. Settlement involves the delivery of securities from one party to another. Clearing and settlement can occur simultaneously. In embodiments of the invention as part of the clearing and settlement process a payment processing network receives a plurality of initial capture files from a merchant computer or merchant access device and generates a plurality of acquirer capture files for a plurality of acquirer computers.

Embodiments of the invention can be directed to a method comprising receiving a first communication comprising an authorization request message and a second communication comprising non payment transaction data from a merchant at a server computer in a payment processing network. The first and second communications can pass from the merchant to the payment processing network without passing through an acquirer computer. The authorization request message and the non payment transaction data are associated with the same transaction identifier. The method also comprises processing the authorization request message by the server computer. The method also comprises processing the non payment transaction data by the server computer.

Since the first communication comprising the authorization request and the second communication comprising the non payment transaction data pass directly from a merchant computer or merchant access device to a payment processing computer it eliminates the need for the merchant computer to directly connect to each individual acquirer computer of a plurality of acquirer computers. This can increase processing speed can allow merchants to manage fewer connections and can also allow for the ability to provide additional types of data to the payment processing network. The payment processing network or a server computer residing therein can perform processing that was not previously possible.

Illustratively when a consumer engages in a transaction with a merchant a merchant access device or computer transmits an authorization request message through a direct connection to a payment processing network. This authorization request message may include payment information such as an account number a transaction amount a service code an expiration date etc. The purpose of the authorization request message may be to simply obtain authorization for the transaction from an issuer of an account of the consumer. At the same time or at some other time the merchant access device or merchant computer may also transmit a non payment transaction data message comprising additional non payment transaction data such as SKU stock keeping unit data to the payment processing network. Both of the authorization request message and the non payment transaction data message may include the same transaction identifier indicating that they are related e.g. an alphanumeric data string such as A1382LM .

The server computer in the payment processing network receives the authorization request message and performs additional processing. For example the server computer can parse the authorization request message to determine whether to route the message to an issuer or to another payment network or debit gateway. The appropriate issuer payment network or debit gateway receives the authorization request message and transmits an authorization response message back to the payment processing network. This authorization response message is then sent back to the merchant access device or merchant computer so that the merchant knows whether or not the transaction is approved.

The server computer in the payment processing network can receive the non payment transaction data message. This message could contain for example the SKU numbers of the products that the consumer purchased in the transaction. For example the consumer may have purchased toothpaste and a facial cream and the SKU numbers for those items may be sent to the payment processing network in the non payment transaction data message. The server computer could then analyze the information in the non payment transaction data message and may provide a discount to the transaction in real time by comparing the SKU numbers for the purchased products against a list of discounts that may have been pre stored at the payment processing network for that consumer. In some cases the above described authorization request message linked to the received SKU numbers by using the transaction identifier. The authorization request message could be modified to reduce the purchase price by the discounted amount before it is forward to the issuer computer for approval. For instance the purchased toothpaste may cost 4 and the consumer s existing discount from a pre existing loyalty program run by the payment processing network may be 1. Instead of sending an authorization request message to the issuer for 4 the authorization request message for 3 could be sent to the issuer for approval. Such discounting by the payment processing network is not possible in the case of messages between the merchant computer and the payment processing network server passing through an acquirer computer because if the acquirer does not have knowledge of the discount it cannot apply the discount to the value amount in the authorization request message passed to the payment processing network and also because acquirer computers are not configured to handle authorization response messages that indicate a different amount to the corresponding authorization request. An effect of this is that discount offers can be provided and discounts effected by the payment network without requiring the handling of coupons etc. by cardholders or merchants. Further the traditional communication path between the payment processing network and the merchant is not designed to carry large amounts of data between the merchant the payment processing network and the issuer.

Note that the additional data provided by the merchant access device and or the merchant computer is not limited to the type of information that is provided in this specific example and that other variations and embodiments are described in further detail below.

Note also that the first communication and the second communication can be sent to a server computer at different points in time e.g. one day apart and at the same time e.g. simultaneously . They can be sent over the same communication channel or different communication channels. They may be part of the same message or they may be different messages. For example in one embodiment the first communication and the second communication may be two portions of the same XML file or they may be different XML files. In the former case the payment processing network may receive the first and second communications in one file but then may separate out the first and second communications so that they can be processed differently. For example only the first communication may be converted to an ISO message that is sent to an issuer in some embodiments while the second communication stays in an XML format for further processing by the payment processing network.

Example embodiments are typically implemented in the context of a payment transaction. Therefore prior to further discussing the use of a payment processing network to handle transaction processing with an acquirer a brief description of standard transaction processing prior to the invention will be presented.

An exemplary system for standard transaction processing can be seen in . The system includes a merchant computer and an acquirer computer communicatively coupled to the merchant computer . In a typical transaction a consumer may purchase goods or services at a merchant associated with the merchant computer using a portable consumer device . The acquirer computer can communicate with an issuer computer via a payment processing network .

The consumer may be an individual or an organization such as a business that is capable of purchasing goods or services.

The portable consumer device may be in any suitable form. For example suitable portable consumer devices can be hand held and compact so that they can fit into a consumer s wallet and or pocket e.g. pocket sized . The portable consumer device can include a processor and memory input devices and output devices operatively coupled to the processor. Specific examples of portable consumer devices include cellular or wireless phones personal digital assistants PDAs pagers portable computers smart cards and the like. The portable consumer devices can also be debit devices e.g. a debit card credit devices e.g. a credit card or stored value devices e.g. a pre paid or stored value card .

In a typical transaction the consumer purchases a good or service at the merchant associated with the merchant computer using the portable consumer device such as a credit card or mobile phone. For example the consumer may swipe the credit card through a POS terminal or in another embodiment may take a wireless phone and may pass it near a contactless reader in a POS terminal.

An authorization request message may then be forwarded by the merchant computer to the acquirer computer . After receiving the authorization request message the authorization request message may then be sent to the payment processing network . The payment processing network may then forward the authorization request message to the issuer computer associated with the portable consumer device .

After the issuer computer receives the authorization request message the issuer computer may send an authorization response message back to the payment processing network to indicate whether or not the current transaction is authorized. The payment processing network may then forward the authorization response message back to the acquirer computer . The acquirer computer may then send the response message back to the merchant computer .

After the merchant computer receives the authorization response message the merchant computer may then provide the authorization response message for the consumer . The authorization response message may be displayed by the POS terminal or may be printed out on a receipt.

At the end of the day a normal clearing and settlement process can be conducted by the payment processing network . In some embodiments clearing and settlement can occur simultaneously.

In standard transaction processing each of the merchant systems and have a connection to an acquirer computer A C . The acquirer computers A C receive authorization request messages from the merchant systems such as the merchant point of sale the merchant host and the gateway merchant and transmits them to the appropriate payment networks or debit gateways . In embodiments of the invention the merchant host transmits an authorization request message to the acquirer computer B . In some embodiments of the invention the merchant host transmits the authorization request message through a merchant data center that then transmits the authorization request message to the acquirer computer B . In embodiments the gateway merchant transmits an authorization request message through a payment gateway to the acquirer computer C . Exemplary payment networks may include MasterCard JCP American Express Diners Club International and Discover. Exemplary debit gateways include Pulse Star Shazam NYCE Maestro Alaska Option NETS AFFN Quest Credit Union 24 and Accel Exchange.

An exemplary system for processing transactions according to embodiments of the invention is shown in . For simplicity of illustration a certain number of components are shown is shown in . It is understood however that embodiments of the invention may include more than one of each component. In addition some embodiments of the invention may include fewer than all of the components shown in . Also the components in may communicate via any suitable communication medium including the internet using any suitable communication protocol.

The system includes a merchant computer and an acquirer computer communicatively coupled to the merchant computer . In a typical transaction a consumer may purchase goods or services at a merchant access device or internet merchant computer associated with the merchant computer . The acquirer computer can communicate with an issuer computer via a payment processing network . Elements and in box can correspond to a traditional payment infrastructure.

The merchant computer may process transactions through one of three flows a high capacity merchant flow a medium capacity merchant flow or an internet merchant flow . Some embodiments may include all three flows some of the flows or additional flows not described herein.

As depicted in the payment processing network may comprise a server computer H comprising an application programming interface A a capture file processing module C an authorization module D a clearing and settlement module E a file transformation module F and a data conversion module J . The various modules may be embodied by computer code residing on computer readable media.

The server computer H may be operatively coupled to one or more databases. The one or more databases may comprise an authorization log database B a master log database G and a capture file database I .

The authorization module D processes authorization request messages and determines the appropriate destination for the authorization request messages. The authorization log database B contains records of authorization. The data contained in the authorization log database B can be transmitted to participating acquirers by subscription. The data contained in the authorization log database B can be in a plurality of file formats e.g. TC33 POS Data Raw Data and POSA files .

The clearing and settlement module E handles the clearing and settlement of transaction made on payment processing network cards. An example of the clearing and settlement module is Base II which provides clearing settlement and other interchange related services to VISA members.

The data conversion module J can convert authorization request messages from one format to another format. In embodiments of the invention the authorization request messages are transmitted by the merchants in XML and the data conversion module J converts the message into an ISO format e.g. ISO 8583 prior to sending them to issuers.

The various other modules and databases shown in are described in further detail later in this application.

The capture file generation module G can allow the access device to generate capture file data messages for transaction that were conducted with the access device . In embodiments of the invention the capture file generation module G generates capture files in a common data format. In some embodiments the common data format is an XML format.

The messaging module H can generate authorization request messages where the authorization request message includes a request to charge a consumer a predetermined amount of money to pay for a transaction and non payment transaction data messages that are transmitted to the payment processing network for authorization processing.

The computer readable medium B can store code or instructions for allowing the capture file generation module G and messaging module H to operate as described herein. The instructions can be executed by the processor A . The computer readable medium B can comprise code or instructions for generating an authorization request message by the messaging module H generating a non payment transaction data message sending the authorization request message and non payment transaction data message to a payment processing network for authorization processing and receiving an authorization response message wherein the authorization response message indicates whether or not the charge is authorized or not authorized and if the authorization response message indicates that the charge is authorized completing the transaction with the consumer. The computer readable medium B can further comprise code or instructions for generating capture file messages by the capture file generation module G for transactions that are processed through the access device .

The network interface E can allow the access device to send and receive messages from the merchant computer and the payment processing network .

Returning now to there can be a number of different flows including a high capacity merchant flow a medium capacity merchant flow and an Internet merchant flow . The high capacity merchant flow can transmit large amounts of data while the medium capacity merchant flow can transmit medium to low amounts of data. They are typically associated with physical point of sale transactions. The internet merchant flow is directed to Internet transaction flows. Each of these flows and the components used in these flows are described in further detail below.

The high capacity merchant flow includes an access device a merchant s host system and a second communication path . The second communication path may include one or more second communication channels. The second communication path can be composed of at least two separate communications including a first communication A which can be an authorization request message for a transaction and a second non payment transaction communication B which can contain additional data associated with the transaction. In some embodiments the first communication and the second communication occur over the same communication path or channel. In other words the authorization request message and the non payment transaction data message can be routed on a single channel. In yet other embodiments the first communication and the second communication occur over different communication channels.

In some embodiments the high capacity merchant flow can utilize a high capacity direct exchange network A . An exemplary high capacity direct exchange network A is a merchant direct exchange MDEX platform service. An MDEX is geared toward high volume merchants and utilizes ISO 8583 messaging. In some embodiments the high capacity direct exchange network A transmits data in XML format. In other embodiments the high capacity direct exchange network A is capable of authorization processing and file transfer capabilities.

Using an Internet based protocol IP connection from the merchant computer to the payment processing network e.g. VisaNet MDEX accepts and routes authorizations for all card and transaction types. This results in merchants only needing to support one message format e.g. Visa ISO 8583 . The payment processing network would provide any necessary translations or conversions of data to different formats for downstream recipients of the data.

The medium capacity merchant flow includes an access device a payment gateway and a first communication path . The medium capacity merchant flow utilizes a medium capacity direct exchange network A that connects the access device through an Internet and VPN to the payment processing network . A virtual private network VPN is a network configured within a public network e.g. the Internet to provide remote users an access to a central organizational network.

The first communication path can carry two separate communications including a first authorization request communication A and a first non payment transaction data communication B . In some embodiments the first communication and the second communication occur over the same communication channel. In other words the authorization request message and the non payment transaction data message can be routed on a single channel. In yet other embodiments the first communication and the second communication occur over different communication channels.

In some embodiments the payment gateway can be a value added reseller VAR gateway. A VAR is an entity that adds features or services to an existing product and may resell it as an integrated product. Typically a VAR is used to integrate systems and or software. This allows the payment processing network to more easily provide merchant information and value added services to a merchant computer . In some embodiments the payment gateway is not present and the access device connects directly to the payment processing network through the Internet and VPN .

The internet merchant flow includes an internet merchant computer and the first communication path . The internet merchant flow utilizes an electronic commerce exchange network A that connects through the Internet using the first communication path to transmit messages to the payment processing network . As described above the first communication path can comprise two separate communications including a first authorization request communication A and a first non payment transaction data communication B which can be used to carry additional data associated with a transaction.

In some embodiments of the invention the high capacity direct exchange network A can be merged with the medium capacity direct exchange network A . Linking the two exchange networks would enable a merchant computer to transmit some transactions over one network and others over the other network dependent on transaction volume and traffic. In embodiments such as these the high capacity direct exchange network A and the medium capacity direct exchange network A are linked through a VAR.

In embodiments of the invention the first communication and the second communication pass over a direct exchange network to the server computer H at approximately the same time. In these embodiments for example the authorization request message and the non payment transaction data message are transmitted to the payment processing network at the same time. Both messages contain the same transaction identifier allowing them to be identified and associated with each other. That is since the authorization request message and the non payment transaction data message can be received at the payment processing network at different times it can link the two messages by use of the transaction identifier so that appropriate processing can take place.

In other embodiments of the invention the first communication and the second communication pass over a direct exchange network to the server computer H at different times. In these embodiments for example the authorization request message and the non payment transaction data message are transmitted to the payment processing network at different times. Both messages contain the same transaction identifier allowing them to be identified and associated with each other.

In some cases a protocol translation may need to occur between different platforms. The payment gateway can perform this function for any of the network access platforms. For example if the internet merchant flow is used the transaction information can be sent from an internet merchant computer or an access device through the payment gateway for translation and then to the appropriate platform via the Internet. Once this information is properly translated and forwarded to the appropriate platform associated with the payment processing network the payment processing network can perform the functions of the acquirer computer and issuer computer .

The data transmitted along the first communication path and the second communication path is communicated between a merchant access device and or an internet merchant computer and a payment processing network . The data transmitted along the first communication path and the second communication path can be in any data format. In embodiments of the present invention the data format is an XML format.

In a transaction utilizing embodiments of the invention the consumer purchases a good or service at a merchant access device . If the high capacity direct exchange network A is used the merchant access device can send an authorization request message and a non payment transaction data message directly to the payment processing network . For example the messages will be sent by the merchant s host system along the second communication path .

If the medium capacity direct exchange network A or the electronic commerce exchange network A is used the merchant access device sends an authorization request message and a non payment transaction data message over the Internet or along the first communication path . The messages may be sent through the payment gateway before being received by the payment processing network .

The authorization request messages and non payment transaction data messages sent using any of the previously described flows or are received at a payment processing network . The payment processing network communicates with an issuer computer associated with the portable consumer device used in the particular transaction. As noted above although only one issuer computer is shown in other embodiments there may be a plurality of issuer computers.

The issuer computer receives the authorization request message and transmits an authorization response message approving or declining the transaction. The authorization response message is received by the payment processing network which matches the authorization response message to the associated authorization request message and forwards the authorization response message back to the merchant access device or or to the internet merchant computer .

At the end of the day a clearing and settlement process can be conducted by the payment processing network . In some embodiments clearing and settlement can occur simultaneously.

Comparing the diagrams in and it is clear that the system shown in is much less complex for a merchant to use and maintain.

The high capacity direct exchange network A can support both authorization request message processing and file transfer capabilities and can route both the payment processing network brand and non payment processing network brand transactions. The high capacity direct exchange network A provides a direct link between a merchant and the payment processing network using second communication channel for authorization processing and file delivery.

The open file delivery module can manage clearing and settling file exchanges and data that is received in batch files that are used for a capture file and other value added services. The open file delivery module can transform or reformat a file from one file format to another as well aggregate disaggregate and merge file data from a single endpoint or multiple endpoints. Transforming or reformatting is managed by the open file delivery module without the need for changes to the file at either the source of the destination endpoint saving endpoints from having to develop reformatting capabilities in their own systems. In some embodiments the format can be an XML format. The point to point file services provided by the open file delivery module allows merchants to securely transfer proprietary payment related data to a plurality of high capacity direct exchange network A endpoints eliminating the need for multiple connections. Also for example a merchant can send its end of day clearing files to its acquirer or can sends rewards data to its clearinghouses through the high capacity direct exchange network A .

The message gateway module can facilitate the authorization processing. The message gateway module supports all payment processing network message types. For example message gateway module can support authorization only dual message where the message contains just enough information necessary to authorize transactions and the clearing can be accomplished through either a completion or a clearing and settlement message. Another example includes full service messaging full financial single message which contains all information necessary to authorize and clear simultaneously. The data fields used can vary depending on the message type. The message gateway module can manage the real time authorization flow between the merchant computer and the payment processing network . The message gateway module can also operate as a switch for all payment transactions controlling traffic between all payment processing network participants. The message gateway module can perform message translation for non payment processing network brands. Additionally the message gateway module provides flexible content message format. For example the content message format can be based on e.g. Visa ISO 8583 the bit map can serve as a table of contents the format can contain only fields that are relevant to the specific transaction and the format can contain both packed and character data.

In embodiments data is transmitted by one or more host computer A and B through firewalls A and C to open file delivery OFD and message gateway MG modules A and B which provide value added services that are transmitted through additional firewalls B and D to Carrier A MPLS A and Carrier B MPLS B . Carrier A MPLS A and Carrier B MPLS B direct the data to integrated switch routers A and B in an endpoint data center A . The data passes through endpoint firewalls A and B through a local area network LAN A and out to endpoint host computers A and B . In embodiments the endpoint firewalls are optional.

As discussed above the architecture of the present technology allows a merchant computer to directly connect to a payment processing network allowing the payment processing network to provide more value added services to a merchant. The value added services can include any services that a payment processing network can perform for the benefit of the merchant including but not limited to 

Referring again to in some embodiments the payment processing network can receive the first and second communications including payment and non payment transaction information directly through one of the exchange networks A A and A and can then determine whether there are any rewards or rebates that can be applied to the transaction. If there are rewards or rebates the payment processing network can send that information to the merchant computer via one of the exchange networks A A and A and process those rewards or rebates on behalf of the merchant. The non payment transaction information that may be in a communication to the payment processing network may comprise for example a rebate identifier e.g. a rebate number or form or rewards account number of balance.

In some embodiments the payment processing network can receive product SKU data from the merchant computer through one of the exchange networks A A and A during a transaction and the payment processing network can then find a coupon associated with the SKU and apply it to the transaction e.g. in the form of a statement credit on a card account . The payment processing network can subsequently request the payment for the discount from the product manufacturer on behalf of the merchant so that the merchant can more efficiently receive the payment.

In some embodiments processing the non payment transaction data comprises generating and transmitting a coupon to a communication device operated by a consumer. For example if the non payment transaction data indicates that the consumer purchased an item from a particular merchant the payment processing network can identify a coupon associated with that merchant and send it to a consumer s communication device e.g. smart phone PDA etc. .

In some embodiments the payment processing network can receive the transaction information directed through one of the exchange networks A A and A and can then directly provide the merchant computer with any alerts that may be triggered by the transaction information. In some embodiments the non payment transaction information may comprise information regarding an alert status e.g. is the consumer registered to receive alerts or alert preferences e.g. how the alert is to be sent to the consumer . In such embodiments the alert preferences or alert data may be stored by the merchant or in the consumer s portable consumer device.

In some embodiments for internet merchant computers the payment processing network can receive the non payment transaction information through one of the exchange networks A A and A . If a product needs to be shipped the payment processing network can forward the transaction information to a shipper via one of the exchange networks A A and A who can subsequently ship the product purchased online thereby eliminating the need for the merchant to send the shipping information to the shipper.

In some embodiments the payment processing network can push data security upgrades for POS terminals directly to the merchant through one of the exchange networks A A and A . For example the payment processing network can receive the transaction information through one of the exchange networks A A and A and can determine whether there is any risk associated with the transaction. If there is any risk the payment processing network can inform the merchant computer via one of the exchange networks A A and A .

In some embodiments the payment processing network can receive and store transaction information for the transactions during a period of time e.g. one month via one of the exchange networks A A and A . Using this information and information about the account holders the payment processing network can integrate this information into reports regarding any relevant statistics e.g. which product are sold more often which consumers purchase certain items etc. .

In some embodiments the payment processing network can receive the transaction information for the transactions that occurred for that day via one of the exchange networks A A and A . The payment processing network can then compile that information and send it to the acquirer computer on behalf of the merchant computer for clearing and settling.

In some embodiments the payment processing network can receive transaction information associated with a payment account via one of the exchange networks A A and A . The payment processing network can then authenticate the consumer directly via one of the exchange networks A A and A without having to go through the acquirer. Once the consumer is authenticated the payment processing network can alert the merchant computer of the authentication via one of the exchange networks A A and A .

Methods according to embodiments of the invention can be described with respect to . is a flowchart of a method for processing authorization request messages and authorization response messages through the system .

In step the consumer engages in a transaction with a merchant. In a typical transaction the consumer purchases a good or service at a merchant access device associated with a merchant using a portable consumer device such as a credit card or mobile phone. The consumer s portable consumer device can interact with the merchant access device such as a POS point of sale terminal communicatively coupled to the merchant computer . For example the consumer may swipe the credit card through a POS terminal or in another embodiment may take a wireless phone and may pass it near a contactless reader in a POS terminal. In other embodiments the consumer may conduct a transaction over the Internet via a personal computer or internet enabled portable consumer device.

In step the merchant access device transmits an authorization request message and a non payment transaction data message to the payment processing network . In embodiments of the invention the authorization request message and non payment transaction data are transmitted to a server computer H in the payment processing network where an acquirer computer is not present between the server computer and the merchant computer. The authorization request message may be transmitted in any suitable format. In embodiments of the invention the authorization request message and the non payment transaction data message are in an XML format or other human and machine readable data format. In some embodiments the authorization request message and the non payment transaction data message are sent by a merchant s host system over a high capacity direct exchange network A or in other embodiments by a payment gateway over a medium capacity direct exchange network A or by an electronic commerce exchange network A . In some embodiments of the invention the authorization request messages do not pass through an acquirer but are transmitted from a merchant through one of the direct exchange networks A A or A directly to the payment processing network . In embodiments of the invention the authorization request message and the non payment transaction data message can be sent either simultaneously or at different points of time from the merchant computer to the payment processing network . Whether they are sent simultaneously or at different times both the authorization request message and the non payment transaction data message include a transaction identifier. The transaction identifier allows for the two messages to be identified as being related to the same transaction.

In step the payment processing network receives a first communication comprising an authorization request message and a second communication comprising non payment transaction data at a server computer. In embodiments of the invention the first communication and the second communication are received at approximately the same time. In other embodiments of the invention the first communication and the second communication are received at different times. The payment processing network receives the authorization request message and the non payment transaction data message over the Internet . In embodiments of the invention the authorization request message and the non payment transaction data message can be received either simultaneously or at different points of time by the payment processing network . In some embodiments the authorization request message and the non payment transaction data message are transmitted to the payment processing network via a second communication path that is part of a high capacity direct exchange network A . As described previously in some embodiments the second authorization communication A and the first non payment transaction data communication B can pass through the first communication path .

In step a server computer H in the payment processing network receives and processes the authorization request message. Processing the authorization request message can include determining whether the authorization request message is to be formatted into a different file format prior to transmission out to an issuer computer or gateway computer . A data conversion module J in the payment processing network formats the authorization request message from its original file format e.g. XML into an ISO format e.g. ISO 8583 and passes the authorization request message to the authorization module D which is also in the payment processing network . In some embodiments of the invention the authorization request message may be converted to an ISO format prior to being received by the payment processing network .

In step the server computer H in the payment processing network receives and processes the non payment transaction data message. For example the non payment transaction data message may include information about the transaction that is not related to the payment e.g. item purchased was a blue shirt etc. . In some embodiments the payment processing network can use the data contained in the non payment transaction data message to modify the authorization request message. For example if the payment processing network is offering a 10 discount for the purchase of a blue shirt and it receives the exemplary non payment transaction data message described above the payment processing network can adjust the total in the authorization request message by 10 before transmitting it to an issuer computer .

In step the authorization module D processes the authorization request message and determines the appropriate destination for the authorization request message. For example the authorization request message may need to be routed to either an issuer computer associated with the payment processing network or to a gateway computer to other payment networks or debit gateways for processing.

In step the payment processing network transmits the formatted authorization request message to the appropriate destination. In embodiments of the invention the authorization request message can be sent to an issuer computer or if the message is for a different payment network or debit gateway the authorization request message is routed through a gateway computer to the appropriate payment network or debit gateway .

In step the payment processing network receives an authorization response message from the issuer computer . The authorization response message can provide an approval or denial of the authorization request sent in the authorization request message.

In step the payment processing network matches the authorization response message to the associated authorization request message by matching the transaction identifier for the two messages.

In step the payment processing network transmits the authorization response message to the merchant access device or from which it received the authorization request message and non payment transaction data message. Prior to being transmitted the data conversion module J in the payment processing network formats the authorization request message from an ISO format into an XML format. The authorization response message is transmitted back along the first communication path . In embodiments where the high capacity direct exchange network A was used to transmit the authorization request message the payment processing network transmits the authorization response message back along the second communication path .

In step the merchant computer receives the authorization response for the transaction. If the authorization response message states that the transaction is approved the merchant computer continues with the transaction. If the authorization response message states that the transaction is declined the transaction ends.

In step clearing and settlement is conducted for transactions. In some embodiments of the invention the clearing and settlement process is conducted at the end of day. In other embodiments the clearing and settlement process can occur multiple times throughout the day. For a more detailed explanation of the clearing and settlement process see below.

In other embodiments of the invention a merchant computer transmits by an access device associated with the merchant computer an authorization request message and a merchant data message through a merchant processor computer and receives at the access device an authorization response messages from the merchant processor computer.

In other embodiments of the invention encryption is used to protect sensitive data. For example transaction data can be encrypted at a merchant access device or merchant computer and decrypted by a payment processing computer.

In order for access devices and to function within the system the access devices and can be configured to recognize the messaging system used by the system . The following are examples of a messaging system used in some embodiments of the invention.

In embodiments of the invention the system limits authorization and capture amounts to 999999999999 twelve 9s . To request an authorization set the ccAuthService run field to true. As an example to request an authorization in a card present authorization the following fields can be presented in an authorization request message 

As another example to request an authorization in a card not present authorization the following fields can be presented in an authorization request message 

In embodiments of the invention the full authorization reversal service releases the hold that the authorization placed on the customer s credit card funds. This service is used to reverse an unnecessary or undesired authorization. Full authorization reversal can be used only for an authorization that has not been captured and settled. A full authorization reversal is a follow on transaction that uses the request ID returned from a previous authorization. The system uses the request ID to look up the customer s billing and account information from the original authorization which means you are not required to include those fields in your full authorization reversal request. As an example the following fields can be presented in an authorization reversal request message 

In embodiments of the invention when the merchant is ready to fulfill a customer s order and transfer funds from the customer s bank to merchant bank the authorization for the order must be captured. If the merchant fulfills only part of a customer s order the full amount of the authorization is not captured only the cost of the items that are being fulfilled. When the remaining items are shipped a new authorization is requested and a new authorization is captured.

A capture is a follow on transaction that uses the request ID returned from a previous authorization. The request ID links the capture to the authorization. The system uses the request ID to look up the customer s billing and account information from the original authorization which means you are not required to include those fields in your capture request. As an example the following fields can be presented in a capture request message 

In embodiments when a request for a credit is successful the issuing bank for the credit card takes money out of the merchant bank account and returns it to the customer. As an example the following fields can be presented in a credit request message 

billTo postalCode This field contains the postal code of the billing address. This field is required only for transactions in the U.S. and Canada.

In embodiments a void cancels a capture or credit request that was submitted to the system. A transaction can be voided only if the system has not already submitted the capture or credit request. The system usually submits capture and credit requests once a day. The system will decline a void request if the capture or credit request has already been sent. As an example the following fields can be presented in a void request message 

For debit cards and prepaid cards the issuer can approve a partial amount if the balance on the card is less than the requested authorization amount. Partial authorizations are supported for a plurality of payment networks e.g. Visa MasterCard Diners Club American Express Discover and JCB . As an example the following fields can be presented in authorization reply message where there is a partial authorization 

In embodiments of the invention if there is a balance remaining on a prepaid card after an authorization the authorization reply can include the balance amount. Balance responses are supported for a plurality of payment networks e.g. Visa MasterCard Diners Club American Express Discover and JCB . As an example the following fields can be presented in balance response message 

In embodiments of the invention Level II data is applicable to capture and credit services. As an example Authorization API Order Level Fields and Authorization API Item Level Fields such as the following may be included in a message 

In embodiments of the invention merchant descriptors are applicable to authorization capture and credit services. As an example merchant descriptors for authorizations capture and credit services such as the following may be included in a message 

In embodiments of the invention the following fields are applicable some or all of authorization capture and credit services. As an example combinations of the following fields may be included in an authorization capture or credit request message 

In embodiments of the invention the following fields are applicable to some or all of authorization capture and credit services. As an example combinations of the following fields may be included in an authorization capture or credit response message 

In embodiments of the invention a redemption platform will enable merchants to offer a scalable redemption platform to power offers coupons and loyalty. The redemption occurs during authorizations when a payment processing network receives the request making the needed adjustments to the authorization amount prior to sending out the issuer. The payment processing network sends messaging in the response back to the merchants for reconciliation and consumer messaging.

This solution can be utilized by payment processing networks and third parties to conduct real time redemption of offers and loyalty. It will create a standard process for consumers to redeem offers and assist merchants in simplifying the business processes and reconciliation. Finally it can drive value to all participants consumers an easier to use enroll in programs and redeem for retailers advertisers by providing new channels to reach consumers with a simple redemption process and lastly payment processing network participants through the ability to offer next generation programs driving value to their clients.

For example a consumer purchases 100 of goods from a merchant. The merchant computer transmits the authorization request to a payment processing network. The payment processing network matches the transaction with an offer qualification e.g. 10 off a 100 or more purchase and adjusts the amount in the authorization request to 90. The adjusted authorization request is transmitted to an issuer for approval. An authorization response is sent back to the payment processing network and through to the merchant computer. The receipt created by the merchant computer for the transaction reflects the real time redemption and the shopper is notified e.g. by for example SMS of the offer redemption.

In embodiments of the invention the following is an example XML code for a credit card authorization request 

In embodiments of the invention the following is an example XML code for a credit card authorization reply 

In embodiments of the invention the following is an example XML code for a credit card capture request 

In embodiments of the invention the following is an example XML code for a credit card capture reply 

In embodiments of the invention the following is an example XML code for a fully approved authorization request.

In embodiments of the invention the following is an example XML code for a fully approved authorization reply.

In embodiments of the invention the following is an example XML code for a partially approved authorization request where the original request amount is 1401 USD.

In embodiments of the invention the following is an example XML code for a partially approved authorization reply where the approved amount is 500 USD.

Embodiments of the invention provide the technical benefits of efficiency and conserving resources. As merchant systems are connected directly to a payment processing network which facilitates communications in the authorization process between the merchant and a plurality of issuers payment networks and debit gateways merchants do not have to establish multiple connections to multiple payment networks. This creates greater efficiency as the payment processing network can conduct file translation to a plurality of destinations where in the past the merchant systems would have to be able to do so. Further as data conversion can be conducted by the payment processing network on behalf of the merchant the merchant requires less data storage for acquirer rules and requirement for data files and saves resources by not having to do file conversions to meet different requirements. Furthermore computing and network resources of acquirer systems are not utilized at all prior to clearing and settlement with no or relatively little increase in the use of computing and network resources of merchants and payment networks. In some cases fewer network resources are used since acquirer computers are not used in many areas e.g. authorization where they have been traditionally used.

Embodiments of the invention disclosed herein include systems and methods for utilizing the capabilities of a payment processing network to customize the format of capture files for different acquirers on behalf of merchant computers in communication with the payment processing network.

Payment processing networks can provide their customers merchants with value added services such as e.g. connecting the merchants to their acquirer and performing authorization message processing and clearing and settlement services on behalf of the merchant by creating and sending clearing and settlement files to the merchant s acquirer. In order to do this the payment processing network must connect to the merchant s acquires. This can require the payment processing network to connect to several acquirers.

In embodiments of the invention the merchant can connect to the payment processing network e.g. VisaNet via an application programming interface API in order to receive merchant services. The payment processing network e.g. VisaNet is used as a gateway to the appropriate acquirer when sending data such as authorization request messages or capture files for clearing and settlement. This process flow is beneficial because it eliminates the need for the merchant access device or merchant computer to connect to each individual acquirer. Since the data transfer paths to different acquirers are already set up for the payment processing network using it as a gateway allows the merchant computer to manage fewer connections.

In addition a flexible file format can be used for clearing and settlement files in which the file format can be more easily configured depending on the acquirer s needs. The flexible file format is formatted in a manner that allows certain data to be added or omitted before sending to an acquirer based on that acquirer s needs. For example an acquirer may decide which data the acquirer wishes to receive. The flexible file format allows for easy reconfiguration of the data file based on those needs.

An exemplary system for processing a transaction and transmitting capture file data utilizing the present invention can be seen in . For simplicity of discussion only one of each component is shown. It is understood however that embodiments of the invention may include more than one of each component. In addition some embodiments of the invention may include fewer than all of the components shown in . Also the components in may communicate via any suitable communication medium including the internet using any suitable communication protocol.

The system includes an internet merchant computer a plurality of acquirer computers A D a payment processing network an issuer computer a gateway computer and merchant access devices or . In a typical transaction a consumer may purchase goods or services at a merchant through a merchant access device merchant or or through an internet merchant computer . The acquirer computer can communicate with an issuer computer via a payment processing network .

The payment processing network is comprised of at least an authorization log database B a capture file processing module C an authorization module D a clearing and settlement module E a capture file database I and a data conversion module J . Additional components are depicted in .

The authorization log database B contains records of authorization. The data contained in the authorization log database B can be transmitted to participating acquirers by subscription. The data contained in the authorization log database B can be in a plurality of file formats e.g. TC33 POS Data Raw Data and POSA files .

The capture file processing module C generates capture files from the data sent from the merchant computer to the payment processing network in the authorization request message. In embodiments of the invention the capture files are in a flexible file format e.g. XML . The capture file processing module C accumulates the capture files in the capture file database I until a batch cut off is met. In other embodiments the capture file processing module C accumulates the capture files in the capture file database I until a pre determined scheduled time or at the end of the day.

The authorization module D processes the authorization request message and determines the appropriate destination for the authorization request message.

The clearing and settlement module E handles the clearing and settlement of transaction made on payment processing network cards. An example of the clearing and settlement module is Base II which provides clearing settlement and other interchange related services to members.

The capture file database I is a database that accumulates and stores capture files prior to clearing and settlement.

The data conversion module J converts the authorization request message from one format to another format. In embodiments of the invention the authorization request message is generated and processed in XML and the data conversion module J converts the message into an ISO format e.g. ISO 8583 .

In step in a typical transaction a consumer engages in a transaction with a merchant using a portable consumer device. A merchant access device and or an internet merchant computer can transmits authorization request messages and non payment transaction data to a payment processing network to conduct authorization processing. The payment processing network processes the messages and transmits the authorization request message to either an issuer computer or a gateway computer to one of a plurality of payment networks and debit gateways . In embodiments of the invention the payment processing network captures the data contained in the authorization request message for clearing and settlement processing. The payment processing network receives an authorization response either approving or denying the transaction and transmits this message back to the merchant access device or or the internet merchant computer .

In step the payment processing network then processes the initial capture files and determines the acquirer computer A D for each capture file. The capture files are generated from the authorization request messages that pass through the payment processing network .

In step the payment processing network accesses a master log database G which is a database of acquirer information. The acquirer information can include rules and requirements for capture files. For example the payment processing network can support file customization by allowing pre selection of data elements for each participating acquirer computer A D .

In step the payment processing network stores capture files in a capture file database I . In embodiments of the invention the capture files in the database can be in an XML format. In other embodiments of the invention the capture files in the database can be in an ISO format. In yet other embodiments the capture files in the database can be in a text file format e.g. a payment processing network defined flat text file format . An example of a text file format is the TC33 format. In embodiments of the invention the capture files in the database can be either initial capture files or formatted acquirer capture files.

In step based on rules and requirements established by acquirer computers A D for the reception of capture files contained in the master log database G the payment processing network generates a plurality of acquirer capture files for a plurality of different acquirer computers A D . In some embodiments of the invention the acquirer capture files can be in a payment processing network defined flat text file format e.g. TC33 as described below . In other embodiments the acquirer capture files can be in a plurality of data formats based on acquirer computer A D specifications.

In step the payment processing network then transmits the acquirer capture files to the appropriate acquirer computers A D . The acquirer capture files can be transmitted by the payment processing network to the acquirer computers A D multiple times a day or based on pre determined criteria for delivery e.g. end of day delivery delivery based upon threshold volume being reached etc. .

In step the appropriate acquirer computers A D receive the acquirer capture files from the payment processing network .

In step the acquirer computers A D process the capture files that is received and conducts clearing and settlement processing. In embodiments of the invention this process involves sending the capture files to the payment networks or debit gateways associated with each of the acquirer computers A D . Clearing involves the process of collecting a transaction from an acquirer in the merchant s currency and delivering it to the issuer in the consumer s currency. Settlement involves the actual transfer of funds from the issuer computer to the acquirer computer through for example a wire transfer.

In step the merchant is then paid by the acquirer computer A D following the clearing and settlement of each transaction.

In some embodiments of the invention the plurality of initial capture files are generated by the merchant access device or or the internet merchant computer prior to being transmitted to the payment processing network . In some embodiments of the invention the initial capture files are generated in an XML format by the merchant access device or or the internet merchant computer .

At step merchant computer submits an authorization request message to the data conversion module J in the payment processing network . The merchant computer may include a merchant access device or an Internet merchant computer. The data conversion module J converts the authorization request message from one format to another format. In embodiments of the invention the authorization request message is transmitted by the merchant in XML and the data conversion module J converts the message into an ISO format e.g. ISO 8583 . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . In embodiments of the invention the authorization request message can be transmitted through a gateway computer to one of a plurality of payment networks and debit gateways. At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step the acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network . The capture file processing module C accumulates capture files until a pre determined batch cutoff is met. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step the capture file processing module C generates and submits a capture files to the file transformation module F in XML format. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an ISO format and transmits the capture file to the appropriate acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer computer A or B responds with an acquirer acknowledgement file. At step the file transformation module F transforms the file from an ISO format to an XML format. At step capture errors are transmitted to the merchant computer .

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step the acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network for 80. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step 20 partial reversal is submitted to the authorization module D . At step the payment processing network transmits the 20 partial reversal to the issuer computer . At step the issuer computer transmits its response to the reversal. At step the reversal response is passed to the capture file processing module C . At step the capture file processing module C generates and submits a capture file to the file transformation module F with a record for 80. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer computer A or B submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . Finally at step the payment processing network generates a merchant report qualifying transaction status.

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step an acquirer computer A may optionally subscribe to and receive an authorization file. At step the merchant computer submits a full reversal Rev to the capture file processing module C in the payment processing network for 100. At step full reversal is submitted to the authorization module D . At step the payment processing network transmits the 20 partial reversal to the issuer computer . At step the issuer computer transmits its response to the reversal request. At step the response is passed to the data conversion module J . At step the response is passed to the merchant computer .

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step an acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a full reversal Rev to the capture file processing module C in the payment processing network for 100. At step full reversal is submitted to the authorization module D . At step the payment processing network transmits the 20 partial reversal to the issuer computer . At step the issuer computer transmits its response to the reversal. At step the response is passed to the data conversion module J . At step the response is passed to the merchant computer . At step the capture file processing module C generates and submits a capture file to the file transformation module F without a record. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer computer A or B submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network . At step the Bill request is declined due to the previously submitted full reversal. Finally at step the payment processing network generates a merchant report qualifying transaction status.

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step an acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network for 100. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step merchant computer submits a Void request to void the previous BillResp. At step the payment processing network responds to merchant with VoidResp. At step the capture file processing module C generates and submits a capture file to the file transformation module F . In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an ISO format and transmits the capture file to the appropriate acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer computer A or B responds with an acquirer acknowledgement file. At step the file transformation module F transforms the file from an ISO format to an XML format. Finally at step the payment processing network generates a merchant report qualifying transaction status.

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step an acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network for 60 as only the first of two items has shipped. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step 40 partial reversal is submitted to the authorization module D . At step the payment processing network transmits the 40 partial reversal to the issuer computer . At step the issuer computer transmits its response to the reversal. At step the reversal response is passed to the capture file processing module C . At step the capture file processing module C generates and submits a capture file to the file transformation module F with a record for 60. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A B or C . In some embodiments optional steps and are conducted. At step the acquirer computer A B or C submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . At step the payment processing network generates a merchant report qualifying transaction status. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network for 40 as the second items has shipped. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step a 40 authorization request is passed to the authorization module D in the payment processing network . At step the authorization module D transmits the authorization request message to the appropriate destination such an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message into an XML format. At step the capture file processing module C generates and submits a capture file to the file transformation module F with a record for 40. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A B or C . In some embodiments optional steps and are conducted. At step the acquirer computer A B or C submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . Finally at step the payment processing network generates a merchant report qualifying transaction status.

At step merchant computer submits an authorization request message for 100 to the data conversion module J in the payment processing network . At step the converted authorization request message is passed to the authorization module D in the payment processing network . The authorization module D determines the transaction destination. At step the authorization module D transmits the authorization request message to the appropriate destination. In embodiments of the invention the authorization request message is transmitted to an issuer computer . At step the issuer computer transmits an authorization response message to the payment processing network either approving or denying the authorization request. At step the authorization module D matches the authorization response to the original authorization request and passes the authorization response message to the data conversion module J . The data conversion module J converts the authorization response message. In embodiments of the invention the authorization response message is transmitted to the data conversion module J in ISO format and the data conversion module J converts the message into an XML format. At step the data conversion module J transmits the XML formatted authorization response message to the merchant computer . At step an acquirer computer A or B may optionally subscribe to and receive an authorization file. At step the merchant computer submits a capture request Bill to the capture file processing module C in the payment processing network for 100. At step the capture file processing module C transmits a BillResp message acknowledging successful receipt of the Bill request. At step the capture file processing module C generates and submits a capture file to the file transformation module F with a record for 100. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . At step the payment processing network generates a merchant report qualifying transaction status. At step the merchant computer submits a 20 Credit request to the payment processing network . At step the capture file processing module C transmits a CreditResp message acknowledging successful receipt of the Credit request. At step the capture file processing module C generates and submits a capture file to the file transformation module F with a record for 100. In some embodiments at step if there are file integrity issues or a duplicate capture file the payment processing network submits an acknowledgment file to the capture file processing module C rejecting the file. At step the file transformation module F transforms the XML capture file into an acquirer target format and transmits the file to the acquirer computer A or B . In some embodiments optional steps and are conducted. At step the acquirer computer A or B submits an acknowledgement file to the payment processing network identifying exception records. At step the acquirer acknowledgment file is passed to the data conversion module J . Finally at step the payment processing network generates a merchant report qualifying transaction status.

As noted above the payment processing network transmits payment processing network capture files to participating acquirers. In some embodiments of the invention the payment processing network optionally receives acknowledgement files from participating acquirers. In embodiments of the invention the payment processing network capture files and acknowledgement files are formatted in a standard TC 33 record format. The files can be sequential fixed block files. Each file contains one or more logical transaction each of which is defined by a transaction code TC and comprised of one or more transaction component records TCR . Each TCR can be of any suitable length including 168 bytes in length.

Embodiments of the invention provide the technical benefits of efficiency and conserving resources. As merchant systems are connected directly to a payment processing network which facilitates communications in the capture file and clearing and settlement process between the merchant and a plurality of acquirers merchants do not have to establish multiple connections to multiple acquirer computers. This creates greater efficiency as the payment processing network can conduct file translation to a plurality of destinations where in the past the merchant systems would have to be able to do so. Further as data conversion can be conducted by the payment processing network on behalf of the merchant the merchant requires less data storage for acquirer rules and requirement for data files and saves resources by not having to do file conversions to meet different requirements.

In other embodiments an electronic wallet may be used to conduct a transaction. An electronic wallet may be used in a variety of transactions including but not limited to eCommerce social networks money transfer personal payments mobile commerce proximity payments gaming and or the like. For example users may engage in eCommerce via the electronic wallet for retail purchases digital goods purchases and utility payments. Users may also for example use the electronic wallet to purchase games or gaming credits from gaming websites and transfer funds to friends via social networks. Further for example users may also use the electronic wallet on a smart phone for retail purchases buying digital goods NFC RF payments at point of sale POS terminals.

In an exemplary transaction involving an electronic wallet a consumer may submit an indication to purchase or transfer funds. For example the consumer may visit a merchant website e.g. Facebook.com Amazon.com etc. and request to purchase an item from the website transfer funds to a friend and or the like. The merchant website may determine whether the electronic wallet is authorized on its website and may provide a list of payment options. If the merchant is registered with a electronic wallet server the electronic wallet server may authorize the merchant to collect consumer credentials for login to the electronic wallet and the merchant website may prompt the consumer to login to the electronic wallet. Otherwise the merchant website may request the consumer to provide payment details for alternative payment options e.g. credit card debit card PayPal account .

The consumer may authorize submission of their wallet consumer credentials such as but not limited to a Wallet User ID a password and or the like. For example the consumer may enter the Wallet User ID and password into a pop up window provided from the merchant website and or electronic wallet server. In another example the consumer may authorize the merchant website to provide the consumer credentials e.g. previously stored in HTML5 cookies etc. to the electronic wallet server. In yet another example the consumer may authorize the electronic wallet server via a remote component running on the merchant website e.g. a Java applet etc. to provide consumer credentials to the electronic wallet server for verification.

When the consumer submits consumer credentials to log into the electronic wallet the merchant website may forward the consumer credentials and transaction details to the electronic wallet server which may determine the validity of the consumer credentials. If the consumer s credentials are not valid the electronic wallet server may deny the payment request and send a notification of denial to the merchant website. In other embodiments if the consumer provided credentials are valid the electronic wallet server may process payment from the electronic wallet. For example the electronic wallet server communicates with the consumer s bank account associated with the electronic wallet and requests a fund transfer of an indicated amount. The electronic wallet server may then store a transaction record.

In some embodiments after processing the payment the electronic wallet server sends a payment confirmation notice to the merchant website which in turn completes the order and stores the transaction record in the database. The merchant website may provide a confirmation page comprising transaction confirmation to the consumer.

Other embodiments of the invention include a method comprising generating at a merchant computer an authorization request message and a non payment transaction data message and transmitting by the merchant computer the authorization request message and non payment transaction data message.

Other embodiments of the invention further include a computer comprising a processor and a non transitory computer readable storage medium comprising code executable by the processor for implementing a method comprising generating an authorization request message and a non payment transaction data message and transmitting the authorization request message and non payment transaction data message.

Other embodiments of the invention include a method comprising sending a communication comprising non payment transaction data to a server computer wherein non payment transaction data is sent through a communication channel that is present between a merchant computer and the server computer wherein the communication channel does not pass through an acquirer and wherein the server computer performs further processing.

The various participants and elements of the embodiments may operate one or more computer apparatuses to facilitate the functions described herein. Any of the elements in and may use any suitable number of subsystems to facilitate the functions described herein. Examples of such subsystems or components are shown in . The subsystems shown in are interconnected via a system bus . Additional subsystems such as a printer keyboard fixed disk or other memory comprising computer readable media monitor which is coupled to display adapter and others are shown. Peripherals and input output I O devices which couple to I O controller can be connected to the computer system by any number of means known in the art such as serial port . For example serial port or external interface can be used to connect the computer apparatus to a wide area network such as the Internet a mouse input device or a scanner. The interconnection via system bus allows the central processor to communicate with each subsystem and to control the execution of instructions from system memory or the fixed disk as well as the exchange of information between subsystems. The system memory and or the fixed disk may embody a computer readable medium.

The software components or functions described in this application may be implemented as software code to be executed by one or more processors using any suitable computer language such as for example Java C or Perl using for example conventional or object oriented techniques. The software code may be stored as a series of instructions or commands on a computer readable medium such as a random access memory RAM a read only memory ROM a magnetic medium such as a hard drive or a floppy disk or an optical medium such as a CD ROM. Any such computer readable medium may also reside on or within a single computational apparatus and may be present on or within different computational apparatuses within a system or network.

The present invention can be implemented in the form of control logic in software or hardware or a combination of both. The control logic may be stored in an information storage medium as a plurality of instructions adapted to direct an information processing device to perform a set of steps disclosed in embodiments of the present invention. Based on the disclosure and teachings provided herein a person of ordinary skill in the art will appreciate other ways and or methods to implement the present invention.

In embodiments any of the entities described herein may be embodied by a computer that performs any or all of the functions and steps disclosed.

Any recitation of a an or the is intended to mean one or more unless specifically indicated to the contrary.

The above description is illustrative and is not restrictive. Many variations of the invention will become apparent to those skilled in the art upon review of the disclosure. The scope of the invention should therefore be determined not with reference to the above description but instead should be determined with reference to the pending claims along with their full scope or equivalents.

