---

title: System and method to transform results of client requests using client uploaded presentation formats
abstract: Method and apparatus to facilitate access to a network-based publication system. In an embodiment, a user or third party affiliate of a network-based publication system uploads a style sheet or other presentation format file to a database in the network-based publication system. Thereafter, the user or third party affiliate sends a request to the network-based publication system, and the publication system uses one or more of the uploaded style sheets to format the response to be transmitted back to the third party affiliate.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09081867&OS=09081867&RS=09081867
owner: eBay Inc.
number: 09081867
owner_city: San Jose
owner_country: US
publication_date: 20120330
---
The present application claims priority to U.S. Non Provisional patent application Ser. No. 11 216 790 filed Aug. 31 2005 the content of which is incorporated herein by reference in its entirety.

The present application relates generally to the field of network communications and in an example embodiment but not by way of limitation to communications between portals and other service providers in a network.

Some of the advantages offered by a typical network based publication system e.g a website are the simplicity promptness and convenience of participating in the online information publishing and viewing process.

However since website development can be very expensive and many businesses cannot easily develop their own websites many businesses have expanded into the online arena by associating themselves with the services provided by online service providers. Consequently instead of developing their own websites these businesses have developed third party applications that interact with network based systems. These third party applications may enhance the user experience for users of the network based publication system by providing programs that the network based publication system does not have. Regarding the enhancement of the user experience for a user of a particular business s systems these third party applications may integrate the applications of that particular business entity with a particular popular network based publication system and extend platforms of that business entity into new business areas.

Additionally these third party application programs may be extremely valuable for users who conduct a great many business transactions using the network based publication system and users who would like to have the information presented to attract buyers in a way that may be different from the network based publication system. Moreover businesses who use these third party application programs may have items listed for trading on the network based publication system but may wish to have the users interact with the network based publication system through the business s Website using such third party applications. Thus such third party applications may expand a business s services to its clients.

These approaches to the use of third party applications in connection with a network based publication system however present several problems to such users especially smaller business entities that do not have the bandwidth hardware and or personnel to implement such systems in connection with their internal systems and applications. In a system in which a network based publication system transmits an XML document to a user the conversion of that XML document to an HTML document is not a trivial task. The user must have available to it the bandwidth servers hardware and software and personnel to accomplish such a conversion. Moreover if there is a change in the creation of the XML document on the network based publication system the code on the user s system that converts the XML document into an HTML document must also be changed.

Similarly in systems in which a user transmits a style sheet to a network based publication system and thereafter receives an HTML document back from that facility the network based publication system has little control over such style sheets and is therefore susceptible to error ridden style sheets or worse yet style sheets that contain malicious code that can wreak havoc to a network based publication system .

Network based publication systems are therefore in need of an improved manner to respond to client requests and format responses to these requests.

An embodiment of the present invention discloses methods and apparatuses for transforming on a server the results of a client request using presentation formats that have been uploaded to the server by the client. In one embodiment a client uploads presentation formats to a data base on a network based publication system. Such presentation formats may include an eXtensible Style Language XSL file Cascading Style Sheets CSS or some other presentation format language. The protocol used by the client and server may be the Hyper Text Transfer Protocol HTTP and the request itself may be formatted in the eXtensible Markup Language XML . The network based publication system executes the client s request and uses the client uploaded presentation formats to generate a server side transformation and response to the client s request. In an embodiment that response is in a HyperText Markup Language HTML format and that HTML document is transmitted to the client over HTTP protocol and displayed on the client s system.

Methods and apparatuses for facilitating access to a network based publication system such as for example an Internet based search engine portal or commerce system e.g. publication system in conjunction with the use of third party applications are described. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the present invention. It will be evident however to one skilled in the art that the present invention may be practiced without these specific details.

For the purposes of the present specification the term transaction shall be taken to include any communications between two or more entities and shall be construed to include but not be limited to commercial transactions including sale and purchase transactions auctions providing feedback accessing e mail and the like.

The publication system includes one or more of a number of types of front end servers namely page servers that deliver web pages e.g. markup language documents picture servers that dynamically deliver images to be displayed within Web pages listing servers Computer Graphic Interface CGI servers that provide an intelligent interface to the back end of system and search servers that handle search requests to the system . E mail servers provide inter alia automated e mail communications to users of the system .

The back end servers include a database engine server a search index server and a credit card database server each of which maintains and facilitates access to a respective database for example database .

The Internet based publication system may be accessed by a client program such as a browser e.g. the Internet Explorer distributed by Microsoft Corp. of Redmond Wash. that executes on a client machine and accesses the system via a network such as for example the Internet . Other examples of networks that a client may utilize to access the publication system include a wide area network WAN a local area network LAN a wireless network e.g. a cellular network or the Plain Old Telephone Service POTS network.

Central to the database is a user table which contains a record for each user of the publication system . A user may operate as a seller buyer or both with respect to the publication system . A user information table is linked to the user table and includes more detailed information about each user. The database also includes item tables that may be linked to the user table . Specifically the tables include a seller items table and a bidder items table . A user record in the user table may be linked to publication data relating to multiple items that are being or have been auctioned via the system for example. A link indicates whether the user is a seller or a bidder or buyer with respect to items for which records exist within the item tables . The database also includes a note table populated with note records that may be linked to one or more item records within the item tables and or to one or more user records within the user table . Each note record within the table may include inter alia a comment description history or other information pertaining to an item being auctioned via the publication system or to a user of the publication system .

A number of other tables are also shown to be linked to the user table namely a user past aliases table a feedback table a feedback details table a bids table an accounts table an account balances table and a transaction record table . In addition the database includes a location table which stores valid demographic information that is used to verify registration information submitted by users during the registration process.

It will be appreciated that any information other than that described above may populate the user table without loss of generality.

In an example embodiment a network based publication system can be described as illustrated in . The database stores all of the information e.g. user records item records etc. maintained by the publication system as discussed above. In an embodiment the database includes a database that contains client uploaded presentation formats. A commerce engine is further coupled to the database . The commerce engine contains all of the business logic for instance how an auction will work if the publication system is an auction. This includes rules such as how to calculate the highest bid to set the minimum bid for a particular item determine what fields are necessary and optional for a particular item or in short all of the logic of how to manage the auction. The commerce engine functions based on program codes that are configured to access the information stored in the database . The codes can be written in any suitable programming language that can access the information stored in the database for instance in C language.

Continuing with the embodiment shown in a user interface is coupled to the commerce engine . It is the database the commerce engine and the user interface that essentially make up the server side of the network based publication system . The user interface includes application programs that are run from the commerce engine that provide a user interface for the publication system . For example when a user visits a web site belonging to the publication system the user interacts with the user interface application programs included in the user interface that essentially provide a browser with which the user may interact. That is the user interface is functioning as an application interface exposed to the third party which behind the scenes does the transformation processing and returns the response to the third party using an XSL style sheet specified in the request message. In one example the browser presents a humanly readable interface for the user to interact with the publication system . Through the application programs the user can interact with the commerce engine and the database to obtain or submit the desired information. After the data are extracted from the database the data are presented to the user in the human readable format for interaction. One well known example of a data format that can be presented to the user for such interaction is the Hyper Text Markup Language HTML . HTML defines the page layout font graphic elements as well as hyper links to other documents on the website of the publication system .

A user of the publication system is typically connected to the Internet or other network via any suitable method for instance through a conventional cable and a modem wireless access modem and an antenna etc. A user can also be a computer with programs to act on behalf of the actual user. Typically the user is connected to the network by issuing to the publication system a HyperText Transport Protocol command HTTP . HTTP is a communication protocol used to connect to servers on the WorldWideWeb for instance servers and of the publication system in or commerce engine in . HTTP may also transmit HTML pages to browsers utilized by the user to access the publication system . In another embodiment a Representational State Transfer REST Application Program Interface API may be used. As known to those of skill in the art a REST API is a more succinct HTTP protocol that uses a subset of HTTP commands.

The embodiment illustrated in employs a two phase process. First a user or third party affiliate uploads a style sheet to a database in a network based publication system . Second sometime thereafter the user or third party affiliate makes a request to the network based publication system such as a request for information and the network based publication system returns that information to the third party affiliate in a form dictated by the style sheet. In another embodiment several style sheets are uploaded to the network based publication system and the user includes in the request a key to identify the style sheet that the user would like to invoke.

A more detailed illustration of the embodiment of is illustrated in . In a user or third party affiliate of a network based publication system may upload to a database in the network based publication system an XSL CSS or other style sheet . The style sheet is transmitted in a request message over HTTP protocol for example an HTTP POST command. In an embodiment the message is first screened by a firewall . One purpose of the firewall is to prevent viruses and other harmful files from gaining access to the network based publication system and in particular the firewall prevents the introduction of any harmful files via a third party affiliate s submission of a style sheet . After passing through the firewall a processing unit performs a first check on the style sheet . In an embodiment this first check involves a simple syntactic validation of the XSL or other format presentation code and a parsing and normalization of the format presentation code. The request containing the style sheet is transferred through firewall to another internal processor . The processor writes the style sheet to the database and marks the style sheet as inactive. The processor further informs a scrubber process that a new style sheet has been written to the database . The scrubber process reads the style sheet and scans it to determine if there are any viruses malicious content or other potentially harmful code such as ActiveX script code Java script code attempts to access URLs or other internal resources attempts to access XSLs from other untrusted sites attempts to make external outbound connections or the presence of non terminating recursive logic . In an embodiment the system checks the XSL files after scrubbing to verify that the scrubbing was successfully completed. If the scrubbing was successful the database is updated to indicate that the style sheet is active. If the scrubbing process did not successfully complete the style sheet remains inactive and the system notes the scrubbing failure. After the completion of the scrubber process in an embodiment a process performs XSL to HTML transform tests on the style sheet to determine if the XSL style sheet can successfully transform some test XML documents into other XML documents or HTML documents. A successful completion of these transform tests verifies that the style sheet contains proper commands code and syntax either XSL CCS or some other format language so that when the system is called upon to transform a third party s search results from an XML format to an HTML format there will be no errors in the conversion process. These transforms are further needed to check that it will not take an indefinite time period to execute the transformation of XML to HTML using the given XSL style sheet. Furthermore these transform tests restrict style sheets so that they are executed within reasonable and configurable periods so as to minimize computational impact on an network based publication system e.g. making an E commerce site unstable with respect to availability . In an embodiment the AV Scrubber and the process are part of an extensible validation pipeline . In the extensible validation pipeline validation processes can be added deleted activated and deactivated as future requirements dictate.

In an embodiment the uploading of a style sheet is implemented by the third party user affiliate through a user interface website maintained by the network based publication system . illustrate examples of web pages that are associated with such an interface. illustrates a page that lists several applications that may be accessed by a third party user. illustrates a page that lists the style sheets that are associated with a particular application of a third party affiliate user . In this embodiment the web page displays an identifier for each style sheet a file name for each style sheet the date and time when that style sheet was uploaded into the system s database and whether the style sheet is active at . In another embodiment a transformation timeout history is maintained and the transformation timeout history keeps a record of the times that a particular style sheet timed out in its transformation from an XML document to an HTML document. A history of timeouts for a particular style sheet indicates a problem with that style sheet. illustrates a page that permits a user to upload a new style sheet illustrates a page that permits a user to view a style sheet file and illustrates a page that permits a user to rename a style sheet file. In an embodiment for security purposes a user is not permitted to edit style sheets. If a user would like to change a style sheet the user must first delete the style sheet and then replace it by adding a new version of that style sheet. In an embodiment the facility may place an upper limit on the number of style sheets that a third party affiliate is allowed to upload to the database .

After the upload of a style sheet into the database in the network based publication system and the indication that the style sheet is active and has passed the transform tests the style sheet is available to the facility for the facility to format data into an HTML document or another XML document before such data is transferred from the network based publication system to the third party affiliate . In an embodiment this transmission of data from the network based publication system can be in response to a request for information by the third party affiliate. In another embodiment data can be sent by the network based publication system to a third party affiliate independent of any specific request by a third party user.

Specifically referring again to the embodiment of a third party affiliate submits a request for information to the network based publication system . In an embodiment this request includes a command to the publication system such as an HTTP GET command and search parameters to retrieve data and a file id to identify a style sheet in the database . The request passes through the firewall through processor through firewall and to processor . Processor reads the request parses out the command and signals internal processor to retrieve the information from its databases that meet the criteria specified in the request . In an embodiment this retrieved data is formatted into an XML document. Processor then transmits the search results to processor which in an embodiment includes a formatting module. Processor further retrieves the XSL style sheet identified in the original request for this third party affiliate from the database and transmits that style sheet to processor . In another embodiment recently used style sheets are maintained in a cache memory and processor first checks cache memory to determine if the needed style sheet is in cache memory. The formatting module in processor uses the style sheet to transform the data into an HTML document . In an embodiment processor creates a new execution process that performs the actual transformation. The processor monitors this transformation process and if the time that it takes to transform this data exceeds a threshold e.g. 3000 milliseconds processor terminates the transformation process and returns an error message to the client. Furthermore if the client continues to send requests using the same XSL file id which results in consecutive transformations timeouts that XSL instance is disabled and made inactive. In this manner the network based publication system is able to prevent at run time system taxing events caused by the transformation such as infinite loops and or other malicious events.

The HTML document is then transmitted back to the third party affiliate and the third party affiliate s system renders the HTML document.

The computer system includes a processor a main memory and a static memory which communicate with each other via a bus . The computer system may further include a video display unit e.g. a liquid crystal display LCD or a cathode ray tube CRT . The computer system also includes an alpha numeric input device e.g. a keyboard a cursor control device e.g. a mouse a disk drive unit a signal generation device e.g. a speaker and a network interface device .

The disk drive unit includes a computer readable medium on which is stored a set of instructions i.e. software embodying any one or all of the methodologies described above. The software is also shown to reside completely or at least partially within the main memory and or within the processor . The software may further be transmitted or received via the network interface device . For the purposes of this specification the term computer readable medium shall be taken to include any medium that is capable of storing or encoding a sequence of instructions for execution by the computer and that cause the computer to perform any one of the methodologies of the present invention. The term computer readable medium shall accordingly be taken to included but not be limited to solid state memories optical and magnetic disks and carrier wave signals.

Thus a method and apparatus for detecting suspicious transactions occurring over a network based transaction facility have been described. Although the present invention has been described with reference to specific exemplary embodiments it will be evident that various modifications and changes may be made to these embodiments without departing from the broader spirit and scope of the invention. Accordingly the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.

