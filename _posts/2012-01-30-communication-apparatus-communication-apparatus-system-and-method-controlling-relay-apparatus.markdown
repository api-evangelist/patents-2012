---

title: Communication apparatus, communication apparatus system, and method controlling relay apparatus
abstract: A service cooperation system is provided with a multi-function apparatus and a relay apparatus. The service cooperation system changes a disclosure condition of an album in which an electronic file is categorized and stored, for an electronic file storing service offered by the service provider. Without the need for a terminal apparatus such as a personal computer having a fulfilling web browser function, an image reading apparatus itself can perform uploading process, setting of an album of an upload destination and security setting/changing for an album, while notifying the user, who is authorized to a limited disclosure and to view the album, that the album has been updated.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08850529&OS=08850529&RS=08850529
owner: Brother Kogyo Kabushiki Kaisha
number: 08850529
owner_city: Nagoya-shi, Aichi-ken
owner_country: JP
publication_date: 20120130
---
This nonprovisional application claims priority under 35 U.S.C. 119 a on Patent Application No. 2011 018318 filed in Japan on Jan. 31 2011 the entire contents of which are hereby incorporated by reference.

The present invention relates to a communication apparatus a communication apparatus system and a method controlling a relay apparatus.

Conventionally an image reading apparatus that uploads an electronic file of a read image to a server a printing device that prints out an electronic file downloaded from a server and the like have been well known. There has been proposed a related art image reading apparatus for uploading an electronic file of a read image to a server. When a manufacturer of the image reading apparatus or printing apparatus provides such a service it is required for the manufacturer to prepare on its own a server dedicated to store the electronic file to be uploaded.

In recent years an electronic file storing service has been widely used by which an electronic file can be stored in a database on a network prepared by a service provider. An example of such service includes Picasa registered trademark Web album and flickr registered trademark . The user can utilize a terminal apparatus provided with a Web browser to upload a desired electronic file to the electronic file storing service or to download a desired electronic file from the electronic file storing service.

In such circumstances a service is contemplated by which the electronic file of the image read by the image reading apparatus described above is uploaded to the electronic file storing service offered by the service provider instead of uploading the electronic file to a dedicated server.

When the service described above is provided by a manufacturer of the image reading apparatus the user uploads the electronic file of the image read by the image reading apparatus to the electronic file storing service offered by the service provider. The electronic file storing service offered by the service provider an album can be set for categorizing and storing electronic files. The album can limit at the time of setting or when an alteration is made later the authorization to view the electronic files stored in the album. A security setting such as open disclosure allowing anyone to view the files limited disclosure allowing a limited number of users to view the files or nondisclosure may be employed. In the limited disclosure users that share a certain electronic file are set. Such security setting can commonly be performed by a terminal apparatus such as a personal computer provided with a Web browser.

It would be convenient if the electronic file read by the image reading apparatus is uploaded to the electronic file storing service and shared among the users authorized to the limited disclosure. Some image reading apparatus however are not provided with sufficient Web browser functions causing a problem in that sharing of the uploaded electronic file can be a troublesome work. For example the procedure as described below may be required. First the read electronic file is transferred to a terminal apparatus such as a personal computer on which a Web browser function is mounted. In the terminal apparatus such as a personal computer setting for an album or setting changing for security is performed as needed and then an electronic file is uploaded. It is also necessary to notify each of the users authorized to the limited disclosure individually that the electronic file is uploaded and the contents of album are updated.

In view of the circumstances described above the present invention has an object of providing a communication apparatus a communication apparatus system and a method controlling a relay device in which an image reading apparatus itself can perform an uploading process when an electronic file read by the image reading apparatus is uploaded to an electronic file storing service to be available for limited people without the need for a terminal apparatus such as a personal computer having a fulfilling Web browser function and can also notify the users authorized to the limited disclosure of the album or the like that the album has been updated.

To solve the above problems the communication apparatus is a communication apparatus in a communication apparatus system provided with a network including a service providing apparatus of an electronic file storing service and a communication apparatus connected to the network. The communication apparatus system is a communication apparatus system provided with a network including a service providing apparatus of an electronic file storing service and a communication apparatus connected to the network. The communication apparatus system is a communication apparatus system provided with a relay apparatus connected to a network including a service providing apparatus for the electronic file storing service and a communication apparatus connected to the network. The method of controlling the relay apparatus is a method to perform control on the relay apparatus described later.

The communication apparatus is configured to include a storage unit a security setting unit an upload processing unit and a notification processing unit. The storage unit registers account information for the user of the electronic file storing service and contact information of the user. The security setting unit requests the electronic file storing service to change a disclosure condition of an album in which the electronic file is categorized and stored. The upload processing unit uploads the electronic file to the electronic file storing service. The notification processing unit notifies when the electronic file is uploaded a user who is authorized to a disclosure by the disclosure condition of an album to which the electronic file is uploaded among the users registered in the storage unit of a download URL of the album to which the electronic file is uploaded and a download URL of the uploaded electronic file based on the contact information registered in the storage unit.

The relay apparatus is configured including an upload destination program storing unit and a security setting requesting unit. In the upload destination program storing unit an upload destination program for requesting the service providing apparatus to change a disclosure condition of an album using a disclosure API included in the electronic file storing service. When a request for changing the disclosure condition of the album is received from the communication apparatus the security setting requesting unit requests the electronic file storing service to change the disclosure condition of the album by executing the upload destination program.

Even if the communication apparatus not provided with a sufficient web browser function is employed a request for changing a disclosure condition of an album storing an electronic file can be made to the electronic file storing service. Moreover when the electronic file is uploaded each user authorized to the limited disclosure by the disclosure condition of the uploaded album can individually be notified that the contents in the album have been uploaded.

The above and further objects and features of the invention will more fully be apparent from the following detailed description with accompanying drawings.

Embodiments of the present invention will be described below with reference to the drawings. Note that the drawings to be referred to are used to explain technical characteristics that may be employed by the present invention. The configuration of the apparatuses disclosed flowcharts of various types of processing and the like are mere illustrative examples and not to limit the present invention thereto.

Referring to the outline of the service cooperation system which is the embodiment of the present invention will be described. The service cooperation system includes a multi function apparatus and a relay apparatus . The service cooperation system can upload an electronic file to an electronic file storing service offered by a service provider or download an electronic file from the electronic file storing service.

The electronic file storing service is provided by a service providing device installed by each service provider on the Internet. More specifically the service providing apparatus is a well known Web server. The service providing device performs communication between another terminal connected to the Internet and HTTP or HTTPS to offer a predetermined service to another terminal.

An electronic mail e mail service is offered by a mail server installed by an e mail service provider. More specifically the mail server manages and operates the e mail service.

A facsimile service is provided by a facsimile switching device connected to a public line. Moreover the facsimile switching device is to connect public lines with each other and configure a line network.

The multi function apparatus is more specifically a small digital complex machine. The multi function apparatus is provided with functions of printing scanning facsimiling and copying a telephone directory function as well as writing and reading functions to from an external storage medium.

The user of multi function apparatus can upload the electronic file of an image read by the scanning function of multi function apparatus to the electronic file storing service. Moreover the user of the multi function apparatus can print out the electronic file downloaded from the electronic file storing service by the printing function of the multi function apparatus .

The multi function apparatus can upload and download an electronic file in cooperation with the relay apparatus . The multi function apparatus obtains from the electronic file storing service via the relay apparatus an upload destination URL at which the electronic file is uploaded to the electronic file storing service an electronic file URL for the electronic file to be downloaded from the electronic file storing service and the like. However binary data for an electronic file with a large amount of data is directly transmitted to from the electronic file storing service without going through the relay apparatus . The service cooperation system thus reduces the amount of data to go through the relay apparatus . This can further reduce a load on occurring to the relay apparatus .

In addition the multi function apparatus can perform security setting for an album of the upload destination before the electronic file is uploaded to the electronic file storing service. Here the album corresponds to a storage region of a file provided in the electronic file storing service. The electronic file is categorized and stored in album to be managed by attribute. Moreover the e mail service or facsimile service is used to notify the user who shares an album that the corresponding electronic file has been uploaded.

The relay apparatus may be an apparatus with a well known server function. The relay apparatus may be prepared by the manufacturer of multi function apparatus on its own. Alternatively it is also possible to use a well known rental server or a virtual machine in which plural physical devices represented by Amazon EC2 registered trademark may cooperate together to serve as one server. In such a case the operational cost for the relay apparatus varies depending on the amount of data transmitted through the relay apparatus or the load on the processing performed by the relay apparatus . As described above the data amount transmitted through the relay apparatus or the load on the relay apparatus may be reduced in order to lower the operational cost for the relay apparatus when using the rental server or virtual machine. Moreover if the manufacturer prepares the relay apparatus on its own which does not require high performance investment in equipment can be suppressed.

Referring to the hardware configuration of service cooperation system is described. It is assumed in the description below for the purpose of explanation that the service cooperation system makes two electronic file storing services a service A and a service B cooperate with each other. In the description below the service providing apparatus for service A will be referred to as a service providing apparatus A. The service providing apparatus for service B will be referred to as a service providing apparatus B. When there is no need to distinguish one from the other it will simply be described as service providing apparatus . The multi function apparatus relay apparatus service providing apparatus A and service providing apparatus B are connected with one another through a network . For the network the Internet can be employed for example. The multi function apparatus relay apparatus and service providing apparatus perform transmission of data to from one another in accordance with HTTP 1.1.

First the hardware configuration of multi function apparatus is described. The multi function apparatus includes a communication unit a NCU Network Control Unit a control unit a storage unit a memory card controller a display unit a printing unit a scanning unit and an operating unit .

The communication unit is a device for communicating with another apparatus connected to the network . For the communication unit a well known network card may be employed.

The NCU is a device for communicating with the facsimile switching device through the public line. The NCU is provided with a modem and performs demodulation of a communication signal inputted from the public line or modulation of a communication signal for transmitting image data to the outside.

The control unit is provided with a CPU not shown as well as a ROM and a RAM connected to the CPU. The CPU controls the operation of multi function apparatus in accordance with the program stored in the ROM . The program stored in the ROM includes a main processing program a telephone directory registering program a security setting program an upload processing program and a notification program. The RAM is a storage device which temporarily stores various types of data therein. The ROM may be a memory device or alternatively be a non volatile storage device such as a hard disk drive.

The main processing program is a program for processing performed inside the multi function apparatus and for communication with the relay apparatus and service providing apparatus in cooperation with a plurality of programs stored in the ROM . The telephone directory registering program security setting program upload processing program and notification program which will be described later are executed as needed. The operation flow will be described later with reference to the flowchart of for the main processing.

The telephone directory program is for receiving accounts of the name of a registrant a telephone number an e mail address a facsimile number and a service and for storing them in the telephone directory information stored in the storage unit described later as registrant information. The operation flow will be described later with reference to the flowchart of the telephone directory registering process of .

The security setting program is for performing security setting such as the setting for the disclosure condition of an album newly created in the electronic file storing service selected by the user and the setting in selecting an existing album to change the disclosure condition. The operation flow will be described with reference to the flowchart of security setting process in and .

The upload processing program is for uploading an electronic file to the electronic file storing service by the user. The operation flow will be described later with reference to the flowchart of for the uploading process.

The notification program is for notifying when the album to which an electronic file is to be uploaded is set in a condition that only a specified user has an access thereto i.e. a condition of a so called limited disclosure the user authorized to view the file that a new electronic file has been uploaded and the album has been updated. The operation flow will be described later with reference to for the notification process.

The storage unit is a non volatile storage device such as a NAND flash memory. The storage unit stores information for identifying the user of multi function apparatus and various setting information. Moreover the telephone directory information is stored indicating registrant information and the like registered by the user of multi function apparatus .

The memory card controller controls the storage by the memory card attached to the multi function apparatus . More specifically according to the instructions of control unit the memory controller writes data to the memory card deletes data stored in the memory card or reads data stored in the memory card . In the memory card an electronic file of a predetermined type is stored.

The display unit is a display device provided with a display such as a well known LCD. The display unit displays predetermined information such as a menu item selecting screen which will be described later in accordance with the instructions from the control unit .

The printing unit is a device for printing an image in accordance with the instructions of the control unit .

The scanning unit is a device for reading an image recorded on a sheet of paper set by the user in accordance with the instructions of the control unit .

The operation unit is a device provided with a plurality of operation buttons operated by the user for transmitting a signal to the control unit in response to the pressing operation by the user. The user can input desired instructions by operating the operation unit .

Next the hardware configuration of the relay apparatus is described. Though in the description of the present embodiment the relay apparatus is described as a physically existing server it may alternatively be a virtual machine as described above such as EC2 in which a plurality of physical devices cooperate together to function as one server.

The communication unit is a device for performing communication with another apparatus connected to the network . For the communication unit a well known network card can be employed.

The control unit includes a CPU not shown as well as ROM and RAM connected to the CPU. The CPU controls the operation of relay apparatus in accordance with the program stored in the ROM and storage unit . The RAM is a storage device that temporarily stores various types of data therein.

The storage unit is a non volatile storage device such as a hard disk drive. The storage unit stores a plurality of software modules including a URL obtaining program for service A a template creating program for service A a decrypting program for service A a URL obtaining program for service B a template creating program for service B and a decrypting program for service B. Moreover the storage unit stores therein a relay apparatus processing program for relaying communication with the multi function apparatus and with the service providing apparatus in cooperation with the plurality of modules described above.

Each of many electronic file storing services discloses its own Application Program Interface API . Other business providers can utilize such API to offer new services in cooperation with the electronic file storing service to the users. The URL obtaining program for service A is a program for using API disclosed by the service A to obtain the URL to which a file is to be uploaded hereinafter also referred to as upload destination URL from the service providing apparatus A. Furthermore the template creating program for service A is a program for creating a template of an upload message used when uploading an electronic file to the service A. Moreover the decrypting program for service A is a program for decrypting a response message from the service providing apparatus A.

The URL obtaining program for service B is a program for using API disclosed by the service B to obtain an upload destination URL from the service providing apparatus B. Moreover the template creating program for service B is a program for creating a template of an upload message used when uploading the electronic file to the service B. Furthermore the decrypting program for service B is for decrypting a response message from the service providing apparatus B.

The relay apparatus processing program intervenes between the relay apparatus and the service providing apparatus for required processing in accordance with the main processing program executed by the control unit . The operation flow will be described later with reference to the flowchart of for the relay apparatus processing.

The user of multi function apparatus can designate a desired service among a plurality of electronic file storing services. The user of the multi function apparatus can then upload a desired electronic file for the designated service. Moreover the user of the multi function apparatus can select whether to upload the electronic file of an image read by the scanning unit or to upload the existing electronic file stored in the memory card . Furthermore security setting for the electronic file uploaded to the electronic file storing service is changed to set any one of nondisclosure open disclosure and limited disclosure as a disclosure condition. When the limited disclosure is set in which a file is disclosed to specific users the users can be set who share an album storing the uploaded electronic file. Moreover the users who have authorized access to the file can be notified that the file has been uploaded to the electronic file storing service through e mail or facsimile.

Next referring to an example of the operation of service cooperation system will be described. shows a sequence diagram illustrating an example of the operation of service cooperation system . In this example the flow will be described in the case where the user of multi function apparatus selects to upload the electronic file of the image read by the scanning unit . It is understood that the electronic file stored in the memory card may also be uploaded. Note that the electronic file storing service will be simply referred to as a service in the description below.

First when the user operates the operation unit of the multi function apparatus and selects a service for uploading an electronic file the multi function apparatus performs setting for the security of an album. When an album is newly created a request for newly creating an album hereinafter also referred to as new album creating request is transmitted to the relay apparatus U . When the security setting for the existing album is changed the request for changing security for an album hereinafter also referred to as album security changing request is transmitted to the relay apparatus U .

The new album creating request and the album security changing request include service identifying information for identifying a service selected by the user user identifying information for identifying the user an album name set by the user and security setting which is a disclosure condition for the album.

The relay apparatus that receives the new album creating request or the album security changing request transmits the new album creating request or album security changing request to the service providing apparatus for the service selected by the user U . The relay apparatus identifies the service and user based on the service identifying information and user identifying information included in the new album creating request or album security changing request received from the multi function apparatus . The relay apparatus then creates the new album creating request or album security changing request corresponding to the identified service and user and transmits it to the service providing apparatus . Here the relay apparatus creates the new album creating request or album security changing request in accordance with a program corresponding to the service designated by the user.

More specifically if the service A is designated by the user the relay apparatus creates the new album creating request or album security changing request corresponding to the service A in accordance with the URL obtaining program for service A stored in the storage unit and transmits it to the service providing apparatus A. Note that the new album creating request or album security changing request created here corresponds to a HTTP message using API disclosed by the service A. API for creating a new album or changing security for an existing album is different for each service. Thus the relay apparatus is provided with a program for creating the new album creating request or album security changing request in accordance with each service. More specifically the relay apparatus includes the URL obtaining program for service A for creating the new album creating request or album security changing request for service A and the URL obtaining program for service B for creating the new album creating request or album security changing request. The relay apparatus uses these programs and creates the new album creating request or album security changing request corresponding to each service.

The information included in the new album creating request or album security changing request created here may differ depending on each service. When the information for identifying the storing position of the electronic file for the service is required such as album ID in addition to the album name to newly create the album on the service side an album ID corresponding to the album name identified by the user is included in the new album creating request or album security changing request. Moreover if information for identifying the storing position of the electronic file of the service such as a folder name is required in order to identify the new album creating request or album security changing request on the service side the folder name corresponding to the album name identified by the user is included in the new album creating request or album security changing request. Attachment information such as album ID folder name and the like corresponding to the album name inputted by the user is stored in the storage unit in advance. The relay apparatus utilizes the required attachment information to create the new album creating request or album security changing request in accordance with each service.

The service providing apparatus that has received the new album creating request or album security changing request transmits a notification of completion to the relay apparatus when the new album has been created or the security has been changed for the existing album U . The multi function apparatus then receives through the relay apparatus the notification of completion for creating a new album or for changing the album security U .

After the new album is created or the security setting is changed a process of uploading the electronic file is performed. The multi function apparatus controls the scanning unit by the control unit reads an image and creates an electronic file from the read image data U . The multi function apparatus then transmits a request for obtaining an upload destination URL to the relay apparatus U . The request for obtaining an upload destination URL includes service identifying information for identifying the service selected by the user and user identifying information for identifying the user.

The relay apparatus that receives the request for obtaining upload destination URL transmits the request for upload destination URL to the service providing apparatus for the service selected by the user U . The relay apparatus identifies the service and user based on the service identifying information and user identifying information included in the request for obtaining upload destination URL received by the multi function apparatus . The relay apparatus then creates the request for upload destination URL corresponding to the service and user and transmits them to the service providing apparatus . Here the relay apparatus creates the request for upload destination URL in accordance with the program corresponding to the service designated by the user.

More specifically when the service A is designated by the user the relay apparatus creates the request for upload destination URL corresponding to the service A in accordance with the URL obtaining program for service A stored in the storage unit and transmits the created request to the service providing apparatus A. Note that the request for upload destination URL created here corresponds to a HTTP message using API disclosed by the service A. API for obtaining URL of upload destination is different for each service. Thus the relay apparatus is provided with a program for creating the request for upload destination URL corresponding to each service. More specifically the relay apparatus includes a URL obtaining program for service A for creating the request for upload destination URL for service A and a URL obtaining program for service B for creating the request for upload destination URL for service B. The relay apparatus uses the programs to create the request for upload destination URL corresponding to each service.

The information included in the request for upload destination URL created here may be different for each service. If information for identifying storing position of an electronic file for the service such as album ID is required in order to identify the upload destination URL on the service side the album ID for an album used by the user is included in the request for upload destination URL. Moreover if the information for identifying the storage position of the electronic file of the service such as a folder name is required to identify the upload destination URL on the service side the folder name used by the user is included in the request for upload destination URL. The attachment information such as the album ID a folder name and the like used by the user are stored in advance in the storage unit . The relay apparatus uses necessary attachment information to create the request for upload destination URL in accordance with each service.

The service providing apparatus that received the request for upload destination URL transmits the URL corresponding to the request for upload destination URL to the relay apparatus as the upload destination URL U .

The relay apparatus that receives the upload destination URL creates a template of an upload message to be transmitted from the multi function apparatus to the service providing apparatus U . The upload message is a message for requesting uploading to the electronic file storing service.

In order to create a template appropriate for various services the relay apparatus includes a program for creating a template for each service. More specifically the relay apparatus includes a template creating program for service A and a template creating program for service B.

The relay apparatus which obtains the upload destination URL at U and creates a template for upload message at U transmits the upload destination URL received from the service providing apparatus and the created template to the multi function apparatus U .

The multi function apparatus creates an upload message based on the template obtained from the relay apparatus U . The upload message to be created includes the upload destination URL obtained from the relay apparatus and binary data of the electronic file for the read image. The multi function apparatus can create an upload message corresponding to each service only by storing the binary data of electronic file the upload destination address and the data size for the electronic file at a predetermined position in the template received from the relay apparatus .

The multi function apparatus that creates the upload message transmits an upload message to the service providing apparatus for the service selected by the user U . Accordingly the user of multi function apparatus can upload the electronic file of a desired image for a desired service.

The service providing apparatus that receives the upload message transmits a response message indicating an upload result to the multi function apparatus U . The response message is also different for each service. Thus the multi function apparatus cannot decrypt the response message. Note that the upload result corresponds to information indicating whether or not the electronic file has been normally uploaded. In the case where the electronic file has normally been uploaded the upload result includes information indicating an ID for the electronic file.

Since the multi function apparatus cannot decrypt the response message the upload result cannot be displayed on the display unit as it is. Thus the multi function apparatus transmits a request for decryption hereinafter also referred to as decryption request to the relay apparatus U for the relay apparatus to decrypt the response message. In the message for the decryption request the response message received by the multi function apparatus is stored as it is.

The relay apparatus that receives the decryption request creates the result of decrypting the response message U . More specifically the relay apparatus extracts the upload result included in the response message and creates a message which includes the upload result and has a form decryptable by the multi function apparatus as the decryption result. The decryption result is created based on the program corresponding to the service designated by the user. More specifically if the service designated by the user is service A the relay apparatus creates the decryption result based on the decrypting program for service A stored in the storage unit . If on the other hand the service designated by the user is service B the relay apparatus creates the decryption result based on the decrypting program for service B stored in the storage unit .

The relay apparatus which creates the decryption result transmits the decryption result created for the multi function apparatus U .

After the electronic file has been uploaded notifying processing is executed for the user authorized to access the album in which the electronic file has been uploaded and updated.

First the multi function apparatus transmits the request for obtaining URL for the album hereinafter also referred to as album URL obtaining request to the relay apparatus U . The album URL obtaining request is for obtaining the list of album URLs included in the service selected by the user. In addition a request is made for obtaining information on the security setting for the album.

The relay apparatus which receives the album URL obtaining request transmits the album URL request to the service providing apparatus for the service selected by the user U . The relay apparatus makes a request for the list of albums included in the service selected based on the service identifying information and user identifying information included in the album URL obtaining request received from the multi function apparatus . At that time the relay apparatus creates the album URL request in accordance with the program corresponding to the service designated by the user.

Here the relay apparatus is provided with a URL obtaining program for each service designated by the user which makes the relay apparatus create an album URL request corresponding to the service and transmit it to the service providing apparatus . This is similar to the case with the request for upload destination URL U described above and thus will not be described in detail.

The service providing apparatus which receives the album URL request transmits a URL corresponding to the received album URL request to the relay apparatus as the album URL U .

The relay apparatus which receives the album URL transmits the received album URL to the multi function apparatus . The relay apparatus also transmits security setting for the album U .

Next the multi function apparatus transmits an electronic file URL obtaining request for obtaining URL for the electronic file stored in the obtained album U . The electronic file URL obtaining request is for obtaining a list of the electronic file URLs included in the album selected by the user.

The relay apparatus which receives the request for obtaining electronic file URL transmits the electronic file URL request to the service providing apparatus for the service selected by the user S . The relay apparatus makes a request for a list of electronic files for the images included in the album selected based on the album identifying information and user identifying information included in the electronic file URL obtaining request received from the multi function apparatus . At that time the relay apparatus creates an electronic file URL request in accordance with the program corresponding to the service designated by the user.

Here the relay apparatus is provided with the URL obtaining program for each service designated by the user which makes the relay apparatus create the electronic file URL request corresponding to the service and transmit it to the service providing apparatus . This is similar to the case with the upload destination URL request U described above and thus will not be described in detail.

The service providing apparatus which receives the electronic file URL request transmits the URL corresponding to the received electronic file URL request to the relay apparatus as the electronic file URL U .

The relay apparatus which receives the electronic file URL transmits the received electronic file URL to the multi function apparatus U .

An e mail or facsimile data is created including the album URL and electronic file URL received by the processing described above U and the e mail or facsimile data is sent to the user who is authorized to the album and electronic file by the security setting for the album U .

The above description with reference to the sequence diagram is a mere example and is not to limit the present invention. In a service which requires mapping of the uploaded electronic file to a predetermined album after the electronic file is uploaded as with flickr registered trademark for example the relay apparatus performs the following process for U above. The relay apparatus which receives the decryption request decrypts the response message from the service providing apparatus while sending an instruction for mapping the uploaded electronic file to a predetermined album to the service providing apparatus . Thereafter the relay apparatus may send instead of the decryption result the information indicating that the electronic file has been uploaded to the album for which mapping is instructed to the service providing apparatus to the multi function apparatus .

Next referring to operation of the multi function apparatus will be described in detail. When the power of the multi function apparatus is turned on the control unit of the multi function apparatus starts a main process illustrated in in accordance with a main processing program stored in the ROM .

First the control unit shows a menu item selection screen on the display and accepts selection of a menu item by the user S . On the menu item selection screen a plurality of menu items are displayed. The user can select a desired menu item by operating the operation unit . The plurality of menu items include at least upload download and register in telephone directory. 

The upload is a menu item selected in uploading a desired electronic file to the electronic file storing service. The download is a menu item for downloading a desired electronic file from the electronic file storing service. Furthermore the register in telephone directory is a menu item for registering information on a registrant.

After the selection for a menu item made by the user is accepted the control unit determines whether the selected menu item is upload S .

If the selected menu item is upload S YES the control unit performs a security setting process S and then an uploading process S . Furthermore the control unit determines whether or not an error flag is set S .

If the selected menu item is not upload S NO the control unit determines whether the selected menu item is download or not S .

If the selected menu item is download S YES the control unit performs a downloading process S . The downloading process is for downloading an electronic file from the service selected by the user.

If the selected menu item is not download S NO the control unit determines whether the selected menu item is register in telephone directory or not S .

If the selected menu item is register in telephone directory S YES the control unit performs a telephone directory registering process S . If the selected menu item is not register in telephone directory S NO the control unit performs a process in accordance with the selection of another menu item S .

After any one of the steps S S S and S have been performed or when the error flag is on S YES the control unit determines whether or not the power is turned off by the user S . If the power has not been turned off by the user S NO the control unit returns back to the step S above and repeats the processing from steps S to S described above. If the power has been turned off S YES the control unit turns off the power supply of the multi function apparatus and terminates the main process.

Next referring to the telephone directory registrating process S described above will be explained in detail. When the telephone directory registrating process S is started the control unit displays a screen for entering a name on the display unit to accept a registrant s name inputted by the user.

The control unit determines whether or not the input of the registrant s name has been completed S . If the input of the registrant s name has not been completed S NO the control unit waits until such information is inputted. If the input of the registrant s name has been completed S YES the control unit stores therein the registrant s name in the RAM S .

Next the control unit makes the display unit display a screen for entering a telephone number to accept input of a registrant s telephone number. The control unit determines whether or not the input of the registrant s telephone number has been completed S . If the input of the registrant s telephone number has not been completed S NO the control unit waits until such information is input. If the input of the registrant s telephone number has been completed S YES the control unit stores the registrant s telephone number in RAM S .

Subsequently the control unit makes the display unit display a screen for entering an e mail address to accept a registrant s e mail address inputted by the user. The control unit determines whether or not the input of the registrant s e mail address has been completed S . If the input of the registrant s e mail address has not been completed S NO the control unit waits until such information is inputted. If the input of the registrant s e mail address has been completed S YES the control unit stores the registrant s e mail address in the RAM S .

Next the control unit makes the display unit display on a screen for entering a facsimile number to accept a registrant s facsimile number input by the user. The control unit determines whether or not the input of the registrant s facsimile number has been completed S . If the input of the registrant s facsimile number has not been completed S NO the control unit waits until such information is inputted. If the input of the registrant s facsimile number has been completed S YES the control unit stores the registrant s facsimile number in the RAM S .

Next the control unit makes the display unit display a screen for entering an account for the service to accept input of the account by the user if the registrant s account exists in the service. The control unit determines whether or not the input of account has been completed S . If the input of account has not been completed S NO the control unit is put in a wait state. If the input of account has been completed S YES the control unit stores an account of the registrant for the target service in the RAM S . The input of account as described above is thus performed for each service S and the processing moves on to security setting when all the accounts have been inputted S NO .

The processing from the step S is for notifying the registrant who is authorized to view the service that the electronic file of an image has been uploaded to the service. First if the registrant in the telephone directory is to be notified of the uploading when the security is set to disclose the album to which the electronic file is uploaded S YES the control unit stores ON i.e. notify in the RAM as an option for notification to the registrant at the time of disclosure S . If the registrant in the telephone directory is not to be notified even when the security is set to disclose the uploaded electronic file S NO the control unit stores OFF i.e. unnotify in the RAM as an option for notification to the registrant at the time of disclosure S .

After notify or unnofity at disclosure is set by the processing of the step S or S the control unit stores the registrant s name telephone number e mail address facsimile number and account for service as well as the setting information on notify unnofity option at disclosure in the storage unit as a telephone directory S and terminates the processing.

Subsequently referring to the process of security setting will be described in detail. When the processing is started the control unit makes the display unit display a screen for selecting a service to accept selection of a service the user wishes to use S . In the present embodiment the user can select a desired service between the service A and service B. If either one of the services is selected the control unit stores information for identifying the service selected by the user in the RAM. On the screen as shown in the user may scroll the screen display and click a desired service to make a selection.

Next if the security setting is not performed on the selected service for each album S NO the processing is terminated. Here the security can also be set for an electronic file. If the security setting is performed for each album S YES the control unit makes the display unit display a screen for selecting an album to urge the user to select one of the existing albums or to select creation of a new album. On the screen illustrated in the user may scroll the screen display as needed and click a desired album to make a selection. If a new album is not to be created S NO the processing moves on to the step S described later. If a new album is to be created S YES the control unit inputs an album name of the album to be newly created S .

In the subroutine processing for album security setting the control unit makes the display unit display a screen for selecting security in which setting i.e. disclosure or nondisclosure of the selected album is made to accept selection for security setting by the user S . On the screen shown in a screen provided with a check box for each setting of nondisclosure disclosure and limited disclosure is displayed. Setting is performed by the user selecting any one of the check boxes. Here disclosure means that the album is open to public and thus can be viewed by all users. On the other hand limited disclosure means that the album is disclosed only to specific registered users.

If the album is not to be disclosed S NO the user selects the check box for nondisclosure on the security selecting screen to make the security setting for the album set as nondisclosure S . If the album is to be disclosed S YES the user selects a check box for either disclosure or limited disclosure on the security selecting screen S . If the user selects disclosure not limited disclosure S NO he she selects the check box for disclosure on the security selecting screen to make the security setting for the album open to public S . If the user wishes the limited disclosure S YES he she selects the check box for limited disclosure on the security selecting screen . Accordingly the control unit makes the display unit display a user selecting screen showing a list of users who have been registered in the telephone directory. The user scrolls the screen display as needed and clicks to select a user to perform setting of a user users to whom the contents of album is to be disclosed S .

After performing the steps S S or S the control unit stores in the RAM the information on album security setting made by the user S and terminates the processing.

When the input of an album name to be newly created S and the security setting for album S have been completed the control unit transmits a request for newly creating an album to the relay apparatus S U in the sequence diagram . Next it is determined whether or not a notification of completion notifying the user that the creation of a new album is completed has been received from the service providing apparatus S . If the notification of completion for creation of a new album has not been received from the service providing apparatus S NO the control unit waits until the notification of completion is received. If the notification of completion for creation of a new album has been received from the service providing apparatus S YES the control unit transmits a request for obtaining a list of albums to the relay apparatus S and determines whether or not the list of albums has been received from the service providing apparatus S . If the list of albums has not been received from the service providing apparatus S NO the control unit waits until the list of albums is received. If the list of albums has been received from the service providing apparatus S YES the control unit makes the display unit display the album selecting screen to accept a selection of an album by the user S .

If the user selects an album on the album selecting screen the control unit makes the display unit display a screen for changing security for the selected album. The control unit determines whether or not the user instructed to change the security for the selected album S . The user selects change or no change on the screen shown in . If the security for album is not to be changed S NO the security setting process is terminated. If the security for album is to be changed S YES the control unit performs a subroutine process for album security setting as described earlier S .

The security setting changed by the subroutine process for album security setting is transmitted to the relay apparatus by the control unit in response to the request for changing album security S U in the sequence diagram . It is determined whether or not the notification of completion for album security changing has been received from the service providing apparatus S . If the notification of completion has not been received S NO the control unit waits until the notification of completion is received.

If the notification of completion has been received S YES the control unit terminates the security setting process.

Next the uploading process will be described in detail with reference to . When the uploading process is started the control unit makes the display unit display a screen for selecting scan or media for the user to select how the electronic file is to be uploaded S . As selection items for the manner of uploading the items of scan and media are displayed. The item scan is to read an image printed on a paper by the scanning unit and upload the electronic file for the image to the service. The item media is on the other hand to select a desired electronic file among electronic files pre stored in the memory card and upload the selected electronic file to the service.

If the user selects scan S YES the control unit makes the display unit display an input screen for reading setting to accept input for reading setting by the user S . The reading setting corresponds to various kinds of settings to decide for example if the image printed on a paper is to be read with color or monochrome how much resolution is to be used in reading and the like.

When the user places a paper on which a predetermined image has been recorded at the scanning unit and presses a button on the operation unit for start reading the control unit makes the scanning unit read the image recorded on the paper and creates an electronic file from the read image data S U of the sequence diagram . Here the scanning unit performs reading in accordance with the setting used at the step S.

If on the other hand the user selects media S NO the control unit makes the display unit display a screen for selecting a desired electronic file among the electronic files stored in the memory card to accept selection of the electronic file by the user S .

After step S or step S the control unit transmits a request for obtaining an upload destination URL to the relay apparatus S U in the sequence diagram . The request for obtaining upload destination URL includes service identifying information user identifying information and information on the album selected by the user at the step S in . For the service identifying information the service identifying information stored in the RAM at step S is used. In the storage unit the user identifying information for identifying the user of the multi function apparatus is stored in advance. For the user identifying information for the request for obtaining upload destination URL the user identifying information stored in the storage unit is used. In the case where more than one users share one multi function apparatus a log in process for the user is performed in a well known manner after the user selects the menu item of upload to identify the user identifying information of the user who is currently operating. Through the request for obtaining upload destination URL the file to be uploaded is associated with the album selected at the step S.

After the request for obtaining upload destination URL is transmitted the control unit determines whether or not the template for the upload message and upload destination URL have been received from the relay apparatus that transmits the request for obtaining upload destination URL at the step S S .

If the template and upload destination URL have not been received from the relay apparatus S NO the control unit waits until such information is received.

If the template and upload destination URL have been received from the relay apparatus S YES the control unit creates an upload message based on the received template the received upload destination URL and the electronic file created at the step S or the electronic file selected at the step S S . The upload message is created as in the description for U in the sequence diagram .

After the upload message is created the control unit transmits the upload message to the service providing apparatus for the service selected by the user S U in the sequence diagram .

Next it is determined whether or not the response message indicating the result of uploading has been received from the service providing apparatus S .

If the result of uploading has not been received from the service providing apparatus S NO the control unit waits until the result of uploading is received.

If the result of uploading has been received from the service providing apparatus S YES the control unit transmits a request for decryption to the relay apparatus S . The request for decryption includes the response message received from the service providing apparatus . Moreover the request for decryption also includes the service identifying information for identifying the service selected by the user.

Next the control unit determines whether or not the result of decryption has been received from the relay apparatus S . If the result of decryption has not been received from the relay apparatus S NO the control unit waits until the result of decryption is received.

If the result of decryption has been received from the relay apparatus S YES the control unit confirms the received result of decryption S . If the result of decryption is not normal completion S NO the control unit determines whether or not the result of decryption has an allowable error with which the processing can continue or an unallowable error with which the processing cannot continue S . The unallowable error corresponds to the case where abnormality has occurred in the service providing apparatus or network and thus communication with the service providing apparatus can not be performed normally. The allowable error corresponds to the case where for example the communication with the service providing apparatus is normally performed but the uploaded electronic file can not be normally transmitted for some reason.

If the result of decryption transmitted from the relay apparatus corresponds to an unallowable error S NO the control unit controls the display unit based on the result of decryption and displays the fact that such an error has occurred S . An error flag is then set S and the processing is terminated. If the result of decryption corresponds to an allowable error S YES the control unit stores in the storage unit the fact that such an error has occurred S . The processing is then moved on to the step S.

If it is determined that the result of decryption is normal completion S YES or if the storage unit stores the fact that the allowable error has occurred S it is determined whether or not there is another image to be read by the scanning unit or whether or not there is another electronic file to be uploaded in the memory card S . Here if there is an electronic file concerning the image to be read by the scanning unit or if there is an electronic file to be uploaded in the memory card S YES the processing moves on to the step S. If there is no image to be read by the scanning unit and there is no electronic file to be uploaded in the memory card S NO the processing is terminated.

Next the notifying process S will be described in detail with reference to . When the notifying process S is started the control unit transmits a request for obtaining the list of album URLs and security setting information to the relay apparatus S U in the sequence diagram .

Subsequently the control unit determines whether or not the result of request has been received from the relay apparatus S . If the result of request has not been received from the relay apparatus S NO the control unit waits until the result of request is received. If the result of request has been received from the relay apparatus S YES the control unit stores the list of album URLs and security setting information in the RAM S .

Next the control unit transmits the request for obtaining the list of electronic file URLs in the album uploaded in the uploading process S to the relay apparatus S U in the sequence diagram . Subsequently the control unit determines whether or not the result of request has been received from the relay apparatus S . If the result of request has not been received from the relay apparatus S NO the control unit waits until the result of request is received. If the result of request has been received from the relay apparatus S YES the control unit stores the list of electronic file URLs in the album uploaded to the RAM S .

Next the control unit determines whether or not the security setting for the album to which the electronic file is uploaded corresponds to the limited disclosure S . If it does not correspond to the limited disclosure S NO the processing is terminated. If it corresponds to the limited disclosure S YES the control unit determines whether or not it is necessary to notify the user who is authorized to the limited disclosure S . If the notification is not required S NO the processing is terminated.

If the notification is required S YES the control unit determines whether or not the user who is authorized to the limited disclosure is notified by an e mail S . If the notification by e mail is selected S YES the control unit creates an electronic mail with an album URL and an electronic file URL S and transmits it to the user who is authorized to the limited disclosure S . If the notification by e mail is not selected S NO the control unit creates a text for facsimile transmission with the album URL and electronic file URL attached S and transmits it by facsimile to the user who is authorized to the limited disclosure S .

Referring now to the operation of the relay apparatus will be described below in detail. When the relay program stored in the storage unit is started the control unit in the relay apparatus starts the processing at the relay apparatus as illustrated in in accordance with various types of programs stored in the storage unit .

When the processing is started the control unit first determines whether or not the request for obtaining upload destination URL has been received from the multi function apparatus S .

If it is determined that the request for obtaining upload destination URL has been received S YES the control unit obtains an upload destination URL from the service providing apparatus S U U in the sequence diagram . More specifically the control unit executes a program corresponding to the service identifying information included in the received request for obtaining upload destination URL and transmits the request for upload destination URL to the service providing apparatus U in the sequence diagram to obtain the upload destination URL U in the sequence diagram . Subsequently the control unit transmits the upload destination URL received from the service providing apparatus and the created template to the multi function apparatus S and the processing returns back to the step S.

If the request for obtaining upload destination URL has not been received S NO the control unit determines whether or not the request for decryption has been received from the multi function apparatus S .

If it is determined that the request for decryption has been received from the multi function apparatus S YES U in the sequence diagram FIG. the control unit creates the result of decryption based on the response message included in the request for decryption S . Here the control unit creates the result of decryption in accordance with the program corresponding to the service selected by the user. The control unit can identify the service selected by the user based on the service identifying information included in the request for decryption.

After creating the result of decryption the control unit transmits the created result of decryption to the multi function apparatus S and the processing returns back to the step S.

If it is determined that the request for decryption has not been received S NO the control unit determines whether or not the list of album URLs and the request for obtaining security information have been received from the multi function apparatus S .

If it is determined that the list of album URLs and the request for obtaining security information have been received S YES the control unit obtains the list of album URLs and security information from the service providing apparatus S U U in the sequence diagram .

Next the control unit transmits the list of album URLs and security information obtained from the service providing apparatus to the multi function apparatus S and the processing returns back to the step S.

If it is determined that the list of album URLs and the request for obtaining the security information have not been received S NO the control unit determines whether or not the request for obtaining the list of electronic file URLs has been received from the multi function apparatus S .

If it is determined that the request for obtaining the list of electronic file URLs has been received S YES the control unit obtains information on the list of electronic file URLs from the service providing apparatus S . Subsequently the control unit transmits the information on the list of electronic file URLs obtained from the service providing apparatus to the multi function apparatus S and the processing returns back to the step S.

If it is determined that the request for obtaining the list of electronic file URLs has not been received S NO the control unit determines whether or not the request for creating album has been received from the multi function apparatus S .

If it is determined that the request for creating album has been received S YES the control unit transmits the request for newly creating album for the service in the service providing apparatus S transmits a notification of completion of album creation to the multi function apparatus S and the processing returns back to the step S.

If it is determined that the request for creating album has not been received S NO the control unit determines whether or not the request for changing security for album has been received from the multi function apparatus S .

If it is determined that the request for changing security for album has been received S YES the control unit transmits the request for changing security setting for the existing album for the service in the service providing apparatus S transmits a notification indicating that the change has been completed to the multi function apparatus S and the processing returns back to the step S.

If it is determined that the request for changing security for album has not been received S NO the control unit performs another processing S and the processing returns back to the step S. An example of another processing includes relaying of communication between the multi function apparatus and the service providing apparatus performed when a desired electronic file is downloaded from the service by the multi function apparatus .

As described above the multi function apparatus performs the telephone directory registering process S to allow the service account information user s e mail address facsimile number and the like to be registered in the storage unit in which the telephone directory information is stored. By performing the security setting process S requests can be made to the relay apparatus for creating a new file or changing the disclosure condition of an existing file S S . The uploading process S allows an electronic file to be uploaded to the service providing apparatus S . When the album for the upload destination of the electronic file is disclosed only to specific users i.e. when the album is set with the condition of limited disclosure S YES the notifying process is performed S to notify the user who is authorized to the limited disclosure that the electronic file is uploaded based on the information on the user to be notified. Moreover the album URL and electronic file URL can be notified to the user who is authorized to disclosure of the album in accordance with the disclosure condition of the uploaded album among the users registered in the storage unit S S . Accordingly new creation of album storing an electronic file setting of disclosure condition and changing of disclosure condition for an existing album can be performed for the electronic file storing service without a terminal apparatus such as a personal computer having a fulfilling web browser function.

In the case where a change in the disclosure condition is required to a new album the security setting process is performed so that the name of the new album can be inputted when an album name is to be inputted for the target album S . If an existing album is to be required a change for its disclosure condition a request for the list of albums is made to the relay apparatus S and thus a target album can be selected from the obtained albums S . If the limited disclosure in which the disclosure is allowed to only a part of the users is selected in selecting album security S YES the subroutine process for album security selection is performed S S to select a disclosure condition for album. Moreover if the selection is made as the limited disclosure in which the disclosure is allowed to limited users a user who is authorized to view the album can be selected among the users having accounts in the target service registered in the storage unit S . A request of setting can be made to the service for the album name of the target album inputted at step S or the target album selected at step S the disclosure condition of the target album selected at the steps S and S and the target user who is authorized to the disclosure and is selected by the selection of authorized user S . Furthermore by the telephone directory registering process S in the case where the limited disclosure is set for the security setting for the album when the electronic file is uploaded selection can be made whether or not the user who is authorized to the limited disclosure is to be notified S .

The service providing apparatus in the embodiment above is an example of the service providing apparatus according to the claims of the invention. The multi function apparatus in the embodiment above is an example of the communication apparatus according to the claims of the invention. The service cooperation system in the embodiment above is an example of the communication apparatus system according to the claims of the invention. The storage unit in the embodiment above is an example of the storage unit according to the claims of the invention. The control unit performing the step S in the embodiment described above is an example of the security setting unit according to the claims of the invention. The control unit performing the step S is an example of the upload processing unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the notification processing unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the new album name input unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the album selecting unit according to the claims of the invention. The control unit performing the steps S S and S is an example of the album security selecting unit according to the claims of the present invention. The control unit performing the step S in the embodiment above is an example of the authorized user selecting unit according to the claims of the invention. The control unit performing steps S and S in the embodiment above is an example of the album creation change requesting unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the album list requesting unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the album information requesting unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the electronic file URL list requesting unit according to the claims of the invention. The control unit performing the step S in the embodiment above is an example of the notification determining unit according to the claims of the invention. The control unit performing the steps S S and S in the embodiment above is an example of the notifying unit according to the claims of the invention. The URL obtaining programs for service A and for service B in the embodiment above are examples for the upload destination program. The storage unit in the embodiment above is an example of the upload destination program storage unit. U in the above embodiment is an example of the security setting requesting unit.

The present invention is not limited to the embodiments described above but can be modified in various manners within the scope of the outline of the present invention.

Though URL is used for explanation as the address of upload destination in the embodiment above the present invention is not limited thereto.

Moreover in the embodiment described above though the multi function apparatus is described to transmit the decryption request to the relay apparatus at the step S in the uploading process the present invention is not limited thereto. For example the processing between the steps S to S may be eliminated.

In addition in the embodiment described above the processing of the step S in the notifying process may be eliminated and thus the step S is performed subsequent to the step S. In such a case the album for which the electronic file is uploaded can be open not only to limited users but also to any users. Accordingly at the step S it may also be set to determine whether or not a notification should be given to users authorized to limited disclosure or all registrants stored in the telephone directory in the storage unit .

Furthermore though the embodiment above described that the service cooperation system is provided with the multi function apparatus and relay apparatus the present invention is not limited thereto. The relay apparatus can be removed from the service cooperation system . Here in the ROM of the control unit included in the multi function apparatus plural software modules are stored such as the URL obtaining program for service A template creating program for service A decrypting program for service A URL obtaining program for service B template creating program for service B and decrypting program for service B. Here the request for newly creating album S the request for obtaining the list of albums S the request for changing security setting for albums S the request for obtaining upload destination URL S the request for obtaining list of album URLs and security setting information S and the request for obtaining the list of electronic file URLs that are made to the relay apparatus are directly transmitted to the service providing apparatus from the multi function apparatus . Here the multi function apparatus creates various requests in accordance with the program corresponding to the service designated by the user.

Furthermore the template for the upload message U in the sequence diagram and the decryption result U of the sequence diagram that are created by the relay apparatus are created in accordance with the program corresponding to each service by the multi function apparatus . Moreover since the response message outputted to the service providing apparatus is decrypted by the decrypting program for various services stored in the multi function apparatus transmission of the decryption request S and reception of the decryption result S are not performed. In addition notification of new album creation S reception of the list of albums S notification of completion of change in security setting of album S reception of template for upload message and upload destination URL S reception of the list of album URLs and security setting information S and reception of the list of electronic file URLs are performed directly from the service providing apparatus to the multi function apparatus .

In the communication apparatus the security setting unit includes a new album name input unit inputting an album name of a target album when the target album for which a request is made to change the disclosure condition is a new album an album selecting unit selecting a target album when the target album for which a request is made to change the disclosure condition is an existing album an album security selecting unit selecting a disclosure condition of the target album an authorized user selecting unit selecting a target user to be authorized to a disclosure among users having account information in the storage unit when the album security selecting unit selects a limited disclosure condition disclosing an album to a limited user and an album creation change requesting unit requesting the electronic file storing service to set the album name of the target album inputted from the new album name input unit or the target album selected by the album selecting unit the disclosure condition of the target album selected by the album security selecting unit and the target user to be authorized to a disclosure selected by the authorized user selecting unit.

In the communication apparatus the security setting unit further includes an album list requesting unit requesting the electronic file storing service to obtain a list of albums when the target album for which a request is made to change the disclosure condition is an existing album and the album selecting unit selects the target album from the list of albums obtained by the album list requesting unit.

In the communication apparatus the notification processing unit includes an album information requesting unit transmitting a request for obtaining a list of download URLs of albums and a disclosure condition for each of the albums from the service providing apparatus an electronic file URL list requesting unit transmitting a request for obtaining a list of download URLs of the electronic files stored in the albums to which the electronic files are uploaded a notification determining unit determining when the album to which the electronic file is uploaded is set as a limited disclosure disclosing the album to a limited user whether or not a notification of the download URL is to be given in accordance with uploading of the electronic file and a notifying unit giving a notification by a predetermined notifying method when the notification determining unit determines that the notification is to be given.

In the communication apparatus determination by the notification determining unit of whether or not a notification is given is pre stored in the storage unit.

The disclosure condition of the target album which is either a newly created album or an existing album can be selected. If the disclosure condition for the target album is a limited disclosure the target user to be authorized to the disclosure can be selected. Moreover when selecting a target album from existing albums the list of albums may be obtained to select the target album.

A notification may be given after determination is made on whether or not the target user is notified of the download URL in accordance with the uploading of the electronic file.

As this invention may be embodied in several forms without departing from the spirit of essential characteristics thereof the present embodiment is therefore illustrative and not restrictive since the scope of the invention is defined by the appended claims rather than by the description preceding them and all changes that fall within metes and bounds of the claims or equivalence of such metes and bounds thereof are therefore intended to be embraced by the claims.

