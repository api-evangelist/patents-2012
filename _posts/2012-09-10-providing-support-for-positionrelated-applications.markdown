---

title: Providing support for position-related applications
abstract: A method of providing position support to a main processor of a computing device is disclosed. The method may include receiving primary position data from a sensor at a sensor controller. The method may also include analyzing, via the sensor controller, the primary position data to determine secondary position data. The method may also include formatting, via the sensor controller, the secondary position data. The method may also include aggregating, via the sensor controller, the formatted position data. The method may also include providing, via a single channel interface between the sensor controller and the main processor, the aggregated position data to an operating system installed on the main processor. The method may also include communicating, via a driver installed on the operating system, the position data to an application installed on the operating system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08997121&OS=08997121&RS=08997121
owner: Intel Corporation
number: 08997121
owner_city: Santa Clara
owner_country: US
publication_date: 20120910
---
This disclosure relates generally to providing support to an operating system for positioning related applications. More specifically this disclosure relates to a sensor microcontroller configured to gather position related contextual data from a sensor and provide the data to at least one driver installed on the operating system.

Some computer operating systems OS do not provide support for positioning sensors except through a physical Serial COM Port Interface. For example some versions of Microsoft Windows may allow applications such as Microsoft Streets Trips and Google Earth to use the application programming interface API associated with the physical Serial COM Port Interface. The physical Serial COM Port Interface in turn is connected with a global positioning system GPS enabled device. However additional position related application programming interfaces API s may be available but may not be suited for use through the Serial COM Port Interface API.

The same numbers are used throughout the disclosure and the figures to reference like components and features. Numbers in the 100 series refer to features originally found in numbers in the 200 series refer to features originally found in and so on.

As discussed above the present techniques relate generally to providing support to an operating system for position related applications. In some examples a method for providing position data to position related applications is disclosed. The method may collect position data from one or more sensors configured to provide position data to a sensor controller. The method may also include analyzing and formatting the position data at the sensor controller. The analyzed and formatted position data may be then be provided to the operating system. The operating system may include one or more drivers to communicate the position data to the position related applications.

In the following description and claims the terms coupled and connected along with their derivatives may be used. It should be understood that these terms are not intended as synonyms for each other. Rather in particular embodiments connected may be used to indicate that two or more elements are in direct physical or electrical contact with each other. Coupled may mean that two or more elements are in direct physical or electrical contact. However coupled may also mean that two or more elements are not in direct contact with each other but yet still co operate or interact with each other. Further a sensor controller may also be referred to herein as a sensor controller hub or a sensor hub being communicatively coupled to one or more sensors and a main processor of a computing device.

The memory device can include random access memory e.g. SRAM DRAM zero capacitor RAM SONOS eDRAM EDO RAM DDR RAM RRAM PRAM etc. read only memory e.g. Mask ROM PROM EPROM EEPROM etc. flash memory or any other suitable memory systems. The instructions stored in the memory device and that are executed by the processor may be used to implement a method that includes providing support for position related applications.

The processor may be connected through a system bus e.g. PCI ISA PCI Express HyperTransport NuBus etc. to an input output I O device interface adapted to connect the computing device to one or more I O devices . The I O devices may include for example a keyboard and a pointing device wherein the pointing device may include a touchpad or a touchscreen among others. The I O devices may include a peripheral position device such as a GPS device that may be connected by means of a Serial COM port. The I O devices may be built in components of the computing device or may be devices that are externally connected to the computing device .

The processor may also be linked through the system bus to a display interface adapted to connect the computing device to a display device . The display device may include a display screen that is a built in component of the computing device . The display device may also include a computer monitor television or projector among others that is externally connected to the computing device .

The computing device may also include a storage device . The storage device may include a physical memory such as a hard drive an optical drive a flash drive an array of drives or any combinations thereof. The storage device may also include remote storage drives. The storage device may also include an operating system . The storage device may store instructions thereon to provide position data to the operating system . In some embodiments the operating system may have installed thereon one or more drivers. The drivers enable a piece of hardware or an application installed on the operating system to communicate with the operating system applications or other hardware of the computing device including sensors . The drivers may also be used to enable a sensor controller to communicate position data from the sensors to the application installed on the operating system in accordance with some embodiments. In some embodiments the sensors are connected to processor via bus however in other embodiments the sensors are connected directly to processor via a private bus not shown and communicatively coupled to processor through processor acting as intermediary. In some embodiments the drivers are installed on the memory device . The memory device may include instructions used to provide support to an operating system for position related applications in a similar manner as described in reference to the operating system above.

The sensor controller may include a processor . In some embodiments the processor is distinct from the main processor of the computing device such as the processor . The sensor controller may also include an additional memory or storage device with instructions thereon to provide position data to the operating system .

The processor may execute stored instructions stored on either the memory device and or the storage device and or private memory or storage device to provide position data to the operating system . The instructions may cause the processor to receive primary position data from a sensor that collects position data such as the one or more sensors . The instructions may cause the processor to determine secondary position data based on the primary position data. The instructions may cause the processor to format the primary position data and the secondary position data and may aggregate the formatted position data. The instructions may cause the processor to provide the aggregated position data via a single data channel to at least one driver on the operating system .

The processor may format the position data by removing vendor specific indicators from the primary position data. The vendor specific indicators may be removed in any suitable way which may translate vendor specific format to generic vendor independent format. For example sensors may gather position data formatted with vendor specific registry sets to be used with specific drivers installed on the operating system . In order to enable the operating system to interpret the data without having vendor specific drivers installed on the operating system the processor of the sensor controller may remove vendor specific indicators such as the vendor specific registry sets from the position data received from the one or more sensors .

The processor may also format the primary and secondary position data received from the one or more sensors by packaging the position to enable the operating system to detect individual sensor data in a single channel stream. Formatting the secondary position data to enable an operating system to detect individual sensors may include formatting the secondary position data according to human interface devices HID specifications promulgated by the Universal Serial Bus Implementer s Forum thereby enabling some operating systems to incorporate common device drivers that could be reused between vendors. In particular the HID specifications relating to sensors describe how individual sensors can be aggregated inside a single sensor collection abstraction yet still providing a mechanism whereby it is possible for common device drivers to identify the individual sensors inside the sensor collection as well as the detailed characteristics of each sensor.

The processor may analyze the primary position data to determine secondary position data. The primary position data may be gathered from one or more sensors including an accelerometer a magnetometer a GPS radio sensor a real time clock sensor a compass and the like. In one example analyzing the primary position data includes determining magnetic heading data by relating magnetic flux data to magnetic north data. In another example analyzing the primary position data may include determining true heading data by relating magnetic declination data to the magnetic heading data. As another example analyzing the primary position data may include determining magnetic declination data based on latitude and longitude readings. As another example analyzing the primary position data may include determining a timestamp of the data. As yet another example analyzing the primary position data may include determining clock drift of real time clock data by relating real time clock data to UTC data.

The processor may also aggregate the position data. In some embodiments the processor may aggregate the position data by combining the data into a single data channel or a data signal configured to be communicated via a single data channel. By aggregating the position data a single data channel a single interface may be used such as the system bus thereby simplifying possible hardware designs that may otherwise be implemented if each sensor uses a separate interface. The aggregated position data may include one or more of magnetic heading data magnetic flux data magnetic north data magnetic declination data true heading data real time clock data coordinated universal time UTC data latitude data longitude data or any combination thereof.

The processor may provide the aggregated position data via a single data channel to at least one driver on the operating system . The driver enables the position data to be communicated with the application installed on the operating system . In some embodiments the driver may be a virtual serial port driver configured to provide support to applications using a serial port driver API. The virtual serial port may be configured to enable older applications which may use a physical serial port on the computing device to connect to the operating system and in turn communicate with such applications. The applications that use a physical serial port may be referred to as legacy applications. Thus legacy applications may be configured to use a physical serial port to read position data from a peripheral position device such as a GPS device. In these and other embodiments the virtual serial port may then perform the function of enabling legacy applications to instead use the position data provided from the processor of the sensor controller .

In embodiments the driver is configured to communicate position data to an application either a legacy application or a non legacy application installed on the operating system. In these and other embodiments the legacy application may be an application that is configured to detect a serial port API as discussed above which in turn is configured to communicate to the virtual serial port driver. However some legacy applications may also be configured to connect to a physical serial port of the computing device in exclusive access mode. Exclusive access mode in some operating systems such as Windows 7 for example enable only one legacy application to communicate to the peripheral position device at any given time. Therefore the driver may be a driver stack that includes the virtual serial port driver the driver configured to communicate position data to a legacy application and a position bridge driver to enable a position driver to communicate with a virtual serial port driver in a non exclusive access mode.

The driver may also be a driver configured to communicate position data to a non legacy application. The non legacy applications may be configured to detect position data via API s in addition to the physical serial port API. For example the non legacy application may be configured to detect a location API a sensor API or both. In these and other embodiments the sensor controller may provide the position data to the driver and the driver may be configured to communicate the position data to the non legacy applications. By allowing the position data collected by the one or more sensors to be provided by the sensor controller to the operating system non legacy applications in addition to legacy applications may be enabled to receive position data without the connecting to a peripheral position device.

The block diagram of is not intended to indicate that the computing device is to include all of the components shown in . Further the computing device may include any number of additional components not shown in depending on the details of the specific implementation.

In some embodiments the functions performed as a result of instructions carried out by processor may be coordinated by a system. describes a system including the sensor controller and the operating system which may be included in the computing device of . In addition the system may be incorporated into a personal computer PC laptop computer ultra laptop computer tablet touch pad portable computer handheld computer palmtop computer personal digital assistant PDA cellular telephone combination cellular telephone PDA television smart device e.g. smart phone smart tablet or smart television mobile Internet device MID messaging device data communication device or the like.

As shown in the sensor controller may be communicatively coupled to the operating system and may include the processor . The instructions involved in providing position support to the operating system may be carried about by the processor rather than a main processor such as the processor of the computing device . By including the processor power may be saved in processing the task of providing position data to applications on the operating system .

In operation the position data may include primary position data and secondary position data. The primary position data may include GPS data orientation data heading data acceleration data and the like. The sensor controller of the system may receive primary position data from a sensor such as one of the sensors . The sensor controller may include the processor . The processor may include various software modules configured to carry out functions to provide the position data support.

In one embodiment system may include one or more microdrivers of the processor . The one or more microdrivers may format the primary position data received from the sensors by removing any vendor specific indicators. Each of the one or more microdrivers may be individually coupled with an associated type of sensor to which each is connected. For example a magnetometer microdriver may be coupled to the magnetometer sensor a GPS microdriver may be coupled to the GPS radio sensor and a real time clock microdriver may be coupled to a real time clock sensor . As discussed each of the one or more microdrivers may format primary position data by removing vendor specific indicators including but not limited to vendor registry sets.

The system may also include a sensor manager module of the processor . The sensor manager module may analyze the primary position data gathered by the one or more sensors . The sensor manager module may determine secondary position data based on the primary position data received from one or more of the sensors and formatted by the one or more microdrivers .

As previously discussed in reference to the processor may case the sensor controller to analyze the primary position data to determine secondary position data. The secondary position data may include timestamping of the primary position data true north headings calculated and or determined from primary position data magnetic north headings calculated and or determined from primary position data and the like.

The system may also include one or more HID logical devices of the sensor controller . The one or more HID logical devices may be configured to format the primary position data and the secondary position data determined by the sensor manager module . As previously discussed in reference to the sensor controller may format the primary and secondary position data received from the one or more sensors by packaging the position data to enable the operating system to detect individual sensor data in a single channel stream. The one or more HID logical devices enable the sensor controller to format the secondary position data to enable the operating system to detect individual sensors according to HID specifications. However not all operating systems incorporate common device drivers for all types and kinds of position data and additional drivers may be used.

The system may also include a host manager module of the sensor controller . The host manager module may be configured to aggregate the formatted position data and provide the aggregated position data to the operating system . In these and other embodiments the host manager module aggregates the formatted HID and non vendor specific position data including both primary and secondary position data to enable the sensor controller to provide the formatted position data to the operating system via a single channel interface . By providing the formatted position data to the operating system via a single channel individual communication interfaces from each of the one or more sensors can be eliminated enabling a relatively simple interface between one or more sensors and the operating system .

Once the position data is received by the operating system the position data may be interpreted by the operating system via one or more drivers . As discussed above with reference to the one or more drivers enable the position data to be communicated with an application such as the one or more applications installed on the operating system .

While some operating systems may include a generic driver such as the Host Sensor Class Driver some generic class drivers do not provide support for position data. Therefore a host position driver is provided as well as position bridge driver and virtual serial port driver . In general the drivers each provide some level of support to applications . The host position driver provides driver support for applications when host sensor class driver does not provide such support. Specifically host position driver provides support for a sensor API aware application and a location API aware application when the host sensor class driver does not. For example Microsoft Windows 7 and 8 support position devices only through physical serial COM port interfaces and use the API associated with physical interface even though a location API has been available since at least Windows 7 was released.

In addition to providing support via host position driver the system also enables position data provided by the sensor controller to be provided to legacy GPS application through a virtual serial port driver as opposed to a physical serial port driver not shown . The virtual serial port driver allows the legacy GPS application to communicatively receive position data from the sensor controller via the host position driver and the position bridge driver . The position bridge driver allows communicative coupling between the host position driver and the virtual serial port driver while allowing the legacy GPS application to simultaneously access virtual serial port driver . The simultaneous access is useful because many legacy GPS applications only attach to a driver such as the virtual serial port driver in exclusive access mode. However by including the position bridge driver both the host position driver and the legacy GPS application may use the virtual serial port driver at the same time.

Both driver and are communicatively coupled to the host sensor application programming interface API which in turn is communicatively coupled to sensor API aware application and location API aware application . In some embodiments the operating system may include a host location API configured to communicate position data from the host sensor API to the location API aware application .

The embodiments discussed above with reference to and or may be implemented as a method which may be carried out by a computing device such as the computing device and or the system .

At block position data is received from a sensor at a sensor controller. The position data received from the sensor may be primary position data wherein the term primary may indicate position data which has not been analyzed. In one example receiving primary position data from a sensor block may include receiving magnetic declination reports from satellites.

The process flow continues at block where the primary position data is analyzed via the sensor controller to determine secondary position data. In some embodiments secondary position data may include data determined by analyzing primary position data.

At block the secondary position data may be formatted. In some embodiments formatting the secondary position data block may include removing vendor specific indicators. Formatting the secondary position data may also include formatting the secondary position data to enable to operating system to detect individual sensors may include formatting according to HID specifications thus enabling an operating system to incorporate common device drivers.

At block the formatted position data may be aggregated via the sensor controller. Some operating systems may communicate with sensors via many different interfaces in order to detect signals coming from individual sensors. By formatting the secondary position data block to enable the operating system to detect individual sensors the secondary position data may be aggregated block and provided to a main processor running an operating system via a single channel. Thus at block the aggregated position data is provided to an operating system installed on the main processor via a single channel.

At block the position data may be communicated to an application installed on the operating system via one or more drivers installed on the operating system. Although some operating systems may include common device drivers as discussed in regard to block above some operating systems may not provide common device drivers. Additionally some common device drivers may not include support for specific type of position data as well as specific types of position related applications which may be able to use the position data. Therefore at block the position data is communicated to the application via the driver installed on the operating system.

As described above examples of a computing device may include a personal computer PC laptop computer ultra laptop computer tablet touch pad portable computer handheld computer palmtop computer personal digital assistant PDA cellular telephone combination cellular telephone PDA television smart device e.g. smart phone smart tablet or smart television mobile internet device MID messaging device data communication device and the like.

An example of a computing device may also include a computer that is arranged to be worn or grasped by a person such as a wrist computer finger computer ring computer eyeglass computer belt clip computer arm band computer shoe computer clothing computer pen computer puck computer or any other suitable type of wearable or graspable computer. For example the computing device may be implemented as a smart phone capable of executing computer applications as well as voice communications and or data communications. Although some embodiments may be described with a computing device implemented as a smart phone by way of example it may be appreciated that other embodiments may be implemented using other mobile computing devices as well. The computing device may also include a graphics processing unit CPU that is configured to execute stored instructions and a storage device that stores instructions.

The various software components discussed herein may be stored on the tangible non transitory computer readable medium as indicated in . For example a detection module may be configured to receive primary position data from one or more sensors communicatively coupled to the non transitory computer readable medium .

The non transitory computer readable medium may also include a determination module configured to determine secondary position data based on the primary position data. The determination module may also be configured to format the primary position data and the secondary position data provided to an operating system. In some embodiments the formatting may include removing vendor specific indicators such as vendor registry sets from the primary position data. The formatting may also include packaging the primary and secondary position data to enable an operating system to detect individual sensors.

The non transitory computer readable medium may also include a reporting module . The reporting module may aggregate the formatted position data to be communicated with the operating system via a single data channel. The reporting module may also be configured to provide the aggregated position data via the single data channel to at least lone driver on the operating system.

A computing device is described herein. The computing device may include a processor. The computing device may also include a computer readable medium that stores instructions position that when executed by the processor direct the processor to receive primary position data from a sensor that collects position data. The instructions may also direct the processor to determine secondary position data based on the primary position data. The instructions may also direct the processor to format the primary position data and the secondary position data. The instructions may also direct the processor to aggregate the formatted position data. The instructions may also direct the processor to provide the aggregated position data via a single data channel to at least one driver on the operating system.

The aggregation may be performed after or concurrently with the formatting of the position data. The method may format and aggregate both primary position data and secondary position data. The position data may be gathered from one or more sensors at the computing device. The computing device may be a sensor controller communicatively coupled to a main processor of a main computing device having an operating system installed thereon. The sensor controller may serve as a hub communicatively coupling the sensors to the main processor the main computing device having an operating system installed thereon.

A method is described herein. The method may include receiving prima position data from a sensor at a sensor controller. The method may also include analyzing via the sensor controller the primary position data to determine secondary position data. The method may also include formatting via the sensor controller the secondary position data. The method may also include aggregating via the sensor controller the formatted position data. The method may also include providing via a single channel interface between the sensor controller and the main processor the aggregated position data to an operating system installed on the main processor. The method may also include communicating via a driver installed on the operating system the position data to an application installed on the operating system.

The aggregation may be performed after or concurrently with the formatting of the position data. The method may format and aggregate both primary position data and secondary position data. The position data may be gathered from one or more sensors at the sensor controller. The sensor controller may serve as a hub communicatively coupling the sensors to the main processor of a computing device having an operating system installed thereon.

At least one computer readable medium is described herein. The computer readable medium may have instructions stored therein that in response to being executed on a computing device cause the computing device to receive primary position data from a sensor communicatively coupled to the computer readable medium. The instructions may also cause the computing device to determine secondary position data based on the primary position data. The instructions may also cause the computing device to format the primary and secondary position data to be provided to an operating system. The instructions may also cause the computing device to aggregate the formatted position data. The instructions may also cause the computing device to provide via a single channel the aggregated position data to a driver installed on the operating system.

The at least one computer readable medium may carry out the instructions in a different order. For example the position data may be received concurrently or after secondary position data has been determined for position data previously received. The formatting may also be done before the aggregation. The at least one computer readable medium may also be referred to as the sensor controller. The at least one computer readable medium may provide support to a position related application installed on the operating system.

A system is described herein. The system may include a sensor controller communicatively coupled to a sensor to gather position data. The system may also include and a main processor having an operating system installed thereon the sensor controller to provide the position data from the sensors to an application installed on the operating system. The system may also include a driver installed on the operating system to enable the sensor controller to communicate the position data to the application installed on the operating system.

The system may include more than one sensor. The position data may be analyzed and formatted by the sensor controller before being provided to the main processor having the operating system installed thereon. The system may include more than one application installed on the operating system. The system may also communicate the position data to more than one application via the operating system and the driver installed on the main processor.

Some embodiments may be implemented in one or a combination of hardware firmware and software. Some embodiments may also be implemented as instructions stored on the tangible non transitory machine readable medium which may be read and executed by a computing platform to perform the operations described. In addition a machine readable medium may include any mechanism for storing or transmitting information in a form readable by a machine e.g. a computer. For example a machine readable medium may include read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices or electrical optical acoustical or other form of propagated signals e.g. carrier waves infrared signals digital signals or the interfaces that transmit and or receive signals among others.

An embodiment is an implementation or example. Reference in the specification to an embodiment one embodiment some embodiments various embodiments or other embodiments means that a particular feature structure or characteristic described in connection with the embodiments is included in at least some embodiments but not necessarily all embodiments of the present techniques. The various appearances of an embodiment one embodiment or some embodiments are not necessarily all referring to the same embodiments.

Not all components features structures characteristics etc. described and illustrated herein need be included in a particular embodiment or embodiments. If the specification states a component feature structure or characteristic may might can or could be included for example that particular component feature structure or characteristic is not required to be included. If the specification or claim refers to a or an element that does not mean there is only one of the element. If the specification or claims refer to an additional element that does not preclude there being more than one of the additional element.

It is to be noted that although some embodiments have been described in reference to particular implementations other implementations are possible according to some embodiments. Additionally the arrangement and or order of circuit elements or other features illustrated in the drawings and or described herein need not be arranged in the particular way illustrated and described. Many other arrangements are possible according to some embodiments.

In each system shown in a figure the elements in some cases may each have a same reference number or a different reference number to suggest that the elements represented could be different and or similar. However an element may be flexible enough to have different implementations and work with some or all of the systems shown or described herein. The various elements shown in the figures may be the same or different. Which one is referred to as a first element and which is called a second element is arbitrary.

It is to be understood that specifics in the aforementioned examples may be used anywhere in one or more embodiments. For instance all optional features of the computing device described above may also be implemented with respect to either of the methods or the computer readable medium described herein. Furthermore although flow diagrams and or state diagrams may have been used herein to describe embodiments the techniques are not limited to those diagrams or to corresponding descriptions herein. For example flow need not move through each illustrated box or state or in exactly the same order as illustrated and described herein.

The present techniques are not restricted to the particular details listed herein. Indeed those skilled in the art having the benefit of this disclosure will appreciate that many other variations from the foregoing description and drawings may be made within the scope of the present techniques. Accordingly it is the following claims including any amendments thereto that define the scope of the present techniques.

