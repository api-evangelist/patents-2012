---

title: System and apparatus for locating faults in a cable network
abstract: A range to fault (RTF) module () for use in a system for locating faults in a cable network is discussed. The module includes an input port () for coupling the module to a PIM analyzer. The module () also includes an output port () for connection to the device under test (DUT). In addition to the input () and output () ports the module is provided with a monitor port () for receipt of a PIM signal from the PIM analyzer. The module in this instance also includes two USB ports (), () enabling a serial connection between the PIM analyzer and the module ().
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09225441&OS=09225441&RS=09225441
owner: Kaelus Pty Ltd
number: 09225441
owner_city: Queensland
owner_country: AU
publication_date: 20120321
---
The present invention relates to a device for the detection of faults in a communications network. In particular although not exclusively the present invention relates to a device for the location of passive intermodulation faults in a coaxial cable network.

Passive intermodulation distortion PIM is a form of electromagnetic interference that is often encountered in radio communications systems such as cellular mobile telephone networks. It can arise wherever there are devices or components with nonlinear transfer characteristics. Examples include oxidised metal on metal junctions components containing ferrites such as RF circulators components with sharp metallic edges loose connectors and a myriad of other imperfections such as defective plating dirt and other forms of contamination.

PIM is especially prevalent in full duplex systems where the transmitted and received radio signals are diplexed onto the same feeder cable. In such environments the high power transmit signals generate PIM as they pass through defective components after which the PIM signals then propagate in two directions 

Of the two cases reflected PIM is usually the greater concern. This is because in many situations the frequency of the PIM signal falls within the passband of the base station s receiver resulting in loss of sensitivity and an increased dropped call rate.

PIM faults in cell sites can be difficult and time consuming to diagnose and repair. This is because the interconnection between BTS and antenna can consist of multiple components including feeder cables diplexers filters combiners jumper cables masthead amplifiers and bias tees. Furthermore the radio transceiver and antenna are themselves potential sources of PIM.

The conventional approach to measuring PIM is the so called two tone test. This is an industry standard test that entails applying a pair of high power carriers typically 43 dBm each of different frequencies to the input of the cable network and measuring the reflected PIM product s that land in the cell site s receive band. In theory the two tone test creates PIM products at an infinite number of discrete frequencies. However in many but by no means all cell sites the only PIM products of interest are the odd ordered products below the carrier frequencies Fand F as it is these products that are usually responsible for the majority of PIM problems encountered in practice. A simple equation for calculating the frequencies of these products is as follows 1 2 3 . . .

It must be emphasised that other PIM products the besides the odd ordered products below carrier frequencies Fand Fare capable of causing problems in a cell site depending on the particular spectrum allocation used in the network. For example some cellular networks are vulnerable to the odd ordered PIM products located above the transmit band rather than below it.

Similarly even ordered PIM products can be problematic in some situations. For example cell sites with co sited GSM900 and PCS systems can potentially be affected by second order PIM products from the 900 MHz transmitter landing in the PCS receive band.

For the sake of clarity of explanation the following discussion will focus on a test apparatus that has been designed to measure odd ordered PIM products below carrier frequencies Fand F. However it shall be understood that the same technique can be used with any measurable PIM product of either odd or even order at frequencies either above or below the high power carrier frequencies.

At present the only commercially available instrument for troubleshooting PIM faults in cell sites is the scalar PIM analyser. This is simply a portable two tone test instrument containing all of the necessary hardware in one box including frequency synthesisers high power amplifiers triplexer low noise receiver and a results display. Two such scalar PIM analysers are discussed in the Applicants co pending U.S. application Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712 entitled Passive Intermodulation Test Apparatus the disclosures of which are herein incorporated by reference.

Unfortunately scalar PIM analysers as discussed in the applicant s earlier applications are only capable of measuring the overall PIM level in a cable network. They do not provide any information about the locations of individual PIM faults. With a scalar PIM analyser there are only two ways of isolating PIM faults 

Both of the above approaches are less than optimal. The first method is usually a two person job and may require one of the testing personnel to climb the antenna mast in order to locate the source of the PIM fault. Similarly the second method is potentially very labour intensive and time consuming especially in crowded cell sites with large bundles of feeder cables strapped together on the same mast.

Clearly it would be advantageous to provide a system and method for the detection of the location and magnitude of sources of PIM in a communications network with a high degree of reliability and accuracy.

Accordingly in one aspect of the present invention there is provided a test module for use in a system for locating faults said test module including 

In yet another aspect of the present invention there is provided a system for locating faults said system including 

Suitably the directional coupler contains a forward coupler and two reverse couplers. The forward coupler preferably has a coupling loss of approximately 37 dB while the reverse couplers preferably have a coupling loss of approximately 30 dB. The directivity of all three couplers is tuned to at least 20 dB across both the Tx and Rx test bands.

The input port of the test module is preferably a 7 16 male coaxial connector. The output port of the test module is preferably a 7 16 female coaxial connector. The monitor port is preferably a Type N female coaxial connector. The USB connector is preferably a USB 2.0 Mini B receptacle.

Preferably the phase detector module includes a phase frequency detector IC from ON Semiconductor followed by an active low pass difference filter.

The test module may include a synthesiser module coupled to the coupler module. Suitably the synthesiser module includes a VSWR source a first frequency synthesiser and second frequency synthesiser. The VSWR source is preferably a wideband PLL synthesiser which can be tuned to any frequency in Tx and Rx test bands in increments of 5 kHz. The VSWR synthesiser may also operate at frequencies far outside these bands. The output power level of the VSWR source may programmable to a number of discrete levels for example 4 dBm 1 dBm 2 dBm and 5 dBm. The output of the VSWR source may be connected to an RF amplifier module which is capable of boosting the signal level from the VSWR source to approximately 15 dBm.

Suitably the reference receiver module includes a narrowband heterodyne receiver with a network of solid state switches and SAW filters at its front end. The reference receiver module may also include a first downconverter a bandpass filter and a second downconverter.

The primary receiver preferably includes a narrowband heterodyne receiver with a pair of RF switches at its front end. Suitably the primary receiver includes a two stage downconverter with amplification and filtering in both the first and second IF stages. The second IF bandwidth of the receiver is 4 kHz. The nominal noise floor is better than 130 dBm.

When operating in Range to PIM mode the primary receiver can be tuned to detect PIM products of any order. This includes not only IM3 but also any higher order PIM products that happen to fall in the receive band such as IM5 IM7 IM9 etc provided of course that these signals are above the noise floor of the system. This enables the apparatus to pinpoint PIM faults and cross check results using a variety of PIM products or even combinations of products of different orders.

The test signals applied to the test medium are in one or more of the following communications frequencies 450 460 MHz 470 500 MHz 800 830 MHz 850 870 MHz 820 850 MHz 860 900 MHz 875 880 MHz 870 900 MHz 890 910 MHz 920 925 MHz 930 940 MHz 930 960 MHz 1850 1910 MHz 1930 1990 MHz 1430 1440 MHz 1710 1755 MHz 2110 2155 MHz 2110 2170 MHz 2500 2690 MHz such as in the 450 700 800 850 900 950 1700 1800 1900 2100 2500 450 460 MHz 470 500 MHz 800 960 MHz 1710 2025 MHz 2110 2200 MHz and 2500 2690 MHz communications bands. The test signal s frequency may be swept incrementally by stepping the frequency of one of the test signals within the chosen communications band while the frequency of the remaining band remains fixed. Preferably the stepping is in increments of 0.25 MHz.

Preferably the amplitude and phase measurements are combined into a single vector of complex values one per frequency point. Suitably the estimation of the number of passive intermodulation sources includes constructing a system of linear prediction equations based on the vector to produce a linear prediction data matrix and performing a singular value decomposition on the linear prediction data matrix to produce a set of singular values. The set of singular values is analysed to identify the points in the set for which a 6 dB decrease in magnitude occurs from one singular value to the next. All singular values that are located after the last such transition are then set to zero to produce a set of modified singular values.

The calculation of the location and magnitude of each passive intermodulation source may include reconstituting a modified linear prediction data matrix using the set of modified singular values determining the coefficients of the characteristic polynomial for the modified linear prediction data matrix utilising the Total Least Squares method calculating the roots of the characteristic polynomial using said coefficients calculating the location of each passive intermodulation source from said roots and calculating the magnitude of each passive intermodulation source based on said coefficients and roots utilising the Least Squares Prony method.

The test medium may be a coaxial cable network cellular mobile telephone base station remote radio head or the like.

With reference to there is illustrated one possible arrangement of a range to fault RTF module for use in a system for locating faults in a cable network. As shown the module includes an input port for coupling the module to a PIM analyser. The PIM analyser in this case is generally of the type disclosed in the applicant s co pending U.S. application Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712 entitled Passive Intermodulation Test Apparatus the disclosure of which are herein incorporated by reference with a number of modifications which are discussed in greater detail below.

The module also includes an output port for connection to the device under test DUT . In most cases the DUT will be a co axial cable network of the type found in cellular mobile telephone base stations. These cable networks usually consist of several devices connected together in cascade including low loss feeder cables diplexers filters combiners jumper cables masthead amplifiers and bias tees. Any one of these components may be a source of PIM. The cable network is terminated in one or more antennas installed in an elevated location like a mast or rooftop. As with every other component in the system the antennas are also potential sources of PIM. Of course it will be appreciated by those of skill in the art that the application of the RTF module of the present invention could be utilised to locate PIM faults in other forms of cable networks and is not strictly limited in its application to the detection of PIM faults within a co axial cable network.

In addition to the input and output ports the module is provided with a monitor port for receipt of a PIM signal from the PIM analyser. The module in this instance also includes two USB ports enabling a serial connection between the PIM analyser and the module .

The directional coupler module contains a forward coupler and two reverse couplers . The forward coupler in this example has a coupling loss of approximately 37 dB while the reverse couplers have a coupling loss of approximately 30 dB. The directivity of all three couplers is tuned to at least 20 dB across both the Tx and Rx bands of the PIM analyser. As shown the first reverse coupler is coupled to a VSWR synthesiser housed within the synthesiser module . The VSWR synthesiser in this case includes a VSWR source and amplifier . The first reverse coupler in this instance acts to inject a VSWR stimulus signal onto the output port when the RTF module is in Range To VSWR mode.

The forward coupler in this case is coupled to the front end of the reference receiver module which is discussed in greater detail below. This forward coupler coupler in this example serves a dual purpose depending on which mode the instrument is operating in. In Range To PIM mode the forward coupler samples the two high power carriers from the PIM analyser to enable the module to generate a reference PIM signal. In Range To VSWR mode the forward coupler samples the forward travelling VSWR stimulus signal to enable the apparatus to measure the vector reflection coefficient.

The output from the second reverse coupler is connected to the VSWR Reverse port of the primary receiver module . When the RTF module is operating in VSWR mode the second reverse coupler samples the reflected signal from the DUT.

It will of course be appreciated by those of skill in the art that great care must taken during the manufacture of the directional coupler module to ensure that its residual PIM level is very low 120 dBm max . This is critical in minimising the baseline PIM level of the apparatus thereby maximising the sensitivity of the instrument as a whole.

As shown the synthesiser module contains three signal sources the VSWR source mentioned above a first frequency synthesiser and a second frequency synthesiser . The VSWR source in this example is a wideband PLL synthesiser. It can be tuned to any frequency in PIM analyser s Tx and Rx bands in increments of 5 kHz. It is also capable of operating at frequencies far outside these bands although this not often likely to be necessary in the intended application. The output power level of the VSWR source is programmable to four levels 4 dBm 1 dBm 2 dBm and 5 dBm. Under normal operating conditions the level is set to 5 dBm. The output of the VSWR source is connected to an RF amplifier module which boosts the signal level to approximately 15 dBm. The output of the RF amplifier is connected to the coupled port of the first reverse coupler which injects the signal onto the main RF path in the direction of the RF OUT port of the apparatus.

The frequency synthesiser is a wideband PLL synthesiser of the same type as the VSWR source synthesiser. It provides the local oscillator signal for the first downconverter stage in the primary and reference receiver modules. This ensures that the first IF signals in the two receivers are phased locked to each other.

The frequency synthesiser is a 70 MHz fixed frequency crystal oscillator. It provides the local oscillator signal for the second downconverter stage in the primary and reference receiver modules. This ensures that the second IF signals in the two receivers are phase locked to each other.

It will be appreciated by those of skill in the art that it is not necessary for any of the frequency sources in the RTF module to share a common 10 MHz reference with each other or indeed with the two Tx synthesisers inside the PIM analyser. It is sufficient for the primary and reference receivers to share common feeds from the frequency synthesisers 

In this example the primary receiver module includes a narrowband heterodyne receiver with a pair of RF switches at its front end. These switches can be toggled between two RF input ports depending on whether the instrument is operating in Range to PIM mode or Range to VSWR mode. They also allow a 40 dB fixed attenuator to be switched into the RF path if the amplitude of the incoming PIM signal exceeds a certain level. When the apparatus is in Range to PIM mode the switches are set to the PIM input port with the attenuator in circuit if necessary. This configuration enables the primary receiver to detect the incoming PIM signal from the monitor port of the RTF module. When the apparatus is in Range to VSWR mode the input switch is set to the VSWR REV input port. This enables the primary receiver to detect the output from reverse coupler

The architecture of the primary receiver in this case includes a two stage downconverter with amplification and filtering in both the first and second IF stages. The first and second local oscillator signals are obtained from the first frequency synthesiser and second frequency synthesiser . The second IF bandwidth of the receiver is 4 kHz. The nominal noise floor is better than 130 dBm. When operating in Range to PIM mode the primary receiver can be tuned to detect PIM products of any order. This includes not only IM3 but also any higher order PIM products that happen to fall in the receive band such as IM5 IM7 IM9 etc provided of course that these signals are above the noise floor of the system. This enables the apparatus to pinpoint PIM faults and cross check results using a variety of PIM products or even combinations of products of different orders.

The primary receiver produces two outputs an RSSI signal which is a DC voltage that is proportional to the power in dBm in the PIM or VSWR REV signal and a 450 kHz square wave which is simply a clipped version of the downconverted PIM or VSWR signal. The 450 kHz square wave is produced by the limiting amplifier in the second IF stage of the receiver and contains all of the phase information in the unclipped signal but with the amplitude content removed.

The RSSI signal is digitised in the control module of the RTF module and converted into a power level in dBm using a set of calibration constants stored in the control module s EEPROM. The resulting value is reported to the PIM analyser via the USB link . The 450 kHz square wave is used to measure the phase of the PIM or VSWR REV signal. This is achieved in the phase detector module which is discussed in more detail below.

The reference receiver module in this instance includes a narrowband heterodyne receiver with a network of solid state switches and SAW filters at its front end which is coupled to the forward coupler . The reference receiver module performs two distinct functions depending on whether the instrument is operating in Range to PIM mode or Range to VSWR mode. When the apparatus is in Range to PIM mode the main function of the reference receiver module is to generate a reference PIM signal against which the phase of the measured PIM signal can be compared.

The first step in this process is to switch a Tx band SAW filter into the RF path at the input to the reference receiver module. This SAW filter allows the sampled Tx Txcarriers from the PIM Analyser to pass through to the downconverter chain while preventing any PIM signals generated in downstream circuit elements from propagating back into the PIM analyser s test port via the forward coupler . In some cases a single SAW filter may not provide sufficient rejection for this purpose in such cases two or more SAW filters may be connected in cascade to achieve the desired performance.

The sampled Tx Txcarriers then enter the first downconverter stage . In the present example the first downconverter is a Renesas uPC2758TB active mixer which is deliberately operated near its compression region. This has the effect of creating a set of intermodulation products which can be used as reference tones. As an added benefit the uPC2758TB device also downconverts these intermodulation products to the first IF band. This approach avoids the need to have a separate reference tone generator circuit. The output of the first downconverter is then bandpass filtered to remove the residual Tx carriers and unwanted intermodulation products. The remaining signal then enters the second downconverter stage where it is mixed down to 450 kHz thus completing the reference PIM generation process.

The fact that both the primary and reference PIM signals are derived from the same pair of high power carriers confers several performance advantages on the system as a whole. Firstly the reference PIM signals generated in the uPC2758TB are phase locked to the primary PIM signals generated in the DUT. This is essential in any coherent ranging system.

Secondly any changes in the absolute phases of the two high power carriers are tracked equally by both the primary and reference PIM signals. This is particularly important as the HPA module in the PIM analyser heats up during extended periods of operation thereby causing its phase response to change over time. By using the same pair of carriers to generate both the primary and reference PIM signals any change in the phase response of the HPA is automatically cancelled out. An added benefit is that the phase detection algorithm used by the RTF module does not need to be temperature compensated.

In Range to VSWR mode the reference receiver module switches the Tx band SAW filter out of the RF path so that the sampled VSWR stimulus signal can pass directly to the downconverter chain. This allows Range to VSWR measurements to be made in both the Tx and Rx bands of the PIM analyser. In principle it is also possible to make Range to VSWR measurements outside of the Tx Rx bands of the PIM analyser provided the return loss of the device under test is better than approximately 3 dB. Alternatively the RTF module can be detached from the test port of the PIM analyser and a 50 ohm load attached to its input port . This would enable the apparatus to make highly accurate wideband Range to VSWR measurements independent of the return loss of the DUT.

Regardless of which mode the instrument is operating in the reference receiver produces two outputs an RSSI signal which is a DC voltage that is proportional to the power in dBm in the PIM or VSWR FWD signal and a 450 kHz square wave which is simply a clipped version of the downconverted PIM or VSWR signal. It is produced by the limiting amplifier in the second IF stage of the receiver and contains all of the phase information in the unclipped signal but with the amplitude content removed.

The RSSI signal is digitised in the control module of the RTF module and converted into a power level in dBm using a set of calibration constants stored in the control module s EEPROM. The resulting value is reported to the PIM analyser via the USB link . The 450 kHz square wave serves as a phase reference against which the phase of the PIM or VSWR FWD signal is measured. This is achieved in the phase detector module .

As illustrated the 450 kHz square wave outputs from the primary and reference receiver modules are provided to the phase detector module . In the present example the phase detector module comprises an MCK12140 phase frequency detector IC from ON Semiconductor followed by an active low pass difference filter. The output of this circuit is a DC voltage Vphase proportional to the phase offset between the primary and reference square waves. This circuit is a four quadrant detector meaning it is capable of measuring phase offsets from 180 to 180 without ambiguity.

The output voltage Vfrom the phase detector module is digitised by the microcontroller in the control module and converted into a phase offset in degrees using a set of calibration constants stored in the control module s EEPROM. The resulting value is reported to the PIM analyser via the USB link .

In an alternative embodiment the above phase detector could be replaced by a digital phase detector as set out in the applicant s earlier filed Australian provisional application AU 2010903266 entitled Method and Apparatus for Locating Faults in Communications Networks which is herein incorporated by reference.

The control module in this case coordinates the functions of the various modules within the RTF module. It also manages the communication link with the PIM analyser to ensure that measurements are performed in a synchronous manner. The control module consists principally of a PIC24HJ256GP206A microcontroller manufactured by Microchip. The microcontroller contains 256 kB of on board EEPROM in which the RTF module s factory calibration data can be stored. This avoids the need for the unit to be shipped with a separate setup disc containing calibration data unique to that unit.

Communications with the PIM analyser are achieved using an FT232RL USB to Serial interface module manufactured by FTDI. One side of this IC is connected to the UART of the microcontroller while the other is connected to the USB 2.0 Mini B connector on the exterior of the RTF module. The FT232RL also provides access to the 5V supply from the PIM analyser s USB port. This 5V rail is used to power the microcontroller. The rest of the RTF module draws its power from the PIM analyser s monitor port .

When the RTF module is first connected to the PIM analyser the microcontroller executes a handshaking and device authentication procedure with the PIM analyser. During this phase the 12V supply on the PIM analyser s monitor port is disabled. When the communications link to the PIM analyser has been established the PIM analyser enables the 12V supply. The microcontroller in the RTF module then turns on the bias voltages from the DC power supply according to the desired operating mode.

The bias tee is an internal module that follows immediately after the monitor port connector . The bias tee in this case extracts a 12V DC supply voltage from the centre pin of the monitor port which is provided to the DC power supply . The DC power supply contains a bank of voltage regulators and power supply filters which convert the 12V supply into a set of smaller voltages for the various modules in RTF module. The RF limiter is a protective device fitted between the RTF module s internal bias tee and the PIM input port on the primary receiver module . The purpose of the RF limiter is to protect the primary receiver module from damage in the event that a strong RF signal source is accidentally connected to the RTF module s monitor port.

As shown the reflectometer has two RF input ports designated FWD IN and REV IN . The FWD IN port is connected to the output from the forward directional coupler via the RF switching network at the input to the reference receiver . The REV IN port is connected to the output from the reverse directional coupler

The signals at the FWD IN and REV IN ports are applied to the six port junction which produces four distinct linear combinations of the two input signals. These four output signals are connected to the input of the downconverter in the reference receiver via a single pole 4 throw RF switch and single pole double throw RF switch . The RSSI voltages corresponding to the amplitudes of the four output signals are digitised in turn in the control module of the RTF module and converted into power levels in dBm using a set of calibration constants stored in the control module s EEPROM. The resulting power levels are reported back to the PIM analyser via the USB link where they are converted into a vector reflection coefficient using a set of six port calibration constants stored on the PIM analyser s hard drive.

It will of course be appreciated by those of skill in the art that when the six port reflectometer is in use the primary receiver is not required. It would therefore be possible to power down the active components in the primary receiver in order to reduce the power consumption of the RTF module.

Both the arrangements of utilise a USB connection to the PIM analyser as well as an onboard DC module which draws a 12V feed from the monitor port of the PIM analyser. It will of course be appreciated by those of skill in the art that the USB connection between the PIM analyser and the RTF module could be eliminated by running communications over the monitor connection. This could be achieved by connecting the spare RS 232 port on the PIM analyser s touch screen PC to a modem that modulates the digital data stream onto a 2.176 MHz carrier similar to an AISG communications link. The modulated waveform would be injected onto the PIM analyser s monitor port. A similar modem would also be required inside the RTF module. It would be connected to the DC port of the RTF module s bias tee . The data stream to from the modem would be connected to the UART of the microcontroller on the control module .

In yet another embodiment the RTF module could be powered entirely by the two USB ports on the PIM analyser s front panel. This would eliminate the need for the bias tee to be fitted to the RTF module. However this form of interconnection between the PIM analyser and the RTF module is less than ideal as it requires both of the PIM analyser s USB ports to be connected to the RTF module while it is in use. This is due to the fact that a single USB port cannot source enough power to drive the RTF module. As a result the user could not connect a mouse memory stick or file transfer cable to the PIM analyser while the RTF module was in use.

The examples of the RTF module discussed in relation to above are single band devices designed for operation in only one cellular frequency band. However the RTF module could easily be configured for multi band operation. This is achieved by utilising a reference receiver module of the type shown in . In this arrangement of the reference receiver module the SAW filter at the input to the reference receiver is replaced by a bank of SAW filters one for each Tx band of interest which can be switched into the RF path as needed.

These SAW filters are chosen to cover the Tx band of each cellular standard of interest such as AWS PCS1900 DCS1800 GSM900 CDMA850 and so on. The only requirement is that each Tx SAW filter must have high attenuation i.e. greater than 80 dB in the corresponding Rx band for that standard. In some cases a single SAW filter may not provide sufficient rejection for this purpose in which case two or more SAW filters could be connected in cascade to achieve the desired performance.

In order to switch between the SAW filters the original single pole double throw switches are also replaced by a pair of single pole six throw switches . One of the six switch settings is a pass through connection with no SAW filters at all. This setting is used when the instrument is in its Range to VSWR mode of operation.

An alternative means of configuring the RTF module for multi band operation is to utilise a reference receiver module of the type shown in . In this arrangement of the reference receiver module the SAW filter at the input to the reference receiver is replaced by a wideband monolithic amplifier . When the RTF module is in Range to PIM mode the amplifier allows the sampled Txand Txcarriers to pass through to the downconverter chain while preventing any PIM signals generated in downstream circuit elements from propagating back into the iQA s test port via the forward coupler . The monolithic amplifier has an operating frequency range of DC to 3 GHz which allows the reference receiver module to be used in all existing cellular frequency bands.

The only other devices in the RTF module that limit its multi band utility are the directional couplers and the power dividers that split the first and second frequency synthesisers and respectively between the two receiver modules. Additionally in the case of the six port reflectometer embodiment discussed in relation to above the properties of the six port junction are frequency dependent. Therefore in order to optimise the performance of the RTF module across multiple cellular frequency bands the above components may need to be upgraded to devices spanning an octave or more of bandwidth. Alternatively the multi band option could be implemented in two variants a low band variant covering for example 700 MHz CDMA850 and GSM900 and a high band variant covering for example AWS DCS1800 and PCS1900.

As noted above the RTF is utilised in conjunction with a PIM analyser generally of the type discussed in the applicant s earlier filed U.S. application Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712. As shown the RTF module is directly coupled to the test port of the PIM analyser via its input port . While RTF module is shown as being directly connected to the test port of the analyser it will of course be appreciated by those of skill in the art that the module could be coupled to the test port via the use of a suitable RF jumper cable. The monitor port of the RTF module in this case is coupled to the PIM analyser s monitor port via cable while at least one of the USB ports is coupled to one of the USB ports via USB cable .

As mentioned above the PIM analysers of the type discussed in U.S. Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712 require a slight modification to allow the analyser to utilise the RTF module to detect PIM and VSWR faults in the device under test such as for example the addition of the monitor port. In addition to this an application software update is also required to access the new features associated with the RTF module.

To facilitate the location of faults within the cable network the RTF module is connected between the analyser and the device under test such that the RTF module s input port is coupled to the analyser s test port either directly or via an RF jumper cable while the RTF module s monitor port is coupled to the analyser s monitor port via RF jumper cable . The device under test is then connected to the RF output port of the module . At least one of the USB ports from the RTF module is also coupled to one of the USB ports of the analyser via USB cable .

The above modifications to the PIM analyser provide the system with a number of additional functions not previously available with the unmodified versions of the PIM analyser such as 

Advantageously the system allows the operator to alternate between Range to PIM and Range to VSWR testing without changing any of the test port connections. It is even possible for the instrument to perform both types of measurement simultaneously if desired. The operation of the system in the various available test modes is described in greater detail below.

In Range to PIM mode the system requires the PIM analyser and the RTF module to make a synchronised series of measurements across a range of discrete frequency points. At each frequency point in the sweep the PIM analyser starts by sending the current PIM frequency to the RTF module via the USB link between the two instruments. This enables the RTF module to tune its two receivers to the same frequency as the receiver in the PIM analyser .

The PIM analyser then emits a pair of high power CW carriers from its test port as discussed in the applicant s earlier filed Australian provisional application AU 2010903266 entitled Method and Apparatus for Locating Faults in Communications Networks which is herein incorporated by reference. These carriers enter the RTF module via its input port . As the carriers propagate through the RTF module they are sampled by the forward coupler in the directional coupler module . The sampled carriers are then fed into the reference receiver module inside the RTF module which generates a spectrum of PIM products whose role is to provide a phase reference for the system. The desired PIM product is downconverted to 450 kHz and applied to the reference port of the phase detector module .

The original two high power carriers continue through the RTF module emerging from the output port . They then propagate into the DUT where a PIM signal is generated by the faulty components therein. The PIM signal propagates back out of the DUT through the RTF module and into the test port of the PIM analyser .

As it enters the PIM analyser the PIM signal is isolated from the two high power carriers by the PIM analyser s triplexer as described in the applicant s earlier filed Australian provisional application AU 2010903266. The PIM signal is then amplified by the low noise amplifier at the front end of the PIM analyser s receiver module. After amplification the PIM signal is split into two equal parts by a 3 dB power divider. One half of the PIM signal enters the PIM analyser s downconverter chain which has previously been described in the applicant s earlier filed provisional AU 2010903266. The other half of the PIM signal undergoes a further stage of amplification and emerges from the PIM analyser s transceiver stack via a board mounted QMA connector. The PIM signal then passes through a short length of coaxial cable emerging from the PIM analyser s monitor port after which it propagates into the RTF monitor port .

As the PIM signal enters the RTF module it is routed to the primary receiver module which downconverts the PIM signal to 450 kHz. The phase of the downconverted PIM signal is then measured relative to the reference PIM signal described earlier. This is achieved by means of the RTF module s phase detector module . The measured phase offset is recorded by the RTF module s control module . Also recorded are the amplitudes of the primary reference PIM signals. While these values are not strictly required by the measurement process they nevertheless provide a useful indication of whether or not the RTF module is functioning correctly.

The RTF module s control module reports the measured phase offset and signal amplitudes to the PIM analyser via the USB link between the two instruments. The PIM analyser stores these values to file along with the PIM level as measured by its own receiver. The PIM analyser then sets one of its high power carriers to the next frequency in the sweep and the above process repeats.

Upon completion of the frequency sweep the touch screen PC inside the PIM analyser post processes the measured data in order to compute the locations and severities of the PIM faults in the DUT. The results are displayed on screen in a graphical format and can be saved as a report on the PC s hard drive if desired.

In addition to Range to PIM mode the system has a Low power Range to VSWR mode. Low power. Range to VSWR mode will in most cases be the preferred method of locating VSWR faults. As the name implies this is a low power test which can be performed in both the transmit and receive bands of the PIM analyser. It requires the RTF module to make a series of vector reflection coefficient measurements across a range of discrete frequency points followed by a post processing operation in the PIM analyser. The PIM analyser s two high power carriers are not required when the apparatus is operating in this mode and would normally be turned off for the duration of the test.

At each frequency point in the sweep the PIM analyser starts by sending the desired measurement frequency to the RTF module via the USB link between the two instruments. The RTF module programs its VSWR source synthesiser to this frequency. The output of the synthesiser is then boosted to a power level of approximately 15 dBm by the VSWR driver amplifier

The amplified VSWR stimulus signal is injected onto the main RF path via the directional coupler . The power level of the coupled signal on the main RF path is approximately 15 dBm. This is low enough to perform testing in both the Tx and Rx bands of the PIM analyser without causing damage to either the instrument or any active devices in the DUT.

The stimulus signal propagates through the RTF module in the direction of the DUT. As it does so the signal is sampled by the forward directional coupler in order to provide a reference signal against which the amplitude and phase of the reflected signal can be compared. The sampled stimulus signal is fed into the reference receiver module inside the RTF module which downconverts the signal to 450 kHz and applies it to the reference port of the phase detector module .

The original VSWR stimulus signal continues through the RTF module emerging from the output port . It then propagates into the DUT where it is back scattered by the faulty components therein. The reflected part of the stimulus signal propagates back out of the DUT and into the output port of the RTF module .

As the reflected stimulus signal propagates through the RTF module it is sampled by the reverse directional coupler . The sampled signal enters the primary receiver module which downconverts the signal to 450 kHz.

The phase of the reflected signal after downconversion is then measured relative to that of the reference signal described above. This is achieved by means of the RTF module s phase detector module . The measured phase offset is recorded by the RTF module s control module . Also recorded are the amplitudes of the reference reflected signals.

The RTF module s control module reports the measured phase offset and signal amplitudes to the PIM analyser via the USB link between the two instruments. The PIM analyser stores these values to file. The PIM analyser then sends the next frequency in the sweep to the RTF module and the above discussed process is repeated.

Upon completion of the frequency sweep the touch screen PC inside the PIM analyser post processes the measured data in order to compute the locations and severities of the VSWR faults in the DUT. The results are displayed on screen in a graphical format and can be saved as a report on the PC s hard drive if desired.

As a final note it is possible in principle for the present invention to perform low power Range to VSWR measurements over a very wide range of frequencies including frequencies outside of the Tx and Rx bands of the PIM analyser. However in general this is not recommended as accurate results cannot be guaranteed for all load impedances in particular for highly reflective terminations unless the RTF module is disconnected from the test port of the PIM analyser and a 50 ohm load attached to the RTF module s input port .

The system also has a High power Range to VSWR mode. This mode is very similar to the low power case except that the stimulus signal is provided by the PIM analyser. As such testing can be performed at power levels ranging from 33 to 43 dBm. This is advantageous in situations where the user wishes to test the DUT at a power level that is more representative of normal operating conditions. It is also advantageous in situations where external interference signals are present in the system whereas typical interference signal levels would be expected to cause large errors in the measured return loss when the apparatus is in low power VSWR mode their effect will generally be insignificant when the apparatus is in high power VSWR mode.

High power Range to VSWR testing can only be performed at frequencies within the Tx band of the PIM analyser. At each frequency point in the sweep the PIM analyser starts by sending the desired measurement frequency to the RTF module via the USB link between the two instruments. This enables the RTF module to tune its two receivers to the correct frequency to detect the stimulus signal. The RTF module s VSWR source synthesiser and driver amplifier are not required when the apparatus is operating in this mode and would normally be turned off for the duration of the test.

The PIM analyser then turns on one of its high power carriers. This carrier is emitted from the PIM analyser s test port and enters the RTF module via the input port . From this point onwards the measurement process is identical to that of the low power Range to VSWR mode described above with the exception that a pair of large attenuators must be switched into the RF paths at the inputs to the primary and reference receivers in the RTF module . This is to ensure that the sampled forward and reflected stimulus signals remain within the dynamic range of the receivers.

In an alternative embodiment instead of using switchable attenuators as described above the RF switches at the inputs to the two receivers could be set in such a way as to achieve the same outcome. For example the first switch in the reference receiver could be set to the normal position for VSWR testing whereas the second switch could be set to the position used in Range to PIM mode. In this configuration the isolation of the RF switch acts as an attenuator reducing the strength of the signal at the downconverter input to a more suitable level. Similarly the switch in the primary receiver could be set to one of the PIM inputs from the monitor port thereby attenuating the VSWR REV signal by an amount equal to the isolation of the switch.

With the system of the present invention it is possible to perform Range to PIM and Range to VSWR testing almost simultaneously. This applies to both low power and high power VSWR testing. To perform simultaneous Range to PIM and low power Range to VSWR testing the PIM analyser s pair of high power carriers and the RTF module s VSWR source are all turned on at the same time. Range to PIM and Range to VSWR measurements can then be made in two arbitrary and independent frequency bands.

Every time the system switches from a PIM measurement to a VSWR measurement the RTF module must be configured accordingly. This entails setting the RF switches in the primary and reference receivers to the correct positions and programming the first local oscillator to the appropriate frequency for the current measurement. The only restrictions on this mode of operation are that the VSWR source must not be set to the same frequency as either of the two carriers from the PIM analyser or to the frequency of the PIM product currently being measured.

To perform simultaneous PIM and high power VSWR testing the PIM analyser s two carriers are turned on while the RTF module s VSWR source must be turned off. A Range to PIM sweep is then carried out as described above. The only change in the measurement procedure is that after PIM has been measured at a given frequency point the RF switches and first local oscillator in the RTF module must be configured for a VSWR measurement at the frequency of the swept carrier. It is not necessary to turn off the second carrier during this process. After the reflection coefficient has been measured the RTF module is returned to PIM mode and the system moves onto the next frequency point.

The only restriction with this mode of operation is that the VSWR sweep must necessarily be performed at the same frequencies as those covered by the swept carrier in the PIM sweep.

The RTF module must be calibrated for both Range to PIM and Range to VSWR operation. Each calibration consists of a two part procedure. The first part is performed in the factory during the manufacturing process. The second part is a field calibration procedure which must be carried out by the user on a periodic basis typically once a day. Details of these calibration procedures are presented below.

The power calibration procedure for the primary receiver module characterises the relationship between the RF signal level at the input to the receiver and the RSSI voltage at the output of the receiver. The RTF module is first disconnected from the PIM analyser. The input and output ports of the RTF module are terminated in 50 matched loads and an external bias tee is connected to the monitor port in order to provide DC power to the apparatus. An external signal generator is connected to the RF input port of the bias tee and the RF switch at the receiver s front end is switched to the PIM input port. The signal generator then injects a tone of known frequency and power into the monitor port and the RSSI signal at the output of the primary receiver is recorded. This process is repeated at a large number of frequencies and power levels across the full operating range of the instrument both with and without the RF attenuator in circuit. The results are stored in a lookup table in the control module s EEPROM.

The power calibration procedure for the reference receiver module characterises the relationship between the RF signal level at the input to the receiver and the RSSI voltage at the output of the receiver. The RTF module is disconnected from the PIM analyser . The output port of the RTF module is terminated in a 50 matched load and an external signal generator is connected to the RF IN port. An external bias tee is connected to the monitor port in order to provide DC power to the RTF module. The RF switching network at the receiver s front is then set to VSWR mode. The signal generator injects a tone of known frequency and power into the RF IN port and the RSSI signal at the output of the reference receiver is recorded. This process is repeated at a large number of frequencies and power levels across the full operating range of the instrument. The results are stored in a lookup table in the control module s EEPROM.

The above process must then be repeated across the Tx band of the PIM analyser with the RF switching network set to PIM mode. This switches the SAW filter into the RF path thereby enabling the system to characterise the passband ripple of the filter or the gain slop of the monolithic amplifier if the embodiment of is employed . These results are stored in EEPROM in a separate lookup table.

The phase detector calibration characterises the relationship between the phase offset between the two 450 kHz square waves at the input to the phase detector and the voltage Vat the output of the phase detector. The RTF module is first disconnected from the PIM analyser and the output port is terminated in a 50 matched load. An external bias tee is connected to the monitor port in order to provide DC power to the RTF module. A variable phase shifter is connected to the RF input port of the bias tee. The RF switching network at the input to the primary receiver is switched to the PIM input port while the RF switching network at the input to the reference receiver is switched to the VSWR FWD port.

Using an external signal generator with a power divider on its output port a 15 dBm RF tone with its frequency set to the middle of the Rx band of the PIM analyser is applied simultaneously to both the RF IN port of the RTF module and the input port of the variable phase shifter attached to the monitor port. The phase shifter is then stepped through a full 360 phase rotation in increments of 5 to 10 . At each phase setting the output voltage Vis recorded. Upon completion of this process the results are stored in a lookup table in the control module s EEPROM.

In an alternative approach the phase detector calibration could be achieved using a pair of phase locked signal generators one of which has an adjustable output phase capability. As before an external bias tee is connected to the monitor port in order to provide DC power to the RTF module. The fixed phase signal generator is connected to the RF input port of the bias tee while the variable phase signal generator is connected to the monitor port. Both signal generators are then set to the same frequency preferably near the middle of the RTF module s operating frequency range. The output phase of the signal generator on the monitor port is then stepped through a full 360 phase rotation in increments of 5 to 10 . At each phase setting the output voltage Vphase is recorded. Upon completion of this process the results are stored in a lookup table in the control module s EEPROM. The above procedure could be performed under computer control if desired.

The Range to PIM calibration procedure establishes a reference plane for the RTF module when it is operating in Range to PIM mode. This procedure must be performed by the user on a regular basis preferably once per day if the instrument is in frequent use. The first step in the calibration process is to attach a strong stable PIM source directly to the test port of the RTF module. In the preferred embodiment a Kaelus PIS0002F1V1 PIM source is recommended for this purpose as it is part of the standard PIM analyser accessories kit. The Kaelus PIM source produces approximately 77 dBm of IM3 with two 43 dBm carriers. Next a swept PIM measurement is performed across the frequency band of interest with the phase offset between the primary and reference PIM signals being recorded at each frequency point. Finally the measured phase offsets are stored to a file on the PIM analyser s hard drive. When performing subsequent Range to PIM measurements these phase offsets are subtracted from the measured phase of PIM signal thereby referencing the Range to PIM results to the RF OUT connector of the RTF module.

The low power Range to VSWR calibration is a vector error correction procedure that enables raw amplitude and phase measurements from the primary and reference receivers to be converted into accurate measurements of the vector reflection coefficient of the DUT. Ideally the calibration should be performed by the user on a regular basis preferably once per day if the instrument is in frequent use. However less frequent calibrations are permissible if pinpoint measurement accuracy is not required.

The preferred calibration method is an Open Short Load OSL procedure similar to that used with Vector Network Analysers to perform S11 calibrations. As the name implies the OSL method requires three calibration standards two reflective terminations and one matched load whose complex reflection coefficients are known at every frequency at which the apparatus is to be calibrated. At the commencement of the calibration procedure the RF switches in the primary and reference receivers are switched to their VSWR REV and VSWR FWD positions respectively.

The calibration standards are then connected to the RF OUT port of the RTF module one by one and the VSWR source is turned on and swept across the band of interest in suitably small frequency increments. At each frequency the outputs from the primary receiver reference receiver and phase detector module are measured and a set of complex calibration coefficients are calculated. Upon completion of the calibration process the Range to VSWR calibration constants are stored to a file on the PIM analyser s hard drive.

The high power Range to VSWR calibration procedure is identical to the low power procedure with the exception that the VSWR stimulus signal is a 43 dBm carrier provided by the PIM analyser and the calibration can only be performed in the PIM analyser s Tx band. In all other respects the calibration procedure is the same.

The output from the PIM measurement process described above is a list of magnitudes and phases with one pair of values for each frequency point in the sweep. This is the case regardless of whether the apparatus is operating in Range to PIM mode or Range to VSWR mode. These measured parameters may be stored on the PIM analyser s internal hard drive or other such suitable storage medium. In order to compute the locations of the PIM or VSWR faults in the DUT this raw data must be analysed by the PIM analyser s application software.

A flowchart depicting the basic operation of the analyser s application software algorithm for determining the location and magnitude of PIM or VSWR faults depending on the selected test mode is shown in . As shown the algorithm firstly retrieves the list of magnitudes and phases . The algorithm then combines the amplitude and phase measurements into a single vector of complex values one per frequency point . Each value in the vector is calculated according to the following equation square root over 2 exp where

For best results the signal processing software requires an estimate of the number of PIM faults in the DUT. Several techniques are available to answer this question. The preferred approach in the present case is to construct a system of linear prediction LP equations based on complex PIM vector H. A singular value decomposition SVD is then performed on the LP data matrix. The resulting set of singular values is analysed to identify the points in the set for which a 6 dB decrease in magnitude occurs from one singular value to the next. All singular values that are located after the last such transition are then set to zero. At the end of this process the number of nonzero singular values will be equal to the number of PIM or VSWR faults depending on the test mode in the DUT.

Once the number of PIM or VSWR faults has been estimated a modified LP data matrix is reconstituted using the modified singular values from the previous step. The system of LP equations is then solved for the coefficients of the characteristic polynomial using the method of Total Least Squares. This approach is favoured in the current invention because it performs well with weak signals in noisy environments where the data set is of short duration.

Having found the coefficients of the LP equations the zeros of the characteristic polynomial are calculated. The locations of the PIM or VSWR faults in the DUT can then be computed directly from these zeros .

The magnitude of each PIM fault is determined via the Least Squares Prony method using the LP coefficients and polynomial zeros computed in the previous steps.

The above discussed process differs from that described in the applicant s earlier provisional application AU 2010903266 in that it does not produce a set of files of digitised waveform data that require pre processing. Instead the apparatus contains a dedicated phase detector module that enables the PIM phase or reflection coefficient phase for VSWR measurements to be measured directly.

The results calculated by the signal processing software can be displayed on screen in a variety of formats. An example of how the results of a Range to PIM sweep might be displayed is shown in . The shaded curve is the unenhanced range profile which is obtained by simply taking the inverse Fourier transform of the swept PIM data after rectangular windowing. The discrete marker shows the estimated PIM fault location according to the resolution enhancement algorithm.

An example of how the results of a Range to VSWR sweep might be displayed is shown in . The shaded curve is the unenhanced range profile which is obtained by simply taking the inverse Fourier transform of the swept reflection coefficient data after rectangular windowing. The discrete markers show the estimated VSWR fault locations according to the resolution enhancement algorithm.

By default the results are presented with units of Return Loss in dB but other formats such as VSWR or linear magnitude are also possible.

Another display option offered by the RTF software is an overlaid plot of the PIM and VSWR results as shown in . This plot format is particularly useful when the PIM fault is located near the top of a tall tower. In that situation the first step is to use the Range to VSWR trace estimate the distance to the antenna or low PIM load at the top of the tower. These components usually show up clearly on a Range to VSWR trace even in very well matched systems. The Range to PIM trace can then be used to estimate the distance to the PIM fault relative to the antenna or low PIM load. This is much easier in a real world environment than trying to measure the distance to a PIM fault relative to the test instrument at the bottom of the tower.

To aid in this process the system software allows the user to place markers on each trace which print precise distance and amplitude information on the screen. It is also possible to measure the distance between any two markers even if one is on the PIM trace and one is on the VSWR trace.

If desired the system may generate a report for the user in Excel or PDF format complete with a time date stamp and geographical location information provided by the user . The finished report can then be transferred to another PC using a USB memory stick or by connecting a USB cable between the PIM analyser and the PC and transferring the report using Windows Explorer.

It will of course be appreciated by those of skill in the art that the Total Least Squares TLS Prony Estimator described above is only one of many available resolution enhancement techniques.

In an alternative embodiment the TLS Prony Estimator could be replaced by a Modified Covariance Estimator. This entails fitting an autoregressive process model to the measured data and then extrapolating the model over a wider bandwidth effectively enhancing the resolution of the measurement. The Modified Covariance method is applicable to both Range to PIM and Range to VSWR analysis.

A flowchart depicting the basic steps of a Modified Covariance software algorithm for determining the location and magnitude of PIM or VSWR faults depending on the selected test mode is shown in . As shown the algorithm firstly retrieves the list of magnitudes and phases that were obtained during the measurement sweep. The algorithm then combines the magnitude and phase measurements into a single vector of complex values one per frequency point .

The next step is to construct a system of forward and backward linear prediction equations based on the measured PIM or reflection coefficient data.

The system of equations is then solved for the coefficients of the characteristic polynomial. This can be performed using either a conventional least squares approach or more sophisticated techniques like Total Least Squares.

The resulting coefficients are substituted into the characteristic polynomial to verify that it produces a stable linear prediction filter. This entails solving for the roots of the characteristic polynomial and ensuring that all lie inside the unit circle. Any poles found outside the unit circle can be moved inside it by simply inverting their magnitudes thereby guaranteeing the stability of the filter .

The linear prediction filter may then be utilised to extrapolate the measured data over a wider bandwidth . This entails substituting the measured data into the linear prediction filter which then predicts the PIM or reflection coefficient at the first frequency point outside the measured range. The predicted value can then be substituted back into the filter as if it were a measured data point and used to predict the value at the second frequency point outside the measured range. This process is repeated in both the forward direction i.e. increasing frequency and backward direction i.e. decreasing frequency until the measured data has been extrapolated over a sufficient bandwidth to provide the required spatial resolution. Finally the inverse Fourier transform of the extrapolated data is taken which produces a range profile that can be displayed on screen in a graphical format .

A simulated example of the performance of a Modified Covariance estimator compared to a simple inverse Fourier transform of the original data is shown in . In this example the DUT contains two PIM faults the first at 15 m with a level of 90 dBm the second at 18 m with a level of 100 dBm. A noise floor of 110 dBm and a cable velocity factor of 82 have been assumed.

In the case of the unenhanced range profile there is a large peak at 15 m corresponding to the biggest PIM fault but no peak is visible for the smaller PIM fault at 18 m. This is due to the low spatial resolution approx 3 m of this measurement which is restricted by the limited sweep bandwidth 40 MHz .

By contrast the range profile produced by the Modified Covariance estimator contains two clear peaks corresponding to the two PIM faults. A bandwidth extrapolation factor of 7 was used in this example which means that the effective bandwidth of the Modified Covariance measurement was 7 times the actual sweep bandwidth i.e. 280 MHz. This corresponds to a spatial resolution of 0.44 m a considerable improvement over the unenhanced case. An added benefit of the Modified Covariance estimator is that it often requires no windowing i.e. zero padding of the measured data. This eliminates the large sidelobes and much of the ripple that can be seen on the unenhanced range profile .

While the use of the RTF module of present invention has been described with reference to the specific PIM analysers produced by the applicant there is no reason why the RTF module could not be adapted to other makes and models of PIM analyser produced by the applicant or other manufactures provided certain requirements are met.

The applicant presently manufactures a variety of PIM analysers besides the PIM analyser referred to in U.S. Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712. The main product families currently marketed are as follows 

In modifying the present invention for use with the above PIM analysers several minor obstacles must be overcome. The first obstacle to using the above products with the RTF module is that most of them are fixed frequency instruments whereas Range to PIM measurement is inherently a swept method. Fortunately the fixed frequencies in these products are mainly a software firmware restriction. All Kaelus PIM analysers are physically capable of performing swept PIM measurements albeit not over as wide a bandwidth as the PIM analyser referred to in U.S. Ser. No. 11 936 968 and U.S. Ser. No. 11 941 712.

In addition none of the above products have a built in Windows PC like the PIM analyser s touch screen PC. Instead they have very simple push button user interfaces connected to an on board microcontroller. As such there is no way for these instruments to communicate with the RTF module. Even if they could they would be unable to display a set of results as rich as a Range to PIM or Range to VSWR trace. To solve this problem it is likely that these products would need to be modified in such a way that they could be controlled by a laptop computer as shown in . The laptop would be responsible for triggering and coordinating each measurement sweep collecting readings from the PIM analyser and RTF module and then post processing and displaying the results.

Moreover not all PIM analysers produced by the applicant have an auxiliary port which can be repurposed to act as a monitor port. This means there is no way for the RTF module to get access to an amplified version of the PIM signal that is isolated from the two high power carriers. The preferred solution to this problem would be to add a Tx Rx combiner module and low noise amplifier LNA to the RTF module as shown in . The Tx path of the combiner allows the two high power carriers from the PIM analyser to pass through to the RTF module and thence to the DUT . The Rx path of the combiner captures the PIM return signal from the DUT and isolates it from the high power carriers. The PIM signal is amplified in the LNA after which it enters the monitor port of the RTF module.

The final obstacle to be overcome is that not all PIM analysers produced by the applicant are able to provide a DC voltage rail to power the RTF module. In that case it would be necessary to fit a DC input connector to the RTF module and ship it with a suitable mains adaptor.

In order to use the RTF module with a PIM analyser of other manufacturers many of the same challenges described above would have to be addressed. An additional requirement is that the PIM analyser of other manufactures would have to be based on the same measurement technique as the applicant s family of PIM analysers i.e. two tone testing with a pair of high power CW carriers where at least one of the carriers can be programmed to a range of different frequencies. A further constraint is that it will not usually be possible to change any aspect of the hardware or firmware in the PIM analyser.

In the simplest embodiment it is envisaged that the configuration depicted in would be the most suitable method for using the RTF module with a PIM analyser produced by other of other manufacturers. In such cases the USB or Serial interface may need to be replaced with whatever interface is available on the PIM analyser such as GPIB or SCPI. This of course presupposes that any such remote programming interface is available at all including an application programming interface API that exposes the necessary instrument functionality.

An optional feature that could be added to the RTF module is an AISG modem and bias tee connected to the RF OUT port of the apparatus. This would confer upon the apparatus the following functionality 

A self test mode may also be provided. This would enable the apparatus to perform a number of simple checks that verify the system is functioning correctly. A surprisingly large number of tests are possible a brief description of some of the most useful ones is provided below.

A simple test to verify that the primary and reference receivers in the RTF module are operating correctly when the module is in PIM test mode is to attach a strong stable PIM source to its output port . The PIM analyser then performs a fixed tone PIM test with 2 43 dBm carriers and verifies that the measured PIM level is approximately 77 dBm. At the same time the RTF module measures the same PIM signal using the primary and reference receivers. The PIM level measured by the primary receiver should agree closely with the PIM analyser s result. The PIM level measured by the reference receiver depends only on the amplitudes of the two high power carriers and should fall within a narrow range of known power levels.

One test to verify that the reference receivers in the RTF module are operating correctly when the module is in low power VSWR mode is to turn off the PIM analyser s two high power carriers with the RTF module s output port being left unterminated. The RTF module then turns on its VSWR source sets the frequency to a suitable value and measures the amplitudes of the primary and reference receiver outputs and the phase offset between them. All three values should fall within a narrow range of known limits.

The test to verify that the primary and reference receivers in the RTF module are operating correctly when the module is in high power VSWR mode is substantially identical to the low power case except that the stimulus signal is a high power carrier from the PIM analyser. Also for safety reasons it is recommended that the RF OUT port of the RTF module be terminated with one of the loads from the PIM analyser s accessory kit such as the low PIM load or PIM source.

A test to determine a gain correction factor for the apparatus is also available. The RTF module assumes that the gain of the LNA in the PIM analyser is 38 dB but in practice this value can vary by 3 dB from unit to unit. As a result the PIM level reported by the primary receiver in the RTF module can be in error by the same amount. In order to account for this uncertainty the following procedure is followed 

Firstly the RTF module is configured for PIM measurement and a strong stable PIM source is attached to its output port . The PIM analyser then performs a swept PIM test across its full operating bandwidth using 2 43 dBm carriers. At each frequency in the sweep the PIM analyser measures the PIM level using its own receiver. At the same time the RTF module measures the PIM signal with its primary receiver . By subtracting the PIM analyser s PIM measurements from those of the RTF module a list of gain correction factors is obtained for the measured frequency range. This information can be stored either on the PIM analyser s hard drive or in the RTF module s EEPROM.

If necessary the RTF module could be used as a wideband spectrum analyser. By turning off the two high power carriers in the PIM analyser and monitoring the output power from the primary receiver the RTF module could monitor incoming signals over a very wide frequency range well outside of the Tx and Rx bands of the PIM analyser. The main limitation with this mode of operation is that the instrument s noise figure would be over 30 dB. This is predominantly due to the coupling loss between the output port of the RTF module and the input to its primary receiver . However the system would still be sensitive enough to detect the presence of signals stronger than 60 dBm.

It is to be understood that the above embodiments have been provided only by way of exemplification of this invention and that further modifications and improvements thereto as would be apparent to persons skilled in the relevant art are deemed to fall within the broad scope and ambit of the present invention described herein.

