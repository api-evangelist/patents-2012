---

title: Systems and methods for provisioning and using multiple trusted security zones on an electronic device
abstract: A method of provisioning a subordinate trusted security zone in a processor having a trusted security zone. The method comprises receiving by a master trusted application executing in a master trusted security zone of the processor a request to provision a subordinate trusted security zone in the processor, wherein the request comprises a master trusted security zone key, wherein the request designates the subordinate trusted security zone, and wherein the request defines an independent key. The method further comprises provisioning by the master trusted application the subordinate trusted security zone to be accessible based on the independent key.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09183412&OS=09183412&RS=09183412
owner: Sprint Communications Company L.P.
number: 09183412
owner_city: Overland Park
owner_country: US
publication_date: 20120810
---
Mobile communication devices in the future are expected to store or embody a variety of applications that may interact with confidential information such as credit card numbers bank account numbers authentication numbers personal data medical information and the like. Additionally mobile communication devices may promote users installing after market applications that may be infiltrated by malware such as viruses Trojans screen scrapers keyboard monitors and other nefarious software and or firmware.

In an embodiment a method of executing independent trusted applications in a processor having a plurality of trusted security zones is disclosed. The method comprises invoking a first trusted application to execute in a first subordinate trusted security zone of the processor wherein the first trusted application is invoked by a master trusted application executing in a master trusted security zone of the processor and wherein the master trusted application has no visibility into a first memory space associated with the first subordinate trusted security zone and no visibility into the processing of the first trusted application. The method further comprises invoking a second trusted application to execute in a second subordinate trusted security zone of the processor wherein the second trusted application is invoked by the master trusted application executing in the master trusted security zone of the processor and wherein the master trusted application has no visibility into a second memory space associated with the second subordinate trusted security zone and no visibility into the processing of the second trusted application wherein the master trusted security application mediates access to the first trusted security zone and to the second trusted security zone.

In an embodiment a method of provisioning a subordinate trusted security zone in a processor having a trusted security zone is disclosed. The method comprises receiving by a master trusted application executing in a master trusted security zone of the processor a request to provision a subordinate trusted security zone in the processor wherein the request comprises a master trusted security zone key wherein the request designates the subordinate trusted security zone and wherein the request defines an independent key. The method further comprises provisioning by the master trusted application the subordinate trusted security zone to be accessible based on the independent key.

In an embodiment a method of changing the memory size of a subordinate trusted security zone in a processor having a trusted security zone is disclosed. The method comprises transmitting an indication of memory utilized by a first subordinate trusted security zone of the processor to a master trusted application executing in a master trusted security zone of the processor and receiving by the master trusted application a request to increase the memory size of a second subordinate trusted security zone of the processor. The method further comprises reducing the memory size of the first subordinate trusted security zone based at least in part on the indication of memory utilized by the first subordinate trusted security zone and increasing the memory size of the second subordinate trusted security zone.

These and other features will be more clearly understood from the following detailed description taken in conjunction with the accompanying drawings and claims.

It should be understood at the outset that although illustrative implementations of one or more embodiments are illustrated below the disclosed systems and methods may be implemented using any number of techniques whether currently known or not yet in existence. The disclosure should in no way be limited to the illustrative implementations drawings and techniques illustrated below but may be modified within the scope of the appended claims along with their full scope of equivalents.

A computing device or electronic device having a trusted security zone that comprises a master trusted security zone and a plurality of subordinate trusted security zones is described. The computing device can be a mobile device such as a mobile phone a personal digital assistant a media player or other. The computing device may be a desktop computer a laptop computer a notebook computer or other computer. The computing device may be coupled to a network by a wireless link and or by a wired link.

A computing device may be manufactured by an original equipment manufacturer with a processor having a normal security zone and a trusted security zone. The manufacture may provide the trusted security zone with a master trusted security zone with a master trusted application associated with the master trusted security zone and with a master key associated with the master trusted security zone. Additionally the trusted security zone may have a plurality of statically configured subordinate trusted security zones that are initially not provisioned with an independent key for accessing the subordinate trusted security zone. Alternatively the trusted security zone may be configured to promote the master trusted security zone dynamically generating subordinate trusted security zones in response to a provisioning session initiated by an external device for example by a trusted service manager server associated with a credit card account.

The master trusted security zone may execute a master trusted application that performs a variety of functions for provisioning and mediating between the plurality of subordinate trusted security zones. When a request to provision a subordinate trusted security zone is received by the master trusted application and the request contains or is accompanied by a master key the master trusted application may provision a subordinate trusted security zone and make it accessible to another device that is executing in a trusted security zone on that device. Then the device may send commands to install a trusted application on the computing device for execution in the subordinate trusted security zone for example providing both the independent key associated with the subordinate trusted security zone and the code implementing the trusted application.

The master trusted application may mediate the access to the subordinate trusted security zone without actually accessing or monitoring the subordinate trusted security zone or the memory associated with the subordinate trusted security zone. When the trusted application executes in the subordinate trusted security zone likewise the master trusted application does not have visibility into either the subordinate trusted security zone or into the memory associated with the subordinate trusted security zone.

Over time the resource needs of different trusted applications associated with different subordinate trusted security zones may change. The master trusted application may be able to reallocate trusted security zone resources among the subordinate trusted security zones based on analysis of historical resource usage reports provided by the subordinate trusted security zones. For example the master trusted application may take resources away from a subordinate trusted security zone that historically uses only about 35 of its resources and reallocate them to a different subordinate trusted security zone that has requested an increase in dedicated resources. A variety of different algorithms for assessing the utilization of subordinate trusted security zones and for reallocating these resources are disclosed further below.

The different subordinate trusted security zones may be associated with different credit card accounts different banking accounts and different interface and application packs. For example one subordinate trusted security zone may be associated with an interface and application pack that is approved by an enterprise that employs the user of the computing device. Another subordinate trusted security zone may be associated with an interface and application pack that is associated with the private user of the computing device rather than as an employee of the enterprise. One subordinate trusted security zone may execute the enterprise interface and application pack while the user is at work or during working hours and the other subordinate trusted security zone may execute the private interface and application pack while the user is not at work or outside of working hours. As explained further below when a trusted application executes in one subordinate trusted security zone other subordinate trusted security zones are prevented from executing thereby maintaining the security of the memory associated with the executing subordinate trusted security zone. In some contexts interface and application packs associated with different subordinate trusted security zones may be referred to as different personas of the computing device.

A trusted security zone provides chipsets with a hardware root of trust a secure execution environment for applications and secure access to peripherals. A hardware root of trust means the chipset should only execute programs intended by the device manufacturer or vendor and resists software and physical attacks and therefore remains trusted to provide the intended level of security. The chipset architecture is designed to promote a programmable environment that allows the confidentiality and integrity of assets to be protected from specific attacks. Trusted security zone capabilities are becoming features in both wireless and fixed hardware architecture designs. Providing the trusted security zone in the main mobile device chipset and protecting the hardware root of trust removes the need for separate secure hardware to authenticate the device or user. To ensure the integrity of the applications requiring trusted data such as a mobile financial services application the trusted security zone also provides the secure execution environment where only trusted applications can operate safe from attacks. Security is further promoted by restricting access of non trusted applications to peripherals such as data inputs and data outputs while a trusted application is running in the secure execution environment. Likewise access to peripherals and or to memory by trusted applications associated to subordinate trusted security zones that are not executing is also restricted while another trusted application associated with a different subordinate trusted security zone is executing. In an embodiment the trusted security zone may be conceptualized as hardware assisted security.

A complete trusted execution environment TEE may be implemented through the use of the trusted security zone hardware and software architecture. The trusted execution environment is an execution environment that is parallel to the execution environment of the main mobile device operating system. The trusted execution environment and or the trusted security zone may provide a base layer of functionality and or utilities for use of applications that may execute in the trusted security zone. For example in an embodiment trust tokens may be generated by the base layer of functionality and or utilities of the trusted execution environment and or trusted security zone for use in trusted end to end communication links to document a continuity of trust of the communications. For more details on establishing trusted end to end communication links relying on hardware assisted security see U.S. patent application Ser. No. 13 532 588 filed Jun. 25 2012 entitled End to end Trusted Communications Infrastructure by Leo Michael McRoberts et al. which is hereby incorporated by reference in its entirety. Through standardization of application programming interfaces APIs the trusted execution environment becomes a place to which scalable deployment of secure services can be targeted. A device which has a chipset that has a trusted execution environment on it may exist in a trusted services environment where devices in the trusted services environment are trusted and protected against attacks. The trusted execution environment can be implemented on mobile phones and tablets as well as extending to other trusted devices such as personal computers servers sensors medical devices point of sale terminals industrial automation handheld terminals automotive etc.

The trusted security zone is implemented by partitioning all of the hardware and software resources of the mobile device into two partitions a secure partition and a normal partition. Placing sensitive resources in the secure partition can protect against possible attacks on those resources. For example resources such as trusted software applications may run in the secure partition and have access to hardware peripherals such as a touchscreen or a secure location in memory. Less secure peripherals such as wireless radios may be disabled completely while the secure partition is being accessed while other peripherals may only be accessed from the secure partition. While the secure partition is being accessed through the trusted execution environment the main mobile operating system in the normal partition is suspended and applications in the normal partition are prevented from accessing the secure peripherals and data. This prevents corrupted applications or malware applications from breaking the trust of the device.

The trusted security zone is implemented by partitioning the hardware and software resources to exist in a secure subsystem which is not accessible to components outside the secure subsystem. The trusted security zone is built into the processor architecture at the time of manufacture through hardware logic present in the trusted security zone which enables a perimeter boundary between the secure partition and the normal partition. The trusted security zone may only be manipulated by those with the proper credential and in an embodiment may not be added to the chip after it is manufactured. Software architecture to support the secure partition may be provided through a dedicated secure kernel running trusted applications. Trusted applications are independent secure applications which can be accessed by normal applications through an application programming interface in the trusted execution environment on a chipset that utilizes the trusted security zone.

In an embodiment the normal partition applications run on a first virtual processor and the secure partition applications run on a second virtual processor. Both virtual processors may run on a single physical processor executing in a time sliced fashion removing the need for a dedicated physical security processor. Time sliced execution comprises switching contexts between the two virtual processors to share processor resources based on tightly controlled mechanisms such as secure software instructions or hardware exceptions. The context of the currently running virtual processor is saved the context of the virtual processor being switched to is restored and processing is restarted in the restored virtual processor. Time sliced execution protects the trusted security zone by stopping the execution of the normal partition while the secure partition is executing.

The two virtual processors context switch via a processor mode called monitor mode when changing the currently running virtual processor. The mechanisms by which the processor can enter monitor mode from the normal partition are tightly controlled. The entry to monitor mode can be triggered by software executing a dedicated instruction the Secure Monitor Call SMC instruction or by a subset of the hardware exception mechanisms such as hardware interrupts which can be configured to cause the processor to switch into monitor mode. The software that executes within monitor mode then saves the context of the running virtual processor and switches to the secure virtual processor.

The trusted security zone runs a separate operating system that is not accessible to the device users. For security purposes the trusted security zone is not open to users for installing applications which means users do not have access to install applications in the trusted security zone. This prevents corrupted applications or malware applications from executing powerful instructions reserved to the trusted security zone and thus preserves the trust of the device. The security of the system is achieved at least in part by partitioning the hardware and software resources of the mobile phone so they exist in one of two partitions the secure partition for the security subsystem and the normal partition for everything else. Placing the trusted security zone in the secure partition and restricting access from the normal partition protects against software and basic hardware attacks. Hardware logic ensures that no secure partition resources can be accessed by the normal partition components or applications. A dedicated secure partition operating system runs in a virtual processor separate from the normal partition operating system that likewise executes in its own virtual processor. Users may install applications on the mobile device which may execute in the normal partition operating system described above. The trusted security zone runs a separate operating system for the secure partition that is installed by the mobile device manufacturer or vendor and users are not able to install new applications in or alter the contents of the trusted security zone.

Turning now to a communication system is described. In an embodiment the system comprises a mobile device a base transceiver station BTS a network a trusted service manager server computer and a computer . It is understood that the system may comprise any number of mobile devices any number of base transceiver stations any number of trusted service manager servers and any number of computers . The network may comprise one or more public networks one or more private networks or a combination thereof.

The mobile device comprises a radio transceiver a memory and a processor . The radio transceiver is configured to establish a wireless communication link with the base transceiver station . The base transceiver station may communicatively couple the radio transceiver and or the mobile device to the network and to devices that are connected to the network for example the trusted service manager server . In an embodiment the radio transceiver and the base transceiver station establish a wireless communication link according to one of a code division multiple access CDMA wireless protocol a global system for mobile communication GSM wireless protocol a long term evolution LTE wireless protocol a worldwide interoperability for microwave access WiMAX wireless protocol or another wireless communication protocol.

The processor comprises a normal security zone and a trusted security zone . Under some circumstances the processor may periodically or occasionally switch between execution in the normal security zone and execution in the trusted security zone to check for any pending operations. For example when executing in the trusted security zone the processor may pause execution in the trusted security zone start execution in the normal security zone and check if any tasks are pending attention in the normal security zone for example receiving an email or an incoming text message. When the trusted security zone is executing a sensitive operation the processor may not switch to execute in the normal security zone even if a periodic or scheduled switch interval occurs and may defer this switch until the sensitive operation being performed in the trusted security zone is completed.

The processor may be any of a microprocessor a digital signal processor DSP an application specific integrated circuit ASIC a field programmable gate array FPGA a complex programmable logic device CPLD or another type of processor. The processor may comprise a plurality of individual processor chips. The processor may comprise a single chip that encapsulates a plurality of independent logic processing units or processors for example a dual core processor or a quad core processor. As described above when the trusted security zone executes an application the normal security zone is prevented from executing applications. The memory may store both normal applications and trusted applications where trusted applications are authorized for executing in the trusted security zone . Alternatively the memory may be segmented into a normal security portion and a trusted security portion and the trusted applications may be stored in the trusted security portion of the memory .

The computer may comprise a memory and a processor . The processor may comprise a normal security zone and a trusted security zone . The memory the processor the normal security zone and the trusted security zone are substantially similar to the corresponding structures of the mobile device and will not be described separately herein. The main difference between the mobile device and the computer as it pertains to this disclosure is that the mobile device is communicatively coupled to the network by a wireless link and the computer may be communicatively coupled to the network by a wired link. In an embodiment however the computer may be communicatively coupled to the network by a wireless link such as by a wireless link to an access point in a wireless local access network WLAN that is part of the network .

Turning now to further details of the trusted security zone are described. It is to be understood that the structures and functions described with reference to the trusted security zone of the mobile device apply equally to the trusted security zone of the computer . In an embodiment the trusted security zone comprises a master trusted security zone that executes a master trusted application . In an embodiment the master trusted security zone may be associated with and or execute a plurality of different master trusted applications .

The trusted security zone may further comprise one or more subordinate trusted security zones for example a first subordinate trusted security zone a second subordinate trusted security zone and a third subordinate trusted security zone . The subordinate trusted security zones may be created at the time of manufacturing of the processor and may be fixed in number. Alternatively the subordinate trusted security zones may be dynamically created after manufacturing of the processor and may vary in number. Each subordinate trusted security zone may execute a trusted application . For example the first subordinate trusted security zone may execute a first trusted application the second subordinate trusted security zone may execute a second trusted application and the third subordinate trusted security zone may execute a third trusted application . In an embodiment the subordinate trusted security zones may be associated with and or execute a plurality of different trusted applications .

The master trusted application may perform a variety of operations or functions associated with the subordinate trust zones . For example the master trusted application may schedule which of the subordinate trust zones and or trusted applications may execute at a specific time for how long and may invoke or initiate execution of the trusted application . The master trusted application may promote the initialization of the subordinate trust zones the installation of trusted applications and or the dynamic allocation of space and or resources in the trusted security zone to the subordinate trust zones . While the master trusted application and or the master trusted security zone exercises these supervisory mediating and or promotional activities it is to be understood that the master trusted application and or the master trusted security zone has limited or no direct visibility into the processing of the trusted applications by the subordinate trusted security zones and or into the data accessed by the subordinate trusted security zones .

In an embodiment the trusted security zone is manufactured by an original equipment manufacturer of processors for example a semiconductor manufacturer to have the master trusted security zone and a fixed number of subordinate trusted security zones . The trusted security zone may comprise 2 subordinate trusted security zones 4 subordinate trusted security zones 8 subordinate trusted security zones 16 subordinate trusted security zones or more subordinate trusted security zones . In an embodiment the trusted security zone may comprise an odd number of subordinate trusted security zones . The master trusted security zone may be provisioned by the manufacturer with the master trusted application and a master key that may be presented with requests for service by the master trusted application . Additionally the subordinate trusted security zones may be provisioned by the manufacturer with a base layer of trusted security functionality or utilities.

After the mobile device is placed into service a user may wish to provision a credit card into one of the subordinate trusted security zones for example to provision a first credit card into the first subordinate trusted security zone . A first trusted service manager server may send a request to the master trusted application to provision the first credit card into the first subordinate trusted security zone via the network via the base transceiver station and via the radio transceiver . Said in other words the first trusted service manager server may send the request via a radio communication link and the mobile device may receive the request via a radio communication link. The trusted service manager server may perform the credit card provisioning while executing in a trusted security zone of the trusted service manager server and may transmit the request over a trusted end to end communication link. For further details about establishing trusted end to end communication links see U.S. patent application Ser. No. 13 532 588 filed Jun. 25 2012 entitled End to end Trusted Communications Infrastructure by Leo Michael McRoberts et al. which was incorporated by reference above.

The provisioning may be conducted in two steps. The first step may involve the trusted service manager server providing the master key to the master trusted application . The master trusted application may then provide access to the first subordinate trusted security zone to the trusted service manager server . When the trusted service manager server has gained access to the first subordinate trusted security zone the trusted service manager server may initialize the first subordinate trusted security zone with an individual key known to the trusted service manager server and not known to the master trusted application or to the master trusted security zone . Then in the second step of provisioning the trusted service manager server may send a request to the first trusted security zone including the individual key wherein the request further comprises the first trusted application and possibly additional data or information for installation in the first trusted security zone and or in a portion of memory allocated to the first trusted security zone . One or more functions that are part of a base layer of trusted security functionality that may have been installed during original manufacturing of the processor may perform this request. Alternatively the master trusted application may install the base layer of trusted security functionality during the first step of provisioning above. In this way a subordinate trusted security zone may be provisioned after manufacturing with an initial facilitation from the master trusted application and the master trusted security zone .

The subordinate trusted security zones may be used to support a variety of trusted applications and or storage of confidential information. A subordinate trusted security zone may be provisioned to support credit card transactions by installing a trusted application associated with the credit card and confidential information such as credit card account numbers credit card authentication numbers in the subordinate trusted security zone and or in a portion of memory dedicated to the subordinate trusted security zone . A subordinate trusted security zone may be provisioned to support debit card transactions by installing a trusted application associated with the debit card and confidential information such as debit card account numbers debit card personal identification number PIN and initializing an account funds balance in the subordinate trusted security zone and or in a portion of memory dedicated to the subordinate trusted security zone . A subordinate trusted security zone may be provisioned to support presenting and or storing medical records. A subordinate trusted security zone may be provisioned to present and or to store a medical treatment regime. A subordinate trusted security zone may be provisioned to support an interface and applications pack by installing one or more trusted applications associated with the interface and applications pack and confidential information in the subordinate trusted security zone and or in a portion of memory dedicated to the subordinate trusted security zone . Interface and applications packs are discussed in more detail below.

The mobile device may execute different interface and applications packs in different circumstances or in different contexts. For example an enterprise interface and applications pack may be executed when the user is at work or during working hours and a personal interface and applications pack may be executed when the user is out of work or outside of working hours. At least a portion of the subject interface and applications packs may execute in one of the subordinate trusted security zones but other portions of the interface and applications packs may execute in the normal security zone . The different interface and applications packs active under different contexts may be referred to as different personas. The present disclosure contemplates the trusted security zone supporting any number of personas for example personas associated with affinity of the user to a professional sports team one or more personal interests of the user such as astronomy bird watching stamp collecting home cooking and the like. Different personas may be associated with different users who may share a mobile device and or a computer . For example a father may be associated with a first persona provisioned in a subordinate trusted security zone a mother may be associated with a second persona provisioned in a different subordinated trusted security zone and a child may be associated with a third persona provisioned in yet a different subordinate trusted security zone.

The system may comprise other computers or servers coupled to the network that may be associated with one or more of the subordinate trusted security zones and or the trusted applications for example a server associated with one or more interface and applications pack a server associated with an enterprise persona a server associated with a private persona a server associated with a medical record repository or source a server associated with a medical treatment monitoring system or other servers. These other computers or servers may be involved in provisioning and monitoring the trusted application of the subordinate trusted security zone that they are responsible for analogously to the trusted service manager server .

In an embodiment the subordinate trusted security zones may not be initially created by the original equipment manufacturer of the processor . When a request is received by the master trusted application to access a subordinate trusted security zone for example from the trusted service manager server the master trusted application may allocate resources for and otherwise establish the subordinate trusted security zone . The master trusted application may provision a base layer of trusted security functionality or utilities into the subordinate trusted security zone . Once established in this way the provisioning of the subordinate trusted security zone may be conducted as described above.

In an embodiment one or more of the subordinate trusted security zones may be dynamically scaled in size for example a size or share of the trusted security zone allocated to one or more of the subordinate trusted security zones may be increased or decreased under some conditions. In an embodiment some of the subordinate trusted security zones may be allocated a static or fixed size while others of the subordinate trusted security zones may be dynamically scalable in size. Alternatively in an embodiment all of the subordinate trusted security zones may be dynamically scalable in size. In an embodiment one or more of the subordinate trusted security zones that are created and or initialized by the original equipment manufacturer of the processor may be configured to be dynamically scalable in size.

Under some circumstances a manager of the trusted application for example the trusted service manager server may determine that more resources are desired for executing the trusted application in the subordinate trusted security zone for example more dedicated space of the trusted security zone and or a larger dedicated portion of the memory . The manager may send a request to the master trusted application to increase the resources allocated to the subject trusted application and or the subject subordinate trusted security zone . The master trusted application may expropriate resources previously allocated to a different subordinate trusted security zone and or different trusted application and reallocate those resources to the requesting trusted application . For example the trusted service manager may request that the first subordinate trusted security zone and or the first trusted application be allocated additional resources and the master trusted application may expropriate some of the resources previously allocated to the second subordinate trusted security zone and or the second trusted application and reallocate these resources to the first subordinate trusted security zone and or the first trusted application

Alternatively in an embodiment the master trusted application may expropriate and or reduce the memory allocated to the first subordinate trusted security zone and or first trusted application and increase the memory allocated to the second subordinate trusted security zone and or the second trusted application based on a daily schedule or based on a context associated with the mobile device or the computer . For example when the working day is about to begin the master trusted application may expropriate resources from the private persona and reallocate these resources to the enterprise persona.

In an embodiment each of the trusted applications and or the base layer of functionality installed in the subordinate trusted security zones monitor their use of their own resources and provide a report of this usage to the master trusted application . In an embodiment each subordinate trusted security zone provides a report or a report update to the master trusted application when the trusted application discontinues executing. The resources may comprise a memory utilization or memory allocation in the memory . The resources may comprise a number of instructions per unit of time for example a number of MIPS millions of instructions per second that the subject trusted application consumes when executing. The trusted applications and or the base layer of the functionality installed in the subordinate trusted security zones may generate a report of memory usage and or of processor utilization. The master trusted application may calculate or determine one or more figures of merit on the resource usage of the several subordinate trusted security zones and or the several trusted applications . The master trusted application may determine an average resource usage a windowed average resource usage a maximum resource usage an average of a predetermined number of maximum resource usage a maximum resource usage that discards a predefined number of outlying maximums or other figures of merit of resource usage for each subordinate trusted security zone . A windowed average may be calculated by averaging over a contiguous subset of values for example a predefined number of the most recent set of values. For example a windowed average of memory consumption may be determined by averaging the five most recent memory consumption determinations or by averaging the ten most recent memory consumption determinations.

Based on the figure of merit of resource usage of a subordinate trusted security zone and or trusted application the master trusted application may expropriate some of the previously allocated resources from that subordinate trusted security zone and or trusted application . In some cases the master trusted application may expropriate some previously allocated resources from a plurality of subordinate trusted security zones and or trusted applications in order to reduce the impact of the expropriation of resources on any single subordinate trusted security zone and or trusted application . The expropriated resources may then be reallocated to the requesting subordinate trusted security zone and or trusted application . For example the master trusted application may reduce the memory resources allocated to the first subordinate trusted security zone and or the first trusted application based on a report of memory utilization provided by the first trusted application and may increase the memory resources allocated to the second subordinate trusted security zone and or the second trusted application

The master trusted application may be aware of the address ranges of resources for example portions of the memory that are allocated to the subordinate trusted security zones and or trusted applications . The master trusted application may selectively target resources for expropriation to attempt to keep the resources allocated to the requesting subordinate trusted security application and or trusted application as nearly contiguous as possible.

Turning now to a method is described. At block a first trusted application is invoked to execute in a first subordinate trusted security zone of the processor wherein the first trusted application is invoked by a master trusted application executing in a master trusted security zone of the processor and wherein the master trusted application has no visibility into a first memory space associated with the first subordinate trusted security zone and no visibility into the processing of the first trusted application. The master trusted application may have knowledge of or visibility to an initial instruction to execute to invoke the first trusted application. At block a second trusted application is invoked to execute in a second subordinate trusted security zone of the processor wherein the second trusted application is invoked by the master trusted application executing in the master trusted security zone of the processor and wherein the master trusted application has no visibility into a second memory space associated with the second subordinate trusted security zone and no visibility into the processing of the second trusted application wherein the first trusted application is different from the second trusted application. The master trusted application may have knowledge of or visibility to an initial instruction to execute to invoke the second trusted application. In some contexts it may be said that the master trusted security zone mediates access to the first trusted security zone and to the second trusted security zone. The first trusted application is different from the second trusted application.

Turning now to a method is described. At block a master trusted application executing in a master trusted security zone of the processor receives a request to provision a subordinate trusted security zone in the processor wherein the request comprises a master trusted security zone key wherein the request designates the subordinate trusted security zone and wherein the request defines an independent key. At block the master trusted application provisions the subordinate trusted security zone to be accessible based on the independent key. Before block the subordinate trusted security zone may be allocated structurally for example be associated with a dedicated portion of memory and may have base layer functionality and or utilities installed but the subordinate trusted security zone is not provisioned with a trusted application and is not accessible by any trusted service manager or other manager because no independent key has yet been provisioned to the subordinate trusted security zone. Alternatively the master trusted application may provision the base layer functionality and or utilities during the processing of block .

Turning now to a method is described. At block an indication of memory utilized by a first subordinate trusted security zone of the processor is transmitted to a master trusted application executing in a master trusted security zone of the processor. At block the master trusted application receives a request to increase the memory size of a second subordinate trusted security zone of the processor. At block the memory size of the first subordinate trusted security zone is reduced based at least in part on the indication of memory utilized by the first subordinate trusted security zone. At block the memory size of the second subordinate trusted security zone is increased.

An interface and applications pack IAP comprises at least one of a media file an application a web widget and a network service and may be used to customize the communication experience of using an electronic device. In an embodiment the interface and applications pack comprises at least two of these enumerated elements. In another embodiment the interface and applications pack comprises at least three of these enumerated elements. An interface and applications pack may be viewed as an aggregated set of applications web widgets network services ring tones ringback tones alerting tones wallpapers interface controls and other content targeted for the electronic device. In some contexts the interface and applications pack may be referred to as an ID pack.

As an example but not by way of limitation an interface and applications pack may be produced by an enterprise such as a retail outlet or a media business to promote its business interests to wireless communication service subscribers. The interface and applications pack when active on a electronic device may provide a control to select a store mapping web widget that provides a map of the location of products within a retail store where the map of the store is dynamically downloaded by the web widget based on a physical location of the electronic device and based on known locations of the retail stores operated by the enterprise. The map web widget may provide a control to select a search utility for finding the location of a specific product within a store.

The interface and applications pack may provide an application that automatically generates an electronic coupon and posts a notification about the coupon in a notifications display area of the electronic device. The application may generate the coupon and post the related notification based on determining that the physical location of the electronic device is in the proximity of a known retail store operated by the enterprise. Alternatively the application may generate the coupon based on the passage of a period of time without the subscriber of the electronic device making a purchase from the enterprise and based on the day of the week for example a Saturday when the subscriber of the electronic device has most often made purchases from the enterprise in the past. In an embodiment the application may determine when the electronic device is in a retail store operated by the enterprise establish a communication link with a corresponding application executing on a server in the retail store and receive information about purchases made by the subscriber of the electronic device. This purchase information may be used in the process of generating coupons described above.

The interface and applications pack may provide controls to access a network application that promotes participation in relevant social media for example to participate in a home improvement discussion forum sponsored by the subject retail store to post photographs of home improvement projects the user has completed and to post descriptions of the materials used and or innovations applied to overcome peculiar problems. The interface and applications pack may provide controls to select videos posted to the home improvement social media site for example video showing fundamental techniques of using tools.

The interface and applications pack may provide media files that define wall papers and themes that change the look and sounds of the electronic device. For example the interface and application pack may include an audio file that defines an aural alert associated with receiving a short message service SMS message that is the sound of hammering. For example the interface and application pack may include a picture file that defines the background of the display of the electronic device to be a photographic view of picturesque mountains seen through a 2 4 frame structure for a storage shed. These examples are provided to suggest the scope and power of the ID pack construct but it is understood that a great variety of implementations of the ID pack are contemplated by the present disclosure. The interface and applications pack may include alerting tones that are played when selected events occur to alert a user for example to alert the user that a simple message service SMS message has been received or to alert the user to an event or the approach of an event germane to the subject interface and applications pack.

The interface and applications pack may provide interface controls for selecting functionality provided as part of the interface and applications pack as well as for selecting functionality that may be provided by the electronic device independently of the interface and applications pack. For example the interface and applications pack may provide a control for invoking an address book widget that is provided by the firmware of the electronic device or for invoking a voice call dialing functionality. Interface controls provided by the interface and applications pack that invoke functions provided by the electronic device itself for example provided in firmware of the electronic device may be referred to as encapsulated controls. Such encapsulation of controls by the interface and applications pack may promote a more complete adaptation of the communication experience.

The interface and applications pack further comprises an automatic self installation routine that provides a user friendly means to stand up the interface and applications pack for the electronic device. The self installation routine may download applications web widgets ring tones wallpapers and other content to the electronic device. The self installation routine may include instructions to automatically configure the device s home screens such as shortcuts bookmarks and widget placement. In an embodiment a portion of the self installation routine may execute partly in the network to provision and or initialize network services ringback tones and other network provided functionality associated with the interface and applications pack. For example a portion of the self installation routine may initialize and or provision voice mail changes. The portion of the self installation routine that executes on the electronic device may invoke the portion of the self installation routine that executes in the network. In an embodiment a portion of the self installation routine may be provided by a utility built into the basic firmware or software library of the electronic device and another portion of the self installation routine may be provided as part of the specific interface and applications pack.

The interface and applications pack is experienced at one level of abstraction as a unity. For example when a user selects an ID pack for installation on the electronic device the user may perform a single selection action and the self installation routine may perform a number of separate and distinct actions to stand up the selected ID pack that are not observed by the user. When the user selects an ID pack to be active a currently active ID pack may be deactivated and the various distinct components of the selected ID pack may be brought into operation as a single global action mediated by the automatic self installation routine. The unity of experience may be further promoted by interactions among the several components of the ID pack. For example selection of controls in a web widget of the ID pack may invoke playback of audios stored in media files of the ID pack for example execution of an application of the ID pack may trigger a modification of the wallpaper presented as a backdrop for the display of the electronic device.

An interface and applications pack may be tested to assure that the aggregation of media files applications web widgets and network services interact appropriately with each other and do not impair other functionality of the electronic device. The testing may verify that the interface and applications pack interoperates with a range of different electronic devices standard firmware and or standard applications. In an embodiment the service provider may impose a constraint that interface and applications packs be provided to the electronic device from a controlled content source so that the service provider can exercise oversight and quality control of interface and applications packs. In some contexts interface and applications packs may be referred to as IDs and or as application packs. For further details about interface and applications packs see U.S. patent application Ser. No. 13 023 486 filed Feb. 8 2011 entitled System and Method for ID Platform by Jason R. Delker et al. and U.S. patent application Ser. No. 12 876 221 filed Sep. 6 2010 entitled Dynamic Loading Unloading and Caching of Alternate Complete Interfaces by Jason R. Delker et al. both of which are incorporated herein by reference in their entirety.

The DSP or some other form of controller or central processing unit operates to control the various components of the mobile device in accordance with embedded software or firmware stored in memory or stored in memory contained within the DSP itself. In addition to the embedded software or firmware the DSP may execute other applications stored in the memory or made available via information carrier media such as portable data storage media like the removable memory card or via wired or wireless network communications. The application software may comprise a compiled set of machine readable instructions that configure the DSP to provide the desired functionality or the application software may be high level software instructions to be processed by an interpreter or compiler to indirectly configure the DSP .

The DSP may communicate with a wireless network via the analog baseband processing unit . In some embodiments the communication may provide Internet connectivity enabling a user to gain access to content on the Internet and to send and receive e mail or text messages. The input output interface interconnects the DSP and various memories and interfaces. The memory and the removable memory card may provide software and data to configure the operation of the DSP . Among the interfaces may be the USB port and the infrared port . The USB port may enable the mobile device to function as a peripheral device to exchange information with a personal computer or other computer system. The infrared port and other optional ports such as a Bluetooth interface or an IEEE 802.11 compliant wireless interface may enable the mobile device to communicate wirelessly with other nearby handsets and or wireless base stations.

The keypad couples to the DSP via the interface to provide one mechanism for the user to make selections enter information and otherwise provide input to the mobile device . Another input mechanism may be the touch screen LCD which may also display text and or graphics to the user. The touch screen LCD controller couples the DSP to the touch screen LCD . The GPS receiver is coupled to the DSP to decode global positioning system signals thereby enabling the mobile device to determine its position.

It is understood that by programming and or loading executable instructions onto the computer system at least one of the CPU the RAM and the ROM are changed transforming the computer system in part into a particular machine or apparatus having the novel functionality taught by the present disclosure. It is fundamental to the electrical engineering and software engineering arts that functionality that can be implemented by loading executable software into a computer can be converted to a hardware implementation by well known design rules. Decisions between implementing a concept in software versus hardware typically hinge on considerations of stability of the design and numbers of units to be produced rather than any issues involved in translating from the software domain to the hardware domain. Generally a design that is still subject to frequent change may be preferred to be implemented in software because re spinning a hardware implementation is more expensive than re spinning a software design. Generally a design that is stable that will be produced in large volume may be preferred to be implemented in hardware for example in an application specific integrated circuit ASIC because for large production runs the hardware implementation may be less expensive than the software implementation. Often a design may be developed and tested in a software form and later transformed by well known design rules to an equivalent hardware implementation in an application specific integrated circuit that hardwires the instructions of the software. In the same manner as a machine controlled by a new ASIC is a particular machine or apparatus likewise a computer that has been programmed and or loaded with executable instructions may be viewed as a particular machine or apparatus.

The secondary storage is typically comprised of one or more disk drives or tape drives and is used for non volatile storage of data and as an over flow data storage device if RAM is not large enough to hold all working data. Secondary storage may be used to store programs which are loaded into RAM when such programs are selected for execution. The ROM is used to store instructions and perhaps data which are read during program execution. ROM is a non volatile memory device which typically has a small memory capacity relative to the larger memory capacity of secondary storage . The RAM is used to store volatile data and perhaps to store instructions. Access to both ROM and RAM is typically faster than to secondary storage . The secondary storage the RAM and or the ROM may be referred to in some contexts as computer readable storage media and or non transitory computer readable media.

I O devices may include printers video monitors liquid crystal displays LCDs touch screen displays keyboards keypads switches dials mice track balls voice recognizers card readers paper tape readers or other well known input devices.

The network connectivity devices may take the form of modems modem banks Ethernet cards universal serial bus USB interface cards serial interfaces token ring cards fiber distributed data interface FDDI cards wireless local area network WLAN cards radio transceiver cards such as code division multiple access CDMA global system for mobile communications GSM long term evolution LTE worldwide interoperability for microwave access WiMAX and or other air interface protocol radio transceiver cards and other well known network devices. These network connectivity devices may enable the processor to communicate with the Internet or one or more intranets. With such a network connection it is contemplated that the processor might receive information from the network or might output information to the network in the course of performing the above described method steps. Such information which is often represented as a sequence of instructions to be executed using processor may be received from and outputted to the network for example in the form of a computer data signal embodied in a carrier wave.

Such information which may include data or instructions to be executed using processor for example may be received from and outputted to the network for example in the form of a computer data baseband signal or signal embodied in a carrier wave. The baseband signal or signal embedded in the carrier wave or other types of signals currently used or hereafter developed may be generated according to several methods well known to one skilled in the art. The baseband signal and or signal embedded in the carrier wave may be referred to in some contexts as a transitory signal.

The processor executes instructions codes computer programs scripts which it accesses from hard disk floppy disk optical disk these various disk based systems may all be considered secondary storage ROM RAM or the network connectivity devices . While only one processor is shown multiple processors may be present. Thus while instructions may be discussed as executed by a processor the instructions may be executed simultaneously serially or otherwise executed by one or multiple processors. Instructions codes computer programs scripts and or data that may be accessed from the secondary storage for example hard drives floppy disks optical disks and or other device the ROM and or the RAM may be referred to in some contexts as non transitory instructions and or non transitory information.

In an embodiment the computer system may comprise two or more computers in communication with each other that collaborate to perform a task. For example but not by way of limitation an application may be partitioned in such a way as to permit concurrent and or parallel processing of the instructions of the application. Alternatively the data processed by the application may be partitioned in such a way as to permit concurrent and or parallel processing of different portions of a data set by the two or more computers. In an embodiment virtualization software may be employed by the computer system to provide the functionality of a number of servers that is not directly bound to the number of computers in the computer system . For example virtualization software may provide twenty virtual servers on four physical computers. In an embodiment the functionality disclosed above may be provided by executing the application and or applications in a cloud computing environment. Cloud computing may comprise providing computing services via a network connection using dynamically scalable computing resources. Cloud computing may be supported at least in part by virtualization software. A cloud computing environment may be established by an enterprise and or may be hired on an as needed basis from a third party provider. Some cloud computing environments may comprise cloud computing resources owned and operated by the enterprise as well as cloud computing resources hired and or leased from a third party provider.

In an embodiment some or all of the functionality disclosed above may be provided as a computer program product. The computer program product may comprise one or more computer readable storage medium having computer usable program code embodied therein to implement the functionality disclosed above. The computer program product may comprise data structures executable instructions and other computer usable program code. The computer program product may be embodied in removable computer storage media and or non removable computer storage media. The removable computer readable storage medium may comprise without limitation a paper tape a magnetic tape magnetic disk an optical disk a solid state memory chip for example analog magnetic tape compact disk read only memory CD ROM disks floppy disks jump drives digital cards multimedia cards and others. The computer program product may be suitable for loading by the computer system at least portions of the contents of the computer program product to the secondary storage to the ROM to the RAM and or to other non volatile memory and volatile memory of the computer system . The processor may process the executable instructions and or data structures in part by directly accessing the computer program product for example by reading from a CD ROM disk inserted into a disk drive peripheral of the computer system . Alternatively the processor may process the executable instructions and or data structures by remotely accessing the computer program product for example by downloading the executable instructions and or data structures from a remote server through the network connectivity devices . The computer program product may comprise instructions that promote the loading and or copying of data data structures files and or executable instructions to the secondary storage to the ROM to the RAM and or to other non volatile memory and volatile memory of the computer system .

In some contexts the secondary storage the ROM and the RAM may be referred to as a non transitory computer readable medium or a computer readable storage media. A dynamic RAM embodiment of the RAM likewise may be referred to as a non transitory computer readable medium in that while the dynamic RAM receives electrical power and is operated in accordance with its design for example during a period of time during which the computer is turned on and operational the dynamic RAM stores information that is written to it. Similarly the processor may comprise an internal RAM an internal ROM a cache memory and or other internal non transitory storage blocks sections or components that may be referred to in some contexts as non transitory computer readable media or computer readable storage media.

While several embodiments have been provided in the present disclosure it should be understood that the disclosed systems and methods may be embodied in many other specific forms without departing from the spirit or scope of the present disclosure. The present examples are to be considered as illustrative and not restrictive and the intention is not to be limited to the details given herein. For example the various elements or components may be combined or integrated in another system or certain features may be omitted or not implemented.

Also techniques systems subsystems and methods described and illustrated in the various embodiments as discrete or separate may be combined or integrated with other systems modules techniques or methods without departing from the scope of the present disclosure. Other items shown or discussed as directly coupled or communicating with each other may be indirectly coupled or communicating through some interface device or intermediate component whether electrically mechanically or otherwise. Other examples of changes substitutions and alterations are ascertainable by one skilled in the art and could be made without departing from the spirit and scope disclosed herein.

