---

title: System and method of mapping and protecting communication services with OAuth
abstract: In accordance with various embodiments, systems and methods which allow mapping and protecting communication services and granular access to subscriber information. Such a system can include a plurality of applications, executing on one or more application servers. The system can also include a services gatekeeper which is operable to intercept requests for access to communication services, obtain scoped authorization from a subscriber for access to specified communication services, and enable access to the specified communication services in accordance with the scope authorized by the subscriber.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09009787&OS=09009787&RS=09009787
owner: Oracle International Corporation
number: 09009787
owner_city: Redwood Shores
owner_country: US
publication_date: 20120725
---
A portion of the disclosure of this patent document contains material which is subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

The current invention relates to a system and method of mapping and protecting communication services and in particular to a services gatekeeper system and method for supporting granular authorization of third party access to communication services.

This application is related to all of the following patent applications all of which are incorporated herein by reference in their entireties including all Appendices filed therewith 

U.S. patent application Ser. No. 13 557 474 filed on Jul. 25 2012 now U.S. Pat. No. 8 806 595 issued on Aug. 12 2014 entitled SYSTEM AND METHOD OF SECURE SHARING OF RESOURCES WHICH REQUIRE CONSENT OF MULTIPLE RESOURCE OWNERS USING GROUP URI S by Nimashakavi et al. and

U.S. patent application Ser. No. 13 557 476 filed on Jul. 25 2012 now U.S. Pat. No. 8 782 411 issued on Jul. 15 2014 entitled SYSTEM AND METHOD OF EXTENDING OAUTH SERVER S WITH THIRD PARTY AUTHENTICATION AUTHORIZATION by Nimashakavi et al.

The application programming interfaces APIs of communication services expose subscriber information such as charging capability location and profile to third party applications. For API providers this creates legal and security issues. Currently no solution enables secure sharing of APIs with subscriber consent. Moreover typically if a subscriber wants to consent to access to their information by a third party application they have to give full access to the third party application and there is no solution that enables the subscriber to grant limited access of a defined scope.

Open Authorization Protocol OAuth is an open standard for authorization. OAuth allows users to for example share their private resources e.g. photos videos contact lists stored on one site with another site without having to hand out their credentials typically supplying username and password tokens instead. Each token grants access to a specific site e.g. a video editing site for specific resources e.g. just videos from a specific album and for a defined duration e.g. the next 2 hours . This allows a user to grant a third party site access to their information stored with another service provider without sharing their access permissions or the full extent of their data. However the OAuth protocol is insufficient for secure scoped sharing of communication services in a telecommunications network.

In accordance with various embodiments services gatekeeper systems and methods of mapping and protecting communication services are provided. Such systems can include a plurality of applications executing on one or more application servers. The system can include a services gatekeeper system and method for supporting granular authorization of communication services access utilizing OAuth.

Embodiments of the present invention provide a flexible mapping structure which can be used to map a plurality of different communication services to provide scoped access to subscriber information. This scoped access allows the subscriber to provide access to specific portions of their information e.g. provide access to only location information or charging information without providing access to all information.

Embodiments of the present invention enable mapping of communication services to scopes and automatically protecting communication services in a fine grained level API level method level parameter level with OAuth tokens. This solution provides flexible control of the authorization of communication services exposure of subscriber data. The scope of authorization can be defined at fine grain and or coarse grain levels.

Other objects and advantages of the present invention will become apparent to those skilled in the art from the following detailed description of the various embodiments when read in light of the accompanying drawings.

In the following description the invention will be illustrated by way of example and not by way of limitation in the figures of the accompanying drawings. References to various embodiments in this disclosure are not necessarily to the same embodiment and such references mean at least one. While specific implementations are discussed it is understood that this is provided for illustrative purposes only. A person skilled in the relevant art will recognize that other components and configurations may be used without departing from the scope and spirit of the invention.

Furthermore in certain instances numerous specific details will be set forth to provide a thorough description of the invention. However it will be apparent to those skilled in the art that the invention may be practiced without these specific details. In other instances well known features have not been described in as much detail so as not to obscure the invention.

Common reference numerals are used to indicate like elements throughout the drawings and detailed description therefore reference numerals used in a figure may or may not be referenced in the detailed description specific to such figure if the element is described elsewhere. The first digit in a three digit reference numeral indicates the series of figures in which the element first appears. Likewise the first two digits in a four digit reference numeral.

Communication services APIs expose subscriber resources such as charging capability location and profile to third party applications. For telecommunication network providers this creates legal and security issues. Currently no solution enables secure sharing of communication services APIs with subscriber consent. Moreover typically if a subscriber resource owner wants to consent to access to their subscriber resources to a third party client application they have to give full access to the third party application and there is no conventional solution that enables the subscriber to grant limited access of a defined scope. The present invention provides a services gatekeeper system and method of mapping and protecting communication services APIs as OAuth resources in a telecommunications network. In order to expose these subscriber resources securely the services gatekeeper system includes a mechanism including a flexible data structure which associates subscribers communication services APIs exposing subscriber information subscriber resources and exposes and protects the communication services using OAuth tokens. The system supports granular authorization of communication services access utilizing OAuth.

The services gatekeeper system maps a communication service into an OAuth resource. The OAuth resource is defined based on the interface and the method of the communication services. An OAuth resource can be defined at a fine grain and or coarse grain level using a flexible mapping structure. The flexible mapping structure can be used to map a plurality of different communication services to provide scoped access to subscriber information. The scoped access allows the subscriber to provide access to specific portions aspects of their information e.g. provide access to only location information or charging information without providing access to all information. Thus the services gatekeeper system enables mapping communication services to authorization scopes and automatically protecting subscriber data exposed by the communication services APIs with fine granular control API level method level and parameter level using OAuth tokens. This solution extends the OAuth protocol to provide flexible control of the exposure of subscriber data by communication services APIs.

Services gatekeeper includes pre built specialized components called communication services to allow third party developers and application partners to easily access the operator s telecommunication network capabilities. The network capabilities supported by the communication services include messaging call control terminal location payment profile and presence. Thus communication services APIs expose subscriber information such as the charging capability location and profile to third party applications and thus require subscriber authorization for access. Services gatekeeper provides flexibility and choice in how third party developers and applications can access the operator s network through multiple types of access interfaces called service facades . Service facades supported are traditional SOAP web services RESTful web services SOA web services and native telecommunication interfaces.

Services gatekeeper includes authorization server which provides an authorization service based in part on the OAuth protocol. OAuth is an open protocol which enables third party applications to obtain access to an HTTP service OAUTH resource on behalf of a resource owner by orchestrating an approval interaction between the resource owner and the HTTP service. The conventional OAuth protocol allows controlled access to resources of a resource owner for example picture files identified by a uniform resource identifier URI . However the conventional OAuth protocol has no mechanism for controlling access and scope of exposure of communication services APIs for example communication services such as location and charging. However authorization server includes extended functionality for controlling access and exposure of communication services .

As indicated above the services gatekeeper also includes a resource server which manages the protected resources for example communication services contained within a service provider s network. Resource server accepts and responds to third party application requests for access to protected resources communication services after the third party application has obtained authorization using authorization server .

The extended functionality of authorization server and resource server allows an application to charge on behalf of the subscriber using a communication service assuming the subscriber has explicitly provided approval for this application to do so. Subscribers retain complete control by authorizing usage of their subscriber resources on a granular time specific basis and can revoke this access at any time. Authorization server also supports integration for delegated authentication and authorization enabling subscriber verification through custom communication channels such as SMS and USSD. In addition authorization server enables operators to offer authentication as a service thereby allowing subscribers to more easily log into third party applications and websites by using their subscriber ID.

As indicated above the services gatekeeper includes a system for mapping and protecting communication services . The system supports granular authorization of access to communication services utilizing the authorization server . Services gatekeeper maps a communication service into the resource that is protected by authorization server . The resource mapping is based on the interface and the method of the communication services . The resource mapping includes a flexible data structure which includes a plurality of resource identifiers specifying particular communication services APIs where each resource identifier is associated with one or more parameters wherein the resource identifiers and parameters identify the scope of the subscriber information. The resource mapping provides coarse grain and fine grain level control API level method level parameter level using OAuth tokens. The mapping structure also supports a tree structure of resource definition. Accordingly resources have subresources that further define specific methods. Authorization grants to a resource also apply to its subresources. The scoped authorization is interpreted by service interceptors with respect to access to the communication services which are provided through resource server . The combined functions of authorization server resource server and service interceptors allows the subscriber to provide access to specific portions of their information e.g. provide access to only location information or charging information without providing access to all information. This solution provides flexible control of API exposure of subscriber data using services gatekeeper .

As stated above the flexible data structure supports mapping and protecting of communication services with various levels of control including API level e.g. charging presence location method level e.g. charge query refund and parameter level e.g. 5 10 . Thus the subscriber can choose which of communication services to expose to a third party what function of the communication services the third party is allowed to access and what parameters apply to the third party use of the communication services . Authorization granted to a resource also apply to its subresources. For example for a payment communication service a resource called amountTransaction can be created for charging transactions. A subresource called checkTransactionStatus is a method used to query the status of a charging transaction. The authorization to check the status of the transaction is implicit in the authorization to charge for the transaction. It is therefore unnecessary to request separate authorization from a subscriber. The tree structure enables therefore one authorization to grant an application access to a selected set of subresources of a resource which contains multiple interfaces and methods. Table I below provides an example of a resource format structure and attributes defined in an XML Schema.

The meaning of the parameter attribute of the resource format is interpreted by a custom interceptor within service interceptors . For example for the following scope value chargeAmount code 123 chargeAmount is the resource ID mapped in services gatekeeper code represents the parameter name and 123 represents the parameter value. In the above example as part of communication service access resource access a custom interceptor is written to interpret the OAuth token scope and RequestContext and validate the token usage against the authorization scope.

The following is an example of an oauth resource.xml used to create API payment resources and subresources in services gatekeeper.

In general before the client application can access the communication services it must first obtain an authorization grant from the subscriber and use authorization server to obtain the authorization grant for an access token understood by the resource server . The access token is a proxy which replaces different authorization constructs e.g. username and password which need not be disclosed to the client application . The access token can specify a scope and duration and other parameters. Moreover the resource server need not interpret and validate diverse authentication schemes as it can rely on the access token alone.

As shown in the client application for example a third party client application initiates the flow when in operation it directs the subscriber agent of the subscriber to the authorization endpoint of authorization server . The client application includes its client identifier requested scope local state and a redirection URI. The authorization endpoint receives and processes requests by client applications for permission to access protected resources such as communication services . Generally the subscriber grants permission by providing a username and password and selecting attributes or services to expose. An authorization code is granted to the client application once permission is obtained from the subscriber .

In operation the subscriber agent transmits the request from the client application to the authorization server . The authorization server authenticates the subscriber through the subscriber agent and establishes whether the subscriber grants or denies the access request. In operation the subscriber agent requests authorization from the subscriber user subscriber . In operation the subscriber provides owner credentials and authorization if the request is approved to the subscriber agent . In operation the subscriber agent relays the owner credentials and approval to the authorization server .

In operation the authorization server provides an authorization code. In operation the subscriber agent relays the authorization code to the client application . The redirection URI includes the authorization code and any local state previously provided by the client application .

In operation the client application requests an access token from the authorization server through the token endpoint. The client application authenticates with its client credentials and includes the authorization code received in the previous operation . The client application also includes the redirection URI used to obtain the authorization code for verification. The authorization server validates the client credentials and the authorization code. The authorization server also ensures that the redirection URI received matches the URI used to redirect the subscriber agent . In operation if the information received from the client application is valid the authorization server responds back with an access token .

In operation the client application then provides the access token to the resource server . Service interceptors verifies that the access token contained is valid before resource server completes the request. In operation if the request and token are valid resource server responds with the requested access to the specified protected communication services with the specified scope and parameters. The communication services being an application programming interface which exposes subscriber information such as charging capability location and profile.

Note that in the embodiment illustrated in the implementation provides a co located authorization server and authentication server. However in alternative embodiments authorization server includes an authentication interface not shown defining a custom authentication authorization flow supporting the separation of authentication and subscriber interaction from authorization in a services gatekeeper system. Using this feature the services gatekeeper can integrate any authentication mechanism available in the world for e.g. Facebook Google Subscriber or a custom identity management product . This feature enables operators of the system to use their own custom identity management systems or delegate the authentication service to a third party e.g. Facebook Facebook Google Subscriber or a custom identity management product . When a client application requests access to protected subscriber resources the services gatekeeper can communicate with a third party authentication server via a custom protocol to authenticate the subscriber s credentials. Once authorized the authentication server can notify the services gatekeeper system which then grants the application access to the requested protected communication services as previously described. See U.S. patent application Ser. No. 13 557 476 filed on Jul. 25 2012 now U.S. Pat. No. 8 782 411 issued on Jul. 15 2014 entitled SYSTEM AND METHOD OF EXTENDING OAUTH SERVER S WITH THIRD PARTY AUTHENTICATION AUTHORIZATION by Nimashakavi et al. which is hereby incorporated herein by reference.

Although the invention has been described above with respect to communication services in a telecommunications network the invention also finds application in any situation where its is necessary or desirable to provide secure scoped sharing of API resources which expose user information with user authorization.

The present invention may be conveniently implemented using one or more conventional general purpose or specialized digital computer computing device machine or microprocessor and or network of same programmed according to the teachings of the present disclosure.

Appropriate software coding can readily be prepared by skilled programmers based on the teachings of the present disclosure as will be apparent to those skilled in the software art. The invention may also be implemented by the preparation of application specific integrated circuits or by interconnecting an appropriate network of conventional component circuits as will be readily apparent to those skilled in the art.

The various embodiments include a computer program product which is a storage medium media having instructions stored thereon in which can be used to program a general purpose or specialized computing processor s device s to perform any of the features presented herein. The storage medium can include but is not limited to one or more of the following any type of physical media including floppy disks optical discs DVDs CD ROMs microdrives magneto optical disks holographic storage ROMs RAMs PRAMS EPROMs EEPROMs DRAMs VRAMs flash memory devices magnetic or optical cards nanosystems including molecular memory ICs paper or paper based media and any type of media or device suitable for storing instructions and or information. The computer program product can be transmitted in whole or in parts and over one or more public and or private networks wherein the transmission includes instructions which can be used by one or more processors to perform any of the features presented herein. The transmission may include a plurality of separate transmissions. In accordance with certain embodiments however the computer storage medium containing the instructions is non transitory i.e. not in the process of being transmitted but rather is persisted on a physical device.

The foregoing description of the preferred embodiments of the present invention has been provided for purposes of illustration and description. It is not intended to be exhaustive or to limit the invention to the precise forms disclosed. Many modifications and variations can be apparent to the practitioner skilled in the art. Embodiments were chosen and described in order to best explain the principles of the invention and its practical application thereby enabling others skilled in the relevant art to understand the invention. It is intended that the scope of the invention be defined by the following claims and their equivalents.

