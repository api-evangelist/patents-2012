---

title: RFID tag chips and tags with alternative behaviors and methods
abstract: RFID tags, ICs for RFID tags, and methods are provided. In some embodiments, an RFID tag includes a memory with multiple sections, and a processing block. The processing block may map one of these sections, or another of these sections, for purposes of responding to a first command from an RFID reader. As such, an RFID tag can operate according to the data stored in the section mapped at the time. In some embodiments, a tag can even transition from mapping one of the sections to mapping another of the sections. This can amount to the tag exhibiting alternative behaviors, and permits hiding data on the tag.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08665074&OS=08665074&RS=08665074
owner: Impinj, Inc.
number: 08665074
owner_city: Seattle
owner_country: US
publication_date: 20120620
---
This application is a continuation of co pending U.S. Provisional application Ser. No. 12 404 934 filed on Mar. 16 2009 the disclosure of which is hereby incorporated by reference for all purposes.

This application is a continuation in part of co pending U.S. patent application Ser. No. 11 872 774 filed Oct. 16 2007 entitled RFID TAG CHIPS AND TAGS WITH ALTERNATIVE MEMORY LOCK BITS AND METHODS commonly assigned herewith.

Radio Frequency IDentification RFID systems typically include RFID tags and RFID readers. RFID readers are also known as RFID reader writers or RFID interrogators. RFID systems can be used in many ways for locating and identifying objects to which the tags are attached. RFID systems are particularly useful in product related and service related industries for tracking objects being processed inventoried or handled. In such cases an RFID tag is usually attached to an individual item or to its package.

In principle RFID techniques entail using an RFID reader to interrogate one or more RFID tags. The reader transmitting a Radio Frequency RF wave performs the interrogation. The RF wave is typically electromagnetic at least in the far field. The RF wave can also be predominantly electric or magnetic in the near field. The RF wave may encode one or more commands that instruct the tags to perform one or more actions.

A tag that senses the interrogating RF wave responds by transmitting back another RF wave. The tag generates the transmitted back RF wave either originally or by reflecting back a portion of the interrogating RF wave in a process known as backscatter. Backscatter may take place in a number of ways.

The reflected back RF wave may further encode data stored internally in the tag such as a number. The response is demodulated and decoded by the reader which thereby identifies counts or otherwise interacts with the associated item. The decoded data can denote a serial number a price a date a destination other attribute s any combination of attributes and so on. Accordingly when a reader reads a tag code information can be learned about the associated item that hosts the tag and or about the tag itself.

An RFID tag typically includes an antenna system a radio section a power management section and frequently a logical section a memory or both. In earlier RFID tags the power management section included an energy storage device such as a battery. RFID tags with an energy storage device are known as active or semi active tags. Advances in semiconductor technology have miniaturized the electronics so much that an RFID tag can be powered solely by the RF signal it receives. Such RFID tags are called passive tags.

With RFID tag usage proliferating tagged items are now becoming commonplace in the consumer environment. Challenges arise because of the concern that someone would try to surreptitiously read the RFID tags of others.

Briefly the present invention provides RFID tags ICs for RFID tags and methods. In some embodiments an RFID tag includes a memory with multiple sections and a processing block. The processing block may map one of these sections or another of these sections for purposes of responding to a first command from an RFID reader. An RFID tag can operate according to the data stored in the section mapped at the time. In some embodiments a tag can even transition from mapping one of the sections to mapping another of the sections.

RFID tags according to embodiments can be used in many applications. A tag operating according to different mapped data can exhibit different behaviors for example exhibiting alternative identities of the tag or of its host item. Plus by remapping a tag can be electronically altered to enhance consumer privacy and protect sensitive data.

These and other features and advantages of the invention will be better understood from the specification of the invention which includes the following Detailed Description and accompanying Drawings.

The present invention is now described. While it is disclosed in its preferred form the specific embodiments of the invention as disclosed herein and illustrated in the drawings are not to be considered in a limiting sense. Rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope of the invention to those skilled in the art. Indeed it should be readily apparent in view of the present description that the invention may be modified in numerous ways. This description is therefore not to be taken in a limiting sense.

As has been mentioned the present invention provides RFID tags ICs also known as chips for RFID tags and methods. The invention is now described in more detail.

Reader and tag exchange data via wave and wave . In a session of such an exchange each encodes modulates and transmits data to the other and each receives demodulates and decodes data from the other. The data can be modulated onto and demodulated from RF waveforms. The RF waveforms are in a suitable range of frequencies. Such ranges include those near 900 MHz 2.4 GHz and so on.

Encoding the data in waveforms can be performed in a number of different ways. For example protocols are devised to communicate in terms of symbols also called RFID symbols. A symbol for communicating can be a delimiter a calibration symbol and so on. Further symbols can be implemented for ultimately exchanging binary data such as 0 and 1 if that is desired. In turn when the waveforms are processed internally by reader and tag they can be equivalently considered and treated as numbers having corresponding values and so on.

Tag can be a passive tag or an active or semi active tag i.e. having its own power source. Where tag is a passive tag it is powered from wave .

Tag is formed on a substantially planar inlay which can be made in many ways known in the art. Tag includes an electrical circuit which is preferably implemented in an integrated circuit IC . IC is arranged on inlay .

Tag also includes an antenna for exchanging wireless signals with its environment. The antenna is usually flat and attached to inlay . IC is electrically coupled to the antenna via suitable antenna ports not shown in .

The antenna may be made in a number of ways as is well known in the art. In the example of the antenna is made from two distinct antenna segments which are shown here forming a dipole. Many other embodiments are possible using any number of antenna segments.

In some embodiments an antenna can be made with even a single segment. Different points of the segment can be coupled to one or more of the antenna ports of IC . For example the antenna can form a single loop with its ends coupled to the ports. It should be remembered that when the single segment has more complex shapes even a single segment could behave like multiple segments at the frequencies of RFID wireless communication.

In operation a signal is received by the antenna and communicated to IC . IC both harvests power and responds if appropriate based on the incoming signal and its internal state. In order to respond by replying IC modulates the reflectance of the antenna which generates the backscatter from the wave transmitted by the reader. Coupling together and uncoupling the antenna ports of IC can modulate the reflectance as can a variety of other means.

In the embodiment of antenna segments are separate from IC . In other embodiments antenna segments may alternatively be formed on IC and so on.

The components of the RFID system of may communicate with each other in any number of modes. One such mode is called full duplex. Another such mode is called half duplex and is described below.

RFID reader and RFID tag talk and listen to each other by taking turns. As seen on axis TIME when reader talks to tag the communication session is designated as R T and when tag talks to reader the communication session is designated as T R . Along the TIME axis a sample R T communication session occurs during a time interval and a following sample T R communication session occurs during a time interval . Of course interval is typically of a different duration than interval here the durations are shown approximately equal only for purposes of illustration.

According to blocks and RFID reader talks during interval and listens during interval . According to blocks and RFID tag listens while reader talks during interval and talks while reader listens during interval .

In terms of actual technical behavior during interval reader talks to tag as follows. According to block reader transmits wave which was first described in . At the same time according to block tag receives wave and processes it to extract data and so on. Meanwhile according to block tag does not backscatter with its antenna and according to block reader has no wave to receive from tag .

During interval tag talks to reader as follows. According to block reader transmits a Continuous Wave CW which can be thought of as a carrier signal that ideally encodes no information. As discussed before this carrier signal serves both to be harvested by tag for its own internal power needs and also as a wave that tag can backscatter. Indeed during interval according to block tag does not receive a signal for processing. Instead according to block tag modulates the CW emitted according to block so as to generate backscatter wave . Concurrently according to block reader receives backscatter wave and processes it.

In the above an RFID reader interrogator may communicate with one or more RFID tags in any number of ways. Some such ways are described in protocols. A protocol is a specification that calls for specific manners of signaling between the reader and the tags.

One such protocol is called the Specification for RFID Air Interface EPC Radio Frequency Identity Protocols Class 1 Generation 2 UHF RFID Protocol for Communications at 860 MHz 960 MHz which is also colloquially known as the Gen2 Spec . The Gen2 Spec has been ratified by EPCglobal which is an organization that maintains a website at at the time this document is initially filed with the USPTO. Version 1.1.0 of this protocol is hereby incorporated by reference.

In addition a protocol can be a variant of a stated specification such as the Gen2 Spec for example including fewer or additional commands than in the stated specification and so on. In such instances some commands can be the same as those of the stated specification or equivalent to them. For example the Query command of the Gen2 Spec v.1.1.0 if duly followed by other commands results in singulating a tag from other tags. Further sending an ACK command ordinarily causes a singulated tag to return its Electronic Product Code. Another protocol may have an equivalent command i.e. one that will have the same effect. Some protocols such as the Gen2 Spec allow adding commands that implement new or different functionality. These commands are sometimes called custom commands.

Circuit includes at least two antenna connections which are suitable for coupling to one or more antenna segments not shown in . Antenna connections may be made in any suitable way such as using pads and so on. In a number of embodiments more than two antenna connections are used especially in embodiments where more antenna segments are used.

Circuit includes a section . Section may be implemented as shown for example as a group of nodes for proper routing of signals. In some embodiments section may be implemented otherwise for example to include a receive transmit switch that can route a signal and so on.

Circuit also includes a Power Management Unit PMU . PMU may be implemented in any way known in the art for harvesting raw RF power received via antenna connections . In some embodiments PMU includes at least one rectifier and so on.

In operation an RF wave received via antenna connections is received by PMU which in turn generates power for components of circuit . This is true for either or both reader to tag R T and tag to reader T R sessions whether or not the received RF wave is modulated.

Circuit additionally includes a demodulator . Demodulator demodulates an RF signal received via antenna connections . Demodulator may be implemented in any way known in the art for example including an attenuator stage an amplifier stage and so on.

Circuit further includes a processing block . Processing block receives the demodulated signal from demodulator and may perform operations. In addition it may generate an output signal for transmission.

Processing block may be implemented in any way known in the art. For example processing block may include a number of components such as a processor memory a decoder an encoder and so on.

Circuit additionally includes a modulator . Modulator modulates an output signal generated by processing block . The modulated signal is transmitted by driving antenna connections and therefore driving the load presented by the coupled antenna segment or segments. Modulator may be implemented in any way known in the art for example including a driver stage amplifier stage and so on.

In one embodiment demodulator and modulator may be combined in a single transceiver circuit. In another embodiment modulator may include a backscatter transmitter or an active transmitter. In yet other embodiments demodulator and modulator are part of processing block .

Circuit additionally includes a memory which stores data . Memory can be implemented by a single type of memory bits or by multiple types. Preferably memory includes Nonvolatile Memory NVM bits which allow at least some of data to be retained even when circuit does not have power as is frequently the case for a passive RFID tag.

In general an IC made according to embodiments includes a first set of memory bits for storing first data and a second set of memory bits for storing second data. These multiple sets of memory bits can be implemented in any number of ways. In some embodiments the first and the second sets of memory bits can be wholly distinct from each other. In other embodiments the first set of memory bits is a subset or a superset of the second set of memory bits. In yet other embodiments they may intersect. An example is now described.

Components additionally include a memory analogous to memory . Memory may include a Memory Section A and a Memory Section B . Memory Section A has a first set of memory bits and Memory Section B has a second set of memory bits. It should be kept in mind that in the embodiment of Memory Section A is shown as wholly distinct from Memory Section B but that is only in the example of . While Memory Section A does not itself coincide exactly with Memory Section B the two could have portions that overlap or one could be a subset of the other as will be recognized from the later examples.

The first set of memory bits in Memory Section A stores Data A and the second set of memory bits in Memory Section B stores Data B . Again Data A is shown as wholly distinct from Data B but that is only in the example of . Some of Data A could be shared with Data B if any of the respective memory bits are shared. And even if not shared some of Data A could be identical with some of Data B .

Components moreover include a processing block made according to embodiments. Processing block can be coupled to the tag antenna via antenna connections . As such processing block can receive via the antenna commands that have been issued by an RFID reader and can operate in conformance with these commands as specified according to a communication protocol. Such protocols have been described above. Some of these protocols define distinct called for protocol states for the tag and accordingly for processing block .

Often such protocols require a tag to send a specific response to a first interrogator command if the tag is in an internal tag protocol state that is compatible with a certain one of the called for protocol states. In some embodiments processing block can indeed be capable of being in an internal tag protocol state that is compatible with the certain called for protocol state. In some embodiments processing block can be capable of implementing the present invention with a single internal tag protocol state which can be compatible by being a state that backscatters an EPC. In other embodiments processing block can be capable of attaining also additional protocol states. Implementation wise if there are such additional protocol states processing block can have a protocol state machine to point to which internal tag protocol state the processing block is in. Whereas microscopically processing block can be in one or another internal tag protocol state macroscopically it can be said that the IC chip or the whole RFID tag is in this or that protocol state. Although the internal tag protocol states of processing block can be the same as the called for protocol states this embodiment is preferred but not necessary for practicing the invention.

Often the protocol requires a tag receiving a first interrogator command to send a specific code in response if the tag is in a state compatible with a certain one of the called for protocol states. Processing block or its host tag can start by being in such a compatible state or it can start from a different state and then transition to the compatible state. Transitioning can be performed in any number of ways. In some embodiments transitioning can happen in response to receiving one or more preliminary commands etc. In fact a number of protocols require such transitioning and specify how it is to take place. Often this transitioning is performed as part of the tag becoming singulated from other tags.

If processing block is in a state compatible with the certain called for protocol state it may be able to send a reply code as the specific code in response to the first command. Sending the reply code can be in conformance with the protocol. A protocol state has been called compatible for purposes of this document in that the reply code is indeed sent with such conformance whether it is merely a compatible protocol state or the exact protocol state.

Processing block can additionally map either the first set of memory bits that are part of Memory Section A or alternatively the second set of memory bits that are part of Memory Section B . If processing block maps the first set of memory bits in Memory Section A which stores the first data then the reply code can be a first code that is derived at least in part from the mapped first data. Alternatively if processing block maps the second set bits in Memory Section B which stores the second data then the reply code can be a second code. The second code derived at least in part from the mapped second data is often different from the first code.

It will be further understood that while only two memory sections are shown among components the invention is not so limited. For example there could a third memory section with a third set of memory bits for storing third data. A processing block according to some embodiments can map the third set of memory bits instead of the first or second such that if the processing block were to receive the first interrogator command while in a state compatible with a certain one of the called for protocol states the reply code could be a third code derived at least in part from the third data and different from the first code and the second code.

In general an IC made according to embodiments optionally also includes a behavior indicator. If provided the behavior indicator may indicate which of the first set and the second set of memory bits is being mapped by the processing block. In the example of components additionally include an optional behavior indicator . If provided behavior indicator indicates either the first set of memory bits in Memory Section A or the second set of memory bits in Memory Section B . Accordingly behavior indicator if provided further indicates either Data A or Data B .

A behavior indicator is not required explicitly by the invention. In some embodiments the behavior state is indicated instead by the context examples of which will be given later in this document.

If provided behavior indicator can be implemented in any number of ways. In some embodiments but not necessarily all the behavior indicator is encoded in one or more values stored in respective one or more memory cells of the IC. This is depicted in by showing optional behavior indicator as straddling the boundary of tag memory . If the behavior indicator is indeed encoded in one or more memory values then these values can even be values of the first data the second data etc.

The invention also includes methods. Such methods according to embodiments are now described more particularly.

At optional operation a processing block for an RFID tag IC acquires power. This power acquisition can be performed by rectifying the power from a wave of an RFID reader.

At optional next operation there is an adjustment of which memory bits the processing block maps for purposes of responding to a first command by a reader in the event that this first command is indeed received. Operation to the extent it is performed will be described later in this document. Whether operation is performed or not its outcome is a mapping state or alternatively a mapping state which are further included with flowchart . Mapping state corresponds to a first set of bits being mapped by the processing block such as those bits included in Memory Section A of . Mapping state corresponds to a second set of bits being mapped by the processing block such as those bits included in Memory Section B .

At optional next operation one or more preliminary commands are received. These can be per the protocol for singulating the tag for performing other functions and so on.

At optional next operation the processing block can transition to a protocol state that is compatible with the certain called for protocol state for processing the first command as per the above. Operation can be in response to operation or not. In addition it should be kept in mind that operation is optional because the processing block may start by being in that compatible protocol state.

At next operation the first command is indeed received according to a protocol that the reader is using. Typically such a protocol defines distinct called for protocol states for the tag and further requires the tag to send a specific code in response to the first command if the tag is in a state compatible with a certain one of the called for protocol states. Examples of the first command include commands that request the tag s Electronic Product Code EPC Tag IDentifier TID a portion of the User Memory UM and so on. More examples are described later in this document. At operation the first command is received at sufficient power for the tag to respond. By sufficient it is meant that the tag would ordinarily send the specific code without invoking any error codes of the type used to signify insufficient power.

At optional next operation the method inquires which set of bits is mapped by the processing block for responding to the first command. The answer can be the indicated mapping state or alternatively the indicated mapping state as per the above. In addition the answer can be derived from the behavior indicator if provided.

If the answer is mapping state then at next operation a first code is sent back in response to the first command as the specific code requested by the first command. The first code is derived at least in part from the mapped first data as per mapping state .

Alternatively if the answer is mapping state then at next operation a second code is sent back in response to the first command as the specific code requested by the first command. The second code is derived at least in part from the mapped second data as per mapping state .

Regardless of whether method or components are considered the tag sends back a reply code which is either the first code or the second code depending on whether the tag is in mapping state or mapping state . In either case the reply code of the invention is the intended reply to the first command and not normally an error code for the first command not being right or its power not being sufficient to respond or the like. Some implications are now described in more detail.

In addition two different behavior states can be considered for the processing block or the tag IC or for the whole tag. Behavior state corresponds to mapping state and is characterized by the reply code being the first code of operation . Behavior state corresponds to mapping state and is characterized by the reply code being the second code of operation . Behavior indicator if provided accordingly indicates whether the processing block behaves according to the first behavior state or alternatively the second behavior state .

Because the first code is generally different from the second code the processing block and thus the IC chip and thus also the whole tag may be considered as exhibiting alternative behaviors. These alternative behaviors can be characterized as the tag or its IC chip or its processing block being in one of behavior states . Behavior states for purposes of this document are distinct from the protocol states.

These alternative behaviors can be used to advantage in tagging schemes for RFID solutions. In particular these alternative behaviors may amount to a single tag appearing to be two or more different tags at different times depending on whether the reply code is the first code or the second code. Moreover in embodiments where the reply code is indeed sent back with complete conformance the reader that has sent the first command may be unable to tell whether the tag is further able to behave differently and send a different reply code to the first command. In some embodiments the existence of an alternative behavior may be communicated to the reader by encoding in the first code an appropriate message and so on. In that case RFID readers and Application Programming Interfaces can be made for detecting the message and so on. In other embodiments the existence of an alternative behavior may not be communicated.

In the above examples the behaviors are indicated as different only as to which code is sent as the reply code but the invention is not limited this way the behaviors can be further different in additional ways. For example backscattering while in behavior state can be at a different power level than in behavior state for example by partially detuning the tag antenna and so on. Moreover the first or the second code can be rendered from data as it is stored in respective memory fields or by scrambling the data encrypting the data and so on.

In addition whether backscattering takes place at all can depend on other parameters like the intensity of the wave of the reader. For example in some embodiments when in behavior state the reply code is not sent unless the first command has been received at a power level higher than a first level. In other embodiments when in behavior state the reply code is not sent unless the first command has been received at a power level different from the first level. This way the two behaviors can be further differentiated as per the above.

The transitioning of corresponds to the tag changing behavior which can in some embodiments be tantamount to substituting one tag for another. This is further advantageous when the tag performs the transitioning electronically without the need for physical handling. Electronic transitioning confers benefits when the tag is already on a host item and thus difficult or costly to access physically for substituting with another tag as is described later in this document.

The transitioning of can be reversible or not. In some embodiments after transitioning the processing block can no longer map the first set of memory bits. In others after transitioning the processing block is further operable to transition back to mapping the first set of memory bits. In this latter case if the processing block were to then receive the first command while in a state compatible with a certain one of the called for protocol states it would cause the tag to send in response the first code.

The transitioning of can be implemented by the processing block transitioning from mapping the first set of memory bits to mapping the second set of memory bits. This alternative mapping was first hinted at as optional operation in the method of and is now described in more detail.

At a next operation there can be a change as to which bits are mapped for responding to the first command. If so mapping can be arrived at.

At optional further operation there can be a further change as to which bits are mapped for responding to the first command. If so mapping can be returned to.

Flowchart also includes optional operations . According to those the transitioning of operations takes place only if respective conditions A B are met. As such the tag behavior can be controlled and be switched when a desirable event takes place. There are many such possible desirable events. For example transitioning can be performed in response to the processing block gaining power after having lost power or after a certain period of time.

In some embodiments the tag IC can further include a counter which can count responsive to events. These events can be any suitable type of events such as number of times the tag was singulated or other events related to attempts to use attempts to match an on board password or expected lifetime of the tag. In such embodiments transitioning can be performed in response to the counter having counted to a limit. If the counts are small the reply code could be the EPC whereas if multiple successive inventorying attempts are made the tag could reply to some with one identity and to others with an alternate identify.

Additionally in some embodiments the tag IC can further include a volatile memory cell which can store a value temporarily and then discontinue storing the value. Discontinuing would happen if for example the volatile memory cell discharges. In such embodiments transitioning can be performed in response to the volatile memory cell discontinuing storing the value while the processing block is powered. Under the right conditions the volatile memory cell can optionally be further refreshed etc.

Moreover in some embodiments transitioning can be performed in conjunction with otherwise transitioning from one of the tag s protocol states to another. In other embodiments transitioning can be performed without transitioning from one of the tag s protocol states to another.

Gating events can be used for preventing the inadvertent or unauthorized switching of behavior states. For example in some embodiments a behavior switch enable command must be received by the tag first before the transitioning can take place and so on. Such commands can further be validated with passwords etc. In others the current behavior state can be locked.

In a number of embodiments transitioning is performed in response to the processing block receiving a behavior change command from the RFID reader. The behavior change command can be distinct from the first command or derived from the first command. Additionally the behavior change command may be distinct from the same as or derived from the behavior switch enable command.

If the behavior indicator is implemented it can change which of the first set and the second set of memory bits it indicates in response to the behavior change command. Moreover if the behavior indicator is encoded in one or more values stored in memory cells of the IC the behavior change command can cause the behavior indicator to be changed by rewriting the one or more values.

There are many possible embodiments for such a behavior change command. If a tag further operates according to a protocol the behavior change command may be a custom command preferably defined so as to not contradict the protocol.

It is desirable to control when the behavior change command will actually cause the tag to transition from one behavior state to the other. Controlling can be performed in a number of ways. For example in some embodiments the protocol by which the reader sends the first command defines at least two tag protocol states and the processing block is capable of being in either one of these two protocol states. In some such embodiments transitioning from one behavior state to another is performed only if the processing block is in one of these protocol states but not in the other. For example if the tag adheres to the Gen2 Spec v.1.1.0 the tag may only implement the behavior change command if it is received while the tag is in the Secured protocol state but not in another state or set of states.

Moreover in some embodiments transitioning can be conditioned on authenticating the reader transmitting the behavior change command. For example in some embodiments a password is stored in the IC such as in tag memory. Then transitioning is performed only if the behavior change command meets a preset condition about the password. The password can be derived at least in part from one of the first data and the second data. In some embodiments the password is a tag access password equivalent to the access password specified in the Gen2 Spec v.1.1.0. In the above example if the tag adheres to the Gen2 Spec v.1.1.0 for the tag to reach the Secured protocol state the reader must first send the access password if the tag s stored access password has a nonzero value. Plus more than one password can be implemented for example depending on the direction of the transition. Moreover transitioning can be performed only if the behavior change command is received at a power that exceeds a threshold etc.

In table columns indicate the data in each of the designated memory sections. The two columns represent alternative data and corresponding alternative tag behaviors. Mapping selects the data which thereby controls the behavior accordingly. For each behavior data can be selected from either column or column . In some embodiments a particular type of data can be used only for a particular type of behavior e.g. EPC for reported written product identity . In others as will be seen below some types of data may be used in more than one type of behavior.

In map the logical addressing of each of the four shown memory banks begins at zero 00 h . The Gen2 Spec v.1.1.0 allows the physical memory underlying map to be vendor specific meaning that it could comprise a single memory element multiple memory elements etc. The Gen2 Spec v.1.1.0 merely requires that the tag logically expose map in its interactions with a reader. Gen2 v1.1.0 commands that read or write tag memory have a MemBank parameter that selects one of the shown four banks and an address parameter to select a particular memory location within that bank.

Of protocol states Ready Arbitrate and Reply are related to a tag being singulated by an RFID reader from among a population of RFID tags. In a number of prior art tags a state machine is in one of these protocol states at a time. Some of the protocol commands cause the state machine to switch between protocol states.

As shown in in some of these protocol states a tag may not reply to a reader with its EPC but in certain other protocol states it can. Those protocol states in which it can are Acknowledged Open and Secured. In all of them a tag will backscatter its EPC in response to an ACK command which in the above is called the first command. In addition to the EPC more codes may be backscattered in response to the ACK command as denoted by the plus in .

Memory has fields . . . of memory bits. These fields of memory bits are shown to be of the same size but that is only as an example and not as a limitation. Each field . . . may store data. In this embodiment some of the stored data is used differently in different designations and therefore causes different tag behaviors.

In first designation a section is designated as EPC which includes fields . In addition a section is designated as TID which includes fields . Moreover a section is designated as User Memory UM which includes fields . In some embodiments these fields are in conformance with the applicable sections of .

In second designation a section is designated as EPC which includes fields . In addition a section is designated as TID which includes only field . No other sections are indicated. Again these can be in conformance with the applicable sections of .

It will be observed the data of field appears in both designations and in both as an EPC. Its relative location however is different in each of designations .

It will be further observed the data of field also appears in both designations but it is treated differently. In first designation the data of field is part of the TID section whereas in second designation the data of field is part of the EPC section .

In first designation is intended as a general example in that it need not conform to any specification. Moreover first designation can be for a memory that is compliant with the Gen2 Spec v.1.1.0. For example field can be considered as the Reserved Memory of and so on.

It will be appreciated that a detailed memory map for a tag that can behave as in will not be as simple as that of because the tag can expose more than one memory map. Instead partial memory maps can be used one for each behavior. Assuming for the time being that the tag can expose two such behaviors the individual partial maps can informally be called the first map and the second map the public map and the private map and so on. But such maps are only partial in that neither describes the memory completely by itself. Instead each partial map describes only one of the designations in the memory and thus characterizes only one of the possible multiple behavior states.

An example is now described of two alternative partial memory maps for a single tag memory. In this example the designations are intended to work with commands of the Gen 2 Spec v.1.1.0. In other words these designations show sections that would be addressed by a compliant RFID tag upon receiving such commands for responding to them.

Attention is now drawn to the fields of memory bits with physical addresses in both and . These bits when the processing block is in behavior state A have logical addresses in the TID section whereas when the processing block is in behavior state B they have logical addresses in the EPC section. As such in some embodiments a different command will read them when the tag is in behavior state A versus when it is in behavior state B . Of course in other embodiments a common command could read them regardless of whether the tag is in behavior state A or in behavior state B meaning that the command has a common kernel but different Membank and address fields in each instance.

Transitioning from mapping the first set of memory bits to mapping the second set of memory bits is sometimes called remapping. For example a processing block could remap from the partial map of to that of .

As said partial detailed maps and describe a single memory that can expose different alternative mappings. Note that in either of them explicit behavior indicator is optional.

As mentioned above in some embodiments a behavior indicator is implemented explicitly. In some of these embodiments the behavior indicator is encoded in one or more values stored in respective one or more memory cells of the IC.

There are a number of ways for a stored behavior indicator to indicate which of a tag s partial memory maps the tag is to use. In some embodiments a logical memory address when combined with the one or more values encoding the behavior indicator may produce a physical address that the processing block uses to indicate the first set of memory bits or alternatively the second set of memory bits. In some embodiments the one or more values that encode the behavior indicator can be used as inputs to a multiplexer or a lookup table that remaps the logical addresses to the first set of memory bits or alternatively to the second set of memory bits. Many other methods are possible as will be obvious to one of ordinary skill in the art.

A behavior indicator can be explicitly implemented but an explicit behavior indicator is not necessary for practicing the invention. As will be seen indicating the behavior can be performed implicitly using components that serve other functions.

In a number of embodiments the processing block is capable of transitioning between two or more internal tag protocol states. As mentioned above the internal tag protocol states can be the same as those called for by the protocol under which the first command was sent or different. If different at least one can be compatible with the called for state for responding to the first command.

Moreover in some embodiments the processing block can be in at least two distinct internal tag protocol states each of which is a compatible version of a single called for protocol state. In other words the command could call for the tag to be in a single internal protocol state but the tag would actually be in one of two internal states each of which is a compatible version of the called for protocol state. The processing block could map the first set of memory bits while in one of these states and the second set of memory bits while in the other state. These two internal states can be otherwise similar in fact even identical for purposes of the protocol. If identical the RFID reader might not know the difference.

This multiplicity of compatible states can be best described by considering the processing block as a state machine that transitions between its possible internal tag protocol states. Each internal protocol state determines what functions the tag can do how the tag should respond to which commands which behavior the tag exhibits and so on. In such embodiments at least two of the possible internal tag protocol states are compatible with a single called for protocol state and are otherwise two different versions of the same possible internal state for some purposes of the tag. In other words if the state machine is in either one of these two states when the first command is received the tag will send in response a reply code in conformance with the protocol the reply codes potentially being different depending on the memory designations for the two states. Two embodiments are now described. These embodiments build on the above described protocol of but that is only by example and not by limitation.

In some embodiments for additional security it is desirable to restrict when remapping can take place. In some embodiments the processing block can remap only while in some of its possible internal tag protocol states. More particularly it is convenient to think of the internal tag protocol states possible for the processing block as belonging in different subsets. Each subset includes a number of possible internal tag protocol states or just one internal tag protocol state. In some of these embodiments remapping can be performed if the processing block is in one of the internal tag protocol states of a second subset but not of a first subset. For example if the processing block is capable of the internal protocol states of it might be able to remap only from the Secured state.

The first and second subgroups of internal protocol states that have to do with when remapping is permitted should not be confused with those of where mapping is merely different such as in and . For example in the states in subgroup map the first set while those in subgroup map the second set. Remapping could happen from any state or be restricted to happen only from state Secured A or state Secured B. Similarly with the example of remapping can be permitted only by transitioning to state Secured A or to state Secured B.

In some embodiments there are additional restrictions or combinations of restrictions for the processing block to even enter that special internal protocol tag state or states from which remapping is possible. Such special states were characterized above as being in the second subset. For a first example while some commands may require a minimum power level to be executed the processing block may be unable to enter a state of the second subset unless it receives power at a higher level than the minimum. For a second example a password can be stored in the IC and the processing block is capable of entering one of the internal tag protocol states in the second subset only if the behavior change command meets a preset condition about the password. An example of that again is if remapping is permitted only from the Secured internal tag protocol state or a version of that Secured state in which case the password could be the Access password of the Gen2 spec v1.1.0.

Returning to when there is a transition from first designation to second designation some data becomes harder to read or even unreadable with an RFID reader. This hard to read data includes all of User Memory plus the data of bit field . Embodiments using this advantage of the invention are now described.

The tag can transition between behavior states using one or more behavior change commands. Behavior change commands also called privatize commands can be used to cause a tag to transition from behavior state to behavior state . Similarly behavior change commands also called publicize commands can be used to cause a tag to transition from behavior state to behavior state .

As will be seen an RFID tag can alternate between these behavior states for increased consumer privacy. Indeed items that consumers buy can be tagged with such RFID tags according to embodiments. When an item is in the supply chain its tag can be in behavior state greatly facilitating its handling and thus generating cost savings. When the item is sold its RFID tag can be caused to transition to behavior state for increased consumer privacy. In some of these embodiments when the item is returned the RFID tag can be caused to transition back to behavior state and so on.

In another embodiment an RFID tag can alternate between behavior states for the purpose of inhibiting the counterfeiting of genuine items. When an item is in the supply chain its tag can be in behavior state thereby obscuring one or more of the tag s memory fields from counterfeiters. As described above the counterfeiter can be prevented from transitioning the tag to behavior state by a password or other security feature. A counterfeiter not being able to view the obscured information when the tag is in behavior state cannot easily clone or duplicate the RFID tag. A legitimate distributor retailer or law enforcement personnel can cause the tag to transition to behavior state and observe the obscured information thereby determining that the item to which the tag is attached is genuine or a fake.

The behavior change commands can be implemented in any number of ways. They can be the same as each other or different. Or they may be differentiated by one of their fields or one of their parameters. Or they can be a parameter less command that causes the tag to toggle between behavior states and or the like.

If it is desired to work with a protocol that does not normally include such commands then the behavior change commands can be created as custom commands additional to the protocol. When so doing it is desirable to take the whole protocol into account so as to not arrive at an inconsistent scheme. In addition other commands in the protocol can be consulted to determine the aspects that need caring for to avoid such an inconsistency.

More particularly the behavior change command can be implemented first by a command code. Its bits can be chosen in view of other commands for their usual lengths and formats but beyond that the exact choice of 0s and 1s is merely a design choice. The behavior change command can optionally also have fields and a payload. One of its bits can be a code for the behavior indicator to be written in tag memory.

In addition a tag can have rules as to when to process the behavior change command and when not to as already mentioned above. It can also have rules as to what to backscatter if anything depending on whether the behavior change command is implemented successfully or received but not implemented or if the tag is unable to implement the command because of an error condition and so on. Error conditions can be for example if the behavior change command is received with insufficient power or an invalid handle etc. In addition these rules can specify what happens at different internal tag protocol states and whether there is a transition between them too.

Memory has a field for writing a code that corresponds to the host item. In this example field stores a code with the value CEREAL such as would be used for a cereal box. In designation section is the EPC which includes field . Accordingly if the tag is inventoried it will report the contents of section including field for pre sale logistics handling and the like.

A privatize command can transition memory to designation for example when the item is sold with the tag still attached. In an additional field of memory sale information can be written for purposes of facilitating returns legitimizing the sale loss prevention warranty and the like. In some embodiments the sale information can be encrypted. This writing can take place prior to in conjunction with or even after the sale it can also take place in conjunction with the privatize command being received. Moreover in designation section is the EPC which includes field but not . Accordingly if the tag is inventoried it will report the contents of field but not those of field thus enhancing consumer privacy.

A publicize command can transition memory to designation for example when the item is returned with the tag still on it. In an additional field of memory return information can be written. This writing can take place in conjunction with or after the return it can also take place in conjunction with the publicize command being received. It will be observed that while designation provides for the use of field it is otherwise the same as designation for purposes of what can be read easily. In particular in designation section is again the EPC which includes again field . Accordingly if the tag is inventoried it will report the contents of section including field for post return logistics handling and the like.

Referring to examples are now provided for illustrating uses of the invention in retail applications. Referring first to three domains are examined namely domain of a store domain of a supply chain that is used for goods to reach the store and domain of a consumer that might purchase the goods from the store.

Referring to goods are shown in supply chain domain as they are being brought to the store. These goods might be processed in distribution centers then trucked to the store and so on. Three items are shown in this example namely a loaf of bread a carton of milk and a box of cereal tagged respectively with RFID tags made according to embodiments.

In this example each of RFID tags is capable of being either in a behavior state or in a behavior state . Behavior state corresponds to the tag being easily readable similarly to what was described above for behavior state . Behavior state corresponds to an obscured privacy state similarly to what was described above for behavior state .

As per each of RFID tags is in the easily readable behavior state . If interrogated by a reader tag would respond with a code for bread tag would respond with a code for milk and tag would respond with a code for cereal . The individual memories of the tags can be as shown by pre sale designation of .

In the subsequent drawings to reduce complexity the individual goods are no longer shown. Only their tags are shown and are considered attached to the goods.

Like in tags if interrogated by a reader in would again respond with respective codes for readings of bread milk and cereal respectively although other embodiments are also possible for example in which the store remaps the codes or adds store or sale information to the tags prior to sale.

In reader sends privatize commands . Accordingly each of tags transitions from behavior state to behavior state . Their individual tag memories can now become as shown by designation of . This memory remapping can increase consumer privacy protect sensitive retailer information or both as per the above.

These readings XX1 XX2 XX3 can be harder to decode than the respective readings of bread milk and cereal respectively. For example readings XX1 XX2 XX3 can correspond to the sale information in field in . The sale information can be unprotected but it is still less revealing than the item information. Moreover this sale information or other information can be encrypted by the store and thus even harder to decode. In other embodiments the readings can be all identical further confounding any unauthorized efforts to read them. An example is shown in later in this document.

Not shown in are possible readers located at the store exits which in embodiments can read the XX1 XX2 and XX3 to determine the legitimacy of a sale without necessarily knowing that XX1 corresponds to bread XX2 to milk and XX3 to cereal. In fact an exit reader seeing a code that starts with XX might be configured to not sound an alarm whereas the same reader seeing an un remapped code bread might sound an alarm indicating that the item was being stolen. A person with ordinary skill in the art will recognize that the present invention and the embodiments described herein can implement the functions of Electronic Article Surveillance EAS by appropriate use or absence of the sale information in designation of for items passing through a store exit.

As was mentioned above restrictions can be optionally placed in certain of the operations of the invention for additional security. Some such restrictions are to require higher power for some of the more sensitive operations. Two more examples are now described.

Tag perceives the wave as having a large intensity because the reader is close within a radius R. Accordingly depending on embodiments tag may respond with obscured reading XX3 or with bread because a nearby reader close to the consumer is presumed to be legitimate.

Tag perceives the wave as having a low intensity because the reader is far outside radius R. While tag is capable of responding depending on embodiments it may not do so or it may respond with an obscured reading because it is in its obscured privacy state.

Tag perceives the wave as having a large intensity because the reader is close within a radius R. Accordingly tag switches its behavior state.

Tag perceives the wave as having a low intensity because the reader is far outside radius R. While tag is capable of switching its behavior state it does not do so thereby preventing tag from exposing its sensitive or hidden information. As described previously tag detecting the low intensity wave could simply choose not to implement the behavior change command or it could choose not to enter the internal protocol state where the behavior change command is allowed and thereby prevent implementing the behavior change command. Reader would have to be brought closer where the consumer could presumably clearly see it in order for tag to receive wave with sufficient intensity for tag to change its behavior state.

It will be recognized that the invention permits storing information in a tag such that this information is readable only when the tag is in certain behavior states. Sensitive information can thus be stored such as warranty information or passwords while at the same time other information can be exposed in place of the sensitive information. Storing can be in different places of the memory so as to be very hard for an unauthorized person to read. A tag can travel for example through a portion of the supply chain while not revealing the sensitive information. There are a number of such entities that can use this feature. For example a legitimate manufacturer may be concerned about their goods being counterfeited or a tag manufacturer may be concerned about their tags being counterfeited etc.

Numerous details have been set forth in this description which is to be taken as a whole to provide a more thorough understanding of the invention. In other instances well known features have not been described in detail so as to not obscure unnecessarily the invention.

The invention includes combinations and subcombinations of the various elements features functions and or properties disclosed herein. The following claims define certain combinations and subcombinations which are regarded as novel and non obvious. Additional claims for other combinations and subcombinations of features functions elements and or properties may be presented in this or a related document.

