---

title: Radio interface layer design for smartphones
abstract: A method and system communicates a request between a user application and a modem within a wireless communication device. A radio interface layer (RIL) architecture includes an application framework which receives a hardware specific request as a first application programming interface (API) call from the user application. In response to receiving the request, the application framework sends a corresponding, second API call to a vendor radio interface layer (Vendor RIL) which provides an interface configured for communicating with a specific type of transceiver or modem. In one embodiment, the second API call is transmitted via a Java Native interface (JNI). The JNI provides access to software programs associated with the transceiver, which programs are written in a language that is different from Java. The Vendor RIL communicates with the modem using a modem protocol software corresponding to the specific type of modem to perform commands associated with the request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08995966&OS=08995966&RS=08995966
owner: Google Technology Holdings LLC
number: 08995966
owner_city: Mountain View
owner_country: US
publication_date: 20121205
---
The present disclosure relates in general to wireless communication devices and in particular to radio transmission in wireless communication devices.

Traditionally wireless communication devices include radio interface layer RIL structures that are designed to provide multiple abstraction layers. Although these wireless communication devices generally utilize a single type of modem over the life time of the wireless communication device abstraction layers supporting implementation of various different types of modems are included within these traditional RIL structures. Furthermore whenever a request is initiated these traditional RIL structures must dynamically load libraries and other software components relevant to a specific modem as part of an abstraction process although a single type of modem is implemented.

The illustrative embodiments provide a method and system for communicating a request between a user client application and a transceiver within a wireless communication device. A radio interface layer RIL architecture includes a hardware dependent application framework which receives a hardware specific request as a first Application Programming Interface API call from the user application. In response to receiving the request the hardware dependent application framework sends a corresponding second API call to a vendor radio interface layer Vendor RIL which provides an interface configured for communicating with a specific type of transceiver or modem. In one embodiment the second API call is transmitted via an inter language translation interface such as a JAVA Native interface JNI . The JNI provides access to software programs directly associated with the transceiver which programs are written in a language that is different from Java. The Vendor RIL communicates with the transceiver using transceiver protocol software corresponding to the specific type of transceiver to perform a command associated with the request.

In the following detailed description of exemplary embodiments of the disclosure specific exemplary embodiments in which the various aspects of the disclosure may be practiced are described in sufficient detail to enable those skilled in the art to practice the invention and it is to be understood that other embodiments may be utilized and that logical architectural programmatic mechanical electrical and other changes may be made without departing from the spirit or scope of the present disclosure. The following detailed description is therefore not to be taken in a limiting sense and the scope of the present disclosure is defined by the appended claims and equivalents thereof.

Within the descriptions of the different views of the figures similar elements are provided similar names and reference numerals as those of the previous figure s . The specific numerals assigned to the elements are provided solely to aid in the description and are not meant to imply any limitations structural or functional or otherwise on the described embodiment.

It is understood that the use of specific component device and or parameter names such as those of the executing utility logic and or firmware described herein are for example only and not meant to imply any limitations on the described embodiments. The embodiments may thus be described with different nomenclature and or terminology utilized to describe the components devices parameters methods and or functions herein without limitation. References to any specific protocol or proprietary name in describing one or more elements features or concepts of the embodiments are provided solely as examples of one implementation and such references do not limit the extension of the claimed embodiments to embodiments in which different element feature protocol or concept names are utilized. Thus each term utilized herein is to be given its broadest interpretation given the context in which that terms is utilized.

As further described below implementation of the functional features of the disclosure described herein is provided within processing devices and or structures and can involve use of a combination of hardware firmware as well as several software level constructs e.g. program code and or program instructions and or pseudo code that execute to provide a specific utility for the device or a specific functional logic. The presented figures illustrate both hardware components and software and or logic components.

Those of ordinary skill in the art will appreciate that the hardware components and basic configurations depicted in the figures may vary. The illustrative components are not intended to be exhaustive but rather are representative to highlight essential components that are utilized to implement aspects of the described embodiments. For example other devices components may be used in addition to or in place of the hardware and or firmware depicted. The depicted example is not meant to imply architectural or other limitations with respect to the presently described embodiments and or the general invention.

The description of the illustrative embodiments can be read in conjunction with the accompanying figures. It will be appreciated that for simplicity and clarity of illustration elements illustrated in the figures have not necessarily been drawn to scale. For example the dimensions of some of the elements are exaggerated relative to other elements. Embodiments incorporating teachings of the present disclosure are shown and described with respect to the figures presented herein.

With specific reference now to there is depicted a block diagram of an example wireless communication device within which the functional aspects of the described embodiments may be implemented. Wireless communication device represents a device that is adapted to transmit and receive electromagnetic signals over an air interface via uplink and or downlink channels between the wireless communication device and communication network equipment e.g. base station utilizing at least one communication standard from among a plurality of different communication standards such as Global System for Mobile Communications GSM Code Division Multiple Access CDMA Orthogonal Frequency Division Multiple Access OFDMA and similar systems. In one or more embodiments the wireless communication device can be a mobile cellular device phone or smartphone or laptop netbook or tablet computing device or other types of communication devices. Wireless communication device comprises processor and interface circuitry which are connected to memory component via signal bus . Interface circuitry includes digital signal processor DSP . Also illustrated within wireless communication device are input output I O devices . Wireless communication device also includes a transceiver module for sending and receiving communication signals. Transceiver module includes modem which can also be referred to as a transceiver. In at least some embodiments the sending and receiving of communication signals occur wirelessly and are facilitated by one or more antennas coupled to the transceiver module . The number of antennas can vary from device to device ranging from one to two or more antennas and the presentation within wireless communication device of one antenna is merely for illustration.

Wireless communication device is able to wirelessly communicate to base station via antenna . Base station can be any one of a number of different types of network stations and or antennas associated with the infrastructure of the wireless network and configured to support uplink and downlink communication via one or more of the wireless communication protocols as known by those skilled in the art.

In addition to the above described hardware components of wireless communication device various features of the invention may be completed or supported via software or firmware code and or logic stored within at least one of memory and other storage and respectively executed by DSP or processor . Thus for example illustrated within memory is a number of software firmware logic components or modules including application module program data and transceiver protocol software . In addition memory includes Basic Input Output System BIOS operating system and radio interface layer RIL utility . RIL utility is executed by processor to provide RIL logic .

The various components within wireless communication device can be electrically and or communicatively coupled together as illustrated in . As utilized herein the term communicatively coupled means that information signals are transmissible through various interconnections between the components. The interconnections between the components can be direct interconnections that include conductive transmission media or may be indirect interconnections that include one or more intermediate electrical components. Although certain direct interconnections are illustrated in it is to be understood that more fewer or different interconnections may be present in other embodiments.

Dialer application is one example of a user interface application that captures a user s actions and translates the user s actions into an appropriate radio API call e.g. first API call of phone application within hardware dependent application framework . Short Message Service SMS and Unstructured Supplementary Service Data are also examples of user interface applications that can be provided by hardware dependent application framework . First API call initiates a call message sequence targeting a particular function s of a specific type of modem e.g. modem . First API call is executed as a request for communication with an implemented modem e.g. modem of a specific type. The implemented modem is one type of modem selected for implementation within wireless communication device from among various different types of modems corresponding to various different modem vendors. The various different types of modems may provide different features and capabilities and utilize different modem communication protocols. As a result an RIL architecture is specifically developed based on the type of modem selected for implementation. The first API call represents specific operations that a corresponding user client application e.g. dialer application can invoke at runtime to perform tasks that are specific to the type of the implemented modem. In one embodiment the request for communication with modem is made using an appropriate call function e.g. PlaceCall . Phone application of hardware dependent application framework receives first API call and uses a Dial function to invoke functions of RIL Java to initiate second API call . RIL Java initiates second API call to Vendor RIL using a respective dial function.

In one embodiment second API call is executed as a Java Native interface JNI call. A JNI is located between RIL Java and Vendor RIL and receives second API call . In response to receipt of second API call the JNI forwards second API call to Vendor RIL . In particular RIL Java utilizes a first set of functions to send second API call to the Vendor RIL . The JNI enables a second set of functions to call software programs directly associated with the specific type of implemented modem and with an operating system platform and libraries written in a language that is different from Java. The JNI is utilized to maintain communication using an API call mechanism throughout the RIL architecture corresponding to message flow structure .

In response to receipt of second API call Vendor RIL module sends third API call to modem . Third API call triggers establishment of communication with modem . For example modem dial request commands such as Attention Dial ATD commands i.e. commands which represent dial commands for modems are sent to modem using third API call . In response to receipt of the ATD command modem responds with fourth API call which provides an OK response from modem to indicate acknowledgement of call establishment and servicing of the user s request. In one embodiment communication between Vendor RIL and modem is supported using modem protocol software that is utilized by that specific type of modem . Vendor RIL receives the OK response and sends fifth API call by which Vendor RIL calls RIL Java to provide acknowledgement and or a status of the response to the user s request. For example Vendor RIL calls RIL Java using a Dial callback function. RIL Java interprets the response and sends corresponding response message to hardware dependent application framework .

Call tracker executes first API Call1 specifically as a request for communication with an implemented modem e.g. modem . Phone application of hardware dependent application framework receives first API call and invokes functions of RIL Java to send second API call which continues to propagate the request targeting the implemented modem e.g. modem .

In one embodiment second API call sent to the VRIL through the JNI maps a single API to a single request. The single API is uniquely associated with at least one of a a specific hardware function of modem and b a specific radio access technology. The single request which utilizes the single API is provided as a hardware specific request.

In another embodiment second API call sent to the Vendor RIL through the JNI maps a single corresponding API to at least two requests. The single corresponding API is uniquely associated with at least two specific hardware functions of modem . The received request is a hardware specific request which is identified as one of the at least two requests at modem . Vendor RIL initiates third API call to the implemented modem e.g. modem .

In one embodiment a first set of functions maintains communication of a received request through an API interface and provides serialization of API calls received by hardware dependent application framework utilizing at least one of a a request priority and b a time of request initiation. In one embodiment the first set of functions is provided by the instruction set of at least one of a RIL Java and b the Vendor RIL .

In one embodiment the first set of functions is configured to enable the received request to be transmitted as a modem specific request using a communication protocol specified for the specific type of modem. Furthermore the first set of functions is configured to prevent utilization of an abstraction interface which is not directly associated with any specific type of modem.

The similar aspects of RIL structure can be described in a similar manner to RIL structure . However unlike RIL structure RIL structure does not explicitly provide a distinct Java based radio interface layer component RIL Java . In one embodiment the features and functions of the RIL Java are merged with phone application . Thus in one embodiment in response to receipt of a first API call at hardware dependent application framework the relevant functions used to provide a second API call are automatically and directly activated to continue propagating to Vendor RIL a request that targets the implemented modem.

Dialer application is used to initiate first radio API call . First radio API call initiates a message sequence targeting a particular function s e.g. radio transmission related functions such as dial functions and SMS functions of a specific type of modem e.g. modem . Phone application of hardware dependent application framework receives first API call and initiates second API call to the Vendor RIL using a respective dial function in order to continue propagation of the request to the implemented modem.

In response to receipt of second API call Vendor RIL sends third API call to modem . Third API call establishes communication with modem . For example modem dial request commands such as ATD commands are sent to modem using third API call . In response to receipt of the ATD command modem responds with fourth API call which provides an OK response from modem to indicate acknowledgement of call establishment and servicing of the user s request. Vendor RIL receives the OK response and sends fifth API call by which Vendor RIL calls phone application to provide acknowledgement and or a status of the response to the user s request. For example Vendor RIL calls phone application using a Dial callback function.

The method of begins at start block and proceeds to block at which a request initiated at application module is sent as a hardware specific request to hardware dependent application framework via first API call . At block phone application or RIL Java within hardware dependent application framework receives first API call . At decision block RIL utility determines whether Java is the language of software programs utilized by the modem and by corresponding software programs and components of hardware dependent application framework . More generally RIL utility determines whether a common or shared language is utilized by hardware dependent application framework and by corresponding software programs and components of the modem. If at decision block RIL utility determines that a common or shared language e.g. Java is utilized by respective software programs of hardware dependent application framework and modem hardware dependent application framework sends second API call directly to Vendor RIL as shown at block . However if at decision block RIL utility determines that a common or shared language e.g. Java is not utilized by some respective software programs of hardware dependent application framework and modem hardware dependent application framework sends second API call via a Java Native Interface JNI to Vendor RIL as shown at block . The RIL architecture utilizes the JNI to maintain use of an API call mechanism for transmitting requests between the hardware dependent application framework and modem . At block Vendor RIL forwards the received request to modem using third API call to enable modem to perform commands associated with the request. Vendor RIL forwards the received request using modem protocol software that is specifically utilized by the particular type of modem . At block modem sends acknowledgement of receipt of the request and initiation of request servicing to hardware dependent application framework via Vendor RIL . The process ends at block .

The flowchart and block diagrams in the various figures presented and described herein illustrate the architecture functionality and operation of possible implementations of systems methods and computer program products according to various embodiments of the present disclosure. In this regard each block in the flowcharts or block diagrams may represent a module segment or portion of code which comprises one or more executable instructions for implementing the specified logical function s . It should also be noted that in some alternative implementations the functions noted in the block may occur out of the order noted in the figures. For example two blocks shown in succession may in fact be executed substantially concurrently or the blocks may sometimes be executed in the reverse order depending upon the functionality involved. Thus while the method processes are described and illustrated in a particular sequence use of a specific sequence of processes is not meant to imply any limitations on the disclosure. Changes may be made with regards to the sequence of processes without departing from the spirit or scope of the present disclosure. Use of a particular sequence is therefore not to be taken in a limiting sense and the scope of the present disclosure extends to the appended claims and equivalents thereof.

In some implementations certain processes of the methods are combined performed simultaneously or in a different order or perhaps omitted without deviating from the spirit and scope of the disclosure. It will also be noted that each block of the block diagrams and or flowchart illustration and combinations of blocks in the block diagrams and or flowchart illustration can be implemented by special purpose hardware based systems that perform the specified functions or acts or combinations of special purpose hardware and computer instructions.

While the disclosure has been described with reference to exemplary embodiments it will be understood by those skilled in the art that various changes may be made and equivalents may be substituted for elements thereof without departing from the scope of the disclosure. In addition many modifications may be made to adapt a particular system device or component thereof to the teachings of the disclosure without departing from the essential scope thereof. Therefore it is intended that the disclosure not be limited to the particular embodiments disclosed for carrying out this disclosure but that the disclosure will include all embodiments falling within the scope of the appended claims. Moreover the use of the terms first second etc. do not denote any order or importance but rather the terms first second etc. are used to distinguish one element from another.

The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the disclosure. As used herein the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. It will be further understood that the terms comprises and or comprising when used in this specification specify the presence of stated features integers steps operations elements and or components but do not preclude the presence or addition of one or more other features integers steps operations elements components and or groups thereof.

The corresponding structures materials acts and equivalents of all means or step plus function elements in the claims below are intended to include any structure material or act for performing the function in combination with other claimed elements as specifically claimed. The description of the present disclosure has been presented for purposes of illustration and description but is not intended to be exhaustive or limited to the disclosure in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the disclosure. The embodiment was chosen and described in order to best explain the principles of the disclosure and the practical application and to enable others of ordinary skill in the art to understand the disclosure for various embodiments with various modifications as are suited to the particular use contemplated.

