---

title: Tag-based resource configuration control
abstract: In a system that provides network-based infrastructure services, customer resources are tagged in accordance with policies provided by the customers. Resources may be automatically tagged upon creation based on the provided policies. In addition, existing resources may be analyzed and automatically tagged to indicate characteristics of the resources that may be of interest to the customer. The customers may also specify configuration policies in terms of resource tags, and the system may be configured to apply and/or enforce the configuration policies.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09112777&OS=09112777&RS=09112777
owner: AMAZON TECHNOLOGIES, INC.
number: 09112777
owner_city: Reno
owner_country: US
publication_date: 20121002
---
Large scale network based computing represents a paradigm shift from traditional client server computing relationships. With large scale network based service platforms e.g. data centers customers are able to leverage shared resources on demand by renting resources that are owned by third parties and that reside in the cloud. With these resources users of the platform are able to launch and maintain large applications without actually owning or servicing the underlying infrastructure necessary for these applications. As a result network based service platforms have expanded the class of individuals and companies able to effectively compete in the realm of computing applications.

The number of users of network based service platforms has increased rapidly. Furthermore these users are using a greater number of resources and a wider variety of resource types than ever before. As a consequence of this growth user management of these resources has become a significant challenge.

This disclosure describes systems devices and techniques for managing resources that are implemented in conjunction with online or network accessible services such as offered by large scale computer infrastructure providers. Such resources may include physical and or virtual computers and servers data storage processors functional units services etc. Each resource may be associated with one or more tag value pairs which may also be referred to simply as tags.

Customers of a computer infrastructure provider may utilize graphical or programmatic interfaces to specify tags for individual resources. In accordance with certain embodiments a customer may configure policies for automatically associating tags with resources as the resources are created. Tags for particular resources may be automatically created based on various criteria such as the identities of users creating the resources tools or equipment used in creating the resources characteristics of the resources themselves and other conditions.

In some implementations the computer infrastructure provider may independently create resource tags which may subsequently be used by customers for resource management. For example the computer infrastructure provider may automatically tag resources that have not been used for a certain period of time. As another example the computer infrastructure provider may analyze sets of resources used by the customer and may associate tags with the resources based on such an analysis.

In some implementations tags may be associated with computed or dynamic values based on logical expressions or conditions provided by the customer. Such logical expressions may rely on other tags or on other identifiable characteristics of the resources which may change over time.

Customers may also specify or configure policies for acceptable resource configurations and such configuration policies may be enforced by the computer infrastructure based on examining the resource tags. Configuration policies may be specified in terms of resource tags and customer requests regarding resources may be conditioned upon compliance with such policies. Requests by customers regarding particular resources may be accepted rejected or modified based on configuration policies and upon examination of tags associated with the resources. In addition certain operations may be automatically performed with respect to resources based on the provided configuration policies.

The resources provided and supported by the services platform may also include functional elements or services. Functional elements or services may comprise applications or sub applications that are used as building blocks for customer or developer applications. For example the services platform may provide predefined database functionality in the form of a discrete service that can be instantiated on behalf of a customer. Functional components may relate to network communications and other services or activities. Network related services may for example include firewalls load balancers filters routers and so forth. Additional functional components may be available for such things as graphics processing language translation searching etc.

The various services and functionality provided by the services platform may be exposed to customers through various forms of network based interfaces which in are represented as being implemented by a control plane . The control plane may expose application programming interfaces APIs that can be programmatically accessed by remote or external devices and users to establish and configure many of the services and functionality provided by the services platform . The APIs may be designed to support various client functions and communications and may be accessible through local area or wide area networks including the Internet. The control plane may also or alternatively expose a graphical user interface GUI for interactive access by users or customers of the services platform . For example the GUI may comprise an Internet based web server or hypertext markup language HTML server which may in turn implement a network accessible website.

Customers may communicate with the services platform from a client such as a computer a mobile device or other equipment. In some cases the client may interact programmatically with the APIs of the control plane . For example the client may execute one or more programs that issue network based API calls to the control plane specifying desired actions or queries to be implemented by the services platform . In other cases the client may implement a graphical browser such as an Internet browser through which a user may access the services of the services platform . More specifically such a browser may communicate with the GUI of the control plane in response to interactive instructions selections and data entry by the user.

The control plane may implement or provide a resource tagging service that automatically generates and maintains resource tags corresponding to individual computing resources based on automatic tagging policies supplied or specified by customers. Generally a tag may comprise any sort of identifier that is associated with one of the resources . In the described embodiment a tag may comprise a tag name and an associated tag value in a form that can be represented as name value. As an example a particular resource might be assigned a tag value pair such as ResourceType UserManagement to a particular resource indicating that the resource is of the type User Management .

In practice each of the tags may comprise three data fields a name a value and a resource identifier ID that associates the name and value with a particular resource. The value may be a static value or a dynamically calculated value. A dynamically calculated value is a value that is recalculated whenever it is reported or queried based on a specified logical condition or expression.

In some cases tags may be created and assigned to respective resources through the control plane such as by explicitly specifying tags through calls to the APIs or interactions with the GUI . In accordance with certain embodiments however the customer may also specify or provide more general tagging policies to the services platform through the APIs or GUI of the control plane . The tagging policies may specify tags that are to be applied or assigned automatically by the services platform to resources that meet certain criteria or satisfy certain conditions. As an example a particular policy may indicate that resource tags are to be automatically generated and assigned to certain resources depending on which of multiple users creates the resources which of multiple different tools or systems are used to create the resources or on other criteria relating to creation of the resources.

A customer may create or specify an automatic tagging policy which may indicate a tag and one or more criteria or conditions for assigning the tag. More specifically a tagging policy may comprise one or more criteria a tag name and a tag value. The criteria may be specified with various levels of complexity depending on implementation. In some cases a criterion may comprise a single data item which is understood to apply to a certain property of a resource. For example a criterion may comprise a user name or user group so that any resource created by the specified user or group will be assigned the indicated tag name and tag value. In other cases a criterion may be specified as a logical expression that depends on a combination of resource properties or other conditions including resource tags.

In some situations the criteria of the tagging policy may be omitted and the tagging policy may be understood to apply to all resources with the value of the tag being a calculated value in accordance with a specified logical expression.

The tag name may comprise a text string such as a word or a combination of words. The tag name may also comprise some other type of code. In many situations the tag name will be a descriptive title indicating the purpose or meaning of the tag. The tagging policy may in some implementations specify the tag name as a calculated expression that depends on a combination of resource properties or other conditions including resource tags.

The tag value may comprise a text string numeric value or combination of the two. The tag value may in some cases be specified in a tagging policy as a static value or constant. In other cases the tag value may be specified as a logical expression that depends on properties of the resource to which the tag is to be applied or on other system or ambient properties that are not necessarily directly related to the resource itself. For example such a logical expression may be dependent upon existing resource tags of the resource itself or of other resources.

As another example certain situations may arise in which a resource is created by another resource which may be referred to as a parent resource. In situations such as this a tagging policy may specify that a resource meeting specified criteria is to be automatically tagged with one or more of the resource tags that have previously been associated with the parent computing resource.

An action may comprise receiving the tagging policy which may have been submitted by the customer through the APIs and or the GUI of the control plane .

An action may comprise adding and maintaining the tagging policy as part of the collective tagging policies for future application to existing and newly created resources.

In an independent process shown at the left side of a resource request may be received by the services platform in an action . The resource request may specify the characteristics of a resource that is be by created for or on behalf of a customer. The resource request may be created and supplied by the customer or by a programmatic entity such as another customer resource on behalf of the customer. In an action the services platform may respond to the resource request by creating the requested resource. In an action performed in conjunction with or in response to the action of creating the resource the services platform may automatically tag the resource by creating a tag and storing the tag with the collective tags . As mentioned above an individual tag may comprise a name a value and the identifier ID of the resource with which the tag is to be associated.

The action of tagging a newly created resource may involve evaluating the criteria of each of the tagging policies to determine which of multiple tagging policies are applicable to the newly created resource. In addition the action may involve evaluating a logical expression that is specified by a tagging policy in order to calculate a static value for an applicable tag. In some cases the tagging policy may specify a dynamic tag value comprising a logical expression that is to be evaluated upon reporting the tag or when the tag is a criterion of a customer query.

In another independent process shown at the right side of the services platform may receive a resource tag query in an action . For example a customer or other programmatic entity may submit the query using the APIs and or the GUI . The query may indicate a resource such as by specifying the ID of the resource. Alternatively the query may specify criteria based on tags and tag values.

In response to the query the services platform may retrieve or evaluate the tags that have been associated with the one or more resources implicated by the query . In response to the tags and tag values the services platform may report the results of the query in an action . When tag values are specified dynamically as logical expressions the action may include evaluating the logical expressions to determine a calculated tag value for reporting in response to the query . When tag values are specified as constants the action may comprise simply retrieving or evaluating those constants.

An action may comprise analyzing the existing and or previously created resources of a customer. The analysis may identify various characteristics of resources such as size capacity utilization status and so forth. The analysis may in some cases be based on statistical techniques with the goal of identifying anomalies that the customer may find important. For example the analysis may determine that only a small number of server instances have opened a particular communications port which may indicate a problem with those server instances.

The analysis may be based at least in part on the tagging policies which may include tagging policies provided by the customer as well as tagging policies created by the services platform .

Based upon the analysis an action may comprise tagging the resources based on their determined characteristics. Such tags may comprise name value pairs as described above. In certain embodiments the tag names and values may be generated by the services platform rather than by specific policies provided by the customer.

Returning to the control plane may implement or provide a tag based policy engine that automatically applies or enforces configuration policies that have been supplied or configured by customers.

The configuration policies may relate to allowable actions that may be performed with respect to various resources or to operations that are to be performed automatically by the services platform in response to various events. Generally the actions available to a customer with respect to an individual resource may be classified as creation modification update or deletion. Any one or more of these actions may be conditioned upon the existence or values of tags associated with the resource and or with other resources. For example a resource may be tagged as belonging to certain logical group of resources and selected actions regarding resources in those groups may be limited to certain users or types of users by the configuration policies .

In addition the configuration policies may relate to time or time periods such as may be the case where certain operations are allowed only at certain times of day. The configuration policies may also specify that certain operations are allowed with respect to a resource only when certain conditions are met as indicated by the tags of the resource or the tags of other resources.

The configuration policies may alternatively or additionally relate to actions that are to be performed automatically by the services platform upon the occurrence of certain events. More specifically the configuration policies may indicate that certain operations such as restarts backups snapshots and so forth are to be performed by the services platform based on tags or tag values associated with the resources. For example the configuration policies may indicate that image snapshots of resources having certain tags are to be taken by the services platform at periodic intervals. The times at which the snapshots are to be taken may be specified by the policies or by the resource tags.

The configuration policies may also specify actions that are to be performed by the services platform in response to certain resource related events such as resource failures. For example the configuration policies may specify that a resource having certain tags is to be restarted automatically upon any detected failure.

As another example tags and configuration policies may be used in conjunction with each other to apply and or enforce budget compliance. Thus the configuration policies may indicate allowable costs for groups of resources as defined by the tags of those resources. Upon exceeding allowable budgets the configuration policies may specify that the customer is to be notified. Alternatively the configuration policies may disallow the creation of any new resources that would cause budget violations or may automatically start shutting down non essential or low priority resources. Tags may be used in this process such to indicate priority of resources.

A customer may create or specify a configuration policy which may indicate allowable properties or conditions of resources in terms of resource tags. The resources to which the policy applies may be indicated by the specification of resource tags or tag values. The allowable properties or conditions of the resources may similarly be specified in terms of tags or tag values.

An action may comprise receiving the configuration policy which may have been submitted by the customer through the APIs and or the GUI of the control plane .

An action may comprise adding and maintaining the configuration policy as part of the collective configuration policies for future application to existing and newly created resources based on the tags of those resources.

In an independent process shown at the left side of a resource request or resource related command may be received by the services platform in an action . The resource request may specify some action that is to be implemented with respect to a particular resource or group of resources. The resource request may be created and supplied by the customer or by a programmatic entity such as another customer resource on behalf of the customer.

An action comprises determining compliance of the request based on the configuration policies and on the tags . More specifically the action comprises examining the resource tags to determine compliance with the configuration policies .

An action may comprise enforcing compliance with the configuration policies based on the action . If the request is found to comply with the configuration policies the request is accepted and performed. Otherwise if the request does not comply with the configuration policies the request may be rejected. Alternatively the request may be modified so that it complies with the configuration policies . In either case the action may include notifying the customer of any non compliance with the configuration policies . In some cases the request may be accepted and implemented even when it causes a violation of the configuration policies and the enforcement of action may comprise simply notifying the customer of the violation.

In another independent process shown at the right side of a tag based operation may be performed in response to an event other than an explicit request by the customer. For example the event may comprise expiration of a time period. As another example the event may comprise a resource event such as failure of a resource. As yet another example the event may comprise a situation in which a set budget has been exceeded by usage of services platform resources.

In response to the event the services platform may perform one or more automatic operations based on the configuration policies and the tags . For example the automatic operations may include operations such as machine backups memory snapshots restarting creating destroying modifying updating and so forth. The automatic operations may be specified by the configuration policies and may be dependent upon tags of the resources. For example the automatic operations may be performed in accordance with parameters specified by the tags of individual resources or may be applied only to those resources having certain tags or tag values.

Note that although the various functions described above have been attributed largely to the services platform the described functionality may be allocated in different ways. Thus in some embodiments the client may perform functions that are described above as being implemented by the services platform . Similarly the services platform may perform functions that are described above as being implemented by the client . Furthermore certain implementations may include additional elements or actors that perform some of the described actions.

The system described above provides a flexible way of managing resources based on tags. Such tags may be created or assigned based on customer supplied policies. In addition customers may specify configuration policies in terms of tags allowing the customers to enforce arbitrary policies without further support by the services platform .

The example computer may comprise one or more processing units and one or more forms of computer readable memory . The memory may comprise volatile and nonvolatile memory. Thus the memory may include but is not limited to RAM ROM EEPROM flash memory or other memory technology or any other medium which can be used to store applications and data. The memory may also include removable media such as optical disks portable devices drives and so forth.

The memory may be used to store any number of functional components such as programs and program modules that are executable on the processing unit . For example the memory may store an operating system and various applications or user specified programs . The operating system and or the user specified programs may include components modules and or logic for performing the actions described herein. More specifically executable components stored in the memory may comprise computer executable instructions that when executed cause the one or more processing units to perform acts and to implement techniques described herein.

The computer may also have user input output components such as a display keyboard mouse etc. The computer may also comprise a communications interface such as a network interface.

Generally the functionality described herein may be implemented by one or more computers such as shown by or by similar devices with the various actions described above distributed in various ways across the different computers. Computers of the services platform may be located together or separately and organized as virtual servers server banks and or server farms. The described functionality may be provided by the computers of a single entity or enterprise or may utilize the computers and or services of multiple entities or enterprises.

The environment and individual elements described herein may of course include many other logical programmatic and physical components of which those shown in the accompanying figures are merely examples that are related to the discussion herein.

The various techniques described herein are assumed in the given examples to be implemented in the general context of computer executable instructions or software such as program modules that are stored in computer readable storage and executed by the processor s of one or more computers or other devices such as those illustrated in the figures. Generally program modules include routines programs objects components data structures etc. and define operating logic for performing particular tasks or implement particular abstract data types.

Other architectures may be used to implement the described functionality and are intended to be within the scope of this disclosure. Furthermore although specific distributions of responsibilities are defined above for purposes of discussion the various functions and responsibilities might be distributed and divided in different ways depending on circumstances.

Similarly software may be stored and distributed in various ways and using different means and the particular software storage and execution configurations described above may be varied in many different ways. Thus software implementing the techniques described above may be distributed on various types of computer readable media not limited to the forms of memory that are specifically described.

Furthermore although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described. Rather the specific features and acts are disclosed as exemplary forms of implementing the claims.

