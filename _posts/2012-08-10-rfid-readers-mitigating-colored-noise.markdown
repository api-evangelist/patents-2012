---

title: RFID readers mitigating colored noise
abstract: An RFID reader uses an adaptive filter to mitigate the effects of colored noise in tag reply signals. The adaptive filter may be a linear equalizer, a linear-predictive canceller, or a decision-feedback equalizer. The adaptive filter estimates the colored noise portion of the signal received from the tag and removes the noise estimate from the tag signal. The adaptive filter bases its noise estimate on the difference between a desired signal and a portion of the received signal. The reader uses reader-generated training data, a CW signal, and/or portions of the tag reply signal to adapt the filter.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08390430&OS=08390430&RS=08390430
owner: Impinj, Inc.
number: 08390430
owner_city: Seattle
owner_country: US
publication_date: 20120810
---
This application claims the benefit of U.S. patent application Ser. No. 12 568 645 filed on Sep. 28 2009. The disclosure of the patent application is hereby incorporated by reference for all purposes.

Radio Frequency Identification RFID systems typically include RFID tags and RFID readers. RFID readers are also known as RFID reader writers or RFID interrogators. RFID systems can be used in many ways for locating and identifying objects to which the tags are attached. RFID systems are particularly useful in product related and service related industries for tracking objects being processed inventoried or handled. In such cases an RFID tag is usually attached to an individual item or to its package.

In principle RFID techniques entail using an RFID reader to interrogate one or more RFID tags. The reader transmitting a Radio Frequency RF wave performs the interrogation. The RF wave is typically electromagnetic at least in the far field. The RF wave can also be predominantly electric or magnetic in the near field. The RF wave may encode one or more commands that instruct the tags to perform one or more actions.

A tag that senses the interrogating RF wave responds by transmitting back another RF wave. The tag generates the transmitted back RF wave either originally or by reflecting back a portion of the interrogating RF wave in a process known as backscatter. Backscatter may take place in a number of ways.

The reflected back RF wave may further encode data stored internally in the tag such as a number. The response is demodulated and decoded by the reader which thereby identifies counts or otherwise interacts with the associated item. The decoded information can denote a serial number a price a date a destination other attribute s any combination of attributes and so on. Accordingly when a reader reads a tag code information can be learned about the associated item that hosts the tag and or about the tag itself.

An RFID tag typically includes an antenna system a radio section a power management section and frequently a logical section a memory or both. In some RFID tags the power management section includes an energy storage device such as a battery. RFID tags with an energy storage device are known as active or battery assisted tags. Advances in semiconductor technology have miniaturized the electronics so much that an RFID tag can be powered solely by the RF signal it receives. Such RFID tags do not include an energy storage device such as a battery and are called passive tags. Regardless of the type all tags typically store or buffer some energy temporarily in passive storage devices such as capacitors.

RFID readers often communicate with populations of tags performing operations such as inventorying or otherwise interacting with the tags. To perform such communications the reader must establish a reliable communications link with the tags. Unfortunately the real world environment where readers and tags operate contains unavoidable RF noise. White noise noise with a flat frequency spectrum is always present colored noise noise that is more prominent on some frequencies than on others may be present as well. Some of this noise will fall within the channel or channels used by a reader and tags to communicate degrading the communications.

As one example thermal fluctuations in the RF environment cause broadband white noise at RF frequencies. As another example fluorescent lights can amplitude modulate AM the RF waves used in RFID communication creating sidebands signal components at frequencies offset from the frequencies of the RF waves. Such sidebands are one example of colored noise. In some cases these AM sidebands fall within the tag reply spectrum and can cause symbol decoding errors in the reader. Traditional RFID readers employ channel filters as well as data filters matched to the tag signal waveforms to attenuate noise that falls outside the tag reply spectrum. These filters are effective against white and colored noise that falls outside the reply spectrum but they cannot mitigate noise such as the above mentioned colored noise from fluorescent lights that falls within the tag reply spectrum. Furthermore these filters do not reduce inter symbol interference ISI that can be introduced by the RF channel or by the reader analog front end electronics.

This summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This summary is not intended to identify key features or essential features of the claimed subject matter nor is it intended as an aid in determining the scope of the claimed subject matter.

Embodiments are directed to mitigating the effects of colored noise in an RFID reader system by employing adaptive filters. These embodiments also include methods for training RFID readers to cancel or otherwise equalize the colored noise sources. Embodiments are further directed to instructing RFID tags to transmit training sequences known by the reader to facilitate reader training.

These and other features and advantages will be apparent from a reading of the following detailed description and a review of the associated drawings. It is to be understood that both the foregoing general description and the following detailed description are explanatory only and are not restrictive of aspects as claimed.

In the following detailed description references are made to the accompanying drawings that form a part hereof and in which are shown by way of illustrations specific embodiments or examples. These aspects may be combined other aspects may be utilized and structural changes may be made without departing from the spirit or scope of the present disclosure. The following detailed description is therefore not to be taken in a limiting sense and the scope of the present disclosure is defined by the appended claims and their equivalents.

Reader and tag exchange data via wave and wave . In a session of such an exchange each encodes modulates and transmits data to the other and each receives demodulates and decodes data from the other. The data can be modulated onto and demodulated from RF waveforms. The RF waveforms are typically in a suitable range of frequencies such as those near 900 MHz 2.4 GHz and so on.

Encoding the data can be performed in a number of ways. For example protocols are devised to communicate in terms of symbols also called RFID symbols. A symbol for communicating can be a delimiter a calibration symbol and so on. Further symbols can be implemented for ultimately exchanging binary data such as 0 and 1 if that is desired. In turn when the symbols are processed internally by reader and tag they can be equivalently considered and treated as numbers having corresponding values and so on.

Tag can be a passive tag or an active or battery assisted tag i.e. having its own power source . Where tag is a passive tag it is powered from wave .

Tag is formed on a substantially planar inlay which can be made in many ways known in the art. Tag includes an electrical circuit which is preferably implemented as an integrated circuit IC . IC is arranged on inlay .

Tag also includes an antenna for exchanging wireless signals with its environment. The antenna is usually flat and attached to inlay . IC is electrically coupled to the antenna via suitable antenna terminals not shown in .

The antenna may be made in a number of ways as is well known in the art. In the example of the antenna is made from two distinct antenna segments which are shown here forming a dipole. Many other embodiments are possible using any number of antenna segments.

In some embodiments an antenna can be made with even a single segment. Different points of the segment can be coupled to one or more of the antenna terminals of IC . For example the antenna can form a single loop with its ends coupled to the terminals. It should be remembered that when the single segment has more complex shapes even a single segment could behave like multiple segments at the frequencies of RFID wireless communication.

In operation a signal is received by the antenna and communicated to IC . IC both harvests power and responds if appropriate based on the incoming signal and the IC s internal state. In order to respond by replying IC modulates the reflectance of the antenna which generates backscatter from wave transmitted by the reader. Coupling together and uncoupling the antenna terminals of IC can modulate the antenna s reflectance as can a variety of other means.

In the embodiment of antenna segments are separate from IC . In other embodiments antenna segments may alternatively be formed on IC and so on.

The components of the RFID system of may communicate with each other in any number of modes. One such mode is called full duplex. Another such mode is called half duplex and is described below.

RFID reader and RFID tag talk and listen to each other by taking turns. As seen on axis TIME when reader talks to tag the communication session is designated as R T and when tag talks to reader the communication session is designated as T R . Along the TIME axis a sample R T communication session occurs during a time interval and a following sample T R communication session occurs during a time interval . Of course interval is typically of a different duration than interval here the durations are shown approximately equal only for purposes of illustration.

According to blocks and RFID reader talks during interval and listens during interval . According to blocks and RFID tag listens while reader talks during interval and talks while reader listens during interval .

In terms of actual technical behavior during interval reader talks to tag as follows. According to block reader transmits wave which was first described in . At the same time according to block tag receives wave and processes it to extract data and so on. Meanwhile according to block tag does not backscatter with its antenna and according to block reader has no wave to receive from tag .

During interval tag talks to reader as follows. According to block reader transmits a Continuous Wave CW which can be thought of as a carrier signal that ideally encodes no information. As discussed before this carrier signal serves both to be harvested by tag for its own internal power needs and also as a wave that tag can backscatter. Indeed during interval according to block tag does not receive a signal for processing. Instead according to block tag modulates the CW emitted according to block so as to generate backscatter wave . Concurrently according to block reader receives backscatter wave and processes it.

Tag can respond with a backscatter that is modulated directly onto the frequency of the reader s emitted CW also called baseband backscatter. Alternatively tag can respond with a backscatter that is modulated onto a frequency developed by tag that is different from the reader s emitted CW and this modulated tag frequency is then impressed upon the reader s emitted CW. This second type of backscatter is called subcarrier backscatter.

Embodiments of the present disclosure can be useful in different RFID environments for example in the deployment of RFID readers in warehouse environments in retail environments in point of sale environments in the environments of financial institutions in environments of data management institutions in library environments and the like.

Circuit includes at least two antenna terminals which are suitable for coupling to one or more antenna segments not shown in . Antenna terminals may be made in any suitable way such as using pads and so on. In a number of embodiments more than two antenna terminals are used especially in embodiments where more antenna segments are used.

Circuit includes a section . Section may be implemented as shown for example as a group of nodes for proper routing of signals. In some embodiments section may be implemented otherwise for example to include a receive transmit switch that can route a signal and so on.

Circuit also includes a Rectifier and PMU Power Management Unit . Rectifier and PMU may be implemented in any way known in the art for harvesting raw RF energy received via antenna terminals . In some embodiments block may include more than one rectifier.

In operation an RF wave received via antenna terminals is received by Rectifier and PMU which in turn generates power for the electrical circuits of IC . This is true for either or both reader to tag R T and tag to reader T R sessions whether or not the received RF wave is modulated.

Circuit additionally includes a demodulator . Demodulator demodulates an RF signal received via antenna terminals . Demodulator may be implemented in any way known in the art for example including an attenuator stage an amplifier stage and so on.

Circuit further includes a processing block . Processing block receives the demodulated signal from demodulator and may perform operations. In addition it may generate an output signal for transmission.

Processing block may be implemented in any way known in the art. For example processing block may include a number of components such as a processor memory a decoder an encoder and so on.

Circuit additionally includes a modulator . Modulator modulates an output signal generated by processing block . The modulated signal is transmitted by driving antenna terminals and therefore driving the load presented by the coupled antenna segment or segments. Modulator may be implemented in any way known in the art for example including a driver stage amplifier stage and so on.

In one embodiment demodulator and modulator may be combined in a single transceiver circuit. In another embodiment modulator may include a backscatter transmitter or an active transmitter. In yet other embodiments demodulator and modulator are part of processing block .

Circuit additionally includes a memory which stores data . Memory is preferably implemented as a Nonvolatile Memory NVM which means that data is retained even when circuit does not have power as is frequently the case for a passive RFID tag.

In terms of processing a signal circuit operates differently during a R T session and a T R session. The different operations are described below in this case with circuit representing an IC of an RFID tag.

Version A shows as relatively obscured those components that do not play a part in processing a signal during a R T session. Indeed Rectifier and PMU may be active but only in converting raw RF power. And modulator generally does not transmit during a R T session. Modulator typically does not interact with the received RF wave significantly either because switching action in section of decouples the modulator from the RF wave or by designing modulator to have a suitable impedance and so on.

While modulator is typically inactive during a R T session it need not be always the case. For example during a R T session modulator could be active in other ways. For example it could be adjusting its own parameters for operation in a future session.

Version B shows as relatively obscured those components that do not play a part in processing a signal during a T R session. Indeed Rectifier and PMU may be active but only in converting raw RF power. And demodulator generally does not receive during a T R session. Demodulator typically does not interact with the transmitted RF wave either because switching action in section decouples the demodulator from the RF wave or by designing demodulator to have a suitable impedance and so on.

While demodulator is typically inactive during a T R session it need not be always the case. For example during a T R session demodulator could be active in other ways. For example it could be adjusting its own parameters for operation in a future session.

A driver can send to its respective antenna a driving signal that is in the RF range which is why cable is typically but not necessarily a coaxial cable. The driving signal causes the antenna to transmit an RF wave which is analogous to RF wave of . In addition RF wave can be backscattered from the RFID tags analogous to RF wave of . Backscattered RF wave is received by an antenna and ultimately becomes a signal sensed by unit .

Unit also has other components such as hardware and or software and or firmware which may be described in more detail later in this document. Components control drivers and as such cause RF wave to be transmitted and the sensed backscattered RF wave to be interpreted. Optionally and preferably there is a communication link to other equipment such as computers and the like for remote operation of system .

Local block is responsible for communicating with the tags. Local block includes a block of an antenna and a driver of the antenna for communicating with the tags. Some readers like that shown in local block contain a single antenna and driver. Some readers contain multiple antennas and drivers and a method to switch signals among them including sometimes using different antennas for transmitting and for receiving. And some readers contain multiple antennas and drivers that can operate simultaneously. A demodulator decoder block demodulates and decodes waves received from the tags via antenna block . Modulator encoder block encodes and modulates an RF wave that is to be transmitted to the tags via antenna block .

Local block additionally includes an optional local processor . Processor may be implemented in any number of ways known in the art. Such ways include by way of examples and not of limitation digital and or analog processors such as microprocessors and digital signal processors DSPs controllers such as microcontrollers software running in a machine such as a general purpose computer programmable circuits such as Field Programmable Gate Arrays FPGAs Field Programmable Analog Arrays FPAAs Programmable Logic Devices PLDs Application Specific Integrated Circuits ASIC any combination of one or more of these and so on. In some cases some or all of the decoding function in block the encoding function in block or both may be performed instead by processor . In some cases processor may implement an encryption or authorization function in some cases one or more of these functions can be distributed among other blocks such as encoding block or may be entirely incorporated in another block.

Local block additionally includes an optional local memory . Memory may be implemented in any number of ways known in the art. Such ways include by way of examples and not of limitation nonvolatile memories NVM read only memories ROM random access memories RAM any combination of one or more of these and so on. These can be implemented separately from processor or in a single chip with or without other components. Memory if provided can store programs for processor to run if needed.

In some embodiments memory stores data read from tags or data to be written to tags such as Electronic Product Codes EPCs Tag Identifiers TIDs and other data. Memory can also include reference data that is to be compared to the EPC codes instructions and or rules for how to encode commands for the tags modes for controlling antenna and so on. In some of these embodiments local memory is provided as a database. In some cases memory may contain information associated with selection of desired tag regions versus undesired tag regions what type of distract signal may be transmitted and the like.

Some components of local block typically treat the data as analog such as the antenna driver block . Other components such as memory typically treat the data as digital. At some point there is a conversion between analog and digital. Based on where this conversion occurs a whole reader may be characterized as analog or digital but most readers contain a mix of analog and digital functionality.

If remote components are indeed provided they are coupled to local block via an electronic communications network . Network can be a Local Area Network LAN a Metropolitan Area Network MAN a Wide Area Network WAN a network of networks such as the internet or a mere local communication link such as a USB PCI and so on. In turn local block then includes a local network connection for communicating with network . Communications on the network can be secure such as if they are encrypted or physically protected or insecure such as if they are not encrypted or otherwise protected.

There can be one or more remote component s . If more than one they can be located at the same location or in different locations. They can access each other and local block via network or via other similar networks and so on. Accordingly remote component s can use respective remote network connections. Only one such remote network connection is shown which is similar to local network connection etc.

Remote component s can also include a remote processor . Processor can be made in any way known in the art such as was described with reference to local processor . Remote processor may also implement an encryption function similar to local processor .

Remote component s can also include a remote memory . Memory can be made in any way known in the art such as was described with reference to local memory . Memory may include a local database and a different database of a Standards Organization such as one that can reference EPCs. Remote memory may also contain information associated with selection of desired tag regions versus undesired tag regions what type of distract signal is to be transmitted or the like similar to local memory .

Of the above described elements it is advantageous to consider a combination of these components designated as operational processing block . Block includes those components that are provided of the following local processor remote processor local network connection remote network connection and by extension an applicable portion of network that links remote network connection with local network connection . The portion can be dynamically changeable etc. In addition block can receive and decode RF waves received via antenna and cause antenna to transmit RF waves according to what it has processed.

Block includes either local processor or remote processor or both. If both are provided remote processor can be made such that it operates in a way complementary with that of local processor . In fact the two can cooperate. It will be appreciated that block as defined this way is in communication with both local memory and remote memory if both are present.

Accordingly block is location agnostic in that its functions can be implemented either by local processor or by remote processor or by a combination of both. Some of these functions are preferably implemented by local processor and some by remote processor . Block accesses local memory or remote memory or both for storing and or retrieving data.

Reader system operates by block generating communications for RFID tags. These communications are ultimately transmitted by antenna block with modulator encoder block encoding and modulating the information on an RF wave. Then data is received from the tags via antenna block demodulated and decoded by demodulator decoder block and processed by processing block .

Embodiments of an RFID reader system can be implemented as hardware software firmware or any combination. It is advantageous to consider such a system as subdivided into components or modules. A person skilled in the art will recognize that some of these components or modules can be implemented as hardware some as software some as firmware and some as a combination. An example of such a subdivision is now described together with the RFID tag as an additional module.

An RFID tag is considered here as a module by itself. Tag conducts a wireless communication with the remainder via the air interface . It is noteworthy that air interface is really only a boundary in that signals or data that pass through it are not intended to be transformed from one thing to another. Specifications as to how readers and tags are to communicate with each other for example the Gen2 Specification also properly characterize that boundary as an air interface.

RFID system includes one or more reader antennas and an RF Front End for interfacing with antenna s . These can be made as described above. In addition Front End typically includes analog components.

System also includes a Signal Processing module . In this embodiment module exchanges waveforms with Front End such as I and Q waveform pairs. In some embodiments signal processing module is implemented by itself in an FPGA.

System also includes a Physical Driver module which is also known as a Data Link. In this embodiment module exchanges bits with module . Data Link can be the stage associated with data framing. In one embodiment module is implemented by a Digital Signal Processor.

System additionally includes a Media Access Control module which is also known as a MAC layer. In this embodiment module exchanges packets of bits with module . MAC layer can be the stage for making decisions for sharing the medium of wireless communication which in this case is the air interface. Sharing can be between reader system and tags or between system with another reader or between tags or a combination. In one embodiment module is implemented by a Digital Signal Processor. In some embodiments many of the components of modules and can be implemented in one or more Integrated Circuit IC chips.

System moreover includes an Application Programming Library module . This can include Application Programming Interfaces APIs other objects etc.

All of the functionalities in system can be supported by one or more processors. One of these processors can be considered a host processor. Such a host processor might include a Host Operating System OS and or Central Processing Unit CPU . In some embodiments the processor is not considered as a separate module but one that includes some of the above mentioned modules of system .

A user interface may be coupled to library for accessing the APIs. User interface can be manual automatic or both. It can be supported by the host processor mentioned above or a separate processor etc.

It will be observed that the modules of system form a chain. Adjacent modules in the chain can be coupled by the appropriate instrumentalities for exchanging signals. These instrumentalities include conductors buses interfaces and so on. These instrumentalities can be local e.g. to connect modules that are physically close to each other or over a network for remote communication.

The chain is used in opposite directions for receiving and transmitting. In a receiving mode wireless waves are received by antenna s as signals which are in turn processed successively by the various modules in the chain. Processing can terminate in any one of the modules. In a transmitting mode initiation can be in any one of these modules. Ultimately signals are routed internally for antenna s to transmit as wireless waves.

The architecture of system is presented for purposes of explanation and not of limitation. Its particular subdivision into modules need not be followed for creating embodiments. Furthermore the features of the present disclosure can be performed either within a single one of the modules or by a combination of them.

As discussed previously colored noise can substantially degrade decoding noise margin and therefore the receive performance of an RFID reader. One source of such colored noise is fluorescent lights as described previously. Prior solutions to fluorescent light induced noise have included replacing the lights with incandescent or Light Emitting Diode LED lighting reorienting reader antennas away from the fluorescent lights or choosing the tag reply frequencies to avoid the interference. Other colored noise sources include electrical equipment such as electric motors and other RF transmitters that cannot be easily mitigated.

Diagram of shows an example spectrum at the input of a reader receiver. Within channel of interest are tag backscatter signal and in channel colored noise signal . Outside the channel of interest is colored noise signal . The diagram also shows background noise floor which is typically Additive White Gaussian Noise AWGN . AWGN comes from many natural sources such as thermal vibrations in antennas and in the reader s RF electronics.

Diagram illustrates the spectrum shown in diagram after the received signal has been treated by conventional reader receiver matched filtering. As shown in diagram conventional filters may suppress or reduce significantly the out of channel noise components but not the in channel noise components such as colored noise component . They also cannot compensate for time variant distortion such as inter symbol interference ISI introduced by the channel or the reader analog front end AFE .

Diagram of illustrates an FMO modulated tag backscatter data packet formed according to the UHF Gen2 specification with AWGN but without appreciable colored noise. As shown in the diagram data symbols are much larger than the thermal noise floor providing a noise margin that allows the reader to accurately demodulate the data symbols.

Diagram of illustrates an FMO modulated tag backscatter data packet formed according to the UHF Gen2 specification with AWGN and colored noise. The result is a significant reduction in noise margin which degrades the reader s ability to accurately demodulate the data symbols.

As mentioned previously embodiments are directed to RFID readers and reader systems mitigating colored noise through adaptive filters and training the readers by means of data transmitted by the tags. Embodiments additionally include programs and methods of operation of the programs. A program is generally defined as a group of steps or operations leading to a desired result due to the nature of the elements in the steps and their sequence. A program is usually advantageously implemented as a sequence of steps or operations for a processor such as the processors described above.

Performing the steps instructions or operations of a program requires manipulating physical quantities. Usually though not necessarily these quantities may be transferred combined compared and otherwise manipulated or processed according to the steps or instructions and they may also be stored in a computer readable medium. These quantities include for example electrical magnetic and electromagnetic charges or particles states of matter and in the more general case can include the states of any physical devices or elements. It is convenient at times principally for reasons of common usage to refer to information represented by the states of these quantities as bits data bits samples values symbols characters numbers or the like. It should be borne in mind however that all of these and similar terms are associated with the appropriate physical quantities and that these terms are merely convenient labels applied to these physical quantities individually or in groups.

Embodiments furthermore include storage media. Such media individually or in combination with others have stored thereon instructions of a program made according to the embodiments. A storage medium according to the embodiments is a computer readable medium such as a memory and is read by a processor of the type mentioned above. If a memory it can be implemented in a number of ways such as Read Only Memory ROM Random Access Memory RAM etc. some of which are volatile and some non volatile.

Even though it is said that the program may be stored in a computer readable medium it should be clear to a person skilled in the art that it need not be a single memory or even a single machine. Various portions modules or features of it may reside in separate memories or even separate machines. The separate machines may be connected directly or through a network such as a local access network LAN or a global network such as the Internet.

Often for the sake of convenience only it is desirable to implement and describe a program as software. The software can be viewed in terms of various interconnected distinct software modules.

This detailed description is presented also in terms of flowcharts algorithms and symbolic representations of operations on data bits on and or within at least one medium that allows computational operations such as a computer with memory. Indeed such descriptions and representations are the type of convenient labels used by those skilled in programming and or the data processing arts to effectively convey the substance of their work to others skilled in the art. A person skilled in the art of programming may use these descriptions to readily generate specific instructions for implementing a program according to the present disclosure.

An RFID reader according to some embodiments includes an antenna a transmitter coupled to the antenna and a receiver coupled to the antenna the receiver including an adaptive filter. The adaptive filter may be a linear equalizer a linear predictive canceller or a decision feedback equalizer. The adaptive filter may estimate a colored noise component of a received signal the estimate being based on a difference between a desired signal and a portion of the received signal and may mitigate the colored noise by removing the colored noise estimate from the received signal.

The desired signal may include training data packet data decision data or in channel energy. The colored noise estimate may be derived from correlated noise components and removed by subtracting. The adaptive filter may also include an adaptation controller configured to adapt a filtering module of the adaptive filter.

According to other embodiments the adaptation controller may be further configured to select the portion of the received signal to be used for adaptation select a quality metric to be used for adaptation from a demodulator waveform or a decision error and implement an adaptive least mean squares algorithm or a recursive least squares algorithm to adapt the filter coefficients weights . The adaptation controller may also adjust a convergence behavior of the adaptive algorithm and may adapt the filtering module in a continuous manner or during a predefined period. The predefined period may be a time interval when no tag signal is present.

Alternatively the predefined period may be a pilot tone time and or a preamble time according to the Gen2 Specification. The pilot tone and the preamble may form at least a portion of the received signal.

According to further embodiments the filtering module of the adaptive filter may be adapted by the reader providing a proxy tag signal in place of at least a portion of the received signal during an RF power ramp a frequency hop interval or during a regular communication between the tag and the reader. The proxy tag signal may be a digital signal that is combined with digitized waveforms in the reader s receiver or an analog signal that is combined with analog waveforms in the reader s receiver. The proxy tag signal may also be combined with channel impairments before being provided to the filtering module. Moreover the reader may also include a processor configured to instruct the tag to reply with an alternative preamble to improve the colored noise estimate.

Embodiments also include methods. Some are methods of operation of an RFID reader or an RFID reader system. Others are methods for controlling an RFID reader or an RFID reader system.

These methods can be implemented in any number of ways including the ways described in this document. One such way is by machine operations of devices of the type described in this document.

Another optional way is for one or more of the individual operations of the methods to be performed in conjunction with one or more human operators performing some of them. These human operators need not be collocated with each other but each can be only with a machine that performs a portion of the program.

Reader operations generally include transmitting a wireless signal to a tag or to a population of tags receiving a reply signal determining a difference between the reply signal and a desired signal correlating colored noise components based on the difference and removing the colored noise components from the current and or future received signals .

Adaptive filters employed in readers may include linear predictive cancellers linear equalizers or decision feedback equalizers. These filters may be trained at opportune times in the reader receive operations. For example as illustrated in optional training intervals and training can occur when the tag reply signal is not present such as during the Gen2 T1 interval or when the tag reply signal is present such as when the reader is receiving a tag s pilot tone preamble or identifying data. Alternatively the filters may be trained by the reader providing a proxy tag signal in place of a portion or the entirety of the tag reply signal. The training may be performed intermittently or continuously.

The operations included in process are for illustration purposes only. Mitigating colored noise in an RFID system may be implemented by similar processes with fewer or additional steps as well as in a different order of operations using the principles described herein.

The RF AFE receives reply signals from tags plus noise via antenna . The RF AFE may also include analog filters for removing out of channel noise. Analog to digital converter ADC converts the analog signal to digital and provides it to digital front end . Digital front end provides initial conditioning such as gain control and decimation filtering. The signal is then provided to a filtering module of adaptive filter which may be a linear predictive canceller a linear equalizer or a decision feedback equalizer collectively known as predictive cancellers or equalizers . Filtering module is controlled by adaptation controller which controls aspects of filter adaptation such as adaptation time adaptation algorithm error source convergence behavior etc. The adaptively filtered signal is then provided to demodulator which demodulates tag reply symbols to provide to other circuits of the reader. Demodulator also receives training symbols from other circuits of the reader and may provide feedback to the adaptation controller and or the filtering module of the adaptive filter .

Adaptation controller controls as mentioned above various aspects of filtering module . Specifically these aspects may include a time of the filtering selecting the training data for adaptation selecting the error source for adaptation choosing the adaptive algorithm and controlling the convergence behavior of the algorithm.

An RFID reader employing adaptive filters to mitigate correlated noise according to embodiments may employ estimation prediction of the correlated noise in the form of adaptive cancellation or adaptive equalization. The colored noise is attenuated by estimating the correlated noise components and subtracting them from the tag reply signal. Such an RFID reader may adapt its receiver filter s continuously or during one or more discrete time periods in either case the filtering is facilitated by the reader having a priori knowledge of whether and how a tag should reply. The discrete time periods can be During the Gen2 T1 interval when a tag reply signal is not present when the tag is sending a known pilot tone and or preamble and when the tag is sending identifying data.

The RFID reader may optionally instruct the tags to use alternative preambles to facilitate filter convergence. Alternate tag preambles may be better suited to filter training than standard preambles or identifying tag data.

The RFID reader may also sum a known training sequence into its receiver. A proxy tag signal is a known training sequence generated and injected internal to the reader. The reader may sum a digital proxy signal with the ADC output data or an analog proxy signal into AFE . The proxy tag signal may be combined with channel impairments at the summing node. For colored noise whose statistics are either time invariant or slowly varying using a proxy signal can aid filter convergence by providing a coarse initial solution for the adaptive filter coefficients.

One example use for a tag proxy signal includes the reader first inventorying tags whose replies have high signal to noise ratio SNR where little or no whitening i.e. colored noise removal is required. During these times of high SNR the reader may inject a proxy signal into the receiver to provide a coarse initial filter solution. Then during a second time period the reader may look for those remaining tags whose replies have low SNR both fine tuning the filter solution and removing the colored noise from these low SNR tag reply signals. In this fashion the proxy signal aids in reading those tags whose reply SNR is low due to colored noise.

An adaptive filter is a filter that self adjusts its transfer function according to an optimization algorithm. Adaptive filters adapt their filter coefficients weights based on the input signal and or feedback signals typically by means of digital signal processing. Adaptive filters may be contrasted with non adaptive filters which have static filter coefficients. Adaptive filters are beneficial when one or more parameters of the filtering operation for example the statistics of a noise signal are not known a priori. In such situations the adaptive filter dynamically refines its filter coefficients and thereby its ability to mitigate incoming colored noise.

Generally the adaptation process involves minimizing a cost function as a criterion for optimizing the filter performance. The adaptation algorithms determine how best to modify the filter coefficients to minimize the cost function. Adaptive filters may use past samples of the received signal and or estimated values of future signals for their adaptation.

As shown in diagram adaptive filter may include several different types of filter structures i.e. filtering module of . In a reader according to embodiments these structures may include a linear predictive canceller a linear equalizer or a decision feedback equalizer .

Linear predictive canceller estimates the current value of a signal as a linear function of previous samples of the signal. Adaptation periods in a linear predictive canceller include period when the filter may perform a coarse adaptation while receiving an RF carrier and noise period when the filter may perform a fine adaptation while receiving an RF carrier and noise plus a training sequence and period when the filter may also perform a fine adaptation while receiving an RF carrier and noise plus a tag reply signal.

Linear equalizer is a linear transversal filter that may operate at the symbol rate T spaced equalizer or at a multiple of the symbol rate fractionally spaced equalizer . The linear equalizer may be optimized to eliminate the error energy due to ISI Zero Forcing ZF criteria or to minimize the combined error energy due to ISI and noise Mean Squared Error MSE criteria . The MSE linear equalizer strikes a balance between compensating signal amplitude distortion and enhancing output noise. In the presence of in channel colored noise the MSE linear equalizer strikes a balance between minimizing the correlated noise energy and adding ISI to the desired signal. Linear equalizer may perform coarse adaptation using training data when receiving the RF carrier and noise and fine adaptation when receiving the RF carrier noise and a tag reply signal.

A decision feedback equalizer DFE is a nonlinear equalizer composed of a fractionally spaced forward filter and a symbol spaced feedback filter. The forward filter operates on the receiver input signal while the feedback filter operates on previous decision data. The DFE may be optimized in accordance with ZF or MSE criteria. Since the decisions fed back through the feedback filter are noise free estimates of the previous symbols the DFE can remove postcursor ISI ISI due to past symbols without enhancing the output noise. The forward filter may be optimized to form the composite of a matched filter and a noise whitening filter. The feed forward filter may introduce postcursor ISI for example through the noise whitening process which is subsequently cancelled by the feedback filter.

DFE contains a forward filter and a feedback filter. The forward filter is similar to the linear equalizer described above. The feedback filter contains a tapped delay line whose inputs are the decisions made on the signal by the forward filter. A DFE can adjust its forward and feedback filter coefficients simultaneously. The equalizer then outputs a weighted sum of the values in the forward and feedback delay lines and updates its filter coefficients to prepare for the next symbol period. DFE may employ two adaptation periods when the input is an RF carrier and noise plus a training sequence and when the input is an RF carrier plus noise and a tag reply signal.

As discussed in the signal received by the RF and AFE is converted to a digital signal by ADC and then provided to digital resampler by digital front end which may include filters for attenuating out of channel noise. The samples are then provided to fractional forward equalizer DFE forward filter controlled by adaptation controller .

Fractional forward equalizer feeds timing and carrier recovery module which provides an input to a summing node as well as sampling rate information to digital resampler . Timing and carrier recovery module also provides feedback to adaptation controller through mixer which phase adjusts rotates the error by the carrier offset.

Summing node also receives feedback from decision feedback equalizer DFE feedback filter and provides decision data through limiter comparator . The decision data along with training data are provided to multiplexer which is controlled by adaptation controller . An output of multiplexer is provided to summing node where an output of summing node is subtracted from the multiplexer output and provided back to mixer .

Fractional forward equalizer forms a whitening matched filter that removes correlated noise but introduces postcursor ISI. Decision feedback equalizer acts to remove the postcursor ISI.

Circuits through of the linear predictive canceller also known as a linear predictor shown in diagram are similar to likewise numbered circuits in . Digital resampler which receives its sampling rate information from timing and carrier recovery circuit provides samples to linear predictive canceller controlled by adaptation controller .

The linear predictive canceller employs forward prediction to estimate the colored noise it then subtracts the estimate from the received signal. An output of the timing and carrier recovery circuit is provided to limiter comparator to provide decision data to other circuits of the reader. The output of the timing and carrier recovery circuit is also subtracted at summing node from an output of multiplexer which multiplexes chooses the training data or decision data as instructed by adaptation controller .

The output of the summing node the error signal is provided to mixer along with an input from timing and carrier recovery circuit mixer phase adjusts rotates the error by the carrier offset. The output of mixer is provided to adaptation controller . It is also provided to mixer where it is mixed with the decision data and the result is provided to adaptation controller .

It should be noted that the example components of the decision feedback equalizer and linear predictive cancellers in as well as the linear equalizer in below are provided solely for illustration purposes and do not constitute a limitation on embodiments. Adaptive filters for mitigating colored noise in RFID readers may be implemented using fewer or additional components than those shown herein such as for example filters with fewer or additional taps. Furthermore other component types such as combinations of the examples described herein may also be used to mitigate colored noise. In that spirit example circuits for a linear predictive cancellation filter are shown in and example circuits for a linear equalization filter are shown in .

The predictive cancellation filter shown in diagram employs previous samples of the incoming noise signal to estimate a current sample. In this example d n is the decision data the desired data v n is the colored noise and y n is the incoming signal which comprises d n plus the colored noise v n . The filter may be adapted by subtracting delayed estimates of the desired signal d n M from a delayed incoming signal y n M .

Delayed incoming signal y n M is derived at node from y n . Desired signal d n M is subtracted from y n M at summing node thereby providing v n M . Four delayed samples v n M 1 v n M 2 v n M 3 and v n M 4 are derived at delay nodes through . These noise samples are weighted at mixers multipliers through with weight coefficient factors w through w . The weighted noise samples are summed at summing nodes through producing an estimate of the colored noise v est n . Weights w through w are computed by the adaptation controller of the adaptive filter . This colored noise estimate v est n is subtracted from y n at summing node followed by a delay due to demodulator signal processing introduced at delay node . The output of delay node is d n M .

Circuits through of the linear equalizer shown in diagram are similar to likewise numbered circuits in diagrams and of . Digital resampler receives input data from digital front end sampling rate information from timing and carrier recovery circuit and provides samples to linear equalizer controlled by adaptation controller .

In this example linear equalizer receives a predefined number of input samples before producing an output sample and updating its filter coefficients weights . An output of the timing and carrier recovery circuit is provided to limiter comparator to provide decision data to other circuits of the reader. The same output from timing and carrier recovery circuit is also subtracted at summing node from an output of multiplexer which multiplexes chooses the training data or decision data as instructed by adaptation controller

The output of the summing node the error signal is provided to mixer multiplier which also receives an input from timing and carrier recovery circuit mixer phase adjusts rotates the error signal by the carrier offset. The output of mixer is provided to adaptation controller .

The linear equalization filter shown in diagram convolves the received signal y n which includes colored noise with the time varying filter coefficients weights w M yielding the desired signal d n . The filter coefficients w M are computed by the adaptation controller of the adaptive filter .

As shown in diagram samples of the received signal y n are delayed by delay nodes through these delayed samples are then multiplied by the time varying coefficients w through w at mixers through and summed at sum nodes through . The result is desired signal d n .

As discussed previously adaptive filters require training samples to adapt. In diagram the filter may perform a coarse adaptation during an RF power ramp or a similar training time using training data such as a proxy tag signal provided by circuits of the reader. The result of this coarse training is the decision input shown in diagram and the decision error shown in diagram . In this example no adaptation occurs during reader transmit period or Gen2 T1 interval the filter coefficients are frozen. A fine adaptation may be performed during tag response period using known data such as a pilot tone preamble or tag data and decision data. The result of this fine adaptation is the improved decision input shown in diagram and the reduced decision error shown in diagram .

In diagram a predictive canceller may perform a coarse adaptation during an RF power ramp or a similar training time by using the reader s CW signal and minimizing the variance in the received energy. This coarse adaptation results in the initial prediction error shown in diagram . In this example no adaptation occurs during reader transmit period the filter coefficients are fixed. A fine adaptation may be performed during the Gen2 T1 interval and or during tag response period . During the Gen2 1 interval because no tag data are present the fine adaptation may be performed using the reader s CW signal. During tag response period the fine adaptation may be performed using the tag s pilot tone preamble or backscattered data. The result of this fine adaptation is reduced prediction error as shown in diagram .

Diagram shows noise free reply data from a tag. These data do not include any degradation due to noise. Diagram shows the effect of colored noise on the tag reply signal. In this case the noise is a simple 100 kHz tone. Without adaptive filtering a reader will have a very difficult time demodulating the tag reply symbols from these noisy data. Diagram illustrates the noisy waveform of diagram after filtering by a decision feedback equalizer. The filter significantly reverses the degradation caused by the colored noise component. To those versed in the art the decision feedback equalizer has whitened the noisy waveform.

The above described features of a reader including the adaptive filtering can be implemented by a so called utility of an RFID reader. A utility can include one or more of the above described components operational processing blocks an article of manufacture etc.

The invention further provides interfacing to expose a functionality of this reader utility to an agent as is described in more detail below. is a block diagram illustrating an architecture for an interface converter according to embodiments. Architecture includes a utility as described above.

Architecture also includes an interface converter and an agent . Agent interface converter and utility can be implemented in any way known in the art. For example each can be implemented in hardware middleware firmware software or any combination thereof. In some embodiments agent is a human. Interface converter enables agent to control utility . Interface converter is so named because it performs a conversion or a change as will be described in more detail below.

Embodiments of the present invention may include interface converter and methods of operation of interface converter .

Between interface converter agent and utility there are respective boundaries . Boundaries are properly called interfaces in that they are pure boundaries as in the above described air interface.

In addition it is a sometimes informal usage to call the space between boundaries and which includes interface converter an interface . Further it is common to designate this space with a double arrow as shown with an understanding that operations take place within the arrow. So although interface is located at a boundary between agent and utility it is not itself a pure boundary. Regardless the usage of interface is so common for interface converter that this document sometimes also refers to it as an interface. It is clear that embodiments of such an interface can be included in this invention if they include an interface converter that converts or alters one type of transmission or data to another as will be seen below.

Agent can be one or more layers in an architecture. For example agent can be something that a programmer programs to. In alternative embodiments where agent is a human interface converter can include a screen a keyboard etc. An example is now described.

Returning to one way interface converter can be implemented is as an Application Programming Interface API . This API can control or provide inputs to an underlying software library and so on.

Communications can be between agent interface converter and utility . Such communications can be as input or can be converted using appropriate protocols etc. What is transmitted can encode commands data etc. Such communications can include any one or a combination of the following a high down communication HDNT from agent to interface converter a low down communication LDNT from interface converter to utility a low up communication LUPT from utility to interface converter and a high up communication HUPT from interface converter to agent . These communications can be spontaneous or in response to another communication or in response to an input or an interrupt etc.

Commands are more usually included in communications HDNT and LDNT for ultimately controlling utility . Controlling can be in a number of manners. One such manner can be to install utility or just a feature of it. Such installing can be by spawning downloading etc. Other such manners can be to configure enable disable or operate utility or just a feature of it. These commands can be standalone or carry parameters such as data confidential information etc. In some embodiments interface converter can convert these commands to a format suitable for utility .

Data are more usually included in communications HUPT and LUPT. The data can inform as to success or failure of executing an operation. The data can also include tag data which can be both codes read from tags including confidential information and data about reading tags such as time stamps date stamps etc. . In some embodiments interface converter can convert the data to a format suitable for agent including in some cases aggregating filtering merging or otherwise altering the format or utility of the data.

It should be noted that what passes across a single pure boundary is unchanged by the definition of what is a pure boundary . But what passes through interface converter can be changed or not. More particularly high down communication HDNT can be being encoded similarly to or differently from low down communication LDNT. In addition low up communication LUPT can be encoded similarly to or differently from high up communication HUPT. When different the difference can be attributed to interface converter which performs a suitable change or conversion of one communication to another. The change or conversion performed by interface converter is for exposing the functionality of utility to agent and vice versa. In some embodiments a command is converted but a parameter is passed along without being converted. Plus what is not converted at one module may be converted at another. Such modules taken together can also form an interface converter according to embodiments.

Agent interface converter and utility can be implemented as part of a reader or as a different device. For being implemented as part of a reader suggests a scheme where agent interface converter and utility can be implemented in connection with respective reader modules that are suitable depending on the requirements.

The above specification examples and data provide a complete description of the manufacture and use of the composition of the embodiments. Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims and embodiments.

