---

title: Methods for PCO based UWB impulse radio with localized synchronization detection and retention
abstract: The present invention provides a communications system, node and method of operation for forming a wireless network from independently operating nodes that have the ability to self-synchronize with each other, independently determine master and slave modes of operation to cooperate as a network, and independently vary those functions to adjust to changes in the network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08442172&OS=08442172&RS=08442172
owner: Cornell Center for Technology, Enterprise & Commerce
number: 08442172
owner_city: Ithaca
owner_country: US
publication_date: 20120727
---
This application is a divisional of co pending U.S. patent application Ser. No. 13 141 832 filed Jul. 11 2011 entitled SYSTEMS AND METHODS FOR PCO BASED UWB IMPULSE RADIO WITH LOCALIZED SYNCHRONIZATION DETECTION AND RETENTION which in turn is a U.S. national phase entry under 35 U.S.C. 371 of International Application No. PCT US09 69195 filed Dec. 22 2009 entitled SYSTEMS AND METHODS FOR PCO BASED UWB IMPULSE RADIO WITH LOCALIZED SYNCHRONIZATION DETECTION AND RETENTION which in turn claims priority from U.S. Provisional Application Ser. No. 61 140 143 filed Dec. 23 2008 for SYSTEMS AND METHODS FOR PCO BASED UWB IMPULSE RADIO WITH LOCALIZED SYNCHRONIZATION DETECTION RETENTION all of which are incorporated herein by reference herein in their entirety for all purposes.

This invention was made with Government support under Grant Number IDW911NF 05 10515 awarded by the Army Research Office. The United States Government has certain rights in the invention.

The present invention generally relates to wireless communications nodes and in particular to such devices which have the independent ability to form communications networks.

Ultra wideband UWB radio is a method of RE wireless communications utilizing short duration poises instead of a continuous wave sinusoid to transmit information. Whereas continuous wave signal is constantly active both during data transmission as well as after an UWB signal is only active during pulse transmissions which allows the R.F. front end to be turned off during inactive periods.

It is well known that the time limited wide spectrum signaling in UWB promises greater network capacity over traditional radio architectures allowing superior data rate and spatial capacity at similar power consumption over short distances. The short pulse signaling also allows duty cycling of the RE front end to save power. However achieving these benefits of ultra wideband communications is contingent on precise synchronization between transmitter and receiver such that transmitted pulses are received. For instance if a transmitter and receiver are not synchronized to the same clock and a pulse is transmitted the receiver may not be active and miss the data. However if the two are synchronized together then the receiver will be able to capture the pulse even as the receive duty cycle is reduced.

A popular practical implementation of synchronization is in the use of a high speed DLL PLL in conjunction with a digital pulse tracking backend that maintains synchronization throughout the period of communications. The drawback of this approach is that the receiver and transmitter clocks must have center frequencies matched on the order of ten to hundreds of parts per million to maintain adequate synchronization thereby necessitating that the local oscillators of both the transmitter and receiver be referenced to well matched crystals so that frequency drift between them is minimized. This requirement for a crystal imposes a significant cost to a system that a manufacturer would ideally like to avoid.

One embodiment of the present invention provides an independent node for operating in a wireless communications network including a plurality of said independent nodes comprising R.F. circuitry adapted for wirelessly transmitting and receiving pulses between nodes an internal pulse coupled oscillator PCO having a periodic state function ending in a PCO firing and coupled to the R.F. circuitry for transmitting a sync pulse at the PCO firing circuitry coupled to increment the state function in response to external sync pulses received from other nodes and a state machine adapted to switch between synchronized and unsynchronized operation in response to sync pulses received from other nodes and including first circuitry coupled to identify if and when external sync pulses from other nodes are received between PCO firings to cause the state machine to select either an unsynchronized mode of operation or synchronized slave or master modes of operation in response thereto.

The first circuitry may be coupled to identify a First Event if a single external sync pulse is received from other nodes between PCO firings and within a predetermined period before the PCO firing. The first circuitry may include a counter coupled to determine if a predetermined number of First Events occur to cause the state machine to select a synchronized slave mode of operation in response thereto. The node may further comprise a phase locked loop PLL coupled to the PCO to generate time interval signals between PCO firings wherein the first circuitry is adapted to indicated when an external sync pulse from another node is not received in the slave mode of operation and further wherein the PLL is coupled to provide an internal sync pulse to the PCO in the selected slave mode of operation when an external sync pulse from another node is not received between PCO firings.

The first circuitry may be coupled to identify a Second Event if no external sync pulses are received from other nodes between PCO firings except for a predetermined window following the PCO firing. The first circuitry may include a counter coupled to determine if a predetermined number of Second Events occur to cause the state machine to select the synchronized master mode of operation in response thereto.

The node may further comprise circuitry coupled to the R.F. circuitry to switch between different frequency bands for the receipt and transmission of sync pulses versus data pulses. The node may also further comprise pulse shaping or transmitting circuitry coupled to the R.F. circuitry and adapted to dither a center frequency of pulses transmitted from the node during transmission of the pulses to help shape a transmission spectrum of the pulses.

Another embodiment of the present invention provides a wireless communications system having a plurality of independent nodes forming a network each node comprising R.F. circuitry adapted for wirelessly transmitting and receiving pulses between nodes an internal pulse coupled oscillator PCO having a periodic state function ending in a PCO firing and coupled to the R.F. circuitry for transmitting a sync pulse at the PCO firing circuitry coupled to increment the state function in response to external sync pulses received from other nodes and a state machine adapted to switch between synchronized and unsynchronized operation in response to sync pulses received from other nodes and including first circuitry coupled to identify if and when external sync pulses from other nodes are received between PCO firings to cause the state machine to select either an unsynchronized mode of operation or synchronized slave or master modes of operation in response thereto.

The first circuitry may be coupled to identify a First Event if a single external sync pulse is received from other nodes between PCO firings and within a predetermined period before the PCO firing and further wherein the first circuitry includes a counter coupled to determine if a predetermined number of First Events occur to cause the state machine to select a synchronized slave mode of operation in response thereto. The system may further comprise a phase locked loop PLL coupled to the PCO to generate time interval signals between PCO fixings wherein the first circuitry is adapted to indicated when an external sync pulse from another node is not received in the slave mode of operation and further wherein the PLL is coupled to provide an internal sync pulse to the PCO in the selected slave mode of operation when an external sync pulse from another node is not received between PCO firings.

Yet another embodiment of the present invention provides an independent node for operating in an ultra wideband wireless communications network including a plurality of said independent nodes comprising R.F. circuitry adapted for wirelessly transmitting and receiving pulses between nodes and pulse shaping or transmitting circuitry coupled to the R.F. circuitry and adapted to dither a center frequency of pulses transmitted from the node during transmission of the pulses to help reshape a transmitted spectrum of the pulses.

Still another embodiment of the present invention provides a method for operating independent wireless communications nodes to cooperate as a synchronized network comprising the steps of transmitting a sync pulse from each node upon firing of an internal pulse coupled oscillator PCO having a state function incrementing the state function in response to external sync pulses received from other nodes providing a state machine in each node to switch between synchronized and unsynchronized operation first determining if any external sync pulses are received from other nodes between firings of the internal PCO except for a predetermined period after each firing and first selecting a synchronized master mode of operation in response to the first determining step in the absence of any external sync pulses being received from other nodes between firings of the internal PCO except for a predetermined period after each firing.

The method may further comprise controlling RR component duty cycling with the state machine and second selecting R.F. component duty cycling in conjunction with the step of first selecting the master node of operation. The method may further comprise the steps of periodically deselecting R.F. component duty cycling first repeating the step of first determining and second repeating the step of first selecting in response to the step of first repeating. The method may also further comprise third selecting an unsynchronized mode of operation in response to the step of first repeating in the presence of external sync pulses being received from other nodes between firings of the internal PCO except for a predetermined period after each firing.

The method may further comprise the steps of second determining if an external sync pulse from another node is received within a predetermined period before firing of the internal PCO fourth selecting a synchronized slave mode of operation in response to the step of second determining third determining when an external sync pulse from another node is not received in the slave mode of operation and providing an internal sync pulse in the selected slave mode of operation from an internal phase locked loop in response to the step of third determining.

Still another embodiment of the present invention provides a method for operating a wireless communications node to cooperate in a synchronized network of wireless nodes comprising the steps of running an internal pulse coupled oscillator PCO with a state function to periodic firing for allowing synchronization with one or more other nodes incrementing the state function in response to external sync pulses received from other nodes providing a state machine in each node to switch between synchronized and unsynchronized operation first determining if an external sync pulse from another node is received within a predetermined period before firing of the internal PCO selecting a synchronized slave mode of operation in response to the step of first determining second determining when an external sync pulse from another node is not received in the slave mode of operation and providing an internal sync pulse in the selected slave mode of operation from an internal phase locked loop in response to the step of second determining.

The method may further comprise controlling R.F. component duty cycling with the state machine and selecting R.F. component duty cycling of the node in the selected slave mode of operation. The method may also comprise deselecting R.F. component duty cycling in the selected slave mode of operation in response to the step of second determining. The method may further comprise the steps of third determining if an external sync pulse from another node is received within a predetermined period before firing of the internal PCO and reselecting R.F. component duty cycling of the node in the selected slave mode of operation in response to the step of third determining. The method may even further comprise switching to unsynchronized operation from the slave mode in response to the step of second determining when an external sync pulse is not received over a predetermined number of PCO firings.

Ultra wideband UWB radio is a method of RF wireless communications utilizing short duration pulses instead of a continuous wave sinusoid to transmit information. shows the difference between a continuous wave signal and an UWB signal . Whereas continuous wave signal is constantly active both during data transmission as well as after an UWB signal is only active during pulse transmissions which allows the RE. front end to be turned off during inactive periods .

A popular method of UWB signaling is time hopping for low to medium pulse rates on the order of hundreds of KHz to the low hundreds of MHz. The time hopping method of UWB transmissions is based on a transmitter sending time limited pulses of data at times known by the receiver which looks at the received signal at the agreed upon times and determines the data that was sent. shows a popular manifestation of the above method which divides each UWB transmission packet into frames and then further subdivides those frames into bins . Many frames compose a packet while many bins compose a frame . Within each frame there can be only one transmission of an UWB data pulse. This transmission will fall into a certain bin . The bin that the pulse falls in will be determined by a template sequence that is common to both receiver and transmitter. Thus a receiver with the same template sequence as the transmitter will know the appropriate bins over which to look for the data while pulses from other transmitters will fall in other bins where they are ignored. Synchronization is vital in this scheme because without it the receiver cannot know when the transmitted data is valid.

To facilitate synchronization between nodes of a wireless UWB network the present invention utilizes a pulse coupled oscillator PCO system. The PCO system is composed of identical oscillators following a state function as shown in and for two oscillators. The state function for a first oscillator i is a variable V that is a function of a normalized time t T where tis the time since the first oscillator i last reset and Tis the time a free running oscillator takes to complete a cycle. All oscillators may start at random initial points A on the state curve and travel along the state function at a constant and identical rate. When the oscillator for state function completes a period at it emits an instantaneous synchronizing or coupling pulse V to every other oscillator in the system as indicated for state function for oscillator ii in causing them to advance in state or increment by V. If the state function is monotonically increasing and concave down then the system of identical oscillators perfectly phase locks and hence the firing times also synchronize. Each firing drives the oscillators phases closer together through the nonlinearity of the state function.

The oscillators may also include a blackout period as in and which correspond to the same two state functions. During blackout period no incremental V coupling is accepted which introduces a static offset of T

A generic system oscillator implementing the state function of and is shown in . The state V is constantly added to by an addition block that senses Vand adds a f V that is positive and decreasing for increasing values of V. V then feeds into a threshold detector that sends a trigger signal when the threshold is reached. The trigger signal may then be encoded at in such a way as make it more immune to noise and interference and to differentiate it from other pulses. Finally addition block accepts positive external coupling through the couple input to V to implement the coupling aspects of the PCO.

An example of an all analog on chip implementation of the generic oscillator of is the circuit of . The PCO state function is represented by the voltage A at node with respect to time. Node is charged up by a current source V that is monotonically decreasing with V. When Vexceeds the threshold set by V as determined by comparator it goes through a delay path that causes a switch to discharge voltage A on node rapidly to ground thereby generating an output pulse to sync pulse encoder of width controlled by the delay path. The V function is provided by a synchronizing pulse turning on current source for a predetermined pulse width.

A generic system level view of a system or network is shown in . The nodes are connected to every other node through a communications channel such as a wireless link. The most general form of an individual node is diagrammed in . Each node implements a physical interface driver to interface with the physical channel in the transmit mode and an R.F. front end circuitry in the receive mode. Front end circuitry may include a low noise input stage and a high gain second stage and include transmit switching to prevent feedback during transmission by driver . A sync pulse detector is used to extract the synchronization pulse from the received information at R.F. front end circuitry .

Each node also implements the pulse coupled oscillator described above in reference to whereby the global clock in the system is mutually created. This global clock may be used by a communications system to facilitate communications between individual nodes . The communications system may or may not be on the same node as that implementing the PCO functionality as is shown in . However in any either case the global clock is generated through the PCO function and the communications system uses it to time its communications. The generated clock is also transmitted out after a possible sync pulse encoder to emit coupling to the other nodes .

The external controller is responsible for maintaining the state of the system to determine in which step of the above process the node is functioning to provide the bin of transmission and reception to implement a suitable encoding scheme for the bit error rate of the system and to record the detected data pulse. Since all pulse detection and processing functions are implemented on chip the external controller only needs to run at the pulse rate which is the slowest timescale in the system. Thus even a simple low cost microcontroller can be used as the controller.

An alternate embodiment of the node of is shown in circuit of . The transceiver chain in circuit includes of a UWB antenna duty cycle able and or band controllable Low Noise Amplifier LNA and amplifying stages followed by a non coherent detector . This is followed by Sync Data Decoder that qualifies the detected signal as either Sync or Data. The sync Pulse goes to a PCO that in conjunction with the PLL generates the bins. Every time PCO fires a sync pulse is generated creating the timing boundaries frame boundary of rate Tframe for a network. The PLL divides the PCO rate Tframe to N number of bins Thin . In these bins the sync pulse is fired in the sync bin aligned with the frame boundary. Data is sent or received in bins decided by the central timing block . A system Sync State machine locally detects and maintains the synchronization which enables data communication between nodes. Once the nodes are synchronized as detected by the Sync state machine the RF duty cycling can start thereby resulting in power saving for the system.

Saving power in independently powered nodes is significantly impacted by duty cycling of power hungry R.F. components. This duty cycling is dependent upon synchronization between the nodes which requires both attaining and maintaining synchronization. The variability or scalability of such networks is enhanced by dynamic and independent node determination of its own mode of operation between master and slave. The specific process of nodes joining and or leaving a network is even further enhanced by providing clear distinction to the nodes between synchronization and data pulses.

Each node includes a state machine for controlling the mode of operation of each node between an unsynchronized or self synchronizing mode and either master or slave synchronized modes of operation. Synchronized operation enables duty cycle power control or duty cycling of R.F. components. The operation of this state machine is functionally depicted in the flowchart of . The determination of synchronization and duty cycling within the state machine is based upon the detection of the following events which are described below in reference to .

A PCO Firing event is registered when the pulse coupled oscillator PCO reaches the end of its cycle and resets causing a sync pulse to be transmitted from the node.

A Sync event is registered whenever an external sync pulse is detected from another node outside of a small blackout window immediately following a PCO Firing event. This blackout window avoids self coupling and race conditions that might otherwise exist.

A Sync PCO Overlap event is registered when a Sync event is followed by a PCO Firing event within a small pre determined timing window indicating that the PCO Firing event likely occurred as a result of the Sync event.

A First Event is determined whenever a Sync PCO Overlap event is registered subject to the condition that a Sync event counter is less than or equal to one. Thus a First Event means that a node has had a PCO Firing event caused by a single Sync event. This means that the node is functioning within a synchronized network of nodes as a slave node. If a PCO Firing event occurs without a Sync event the node is not operating as a slave. If more than one Sync event is detected between PCO Firing events then the node is not yet synchronized to a network. By a predetermined number of successive occurrences of the First Event the state machine knows to select a synchronized slave mode of operation for the node. The First Event is represented in the drawings as Event.

A Second Event is determined whenever a PCO Firing event occurs without detection of any Sync event during successive PCO Firing events. Thus a Second Event means that a node is either operating as a master node in a network or is alone. By successive occurrences of the Second Event the state machine knows to select a synchronized master mode of operation for the node. The Second Event is represented in the drawings as Event.

The received sync pulses on input are also coupled to the clock input of a sync counter . The PCO Firing events are also coupled through a delay circuit to the reset input of sync counter . Delay circuit represents the blackout window mentioned above within which received sync pulses are not detected. Although a sync signal may clock counter the PCO Firing event will reset those counts at the end of the blackout window. The contents or output of sync counter indicate the Sync events detected between PCO Firing events and outside of the blackout window. Output register indicates when counter is indicating one or fewer Sync events and this is anded in AND gate with the Sync PCO Overlap event at output . The output of AND gate is the existence of a First Event. If more than one Sync event is detected within successive PCO Firing events this indicates lack of synchronization and a First Event is not detected. AND gate clocks a Event Counter to track a predetermined number of First Events which are detected as a basis for switching to the slave mode of operation.

Second Events are detected by coupling sync counter to AND gate via a register which indicates When the Sync event count is zero. This is anded with PCO Firing events to detect Second Events. Detected Second Events are used to clock a Event Counter the content of which is the basis for engaging the synchronized master mode of operation

Thus the slave and master configuration for a node is self determined and is dynamic. A Slave configuration means the node fires after detecting sync. A slave configuration means a node needs coupling from other nodes in the network during synchronized state. While a master configuration means the node is the first to fire and that it doesn t need coupling from other nodes the PCO firing by other neighboring nodes gets buried in the blackout window and hence doesn t impact the PCO of the node.

Again is a flowchart of a state machine which is adapted to control the modes of operation of a wireless node constructed in accordance with the present invention. Nodes begin with unsynchronized operation and a system sync state is set to zero in state . In this state the outputs of event one counter and event counter are monitored. When event counter expires in state state machine uses step and switches to synchronized state as a master node setting system sync state equal to one. When event counter expires state machine takes step and switches to synchronized state as a slave node also setting the system sync state equal to one.

In the master mode of operation of state state machine engages duty cycling of R.F. components so that the R.F. receive circuitry is only activated during time periods when sync pulses and data pulses are expected. In order to adjust to dynamic changes in the network based upon movement between nodes and changes in the number of nodes the master mode of operation periodically switches on R.F. duty cycling to determine the presence of additional nodes or the lack of synchronicity between nodes. This is done by means of a lookout counter run by state machine . which counts a predetermined number of PCO cycles i.e. 100 and then switches to state and enables the R.F. receive circuitry during one or more PCO cycles. In the event that no sync pulses are detected outside of the blackout window for a predetermined number of PCO cycles state uses step to return to the synchronized master mode of state . In the event that state does detect sync pulses transmitted from other nodes outside of the blackout window step is used to return to unsynchronized state .

In the slave mode of operation a node is dependent upon the receipt of sync signals from other nodes to maintain effective PCO timing within in the system. On occasion such sync signals may not be detected. To compensate for this event each node reinforces its PCO timing by means of its phase locked loop circuitry . For this purpose the slave mode of operation of state monitors the occurrence of the First Event to determine that an appropriate sync signal is detected for each PCO Firing event. If a sync signal is not detected state machine switches to state which disengages duty cycling and watches for the occurrence of a First Event. If a First Event is detected step returns state machine to the synchronized slave mode of state . If a First Event is not detected for a predetermined number of PCO firings step switches the node back to unsynchronized state .

Even though the implementation of the self reinforcement is done in a decentralized manner the state machine will come to know that the self reinforcement has happened as it will detect a non occurrence of a First Event. Based on the knowledge of missing the First Event the state machine increases the reinforcement count till the count expires based on pre programmed value.

This reinforcement thus helps in maintaining the synchronization as well as detection of loss of synchronization. This can be implemented using standard logic. gates. Reinforcement for some networks might also be disabled based on the internal PLL drift and the synchronization accuracy requirements for the system. For most networks adequate synchronization may be maintained over one to two cycles of reinforcement.

Thus there are programmable counters in the system that keep the count for First Events event and Second Events event thereby helping the state machine to transition from a non synchronized state to synchronized state. There is a reinforcement counter also available in the system that keeps track of the number of times the self reinforcement has happened thereby detecting potential loss of synchronization and helps the state machine transition back to non synchronized state. Similarly there is a lookout counter that facilitates a node in the master configuration to go out and open the window to see if any new nodes have joined the network occasionally which are not in synchronized state or if there is a requirement for the node to switch role. Lookout steps get triggered whenever a pre programmed lookout counter expires and is masked when data communication is happening in the system.

As mentioned above the specific process of nodes joining the network is enhanced by the ability to distinguish between sync and a data pulses. The nodes described herein may use a suitable method to provide this distinction. Two methods are presented including a pseudo coherent self correlated signature detection method and a dual banded time interleaved sync and data communication method.

As shown in a pseudo coherent self correlated signature detection method encodes the synch pulse as a double pulse while the data pulse is encoded as a single pulse. A signal processor for transmission of the double sync pulse is shown in . A generator produces a sync pulse which is coupled to a delay circuit and an edge combiner such as an OR gate. Delay circuit embodies a predetermined time delay Tfor separating the two pulses. The delayed pulse is also coupled to an input of edge combiner . The dual pulse output of edge combiner is connected to a pulse shaping circuit .

The alternate method of a dual banded time interleaved sync data distinction is readily adapted for use in pulse coupled oscillators. When not synchronized the nodes will be looking for sending and receiving the sync pulse and the transmitter and receiver circuits can both be configured to the sync channel. Within synchronization the sync and data pulses are time separated for each node. That means the same set of receiver and transmitter circuits can be used for both sync and data pulses avoiding duplication and saving power and circuit area. shows a simplified block diagram where a duty cycled frequency controllable oscillator is coupled to a digital antenna drive and antenna for implementation.

In the dual banded approach the transmitted pulses can be shaped to reside in respective bands and similarly for the receiver the gain can be dynamically configured to have band selectivity. shows frequency selective gain curves for a receiver and shows the shaped spectrum of transmitted pulses each having a 500 MHz bandwidth around 3.5 GHz and 4.5 GHz for the data and sync pulses respectively. Depending upon availability the two frequency channels can be selected to be in any band. In essence any two bands within UWB specification with sufficient isolation between them can be utilized.

Since the node knows the interested band at any given time the transmitter and receiver operations can be time interleaved. The timing generation circuit for the band selection is shown in while the representative timing is shown in . A pair of falling edge detectors are used to latch a pair of coupled NOR gates to indicate that either a sync or data pulse is expected next. NAND gate only applies this selection when the node is in a synchronized mode of operation. The end of data valid bin changes the selection to sync while the end of sync valid bin changes the selection to data. When the system is not synchronized only sync pulses are used and the band selection is set to sync. Once in synchronized state the logic toggles the band between sync and data alternatively decided by sync and data bins. This switching is shown in . Again the circuit implementation for this communication scheme may be done in a standard CMOS process.

For UWB radios there are certain requirements for spectral shape which requires intelligent shaping and bandwidth control for the transmitter. As is well known a wavelet emitted by a transmitter has its power distributed around the frequency of the carrier in the present case spectral shaping is achieved by randomly or periodically changing the carrier frequency by a very small amount. This dithering or varying of the center frequency in time on average creates a more averaged output power spectrum and is useful for shaping the spectrum per the average power at a particular frequency according to FCC regulations. This varying or dithering can be done at a very slow rate and can be done in a random manner or a periodic manner. it can also be controlled such that one changes the fine control for the frequency only when a pulse is transmitted as shown by the random periodic signal generator of . This dithering can be done for this type of system due to the use of the non coherent signal detection at the receiver. shows the effect of this dithering on an nominal transmission spectrum by widening and shortening the transmission spectrum.

The present invention is illustratively described above in reference to the disclosed embodiments. Various modifications and changes may be made to the disclosed embodiments by persons skilled in the art without departing from the scope of the present invention as defined in the appended claims.

