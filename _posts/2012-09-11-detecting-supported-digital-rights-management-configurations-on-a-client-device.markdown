---

title: Detecting supported digital rights management configurations on a client device
abstract: A content protection query module (CPQM) dynamically queries content protection items supported on the client device. The CPQM automatically identifies content protection configurations, based on the results of the queries. Using a variety of business rules and policies, the CPQM may select a content protection configuration from the configurations for packaging and providing protected content to the client device. The CPQM may instruct the client device to expect the protected content in the selected configuration, thereby enabling the client device to configure itself, as appropriate, for such configuration. The client device may include a media player that selects based on the instructions which DRM module to employ, providing the DRM module with instructions regarding where to obtain decryption keys/licenses for the content, and even instructing the DRM module which decryption mechanism to employ to decrypt the received protected content.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09129092&OS=09129092&RS=09129092
owner: Google Inc.
number: 09129092
owner_city: Mountain View
owner_country: US
publication_date: 20120911
---
This application is a utility patent application based on previously filed U.S. Provisional Patent Application Ser. No. 61 569 755 filed on Dec. 12 2011 the benefit of which is hereby claimed under 35 U.S.C. 119 e and which is incorporated herein by reference.

The present embodiments relate generally to playing protected content and more particularly but not exclusively to detecting content protection configurations including but not limited to Digital Rights Management DRM modules decryption standards compression decompression standards container formats and so forth supported on a client device.

Today there is a desire by many individuals organizations and businesses to protect their rights to media content that they produce from improper copying and or distribution. At least some of these desires arise in part because these individuals organizations and or businesses are at least in part dependent upon revenue generated from their media content. Such media content may include virtually any format or form including songs videos images documents games books articles and or other audio content to name just a few examples of media content that some parties may wish to protect.

One class of solutions that has been implemented to attempt to address this desire is known as Digital Rights Management DRM . Briefly DRMs provide access control technologies used by publishers copyright holders and others to control their media content after it is given to a consumer from improper access copying and or distribution.

However there are a large number of these DRM solutions available and in use by various media content distributors media player manufacturers and so forth. Moreover a user of their client device often downloads and installs a variety of different DRM solutions whether intentionally along with other software or because a website that they may visit requires such downloads. The result is that each client device may have vastly different DRM solutions on their client device. Moreover even within a given DRM solution user client devices may have vastly different versions of DRM solutions with vastly different capabilities and or constraints.

Additionally content provided over a network may be encrypted using any of a variety of different encryption mechanisms and even encapsulated using any of a variety of different formats sometimes called containers. When the possible combinations of DRM solutions encryption mechanisms and or container formats are considered a content provider may have significant difficulties in determining how to package and provide their protected content to a client device that may then negotiate decryption keys and or DRM licenses decrypt the content and then successfully play the protected content. However failure to address this plethora of different configurations might result in the content provider being unable to provide playable content to the client device and therefore potentially losing revenue. Thus it is with respect to these considerations and others that the present invention has been made.

The present embodiments now will be described more fully hereinafter with reference to the accompanying drawings which form a part hereof and which show by way of illustration specific aspects in which the embodiments may be practiced. These embodiments may however take many different forms and should not be construed as limited to the embodiments set forth herein rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope to those skilled in the art. Among other things the present embodiments may include methods or devices. Accordingly the present embodiments may take the form of entirely hardware or a combination of software and hardware aspects. The following detailed description is therefore not to be taken in a limiting sense.

Throughout the specification and claims the following terms take the meanings explicitly associated herein unless the context clearly dictates otherwise. The phrase in one embodiment as used herein does not necessarily refer to the same embodiment though it may. Furthermore the phrase in another embodiment as used herein does not necessarily refer to a different embodiment although it may. Thus as described below various embodiments of the invention may be readily combined without departing from the scope or spirit of the invention.

In addition as used herein the term or is an inclusive or operator and is equivalent to the term and or unless the context clearly dictates otherwise. The term based on is not exclusive and allows for being based on additional factors not described unless the context clearly dictates otherwise. In addition throughout the specification the meaning of a an and the include plural references. The meaning of in includes in and on. 

As used herein the terms content or media content includes any digital data that may be communicated over a network to be remotely played by a computing device. Non exhaustive examples of content include but are not limited to movies videos music spoken word pictures illustrations graphics images text and the like. Content is often described by its format or container in which the content is provided. Thus as used here the term container refers to a data stream or file format which encapsulates audio and visual content. This content often consists of interleaved audio and video data in frames or slices with accompanying metadata such as frame timing information audio and or video configuration information encoding information compression information and the like. Also the container is typically arranged to enable content to be presented for playback at a remotely located network device such as a client device. A container may also be named a systems stream . A non limiting and non exhaustive list of examples of container system streams formats are MPEG2 TS Moving Picture Experts Group MPEG transport stream TS flash video FLV MOV a QuickTime file format MP4 3GP and ASF Advanced Systems Form WebM Project file format Matroska multimedia container format or the like. A video encoding format such as H.264 VP8 or the like may be encapsulated in the container. The content may be distributed as a rights managed systems stream of data over a network such as Pay per View PPV Video On Demand VoD live streaming or the like for playback by a remote network device. In one embodiment the content may be protected through a license that describes how where when by whom or so forth content that is protected may be accessed distributed copied or the like. Protected content may be protected using a variety of content protection mechanisms including through one or more Digital Rights Management DRM policies licenses and encryption decryption keys.

As used herein encryption refers to the process of transforming digital content referred to as plaintext using an algorithm called a cipher to make it unreadable to anyone except those possessing special knowledge usually referred to as a key. Decryption is the process of converting encrypted digital content back into its original form. As used herein unencrypted digital content refers to digital content received in plaintext or that is otherwise not encrypted and therefore does not need to be decrypted. It should be understood such plaintext digital content may be received in at least one embodiment in a compressed form or encoded form and still be considered as plaintext for the purposes described herein. Moreover as discussed further below digital content may include portions that are encrypted and other portions that are unencrypted within a same stream of digital content. Further different encrypted portions of the stream of digital content may be encrypted using different encryption keys and or employ different licenses. In one embodiment keys useable for decrypting the differently encrypted digital content may be rotated reused or renegotiated.

As used herein the term automatically refers to actions performed by a computing device based on one or more decisions performed by the computing device without an input from a user to directly initiate or otherwise direct the action.

The following briefly provides a simplified summary of the subject innovations in order to provide a basic understanding of some aspects. This brief description is not intended as an extensive overview. It is not intended to identify key or critical elements or to delineate or otherwise narrow the scope. Its purpose is merely to present some concepts in a simplified form as a prelude to the more detailed description that is presented later.

Briefly stated subject innovations are directed towards providing to a client device a content protection query module CPQM that is configured to dynamically and automatically query types of content protection items supported on the client device. The CPQM may then automatically create a table spreadsheet list or virtually any other structure for identifying and managing one or more different content protection configurations supported by the client device based on the results of the query. Then using a variety of business rules and policies the CPQM may select at least one content protection configuration for packaging and providing protected content to the client device. In one embodiment the CPQM may further instruct the client device to expect the protected content in the selected configuration thereby enabling the client device to configure itself as appropriate for such configuration. In one embodiment the client device may include a media player that then selects which DRM module to employ providing the DRM module with instructions regarding where to obtain decryption keys licenses for the content and even instructing the DRM module which decryption mechanism to employ to decrypt the received protected content and or container in which the content may be packaged.

It should be understood that while embodiments described herein are directed towards determining a content protection configuration on a client device the innovations are not so constrained. Thus in other embodiments selection of which media player to employ and or other devices to employ may also be included.

One embodiment of client devices is described in more detail below in conjunction with . In one embodiment at least some of client devices may operate over a wired and or a wireless network such networks and . As shown client device may include virtually any computing device capable of communicating over a network to send and receive information including instant messages performing various online activities or the like. The set of such devices may include devices that typically connect using a wired or wireless communications medium such as personal computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs or the like. Also client device may include virtually any device usable as a video display device such as a television display monitor display screen projected screen and the like. Additionally client device may include any kind of Consumer Electronic device e.g. a Blu ray player DVD player CD player portable music playing device portable display projector and the like. Moreover client devices may provide access to various computing applications including a browser or other web based application.

Generally however client devices may include virtually any portable computing device capable of receiving and sending messages over a network accessing and or playing content such as network wireless network or the like. Further client devices may include virtually any portable computing device capable of connecting to another computing device and receiving information such as laptop computer smart phone and tablet computers and the like. However portable computer devices are not so limited and may also include other portable devices such as cellular telephones display pagers radio frequency RF devices infrared IR devices Personal Digital Assistants PDAs handheld computers wearable computers integrated devices combining one or more of the preceding devices and the like. As such client devices typically range widely in terms of capabilities and features.

A web enabled client device may include a browser application that is configured to receive and to send web pages web based messages and the like. The browser application may be configured to receive and display graphics text multimedia media content and the like employing virtually any Internet based and or network based protocol including but not limited to a wireless application protocol messages WAP Hypertext Transfer Protocol HTTP or the like. In one embodiment the browser application is enabled to employ Handheld Device Markup Language HDML Wireless Markup Language WML WMLScript JavaScript Standard Generalized Markup Language SGML HyperText Markup Language HTML eXtensible Markup Language XML and the like to display and send a message. In one embodiment a user of a client device may employ the browser application to perform various activities over a network online . However another application may also be used to perform various online activities.

Client devices also may include at least one other client application that is configured to receive and or send content between another computing device. The client application may include a capability to send and or receive content or the like. The client application may further provide information that identifies itself including a type capability name and the like. In one embodiment client devices may identify themselves as part of a class of devices. In another embodiment client devices may uniquely identify themselves through any of a variety of mechanisms including a phone number Mobile Identification Number MIN an electronic serial number ESN Internet Protocol IP Address network address or other mobile device identifier. The information may also indicate a content format that the mobile device is enabled to employ. Such information may be provided in a network packet or the like sent between other client devices CPD or other computing devices. Moreover it should be readily understood that devices and or components within a device that is communicating with a client device may also identify themselves using any of a variety of mechanisms including those used by the client device.

Client devices may further be configured to include a client application that enables an end user to log into an end user account that may be managed by another computing device such as CPD or the like. Such end user account in one non limiting example may be configured to enable the end user to manage one or more online activities including in one non limiting example search activities social networking activities browse various websites communicate with other users or the like. In one embodiment the end user s client device may receive content streamed to the client device for play at the client device. However participation in online activities may also be performed without logging into the end user account.

Wireless network is configured to couple client devices and its components with network . Wireless network may include any of a variety of wireless sub networks that may further overlay stand alone ad hoc networks and the like to provide an infrastructure oriented connection for client devices . Such sub networks may include mesh networks Wireless LAN WLAN networks cellular networks and the like. In one embodiment the system may include more than one wireless network.

Wireless network may further include an autonomous system of terminals gateways routers and the like connected by wireless radio links and the like. These connectors may be configured to move freely and randomly and organize themselves arbitrarily such that the topology of wireless network may change rapidly.

Wireless network may further employ a plurality of access technologies including 2nd 2G 3rd 3G 4th 4G generation radio access for cellular systems WLAN Wireless Router WR mesh and the like. Access technologies such as 2G 3G 4G and future access networks may enable wide area coverage for mobile devices such as client devices with various degrees of mobility. In one non limiting example wireless network may enable a radio connection through a radio network access such as Global System for Mobil communication GSM General Packet Radio Services GPRS Enhanced Data GSM Environment EDGE Wideband Code Division Multiple Access WCDMA and the like. In essence wireless network may include virtually any wireless communication mechanism by which information may travel between client devices and another computing device network and the like.

Network is configured to couple network devices with other computing devices including CPD and through wireless network to client devices . Network is enabled to employ any form of network mechanism for communicating information from one electronic device to another. Also network can include the Internet in addition to LANs WANs direct connections such as through a universal serial bus USB port other forms of network mechanism or any combination thereof. On an interconnected set of LANs including those based on differing architectures and protocols a router acts as a link between LANs enabling messages to be sent from one to another. In addition communication links within LANs typically include twisted wire pair or coaxial cable while communication links between networks may utilize analog telephone lines full or fractional dedicated digital lines including T1 T2 T3 and T4 and or other carrier mechanisms including for example E carriers Integrated Services Digital Networks ISDNs Digital Subscriber Lines DSL5 wireless links including satellite links or other communications links known to those skilled in the art. Moreover communication links may further employ any of a variety of digital signaling technologies including without limit for example DS 0 DS 1 DS 2 DS 3 DS 4 OC 3 OC 12 OC 48 or the like. Furthermore remote computers and other related electronic devices could be remotely connected to either LANs or WANs via a modem and temporary telephone link. In one embodiment network may be configured to transport information of an Internet Protocol IP . In essence network includes any communication method by which information may travel between computing devices.

Additionally network mechanisms by way of example network mechanisms include wired media such as twisted pair coaxial cable fiber optics wave guides and other wired media and wireless media such as acoustic RF infrared and other wireless media.

One embodiment of CPD is described in more detail below in conjunction with . Briefly however CPD includes virtually any network device usable to operate as a content server to connect to network to provide content to client devices . In some embodiments CPD may provide protected content to a client device. In one embodiment at least some portions of the content may be encrypted while at least some other portions of the content may be unencrypted.

CPD may also provide to a client device a Content Protection Query Module CPQM that is configured to automatically and dynamically query a content protection configuration of a client device. CPQM may be implemented using any of a variety of mechanisms including but not limited to a set of HyperText Markup Language HTML instructions a script an applet an application or the like. The CPQM may provide information about the content protection configuration to CPD . CPD or the CPQM module may then select a particular content protection configuration that the client device supports to provide protected content to the client device. In one embodiment the CPQM module and or CPD may instruct the client device to configure itself to receive content using the selected content protection configuration. The CPQM module and or CPD may use a process such as is described below in more detail in conjunction with to perform at least some of its actions.

It should be readily recognized that CPD is configured to operate on behalf of a content owner distributor or similar business entity. However while used herein to represent such network devices useable to provide content it is further recognized that other devices may also be employed. For example a content provider may employ a Content Distribution Network Device not shown that operates on behalf of the content provider to provide content. Thus other configurations and variations of devices serving content are also envisaged and other embodiments are not constrained to a single configuration arrangement of devices.

Devices that may operate as CPD include various network devices including but not limited to personal computers desktop computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs server devices network appliances and the like.

Although illustrates CPD as a single computing device the invention is not so limited. For example one or more functions of CPD may be distributed across one or more distinct network devices. Moreover CPD is not limited to a particular configuration. Thus in one embodiment CPD may contain a plurality of network devices to provide content licenses and or decryption keys to a client device such as client devices . Similarly in another embodiment CPD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices of CPD operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the CPD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

In one embodiment CPD may also be configured to manage license requests and or access to decryption keys useable to decrypt portions of the encrypted digital content by a client device for play based on the license.

It should be noted that the encrypted content may be encrypted using any of a variety of symmetric and or asymmetric key technologies. For example possible asymmetric keys technologies include but are not limited to Diffie Hellman RSA Merkle Hellman PGP X.509 elliptic curve techniques EIGamal or the like. Similarly various possible symmetric key technologies include but are not limited to Twofish Serpent Advanced Encryption Standard AES Blowfish CASTS RC4 3DES and IDEA to name just a few. Moreover the content may be protected using a combination of symmetric and asymmetric key technologies. For example a symmetric content decryption key might be used to encrypt decrypt the content and an asymmetric key technology might be used to encrypt decrypt the content decryption key.

KMD represents one of a variety of network devices for managing access to symmetric and or asymmetric keys. In one embodiment KMD may operate to certify an ownership of a public key named within a digital certificate that provides a public key where the public key is part of a public private key associated with any of a variety of asymmetric key technologies. This allows others such as CPD or the like to rely upon signatures or assertions made by the owner that corresponds to the public key that is certified. In one embodiment KMD may then operate as a trusted third party. Thus in one embodiment KMD may operate as a Certification Authority such as employed by many public key infrastructures PKI schemes. Further KMD may also provide Certificate Revocation Lists CRLs indicating when a public key certificate is no longer valid and might no longer be trusted trustable.

In one embodiment KMD may receive a public key from a content provider or the like and based on various criteria elect to make accessible the public key through a certificate that KMD digitally signs. In one embodiment access to the public key may enable an authorized client device to decrypt a content key that may then be used to decrypt at least a portion of the encrypted content.

In one embodiment KMD or CPD might operate to negotiate a license and or access to a key with client devices . In one embodiment different content decryption keys might be used to encrypt different portions of a provided content. Thus in one embodiment multiple key negotiations may be performed for a given at least one content stream.

It should be understood that while KMD is illustrated as a separate device from CPD in other embodiments the functions of these devices may be integrated.

Although illustrates KMD as single computing devices the invention is not so limited. For example one or more functions of KMD may be distributed across one or more distinct network devices. Moreover KMD is not limited to a particular configuration. Thus in one embodiment KMD may contain a plurality of network devices.

Similarly in another embodiment KMD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the KMD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

As shown in the figure client device includes a central processing unit CPU in communication with a mass memory via a bus . Client device also includes a power supply one or more network interfaces an audio interface a display a keypad an illuminator a video interface an input output interface a haptic interface a global positioning systems GPS receiver and presence detector interfaces .

Power supply provides power to client device . A rechargeable or non rechargeable battery may be used to provide power. The power may also be provided by an external power source such as an alternating current AC adapter or a powered docking cradle that supplements and or recharges a battery.

Client device may optionally communicate with a base station not shown or directly with another computing device. Network interface includes circuitry for coupling client device to one or more networks and is constructed for use with one or more communication protocols and technologies including but not limited to GSM code division multiple access CDMA time division multiple access TDMA user datagram protocol UDP transmission control protocol Internet protocol TCP IP Short Message Service SMS GPRS WAP ultra wide band UWB Institute of Electrical and Electronics Engineers IEEE 802.16 Worldwide Interoperability for Microwave Access WiMax session initiated protocol real time transport protocol SIP RTP or any of a variety of other wired and or wireless communication protocols. Network interface is sometimes known as a transceiver transceiving device or network interface card NIC .

Audio interface is arranged to produce and receive audio signals such as the sound of a human voice. For example audio interface may be coupled to a speaker and microphone not shown to enable telecommunication with others and or generate an audio acknowledgement for some action.

Display may be an LCD gas plasma light emitting diode LED or any other type of display used with a computing device. Display may also include a touch sensitive screen arranged to receive input from an object such as a stylus or a digit from a human hand.

Moreover display may be configured to employ any of a variety of network connection types including but not limited to High Bandwidth Digital Content Protection HDCP connection types Display Port DP Digital Visual Interface DVI and High Definition Multimedia Interface HDMI as well as Gigabit Video Interface GVIF Standard definition SD Unified Display Interface UDI or Intel Wireless Display WiDi . At least some of these network connection types provide a form of digital copy protection. A detection of whether display is connected through one of these or other types of network connection types may be determined using a variety of techniques including signature transmissions protocol handshakes authentication procedures or the like. Changing usage of a network connection type may indicate a change in the configuration of at least one component of client device that might result in being detected as a compromise to the integrity of client device .

Keypad may comprise any input device arranged to receive input from a user. For example keypad may include a push button numeric dial or a keyboard. Keypad may also include command buttons that are associated with selecting and sending images.

Illuminator may provide a status indication and or provide light. Illuminator may remain active for specific periods of time or in response to events. For example when illuminator is active it may backlight the buttons on keypad and stay on while the client device is powered. Also illuminator may backlight these buttons in various patterns when particular actions are performed such as dialing another client device. Illuminator may also cause light sources positioned within a transparent or translucent case of the client device to illuminate in response to actions.

Video interface is arranged to capture video images such as a still photo a video segment an infrared video or the like. For example video interface may be coupled to a digital video camera a web camera or the like. Video interface may comprise a lens an image sensor and other electronics. Image sensors may include a complementary metal oxide semiconductor CMOS integrated circuit charge coupled device CCD or any other integrated circuit for sensing light.

Client device also comprises input output interface for communicating with external devices such as a headset or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like. Haptic interface is arranged to provide tactile feedback to a user of the client device. For example the haptic interface may be employed to vibrate client device in a particular way when another user of a computing device is calling.

GPS transceiver can determine the physical coordinates of client device on the surface of the Earth. GPS transceiver in some embodiments may be optional. GPS transceiver typically outputs a location as latitude and longitude values. However GPS transceiver can also employ other geo positioning mechanisms including but not limited to triangulation assisted GPS AGPS Enhanced Observed Time Difference E OTD Cell Identifier CI Service Area Identifier SAI Enhanced Timing Advance ETA Base Station Subsystem BSS or the like to further determine the physical location of client device on the surface of the Earth. It is understood that under different conditions GPS transceiver can determine a physical location within millimeters for client device and in other cases the determined physical location may be less precise such as within a meter or significantly greater distances. In one embodiment however mobile device may through other components provide other information that may be employed to determine a physical location of the device including for example a Media Access Control MAC address IP address or the like.

Mass memory includes a Random Access Memory RAM a Read only Memory ROM and other storage means. Mass memory illustrates an example of computer readable storage media devices for storage of information such as computer readable instructions data structures program modules or other data. Mass memory stores a basic input output system BIOS for controlling low level operation of client device . The mass memory also stores an operating system for controlling the operation of client device . It will be appreciated that this component may include a general purpose operating system such as a version of UNIX or LINUX or a specialized client communication operating system such as Windows Mobile or the Symbian operating system. The operating system may include or interface with a Java virtual machine module that enables control of hardware components and or operating system operations via Java application programs.

Mass memory further includes one or more data storage which can be utilized by client device to store among other things applications protected content and or other data. For example data storage may also be employed to store information that describes various capabilities of client device . The information may then be provided to another device based on any of a variety of events including being sent as part of a header during a communication sent upon request or the like. Data storage may also be employed to store social networking information including address books buddy lists aliases user profile information or the like. Further data storage may also store messages web page content or any of a variety of user generated content. At least a portion of the information may also be stored on another component of network device including but not limited to computer readable storage device a disk drive or other computer readable storage device not shown within client device .

In some embodiments data storage may act as a buffer for content received from CPD of . As noted above it is recognized that providing of such content may also be performed by another device on behalf of CPD of .

Applications may include computer executable instructions which when executed by client device transmit receive and or otherwise process messages e.g. SMS Multimedia Message Service MMS instant messages IM email and or other messages audio video and enable telecommunication with another user of another client device. Other examples of application programs include calendars search programs email clients IM applications SMS applications voice over Internet Protocol VOIP applications contact managers task managers transcoders database programs word processing programs security applications spreadsheet programs games search programs and so forth. Applications may include for example browser media player Digital Rights Management DRM modules Coder Decoders CODECs also sometimes referred to as Compressor Decompressor and Content Protection Query Module CPQM . In some embodiments CODECs may also be within a DRM such as illustrated with CODEC within DRM module .

Browser may include virtually any application configured to receive and display graphics text multimedia and the like employing virtually any web based protocol. In one embodiment the browser application is enabled to employ HDML WML WMLScript JavaScript SGML HTML XML and the like to display and send a message. However any of a variety of other web based programming languages may be employed. In one embodiment browser may enable a user of client device to provide and or receive content from another computing device such as CPD of . Although browser is described herein it should be noted that there are a plurality of other applications that may operate as a user agent configured to request and or access content over a network. Thus other user agents may also be included within client device . Moreover while a single browser is illustrated it should be noted that client device may include a plurality of browsers or applications providing functionality of a browser application.

Media player represents any of a variety of software and or hardware configurations arranged to receive and play various content. As such in one embodiment media player may also represent a hardware component that might be installed within client device and or coupled electrically to client device to enable client device to access and play content. In one embodiment media player may receive protected content from browser and employ one or more of CODECs and or DRM modules to enable play of the received protected content.

While a single media player is illustrated it should be understood that client device may include a plurality of media players each which may be configured to employ a different CODEC s and or different DRM module s as well as to accept different container format s for the received protected content. Further the media players and or browsers may also be configured to employ different levels of robustness for the client device and or other protection schemes for content.

CODECs includes any of a variety of compression decompression or coding decoding mechanisms configured to receive compressed content and decompress the content into a format capable of being rendered for the user s enjoyment. For example CODECs may employ Moving Pictures Experts Group MPEG Joint Photographic Experts Group JPEG wavelets and or any other mechanism that compresses content that may later be decompressed. Further although CODECs may include capabilities for graphical content CODECs may also be configured to receive audio content and as appropriate prepare the audio content for play by a media player as well. Thus CODECs may not be exclusive for graphical content and may also operate on audio graphical content and or content having a combination of audio and graphical information. In one embodiment each of CODECs may be configured to support a particular set of decoding decompression mechanisms. For example CODEC might be configured to support JPEG but not H.264 while CODEC is configured to support H.264 JPEG but not VP8. It is noted that these are examples and not to be construed as limiting or exhaustive and clearly CODECs may be configured and or constrained in a variety of ways beyond or instead of these examples.

DRM modules represents any of a class of access control technologies that are configured to manage the digital access rights to protected content. In one embodiment DRM modules may include a content decryption module CDM that is configured to receive one or more decryption keys and or licenses and to employ the decryption keys licenses to decrypt at least a portion of the content and enable access to the content. In one embodiment DRM modules might be configured to receive information indicating that content is protected with keys licenses. DRM modules may then send a communications requesting the keys licenses. In one embodiment DRM modules might be configured to provide a communications towards a Key Management Device such as KMD of to obtain the keys licenses. DRM modules may then receive portions of the protected content from media player browser or another application. DRM modules may then employ the keys licenses to decrypt the encrypted content and enable selected rights of use of the content. DRM modules may provide the decrypted content to media player to output hardware and or to CODECS to decode decompress the decrypted content such that it may then be played by media player .

It should be noted that while illustrates media player CODECs and DRM modules as separate applications from each other it should be understood that other configurations may also be used. For example media player may operate as a plug in application to browser . Further one or more CODECs may operate as plug ins with media player and or browser or be part of DRM modules . Further DRM modules may also be plug ins or components within a media player browser or the like. Thus the arrangement of components within is not limiting or exhaustive and other arrangements may also be used.

As discussed above it may be seen that when a given client device may include a plurality of different media players CODECS and or DRM modules each with different limitations or constraints on their functions it may be difficult if not expensive for a content provider to figure out how to prepare and send protected content to different client devices.

CPQM is directed towards overcoming at least this issue by querying client device for what content protection items are supported and then selecting from the supported set a content protection configuration based on business rules and policies a particular content protection configuration in which to prepare and send protected content.

In one embodiment CPQM may be implemented using any of a variety of mechanisms including using HTML5 or above type of tags scripts commands or the like. In one embodiment CPQM may be stored on an apparatus comprising a non transitory computer readable medium that has computer executable instructions stored thereon that in response to execution by client device causes the client device to perform various actions.

CPQM may also be implemented as embedded within a web page provided by a content provider. CPQM may further include scripts applets applications or the like that may be downloaded and or installed within client device or otherwise operate within client device to perform its actions. In one embodiment CPQM may employ a process such as described below in conjunction with to perform at least some of its actions.

Network device includes central processing unit computer readable storage device network interface unit an input output interface hard disk drive video display adapter and a mass memory all in communication with each other via bus . The mass memory generally includes RAM ROM and one or more permanent non transitory mass storage devices such as hard disk drive tape drive optical drive and or floppy disk drive. The mass memory stores operating system for controlling the operation of network device . Any general purpose operating system may be employed. BIOS is also provided for controlling the low level operation of network device . As illustrated in network device also can communicate with the Internet or some other communications network via network interface unit which is constructed for use with various communication protocols including the TCP IP protocol. Network interface unit is sometimes known as a transceiver transceiving device or network interface card NIC .

Network device also comprises input output interface for communicating with external devices such as a keyboard or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like.

The mass memory as described above illustrates another type of computer readable media namely computer readable storage media and or processor readable storage media. Computer readable storage media devices may include volatile nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Examples of computer readable storage media include RAM ROM Electrically Erasable Programmable Read only Memory EEPROM flash memory or other memory technology Compact Disc Read only Memory CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other physical media which can be used to store the desired information and which can be accessed by a computing device.

As shown data storage may include a database text spreadsheet folder file or the like that may be configured to maintain and store user account identifiers user profiles email addresses IM addresses and or other network addresses or the like. Data storage may further include program code data algorithms and the like for use by a processor such as central processing unit to execute and perform actions. In one embodiment at least some of data storage might also be stored on another component of network device including but not limited to computer readable storage device hard disk drive or the like.

Data storage may further store protected content . Protected content represents any of a variety of content that may be protected from access using a license encryption and or the like. In some embodiments protected content may include a plurality of available versions of content. In one embodiment the available versions may include one or more video tracks and or one or more one or more audio tracks.

The mass memory also stores program code and data. One or more applications are loaded into mass memory and run on operating system . Examples of application programs may include transcoders schedulers calendars database programs word processing programs Hypertext Transfer Protocol HTTP programs customizable user interface programs IPSec applications encryption programs security programs SMS message servers IM message servers email servers account managers and so forth. Web server key manager and content delivery server may also be included as application programs within applications .

Web server represent any of a variety of services that are configured to provide content including messages over a network to another computing device. Thus web server includes for example a web server an FTP server a database server a content server or the like. Web server may provide the content including messages over the network using any of a variety of formats including but not limited to WAP HDML WML SGML HTML XML Compact HTML cHTML Extensible HTML xHTML or the like. Web Server may also be configured to enable a user of a client device such as client devices of to browse content such as streams of protected content and select content for display play on the client device. Further web server may be configured to provide for installation and or execution at a client device a CPQM such as discussed above in conjunction with .

Key manager is configured to manage negotiations of decryption keys and or licenses for content streams. In one embodiment key manager may provide decryption keys and or licenses to KMD of . In other embodiments key manager may perform negotiations directly with a client device. In one embodiment key manager may select one or more content decryption keys for use in encrypting different portions of a content stream.

Key manager may also be configured to revoke a license and or invalidate one or more decryption keys based for example on an unauthorized request for a license key or even based on receiving an indication that an integrity of a requesting client device is determined to be compromised.

Content Delivery Server CDS is configured to manage access to protected content . In one embodiment the content may be protected through a license or licenses. In another embodiment the content may be protected by being encrypted. In one embodiment one portion of content may be encrypted using a first content encryption key while another portion of the content may be encrypted using a second content encryption key. Thus to decrypt the protected content a user s client device may need access to a license that indicates how where and or when the protected content may be accessed. The user s client device may also need access to one or more decryption keys usable to decrypt various portions of the protected content. In one embodiment where multiple encryption keys are used to encrypt the content a key rotation scheme may be employed where the client device is provided an indication that the content is encrypted using a different key and that the client device will have to use the different key. However in another embodiment the content may be protected by a license s and not be encrypted using encryption key s .

As shown in one embodiment CDS may include a remote CPQM that is configured to operate remote to a client device to perform actions and functions similar to CPQM of . That is operating within network device remote CPQM may perform query actions through for example a web interface or the like with a client device. Remote CPQM may then query protection configuration items with the client device and or perform other actions such as described below in conjunction with . In this manner a CPQM might not be loaded or installed onto a client device. Thus embodiments are disclosed herein that enable remote queries and or queries to be performed within or otherwise on a client device. However in other embodiments remote CPQM and CPQM may operate in conjunction with each other such that some actions may be performed by CPQM while other actions may be performed by CPQM where resulting queries responses data structures of the supported content protection configurations or the like may be shared between the two or more components.

The operation of certain aspects of various embodiments will now be described with respect to . illustrates a flow chart of one embodiment of a process usable to manage a selection of a supported content protection configuration on a client device. As discussed above process of may be implemented to operate within a client device such as shown in . However it should be understood that process may also be configured to operate remote to a client device such as such as remote CPQM of . In one embodiment a user of a client device may seek access to protected content from a content provider. During the communications a CPQM may be installed onto the client device may be executed through a web page or other interface accessed by the client device or even operate remotely on the network device to query the client device and perform process .

In any event process begins after a start block at block where one or more queries for supported protection items may be sent to the client device or performed within the client device . In one embodiment the queries for the protected items may be sent to a particular media player on the client device. In another embodiment the queries may be sent to a browser or other application within the client device which may then provide an indication as to which media players are supported by the client device as well.

In one embodiment the queries may be an extension of a canPlayType application programming interface API supported within HTML 5 or above. In one embodiment the queries may be configured to request whether a specific DRM CODEC Container or the like is supported. For example in one embodiment a request such as 

Moving to block a response is received. A response might include yes no or even maybe. In other embodiments a response might include probably or an empty string indicating a no. In at least one embodiment a maybe response may result in additional queries to be performed or the response may be interpreted as no. It should be noted that other variations of responses response formats and structures may also be used and that embodiments are not constrained to any particular structure format or representation for a response.

In any event use of this type of query request might however not indicate which CODEC is supported or container type or the like.

Using a similar type of query request it might be determined whether a particular version of the acme key system or DRM module is supported. For example 

In this example a yes response would indicate that the Acme key system or DRM module is supported and that VP8 video and Vorbis audio CODECs are supported with a WebM container format.

It should be understood that the above examples are not to be construed as limiting or exhaustive and any of a variety of other combinations and queries may also be performed to determine a configuration of content protection that is supported by a client device.

However while queries may be performed that specifically request whether one or more particular content protection items are supported. The innovation is not so limited. For example in other embodiments a query may be sent that is a global request. For example the following might be construed to request a response that indicates which DRM modules or key systems are supported 

In this or a similar manner a response might include a list of all key systems or DRM modules that the client device supports. Similar queries might include global requests for all CODECS decryption standards containers or the like. In one embodiment the responses might be structured to indicate which CODECs decryption standards containers or the like that a particular DRM module supports. In still another embodiment the query may be made general to request the media players to indicate which configurations are supported by each media player. Thus in one embodiment a single query might be made to each media player or browser or other application indicating which media players is supported and what content protection items each support. Thus it should be clear that the subject innovations are not limited to a particular query structure and any of a variety of queries may be performed to determine the content protection configurations supported with a client device.

Processing may then flow to block where a table or other structure may then be constructed dynamically and automatically absent a user intervention based on the responses. One non limiting non exhaustive example of a table is described in more detail below in conjunction with . It is noted that while the responses are illustrated and discussed herein in terms of a table other structures may also be used. For example a linked list a spreadsheet a database a text document or the like may also be used to organize the responses to the queries so as to identify the supported content protection configurations.

Moving next to block in one embodiment an optional action may be performed that compares the contents of the table or other structure for managing the client supported content protection configurations with protection configurations that the querying content provider may support. In this manner should none of the protection configurations in the table or other structure be supported by the content provider various actions may be taken. For example in one embodiment the content provider may request that yet another protection configuration and or selected content protection items be downloaded and or otherwise installed on the client device. Similarly if the table or other structure is empty such that there are no supported configurations at the client device other actions may be taken including but not limited to the content provider recommending a configuration of components to be downloaded and installed on the client device or even exiting process such that the protected content is not provided to the client device. Other actions may also be performed.

Where the table or other structure includes some supported and some unsupported by the content provider protection configurations the content provider might optionally remove or delete the unsupported configurations. In this manner a later analysis might be performed more quickly. In any event where the table or other structure includes protection configurations that are supported also by the content provider processing continues to block where various business rules and policies may be applied to select one of the protection configurations supported on the client device from within the table or other structure. Various rules and or policies may be used to make such a selection. For example in one embodiment the selection may be based on whether the content provider pays for use of a particular DRM module container format or the like. In another example the selection may be based on whether the user might have to pay for a license use or be based on a fastest decryption or a container format that provides a lowest network bandwidth to transfer the content or any of a variety of other criteria. Once the protection configuration is selected in one embodiment process proceeds to block where the content provider may instruct the client device to prepare for and use the selected protection configuration.

Continuing to block the content provider may then provide the protected content to the client device using the selection protection configuration. Process may then return to a calling process.

It will be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by computer program instructions. These program instructions may be provided to a processor to produce a machine such that the instructions which execute on the processor create means for implementing the actions specified in the flowchart block or blocks. The computer program instructions may be executed by a processor to cause a series of operational steps to be performed by the processor to produce a computer implemented process such that the instructions which execute on the processor to provide steps for implementing the actions specified in the flowchart block or blocks. The computer program instructions may also cause at least some of the operational steps shown in the blocks of the flowchart to be performed in parallel. Moreover some of the steps may also be performed across more than one processor such as might arise in a multi processor computer system a cloud system a multi server system or the like. In addition one or more blocks or combinations of blocks in the flowchart illustration may also be performed concurrently with other blocks or combinations of blocks or even in a different sequence than illustrated without departing from the scope or spirit of the invention.

Accordingly blocks of the flowchart illustration support combinations of means for performing the specified actions combinations of steps for performing the specified actions and program instruction means for performing the specified actions. It will also be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by special purpose hardware based systems which perform the specified actions or steps or combinations of special purpose hardware and computer instructions.

In one embodiment table may be managed and or stored in a memory device residing on the client device. However in other embodiments table may also be managed and or stored on a remote network device such as network device . In one embodiment table may be deleted after a communication with a client device is terminated. In this manner queries and creation of table is performed during each communication request for content to be provided to a client device. This may be the case because a client device s configuration may change and therefore the table may no longer be valid. A current table configuration is desirable. However other mechanisms may be used. For example a cookie applet or the like might be left on a client device such that when a protection configuration is changed on the client device the cookie applet or the like might indicate that a change has been detected or even that no change is detected. In this manner the content provider might first perform an initial examination of the deposited applet cookie or the like. Should the examination indicate a change is detected and then the queries of process might be performed again. However should no change be detected then the process need not be performed and the earlier created table might be reused. In one embodiment table may be stored on the client device for future use. In another embodiment table may be stored remotely along with a client device identifier. In another embodiment just the selected configuration may be stored.

In any event table includes columns which are each automatically created from the responses received to the queries discussed above in process of . As shown columns include supported items key systems CODECs for each key system within key systems decryptions and containers . Thus as shown for example one supported content protection configuration indicates that the widevine key system or DRM module supports CODECS H.264 VP8 and Theora. Further for use with H.264 the decryption supported is AES. The key system widevine for the CODEC H.264 and AES decryption further supports MPEG 2 MPEG 4 FLV MOV and 3GP containers. Other examples are also illustrated. Clearly not only is the table merely an example but is non exhaustive. Thus embodiments are not constrained to the examples illustrated herein in table .

Moreover column is intended to represent that any of a variety of other content protection items may be included in considering a content protection configuration. Thus queries and the resulting table might also include various decryption configurations versions of key systems protection levels profiles supported robustness levels supported or the like. Virtually any content protection item of interest to the content provider might be queried and included in table .

The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

