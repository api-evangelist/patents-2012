---

title: System and method to validate restriction event control streams sent to a video distribution system
abstract: Systems and methods to validate restriction event control streams sent to a video distribution system are provided. A particular method includes receiving a control stream and determining whether the control stream is valid based on a comparison of first restriction event information included in the control stream to second restriction event information stored in a mapping table.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09160970&OS=09160970&RS=09160970
owner: AT&T Intellectual Property I, L.P.
number: 09160970
owner_city: Atlanta
owner_country: US
publication_date: 20120808
---
This application is a continuation of and claims priority from U.S. patent application Ser. No. 12 413 993 filed on Mar. 30 2009 and entitled SYSTEM AND METHOD TO VALIDATE RESTRICTION EVENT CONTROL STREAMS SENT TO A VIDEO DISTRIBUTION SYSTEM the contents of which are expressly incorporated herein by reference.

The present disclosure is generally related to validating restriction event control streams sent to a video distribution system.

Media service providers such as television service providers acquire content from content providers such as television networks and distribute the content to subscribers. Some content is subject to restriction events such as blackouts. Restriction events may be scheduled manually by personnel of media service providers personnel of the video distribution system or both. Manually scheduling restriction events may be labor intensive and prone to error.

Systems and methods to validate restriction event control streams sent to a video distribution system are provided. A particular method includes receiving a control stream from a content provider via a content proxy device. The control stream is associated with a restriction event and directs a media service delivery platform to associate a particular media service with a virtual network for at least one geographical region. The method also includes evaluating validity of the control stream based on content proxy information associated with the content proxy device.

A particular system includes at least one user interface viewable on a display device. The at least one user interface is configured to enable entry of data to generate a content proxy to virtual network mapping table. The system also includes a media service delivery platform. The media service delivery platform includes a computer readable storage medium and a processor to receive control streams and to access the content proxy to virtual network mapping table to validate the control streams. At least one control stream is associated with a restriction event. The at least one control stream includes restriction event instructions. The at least one control stream also includes a content proxy identifier of a content proxy that received the control stream from a content provider.

In a particular embodiment a computer readable storage medium includes operational instructions that when executed by a processor cause the processor to receive a control stream associated with a restriction event. The computer readable storage medium also includes operational instructions that when executed by the processor cause the processor to compare content proxy information and virtual network information of the control stream with a content proxy and virtual network mapping table to determine validity of the control stream. The computer readable storage medium further includes operational instructions that when executed by the processor cause the processor to generate a substitution table when the control stream is identified as valid.

Content providers e.g. television networks may provide media content to viewers through a variety of media distribution systems. For example media content of a content provider may be distributed via broadcast systems Internet Protocol Television IPTV systems cable access television CATV systems or other media distribution systems. Certain media content provided by a content provider may be intended for limited distribution or may otherwise be restricted so that certain viewers are not allowed to receive the media content. For example certain sporting events may be blacked out in various geographic regions to encourage people near the event to see the event live. The content provider the media distribution system provider or both may be required by contract to restrict viewer access to such restricted media content. One method used to restrict access to media content is to provide alternate or substitute media content instead of the restricted media content. To provide substitute content among other reasons content providers may provide more than one stream of media content also referred to herein as a service to the media distribution systems for distribution. Thus when a first service is subject to a restriction event e.g. the media content is not allowed to be distributed to certain viewers in a particular geographic region a second service may be provided to viewers in the restriction event area.

To accommodate restriction events a media distribution system may map the services provided by a content provider to various channels accessible by viewers. The media distribution system may be large and may include many geographic regions. Several restriction events may start may be ongoing or may end at any given time. Coordinating scheduling implementing and verifying the restriction events may be complex process.

A particular content provider may provide a large number of services to the media distribution system. One or more of the services may be subject to a restriction event. Each restriction event may specify that a particular substitute service to be provided to viewers within a certain geographic region of the media distribution system while a normal service is provided to other viewers of the media distribution system. The content provider may determine what service is normal . For example the content provider may provide Service 1 Service 2 and Service 3 e.g. ESPN ESPN2 and ESPN alternate along with other services to the media distribution system. To make it easier for viewers to find particular content the media distribution system may establish channels that are associated with the content provider. For example the video distribution system may associated channel with Service 1 and channel with Service 2. When there is no restriction event Service 1 may be viewed on channel and Service 2 may be viewed on channel . When a restriction event occurs in a particular geographic region Service 3 may be mapped to channel as a substitute for Service 1.

In a particular embodiment the media distribution system may accommodate such remapping of services provided by the content provider to channels accessible by a viewer by the use of virtual networks. A virtual network and a geographic identifier may together specify a channel accessible by a viewer. Thus when a restriction event for a particular geographic region occurs a service may be mapped to a channel by specifying to which virtual network and geographic region the service is to be sent.

Content providers may provide restriction event control streams to the media distribution system that allow the media distribution system to implement restriction events. To reduce redundant entry of restriction events to reduce the time needed to implement a restriction event to ensure that required restriction events are implemented or for other reasons the media distribution system may verify the validity of received restriction event control streams.

A restriction event control stream may include data needed to implement a restriction event. For example the restriction event control stream may indicate services to be associated with various virtual networks in geographic regions. The restriction event control stream may also include time information to indicate when the restriction event is to be implemented. The restriction event control stream may implement a retune event. A retune event indicates that a restriction event has ended so remapping of services to channels that occurred to implement the restriction event should be undone. For example the retune event may indicate that a normal service should be provided via a particular virtual network in a specified geographic region. Additionally the restriction event control stream may include or be associated with information that can be used to validate a control message of the control stream.

Referring to a block diagram of a particular embodiment of a system to validate restriction event control streams sent to a video distribution system is illustrated and designated generally . The system may include Super Head End SHE content provider Video Head Ends VHEs proxy system and Service Delivery Platform SDP . The system may enable the content provider to schedule and execute restriction events with little or no input from operators of the video distribution system e.g. an Internet Protocol Television IPTV network or a cable access television CATV network . The system may include at least a portion of the video distribution system.

The SHE may receive a stream from a content provider . A control stream in the stream may include information pertaining to particular media content that is to be sent to a user of the video distribution system when the user selects a particular channel in a particular geographic region during a period of time. For example the control stream may specify a virtual network and a geographic region to which a particular service is to be provided. The content provider may change control streams in the stream to implement restriction events without the need to inform personnel of the video distribution system of the restriction events.

The SHE may include a plurality of integrated receiver decoders IRDs . Each IRD may receive a portion of the stream provided by the content provider . Each portion of the stream may include media content a restriction event control stream or both. The restriction event control stream may specify one or more particular restriction events. When the portion of the stream received by a particular IRD includes both the media content and the restriction event control stream the IRD that receives the portion of the stream separates it into a stream that includes the media content and the restriction event control stream . The restriction event control stream may include but is not limited to a virtual network identifier a service identifier and a time when the restriction event control stream becomes valid. The virtual network identifier specifies a particular virtual network. The virtual network may be a designation used by the video distribution system that is associated with a channel accessible to viewers in a particular geographic location. That is a combination of the virtual network and the geographic region corresponds to a channel that a user can tune a set top box device or other media receiver to in order to receive a service or to a use for the service e.g. use of the service as a picture in picture stream or use of the service as a substitute service . The service may include a multimedia stream or a still image. The service identifier in the restriction event control stream may correspond to a particular service of a set of services provided by the content provider . Other control streams identified by a particular IRD may remain with the media content .

In a particular embodiment when the service identifier in the restriction event control stream is the same as the virtual network identifier normal service may be provided. When the service identifier is different than the virtual network identifier substitute service may be provided. For example in a particular embodiment the stream provided by the content provider includes media content of a first sporting event via a first service and media content of a second sporting event via a second service. The first service may be associated with the virtual network SPORTchannel and the service identifier SPORTchannel . The second service may be associated with the virtual network SPORTchannel alt and the service identifier SPORTchannel alt . In a particular geographic area the virtual network SPORTchannel may be obtained when a viewer tunes to channel . In other geographic areas different virtual networks may be mapped to channel . When no restriction event is in place i.e. when normal service is provided a viewer tuned to channel in the particular geographic area receives the SPORTchannel service. However when a restriction event is in place that requires the use of the second service instead of the first service the viewer tuned to channel receives the SPORTchannel alt service. When the restriction event ends the content provider may send a retune stream via the restriction event control stream . The retune stream may return the video distribution system to normal service For example in the particular geographic area where the virtual network SPORTchannel corresponds to channel the SPORTchannel service is provided for channel when the retune stream is implemented.

The media content from a particular IRD may be sent to an acquisition server A server . Each acquisition server may include an encoder that encodes the media content for distribution. The encoded media content may be sent from the A servers to VHEs . Each of the VHEs may distribute the media content to client devices e.g. to set top box devices or other media devices within a particular geographical area of the video distribution system.

When a particular IRD determines that the restriction event control stream includes data pertaining to a restriction event the particular IRD sends the restriction event control stream to a content proxy such as first content proxy or second content proxy of a proxy system . Each of the content proxies of the proxy system is associated with a particular set of IRDs . The content proxies may change the formatting or other aspects of the received restriction event control stream to prepare the restriction event control stream to be sent to a service delivery platform SDP of the video distribution system. The content proxies may also add a content proxy identifier associated with the particular content proxy that received the restriction event control stream . The content proxies output a control stream that is sent from the proxy system to the SDP .

The SDP may parse the control stream to prepare information used by the video distribution system to implement restriction events. For example the SDP may parse the control stream into various data elements. The data elements may include but are not limited to the content proxy identifier of the particular content proxy that forwarded the control stream a virtual network identifier a time one or more geographical region codes GRCs and an identifier of a service provided by the content provider . The time may indicate when the service is to be distributed via the virtual network at the one or more geographical regions. When a restriction event is over a retune stream may be received from the content provider . The retune stream may indicate that a normal service distributed via the virtual network is provided within the one or more geographic regions. The GRCs may represent regions where set top box devices are located. Each STB device of the video distribution system may be associated with a single GRC that identifies the location of the STB device. GRCs may be based on zip codes or other regional identifiers.

Before implementing a restriction event the SDP may check the validity of a received control stream . For example the SDP may confirm that the content proxy identifier in the control stream is found in a content proxy to virtual network mapping table and that the virtual network identifier of the control stream is associated with the content proxy identifier in the mapping table .

In a particular embodiment the mapping table associates virtual networks with content proxies through which valid control streams can be received. The virtual networks may be designated in groups or blocks in the mapping table . For example each of the IRDs may be associated with one or more services of the content provider . Additionally each service may be associated with one or more blocks of virtual networks of the video distribution system. Since each of the content proxies is associated with one or more of the IRDs a valid control stream for a particular service may be received by a particular IRD and processed by a particular content proxy . To illustrate virtual networks vn vn may be mapped to the first content proxy in the mapping table and virtual networks vn vn may be mapped to the second content proxy in the mapping table . When the SDP receives a first control stream via the control stream from the proxy system the SDP may determine a content proxy identifier of the particular content proxy that sent the first control stream and the virtual network identifier of the first control stream. The first control stream is valid when the content proxy identifier and the virtual network identifier are associated in the mapping table . Thus when the content proxy identifier is of the first content proxy and the virtual network identifier is of a virtual network vn the first control stream is valid because virtual network vn is within the block of virtual networks associated with the first content proxy . The first control stream is not valid when the content proxy identifier and the virtual network identifier are not associated in the mapping table . Thus when the content proxy identifier is of the first content proxy and the virtual network identifier is of a virtual network vn the first control stream is not valid because virtual network vn is not within the block of virtual networks associated with the first content proxy .

Valid control streams may be logged in a SDP database . The valid control streams may be used to update a substitution table . Invalid control streams may be logged in the SDP database . An invalid control stream may result in an alarm that informs an operator of the system of the receipt of an invalid control stream. Representatives of the content provider may have access to valid control stream information and invalid control stream information in the SDP database .

The substitution table may include information that determines what media service will be sent to a set top box device in a geographical region when a user of the set top box tunes to a particular channel at a particular time. The substitution table may be an array stored in a computer memory. In a particular embodiment columns of the substitution table correspond to virtual networks of the video distribution system and rows of the substitution table correspond to geographical regions as defined by GRCs. The content of an entry in the substitution table may include an identifier of a service to be provided via the virtual network.

In a particular embodiment an entry in the substitution table may include an identifier of a particular service when normal service is provided. In other particular embodiments a constant or null value entry in the substitution table may indicate that normal service is to be provided. An entry other than the particular service the constant or the null value may indicate that substitute service will be provided.

In a particular embodiment the substitution table is sent to each VIM . In another particular embodiment only a portion of the substitution table that corresponds to geographical regions serviced by a particular VHE is sent to the particular VHE . The SDP may communicate with each of the VHEs to determine the GRCs serviced by each of the VHEs . Each substitution table or portion of the substitution table sent to the VHEs may be associated with a particular identifier time or both.

Each VHE receives the substitution table or a portion of the substitution table associated with a particular identifier time or both from the SDP . For example as illustrated in the VHE receives entries of the substitution table that correspond to GRC for the time 13 30. Entry may indicate that the media content associated with service should be provided while a user in the geographic region associated with GRC is tuned to a channel corresponding to virtual network vn. Entry may indicate that the media content associated with service should be provided while a user in the geographic region associated with GRC is tuned to a channel corresponding to virtual network vn. Entry may indicate that the media content associated with service should be provided while a user in the geographic region associated with GRC is tuned to a channel corresponding to virtual network vn. Entry may indicate that the media content associated with service should be provided while a user in the geographic region associated with GRC is tuned to a channel corresponding to virtual network vn.

Each of the VHEs may create access tables for the GRCs serviced by the VHEs based upon the substitution table . The VHEs may send the access tables to media access devices e.g. set top box devices in the regions serviced by the VHEs so that the access tables are received by the media access devices of the video distribution system. Each media access device may be associated with a single GRC. In a particular embodiment the access tables received by the media access devices include multicast group addresses for each channel accessible by the media access devices.

Referring to a block diagram of a second particular embodiment of a system to validate restriction event control streams sent to a video distribution system is illustrated and designated generally . The system includes a service delivery platform SDP that communicates with a super head end SHE via a proxy system . Alternatively the proxy system can be integrated with the SDP . The SHE communicates with at least one content provider . Further the SDP communicates with a plurality of video head ends VHEs . Each of the VHEs provides media content that may be received by client devices such as set top box STB devices of a video distribution system.

In a particular embodiment the content provider provides media content to the SHE for distribution via a plurality of services. Certain items of the media content may be subject to a restriction event. For example a restriction event occurs when a first service provided by the content provider is available in a first geographic region but is unavailable in a second geographic region. A second service provided by the content provider that is different than the first service may be made available as a substitute for the first service. To illustrate the first service may normally i.e. when no restriction event is in place be provided via a channel corresponding to a first virtual network in the first geographic region and in the second geographic region. When a restriction event is in place the second service may be provided via the first virtual network in the first geographic region while the first service continues to be provided via the first virtual network in the second geographic region. A particular channel may be associated with each virtual network within each geographic region. The services shown on the channels corresponding to the virtual network in different regions serviced by the video distribution system may be different due to anticipated interest legal obligations or both. For example a restriction event may occur with respect to a particular virtual network as a result of a particular sporting event being blacked out due to contractual obligations of the content provider the video distribution system provider or both.

In one embodiment the content provider sends a media content stream to the SHE . When the content provider determines that the media content is subject to a restriction event the content provider can also send a control stream to the SHE . The control stream may include parsable control data indicating at least one geographical area or subscriber group for which access to a particular service of the content provider is to be restricted and also identifies a substitute service.

The SHE may include a plurality of integrated receiver decoders IRDs . Each IRD may be coupled to one of a plurality of acquisition servers A servers . In a particular embodiment each IRD may receive a media content stream associated with a service of the content provider . Each IRD may deliver corresponding media content to client devices via the video distribution system. In an illustrative embodiment the media content stream is a Moving Picture Experts Group MPEG stream or a Joint Photographic Experts Group JPEG image. Each IRD sends media content associated with a received media content stream to an A server to which it is coupled. Each A server may distribute the media content to one or more of the VHEs for delivery to client devices in various geographical regions served by the VHEs .

Further each IRD may receive a control stream related to delivery of media content. Each IRD may determine whether the control stream includes data indicating that a service of the content provider or particular media content associated with the service is subject to one or more restriction events e.g. a blackout a limitation on access to users associated with a particular subscription level a limitation on access to users who pay for media content corresponding to the media content stream or a combination thereof . The IRD may send the control stream to the SDP via the proxy system when the control stream includes data indicating that the service is subject to one or more restriction events.

The SDP may include a processor and a memory accessible to the processor . The memory may include but is not limited to an SDP database a content proxy to virtual network mapping table mapping table a substitution table and modules . The SDP database may be used to log control streams received from the proxy system . In some embodiments the SDP database is external to the SDP . For example the SDP database may be a portion of a memory of a server of the content provider . The mapping table may be used to determine the validity of each control stream received from the proxy system . The substitution table may be used to determine what service is to be associated with a virtual network of the video distribution service for each geographical region. The modules may include data stores hardware logic instructions executable by the processor e.g. instructions included in one or more computer programs or operating systems or any combination thereof. The modules may provide various functions to automatically provide a substitute service to selected regions during restriction events. The substitute service may be a still image or alternate media content.

The memory may include a user interface module that is executable by the processor . The user interface module may enable the SDP to receive user input entered through a keyboard mouse touch screen other input device or combinations thereof. The user interface module may output data alarms alerts other information and combinations thereof to display devices such as a display device or other devices coupled to the SDP e.g. a computing device associated with the content provider . An operator of the SDP may use the user interface module to initiate or terminate a restriction event monitor ongoing automated processes manually override automated processes fix problems that may have occurred in the automated processes or combinations thereof.

The memory may include a validity module that is executable by the processor . The validity module may receive control streams from the proxy system . The validity module may parse the control streams into data elements. The validity module may compare a proxy identifier data element and a virtual network identifier data element from each control stream to the mapping table to determine whether each control stream is valid. A control stream is valid when the proxy identifier data element of a control stream corresponds to a content proxy identifier in the mapping table and when the virtual network identifier data element of the control stream is associated with the content proxy identifier in the mapping table . When the control stream is invalid the validity module may log the invalid stream in the SDP database . The log entry may include data indicating that the control stream was invalid data indicating the virtual network associated with the invalid control stream a time the invalid control stream was received a geographical region code GRC or GRCs associated with the invalid control stream a substitute service associated with the invalid control stream other information descriptive of the invalid control stream or any combination thereof. When the control stream is invalid the validity module may call the user interface module to send an alarm to the display device . The alarm may be a visual alarm an audio alarm or both. The user interface module may also send an alarm to the content provider notifying the content provider of the receipt of an invalid control stream.

When the control stream is valid the validity module may log the valid stream in the SDP database . The log entry may include data indicating that the control stream was valid data indicating the virtual network associated with the valid control stream a time the valid control stream was received a GRC or GRCs associated with the valid control stream a substitute service associated with the valid control stream other information descriptive of the valid control stream or any combination thereof.

The memory may include an update module that is executable by the processor . The update module may receive data elements of valid control streams from the validity module . A time data element of each control stream may be examined to determine whether a current substitution table should be updated to include information from the control stream. When the time data element indicates that a restriction event is to be implemented at a future time the update module may store the data elements of the control stream in the memory and accesses the data elements to update the substitution table when the time for using the data elements is appropriate.

The update module may update the substitution table using data elements from the valid control streams when the time data element is appropriate for the current substitution table . The substitution table may include an array having columns and rows. The columns of the substitution table may correspond to virtual networks that the set top box devices may access when the set top box devices tune to a particular channel. The rows of the array may correspond to GRCs. Each entry in the substitution table is an identifier of a service provided by the content provider .

The update module may enter an identifier of a substitute service into an entry of the substitute table to implement a restriction event in response to a control stream. For example one or more entries corresponding to the GRC data element from the control stream and the virtual network data element of the control stream may be updated to include the identifier of the substitute service.

When the substitute table is updated the processor may send data to the VHEs . The data may include a time when the data is valid and at least a portion of the substitute table .

Each of the VHEs may receive a table from the SDP . Alternately each of the VHEs may create the table using a portion of the substitute table received from the SDP . Rows of the table may correspond to GRCs serviced by the VIM. Columns of the table may correspond to virtual networks. An entry in the table may identify a service of the content provider to be provided via the virtual network. Each of the VHEs may also include a table that is a prior version of the table . Alternately the table may include information indicating normal service to be provided via each virtual network.

In a particular embodiment each of the VHEs compares table to table . When a particular VHE does not detect a difference in any entry of the table as compared to the table the particular THE may wait to receive new data from the SDP . When the particular VHE detects a difference in the table as compared to the table the particular VHE may creates an access table .

In a particular embodiment the access table may includes a first row having an identifier for each virtual network corresponding to a column of table and a second row having an identifier of the corresponding entry from table e.g. a service to be provided for the virtual network corresponding to an entry of the first row . Some identifier in the first row may be channel numbers that the STB devices tune to in order to receive the services for the virtual networks. Other identifiers in the first row may correspond to virtual networks not associated with particular channels e.g. picture in picture streams or alternate services for the particular channels . The identifiers in the second row may correspond to multicast group addresses for the services i.e. the substitute service or the normal service to be provided for the corresponding identifiers of the first row. In a particular embodiment the access table is sent from each of the VHEs to the STB devices in a region serviced by the VHE. In another particular embodiment the access table is sent from each of the VHEs only to the STB devices that are affected by the restriction event. For example the access table may be sent only to STB devices associated with the GRC corresponding to the row of the table in which a difference was detected. The data may include the GRC corresponding to the row of the table in which a difference was detected a time when the control stream becomes valid and the access table.

A STB device may receive the access table from one of the VHE that services the region where the STB device is located. The STB device may also receive other data associated with the access table such as a GRC and a time when the access table will becomes valid. A STB device may ignore an access table that does not correspond to a GRC associated with the STB device . Each access table may include information to map channels accessible by the STB devices to virtual networks of the video distribution system. For example the access table may include a first row and a second row. An entry in the first row may be a virtual network identifier. An entry in the second row may be a multicast group address corresponding to a virtual network. The multicast group address may indicate where to access the service associated with the corresponding virtual network. When the access table is valid e.g. based on the time current time and the time that the access table will become valid the STB devices may use the access table to retrieve the appropriate service when the STB device is tuned to a particular channel.

Referring to a particular embodiment of a user interface that may be used in a system to validate restriction event control streams sent to a video distribution system is illustrated and generally designated . The user interface may include instructions a title block a service column a virtual network VN block column and a content proxy column . The instructions may inform a representative of a content provider or a media service provider to provide a virtual network range and a corresponding content proxy for each service that a content provider provides to a video distribution system e.g. an IPTV network . The title block may inform a user of the information included in each column. The title block may not be changed by the user.

Services listed in the service column may correspond to media content streams that the content provider sends to the video distribution system. In a particular embodiment the titles in the service column cannot be changed using the user interface . A virtual network range entered in the VN block column corresponding to a particular title in the service column indicates that the set of virtual network identifiers in the virtual network range can be used to distribute the corresponding service. A content proxy entered in the content proxy column corresponding to a particular service in the service column indicates that valid control streams pertaining to blackout events for the service may be received via the content proxy. For example the content proxy a identified in the first ten rows of content proxy column may correspond to the first content proxy of the proxy system of .

Referring to a particular embodiment of a content proxy to virtual network mapping table usable by a system to validate restriction event control streams sent to a video distribution system is illustrated and generally designated . Entries in a first column of the mapping table may include identifiers of content proxies of a proxy system. Entries in the remaining columns of the mapping table may correspond to virtual networks associated with the content proxies. Data used to populate the mapping table may be obtained from a user interface such as the user interface of . For example data for the first column of the mapping table may correspond to each unique content proxy entered in the proxy column of the user interface depicted in . Also the values for the remaining entries in the mapping table may be obtained from data entered in the VN block column of the user interface depicted in .

Referring to a particular embodiment of a substitute table for use in a method or system to validate restriction event control streams sent to a video distribution system is illustrated and generally designated . The substitute table includes multiple entries arranged into rows and columns . The substitute table depicted in has 64 rows and 64 columns . In other embodiments the substitute table may have a different number of rows a different number of columns or both.

Each entry in the substitution table may contain an identifier of a service provided by a content provider. Each row may correspond to a unique geographical region code GRC associated with a geographic region service by a video distribution system. For example row may correspond to a GRC row may correspond to a GRC and so on. Each column may correspond to a virtual network used by the video distribution system to distribute media content. Within a particular geographic region each virtual network may be associated with a particular channel. For example column may correspond to a virtual network vn column may correspond to a virtual network vn column may correspond to a virtual network vn column may correspond to a virtual network vn column may correspond to a virtual network vn and column may correspond to a virtual network vn.

When the service identifier in an entry for a particular row and column corresponds to an identifier of the virtual network associated with the particular column the substitute table indicates that a normal service is to be provided via the channel associated with the virtual network. When the service identifier in the entry for the particular row and column does not correspond to the identifier of the virtual network the substitute table indicates that substitute service is to be provided via the channel associated with the virtual network. For example as discussed above row may correspond to GRC and column may correspond to virtual network vn. A first table entry associated with row and column includes the service identifier . The service identifier corresponds to the virtual network vn as indicated by digits of the identifiers matching . Accordingly the first entry indicates that within the geographic region associated with GRC the service identified by service identifier is to be provided via the virtual network vn. This is normal service since the service identifier and the virtual network identifier correspond. However in another example row may correspond to GRC and column may corresponds to vn. A second entry at row and column indicates that substitute service is to be provided on the channel associated with virtual network vn within the geographic region associated with GRC . The substitute service is indicated by service identifier which does not correspond with virtual network vn as indicated by the digits of the identifiers not matching . When at least one entry of the substitution table indicates that substitute service is to be provided one or more access tables may be generated. The access tables may be distributed to media access devices with affected geographic regions to causes the substitute services to be received by the media access devices.

The substitution table is represented in as a two dimensional array of rows and columns. When the substitution table or a portion of the substitution table is to be sent from one device to another device e.g. from the SDP to the VHE depicted in the substitution table may be converted to a one dimensional array e.g. a delimited data file or other data format.

Referring to a first particular embodiment of a method to validate restriction event control streams sent to a video distribution system is illustrated. The method may include at receiving a control stream from a content provider via a content proxy device. The control stream may be associated with a restriction event such as a blackout event . The control stream may direct a media service delivery platform to associate a substitute service with a virtual network for at least one geographical region.

At a determination may be made regarding whether the control stream is valid. In a particular embodiment the control stream is identified as valid when content proxy information identifying the content proxy and virtual network information from the control stream correspond to associated content proxy information and virtual network information in a content proxy to virtual network mapping table. In the content proxy to virtual network mapping table identifiers of virtual networks of the media service delivery platform are associated with identifiers of content proxies that forward control streams to the media service delivery platform. When the control stream is identified as valid the method may proceed at . When the control stream is invalid the method may proceed at .

For a valid control stream a log entry for the valid control stream is created at . The log entry may be made in a database. At an identifier of the substitute service may be entered into each portion of a substitution table that corresponds to each geographic region of the at least one geographic region and to the virtual network.

At at least a portion of the substitution table may be provided to video head ends. In a particular embodiment the entire substitution table is provided to each video head end. In another particular embodiment only a portion of the substitution table that pertains to geographical regions serviced by a video head end is sent to the video head end.

At an access table based at least in part on a portion of the substitution table is provided to set top box devices in the at least one geographic region. At the substitute service may be sent to a set top box device in the at least one geographical region when the set top box device tunes to a channel corresponding to the virtual network. The substitute service may be a still image or a multimedia stream. After the substitute service is sent to the set top box device the method ends.

For an invalid control stream a log entry for the invalid control stream is created at . The log entry may be made in the same database where valid control streams are logged or in a different database. At an alert may be sent to a user interface. The alert may be a visual alert an audible alert or both. In a particular embodiment the user interface may be displayed on a display device coupled to the media service delivery platform. In a particular embodiment the content provider has access to the user interface and the alert. After the alert is sent to the user interface the method ends.

Referring to an illustrative embodiment of an Internet Protocol Television IPTV system generally designated is shown. In a particular illustrative embodiment a video distribution system as discussed with reference to and may include elements of a system such as the IPTV system . As shown the system may include a client facing tier an application tier an acquisition tier and an operations and management tier . Each tier is coupled to a private network to a public network such as the Internet or to both the private network and the public network . For example the client facing tier may be coupled to the private network . Further the application tier may be coupled to the private network and to the public network . The acquisition tier may also be coupled to the private network and to the public network . Additionally the operations and management tier may be coupled to the public network .

As illustrated in the various tiers communicate with each other via the private network and or the public network . For instance the client facing tier may communicate with the application tier and the acquisition tier via the private network . The application tier may communicate with the acquisition tier via the private network . Further the application tier may communicate with the acquisition tier and the operations and management tier via the public network . Moreover the acquisition tier may communicate with the operations and management tier via the public network . In a particular embodiment elements of the application tier including but not limited to a client gateway may communicate directly with the client facing tier .

The client facing tier may communicate with user equipment via an access network such as an Internet Protocol Television IPTV access network. In an illustrative embodiment customer premises equipment CPE may be coupled to a local switch router modem or other device of the access network . The client facing tier may communicate with a first representative set top box device via the first CPE and with a second representative set top box device via the second CPE . In a particular embodiment the first representative set top box device and the first CPE may be located at a first customer or subscriber premise and the second representative set top box device and the second CPE may be located at a second customer or subscriber premise. In another particular embodiment the first representative set top box device and the second representative set top box device may be located at a single customer premise each coupled to one of the CPE . The CPE may include routers local area network devices modems such as digital subscriber line DSL modems any other suitable devices for facilitating communication between a set top box device and the access network or any combination thereof.

In an exemplary embodiment the client facing tier may be coupled to the CPE via fiber optic cables. In another exemplary embodiment the CPE may include digital subscriber line DSL modems that are coupled to one or more network nodes via twisted pairs and the client facing tier may be coupled to the network nodes via fiber optic cables. Each set top box device may process data received via the access network via an IPTV software platform such as Microsoft TV IPTV Edition.

The first set top box device may be coupled to a first external display device such as a first television monitor and the second set top box device may be coupled to a second external display device such as a second television monitor . Moreover the first set top box device may communicate with a first remote control and the second set top box device may communicate with a second remote control . The set top box devices may include IPTV set top box devices video gaming devices or consoles that are adapted to receive IPTV content personal computers or other computing devices that are adapted to emulate set top box device functionalities any other device adapted to receive IPTV content and transmit data to an IPTV system via an access network or any combination thereof.

In an exemplary non limiting embodiment each set top box device may receive data video or any combination thereof from the client facing tier via the access network and render or display the data video or any combination thereof at the display device to which it is coupled. In an illustrative embodiment the set top box devices may include tuners that receive and decode television programming signals or packet streams for transmission to the display devices . Further the set top box devices may include a STB processor and a STB memory device that is accessible to the STB processor . In one embodiment a computer program such as the STB computer program may be embedded within the STB memory device . Additionally in a particular embodiment the set top box devices may include an access table . The access table may include information used by the set top box devices to implement restriction events e.g. blackouts . For example the access table may include a matrix that maps services e.g. media streams to particular channels or media services e.g. a picture in picture service .

In an illustrative embodiment the STB computer program includes instructions that cause set top box devices to implement scheduled restriction events based on the access table . For example the set top box devices may tune from a first service to a second service based on the access table to implement a restriction event.

In an illustrative embodiment the client facing tier may include a client facing tier CFT switch that manages communication between the client facing tier and the access network and between the client facing tier and the private network . As illustrated the CFT switch is coupled to one or more data servers such as image and data servers D servers that store format encode replicate or otherwise manipulate or prepare video content for communication from the client facing tier to the set top box devices . The CFT switch may also be coupled to a terminal server that provides terminal devices with a connection point to the private network . In a particular embodiment the CFT switch may be coupled to a video on demand VOD server that stores or provides VOD content imported by the IPTV system . Further the CFT switch is coupled to one or more video head ends that receive video content and transmit the content to the set top boxes via the access network . Each of the one or more video heads may receive a substitution table from the acquisition tier through the private network and the CFT switch . The one or more video heads may generate access tables from the substitution table and send the access tables to the set top box devices in the regions serviced by the one or more video heads using CFT switch

In an illustrative embodiment the client facing tier may communicate with a large number of set top boxes such as the representative set top boxes over a wide geographic area such as a metropolitan area a viewing area a statewide area a regional area a nationwide area or any other suitable geographic area market area or subscriber or customer group that may be supported by networking the client facing tier to numerous set top box devices. In a particular embodiment the CFT switch or any portion thereof may include a multicast router or switch that communicates with multiple set top box devices via a multicast enabled network.

As illustrated in the application tier may communicate with both the private network and the public network . The application tier may include a first application tier APP switch and a second APP switch . In a particular embodiment the first APP switch may be coupled to the second APP switch . The first APP switch may be coupled to an application server and to an OSS BSS gateway . In a particular embodiment the application server may provide applications to the set top box devices via the access network which enable the set top box devices to provide functions such as interactive program guides video gaming display messaging processing of VOD material and other IPTV content etc. In an illustrative embodiment the application server provides location information to the set top box devices . In a particular embodiment the OSS BSS gateway includes operation systems and support OSS data as well as billing systems and support BSS data. In one embodiment the OSS BSS gateway may provide or restrict access to an OSS BSS server that stores operations and billing systems data.

The second APP switch may be coupled to a domain controller that provides Internet access for example to users at their computers or via the public network . For example the domain controller may provide remote Internet access to IPTV account information e mail personalized internet services messaging services or other online services via the public network . In addition the second APP switch may be coupled to a subscriber and system store that includes account information such as account information that is associated with users who access the IPTV system via the private network or the public network . In an illustrative embodiment the subscriber and system store may store subscriber or customer data and create subscriber or customer profiles that are associated with IP addresses stock keeping unit SKU numbers other identifiers or any combination thereof of corresponding set top box devices . In another illustrative embodiment the subscriber and system store may store data associated with capabilities of set top box devices associated with particular customers. The application tier may also include a blackout branch management server that determines based on a geographic area information associated with each of the set top box devices which set top box devices should implement particular restriction events. Based on information from the blackout branch management server appropriate access tables may be sent to the affected set top box devices .

In a particular embodiment the application tier includes a client gateway that communicates data directly to the client facing tier . In this embodiment the client gateway is coupled directly to the CFT switch . The client gateway may provide user access to the private network and the tiers coupled thereto. In an illustrative embodiment the set top box devices may access the IPTV system via the access network using information received from the client gateway . User devices may access the client gateway via the access network and the client gateway may allow such devices to access the private network once the devices are authenticated or verified. Similarly the client gateway may prevent unauthorized devices such as hacker computers or stolen set top box devices from accessing the private network by denying access to these devices beyond the access network .

For example when the first representative set top box device accesses the client facing tier via the access network the client gateway may verify subscriber information by communicating with the subscriber and system store via the private network . Further the client gateway may verify billing information and status by communicating with the OSS BSS gateway via the private network . In one embodiment the OSS BSS gateway may transmit a query via the public network to the OSS BSS server . After the client gateway confirms subscriber and or billing information the client gateway may allow the set top box device to access IPTV content and VOD content at the client facing tier . If the client gateway cannot verify subscriber information for the set top box device e.g. because it is connected to an unauthorized twisted pair the client gateway may block transmissions to and from the set top box device beyond the access network .

As indicated in the acquisition tier includes an acquisition tier AQT switch that communicates with the private network . The AQT switch may also communicate with the operations and management tier via the public network . In a particular embodiment the AQT switch may be coupled to content providers that receives or acquires television content movie content advertisement content other video content or any combination thereof from a broadcast service such as a satellite acquisition system or satellite head end office. In a particular embodiment the content providers may transmit content to the AQT switch and the AQT switch may transmit the content to the CFT switch via the private network .

In an illustrative embodiment content may be transmitted to the D servers where it can be encoded formatted stored replicated or otherwise manipulated and prepared for communication from the video head end s to the set top box devices . The CFT switch may receive content from the video head end s and communicate the content to the CPE via the access network . The set top box devices may receive the content via the CPE and may transmit the content to the television monitors . In an illustrative embodiment video or audio portions or both of the content may be streamed to the set top box devices .

The content provider may provide control streams for restriction events to a proxy system . The proxy system may format the control streams and provide formatted control streams to a service delivery platform SDP . The SDP may separate the formatted control streams into data elements. The SDP may validate each control stream by checking that a content proxy that sent the control stream to the SDP is in a mapping table and checking that a virtual network identifier of the control stream is associated with the content proxy in the mapping table. The SDP may log all control streams in a database. The SDP may provide an alarm when an invalid control stream is detected. The SDP may update a substitution table with data from the control streams when the control streams are valid. The SDP may send the substitution table to the AQT switch . The AQT switch may send the substitution table through the private network to the CFT switch . The CFT switch may provide the substitution table to the video head ends .

Further the AQT switch may be coupled to a video on demand importer server that receives and stores television or movie content received at the acquisition tier and communicates the stored content to the VOD server at the client facing tier via the private network . Additionally at the acquisition tier the video on demand VOD importer server may receive content from one or more VOD sources outside the IPTV system such as movie studios and programmers of non live content. The VOD importer server may transmit the VOD content to the AQT switch and the AQT switch in turn may communicate the material to the CFT switch via the private network . The VOD content may be stored at one or more servers such as the VOD server .

When users issue requests for VOD content via the set top box devices the requests may be transmitted over the access network to the VOD server via the CFT switch . Upon receiving such requests the VOD server may retrieve the requested VOD content and transmit the content to the set top box devices across the access network via the CFT switch . The set top box devices may transmit the VOD content to the television monitors . In an illustrative embodiment video or audio portions or both of VOD content may be streamed to the set top box devices .

In an illustrative embodiment the content providers may transmit content to the AQT switch and the AQT switch in turn may transmit the content to the OMT switch via the public network . In this embodiment the OMT switch may transmit the content to the TV server for display to users accessing the user interface at the TV server . For example a user may access the TV server using a personal computer coupled to the public network .

In conjunction with the configuration of structure provided herein a system and method of restricting access to media content are provided in which automated software based scheduling and execution of restriction events occur based on control streams that are received and parsed at a service delivery platform or other conditional access provisioning system of a video distribution network such as an Internet Protocol Television IPTV network. The control streams may be validated. Valid control streams may be used to update a substitution table that is used to generate access tables that are sent to set top box devices. The access tables may dictate what service is retrieved when a user tunes a set top box device to a particular channel. Invalid control signals may be logged and may raise an alarm to operators of a video distribution system a content provider or both. In other embodiments the system and method may be applied to a cable network a satellite dish network or other video distribution network adapted to deliver video traffic via similar architectures.

Referring to an illustrative embodiment of a general computer system is shown and is designated . The computer system may include a set of instructions that can be executed to cause the computer system to perform any one or more of the methods or computer based functions disclosed herein. The computer system may be connected e.g. using a network to other computer systems or peripheral devices. For example the computer system may include or be included within any one or more of the SHE IRDs A servers content proxies SDPs VHEs and STB devices discussed with reference to .

In a networked deployment the computer system may operate in the capacity of a server or as a client user computer in a server client user network environment or as a peer computer system in a peer to peer or distributed network environment. The computer system may also be implemented as or incorporated into various devices such as a personal computer PC a tablet PC a set top box STB a personal digital assistant PDA a mobile device a palmtop computer a laptop computer a desktop computer a communications device a wireless telephone a land line telephone a control system a web appliance or any other machine capable of executing a set of instructions sequential or otherwise that specify actions to be taken by that machine. In a particular embodiment the computer system may be implemented using electronic devices that provide video audio or data communication. Further while a single computer system is illustrated the term system shall also be taken to include any collection of systems or sub systems that individually or jointly execute a set or multiple sets of instructions to perform one or more computer functions.

As illustrated in the computer system may include a processor e.g. a central processing unit CPU a graphics processing unit GPU or both. Moreover the computer system may include a main memory and a static memory which can communicate with each other via a bus . As shown the computer system may further include a video display unit such as a liquid crystal display LCD a projection television system a flat panel display a solid state display or a cathode ray tube CRT . Additionally the computer system may include an input device such as a keyboard and a cursor control device such as a mouse. The computer system may also include a disk drive unit a signal generation device such as a speaker or remote control and a network interface device .

In a particular embodiment as depicted in the disk drive unit may include a computer readable storage medium in which one or more sets of instructions e.g. software can be embedded. Further the instructions may embody one or more of the methods or logic as described herein. In a particular embodiment the instructions may reside completely or at least partially within the main memory the static memory and or within the processor during execution by the computer system . The main memory and the processor also may include computer readable media.

In an alternative embodiment dedicated hardware implementations such as application specific integrated circuits programmable logic arrays and other hardware devices may be constructed to implement one or more of the methods described herein. Applications that may include the apparatus and systems of various embodiments may broadly include a variety of electronic and computer systems. One or more embodiments described herein may implement functions using two or more specific interconnected hardware modules or devices with related control and data signals that can be communicated between and through the modules or as portions of an application specific integrated circuit. Accordingly the present system encompasses software firmware and hardware implementations.

In accordance with various embodiments of the present disclosure the methods described herein may be implemented by software programs executable by a computer system. Further in an exemplary non limited embodiment implementations may include distributed processing component object distributed processing and parallel processing. Alternatively virtual computer system processing may be constructed to implement one or more of the methods or functionality as described herein.

The present disclosure contemplates a computer readable storage medium that stores instructions or receives stores and executes instructions responsive to a propagated signal so that a device connected to a network may communicate voice video or data over the network . Further the instructions may be transmitted or received over the network via the network interface device .

While the computer readable storage medium is shown to be a single medium the term computer readable medium includes a single medium or multiple media such as a centralized or distributed database and or associated caches and servers that store one or more sets of instructions. The term computer readable medium shall also include any medium that is capable of storing encoding or carrying a set of instructions for execution by a processor or that cause a computer system to perform any one or more of the methods or operations disclosed herein.

In a particular non limiting exemplary embodiment the computer readable storage medium may include a solid state memory such as a memory card or other package that houses one or more non volatile read only memories. Further the computer readable storage medium may be a random access memory or other volatile re writable memory. Additionally the computer readable storage medium may include a magneto optical or optical medium such as a disk or tapes or other storage device to capture carrier wave signals such as a signal communicated over a transmission medium. A digital file attachment to an e mail or other self contained information archive or set of archives may be considered equivalent to a tangible storage medium. Accordingly the disclosure is considered to include any one or more of a computer readable storage medium and other equivalents and successor media in which data or instructions may be stored.

Although the present specification describes components and functions that may be implemented in particular embodiments with reference to particular standards and protocols the disclosed embodiments are not limited to such standards and protocols. For example standards for Internet and other packet switched network transmission e.g. TCP IP UDP IP HTML HTTP represent examples of the state of the art. Such standards are periodically superseded by faster or more efficient equivalents having essentially the same functions. Accordingly replacement standards and protocols having the same or similar functions as those disclosed herein are considered equivalents thereof.

The illustrations of the embodiments described herein are intended to provide a general understanding of the structure of the various embodiments. The illustrations are not intended to serve as a complete description of all of the elements and features of apparatus and systems that utilize the structures or methods described herein. Many other embodiments may be apparent to those of skill in the art upon reviewing the disclosure. Other embodiments may be utilized and derived from the disclosure such that structural and logical substitutions and changes may be made without departing from the scope of the disclosure. Accordingly the disclosure and the figures are to be regarded as illustrative rather than restrictive.

One or more embodiments of the disclosure may be referred to herein individually and or collectively by the term invention merely for convenience and without intending to voluntarily limit the scope of this application to any particular invention or inventive concept. Moreover although specific embodiments have been illustrated and described herein it should be appreciated that any subsequent arrangement designed to achieve the same or similar purpose may be substituted for the specific embodiments shown. This disclosure is intended to cover any and all subsequent adaptations or variations of various embodiments. Combinations of the above embodiments and other embodiments not specifically described herein will be apparent to those of skill in the art upon reviewing the description.

The Abstract of the Disclosure is provided with the understanding that it will not be used to interpret or limit the scope or meaning of the claims. In addition in the foregoing Detailed Description various features may be grouped together or described in a single embodiment for the purpose of streamlining the disclosure. This disclosure is not to be interpreted as reflecting an intention that the claimed embodiments require more features than are expressly recited in each claim. Rather as the following claims reflect inventive subject matter may be directed to less than all of the features of any of the disclosed embodiments. Thus the following claims are incorporated into the Detailed Description with each claim standing on its own as defining separately claimed subject matter.

The above disclosed subject matter is to be considered illustrative and not restrictive and the appended claims are intended to cover all such modifications enhancements and other embodiments which fall within the scope of the present invention. Thus to the maximum extent allowed by law the scope of the present invention is to be determined by the broadest permissible interpretation of the following claims and their equivalents and shall not be restricted or limited by the foregoing detailed description.

