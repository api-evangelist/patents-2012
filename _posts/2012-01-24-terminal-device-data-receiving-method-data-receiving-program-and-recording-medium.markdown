---

title: Terminal device, data receiving method, data receiving program, and recording medium
abstract: A terminal device can connect to a first network whose communication speed is high or whose communication fee charged according to an amount of communication is low and a second network whose communication speed is lower than that of the first network or whose communication fee charged according to an amount of communication is higher than that of the first network. The terminal device first data with a large amount of data through the first network and stores the first data. Also, the terminal device second data with an amount of data smaller than that of the first data through the second network and stores the second data. The terminal device determines a connection state of the network and a storage state of data and controls reception of data used to output contents on the basis of the determination result.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08849953&OS=08849953&RS=08849953
owner: Rakuten, Inc.
number: 08849953
owner_city: Tokyo
owner_country: JP
publication_date: 20120124
---
This application is a National Stage of International Application No. PCT JP2012 051442 filed Jan. 24 2012 claiming priority based on Japanese Patent Application No. 2011 098955 filed Apr. 27 2011 the contents of all of which are incorporated herein by reference in their entirety.

The present invention relates to a technical field of a terminal device which can connect to a plurality of networks and which receives data which is used to output contents through the connected network.

Conventionally a terminal device that can connect to a plurality of networks is known. For example in recent years mobile communication terminals such as smart phones which can connect to a third generation mobile communication network hereinafter referred to as 3G network and a wireless LAN Local Area Network have become widely used.

For example such a terminal device connects to a network selected by a user or connects to a network automatically selected according to a radio wave condition among a plurality of networks. For example the terminal device receives image data moving image data and sound data through the connected network and outputs displays an image or a moving image on a screen or outputs sound on the basis of the received data.

As the computer technology advances the processing capacity of terminal devices is gradually increased. Therefore for example the terminal devices can easily display high quality image and moving image and output high quality sound. As the quality of contents improves the amount of data of the contents increases.

On the other hand the communication speed transmission rate of packet communication and the fee system may be different for each network to which the terminal device can connect. For example the communication speed of the 3G network is generally lower than that of the wireless LAN. The fee system of the 3G network is generally a pay as you go system. On the other hand the fee system of the wireless LAN is generally a flat rate system. In some wireless LANs the communication fee is free.

When there are different communication speeds and different fee systems if the terminal device receives data through a network having a higher communication speed the time required to receive data is shortened. When the terminal device receives data through a network where the fee system is the flat rate system or the communication fee is free a communication fee according to the amount of received data is not charged to a user. In other words these networks are preferable for the user. When the terminal device can connect to a plurality of networks where the fee system is the pay as you go system it is preferable for the user that the terminal device receives data through a network where the communication fee charged per amount of data is lower.

However there is a case in which the terminal device cannot connect to a network preferable to the user depending on for example place time radio wave condition and the like. In this case the terminal device has to receive data through a network whose communication speed is lower or a network whose communication fee charged according to the amount of communication is higher.

Regarding the above problem Patent Literature 1 discloses a technique in which a wireless communication terminal determines whether the type of used communication service is the flat rate system or the pay as you go system and when the type is the pay as you go system the wireless communication terminal can select low quality image data from high quality image data which is image data with high resolution and low quality image data which is image data with low resolution and download the low quality image data. In other words in the technique described in Patent Literature 1 when the type of the communication service is the pay as you go system image data having a smaller amount of data is downloaded.

However in the technique disclosed in Patent Literature 1 image data used to display an image is selected according to the type of used communication service and the selected image data is downloaded. Therefore when the type of the used communication service is the pay as you go system low quality image data is downloaded even if high quality image data has been downloaded before. Thus an image with low resolution is displayed on the basis of the low quality image data. Even though the low quality image data is data having a smaller amount of data a communication fee based on the receiving amount of the low quality image data is charged to the user. When the terminal device receives low quality image data from a network with lower communication speed among a plurality of networks having communication speeds different from each other even though the low quality image data is data having a smaller amount of data the time required to receive data increases due to the low communication speed.

The present invention is made in view of the above points and an object of the present invention is to provide a terminal device a data receiving method a data receiving program and a recording medium in which in a terminal device which can connect to a plurality of networks whose communication speeds and or communication fees charged according to the amount of communication are different from each other and receives data of an amount of data according to a connected network it is possible to increase chances that data having a greater amount of data is used to output contents while reducing the amount of data received from a network whose communication speed is lower or a network whose communication fee charged according to the amount of communication is higher.

In order to achieve the above object an invention described in claim is a terminal device that receives data which is used to output contents through at least either one of a first network and a second network being at least either one of a network whose communication speed is lower than that of the first network and a network whose communication fee charged according to an amount of communication is higher than that of the first network the terminal device comprising a connection determination means that determines whether or not the terminal device is connected to the first network a first storage determination means that determines whether or not first data and second data are stored in a storage means an amount of data of the second data being smaller than that of the first data a receiving means that receives the first data through the first network when it is determined that the terminal device is connected to the first network and receives the second data through the second network when it is determined that the terminal device is not connected to the first network and the first data is not stored in the storage means a control means that stores data received by the receiving means in the storage means and an output means that outputs the contents based on the first data when it is determined that the first data is stored in the storage means and outputs the contents based on the second data when it is determined that only the second data is stored in the storage means.

According to this invention if the first data has already been stored even if the terminal device is not connected to the first network contents are outputted based on the stored first data. Therefore it is not necessary to receive the second data through the second network. Therefore it is possible to reduce the amount of data received from a network whose communication speed is lower or a network whose communication fee charged according to the amount of communication is higher. Also it is possible to increase chances that data with a greater amount of data is used to output contents.

An invention described in claim is the terminal device according to claim further comprising an identification information acquisition means that acquires identification information of either one of the first data and the second data the identification information being identification information by which a transmitting device identifies data which the transmitting device that transmits data is requested to transmit and a generation means that generates identification information of the other of the first data and the second data on the basis of the identification information acquired by the identification information acquisition means and a conversion rule between the first data and the second data wherein the first storage determination means determines whether or not data corresponding to the identification information acquired by the identification information acquisition means and data corresponding to the identification information generated by the generation means are stored in the storage means the receiving means transmits the identification information acquired by the identification information acquisition means or the identification information generated by the generation means to the transmitting device and thereby receives data identified by the transmitted identification information from the transmitting device and the control means stores the data received by the receiving means in the storage means in association with the identification information of the received data.

According to this invention when the identification information of either one of the first data and the second data is acquired the identification information of the other data can be acquired. Therefore it is possible to automatically acquire the identification information used to receive data as well as used to determine whether or not the data is stored.

An invention described in claim is the terminal device according to claim or further comprising a deletion means that deletes the second data corresponding to the first data stored in the storage means by the control means from the storage means.

According to this invention the second data which becomes unnecessary to output contents because the first data is stored is deleted from the storage means. Therefore it is possible to increase the free storage capacity.

An invention described in claim is the terminal device according to any one of claims to further comprising a second storage determination means that determines whether or not the first data corresponding to the second data stored in the storage means is stored in the storage means at a predetermined timing wherein the receiving means receives the first data determined not to be stored by the second storage determination means through the first network when the terminal device is connected to the first network.

According to this invention contents are outputted based on the second data because the terminal device is not connected to the first network and thereafter the first data is received and stored when the terminal device is connected to the first network. Therefore when the contents are outputted after that it is possible to output the contents based on the first data which is data having a greater amount of data. Since it is not necessary to receive the first data when the contents should be outputted it is possible to reduce the time required to output the contents.

An invention described in claim is the terminal device according to any one of claims to wherein when it is determined that the terminal device is connected to the first network and only the second data is stored the receiving means receives the first data through the first network and the output means outputs contents based on the second data stored in the storage means and thereafter outputs contents based on the first data received by the receiving means.

According to this invention it is possible to output the contents more quickly by using the stored second data and thereafter it is possible to output the contents based on the first data which is data having a greater amount of data.

An invention described in claim is the terminal device according to any one of claims to further comprising a disconnection determination means that determines whether or not a connection with the first network is disconnected wherein the output means outputs contents based on the second data when it is determined that the connection with the first network is disconnected while the receiving means is receiving the first data and it is determined that the second data is stored.

According to this invention it is possible to output the contents even when the first data cannot be received because the connection with the first network is disconnected.

An invention described in claim is the terminal device according to any one of claims to further comprising a load information acquisition means that acquires load information indicating a load of the first network when it is determined that the first data is not stored and the terminal device is connected to the first network and a load determination means that determines whether or not the load indicated by the load information is greater than or equal to a predetermined threshold value wherein when it is determined that the load is greater than or equal to the threshold value the receiving means receives the second data through the first network and thereafter receives the first data through the first network and the output means outputs contents based on the second data received by the receiving means and thereafter outputs contents based on the first data received by the receiving means.

According to this invention even when it takes time to receive the first data because the load of the first network is high it is possible to reduce the time required to output the contents and thereafter it is possible to output the contents based on the first data which is data having a greater amount of data.

An invention described in claim is the terminal device according to any one of claims to wherein quality of contents outputted based on the first data is higher than quality of contents outputted based on the second data.

An invention described in claim is a data receiving method by a terminal device that receives data which is used to output contents through at least either one of a first network and a second network being at least either one of a network whose communication speed is lower than that of the first network and a network whose communication fee charged according to an amount of communication is higher than that of the first network the data receiving method comprising a connection determination step of determining whether or not the terminal device is connected to the first network a first storage determination step of determining whether or not first data and second data are stored in a storage means an amount of data of the second data being smaller than that of the first data a receiving step of receiving the first data through the first network when it is determined that the terminal device is connected to the first network and receiving the second data through the second network when it is determined that the terminal device is not connected to the first network and the first data is not stored in the storage means a control step of storing data received in the receiving step in the storage means and an output step of outputting the contents based on the first data when it is determined that the first data is stored in the storage means and outputting the contents based on the second data when it is determined that only the second data is stored in the storage means.

An invention described in claim is a data receiving program that causes a computer which is included in a terminal device that receives data which is used to output contents through at least either one of a first network and a second network being at least either one of a network whose communication speed is lower than that of the first network and a network whose communication fee charged according to an amount of communication is higher than that of the first network to function as a connection determination means that determines whether or not the terminal device is connected to the first network a first storage determination means that determines whether or not first data and second data are stored in a storage means an amount of data of the second data being smaller than that of the first data a receiving means that receives the first data through the first network when it is determined that the terminal device is connected to the first network and receives the second data through the second network when it is determined that the terminal device is not connected to the first network and the first data is not stored in the storage means a control means that stores data received by the receiving means in the storage means and an output means that outputs the contents based on the first data when it is determined that the first data is stored in the storage means and outputs the contents based on the second data when it is determined that only the second data is stored in the storage means.

An invention described in claim is a recording medium in which a data receiving program is computer readably recorded the data receiving program causing a computer which is included in a terminal device that receives data which is used to output contents through at least either one of a first network and a second network being at least either one of a network whose communication speed is lower than that of the first network and a network whose communication fee charged according to an amount of communication is higher than that of the first network to function as a connection determination means that determines whether or not the terminal device is connected to the first network a first storage determination means that determines whether or not first data and second data are stored in a storage means an amount of data of the second data being smaller than that of the first data a receiving means that receives the first data through the first network when it is determined that the terminal device is connected to the first network and receives the second data through the second network when it is determined that the terminal device is not connected to the first network and the first data is not stored in the storage means a control means that stores data received by the receiving means in the storage means and an output means that outputs the contents based on the first data when it is determined that the first data is stored in the storage means and outputs the contents based on the second data when it is determined that only the second data is stored in the storage means.

According to the invention if the first data has already been stored even if the terminal device is not connected to the first network contents are outputted based on the stored first data. Therefore it is not necessary to receive the second data through the second network. Therefore it is possible to reduce the amount of data received from a network whose communication speed is lower or a network whose communication fee charged according to the amount of communication is higher. Also it is possible to increase chances that data with a greater amount of data is used to output contents.

Hereinafter embodiments of the present invention will be described in detail with reference to the drawings. The embodiments described below are embodiments where the present invention is applied to a download system.

First schematic configuration and function of a download system S according to the present embodiment will be described with reference to . is a diagram showing an example of a schematic configuration of the download system S according to the present embodiment.

As shown in the download system S is configured to include a Web server a plurality of mobile phones an access point and a wireless base station .

The Web server is a server device that delivers contents data to the mobile phone . The contents data is data for outputting displaying contents on a screen and outputting sound. Examples of the contents include an image a moving image sound characters a Web page an electronic document and an RIA Rich Internet Application . There may be a plurality of Web servers . The Web server is an example of a transmitting device of the present invention.

The Web server is connected to a network . The network a network to interconnect a plurality of networks. The network includes for example Internet exchanges and the like. A plurality of networks is interconnected so that the Internet is formed.

The access point is a communication device functioning as a base unit that wirelessly communicates with the mobile phone which is a handset of a wireless LAN. The wireless LAN is compliant with at least one of the following standards IEEE802.11b IEEE802.11a IEEE802.11g IEEE802.11n and the like. The access point is connected to the network through an access network a network of an ISP Internet Service Provider and the like. The mobile phone communicates with the access point so that the mobile phone connects to a wireless LAN . The wireless LAN includes the access point and the mobile phone . In the present embodiment the wireless LAN is described as a network compliant with a standard of wireless LAN. Although shows only one access point there is a plurality of access points in practice. The wireless LAN is formed for each access point . An example of a connection service to the wireless LAN is a public wireless LAN. Also there is a case in which a user of the mobile phone installs a purchased access point in his or her home. The wireless LAN is an example of a first network of the present invention.

The wireless base station wirelessly communicates with the mobile phone in a mobile communication system. The mobile communication system is for example a third generation mobile communication system compliant with IMT 2000 International Mobile Telecommunication 2000 or a second generation mobile communication system compliant with PDC Personal Digital Cellular GSM Global System for Mobile Communication or the like. The wireless base station is connected to the network through a core network of a mobile communication provider. The core network includes for example a packet switch and the like. Although shows only one wireless base station there is a plurality of wireless base stations in practice. The mobile phone communicates with the wireless base station so that the mobile phone connects to a mobile communication network . The mobile communication network includes a core network and a wireless access network. The wireless access network is a portion in which the wireless base station and the mobile phone wirelessly communicate with each other in the mobile communication network . The mobile communication network is an example of a second network of the present invention.

The mobile phone can connect to both networks the wireless LAN and the mobile communication network . The mobile phone may be for example a smart phone or a tablet computer. The mobile phone connects to the mobile communication network so that the mobile phone connects to the Web server through the mobile communication network and the network . The mobile phone connects to the wireless LAN so that the mobile phone connects to the Web server through the wireless LAN and the network . The mobile phone downloads receives contents data from the Web server through a connected network by using a communication protocol such as HTTP HyperText Transfer Protocol . For example the mobile phone displays contents or outputs sound on the basis of the downloaded contents data. The mobile phone is an example of a terminal device of the present invention.

By the way when comparing the wireless LAN and the mobile communication network generally the communication speed of packet communication in the wireless LAN is higher than the communication speed in the mobile communication network . For example the communication speed of IEEE802.11b is 22 Mbps. The communication speed of IEEE802.11a is 54 Mbps. The communication speed of IEEE802.11g is 54 Mbps. The communication speed of IEEE802.11n is 600 Mbps. On the other hand the communication speed of the mobile communication network is for example 7.2 Mbps. These communication speeds are maximum values of the standards or the specifications. The maximum value of the communication speed is an example of a communication speed of the present invention.

In a connection service of the wireless LAN such as the public wireless LAN the fee system of the packet communication is generally a flat rate system. For example a constant packet communication fee is charged to a user for each period regardless of the number of packets transmitted and received in a predetermined period. There is a case in which the packet communication fee is free. When connecting to the wireless LAN by using the access point owned by a user there is no fee system. The usage fee to connect from a user s home or the like where the access point is installed to the Internet is a flat rate system. On the other hand the fee system of the packet communication that uses the mobile communication network is a pay as you go system. For example the greater the number of packets transmitted and received in a predetermined period the higher the packet communication fee. The pay as you go system includes a case in which the upper limit of the packet communication fee is set and the packet communication fee does not exceed the upper limit. Also the pay as you go system includes a case in which a flat rate packet communication fee is charged unless the number of packets exceeds a certain number of packets and a packet communication fee according to the number of packets is charged when the number of packets exceeds the certain number of packets. In the wireless LAN where the fee system is the flat rate system or the packet communication fee is free the packet communication fee is not charged depending on the amount of communication. On the other hand in the mobile communication network where the fee system is the pay as you go system the packet communication fee is charged according to the amount of communication. Therefore in the mobile communication network the packet communication fee charged according to the amount of communication is higher than that of the wireless LAN .

In this situation when the mobile phone downloads contents data it is disadvantageous in both the communication speed and the communication fee for a user to connect to the mobile communication network compared with connecting to the wireless LAN . Therefore when the mobile phone downloads image data which is one of the contents data the mobile phone downloads different amounts of image data depending on whether the mobile phone is connected to the wireless LAN or the mobile communication network . Specifically the mobile phone downloads high quality image data when the mobile phone is connected to the wireless LAN . The mobile phone downloads low quality image data when the mobile phone is connected to the mobile communication network . The content of displayed image is the same between the high quality image data and the low quality image data. On the other hand the quality of the image displayed by the high quality image data is higher than the quality of the image displayed by the low quality image data. Therefore the amount of data of the high quality image data is greater than that of the low quality image data. For example the number of pixels the resolution of the image displayed by the high quality image data is greater than the number of pixels of the image displayed by the low quality image data. A factor that defines the image quality is not limited to the number of pixels. For example a bit length of color information assigned to one pixel lossy lossless compression of the image a compression ratio when the image is lossy compressed and the like may be different between the high quality image data and the low quality image data. The high quality image data is an example of first data of the present invention and the low quality image data is an example of second data of the present invention.

The mobile phone stores the downloaded high quality image data and low quality image data as a cache. When the mobile phone displays an image by the same high quality image data or low quality image data again the mobile phone displays the image based on the cache of the image data. Thereby the image data is not received so that the time elapsed until the image is displayed is further shortened and the packet communication fee is reduced when the mobile phone is connected to the mobile communication network .

The communication unit connects to the network and controls a communication state with the mobile phone and the like.

The storage unit includes for example a hard disk drive and the like. The storage unit stores various programs such as an operating system a WWW World Wide Web server program and the like.

Also the storage unit stores various contents data to be delivered to the mobile phones . In the storage unit each contents data is individually stored in a predetermined directory.

Also the storage unit stores the high quality image data and the low quality image data as image data. For example the high quality image data is generated as image data to display a certain image. Examples of a format of the generated image data include JPEG Joint Photographic Experts Group TIFF Tagged Image File Format and PNG Portable Network Graphics . Also the low quality image data is generated as image data to display an image having the same display content as that of the above image. For example the low quality image data is generated so that the number of pixels of the low quality image data is smaller than that of the high quality image data. When the mobile phone actually displays an image either one of the high quality image data and the low quality image data is used. The high quality image data or the low quality image data may be generated by the Web server or may be generated by a device other than the Web server and stored in the Web server .

The high quality image data and the low quality image data which have the same display content of the image are stored in association with each other. For example the high quality image data and the low quality image data are stored in the same directory. The file name of the high quality image data and the file name of the low quality image data can be interconverted into each other on the basis of a rule of giving a file name to the high quality image data and the low quality image data. For example it is assumed that in the rule of giving a file name to the low quality image data a file name obtained by adding  s to the file name of the high quality image data is defined to be the file name of the low quality image data. In this rule of giving a file name for example it is possible to generate a file name image01 s.jpeg of the low quality image data from a file name image01.jpeg of the high quality image data. On the other hand in this rule of giving a file name it is also possible to generate a file name image01.jpeg of the high quality image data from a file name image01 s.jpeg of the low quality image data. This rule of giving a file name is a conversion rule from a file name of the high quality image data to a file name of the low quality image data.

For example the domain name of the Web server is aaaaa.bbb.cc . The high quality image data with a file name of image01.jpeg and the low quality image data with a file name of image01 s.jpeg are stored in a directory with a directory name of dddd eeee . The dddd eeee indicates a relative path from a directory set as a storage position of contents. In this case the URL Uniform Resource Locator of the high quality image data is http aaaaa.bbb.cc dddd eeee image01.jpeg . The URL of the low quality image data is http aaaaa.bbb.cc dddd eeee image01 s.jpeg . In this way the URLs of the high quality image data and the low quality image data which have the same display content of the image are associated with each other. The Web server identifies data to be transmitted to the mobile phone by a URL included in an HTTP request hereinafter referred to as a request received from the mobile phone . The URL is an example of identification information of the present invention.

The high quality image data and the low quality image data may be stored in directories different from each other respectively. In this case the directory names can be interconverted on the basis of a conversion rule of the directory name. The high quality image data and the low quality image data may be respectively stored in Web servers whose domain names are different from each other. In other words there may be a Web server for delivering only the high quality image data and a Web server for delivering only the low quality image data. In this case the domain names can be interconverted on the basis of a conversion rule of the domain name. When the directory names or the domain names are different from each other between the high quality image data and the low quality image data the file names may be the same.

The conversion rule of the file name the conversion rule of the directory name and the conversion rule of the domain name are collectively referred to as a conversion rule of the URL . Information that indicates the conversion rule of the URL may be stored in the storage unit as conversion rule information. The Web server may transmit the conversion rule information to the mobile phone responding to a request from the mobile phone . On the basis of one of the URLs of the high quality image data and the low quality image data and the conversion rule information the mobile phone can generate the other URL.

A plurality of image data may be distributed to and stored in a plurality of Web servers as a unit of the high quality image data and the low quality image data in association with each other. In this case a rule of giving a URL may be different for each Web server .

The input output interface performs interface processing among the communication unit the storage unit and the system control unit .

The system control unit includes a CPU Central Processing Unit a ROM Read Only Memory a RAM Random Access Memory and the like. In the system control unit the CPU executes various programs stored in the storage unit and the ROM so that the system control unit controls each unit of the Web server .

As shown in the mobile phone includes a wireless LAN communication unit a mobile wireless communication unit a storage unit a display unit an operation unit a speaker a microphone an input output interface and a system control unit . The system control unit and the input output interface are connected through a system bus .

The wireless LAN communication unit connects to the wireless LAN and controls communication with the access point by transmitting and receiving radio waves to and from the access point through an antenna AT. Also the wireless LAN communication unit transmits packets outputted from the system control unit to the access point receives packets transmitted from the access point and outputs the packets to the system control unit . Thereby the system control unit transmits a request to the Web server through the wireless LAN and receives contents from the Web server through the wireless LAN .

The mobile wireless communication unit connects to the mobile communication network and controls communication with the wireless base station by transmitting and receiving radio waves to and from the wireless base station through an antenna AT. Also the mobile wireless communication unit transmits packets outputted from the system control unit to the wireless base station receives packets transmitted from the wireless base station and outputs the packets to the system control unit . Thereby the system control unit transmits a request to the Web server through the mobile communication network and receives contents from the Web server through the mobile communication network .

When the mobile phone can connect to both the wireless LAN and the mobile communication network the mobile phone is preferentially connected to the wireless LAN by the control of the system control unit . In other words the mobile phone does not connect to both the wireless LAN and the mobile communication network at the same time. The system control unit stores connection information indicating a current connection state and the like of the network into the RAM . When the system control unit wants to refer to the connection state of the network from an application program the system control unit calls an API Application Programming Interface provided by for example an operating system. As the connection state of the network there are a state of connecting with the wireless LAN communication unit a state of connecting with the mobile communication network and a state of not connecting with networks.

The storage unit an example of a storage means of the present invention includes for example a flash memory and the like. The storage unit stores the operating system. The storage unit also stores various application programs. Here the storage unit stores a download application. The download application is an application program for downloading data such as for example contents searched for by an instruction of a user contents selected by the user and contents determined by the system control unit according to an operation of the user from the Web server and displaying contents on the basis of the downloaded data. The data to be downloaded includes the high quality image data the low quality image data and the like.

The storage unit stores the high quality image data and the low quality image data which are downloaded when the system control unit executes the download application as a cache. Specifically the high quality image data and the low quality image data are stored in association with a URL of each image data.

The display unit includes for example a liquid crystal display and displays information such as characters and images.

The operation unit includes for example buttons and a touch panel receives an operation instruction from a user and outputs content of the instruction to the system control unit as an instruction signal.

The input output interface performs interface processing between components from the wireless LAN communication unit to the microphone and the system control unit .

The system control unit includes a CPU a ROM a RAM and the like. In the system control unit the CPU reads and executes a program such as the download application stored in the storage unit so that the system control unit functions as a connection determination means a first storage determination means a receiving means an output means a control means an identification information acquisition means a generation means a deletion means a second storage determination means a disconnection determination means a load information acquisition means and a load determination means of the present invention.

Specifically the system control unit acquires the URL of either one of the high quality image data and the low quality image data of an image to be displayed on the display unit . In the present embodiment the URL of the high quality image data is assumed to be acquired. For example it is assumed that the download application is a program for searching for certain contents. In this case for example the system control unit transmits a request to the Web server so that the Web server searches for contents by a search condition inputted by a user. Accordingly the Web server searches for the contents and transmits for example search list information that indicates a list of retrieved contents to the mobile phone . URLs of data of the retrieved contents are described in the search list information. The system control unit displays a list of the retrieved contents on the display unit on the basis of the search list information. Here when the user selects an image from the displayed list the system control unit acquires the URL of the high quality image data of the selected image from the search list information. Or for example it is assumed that a certain Web page is displayed by the download application. In this case the system control unit downloads an HTML document from the Web server . Next the system control unit displays a Web page on the display unit on the basis of the downloaded HTML document. At this time when an img tag is described in the HTML document the system control unit acquires the URL of the high quality image data from a src attribute of the img tag.

When the system control unit acquires the URL of the high quality image data the system control unit generates the URL of the low quality image data on the basis of the URL of the high quality image data and the conversion rule of the URL. These URLs are used when determining a storage state of the cache and transmitting a request of image data. The conversion rule of the URL may be defined in the download application in advance. Or the system control unit may acquire the conversion rule of the URL by receiving the conversion rule information from the Web server .

The system control unit determines a storage state of the cache of the high quality image data and a storage state of the cache of the low quality image data. The system control unit also determines connection states between the mobile phone and the wireless LAN and between the mobile phone and the mobile communication network . The storage states of the caches and the connection states may be determined at different times or at the same time.

On the basis of the determination result of the storage states of the caches and the determination result of the connection states of the networks the system control unit determines whether the high quality image data or the low quality image data is used as image data used to display an image. Further on the basis of these determination results the system control unit determines whether the image data used to display an image is acquired from the storage unit downloaded through the wireless LAN or downloaded through the mobile communication network . The system control unit displays an image on the display unit on the basis of the cache of the image data or the downloaded image data.

Specifically the system control unit uses the cache of the high quality image data to display an image when the cache of the high quality image data is stored in the storage unit . Since the image data with higher image quality between the high quality image data and the low quality image data has already been stored the system control unit can quickly display a high quality image without downloading the image and without increasing the packet communication fee.

Even when the mobile phone is connected to the mobile communication network the cache of the high quality image data is used to display an image. Such a process can be performed by converting the URL. Specifically when the mobile phone is connected to the mobile communication network it is determined that the low quality image data is downloaded. Therefore in a conventional application program a mobile phone acquires a URL of the low quality image data that is data to be downloaded. Then the mobile phone determines whether or not the cache of data corresponding to the acquired URL is stored. At this time in the conventional application program even when the mobile phone has downloaded the high quality image data and stored it as a cache before the mobile phone cannot display an image by using the cache of the high quality image data. The reason of this is because the cache of data is searched for by the URL of the data that should be downloaded. The URL acquired by the mobile phone is the URL of the low quality image data and the URL of the low quality image data and the URL of the high quality image data are different from each other. Therefore conventionally when the cache of the low quality image data is not stored even if the cache of the high quality image data is stored the mobile phone cannot help but download the low quality image data. On the other hand the system control unit uses the cache of the high quality image data to display an image so that it is possible to increase chances that the image with a higher image quality is displayed.

Next when the cache of the high quality image data is not stored and the mobile phone is connected to the wireless LAN the system control unit downloads the high quality image data through the wireless LAN . Then the system control unit uses the downloaded high quality image data to display an image. The communication speed of the wireless LAN is faster than that of the mobile communication network and the fee system thereof is the flat rate system or the packet communication fee thereof is free. Therefore the system control unit can download the high quality image data in a shorter time than when downloading the high quality image data through the mobile communication network . Further the system control unit can download the high quality image data without increasing the packet communication fee.

Here the system control unit may acquire information indicating the degree of load of the wireless LAN and when the degree of load of the wireless LAN is greater than or equal to a predetermined threshold value the system control unit may download the low quality image data instead of the high quality image data through the wireless LAN . The system control unit may display an image on the basis of the downloaded low quality image data. When the load of the wireless LAN is high it takes a long time to download the high quality image data. Therefore the system control unit downloads the low quality image data whose amount of data is small so that the time required for the download decreases. Thereby the system control unit can display an image in a short time.

As a factor to increase the load of the wireless LAN for example there is a case in which some data is downloaded through the wireless LAN by an application program or the like other than the download application. In this case the bandwidth of the wireless LAN which can be used to download image data in the download application is decreased by the download by the other application program or the like. Also for example there is a case in which the load of the access point increases and transmission process of image data by the access point is delayed.

As information indicating the degree of load of the wireless LAN there are various examples of information that can be acquired by the system control unit . For example the system control unit may download some data through the wireless LAN before downloading the high quality image data and measure the amount of data downloaded per unit time hereinafter referred to as download speed . For example the download speed is calculated by the formula below.

Download speed total number of downloaded packets size of packet time required to download the packets

Here it is indicated that the lower the download speed the smaller the bandwidth that can be used to download for example the image data in the download application. Here as a threshold value of the degree of load a threshold speed is set in advance. When the system control unit determines that the measured download speed is smaller than or equal to the threshold speed the degree of load of the wireless LAN is greater than or equal to the threshold value so that the system control unit downloads the low quality image data through the wireless LAN .

An example of data by which the download speed is measured is an HTML document. The reason of this is because when the system control unit displays a Web page including an image on the display unit the system control unit downloads an HTML document of the Web page before downloading image data of the image.

When the system control unit continuously downloads a plurality of image data the system control unit may measure the download speed of each image data. In this case the system control unit downloads the first high quality image data and measures the download speed of the first high quality image data and then the system control unit determines whether the second image data to be downloaded is the high quality image data or the low quality image data on the basis of the measured download speed. Thereafter the system control unit determines whether the image data to be downloaded next time is the high quality image data or the low quality image data on the basis of the download speed of the image data downloaded just before. The system control unit may perform the above determination not only when continuously downloading a plurality of image data but also when downloading each image data in an interval of some time.

An example of the information indicating the degree of load of the wireless LAN is a time required from when the system control unit transmits a request of the high quality image data through the wireless LAN to when the system control unit begins to receive a response to the request hereinafter referred to as response time . In this case the longer the response time the higher the load of the wireless LAN . Here as a threshold value of the degree of load a threshold time is set in advance. The system control unit transmits the request of the high quality image data and measures the response time and when the system control unit determines that the measured response time is longer than or equal to the threshold time the degree of load of the wireless LAN is greater than or equal to the threshold value so that the system control unit downloads the low quality image data through the wireless LAN . In this case the system control unit cancels the download of the high quality image data.

When the cache of the low quality image data is stored for example the system control unit may display an image based on the cache of the low quality image data before the high quality image data is downloaded. After the high quality image data is downloaded the system control unit may display an image based on the high quality image data. In other words the system control unit may display a lower quality image and thereafter display a higher quality image. At this time the system control unit replaces the lower quality image displayed based on the cache of the low quality image data with the higher quality image. Thereby it is possible to display the image more quickly. Specifically for example the system control unit displays an image based on the low quality image data before transmitting the request of the high quality image data or immediately after transmitting the request of the high quality image data.

When the connection with the wireless LAN is disconnected while the system control unit is downloading the high quality image data the system control unit may display an image based on the cache of the low quality image data. Thereby even when the download of the high quality image data is failed the system control unit can display the image.

Next when only the low quality image data of the high and low quality image data is stored and when the mobile phone is not connected to the wireless LAN that is when the mobile phone is connected to only the mobile communication network and is not connected to the wireless LAN the system control unit uses the cache of the low quality image data to display an image. In this way the system control unit can quickly display an image without downloading image data and without increasing the packet communication fee.

Next when the high quality image data and the low quality image data are not stored and the mobile phone is connected to the mobile communication network the system control unit downloads the low quality image data through the mobile communication network . Then the system control unit uses the downloaded low quality image data to display an image. The amount of data of the low quality image data is smaller than that of the high quality image data. Therefore the system control unit can complete the download in a shorter time than when downloading the high quality image data. Further the charged amount of the packet communication fee is smaller than when downloading the high quality image data.

When the system control unit downloads the high quality image data or the low quality image data the system control unit stores the downloaded image data in the storage unit as a cache. Here when the system control unit stores the cache of the high quality image data in the storage unit if the cache of the low quality image data associated with the high quality image data is stored in the storage unit the system control unit deletes the cache of the low quality image data from the storage unit . When the cache of the high quality image data is stored it is possible to display a high quality image based on the cache of the high quality image data. Therefore the low quality image data is not needed. Therefore the unnecessary low quality image data is deleted from the storage unit so that it is possible to increase the free storage capacity of the storage unit .

Since the mobile phone is not connected to the wireless LAN the system control unit cannot download the high quality image data. Therefore when the system control unit displays an image by the low quality image data after the mobile phone is connected to the wireless LAN the system control unit downloads the high quality image data. The system control unit stores the downloaded high quality image data in the storage unit as a cache. Such a process is referred to as a high quality image data collection process. An image that has been displayed is more probably redisplayed than an image that has not been displayed so that the cache of image data that is used to display an image is stored. Here when the system control unit redisplays an image whose display content is the same as that of an image displayed by using the low quality image data if the mobile phone is connected to the wireless LAN the system control unit downloads the high quality image data and displays an image. However if the cache of the high quality image data has already been stored the system control unit need not download the high quality image data. Therefore it is possible to display an image in a short time because download is not performed when the image is displayed.

The image data download process is performed every time the system control unit acquires the URL of the high quality image data of an image to be displayed on the display unit while executing the download application. First the system control unit generates a URL of the low quality image data based on the acquired URL of the high quality image data step S . Specifically the system control unit generates a copy of the URL of the high quality image data. Next as the generation means the system control unit converts the copy of the URL of the high quality image data into a URL of the low quality image data on the basis of the conversion rule of the URL.

Next as the first storage determination means the system control unit determines whether or not the cache of the high quality image data is stored in the storage unit step S . Specifically the system control unit searches for the cache of the high quality image data from the storage unit by the acquired URL of the high quality image data. The system control unit determines whether or not the cache of the high quality image data is retrieved. In other words the system control unit determines whether or not the high quality image data associated with the acquired URL is stored in the storage unit .

At this time if the system control unit determines that the cache of the high quality image data is stored step S YES the system control unit acquires the cache of the high quality image data from the storage unit step S . In other words the system control unit acquires the high quality image data associated with the acquired URL from the storage unit . Next as the output means the system control unit displays an image on the display unit on the basis of the acquired high quality image data step S . Since a method of displaying an image on the basis of image data is known the detailed description will be omitted. When the system control unit completes the process of step S the system control unit ends the image data download process.

In step S if the system control unit determines that the cache of the high quality image data is not stored step S NO the system control unit acquires the connection state of the network step S . For example the system control unit calls an API for acquiring the connection state. Next as the connection determination means the system control unit determines whether or not the mobile phone is currently connected to the wireless LAN on the basis of the connection state of the network step S .

At this time if the system control unit determines that the mobile phone is connected to the wireless LAN step S YES the system control unit performs a high quality image data download process step S . In the high quality image data download process the high quality image data is downloaded through the wireless LAN . An image is displayed on the basis of the downloaded high quality image data. The details of the high quality image data download process will be described later. When the system control unit completes the process of step S the system control unit ends the image data download process.

In step S if the system control unit determines that the mobile phone is not connected to the wireless LAN step S NO as the first storage determination means the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . Specifically the system control unit searches for the cache of the low quality image data from the storage unit by the generated URL of the low quality image data. The system control unit determines whether or not the cache of the low quality image data is retrieved. In other words the system control unit determines whether or not the low quality image data associated with the generated URL is stored in the storage unit .

At this time if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit acquires the cache of the low quality image data from the storage unit step S . In other words the system control unit acquires the low quality image data associated with the generated URL from the storage unit . Next as the output means the system control unit displays an image on the display unit on the basis of the acquired low quality image data step S . When the system control unit completes the process of step S the system control unit ends the image data download process.

In step S if the system control unit determines that the cache of the low quality image data is not stored step S NO the system control unit determines whether or not the mobile phone is currently connected to the mobile communication network on the basis of the connection state of the network step S .

At this time if the system control unit determines that the mobile phone is connected to the mobile communication network step S YES the system control unit downloads the low quality image data through the mobile communication network . Specifically the system control unit transmits a request including the generated URL of the low quality image data through the mobile wireless communication unit step S . When the Web server receives the request the Web server acquires the low quality image data corresponding to the URL included in the request from the storage unit . Then the Web server transmits the acquired low quality image data. As the receiving means the system control unit downloads the low quality image data transmitted from the Web server through the mobile wireless communication unit step S . Next as the control means the system control unit stores the downloaded low quality image data in the storage unit as a cache in association with the generated URL of the low quality image data step S . Next the system control unit displays an image on the display unit on the basis of the downloaded low quality image data step S . When the system control unit completes the process of step S the system control unit ends the image data download process.

In step S if the system control unit determines that the mobile phone is not connected to the mobile communication network step S NO the system control unit displays an error message on the display unit step S . This is because the cache of the image data of the image to be displayed is not stored and the image data cannot be downloaded. When the system control unit completes the process of step S the system control unit ends the image data download process.

In the example 1 when the cache of the low quality image data is stored first an image is displayed on the basis of the low quality image data. When the download of the high quality image data is completed an image is displayed on the basis of the high quality image data.

First the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . At this time if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit acquires the cache of the low quality image data from the storage unit step S . Next the system control unit displays an image on the display unit on the basis of the acquired low quality image data step S . Specific content of the process of steps S to S is the same as that of steps S to S in the image data download process.

When the system control unit determines that the cache of the low quality image data is not stored step S NO or when the system control unit completes the process of step S as the load information acquisition means the system control unit acquires the information indicating the degree of load of the wireless LAN step S . In the description below as the information indicating the degree of load the download speed is used. In this case the system control unit acquires the download speed of data downloaded just before. For example the latest measured download speed is stored in a predetermined area in the RAM . Therefore the system control unit acquires the download speed from the RAM

Next as the load determination means the system control unit determines whether or not the degree of load indicated by the acquired information is greater than or equal to the threshold value stored in the storage unit step S . At this time if the system control unit determines that the acquired download speed is not smaller than or equal to the threshold speed that is if the system control unit determines that the degree of load is not greater than or equal to the threshold value step S NO the system control unit downloads the high quality image data through the wireless LAN . Specifically the system control unit transmits a request including the acquired URL of the high quality image data through the wireless LAN communication unit step S . As the receiving means the system control unit downloads the high quality image data transmitted from the Web server through the wireless LAN communication unit step S . If the download speed of the high quality image data is used in the determination in step S the system control unit measures the download speed at this time. The system control unit stores the measured download speed in the RAM

Next as the control means the system control unit stores the downloaded high quality image data in the storage unit as a cache in association with the acquired URL of the high quality image data step S . Next as the output means the system control unit displays an image on the display unit on the basis of the downloaded high quality image data step S . At this time the system control unit displays a new image over the image displayed based on the low quality image data. In other words the system control unit replaces the lower quality image displayed on the screen with the higher quality image.

Next as the deletion means the system control unit deletes the cache of the low quality image data from the storage unit step S . Specifically the system control unit determines whether or not the low quality image data associated with the generated URL is stored in the storage unit . If the low quality image data is stored in the storage unit the system control unit deletes the low quality image data. When the system control unit completes the process of step S the system control unit ends the high quality image data download process.

In step S if the system control unit determines that the acquired download speed is smaller than or equal to the threshold speed that is if the system control unit determines that the degree of load is greater than or equal to the threshold value step S YES the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . This determination method is the same as that of step S in the image data download process.

At this time if the system control unit determines that the cache of the low quality image data is not stored step S NO the system control unit downloads the low quality image data through the wireless LAN . Specifically the system control unit transmits a request including the generated URL of the low quality image data through the wireless LAN communication unit step S . Then the system control unit downloads the low quality image data transmitted from the Web server through the wireless LAN communication unit step S . Next the system control unit stores the downloaded low quality image data in the storage unit as a cache in association with the generated URL of the low quality image data step S . Next the system control unit displays an image on the display unit on the basis of the downloaded low quality image data step S . When the system control unit completes the process of step S the system control unit ends the high quality image data download process.

In step S if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit ends the high quality image data download process. In this case in step S an image is displayed on the basis of the cache of the low quality image data.

In the example 2 when the connection with the wireless LAN is disconnected while the high quality image data is being downloaded if the cache of the low quality image data is stored an image is displayed on the basis of the low quality image data.

First the system control unit acquires information indicating the degree of load of the wireless LAN step S and determines whether or not the degree of load is greater than or equal to the threshold value step S . At this time if the system control unit determines that the degree of load is greater than or equal to the threshold value step S YES the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S .

At this time if the system control unit determines that the cache of the low quality image data is not stored step S NO the system control unit performs the processes from step S to step S and ends the high quality image data download process. On the other hand if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit acquires the cache of the low quality image data from the storage unit step S and displays an image on the display unit on the basis of the acquired low quality image data step S . When the system control unit completes the process of step S the system control unit ends the high quality image data download process.

In step S if the system control unit determines that the degree of load is not greater than or equal to the threshold value step S NO the system control unit downloads the high quality image data through the wireless LAN . Specifically the system control unit transmits a request including the acquired URL of the high quality image data through the wireless LAN communication unit step S .

Then the system control unit downloads the high quality image data transmitted from the Web server through the wireless LAN communication unit . Steps S to S show in detail the content of the process to download the high quality image data.

First the system control unit acquires the connection state of the network step S . Next as the disconnection determination means the system control unit determines whether or not the connection with the wireless LAN is disconnected on the basis of the connection state of the network step S . When the connection state of the network indicates the state of connecting with the mobile communication network or the state of not connecting with networks the connection with the wireless LAN is disconnected.

At this time if the system control unit determines that the connection with the wireless LAN is not disconnected step S NO the system control unit determines whether or not a packet of response including the high quality image data is received from the Web server through the wireless LAN communication unit step S . At this time if the system control unit determines that the packet of response is not received step S NO the system control unit proceeds to step S. On the other hand if the system control unit determines that the packet of response is received step S YES the system control unit stores the received packet in a buffer step S . The buffer is provided in a storage area in the RAM to temporarily accumulate the received packet.

First the system control unit determines whether or not all packets that form a response including the high quality image data are received step S . At this time if the system control unit determines that there is a packet that has not yet been received step S NO the system control unit proceeds to step S. The system control unit repeats the processes from step S to step S so that the system control unit stores the packets transmitted from the Web server in the buffer and reconstructs the response including the high quality image data. When the system control unit determines that all the packets are received step S YES the system control unit associates the high quality image data included in the response stored in the buffer with the acquired URL of the high quality image data and stores the high quality image data in the storage unit as a cache step S . Next the system control unit displays an image on the display unit on the basis of the high quality image data stored from the buffer into the storage unit step S . Next the system control unit deletes the cache of the low quality image data from the storage unit step S . When the system control unit completes the process of step S the system control unit ends the high quality image data download process.

In step S if the system control unit determines that the connection with the wireless LAN is disconnected step S YES the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . This determination method is the same as that of step S in the image data download process. At this time if the system control unit determines that the cache of the low quality image data is stored in the storage unit step S YES the system control unit acquires the cache of the low quality image data from the storage unit step S and displays an image on the display unit on the basis of the acquired low quality image data step S .

On the other hand if the system control unit determines that the cache of the low quality image data is not stored in the storage unit step S NO the system control unit displays an error message on the display unit step S . When the cache of the low quality image data is not stored the system control unit may download the low quality image data through the wireless LAN and display an image based on the downloaded low quality image data step S to step S . When the system control unit completes the process of step S or step S the system control unit ends the high quality image data download process.

The high quality image data collection process is performed at a predetermined timing while the mobile phone is connected to the wireless LAN . The timing at which the high quality image data collection process is performed is determined by for example the download application. For example when the mobile phone is connected to the wireless LAN the system control unit may call the download application by interrupt handling. The system control unit may perform the high quality image data collection process when the download application is invoked. Also for example when the system control unit activates the download application the system control unit may determine whether or not the mobile phone is connected to the wireless LAN . When the system control unit determines that the mobile phone is connected to the wireless LAN the system control unit may perform the high quality image data collection process. For example even after the screen of the download application is closed by an operation of a user the process of the download application may be resident as a background process. The system control unit regularly determines whether or not the mobile phone is connected to the wireless LAN in the background process and when the system control unit determines that the mobile phone is connected to the wireless LAN the system control unit may perform the high quality image data collection process.

In the high quality image data collection process the system control unit enumerates the caches of the low quality image data stored in the storage unit . Then the system control unit generates a list of URLs associated with the enumerated low quality image data. Next the system control unit acquires one URL from the generated list step S . Next the system control unit generates a URL of the high quality image data based on the acquired URL of the low quality image data step S . Specifically the system control unit generates a copy of the URL of the low quality image data. Next the system control unit converts the copy of the URL of the low quality image data into a URL of the high quality image data on the basis of the conversion rule of the URL.

Next as the second storage determination means the system control unit determines whether or not the cache of the high quality image data associated with the generated URL is stored in the storage unit step S . At this time if the system control unit determines that the cache of the high quality image data is not stored step S NO the system control unit transmits a request including the acquired URL of the high quality image data through the wireless LAN communication unit step S . As the receiving means the system control unit downloads the high quality image data through the wireless LAN communication unit step S . Next the system control unit stores the downloaded high quality image data in the storage unit as a cache step S . Next the system control unit deletes the cache of the low quality image data from the storage unit step S . These processes are the same as the processes of the steps S to S in the high quality image data download process.

In step S if the system control unit determines that the cache of the high quality image data is stored step S YES the system control unit deletes the cache of the low quality image data from the storage unit step S .

When the system control unit completes the process of step S the system control unit determines whether or not there are URLs that have not yet been acquired from the list step S . At this time if the system control unit determines that there are one or more URLs that have not yet been acquired step S YES the system control unit acquires one of the URLs that have not yet been acquired from the list step S . Next the system control unit proceeds to step S. The system control unit repeats the processes from step S to step S so that the system control unit downloads the high quality image data that are not stored as a cache from among the high quality image data associated with the caches of the low quality image data stored in the storage unit . If the system control unit determines that there is no URL that has not yet been acquired from the list step S NO the system control unit ends the high quality image data collection process.

Before the mobile phone is connected to the wireless LAN the system control unit may enumerate in advance the high quality image data that are not stored as a cache from among the high quality image data associated with the caches of the low quality image data stored in the storage unit . After the mobile phone is connected to the wireless LAN the system control unit may download the image data that have been enumerated in advance.

As described above according to the present embodiment the system control unit determines whether or not the high quality image data is stored in the storage unit whether or not the low quality image data is stored in the storage unit and whether or not the mobile phone is connected to the wireless LAN and when it is determined that the mobile phone is connected to the wireless LAN the system control unit downloads the high quality image data through the wireless LAN when the mobile phone is not connected to the wireless LAN and the high quality image data is not stored in the storage unit the system control unit downloads the low quality image data through the mobile communication network and stores the downloaded image data in the storage unit when the high quality image data is stored in the storage unit the system control unit displays an image on the basis of the stored high quality image data and when only the low quality image data is stored in the storage unit the system control unit displays an image on the basis of the stored low quality image data.

Therefore when the high quality image data has already been stored even if the mobile phone is not connected to the wireless LAN an image is displayed on the basis of the stored high quality image data. Therefore it is not necessary to receive the low quality image data through the mobile communication network . Therefore it is possible to reduce the amount of data received from the mobile communication network . Also it is possible to increase the chances that a higher quality image is displayed by the high quality image data.

The system control unit acquires the URL of the high quality image data of an image to be displayed and generates the URL of the low quality image data on the basis of the acquired URL and the conversion rule of the URL.

Therefore it is possible to automatically acquire the URL which is used to download the high quality image data and the low quality image data as well as used to determine whether the high quality image data and the low quality image data are stored.

The system control unit deletes the low quality image data associated with the high quality image data stored in the storage unit .

Therefore the unnecessary low quality image data is deleted from the storage unit so that it is possible to increase the free storage capacity.

The system control unit determines whether or not the high quality image data associated with the low quality image data stored in the storage unit is stored in the storage unit at a predetermined timing downloads the high quality image data that is determined not to be stored through the wireless LAN when the mobile phone is connected to the wireless LAN and stores the downloaded high quality image data in the storage unit .

Therefore when an image is redisplayed after the image is displayed on the basis of the low quality image data because the mobile phone is not connected to the wireless LAN it is possible to display the image on the basis of the high quality image data that is data having a greater amount of data. Since it is not necessary to download the high quality image data when the image should be displayed it is possible to reduce the time required to display the image.

When the system control unit determines that the mobile phone is connected to the wireless LAN and further determines that only the low quality image data is stored the system control unit displays an image on the basis of the low quality image data stored in the storage unit before downloading the high quality image data downloads the high quality image data through the wireless LAN and displays an image on the basis of the downloaded high quality image data.

Therefore it is possible to more quickly display the image and thereafter the higher quality image can be displayed.

The system control unit determines whether or not the connection with the wireless LAN is disconnected and when the connection with the wireless LAN is determined to be disconnected while the high quality image data is being received and the low quality image data is determined to be stored the system control unit displays an image on the basis of the low quality image data stored in the storage unit .

Therefore even when the high quality image data cannot be downloaded because the connection with the wireless LAN is disconnected the image can be displayed.

When the system control unit determines that the mobile phone is connected to the wireless LAN and further determines that the high quality image data is not stored the system control unit acquires information indicating the degree of load of the wireless LAN and determines whether or not the degree of load is greater than or equal to the threshold value and when the degree of load is determined to be greater than or equal to the threshold value the system control unit downloads the low quality image data through the wireless LAN and displays an image based on the downloaded low quality image data.

Therefore even when it takes time to download the high quality image data because the load of the wireless LAN is high it is possible to reduce the time required to display the image.

Here when the system control unit determines that the degree of load of the wireless LAN is greater than or equal to the threshold value the system control unit may download the high quality image data through the wireless LAN after completing the download of the low quality image data through the wireless LAN . The system control unit first may display an image on the basis of the downloaded low quality image data and then display an image on the basis of the downloaded high quality image data. In other words while downloading the high quality image data the system control unit displays the lower quality image. When the download of the high quality image data is completed the system control unit replaces the displayed lower quality image with the higher quality image. In this case even when it takes time to download the high quality image data it is possible to quickly display the image and thereafter the higher quality image can be displayed.

In the present embodiment the mobile phone connects to either one of the wireless LAN and the mobile communication network at one time point. However the mobile phone may connect to both the wireless LAN and the mobile communication network at the same time. In this case when the mobile phone is connected to both the wireless LAN and the mobile communication network the system control unit determines that the mobile phone is connected to the wireless LAN . In other words the system control unit prioritizes downloading the high quality image data through the wireless LAN over downloading the low quality image data through the mobile communication network .

In the present embodiment the system control unit determines whether or not the mobile phone is connected to the wireless LAN and whether or not the mobile phone is connected to the mobile communication network . However the system control unit need not determine whether or not the mobile phone is connected to the mobile communication network in the download application. When any of the cache of the high quality image data and the cache of the low quality image data is not stored in the storage unit and the mobile phone is not connected to the wireless LAN the system control unit needs to download the low quality image data through the mobile communication network . At this time when the mobile phone is not connected to the mobile communication network the system control unit cannot download the low quality image data regardless of whether or not the system control unit determines whether or not the mobile phone is connected to the mobile communication network . In other words regardless of whether or not the system control unit performs the determination the processing result after that does not change. However the time required to display an error message may change. In case where the mobile phone is not connected to the mobile communication network for example when the system control unit tries to transmit a request and detects that the transmission is failed or when the system control unit does not receive a response from the Web server even after a certain time has elapsed from the transmission of the request the system control unit displays an error message.

In the description of the first embodiment the communication speed of the wireless LAN is higher than that of the mobile communication network . Also in the description of the first embodiment the fee system of the wireless LAN is the flat rate system or the packet communication fee is free and the fee system of the mobile communication network is the pay as you go system. However in practice the communication speed of the wireless LAN may be lower than that of the mobile communication network . For example the communication speed of the mobile communication network may be increased due to specification change or the like. Or for example the communication speed may be limited by the access point . For example there may be a case in which the link speed is lower than the maximum value of the communication speed of the specification depending on the communication state between the access point and the mobile phone even when using the same access point . The link speed is the maximum communication speed when the access point and the mobile phone actually communicate with each other. There is a case in which the user can select the pay as you go system as the fee system of the wireless LAN and the user can select the flat rate system as the fee system of the mobile communication network .

Therefore in the second embodiment the mobile phone does not perform processing based on whether the connected network is the wireless LAN or the mobile communication network . The mobile phone determines whether the communication speed of the connected network is high speed or low speed and further determines whether the fee system of the connected network is the flat rate system the pay as you go system or free.

Specifically the system control unit determines whether or not the communication speed is the high speed on the basis of a predetermined reference speed. Specifically when the system control unit determines that the communication speed of the connected network is higher than or equal to the reference speed the system control unit determines that the communication speed is the high speed. On the other hand when the system control unit determines that the communication speed of the connected network is lower than the reference speed the system control unit determines that the communication speed is the low speed. The reference speed may be set in the download application in advance. Or the reference speed may be set by the user and stored in the storage unit .

The communication speed of the network may be stored in for example the storage unit in advance. For example the communication speed of the mobile communication network is stored in the storage unit . The communication speed of the wireless LAN is stored in the storage unit for each SSID Service Set Identifier of the access point . For example when the mobile phone connects to the wireless LAN the access point transmits the set link speed to the mobile phone . Therefore the system control unit may store connection information into the RAM . The connection information includes the link speed of the connected wireless LAN the SSID of the access point of the connected wireless LAN and the connection state of the network.

For example information indicating the fee system of the network may be stored in the storage unit in advance as fee system information. For example the fee system information of the mobile communication network is stored and the fee system information of the wireless LAN is stored for each SSID. The fee system information indicates one of the flat rate system the pay as you go system and free.

The system control unit performs processing based on the determination result of the communication speed and the fee system of the connected network.

Specifically the system control unit uses the cache of the high quality image data to display an image when the cache of the high quality image data is stored in the storage unit . This is the same as in the first embodiment.

Next when the cache of the high quality image data is not stored and the fee system of the connected network is the pay as you go system the system control unit uses the low quality image data to display an image. This process is performed even when the communication speed of the connected network is the high speed. This is because even if the time required to download the high quality image data is shortened by using a network whose communication speed is high the amount of data is large and the packet communication fee of the data is charged to the user. Here when the cache of the low quality image data is stored the system control unit uses the cache of the low quality image data to display an image and when the cache of the low quality image data is not stored the system control unit downloads the low quality image data used to display an image.

Next when the cache of the high quality image data is not stored the fee system of the connected network is the flat rate system and the communication speed of the connected network is the low speed the system control unit uses the low quality image data to display an image. This is because if the high quality image data is downloaded the time required for the download increases even though no packet communication fee is charged.

Next when the cache of the high quality image data is not stored the fee system of the connected network is the flat rate system and the communication speed of the connected network is the high speed the system control unit downloads the high quality image data. Then the system control unit uses the downloaded high quality image data to display an image.

In the present embodiment a network where the communication speed is the high speed and the fee system is the flat rate system or the communication fee is free is an example of the first network of the present invention. A network where the communication speed is the low speed or the fee system is the pay as you go system is an example of the second network of the present invention.

In the same manner as in the first embodiment the system control unit performs the processes of steps S to S. When the system control unit completes the process of step S the system control unit determines whether or not the mobile phone is currently connected to the wireless LAN or the mobile communication network on the basis of the connection state of the network step S . At this time if the system control unit determines that the mobile phone is not connected to any network step S NO the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . At this time if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit displays an image based on the cache of the low quality image data step S and step S and ends the image data download process. On the other hand if the system control unit determines that the cache of the low quality image data is not stored step S NO the system control unit displays an error message step S and ends the image data download process.

In step S if the system control unit determines that the mobile phone is connected to any of the networks step S YES the system control unit acquires the fee system information of the connected network. Then the system control unit determines whether or not the fee system of the connected network is the pay as you go system on the basis of the fee system information step S . At this time if the system control unit determines that the fee system is the pay as you go system step S YES the system control unit determines whether or not the cache of the low quality image data is stored in the storage unit step S . At this time if the system control unit determines that the cache of the low quality image data is stored step S YES the system control unit displays an image based on the cache of the low quality image data step S and step S and ends the image data download process. On the other hand if the system control unit determines that the cache of the low quality image data is not stored step S NO the system control unit downloads the low quality image data and displays an image based on the downloaded low quality image data step S to step S . At this time the system control unit downloads the low quality image data from the connected network regardless of whether or not the connected network is the mobile communication network . When the system control unit completes the process of step S the system control unit ends the image data download process.

In step S if the system control unit determines that the fee system is not the pay as you go system step S NO that is if the system control unit determines that the fee system of the connected network is the flat rate system or the packet communication fee is free the system control unit acquires the communication speed of the connected network. Then the system control unit determines whether or not the communication speed of the connected network is higher than or equal to the reference speed step S . As the connection determination means the system control unit performs the determinations of steps S to S so that the system control unit determines whether or not the mobile phone is connected to a network where the communication speed is the high speed and the fee system is the flat rate system or the communication fee is free. At this time if the system control unit determines that the communication speed is lower than the reference speed step S NO the system control unit proceeds to step S. On the other hand if the system control unit determines that the communication speed is higher than or equal to the reference speed step S YES the system control unit performs the high quality image data download process step S and ends image data download process. In the high quality image data download process the high quality image data is downloaded from the connected network regardless of whether or not the connected network is the wireless LAN .

As described above according to the present embodiment the same effects as those of the first embodiment can be obtained. As compared with the case of the first embodiment it is possible to control the download of image data more corresponding to the actual situation.

In the second embodiment both the communication speed and the fee system of the network are determined. However only either one of the communication speed and the fee system may be determined. For example when the fee systems of all networks to which the mobile phone may connect are the flat rate system or free the system control unit may determine only the communication speed. For example when the fee systems of all networks to which the mobile phone may connect are the pay as you go system the system control unit may determine only the communication speed. Specifically if the system control unit determines that the mobile phone is connected to any of the networks step S YES in the image data download process the system control unit performs the determination of step S without performing the determination of step S. The system control unit may determine only the fee system. In this case the communication speeds of all networks to which the mobile phone may connect may be only the high speed only the low speed or a combination of the high speed and the low speed. Specifically if the system control unit determines that the fee system of the connected network is not the pay as you go system in the image data download process step S NO the system control unit performs the high quality image data download process without performing the determination of step S. In this case when the fee system of the connected network is the flat rate system or free even if the communication speed is the low speed the high quality image data is downloaded. This means that the quality of the displayed image is more prioritized than the time required for the download.

In the embodiments described above the contents of the present invention are applied to the image. However the contents of the present invention may be applied to contents other than the image. The first data and the second data of the present invention may be applied to data for outputting the applied contents. In this case the first data and the second data are generated so that the quality of the contents outputted as the first data is higher than the quality of the contents outputted as the second data. Therefore the amount of data of the first data is greater than that of the second data.

For example when the contents of the present invention are applied to sound the quality of the sound corresponds to the quality of the contents. Examples of factors that determine the quality of the sound include a sampling frequency a quantization bit rate a bit rate the number of channels lossy lossless compression of the sound and a compression ratio when the sound is lossy compressed. For example when the contents of the present invention are applied to a moving image the quality of the moving image or the quality of the sound reproduced along with the moving image corresponds to the quality of the contents. Examples of factors that determine the quality of the moving image include the number of pixels in an image per frame resolution a bit length of color information assigned to one pixel a frame rate lossy lossless compression of the moving image and a compression ratio when the moving image is lossy compressed.

The contents of the present invention may be applied to an electronic document including an image a sound a moving image or the like. In this case the first data and the second data for outputting the electronic document include data of an image a sound or a moving image. The contents of the present invention may be applied to an RIA which displays an image a sound a moving image or the like and which includes an image a sound a moving image or the like.

It is not an essential condition for the first data and the second data associated with each other to have exactly the same content of the outputted contents. For example the first data and the second data may have different amounts of data depending on the amount of information transmitted to the user by the outputted contents. Specifically the amount of information transmitted by the first data is set to be greater than the amount of information transmitted by the second data. In this case the qualities of the contents outputted by the first data and the second data may be the same.

For example in a case of an image a creator of the contents generates the first data of an image A and generates the second image by extracting a part of the image A as an image B. In this case the number of pixels of the image A is greater than that of the image B so that the amount of data of the first data is greater than that of the second data. When the image A and the image B are displayed in the same size the resolution of the image A is higher than that of the image B. The extracted portion may be for example an important portion of the original image.

In a case of sound a recording time of the sound may be different between the first data and the second data. Specifically the recording time of the sound reproduced by the first data is set to be longer than the recording time of the sound reproduced by the second data. Thereby the amount of data of the first data is greater than that of the second data. For example in a case of a voice a sound in which detailed content is spoken may be reproduced by the first data and a sound in which summarized content is spoken may be reproduced by the second data. For example in a case of music a sound of full music may be reproduced by the first data and a sound of the introduction or the bridge of the music may be reproduced by the second data.

In a case of a moving image in the same manner as in the image a creator generates the first data of a moving image and generates the second image by extracting a part of image of each frame of the moving image. Or a recording time of the moving image may be different between the first data and the second data. Specifically the recording time of the moving image reproduced by the first data is set to be longer than the recording time of the moving image reproduced by the second data. For example the moving image reproduced by the second data may be a digest version of the moving image reproduced by the first data.

In a case of a text and an electronic document the number of written characters may be different between the first data and the second data. Specifically the number of characters of sentences displayed by the first data is set to be greater than the number of characters of sentences displayed by the second data. Thereby the amount of data of the first data is greater than that of the second data. For example the sentences displayed by the second data may be an abstract of the sentences displayed by the first data.

In the embodiments described above the terminal device of the present invention is applied to the mobile phone . However the terminal device of the present invention may be applied to for example a portable terminal device such as a PDA Personal Digital Assistant and a notebook PC and a stationary type terminal device such as a desktop computer and a set top box.

In the embodiment described above the data receiving program of the present invention is applied to the download application executed by the mobile phone . However the data receiving program may be applied to for example an application program such as a browser a program of a status bar displayed on a window of a specific application program and a program of a widget displayed on a screen at all times.

In the embodiment described above the first network and the second network of the present invention are applied to the wireless LAN and the mobile communication network. However the first network and the second network may be applied to networks other than the wireless LAN and the mobile communication network. In this case at least one of the first network and the second network may be a wired network.

In the description of the above embodiments a network where the fee system is the flat rate system or the packet communication fee is free is the first network and a network where the fee system is the pay as you go system is the second network. However the fee systems of both the first network and the second network may be the pay as you go system. In the fee system of the second network the packet communication fee charged according to the amount of communication is higher than that of the first network.

In the embodiment described above even when the terminal device is connected to the first network if the terminal device has already stored the first data the terminal device does not download the first data. However even if the terminal device has already stored the first data the terminal device may download the first data through the first network and output contents based on the downloaded first data. Similarly even if the terminal device has already stored the second data when the terminal device is connected to the second network the terminal device may download the second data through the second network and output contents based on the downloaded second data.

As described in the first embodiment it may not be necessary to determine whether or not the terminal device is connected to the second network. For example in an environment in which it is assumed that the terminal device is connected to the second network at all times it is not necessary to determine whether or not the terminal device is connected to the second network. The present invention is an invention based on a fact that there is a case in which the terminal device cannot connect to the first network that is more preferable to the user.

