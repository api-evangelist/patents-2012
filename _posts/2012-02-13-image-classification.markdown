---

title: Image classification
abstract: Images are classified as photos (e.g., natural photographs) or graphics (e.g., cartoons, synthetically generated images), such that when searched (online) with a filter, an image database returns images corresponding to the filter criteria (e.g., either photos or graphics will be returned). A set of image statistics pertaining to various visual cues (e.g., color, texture, shape) are identified in classifying the images. These image statistics, combined with pre-tagged image metadata defining an image as either a graphic or a photo, may be used to train a boosting decision tree. The trained boosting decision tree may be used to classify additional images as graphics or photos based on image statistics determined for the additional images.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08891861&OS=08891861&RS=08891861
owner: Microsoft Corporation
number: 08891861
owner_city: Redmond
owner_country: US
publication_date: 20120213
---
This application is a continuation of U.S. application Ser. No. 12 098 026 filed on Apr. 4 2008 entitled IMAGE CLASSIFICATION at least some of which may be incorporated herein.

In a computing environment there is a variety of ways to classify images. For example one may describe an image as a photo meaning that the image is a natural photograph of one or more objects or scenes. Further one may describe an image as a graphic typically meaning that the image is a synthetically produced image comic cartoon or graphical display of one or more items. Images can be stored and retrieved from image databases for example by image search engines in an online environment. Often users search image databases for images meeting criteria specified by the user for example by entering search terms into a webpage of an online search engine.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key factors or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

In computing environments the Internet and other multimedia technologies have allowed users access to an ever increasing number of images. Internet based image search engines e.g. Live Search Google and Yahoo enable users to search for images online by entering keywords that may be associated with an image. Internet based search engines typically store an image index in databases which are populated by web crawlers that search the Internet for images behind the scenes. However keyword based image searches have intrinsic limitations. For example a keyword cannot account for image characteristics that may originate from content of the image unless additional metadata is pre attached to the image that describes the image s characteristics. For example a user may wish to find cartoon images of a specified subject matter using an online image search engine however if the user enters the subject matter into the search engine a mixture of photos cartoons and even other graphics may be returned. Additionally spammers can intentionally create graphic type images of very simple visual patterns and combine them with techniques to manipulate text keywords to boost a ranking of these types of images in popular search queries.

Users may be more inclined to use image search engines if they return more relevant results when queried. Further when spammers intentionally attempt to boost the ranking of their images it tends to harm performance of a search engine. Therefore it may be desirable to have an image content filter that can classify a graphic or photo image based on the image s content characteristics.

As provided herein a technique and system for classifying images as photos e.g. natural photographs or graphics e.g. cartoons synthetically generated images such that when searched with a filter an image database will return images corresponding to the filter criteria e.g. either photos or graphics will be returned . The techniques and systems identify a set of image statistics pertaining to various visual cues e.g. color texture shape . These image statistics combined with pre tagged image metadata defining an image as either a graphic or a photo may be used to train a boosting decision tree. The trained boosting decision tree may be used to classify additional images as graphics or photos based on image statistics determined for the additional images.

To the accomplishment of the foregoing and related ends the following description and annexed drawings set forth certain illustrative aspects and implementations. These are indicative of but a few of the various ways in which one or more aspects may be employed. Other aspects advantages and novel features of the disclosure will become apparent from the following detailed description when considered in conjunction with the annexed drawings.

The claimed subject matter is now described with reference to the drawings wherein like reference numerals are used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the claimed subject matter. It may be evident however that the claimed subject matter may be practiced without these specific details. In other instances well known structures and devices are shown in block diagram form in order to facilitate describing the claimed subject matter.

In computing environments an image s content characteristics cannot be determined by keyword searches unless metadata that described an image s characteristics is pre attached to the image. Therefore when a user queries an image search engine based on keywords the search engine may not be able to determine whether an image is a photo e.g. a natural photograph of one or more objects or scenes or a graphic e.g. cartoons synthetically generated images and will likely return both graphics and photos based on the keywords entered. However if a user wishes to search an image database or image index it may be desirable to have a way to classify images as either photos or graphics so that when a filter is applied to a keyword search e.g. filter photos filter graphics the search returns images relevant to both the keywords entered and the filter applied.

Embodiments described herein relate to techniques and systems for classification of images as photos e.g. natural photographs or graphics e.g. cartoons synthetically generated images such that when searched with a filter an image database will return images corresponding to the filter criteria e.g. either photos or graphics will be returned .

A method for classifying photo and graphics images using features generated from image statistics is illustrated in . An exemplary method begins at and involves determining one or more classifying features of an image at using at least one of determining one or more classifying features of the image using a gradient magnitude orientation histogram e.g. a difference between lower and higher frequency band energy from the histogram and determining one or more classifying features of the image using multidimensional independent histograms for respective red green and blue color bands e.g. statistical values of discreteness mean variance skewness and kurtosis of the histograms . After determining one or more classifying features of the image the classifying features are used in a boosting decision tree for at least one of training a boosting decision tree for image classification and classifying the image using the classifying features in a trained boosting decision tree . Having used the classifying features in a boosting decision tree the exemplary method ends at .

In one embodiment of the method described above various aspects of a digital image may be identified e.g. color texture and shape and further broken down into statistical data pertaining to the image s features. In one aspect as an example to obtain statistical features of color from and image one can generate a joint red green blue RGB color histogram of the image which is quantized to 1000 bins e.g. each color band is quantized into 10 different levels of 100 bins . An entropy value can be determined from this joint color histogram and used as a statistical color feature of the image. Further independent color histograms for each of the red green and blue color bands can be generated from the image. Using these histograms statistical values can be determined e.g. discreteness mean variance skewness and kurtosis and used as additional statistical color features for the image.

In another aspect of this embodiment for example statistical features of the image s texture can be generated. In this example local binary pattern LBP features of the image may be used to generate a texture histogram. For example a 59 dimension texture histogram can be generated using 58 uniform LBP bins e.g. those with at most two 0tilde over 1 transitions in an 8 bit stream and one additional bin that accounts for remaining non uniform LBPs. An entropy value for this LBP texture histogram can be determined and used as a statistical feature of the image.

In another aspect of this embodiment for example statistical features from shape information of objects in the image may be generated. To account for shape information a gradient magnitude orientation GMO histogram e.g. a 40 8 320 GMO histogram may be generated of the image. A difference between an energy value for a low frequency color band and an energy value for a high frequency band in the GMO histogram of the image can be determined and used as a statistical shape information feature of the image. Also in this example an entropy value of the GMO histogram can be determined and used as an additional statistical shape information feature of the image. In this example a Canny edge detector can also be used to determine statistical shape features of the image. The edge detector can be used to determine a total number of edges in the image and an average length of edges in the image. These values can be used as additional statistical shape information feature of the image.

In another aspect of this embodiment for example gray level pixels characteristics may also be used to generate statistical features of an image. A spatial correlogram of the gray level pixels in an image e.g. within a 1 neighborhood can be generated for the image. Slicing the correlogram where respective slices form a histogram one can calculate an average skewness value of the respective slices and use this value as a statistical feature of the image. Further in this example a value for an average slice variance to radius of a symmetric range ratio e.g. where the ratio is defined as a ratio between a variance of the slice and a radius of a symmetric range over a mean of the slice that accounts for 60 of a total count of the slice for respective slices can be determined for respective slices of the correlogram. This ratio value may be used as an additional statistical feature of the image.

In another aspect of this embodiment for example the statistical features of the image can be used in a boosting decision tree in at least two ways. The statistical features of the image can be used to train the boosting decision tree to classify an image as either a graphic or a photo. Further the features of the image can be used to classify an image as either a graphic or a photo in a boosting decision tree that has already been trained. In this example an image can be pre tagged with metadata indicating whether it is an image or a graphic then the pre tagged image can be used as a training image. The training image s statistical features can be determined using the method described above. Then the statistical features of the training image along with the pre tagged metadata can be sent to train the boosting decision tree for graphic or photo image classification based on the metadata. Additionally the statistical features of an image can be used to classify the image as a photo or graphic. The statistical features can be sent to a boosting decision tree that is already trained to classify an image and the trained boosting decision tree can determine whether the image is a graphic or a photo based on the statistical features.

An example of this embodiment is shown in . In an exemplary method begins at and involves determining classifying features of an image at . At statistical features of color of the image are generated and involve determining an entropy value of a joint red green blue RGB histogram e.g. a histogram quantized to 1000 bins at and determining statistical values e.g. discreteness mean variance skewness and kurtosis of respective independent histograms e.g. of 100 dimensions for red green and blue color bands at . Further at an entropy value of a local binary pattern LBP texture histogram e.g. 59 dimensions may be determined. At image shape classifying feature values are generated and involve determining statistical values e.g. a difference between high and low frequency band energy and entropy of a gradient magnitude histogram e.g. 40 8 320 at and determining additional shape features of the image e.g. number of edges and average length of edges using a canny edge detector at . At statistical values e.g. skewness and variance ratios of a spatial correlogram of gray level pixels of the image are generated. After generating classifying features of the image these features are used in a boosting decision tree for at least one of training a boosting decision tree for image classification and classifying the image using the classifying features in a trained boosting decision tree . Having trained the boosting decision tree the exemplary method ends at .

In an example of a portion of an exemplary method involves generating statistical features of color of an image . At determining an entropy value of a joint RGB histogram involves generating a joint RGB histogram quantized to 1000 bins e.g. bins for grouping image pixels of like color with respective color bands quantized into 10 different levels of 100 dimensions each at and determining the entropy value of the histogram at . At determining statistical values of independent histograms for red green and blue color bands of the image involves generating 100 dimension for respective red green and blue color bands e.g. generating three 100 dimension independent histograms at and determining statistical values of the respective independent histograms for discreteness mean variance skewness and kurtosis at .

In an example of another portion of an exemplary method involves determining an entropy value of a local binary pattern LBP feature texture histogram for an image . At generating a 59 dimension texture histogram using LBP features involves generating 58 bins for uniform local binary patterns e.g. those with at most two 0tilde over 1 transitions on an 8 bit stream at and generating one additional bin for remaining non uniform local binary patterns at . After a texture histogram is generated an entropy value for the texture histogram is determined at .

In an example of another portion of an exemplary method involves generating statistical values from a spatial correlogram of gray level pixels GLP of an image . At a spatial correlogram of GLP e.g. within a 1 neighborhood is generated. At an average skewness value is determined for respective slices of the GLP spatial correlogram where the slices form a histogram. At an average variance ratio e.g. a ratio between a variance of the respective slice and a radius of a symmetric range over a mean of the slice that accounts for 60 of a total count of the slice of respective slices is determined.

In an example of another portion of an exemplary method involves generating image shape classifying feature values . At determining statistical values of a gradient magnitude orientation histogram involves generating a gradient magnitude orientation GMO histogram e.g. a 40 8 320 histogram at measuring a difference between energy in a lower frequency band and energy in a higher frequency band of the GMO histogram to generate an energy value at and determining an entropy value of the GMO histogram at . At a canny edge detector is used to determine edge classifying features of the image and involves determining a total number of edges in the image at and determining an average length of edges in the image at .

A system may be configured for image classification for example such that when a user enters filter criteria e.g. filter graphic or filter photo into an image search system images are returned that meet the corresponding filter criteria. An embodiment of a system for image classification is illustrated in and . In exemplary system a training image e.g. an image used to train an image classification system such that the training image has known characteristics is sent to an image classifying feature determiner which determines the training image s classifying features using statistical values of the training image . The training image s statistical values are sent to a boosting decision tree trainer which uses the training image s statistical values to train an image classification boosting decision tree for image classification. In an image classifying feature determiner and a trained image classification boosting decision tree are operably coupled to an image classifier . An image e.g. retrieved by an Internet web crawler is sent to the image classifying feature determiner in the image classifier which determine the image s classifying features. The image s classifying features are sent to the trained image classification boosting decision tree which determines whether the image is for example a graphic or a photo. An image classification is sent to an image metadata attacher which attaches classification metadata e.g. graphic or photo to the classified image that corresponds to the image classification from the trained image classification boosting decision tree . The exemplary system yields the classified image with the attached classification metadata which may be sent for example to an image database not illustrated for later retrieval by a user not illustrated .

One embodiment of a portion of this system is illustrated in by an exemplary system . An image is sent to an image classifying feature determiner which runs the image through a gradient magnitude orientation GMO histogram generator and an independent histogram generator . The GMO histogram generator generates a GMO histogram for the image and sends it to a band energy measurer . The band energy measurer measures a difference between energy in a high frequency color band and energy in a low frequency color band from the GMO histogram generating an energy value for the image . The independent histogram generator generates multidimensional independent histograms for respective red green and blue color bands of the image and sends them to a statistical values determiner . The statistical values determiner determines statistical values e.g. discreteness skewness variance mean and kurtosis for the respective red green and blue independent histograms . Both the entropy value and the statistical values are sent from the image classifying feature determiner as the image s statistical values . As an example the image s statistical values may be sent to a boosting decision tree trainer such as in which may use the statistical values to train an image classification boosting decision tree such as in .

One example of this embodiment is illustrated in by an exemplary system . An image is sent to an image classifying feature determiner which runs the image through a series of system components including a joint red green blue RGB histogram generator an independent histogram generator a local binary pattern LBP texture histogram generator a gradient magnitude orientation GMO generator a canny edge detector and a gray level pixel spatial GLP correlogram generator .

In the joint RGB histogram generator generates a joint RGB histogram for the image and sends it to an entropy value determiner . The entropy value determiner determines an entropy value for the histogram and sends it out of the image classifying feature determiner as a portion of the image s statistical value . The independent histogram generator generates multidimensional independent histograms for respective red green and blue color bands of the image and sends them to a statistical values determiner . The statistical values determiner determines statistical values e.g. discreteness skewness variance mean and kurtosis for the respective red green and blue independent histograms and sends them out of the image classifying feature determiner as a portion of the image s statistical values . The LBP texture histogram generator generates a LBP texture histogram for the image and sends it to an entropy value determiner . The entropy value determiner determines an entropy value for the LBP texture histogram and sends it out of the image classifying feature determiner as a portion of the image s statistical value . The GMO generator generates a GMO histogram for the image and sends it to a band energy measurer and an entropy value determiner . The band energy measurer measures a difference between a high and low frequency energy band from the GMO histogram generating an energy value for the image . The entropy value determiner determines an entropy value from the GMO histogram and both the energy value and the entropy value are sent out of the image classifying feature determiner as a portion of the image s statistical values . The canny edge detector detects a total number of edges in the image and an average length of edges in the image and sends both values out of the image classifying feature determiner as a portion of the image s statistical values . The GLP spatial correlogram generator generates a GLP spatial correlogram for the image and sends it a skewness determiner and a variance determiner . The skewness determiner determines an average skewness value for the correlogram . The variance determiner determines an average variance ratio e.g. a ratio between a variance of the respective slice and a radius of a symmetric range over a mean of the slice that accounts for 60 of a total count of the slice for the correlogram . Both values and are sent out of the image classifying feature determiner as a portion of the image s statistical values . As an example the image s statistical values may be sent to a boosting decision tree trainer such as in which may use the image s statistical values to train an image classification boosting decision tree such as in .

Various embodiments of the system described above may be configured by those skilled in the art for classifying images as photos or graphics. These embodiments may include one of more aspects of the system operably coupled with each other operating in conjunction or operating separately to obtain desired image classification results.

In one embodiment of the techniques and systems described herein a user may search for images using an image search website. As an example the user may enter image search terms into an image search page and a filter parameter for either graphics or photos. In this example the image search website applies the filter parameter to images returned from an image database relating to the search terms to display only those images that meet the filter criteria e.g. graphics returns graphical or synthetically produced images having the search terms . illustrates an example of this embodiment. A user enters search terms and filter criteria e.g. german shepherd dog filter photos into an image search page using a computer system . The image search page sends the search terms and filter criteria to an image database which returns images that meet both the search terms and filter criteria entered by the user . However in order to retrieve images that meet the filter criteria for example metadata can be added to an image that indicates the image is either a graphic or a photo e.g. natural photograph . In this example in order to add respective metadata that corresponds to an image s classification a web crawler retrieves images from the Internet and sends the images to an image classifier . The image classifier determines whether the respective images are either photos or graphics and attaches respective corresponding metadata before sending the images to the image database .

Another embodiment which may include one or more of the variations described above involves a computer readable medium comprising processor executable instructions configured to apply one or more of the techniques presented herein. An exemplary computer readable medium that may be devised in these ways is illustrated in wherein the implementation comprises a computer readable medium e.g. a CD R DVD R or a platter of a hard disk drive on which is encoded computer readable data . This computer readable data in turn comprises a set of computer instructions configured to operate according to the principles set forth herein. In one such embodiment the processor executable instructions may be configured to perform a method for classifying photo and graphic images using features generated from image statistics such as the exemplary method of for example. Many such computer readable media may be devised by those of ordinary skill in the art that are configured to operate in accordance with the techniques presented herein.

Although not required embodiments are described in the general context of computer readable instructions being executed by one or more computing devices. Computer readable instructions may be distributed via computer readable media discussed below . Computer readable instructions may be implemented as program modules such as functions objects Application Programming Interfaces APIs data structures and the like that perform particular tasks or implement particular abstract data types. Typically the functionality of the computer readable instructions may be combined or distributed as desired in various environments.

In other embodiments device may include additional features and or functionality. For example device may also include additional storage e.g. removable and or non removable including but not limited to magnetic storage optical storage and the like. Such additional storage is illustrated in by storage . In one embodiment computer readable instructions to implement one or more embodiments provided herein may be in storage . Storage may also store other computer readable instructions to implement an operating system an application program and the like. Computer readable instructions may be loaded in memory for execution by processing unit for example.

The term computer readable media as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory and storage are examples of computer storage media. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM Digital Versatile Disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .

Device may also include communication connection s that allows device to communicate with other devices. Communication connection s may include but is not limited to a modem a Network Interface Card NIC an integrated network interface a radio frequency transmitter receiver an infrared port a USB connection or other interfaces for connecting computing device to other computing devices. Communication connection s may include a wired connection or a wireless connection. Communication connection s may transmit and or receive communication media.

The term computer readable media may include communication media. Communication media typically embodies computer readable instructions or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal may include a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal.

Device may include input device s such as keyboard mouse pen voice input device touch input device infrared cameras video input devices and or any other input device. Output device s such as one or more displays speakers printers and or any other output device may also be included in device . Input device s and output device s may be connected to device via a wired connection wireless connection or any combination thereof. In one embodiment an input device or an output device from another computing device may be used as input device s or output device s for computing device .

Components of computing device may be connected by various interconnects such as a bus. Such interconnects may include a Peripheral Component Interconnect PCI such as PCI Express a Universal Serial Bus USB firewire IEEE 8394 an optical bus structure and the like. In another embodiment components of computing device may be interconnected by a network. For example memory may be comprised of multiple physical memory units located in different physical locations interconnected by a network.

Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example a computing device accessible via network may store computer readable instructions to implement one or more embodiments provided herein. Computing device may access computing device and download a part or all of the computer readable instructions for execution. Alternatively computing device may download pieces of the computer readable instructions as needed or some instructions may be executed at computing device and some at computing device .

Various operations of embodiments are provided herein. In one embodiment one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media which if executed by a computing device will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further it will be understood that not all operations are necessarily present in each embodiment provided herein.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

As used in this application the terms component module system interface and the like are generally intended to refer to a computer related entity either hardware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a controller and the controller can be a component. One or more components may reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers.

Furthermore the claimed subject matter may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof to control a computer to implement the disclosed subject matter. The term article of manufacture as used herein is intended to encompass a computer program accessible from any computer readable device carrier or media. Of course those skilled in the art will recognize many modifications may be made to this configuration without departing from the scope or spirit of the claimed subject matter.

Moreover the word exemplary is used herein to mean serving as an example instance or illustration. Any aspect or design described herein as exemplary is not necessarily to be construed as advantageous over other aspects or designs. Rather use of the word exemplary is intended to present concepts in a concrete fashion. As used in this application the term or is intended to mean an inclusive or rather than an exclusive or . That is unless specified otherwise or clear from context X employs A or B is intended to mean any of the natural inclusive permutations. That is if X employs A X employs B or X employs both A and B then X employs A or B is satisfied under any of the foregoing instances. In addition the articles a and an as used in this application and the appended claims may generally be construed to mean one or more unless specified otherwise or clear from context to be directed to a singular form.

Also although the disclosure has been shown and described with respect to one or more implementations equivalent alterations and modifications will occur to others skilled in the art based upon a reading and understanding of this specification and the annexed drawings. The disclosure includes all such modifications and alterations and is limited only by the scope of the following claims. In particular regard to the various functions performed by the above described components e.g. elements resources etc. the terms used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. that is functionally equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary implementations of the disclosure. In addition while a particular feature of the disclosure may have been disclosed with respect to only one of several implementations such feature may be combined with one or more other features of the other implementations as may be desired and advantageous for any given or particular application. Furthermore to the extent that the terms includes having has with or variants thereof are used in either the detailed description or the claims such terms are intended to be inclusive in a manner similar to the term comprising. 

