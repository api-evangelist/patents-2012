---

title: Restricted-use account payment administration apparatuses, methods and systems
abstract: The RESTRICTED-USE ACCOUNT PAYMENT ADMINISTRATION APPARATUSES, METHODS AND SYSTEMS (hereinafter “RUAP”) transform purchase item information inputs or purchase receipt inputs via RUAP components into restricted-use account payment settlement outputs. A method is disclosed, including: receiving a restricted-use account reimbursement request including receipt information related to a purchase transaction from a user; obtaining purchase item information from the receipt information included in the restricted-use account reimbursement request; identifying a restricted-use account of the user; determining a purchase item is eligible for the restricted-account usage; determining a reimbursement amount associated with the purchase item form the purchase item information; generating a reimbursement authorization request message including the purchase item information and the reimbursement amount; transmitting the reimbursement authorization request message to a restricted-account issuer for approval; and transacting the reimbursement amount from the restricted-use account to a user financial account upon the restricted-account issuer approval.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09589266&OS=09589266&RS=09589266
owner: Visa International Service Association
number: 09589266
owner_city: San Francisco
owner_country: US
publication_date: 20120331
---
Applicant hereby claims priority under 35 U.S.C. 119 to U.S. Application Ser. No. 61 471 092 entitled Mobile Claims Administration Apparatuses Methods and Systems filed on Apr. 1 2011.

The instant application is further related to Patent Cooperation Treaty application ser. no. PCT US2012 031762 entitled Restricted Use Account Payment Administration Apparatuses Methods And Systems filed on Mar. 31 2012.

This patent application disclosure document hereinafter description and or descriptions describes inventive aspects directed at various novel innovations hereinafter innovation innovations and or innovation s and contains material that is subject to copyright mask work and or other intellectual property protection. The respective owners of such intellectual property have no objection to the facsimile reproduction of the patent disclosure document by anyone as it appears in published Patent Office file records but otherwise reserve all rights.

The present innovations are directed generally to healthcare payment and more particularly to RESTRICTED USE ACCOUNT PAYMENT ADMINISTRATION APPARATUSES METHODS AND SYSTEMS.

A flexible spending account FSA is a financial account which is set up by a user setting aside a portion of their income. For example the FSA may be used for medical expenses dependent care and or the like. A user needs to collect receipts of payments eligible for FSA reimbursement and send the receipts to a FSA administer program. Upon verifying eligibility of the expenses the FSA administer program may return the user payment amount to the user by an authorized transfer of funds from the user s FSA account to the user.

The leading number of each reference number within the drawings indicates the figure in which that reference number is introduced and or detailed. As such a detailed discussion of reference number would be found and or introduced in . Reference number is introduced in etc.

The RESTRICTED USE ACCOUNT PAYMENT ADMINISTRATION APPARATUSES METHODS AND SYSTEMS hereinafter RUAP provides a healthcare payment platform which facilitates payment and or reimbursement from a restricted use account.

In one implementation RUAP may facilitate a user to engage a restricted use account for the cost of eligible items. A restricted use account may be a financial account having funds that can only be used for payment of approved products e.g. prescription drugs vaccine food etc. and or services e.g. healthcare treatment physical examination etc. . Examples of a restricted use account may comprise Flexible Savings Accounts FSA one or more Health Savings Accounts HSA Line of Credit LOC one or more health reimbursement accounts HRA one or more government insurance programs i.e. Medicare or Medicaid various private insurance rules various other restricted use favored payment accounts such as employment benefit plans or employee pharmacy benefit plans and income deduction rules and or the like. In other examples the restricted use account may comprise a food voucher a food stamp and or the like. Within implementations the approval process of payment with a restricted use account may be administered by a third party such as but not limited to FSA HSA administrator government unemployment program administrator and or the like.

For example the RUAP processing platform may facilitate payment with healthcare restricted use accounts e.g. FSA HSA etc. when a user patient visits a healthcare provider. In one embodiment a user may operate a payment device e.g. a mobile wallet component instantiated on a smart phone a healthcare prepaid card a web based application etc. for checkout at a merchant wherein the mobile computing device is web enabled and may receive a communication from a point of service terminal POS . The communication may include a balance due bill of a healthcare provider for healthcare to a user. The web enabled mobile computing device may execute an application that derives an optimized payment of the balance due bill that substantially maximizes incentives and minimize penalties in paying the healthcare provider for the healthcare provided to the user. The optimized payment is transmitted from the web enabled mobile computing device to the POS for further authorization processing of one or more currency amounts to be paid from respective accounts to satisfy the balance due bill.

Integration of an electronic wallet a desktop application a plug in to existing applications a stand alone mobile application a web based application a smart prepaid card and or the like in payment with restricted use account reduces the number of network transactions and messages that fulfill restricted use account payment approval and procurement of eligible purchase items e.g. a user and or a merchant does not need to file additional application requests for restricted use account payment reimbursement which may require voluminous paper work or manual information fill in . In this way with the reduction of network communications the number of transactions that may be processed per day is increased i.e. processing efficiency is improved.

In some scenarios a user may use a non restricted use account e.g. the user s credit card debit card personal check and or the like to pay for a purchase and may want to reimburse the cost of eligible items from his restricted use accounts. In one implementation the process of filing a claim for such compensation may involve a large amount of paperwork. In such implementations the user may be discouraged from filing the claim due to the large amount of paperwork. In some implementations the RUAP may reduce and or eliminate the need for the user to undertake paperwork to file the claim for compensation.

In some implementations the user may have a user device e.g. . The user may utilize the user device to obtain a snapshot of a receipt for funds previously paid by the user e.g. a post flight reimbursement claim etc. a license plate of a car and or like evidence of validity of a claim for compensation. In some implementations the user may provide the snapshot of the payment receipt for the RUAP and the RUAP may see e.g generate a claim for compensation on behalf of the user and coordinate with the claims processor to obtain a claims compensation for the user. The RUAP may also automatically credit funds obtained via claim compensation to an account of the user. In some implementations the RUAP may require no user intervention beyond providing the snapshot to provide mobile claims administration features.

In another implementation the user may operate the user device at a merchant e.g. a Point of Sale PoS terminal at a pharmacy a healthcare provider etc. to directly pay for eligible items e.g. an in flight payment during checkout . For example the user may operate an electronic wallet and select his FSA HSA account to pay for prescription drugs at a pharmacy and or the like.

In one implementation a user may engage a mobile wallet to pay for the purchase at a PoS terminal of the merchant. In one implementation the mobile wallet may provide a prompt alert to the user via a mobile user interface showing that part or all of the user s purchases are eligible for one or more restricted use accounts that have been enrolled in the user s mobile wallet. For example as shown in when the user has purchased pharmaceutical products such as NyQuil and Penicillin the mobile wallet may notify the users that such drugs are eligible for FSA usage. In one implementation if the user selects Yes to proceed with payment with FSA the user may need to split the purchase to pay for the eligible items in the shopping cart with his FSA account and submit an amount of the drugs. For example the user may view a list of the FSA eligible items and a list of healthcare restricted use accounts such as FSA HSA etc. If the user selects to pay with FSA the user may view the remaining balance of the FSA account . Upon selecting to pay the user may submit the transaction to pay with FSA account for the healthcare products

In one implementation the user may be directed to another list of remaining items which are non eligible for any restricted use items e.g. see . The user may then need to select another account e.g. a regular bank account etc. such as a Visa credit card for non eligible items in a separate transaction.

In one implementation the RUAP alert may be originated at a PoS terminal wherein the merchant may maintain a blacklist whitelist of eligible product codes for various types of restricted use accounts and may send notifications to the wallet via Near Field Communication NFC protocol .

In another implementation a user s electronic wallet may identify eligible items for a restricted use account itself e.g. the PoS terminal may generate a bill and transmit bill information to the user s wallet via NFC . In further implementations the PoS terminal may generate a bill comprise a QR code and the user may snap a photo of the generated QR code on the bill which may facilitate the intelligent wallet to capture information of user purchased items.

In an alternative implementation the user may operate a restricted use prepaid card and the PoS terminal may inform the user eligibility of the user s purchase to apply his her restricted use account.

In further implementations the user s mobile wallet may intelligently recommend an account in the wallet for the instant payment. For example the mobile wallet may detect the user s location at a healthcare provider via its GPS component and thus may recommend healthcare benefit accounts for user payment by highlighting the accounts FSA in and HSA . When the user selects the FSA account in the wallet may display an available balance of the FSA account. The user may then tap on a pay button of the mobile wallet to initiate a user payment transaction.

In some implementations the user device may utilize methods alternative to capture of a QR code to obtain information from the POS terminal. For example the POS terminal may communicate the information required for submitting a purchase transaction request to a payment network to user device via Bluetooth Wi Fi SMS text message electronic mail and or other communication methods.

In some implementations a user may wish to checkout items stored in a virtual shopping cart on an online shopping website e.g. . For example the user may be viewing the website using a secure display e.g. that is part of a trusted computing device of the user . Upon indicating that the user wishes to checkout the items in the virtual shopping cart the website may provide a QR code including information on the products in the virtual shopping cart and merchant information. For example in the scenario where the user utilizes a secure display the QR code may be displayed at a random position within the secure display for security purposes. The user may capture a snapshot of the displayed QR code and utilize payment information from the virtual wallet associated with the user device to create a purchase transaction request for processing by the payment network. Upon completion of the purchase transaction the payment network may provide a purchase receipt e.g. directly to the user device the POS terminal in the store and or the secure display for the secure online shopping scenario as confirmation of completion of transaction processing. Thus in some implementations the merchant may be shielded from obtaining personal and or private information of the user while processing the purchase transaction while ensuring integrity of the user s virtual wallet using a secure display for presenting the merchant product QR code.

In various implementations such payment processing may be utilized for a wide variety of transactions. For example a user dining at a restaurant may obtain a bill including a QR pay code including detail on the dining charges included in the bill and a merchant ID for the restaurant. The user may take a snapshot of the restaurant bill using the user s smartphone and utilize the user s virtual wallet to pay for the restaurant bill without revealing any financial or personal information about the user to the restaurant.

In an alternative implementation when the receipt comprise a FSA eligible item e.g. prescription drugs etc. the user device may receive a RUAP alert to notify user eligibility of the purchase item for FSA usage. For example in one implementation the RUAP alert may be received prior to user engage in the final payment so that the user may elect to pay with FSA account. In another example the RUAP alert may be received after the user has obtained a post payment purchase receipt and may submit the receipt for reimbursement into the eligible FSA account as shown in .

Thus in some implementations the user may utilize the charge card to pay for all the expenses including expenses that may be eligible for payment using the user s FSA. In such implementations the user may be paying more that may be needed if the user utilizes the user s FSA or the user may be reducing the user s net income by not utilizing the savings income rewards tax and or like advantages offered by the FSA. In some implementations the user may require to substantiate a payment made using a FSA to prove that the user only utilized the FSA for purposes for which the FSA was issued to the user.

In some implementations the RUAP may provide the user with features to prove that the user only used the user s FSA for legitimate purposes. In some implementations the RUAP may provide the user with features to transfer charges from a charge card to the user s FSA when the charges are eligible to be paid for using the user s FSA. For example the user may obtain a purchase receipt for the purchase of the medication items e.g. . The user may obtain a snapshot of the purchase receipt e.g. e.g. via a mobile device of the user e.g. . The user may provide a snapshot of the purchase receipt to the RUAP for claim processing. The RUAP may obtain the snapshot extract a list of the items purchased by analyzing the snapshot of the RUAP. The RUAP may determine which of the charges on the purchase receipt are eligible to be paid by the user s FSA. In implementations where the user seeks to substantiate charges made to the FSA the RUAP may determine whether each charge is eligible to be paid for using the user s FSA and may provide such substantiation for the user and or other entities and or components of the RUAP. In implementations where the user seeks to transfer charges that are eligible to be paid for using the user s FSA from a charge card to the user s FSA the RUAP may identify the charges that may be transferred and credit debit the account s necessary to achieve the transfer. For example the RUAP may debit the user s FSA account with an amount based on the transaction cost for the items eligible to be paid for using the user s FSA and credit the user s charge card account appropriately e.g. at . In some implementations because the user s FSA can provide savings to the user when the user utilizes the FSA to make eligible purchases the RUAP may provide savings to the user by ensuring that any eligible purchases are always transferred to the appropriate account s . In some implementations the RUAP may provide notification s e.g. to the user via the user s mobile device indicating the crediting of the user s account.

Within various embodiments the user e.g. an individual consumer etc. may include a wide variety of different communications devices and technologies within embodiments of RUAP operation. For example in one embodiment the patient may operate devices such as but not limited to terminal computers work stations servers cellular telephony handsets smart phones e.g. an Apple iPhone a Google Android a BlackBerry etc. PDAs and or the like.

In one embodiment the RUAP server may be equipped at a terminal computer a mobile device and or or the like of the user . In another embodiment the RUAP server may be a remote server which is accessed by the user via a communication network such as but not limited to local area network LAN in house intranet the Internet and or the like. In a further implementation the RUAP merchant may communicate with the user via a POS terminal and or be integrated with a user at a computer terminal. For example the user may operate a mobile device as a self checkout device e.g. see barcode scanning checkout examples in .

Within embodiments a user may shop with a merchant which may be a physical store an online shopping site and or the like. For example the user may walk in a physical merchant store and bring a shopping cart of purchase item to a PoS terminal which may scan in the purchase item information . In another example the user may engage in online shopping by adding purchase items into a virtual shopping cart and transmit the purchase item information to the shopping site server.

For example in one implementation a user device may generate a Hypertext Transfer Protocol Secure HTTPS POST message to send purchase item information in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted message of the purchase item information for the merchant 

Within embodiments the merchant may generate a bill upon the obtained purchase item information. For example the bill may take a similar data structure as the obtained purchase item information . In one implementation the merchant may include an intelligent PoS terminal which may identify whether a purchase item qualifies for a restricted use account. For example when the merchant is equipped with a smart PoS terminal the terminal may query for a list of eligible merchant category code MCC associated with a restricted use account to determine whether the restricted use account may be applied to purchase the item. In one implementation the PoS terminal may generate a restricted use account white list matching status which may comprise information as to a recommended restricted use account that may be applied to the item. An exemplary XML formatted message of the restricted use account status for the merchant may take a form similar to the following 

Within implementations the merchant may provide an account recommendation message to the user e.g. a message sent to the user s mobile device via NFC handshake a message displayed on the PoS terminal and or the like. For example in one implementation as shown in the above example of restricted use account matching status message when the PoS terminal has determined one or more of the user s purchase items includes healthcare products that are eligible for FSA HSA expenses the PoS terminal may generate a RUAP alert asking the user whether the user would like to purchase eligible items using FSA HSA account e.g. see in . An exemplary XML formatted message of account recommendation message for the user may take a form similar to the following 

In another example the restricted use account status may identify eligible items for each restricted use account if there is any. For example an exemplary XML formatted message for the user may take a form similar to the following 

In one implementation the user may select an account to proceed with checkout e.g. by selecting whether to accept payment with a restricted use account as recommended by the PoS terminal or to skip the recommendation and proceed with a bank account checkout. In one implementation the user may submit account information together with the account selection message to the PoS terminal e.g. by tapping on an electronic wallet by swiping a magnetic payment card and or the like. In one implementation an exemplary XML formatted user account selection message may take a form similar to the following 

Within implementation upon receiving the user s account selection the merchant may generate a payment request message to the RUAP server e.g. a HTTP POST message to the RUAP server wherein the XML formatted payment request message may take a form similar to 

In one implementation the RUAP server may obtain a routing number from the received payment request based on which the RUAP may determine where to forward the payment authorization request which may take a similar form to the payment request . For example if the user has elected a credit card account for payment the RUAP server may route the payment authorization request to the credit card issuing bank. In another example when the user elected a FSA HSA account for payment the RUAP server may route the payment authorization request the FSA HSA account manager.

In one implementation the account issuing network may review and verify the payment request. For example the account issuer may verify whether the account has sufficient remaining balance to furnish the payment whether the MCC of the purchase item is eligible for usage of the account and or the like e.g. . In one implementation the account issuer network may generate a payment authorization response message e.g. a HTTPS POST message in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted message of the authorization response for the RUAP server 

In the above example the account issuer e.g. a FSA account manager may verify the item category drug is eligible for FSA usage and the remaining balance 1000.00 is sufficient to cover the requested payment amount of 14.99. 

Upon receiving the payment authorization the RUAP server may process the payment by transacting a requested amount from the user account to the merchant and send an approval notice to the merchant . For example the RUAP server may send the fund transfer request which may take a form similar to the format in compliance with electronic fund transfers EFT and in some embodiments it may be directly made to the merchant via a third party bank e.g. absent the direction of the RUAP server . In another implementation the RUAP server may be integrated with a payment network e.g. VisaNet etc. which may facilitate the payment processing. In one implementation the RUAP server may debit the approved payment amount from the user s account and credit to the merchant . In another example the fund transfer message may take a form similar to the Visa Single Message System SMS format Visa Original Credit Transaction OCT format and or the like. Further implementations of the purchase transaction authorization are discussed in .

In one implementation upon obtaining the approval notice of the payment transaction the merchant may generate a receipt to the user. For example the user may obtain a printed receipt from a PoS terminal. For another example the user may obtain an electronic receipt e.g. via online shopping site via NFC handshake with the PoS terminal from a mobile device etc. . In one implementation receipt may list the user s purchased item information payment account information merchant information and or the like. In another implementation the RUAP server may incorporate information in the receipt into a transaction record for storage. For example an example of the transaction record for the RUAP server may take a form similar to the following 

In another implementation the database may be a relational database responsive to Structured Query Language SQL commands. The RUAP server may execute a hypertext preprocessor PHP script including SQL commands to query the database for user transaction data and or the like. An example PHP SQL command listing illustrating substantive aspects of storing a transaction record in the database 

In one implementation the RUAP may access and retrieve information from one or more online databases . Some databases contain a rule for a payment made towards the balance due bill for the healthcare provided by the healthcare worker to the user. By way of example and not by way of limitation a database can contain a negative wealth impacting e.g. deduction liability insurance debt tax negative interests and or other wealth reducing factor rule pertaining to payment to the healthcare provider for the healthcare to the user. Another database can contains an insurance rule pertaining to payment for the healthcare to the user. Other online databases accessible by the RUAP to retrieve information can contain data specific to the user and an insured entity financially responsible for the user as well as currency balances in each of one or more accounts respectively issued by an issuer.

Within alternative implementations the user may check in with the RUAP server with bill information . For example in one implementation the user s electronic wallet instantiated on a mobile device may automatically send a notification to the RUAP server upon identifying the user s GPS coordinates reflect user s location at a merchant store . In another implementation the user s browser may send a cookie to the RUAP server indicating the user has entered into a merchant shopping site. The user merchant check in may take places prior to after or in accordance with the user obtaining a purchase bill from the merchant.

Within implementations the user may also send purchase bill information to the RUAP server . For example in one implementation the user may forward an electronic bill to the RUAP server via wallet. In another example the user may operate a camera enabled mobile device to capture an image of a paper bill a checkout list displayed at a PoS terminal screen a QR code generated at a PoS terminal and or a checkout page at the user s online shopping site and or the like and incorporate the captured image in the message to the RUAP server . In another implementation the user may proceed with in to obtain bill information embedded in a QR code.

For example in one implementation the user s mobile device may generate a HTTPS POST message in the form of data formatted according to XML wherein the XML formatted message of the user check in with bill information message for the RUAP server may take a form similar to the following 

In another implementation the merchant may submit bill information to the RUAP server . As such the RUAP server may forward bill information to the user via email SMS instant messaging wallet messaging and or the like.

In one implementation upon receiving the user check in information the RUAP server may query a user database to retrieve user s profile and determine a list of user payment accounts registered with the electronic wallet. In one implementation the RUAP server may retrieve routing number with user registered accounts and submit an update request to the account issuer network for account balance information. The issuer network may in turn retrieve the account information for status check and generate a status update to the RUAP server. For example in one implementation the issuer network may generate a HTTPS POST message in the form of data formatted according to XML wherein the XML formatted message of the account update message for the RUAP server may take a form similar to the following 

In another implementation the RUAP server may obtain purchase item information from the user provided bill information and perform item eligibility check to see if any item from the bill is eligible for a user enrolled restricted account usage. For example in one implementation the RUAP server may extract purchase item information from the bill submitted with message e.g. a snap bill image etc. by performing an optical character recognition OCR procedure. The RUAP server may then query a user database for user enrolled account and the information retrieved by the RUAP from the online databases is processed by an optimization algorithm that operates on the rules in the retrieved information. The RUAP may derive a recommendation that includes a currency payment amount to pay against the balance due bill respectively from each said currency balance of the one or more accounts issued by respective issuers. In further implementations the recommendation may be performed and rendered on the web enabled mobile computing device for approval by the user. If the recommendation is approved the enabled mobile computing device transmits the recommendation to the POS. In one implementation the POS may transmit the recommendation for authorization processing of each currency payment amount to pay against the balance due bill respectively from each currency balance of each account as provided by the recommendation. In a further implementation the RUAP may substantially maximize currency payments pay against the balance due bill as well as substantially minimize out of pocket payments pay against the balance due bill. Further implementations of account recommendations are illustrated in .

In one implementation the RUAP server may provide an account listing add a data structure to the user e.g. see in and the user may submit an account selection by tapping on an account. Upon obtaining the user selected account the merchant PoS terminal may process the payment request in a similar manner as discussed in . For example in one implementation an exemplary XML formatted recommended account listing may take a form similar to 

In some implementations the merchant server may obtain the checkout request from the client and extract the checkout detail e.g. XML data from the checkout request. For example the merchant server may utilize a parser such as the example parsers described below in the discussion with reference to . The merchant server may extract the product data as well as the client data from the checkout request. In some implementations the merchant server may query e.g. a merchant database e.g. to obtain product data e.g. such as product pricing sales tax offers discounts rewards and or other information to process the purchase transaction. For example the database may be a relational database responsive to Structured Query Language SQL commands. The merchant server may execute a hypertext preprocessor PHP script including SQL commands to query the database for product data. An example PHP SQL command listing illustrating substantive aspects of querying the database is provided below 

In some implementations in response to obtaining the product data the merchant server may generate e.g. a QR pay code and or secure display element according to the security settings of the user. The merchant server may provide the QR code to the client so that the client may display the QR code and the user may capture the QR code using the user s device to obtain merchant and or product data for generating a purchase transaction processing request. In alternate implementations the merchant server may direct the client to communicate the product and or merchant data required to process the transaction to the user s device via an alternate communication protocol such as but not limited to Wi Fi Bluetooth cellular network SMS email and or like communication protocols. For example the merchant server may direct the client to initiate a plug in on its system to provide the alternate communication service and transmit the product and or merchant data to the user s device via the communication service.

In implementations utilizing a QR code the merchant server may generate a QR code embodying the product information as well as merchant information required by a payment network to process the purchase transaction. In some implementations the QR code may include at least information required by the user device capturing the QR code to generate a purchase transaction processing request such as a merchant identifier e.g. a merchant ID number merchant name store ID etc. and a session identifier for a user shopping session associated with the shopping website brick and mortar store.

In some implementations the merchant server may generate in real time a custom user specific merchant product XML data structure having a time limited validity period such as the example QR data XML data structure provided below 

In some implementations the XML data may include a handle alias token or pointer to information stored on a payment network server rather than encoding all of the actual data required to initiate the transaction so that the information encoded into the QR code may be advantageously minimized. In some implementations the merchant may generate a QR code using the XML data. For example the merchant server may utilize the PHP QR Code open source LGPL library for generating QR Code 2 dimensional barcode available at http phpqrcode.sourceforge.net . For example the merchant server may issue PHP commands similar to the example commands provided below 

In alternate implementations the merchant server may provide e.g. the XML data to a RUAP server along with a request to generate a QR code. For example the merchant server may utilize an API call to the RUAP server to request generation of the QR code. The RUAP server may generate the QR code for the merchant server e.g. and provide e.g. the QR code to the merchant server. For example the RUAP server may encode the information provided by the merchant into the QR code and may also advantageously encode security information time validity information digital certificate information anonymous shipping information QR code generation processing fee information etc. into the QR code.

In some implementations the RUAP server may provide the merchant server with an encryption key e.g. a Rivest Shamir Adleman RSA private public key digital certificate . The merchant may encrypt the custom user specific merchant product XML data structure using the encryption key to generate encrypted purchase data e.g. using the RSA algorithm . The merchant server may then encode the encrypted data into the QR code. Such a scheme may be employed advantageously in various embodiments by the RUAP server to authenticate the merchant for any transaction processing requests related to the user merchant shopping session.

In some implementations pre designed QR codes associated with authenticated with pre authenticated merchants may be provided to the user device. For example a user may be browsing an online website on the user s device. The user device may make a HTTP S GET request for a webpage from a web server. In some implementations the web server may in response to the user device s request for a webpage generate a query for advertisements to display on the webpage. For example the web server may search a database or provide a request to an ad network server e.g. Akamai to provide advertisements for embedding into the webpage. In some implementations the ad network server may utilize keywords metadata etc. obtained from the web server e.g. keywords or metadata associated with the webpage user profile information user ID user browsing history from a cookie stored on the user device etc. . The ad network may utilize the keywords to generate a query of database s for advertisements associated with the keywords and may obtain advertisements to provide. In some implementations the ad network server may provide information e.g. via an API call on such advertisements e.g. merchant name merchant ID product name product pricing information related offers etc. to a RUAP server. The RUAP server may generate a QR code based on the information provided by the ad network server such that a user device may snap the QR code to initiate a purchase transaction for the goods and or services associated with the QR code e.g. as provided by the ad network server to the RUAP server . The ad network server may provide the QR as part of the advertisement to the web server which may in turn embed the advertisement including the QR code into the webpage before providing it to the user device. In alternate implementations the ad network server web server may transmit a URL or other identifier of the QR code ultimately to the user device and the user device may make a call e.g. a HTTP S GET request using the URL of the QR code e.g. hosted on the RUAP server to obtain the QR code and display it for the user.

In some implementations the merchant server may provide the QR code to the client e.g. . For example the merchant server may provide a HyperText Markup Language HTML page including a reference to the QR code image and or secure element image such as the example HTML page below 

In some implementations the client may obtain the QR pay code e.g. and display the QR code e.g. on a display screen associated with the client device. In some implementations the user may utilize a user device e.g. to capture the QR code presented by the client device for payment processing. For example the user may provide payment input into the user device e.g. . In various implementations the user input may include but not be limited to a single tap e.g. a one tap mobile app purchasing embodiment of a touchscreen interface keyboard entry card swipe activating a RFID NFC enabled hardware device e.g. electronic card having multiple accounts smartphone tablet etc. within the user device mouse clicks depressing buttons on a joystick game console voice commands single multi touch gestures on a touch sensitive interface touching user interface elements on a touch sensitive display and or the like. For example the user device may obtain track data from the user s card e.g. credit card debit card prepaid card charge card etc. such as the example track data provided below 

In some implementation the user device may determine whether an image it has captured depicts a QR code. Depending on whether or not a QR code has been captured and also optionally depending on contents of the QR code the user device may redirect the user e.g. via a web browser application executing on the user device to a product a merchant website a product at a merchant website a website and including a command to add an item to a purchasing cart of the user associated with the website and or the like. For example the user device may execute a component such as the example Quick Response Code Processing QRCP component described below in the discussion with reference to .

In some implementations upon obtaining the user payment input and capturing the QR code the user device may generate a restricted account option alert e.g. to notify the user an option to proceed with a restricted account payment etc. . In an alternative implementation upon capturing purchase item information from the QR code the user may proceed with in e.g. to check in and submit purchase item information to the RUAP server which may in turn returns a restricted account option alert for display on the user device .

In another implementation upon obtaining the QR code the user device may provide a card authorization request on behalf of the user a HTTP S GET message including the product order details for the RUAP server in the form of XML formatted data. Below is an example HTTP S GET message including an XML formatted card authorization request for the RUAP server 

In some implementations the card authorization request generated by the user device may include a minimum of information required to process the purchase transaction. For example this may improve the efficiency of communicating the purchase transaction request and may also advantageously improve the privacy protections provided to the user and or merchant. For example in some implementations the card authorization request may include at least a merchant ID a session ID for the user s shopping session with the merchant and a device ID of a device e.g. smartphone of the user that is linked to the user s virtual wallet. In some implementations the QR code and messages sent to from the QR code capturing device may include the source ID e.g. identifier of the device generating the QR code session ID merchant ID item ID e.g. model number the charge amount and or transacting device ID e.g. the user s smartphone device .

In some implementations the card authorization request may be provided by the merchant server or point of sale terminal instead of the user device. In some implementations the user desiring security may request via the user device the RUAP server for a dynamically generated card verification value code dCVV to be utilized along with the user s primary account number PAN e.g. credit card number in the purchase transaction. In response the payment network server may generate a dCVV code e.g. using random number generation MD5 hash of an input key which may be generated using the user ID merchant ID session ID timestamp combinations thereof and or the like and provide a session specific dCVV code for the user to utilize along with the user s PAN number. For example the session specific dCVV code may have an expiry time e.g. expiry in a one minute from issue . The user device may communicate e.g. via Bluetooth NFC Wi Fi cellular QR code etc. the PAN and dCVV to the point of sale terminal which may create the card authorization request. For example the user device may generate a QR payment code embedding the PAN and dCVV numbers and the point of sale terminal may snap an image of the user device generated QR payment code. The point of sale terminal may then generate and provide the card authorization request to the RUAP server. The RUAP server may then be able to validate the transaction by comparing the dCVV obtained from the merchant with the dCVV it provided to the user device before the purchase transaction was initiated. If the dCVV codes from the two sources RUAP server and merchant correspond properly to each other the RUAP server may continue processing the purchase transaction.

In some implementations the card authorization request from a user device may include encrypted data extracted from the QR code which may have been encrypted by the merchant server as part of a merchant authentication scheme. In some implementations the RUAP server may obtain the encrypted data from the card authorization request provided by the user device and attempt to decrypt the encrypted data e.g. using a RSA private public that is complementary to the key the RUAP server initially provided to the merchant server for encrypting the purchase data before embedding it into the QR code. If the RUAP server is able to decrypt the purchase data then the merchant is authenticated as being a valid merchant. In some implementations the RUAP server may compare the purchase data decrypted from the card authorization with data provided by the user user device to determine whether the data from these different sources user user device and merchant correspond properly to each other. Thus in some implementations the RUAP server may be able to authenticate the merchant and correlate the merchant to a specific user session or user device before processing the transaction.

In some implementations the RUAP server may provide a notification to the user device that the transaction is authenticated and approved for transacting. In alternate implementations the RUAP server may proceed with transaction processing. In some implementations upon identifying that the user is in a session with the merchant the RUAP server may communicate with the user device to provide additional features for the user. For example in some implementations the RUAP server may provide a communication to the user device e.g. via a HTTP S POST message to provide a virtual storefront of the merchant a depiction of an aisle of the merchant associated with the products included in the card authorization request a listing of related items and or the like.

In another implementation the user may submit wallet information to the merchant terminal e.g. by check in at the merchant at so that the merchant may have wallet information of the user as to which restricted use accounts the user has enrolled with. The user wallet check in may further comprise RUAP server updating account balance information to determine whether an account has sufficient funds to fulfill a payment.

In one implementation if an item is eligible for a restricted use account the merchant may generate an account recommendation e.g. by sending a RUAP alert to the user device via NFC or display the message on a user PoS terminal user interface . The user may elect to submit a checkout preference e.g. by selecting to proceed checkout with the eligible restricted use account or not. If the user has selected to check out with the recommended restricted use account the merchant may generate a separate bill for the eligible items exclusively for payment using the corresponding restricted use account.

In another implementation if no item is eligible for any restricted use account or the user selects not to check out with the restricted use account the merchant may generate a bill of all purchase items .

In one implementation the user may submit an account selection in response to the generated bill at or to proceed with purchase payment transaction e.g. see also in . upon receiving the account selection continuing on with B the RUAP server may determine an issuer routing number from the account selection and generate a payment authorization message and route to the account issuer .

In one implementation the issuer network may receive and process the payment transaction request . If the account issuer issues a restricted account the issuer may further inspect the item eligibility e.g. by verifying the MCC in the payment transaction request satisfies the restricted use account requirement. The issuer may further generate a response message upon verifying item eligibility account balance etc. to the RUAP server .

In one implementation if the issuer response approves the transaction the RUAP server may transact the approved payment amount e.g. by transferring the approved amount from the user account to a merchant account and generate a transaction receipt message to the merchant. In another implementation if the transaction is denied by the issuer e.g. insufficient balance in the selected account MCC ineligible for a restricted use account etc. the merchant may be notified of the rejection in a transaction denial message .

In one implementation upon completing the transaction the merchant may receive a transaction receipt message based on which the merchant PoS terminal or the shopping site may generate a receipt reflecting the purchase to the user. For example the user may obtain a printed receipt from a PoS terminal. In another example the user may obtain an electronic receipt via email SMS electronic wallet notifications and or the like.

With reference to the user may check in at a merchant store via the electronic wallet. In one implementation the user may submit wallet check in information e.g. GPS coordinates user credentials and or the like. Upon receiving the wallet check in information the RUAP server may determine merchant characteristics e.g. based on GPS coordinates etc. and tentatively retrieve a list of restricted use use account in the wallet . For example the RUAP server may retrieve accounts the user has enrolled in the electronic wallet. In another example the RUAP server may retrieve user enrolled restricted use accounts based on merchant characteristics e.g. FSA HSA and other healthcare related restricted use accounts if the merchant is a hospital physician office dental office and or the like food stamp etc. if the merchant is a grocery store and or the like.

In one implementation the RUAP server may extract routing information and send a status update request to account issuer . The account issuer may then retrieve user account information e.g. balance information valid term etc. and generate account status update information for the user.

In one implementation upon shopping with a merchant the user may submit purchase information to the merchant which may generate a purchase bill and or a QR code e.g. see . The user may snap an image of the bill and or the QR code and submit the bill image to the RUAP server e.g. via the electronic wallet.

In one implementation upon receiving bill image information the RUAP server may perform an OCR procedure to obtain item information . For example the RUAP server may adopt OCR software such as but not limited to OmniPage OCRFeeder Scantron Java OCR and or the like to extract information from a bill image. In an alternative implementation the user device may perform bill analysis to obtain information as to the purchase item. For example the user device may decode the QR code and generate an account option based on the purchase item category code .

With reference to upon OCR scanning of the received bill image for each item on the bill the RUAP server may determine whether such item is eligible for a restricted use account. In one implementation the RUAP server may perform the match based on enrolled restricted accounts in the user s wallet such account information may be retrieved at . For example if the user has FSA HSA accounts enrolled in the wallet the RUAP server may query each item s MCC to determine whether it is an eligible healthcare product.

In one implementation if an item is eligible for a restricted use account upon obtaining the status update of the restricted use account the RUAP server may generate a restricted use account option list e.g. including a recommendation of accounts as further discussed in . Upon receiving account recommendation the user may submit a checkout account e.g. whether to proceed with a restricted account checkout or not and proceed with in .

With reference to in some implementations a user may desire to purchase a product service offering and or the like product from a merchant via a merchant online site or in the merchant s store. The user may communicate with a merchant server via a client. For example the user may provide user input e.g. into the client indicating the user s desire to checkout shopping items in a virtual shopping cart. The client may generate a checkout request e.g. and provide the checkout request to the merchant server. The merchant server may obtain the checkout request from the client and extract the checkout detail e.g. XML data from the checkout request e.g. . For example the merchant server may utilize a parser such as the example parsers described below in the discussion with reference to . The merchant server may extract the product data as well as the client data from the checkout request. In some implementations the merchant server may query e.g. a merchant database to obtain product data e.g. such as product pricing sales tax offers discounts rewards and or other information to process the purchase transaction.

In response to obtaining the product data the merchant server may generate e.g. a QR pay code and or secure display element according to the security settings of the user see e.g. . For example the merchant server may generate a QR code embodying the product information as well as merchant information required by a payment network to process the purchase transaction. For example the merchant server may first generate in real time a custom user specific merchant product XML data structure having a time limited validity period.

In some implementations the merchant may generate QR code using the XML data. For example the merchant server may utilize the PHP QR Code open source LGPL library for generating QR Code 2 dimensional barcode available at http phpqrcode.sourceforge.net . For example the merchant server may issue PHP commands similar to the example commands provided below 

The merchant server may provide the QR pay code to the client e.g. . The client may obtain the QR pay code and display the QR code e.g. on a display screen associated with the client device. In some implementations the user may utilize a user device e.g. to capture the QR code presented by the client device for payment processing. The client device may decode the QR code to extract the information embedded in the QR code. For example the client device may utilize an application such as the ZXing multi format 1D 2D barcode image processing library available at http code.google.com p zxing to extract the information from the QR code. In some implementations the user may provide payment input into the user device e.g. . Upon obtaining the user purchase input the user device may generate a card authorization request e.g. and provide the card authorization request to a RUAP server.

In another implementation upon obtaining information from the QR code the user device may submit an account selection to the RUAP server e.g. see in to proceed with a purchase transaction. In further implementation the user device may submit the QR code to the RUAP server for processing.

In some implementations a user e.g. may desire to request a reimbursement for compensation e.g. a refund and or reallocation of funds for restricted use eligible purchase items. The user may have a purchase receipt e.g. based on conducting a purchase transaction with a merchant e.g. via the PTA PTC component discussed further below with reference to . The RUAP may provide an app for a user device e.g. of the user for requesting a reimbursement for compensation. For example the user may operate a device such as but not limited to a personal computer mobile device television point of sale terminal and or the like e.g. . For example the app may be an executable application developed using a Software Development Kit SDK such as iOS SDK 4 Xcode 4 Android SDK Visual Studio Visual C Java EE 5 SDK GTK GNUstep wxWidgets and or the like. In some implementations the app executing on the user device may provide a user interface using which the user may interact with the app executing on the user device. For example the user may provide various types of input to indicate a user reimbursement request e.g. including but not limited to keyboard entry card swipe activating a RFID NFC enabled hardware device e.g. electronic card having multiple accounts smartphone tablet etc. mouse clicks depressing buttons on a joystick game console voice commands single multi touch gestures on a touch sensitive interface touching user interface elements on a touch sensitive display and or the like. In some implementations the app may include a security feature to allow a user secure access to the interface. As an example a user may enter a passcode to access the interface of the app. As another example the user may present a card e.g. a credit card debit card prepaid card etc. at the user device to gain access to the interface of the app. For example the user may swipe the card through a card reader of the user device present the card for a NFC card reader Bluetooth reader and or the like. The user device may obtain e.g. track data from the user s card such as the example track data provided below 

The user device may then authenticate the user based on e.g. whether the user identification from the card data matches the identification of the user to whom the user device is registered or whether the card number of the user matches the card of the user stored in a file on the user device etc. Upon authentication the app may provide the interface for the user. In some implementations the user device executing the app may provide a number of outputs for the user including but not limited to sounds music audio video images tactile feedback vibration alerts e.g. on vibration capable client devices such as a smartphone etc. and or the like.

In some implementations in response to the user s reimbursement request input the user device client may capture a receipt snapshot of the receipt e.g. and generate a user reimbursement request using the captured receipt snapshot e.g. . For example the client may obtain an image a video a live stream etc. of the receipt. Within various implementations the receipt image and or video may comprise a variety of image video format such as but not limited to JPEG BMP TIFF MP4 AVI MOV and or the like. In some implementations the client may provide the obtained snapshot to a RUAP server e.g. . For example the client may send a Secure HyperText Transfer Protocol HTTP S POST GET message electronic mail message Short Messaging Service SMS message HTTP Real Time Streaming Protocol RTSP video stream etc. including the captured receipt snapshot as part of a user reimbursement request e.g. . In another implementation the user may forward an electronic receipt to the RUAP server in the reimbursement request . In various implementations the snapshot of the receipt may be captured by a webcam a digital camera a scanner any image processing device and or the like. In a further implementation the imaging device may automatically send the receipt image to the RUAP server for reimbursement e.g. via email SMS instant messaging social messaging wallet messaging and or the like.

In one implementation the user may indicate a reimbursement account in the reimbursement request e.g. an account for deposit of the reimbursed funds. In one implementation the user may configure an account for reimbursement purpose via electronic wallet configuration at account enrollment. In another implementation the RUAP server may automatically deposit reimbursed funds into the account that has been used for the transaction as a default reimbursement account.

In one implementation the user device client may generate a HTTPS POST message including the user reimbursement request . Below is an example HTTP S POST message including an XML formatted user reimbursement request for the RUAP server 

In the above example the user submits a reimbursement request with captured images of a transaction receipt to the RUAP server and has indicated a preferred restricted use account is FSA and has provided a Chase 0689 bank account for depositing the reimbursed funds. In another implementation the user may or may not need to indicate a restricted account for reimbursement request and the RUAP server may automatically determine a restricted use account with regard to an eligible item.

In one implementation when there are more than one enrolled restricted use accounts can be applied for reimbursement for an eligible item e.g. prescription drugs may be paid by FSA HSA LOC etc. the RUAP server may apply user configured rules to determine which restricted use accounts to use for reimbursement. For example the user configured rules may be further illustrated in .

In some implementations the RUAP server may parse the user reimbursement request and extract the captured snapshot e.g. . The RUAP server may generate an extraction request to extract the data fields and values from the snapshot of the purchase receipt. The RUAP server may provide the extraction request to an extraction server e.g. . The extraction server may obtain and parse the extraction request and may extract the data fields and data values from the snapshot of the purchase receipt e.g. . For example the extraction server may utilize optical character recognition techniques to extract data fields and their associated values from images video frames of the snapshot of the receipt. The extraction server may provide the receipt data e.g. to the RUAP server.

For example the extraction processor may generate a HTTPS POST message including the extracted receipt data . Below is an example HTTP S POST message including an XML formatted receipt data for the RUAP server 

In some implementations the RUAP server may parse the user reimbursement request and determine what information is required to be sent for reimbursements processing based on the user reimbursement request and perform restricted account eligibility per each parsed item from the receipt data e.g. . For example the if the user wishes to transfer a charge for a medication purchase from the user s charge card to a restricted use account the RUAP server may determine that the reimbursement message sent for reimbursements processing may require the user s full name residential address social security number restricted use account details and or the like. The RUAP server may ensure that only the user data that is required for reimbursements processing may be sent for reimbursements processing. For example the RUAP server may protect the user s bank account charge card account information from being provided to the reimbursements processor to protect the user s private and or protected information. In some implementations the RUAP server may generate a server reimbursement message e.g. filing a reimbursement on behalf of the user with a reimbursements processor e.g. .

For example the RUAP server may generate a HTTPS POST message including the server reimbursement claim message . Below is an example HTTP S POST message including an XML formatted reimbursement message for the RUAP server 

The reimbursements process server may parse the server reimbursement message extract reimbursement details and process the reimbursement e.g. . For example the reimbursements process server may determine the validity of the reimbursements and determine an amount of funds to be debited from the user s restricted use account and an amount of funds to be credited to the user s charge card. The reimbursements process server may provide the reimbursement process results e.g. to the RUAP server. For example an exemplary XML formatted reimbursement process results message may take a form similar to the following 

Continuing on with in some implementations the RUAP server may parse the reimbursement process results and identify the user account s from which to debit credit funds as well as the amount s to debit credit from the user account s . In some implementations the RUAP server may query a database e.g. for addresses e.g. IP addresses URLs of the account s server maintaining the user account s . The RUAP server may use the account server data e.g. to generate and provide funds transfer message s e.g. to the account server s e.g. . The account server s may credit debit funds from the user account s according to the indications in the funds transfer message s e.g. and provide funds transfer notifications e.g. to the RUAP server. The RUAP server may provide notification s e.g. of successful reimbursements processing and funds transfer notification s to the client e.g. . In some implementations the client may render and display the obtained notifications from the RUAP server for the user e.g. .

Within implementations the user may have indicated a restricted use account for reimbursement. For example the user may have indicated in the reimbursement request that the submitted receipt is for FSA reimbursement. In another implementation the user may not identify any eligible restricted use account and the RUAP server may automatically identify potential restricted use accounts for reimbursement by extracting item information from the receipt. For example the RUAP server may retrieve restricted use accounts the user has enrolled with RUAP and perform an exhaustive search on the items on the receipt to determine whether any item can be eligible for any registered restricted use account.

Similarly the user may have indicated in the reimbursement request an account for deposit the reimbursement amount e.g. a credit card account a debit account a checking account and or the like. In an alternative implementation the RUAP server may retrieve a default account configured by the user upon enrollment with RUAP as the account to deposit reimbursement funds. In a further implementation the RUAP server may identify a payment account from the receipt data and use the identified account as the deposit account. In such cases as account number appeared on the receipt usually has an abbreviated form e.g. only the last 4 digits etc. the RUAP server may identify whether any enrolled user account matches with the abbreviated account number and prompt the user to confirm whether the user desire to deposit reimbursement funds into the identified account.

Within alternative embodiments upon obtaining receipt data at and performing restricted account eligibility match at the RUAP may proceed with to generate a reimbursement request for the restricted use account issuers. In a further implementation the RUAP may be part of the account issuer and may perform claim validity check as to whether the claimed item is eligible for the restricted use account.

As shown in when the RUAP server has determined one or more items identified in the receipt data are eligible for reimbursement for a restricted use account the RUAP server may retrieve the restricted account routing information and generate a balance inquiry to the account issuer . The account issuer may then query a an issuer database based on the user id and obtain query results reflecting the user account balance and status update . The account issuer may then generate an account balance update message which may take a similar form to the status update in to the RUAP server .

In one implementation the RUAP server may generate restricted account recommendation for reimbursement as further discussed in based upon the available balance of the restricted account balance. In one implementation the RUAP server may optionally send the generated account recommendation for user confirmation e.g. see in . Upon user affirmation by selecting the reimbursement account the RUAP server may proceed with in to generate a reimbursement claim for processing.

The RUAP server may generate an extraction request to extract the data fields and values from the snapshot of the purchase receipt e.g. . The RUAP server may provide the extraction request to an extraction server e.g. . The extraction server may obtain and parse the extraction request e.g. and may extract the data fields and data values from the snapshot of the purchase receipt e.g. . For example the extraction server may utilize optical character recognition techniques to extract data fields and their associated values from images video frames of the snapshot of the receipt. The extraction server may determine the data fields present in the receipt as well as the data values associated with the data fields in the receipt. The extraction server may provide the receipt data e.g. to the RUAP server. In some implementations the RUAP server may parse the user claim request e.g. and determine what information is required to be sent for claims processing based on the user claim request e.g. . In some implementations the RUAP server may generate a server claim message e.g. filing a claim on behalf of the user with a claims process server e.g. . The claims process server may parse the server claim message e.g. extract claim details and process the claim e.g. . For example the claims process server may determine the validity of the claims and determine an amount of funds to be debited from the user s FSA account and an amount of funds to be credited to the user s charge card e.g. . The claims process server may provide the claim process results e.g. to the RUAP server. In some implementations the RUAP server may parse the claim process results e.g. and identify the user account s from which to debit credit funds e.g. as well as the amount s to debit credit from the user account s e.g. . In some implementations the RUAP server may query a database e.g. for addresses e.g. IP addresses URLs of the account s server maintaining the user account s . The RUAP server may use the account server data obtained from the database e.g. to generate and provide funds transfer message s e.g. to the account server s . The account server s may obtain and parse the funds transfer messages e.g. and credit debit funds from the user account s according to the indications in the funds transfer message s e.g. . The account server may generate and provide e.g. funds transfer notifications to the RUAP server. The RUAP server may generate e.g. and provide notification s e.g. of successful claims processing and funds transfer notification s to the client. In some implementations the client may render e.g. and display the obtained notifications for the user e.g. .

Continuing on with upon obtaining receipt data at in the RUAP server may review each item on the receipt to determine whether it is eligible for a restricted use account . In one implementation if it is eligible the RUAP server may send an account status update request to the restricted use account issuer. The issuer may in turn receive the status update request and verify the user credential sent along with the status update request. In one implementation the account issuer may query on the user account database and retrieve user account status e.g. the remaining balance etc.

In one implementation the RUAP server may further determine whether the user has configured or indicated a restricted use account for reimbursement in the original reimbursement request . If not the RUAP server may generate an option list for the user . For example when an item on the receipt comprises healthcare products services the RUAP server may suggest FSA HSA account to the user.

In one implementation upon receiving a restricted use account option list the user may submit a selection . Or alternatively the RUAP server may automatically select an account upon user configured restricted account usage rules. In further implementations the user may submit a deposit account for the reimbursed funds . The RUAP server may then proceed to generate reimbursement authorization messages for restricted use account issuers e.g. in . In further implementation the RUAP may determine an account that has been used to pay for the transaction as showed on the receipt e.g. an abbreviated credit card number 1234. The RUAP may retrieve an account enrolled in the wallet that has an account number ends with 1234 and deposit the reimbursement amount into the account.

In one implementation if the product code and or terminal ID shows the purchased product comprises food the RUAP may determine whether food voucher is enrolled in the wallet . If there is a food stamp account the RUAP may put the food stamp voucher account on top of a recommended account list .

In another implementation if the product code and or terminal ID shows a healthcare purchase the RUAP may determine a recommended plan based on user specified rules. For example if the user prefers to pay with FSA the RUAP may determine whether there is FSA enrolled in the wallet. If yes the RUAP may send a balance inquiry to the account issuer which may verify the account credentials e.g. a token etc. and return the available balance . The RUAP may proceed to determine whether there is sufficient balance . If yes the RUAP may put FSA on top of a recommended account list . If not the RUAP may recommend FSA with the remaining available balance . The RUAP may query for other enrolled restricted use accounts in a similar manner.

In one implementation the RUAP may generate a prioritized list of accounts and presented to the user in the wallet payment page e.g. as illustrated in .

For example as shown in if a user goes to a primary care physician on Jun. 8 2015 i.e. more than half a year to the end date to his FSA and a medical bill indicates a co pay amount of 50.00 e.g. at the user may enter 50.00 into the RUAP mobile application and indicate it is medical purchase. Upon verifying the eligibility of medical purchase the RUAP may retrieve applicable healthcare restricted use accounts and determine the user has his FSA HSA and LOC accounts enrolled . The RUAP may then update the balance information of each account with the account sponsors e.g. see also in .

In one implementation the RUAP may assess the rules in the above example and provide a screen of options showing the remaining balances in the three accounts e.g. ranked as FSA 500.00 LOC 2900.00 HSA 5000.00 . In one implementation the RUAP may list the available accounts in a prioritized order based on the spending rules showing the balance of each account . It should be noted that although mobile user interface elements are depicted web desktop and other interfaces are contemplated for all the user interfaces throughout the disclosure. In this example although LOC is the third account after the HSA LOC is listed prior to HSA as the rule specifies LOC is applied as secondary account for medical purchase. In one implementation the RUAP may put a default dollar amount as 50.00 e.g. for payment or the user may change it by type a different amount.

For another example as shown in if the user goes to a physical therapist at Sep. 27 2015 i.e. approximately three months to the end date of FSA and the patient s responsibility is 100.00 the user may enter 100.00 into the RUAP mobile component and confirm it is medical purchase . In the user may press a pay button and enter an amount and type of purchase . The RUAP may retrieve applicable healthcare restricted use accounts and determine the user has his FSA HSA and LOC accounts enrolled . The RUAP may then update the balance information of each account with the account sponsors e.g. see also in responded by listing the remaining balances e.g. FSA 750.00 LOC 3200.00 and HSA 5000.00 etc. Upon applying the usage rules in this case even if the FSA has insufficient funds it is on top of the prioritized list because it will expire at the end of the year. As the remaining balance in FSA is insufficient to cover the amount due the user may split the amount by selecting FSA to pay 750.00 and LOC to pay the remaining 100 75 25. For example after paying 750.00 with FSA the FSA account may have an updated balance of 0.00 . The user may elect to pay the remaining 25.00 with the LOC account. The RUAP may send a report summary to the user including the updated remaining balance of the accounts after payment and or the like.

For another example if the user received a surgery on Sep. 30 2015 i.e. approximately three months to the end date of FSA and received a medical bill of 2000.00 but the current accounts have available balances of LOC 3000.00 FSA o HSA 5000.00 . In this case the user may elect to select HSA for the payment.

In some embodiments the QR code may include data on a new account to be added to the virtual wallet application see . The virtual wallet application may query an issuer of the new account as obtained from the extracted data for the data associated with the new account . The virtual wallet application may compare the issuer provided data to the data extracted from the QR code . If the new account is validated option Yes the virtual wallet application may update the wallet credentials with the details of the new account and update the snap history of the virtual wallet application using the data from the QR code .

With reference to in some embodiments the QR code may include data on a bill invoice or coupon for a purchase using the virtual wallet application see . The virtual wallet application may query merchant s associated with the purchase as obtained from the extracted data for the data associated with the bill invoice or coupon for a purchase e.g. offer details offer ID expiry time etc. . The virtual wallet application may compare the merchant provided data to the data extracted from the QR code . If the bill invoice or coupon for a purchase is validated option Yes the virtual wallet application may generate a data structure see e.g. XML QR data structure in description above with reference to including the QR encoded data for generating and providing a card authorization request and update the snap history of the virtual wallet application using the data from the QR code .

In some embodiments the QR code may include product information commands user navigation instructions etc. for the virtual wallet application see . virtual wallet application may query a product database using the information encoded in the QR. The virtual wallet application may provide various features including without limitation displaying product information redirecting the user to a product page a merchant website a product page on a merchant website add item s to a user shopping cart at a merchant website etc. In some implementations the virtual wallet application may perform a procedure such as described above for any image frame pending to be processed and or selected for processing by the user e.g. from the snap history .

In further implementations the above mentioned software kits tools and or the like may also be applied to capture textual item information on a bill receipt image.

In further implementations when a purchase item is related healthcare product service the RUAP may automatically submit the purchase information for insurance adjudication. For example when a user has submitted a receipt including purchase of prescription drugs for FSA reimbursement the RUAP server may generate an insurance claim in addition to the FSA reimbursement wherein the RUAP server may engage in an insurance adjudication process with the insurance provider to claim for an insured amount and may then submit a request for FSA reimbursement of the remaining amount. provides a data block diagram illustrating data flows between healthcare payment entities RUAP server user and affiliated entities showing insurance adjudication within embodiments of the RUAP. Within various embodiments as shown in one or more user s patient s RUAP server RUAP database s merchant s e.g. a healthcare provider etc. insurance provider insurance bank and or the like are shown to interact via various communication networks to facilitate healthcare insurance adjudication.

Within embodiments prior to receiving healthcare service or purchasing healthcare products the user may obtain an insurance program e.g. by submitting registration information to an insurance provider . For example the user may fill out an insurance application form via a web based application to the insurance provider . An XML formatted user registration message may take a form similar to the following 

In one implementation the insurance provider may underwrite an insurance policy for the user and issue an insurance device to the user e.g. an insurance card etc. For example the insurance provider may maintain an insurance record of the user at a database. An exemplary XML formatted user insurance record may take a form similar to the following 

Upon establishing an insurance policy with the insurance provider the user may submit their insurance information e.g. the insurance ID user information etc. to a merchant upon visiting the office purchasing a healthcare product at a pharmacy e.g. at in and or the like. The merchant may perform an insurance provider pre check e.g. checking whether the provider is an in network provider the coverage of the insurance policy and or the like. Based on the retrieved insurance coverage information the merchant may generate a medical bill including a calculated insured amount and a user responsibility amount.

For example the user may receive a payment bill indicating the details of the treatment and the payment amount due including an amount of the insurance coverage and the patient s co pay amount. In one implementation the user may receive a printed bill at the POS terminal at the hospital may receive an electronic bill in the email instant messaging a healthcare web portal a mobile wallet and or the like. The merchant may pre check the insurance information of the patient and thus make an estimate of the insured amount and user co payment amount which may be reflected into the medical bill . For example in one implementation an exemplary XML implementation of the medical bill may take a form similar to 

In one implementation the merchant may generate a HTTP POST message to the RUAP server seeking for medical claim wherein the XML formatted message may take a form similar to 

In one implementation the RUAP server may obtain a BIN number e.g. a 16 digit code etc. from the received medical claim based on which the RUAP may determine insurance provider routing information . For example the RUAP server may query an insurance provider database e.g. in and obtain routing destination e.g. an IP address port address gateway etc. of the BIN.

In one implementation the RUAP server may generate a payment authorization request and route the message to the insurance provider based on the BIN based routing destination. For example the RUAP may generate a HTTPS POST message to make an authorization request in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted message of the authorization request for the RUAP server 

The insurance provider may review and verify the requested insurance payment. For example the insurance provider may assess the medical claim of the requested insured amount based on local annual income economic indicators market price living expenses and or the like. In one implementation the insurance provider may send an insurance payment authorization response back to the RUAP to authorize the payment. In another implementation the insurance provider may approve a payment amount which may not equate the requested amount and subject to further adjudication and reconciliation.

Upon reviewing and approving the requested insured amount the insurance provider may provide a response to the payment authorization request either to approve an entirety or a part of the requested insurance payment or to reject the payment request when the received medical claim is not eligible. For example the insurance provider may verify whether the estimated insured amount in the payment request matches the user s insurance coverage program whether the user s year to date insurance payment has exceeded a maximum amount if there is any whether the user s employment and or insurance program is in good standing and or the like.

In one implementation the insurance provider may generate a HTTPS POST message to make an authorization response in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted message of the authorization response for the RUAP 

In the above example as the user John Smith has an insurance policy that cap the yearly insurance payment to be 6 000.00 and the user has already received 3 000.00 payment year to date. Therefore the insurance provider may approve an amount capped by the remaining permitted insurance payment as 3 000.00. 

Upon receiving the insurance payment authorization the RUAP may process the insurance payment and may subject the payment to further adjudication and reconciliation. In one implementation the RUAP server may obtain an insurance provider approved amount and generate a claim adjustment request to the merchant . The merchant may in turn generate an adjusted user bill reflecting user co pay amount for user payment e.g. the user bill in .

In one implementation the RUAP may retrieve bank routing information e.g. the insurance bank information etc. and generate a fund transfer request to transfer the approved insurance amount. For example the RUAP may send the fund transfer request to a bank e.g. the insurance bank etc. which may take a form similar to the format in compliance with electronic fund transfers EFT and in some embodiments it may be directly made to the merchant via a third party bank e.g. absent the direction of the RUAP server. In another implementation the RUAP server may be integrated with a payment network e.g. VisaNet etc. which may facilitate the payment processing. In one implementation the RUAP server may debit the approved insurance amount from the insurance provider s account and credit to the merchant . For example the RUAP server may generate a HTTPS post for money transfer wherein the HTTPS POST message may take a form similar to the following 

For another example the fund transfer message may take a form similar to the Visa Single Message System SMS format Visa Original Credit Transaction OCT format and or the like. The merchant may then received a fund transfer from the insurance bank .

In one implementation the RUAP server may generate a transaction record for the insurance payment in the database . For example the RUAP may generate a database record. Below is an example of the transaction record for the RUAP server 

In another implementation the database may be a relational database responsive to Structured Query Language SQL commands. The RUAP server may execute a hypertext preprocessor PHP script including SQL commands to query the database for user transaction data and or the like. An example PHP SQL command listing illustrating substantive aspects of storing a transaction record in the database 

In an alternative implementation when the user does not submit insurance information to the merchant at the time of purchase transaction but seek for insurance reimbursement by submitting receipt information to the RUAP insurance adjudication may take place after the transaction. provides a data flow diagram illustrating post transaction insurance reimbursement within embodiments of the RUAP. Within implementations the user may obtain a receipt from a merchant which may take a similar form to the receipt in .

In one implementation the user may submit a reimbursement request e.g. including a snap image of the receipt a reimbursement account indication etc. to the RUAP server e.g. see also in . Upon obtaining item information by analyzing the receipt image and determining there is healthcare related service and products the RUAP server may retrieve a BIN number of the user profile for insurance claim. For example in one implementation the user may have registered the insurance plan information with the electronic wallet.

Within implementations the RUAP server may generate an insurance payment authorization message and route the message to the insurance provider based on the BIN number. The insurance provider may in turn review the payment request and generate a payment authorization response including an approved insurance payment amount to the RUAP server . For example in one implementation the insurance payment authorization request message and payment authorization response may take a similar for to in respectively.

Within implementations the RUAP server may generate a fund transfer request to the insurance bank to request the approved insurance amount reimbursed to the user which may take a form similar to the fund transfer processing messages in . Within implementations upon insurance payment the RUAP server may proceed to determine whether the insurance partially reimbursed purchase item service is eligible for healthcare restricted use account reimbursement e.g. FSA HSA etc. For example the RUAP server may reimburse the remaining payment amount with a FSA account e.g. to proceed with in .

Continuing on with user receiving a medical bill form the merchant e.g. as discussed in in response to the received medical bill e.g. at the POS terminal at the healthcare provider the patient may submit a medical payment request to an acquirer which may forward the payment request to the RUAP server for processing. For example the user may submit card information at the POS terminal. For another example the user may initiate an electronic wallet payment via NFC handshake e.g. as shown in and selects a payment account via his wallet. In one implementation the wallet account may comprise any credit card account debit account investment account alternative payment account loyalty points account and or the like. In a further implementation the user may have added restricted use accounts with the RUAP accounts such as Flexible Savings Accounts FSA one or more Health Savings Accounts HSA one or more government insurance programs i.e. Medicare or Medicaid various private insurance rules various other restricted use accounts such as employment benefit plans or employee pharmacy benefit plans and income deduction rules and or the like. Further implementations of restricted use account wallet enrollment are discussed in .

Within embodiments the user may select one or more accounts for payment and enter an amount to be charged with each account. For example the user may select an account FSA and enter an amount of 1 000.00 and another credit card account with an entered amount of 6 000.00. 

In one implementation the payment request may comprise information such as user profile information user insurance information user pre loaded account information medical bill information and or the like. For example in one implementation a POS terminal processing the user payment request may generate a HTTPS POST message including information of the payment request in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted message for the RUAP server 

Upon receiving the payment request message from the user the RUAP server may retrieve wallet information of the user e.g. account no and user ID as shown in the payment request . For each selected account indicated in the payment request the RUAP server may query for a routing destination for the account. For example when the user selects FSA account the RUAP server may select the routing destination to be the FSA administer sponsor of the user.

In one implementation the RUAP server may generate and route a payment request to the account issuer . For example the account issuer may comprise a restricted use account sponsor e.g. a FSA HSA administer an employer who sponsored employer benefit programs for its employees a government agency e.g. Medicare Medicaid etc. . In one implementation the RUAP server may generate separate payment request messages to different routing destinations. In the above example payment request when the user has selected a FSA payment account and a credit card payment the RUAP server may generate a payment request message routed to a FSA administering entity and a payment request message to a user s issuing bank of the credit card account.

Upon receiving a payment request the account issuer may retrieve rules to generate verification messages of the payment request. For example the verification message may indicate whether the requested payment complies with account requirement whether the requested payment amount has exceeded the maximum amount and or the like. For example the account issuer entity may generate a HTTPS POST message including a verification message in the form of data formatted according to the XML. Below is an example HTTP S POST message including an XML formatted verification message 

In the above example the FSA administer program verifies that the user s healthcare service code is eligible for FSA reimbursement and does not exceed the available balance in the account. As such the FSA administer program may approve the payment and generate a fund transfer request to the sponsor bank . For example the fund transfer message may take a form similar to message in which may trigger a fund transfer from the FSA account to the healthcare provider .

In one implementation the account issuer may verify the payment in real time or a nearly real time manner. In other implementations the account issuer may receive and process payment requests in batch files. In further implementations the RUAP server may perform an eligibility pre check if the user submitted account comprises a healthcare restricted use account e.g. FSA HSA etc and various rules may be applied to the payment request based on the type of the account.

In one implementation the RUAP server may generate a transaction record for the insurance payment in the database . For example below is an example XML formatted message of the transaction record for the RUAP server 

In another implementation the RUAP server may execute a hypertext preprocessor PHP script including SQL commands to query the database for user transaction data and or the like. An example PHP SQL command listing illustrating substantive aspects of storing a transaction record in the database 

In one embodiment the user may submit a request for registration with the RUAP e.g. via an email a text message a telephonic phone call to customer service and or the like. The RUAP may then provide a RUAP mobile component to the user. For example the RUAP may provide an indication a link etc. for downloading a mobile payment application to the user s mobile device via which the user may register one or more multi purpose accounts with the RUAP and process healthcare claims and payments in real time.

In one embodiment the user may download and install the RUAP component on a mobile device e.g. an Apple iPhone etc. In further implementation the RUAP may comprise a web portal feature sets in a cloud downloaded indicia from a cloud and or the like.

The user may then register with the RUAP via the installed RUAP component by submitting healthcare insurance information and setting up payment accounts . For example in one implementation the user may enroll restricted use accounts into their wallet for healthcare user payment. The restricted use rules may include those for one or more HSA FSA one or more government insurance programs i.e. Medicare or Medicaid various private insurance restricted use rules various other restricted use accounts such as employment benefit plans or employee pharmacy benefit plans and income deduction rules.

For example the user may associate his FSA HSA accounts with the RUAP. For another example the user may be presented rule choices within agreement and IRS policies and set up their rules and parameters for usage of their FSA HSA payment accounts. For example the user may set up a rule such that any medical purchase less than 100.00 until the end of the year will be paid by his FSA account.

In one embodiment the RUAP may provide default settings and rules for the user via a user interface e.g. the mobile component installed on the user s mobile device. In another embodiment the user may configure a variety of parameters. In the above example the user may edit the balancing amount of an account the end date the rules and or the like.

In one embodiment upon receiving user provided registration data and related parameters and spending rules the RUAP may validate the insurance information with the insurance provider and set up spending rules associated with the user s RUAP account to complete the registration. In another implementation the RUAP may register the user s mobile device for security such as via a hardware ID MAC address and or the like.

In one embodiment after the user is present at a healthcare provider for medical services the healthcare provider may submit medical claim information to an insurance provider at checkout wherein the insurance provider may approve an insured portion based on the user s insurance policy. In one implementation the user may send a payment file e.g. via text message email etc. to the RUAP including the amount of patient responsibility NPI plan membership SSN etc. The RUAP may then verify the submitted user data with verify against the healthcare registration record. If the record matches the RUAP may generate a please pay an amount 100.00 message and send to the user.

In one implementation the healthcare provider may send the remaining balance of the medical bill to the RUAP for user payment processing. In another implementation the user may receive a medical bill e.g. at a mobile device etc. in real time at checkout and enter the amount due into his mobile device for RUAP.

In one implementation the RUAP may determine a recommended payment plan to the user based on the remaining amount in the user s registered payment accounts with RUAP e.g. based on the transaction nature user s GPS location etc. and prompt the user to select a payment method . Upon receiving a confirmation of payment selection the RUAP may process payment with the healthcare accounts and the healthcare provider may send confirmation of payment .

In one embodiment upon receiving medical services the user may submit insurance information to healthcare provider e.g. by presenting his insurance card to a representative at a checkout desk. The healthcare provider may pre check the insurance eligibility such as whether the healthcare provider is in network whether the insurance term has expired and or the like. If it is not eligible e.g. expired insurance term healthcare provider out of network etc. the user may receive an insurance ineligibility notice . Otherwise the healthcare provider may generate a medical bill including an estimated insured amount. For example if the insurance provider has a standard coverage list for a procedure e.g. 40 for a root canal therapy at an in network dental provider etc. the healthcare provider may calculate an estimated insured amount by multiplying the total amount with 40 .

Alternatively the healthcare provider may generate a medical claim to the insurance provider for adjudication e.g. to provide an approved insurance payment amount. In one implementation the medical claim may be sent to the RUAP server which may generate an insurance authorization message e.g. see in .

Continuing on with the RUAP may retrieve a BIN number from the medical claim and determine a routing destination based on the BIN number and forward the authorization request to the insurance provider . Upon receiving the authorization adjudication request the insurance provider may parse the request to extract procedure and pricing information and determine an approved insurance amount . For example the insurance provider may assess the procedure and determine whether the healthcare provider provided pricing is reasonable based on a variety of factors such as but not limited to local living expenses market price economic indicator pricing information of peer healthcare providers in the same area average income and or the like.

In one implementation the insurance provider may further verify whether the user s insurance account is in good standing . For example if it is an employer benefit account the insurance provider may verify the user s employment with the sponsor e.g. the employer is in good standing.

In one implementation if the insurance account is no longer eligible for the user the RUAP may receive a payment denial message and be prompted to re submit insurance information . The RUAP may then provide the denial message to the user who may elect to re submit an insurance verification request . Alternatively the healthcare provider may be notified of the ineligibility of the insurance and may adjust the medical bill .

Upon verification at the insurance provider may compare the claimed amount e.g. the insured amount field in the medical claim message in with the insurance assessed amount e.g. at . If the approved amount meets with the claimed amount the insurance provider may authorize a transaction of the medical claim and withdraw the difference if the insurance approved amount is greater than the claimed and the healthcare provider may received the claimed amount . Otherwise if the insurance assessed amount is less than the requested claim the insurance provider may re assess the claim to determine whether to approve the difference e.g. to start a re adjudication process .

If eligible the RUAP may receive the payment request including user s account information e.g. via a healthcare card an electronic wallet etc. . The RUAP may retrieve the user s wallet card information and a routing destination and generate a payment request e.g. in for the routing destination . If the user submitted payment account is not a restricted use account e.g. a bank account etc. the RUAP may proceed with financial card transaction e.g. as further discussed in .

If it is a restricted use account the RUAP may send the payment request to the account sponsor e.g. a FSA HSA LOC account manager Medicare Medicaid management employer benefit account manager and or the like. The account sponsor may verify eligibility of the purchased product service and verify whether there is sufficient balance in the user s account for the requested payment amount .

Continuing on with if there is sufficient funds the account sponsor may approve the transaction and generate a fund transfer message for an issuer bank which may be processed in a similar manner as discussed in . The approved amount may be deducted from the user account and the healthcare provider may receive payment . Alternatively if there are insufficient funds in the account the account manager may elect to approve a payment of the available amount in the account .

Upon the transaction the account sponsor may generate a notification of the remaining balance and send it to the user . In one implementation the balance updates may be performed periodically e.g. weekly bi weekly etc. and or on an on demand basis.

Within implementations the mobile wallet application may be used by a user who is presented with a request to pay for healthcare service charges. When so used by the user the mobile wallet component makes a recommendation of which the user s account to offers the greatest advantage to the user when used to pay for healthcare service charges. The mobile wallet component provides a real time decision tool for the user to choose one or more healthcare accounts from which to withdraw currency or other funds in order to pay for a healthcare service. To assist the user in making the right choice the mobile wallet component is programmed to access local restricted use and regulatory business rules for healthcare services. The mobile wallet component is programmed to access i user specific data and ii balances held by the user in multiple payment accounts issued to the user who is financially responsible for the healthcare service charges. The mobile wallet component is further programmed to apply the restricted use and regulatory business rules to the online data i.e. user specific data and balances in order to make a recommendation to the user as to which of the user s payment accounts be used in paying for the healthcare service charges. The user may adopt or over ride the mobile wallet component s recommendations. Thereafter the user s smart phone may then be used at a healthcare service providers POS to make contactless payments from each of the user s account as were recommended by the mobile wallet component.

In one implementation the mobile wallet component may have online access to various information for processing against the restricted use and regulatory business rules. For instance local negative wealth impacting rules may provide various incentives and penalties as are applicable to a a FSA b a HSA c Government Insurance e.g. Medicare d Private Insurance e Other Restricted use Accounts e.g. employee benefits plans f Income deduction rules g etc.

In one implementation the mobile wallet component may have online access to various information for processing against insurance payment coverage rules. For instance insurance payment coverage rules may provide various incentives and penalties as are applicable to a a portion of the healthcare provided by the healthcare provider to the user that are and are not covered and thus will and will not be paid for via insurance coverage b specific spending limit rules for the healthcare provider and health provided by same c annual and life time limits for spending i by the person and ii by the insurance policy d limitations on the type and quantity of healthcare goods and or services type including but not limited to i pharmacy ii vision iii dental iv psychological v substance abuse rehabilitation vi etc. e limitation on payments payment to a certain type of merchant including but not limited to i big box retailer ii pharmacy retailer iii physician sale of goods and services iv etc. f co payments by insurance vehicle type g etc.

In one implementation the mobile wallet component may have online access to currency balances available for use and respective calendar dates of availability to pay the balance due bill for the healthcare provided by the healthcare provider. For instance these accounts may include a a Flexible Savings Account FSA where data retrieved may include a current currency balance a date by which all funds in FSA must be spent b a Health Savings Account HSA where data retrieved may include a liquid asset balance and a non liquid asset balance e.g. stocks mutual funds Certificates of Deposit etc. and an amount charged for a commission to trade an illiquid asset for a liquid asset that may be used to pay the balance due bill from the healthcare provider. c a remaining deductible contribution amount to a healthcare relates account amount for a specific year d a government insurance prepaid account e a private insurance deductible information e other restricted use accounts e.g. employee benefits plans f non restricted use payment accounts e.g. credit debit prepaid accounts including information for these accounts such as loyalty points and awards having currency equivalents that may be made available for payment against the balance due bill and award thresholds for such loyalty points and awards. The mobile wallet component may also have online access to a prediction as to the likely income and local financial bracket of the user for year in which the healthcare provider s balance billing is due.

In still another implementation a healthcare provider provides healthcare services e.g. medical treatment etc. and or products e.g. prescription drugs etc. to a user. One or more insurance carriers are queried by the healthcare provider to obtain payment for the healthcare provided by the healthcare provider to the user. When the insurance carriers have not paid or are unlikely to pay for the healthcare then the healthcare provider calculates a balance due bill for which the user is financially responsible. A PoS transmits the balance due bill to the user s smart phone. The smart phone executes a mobile wallet component to perform real time online access to various databases. This real time access obtains business rules and user data sufficient for the mobile wallet component to derive a recommendation as to which the user s accounts will provide the greatest advantage to the user when used to pay for healthcare service charges both goods and services of the balance due bill. The user s smart phone may then send a transmission to the healthcare provider s POS as a contactless payment from each of the user s recommended accounts. For each account in the recommendation i the healthcare provider s POS sends the user s proposed payment amount to an acquirer for the healthcare provider ii the acquirer sends an authorization request for the amount to a transaction handler i.e. VisaNet who sends the authorization request to the corresponding issuer of the user s account. Note that in addition to the VisaNet network provided by Visa Inc. other networks such as Discover and American Express may be used to accept healthcare service payment transactions. Moreover other payment options may also be made such as ACH or online bill pay each of which could be facilitated by either the foregoing implementations or by being routed to another payment portal and iii the issuer sends an authorization response back to the transaction handler who sends the authorization response back to the healthcare provider s acquirer. Assuming that the healthcare provider s payment is authorized by the issuer the smart phone receives an electronic acknowledgement of payment from each of the issuers for each of the accounts. Clearing and settlement will then follow for each account selected by the user to pay the healthcare provider.

In the foregoing implementation the derivation of the recommendation may rely on an application of mathematical quantitative techniques to make a healthcare payment decision recommendation. To do so the user s financial and insurance penalties and incentives are defined and modeled as a set of mathematical equations. Data that is also made available for the derivation are currency balances and dates as to availability of same in one or more accounts to which the user has access for payment of the balance due bill. The equations are subjected to computer analysis to yield an optimized solution as to those user s accounts that will provide the greatest advantage to the user when used to pay for healthcare service charges both goods and services as defined in the balance due bill from the healthcare provider. Optimizing the solution may requires one or more iterations to test against various circumstances and situations until the optimized solution is found for making the recommendation. The set of mathematical equations may apply any of several different approaches including but not limited to dynamic and linear programming as well as forecasting and simulation techniques such as the Monte Carlo method.

Within embodiments the RUAP server or a account issuer may act as a BIN sponsor. For example the user may submit healthcare benefit program information to the RUAP server in order to add a restricted use account e.g. FSA HSA LOC Medicare Medicaid employee benefit program food stamp etc. to the electronic wallet. For example in one implementation the user may fill in an online application form may call up a wallet management agent may send a request via instant messages emails and or the like. In another implementation the user may be provided the option to register with RUAP service when the user enrolls in a healthcare benefit program. For example an XML formatted user registration request including user information may take a form similar to the following 

In one implementation the RUAP may provide virtual prepaid card including a card number without sending physical magnetic cards e.g. an electronic mobile wallet entry for the user to download and instantiate on his mobile wallet e.g. see electronic wallet UIs in . For example in further implementations an additional wallet may be created for general spends.

In further implementations funds on the additional healthcare wallet account may be separately loaded by the user. For example fund loading to a FSA HSA account may be performed by the user setting aside a portion of his income. In another implementation the user may select a back up account e.g. a credit card account a debit account etc. as a default account for user co pay if payment request via the selected healthcare benefit account is denied by the account issuer e.g. an ineligible healthcare service etc.

In one implementation the RUAP server may retrieve the user s wallet information and determine a routing destination of the added account from the healthcare benefit program information to generate a verification request to the account issuer entity . For example the verification request may comprise information fields similar to that of the user submitted restricted use account information . Below is an example HTTP S POST message including an XML formatted message of the account access verification request message 

Within implementations the account issuer entity may verify the credentials and authorize the access request from RUAP. For example the account issuer may determine whether user credentials confirmation etc. are received to indicate authorization from account owner whether the benefit sponsor allows the access etc. In one implementation the account issuer may provisionally make a small amount deposit into the account that RUAP attempts to link to e.g. 0.65 etc. and request the user to enter the numeric value of the deposit to prove authorization. For example the user may receive confirmation request via email instant messaging phone calls text messages wallet notices and or the like to provide the deposited numeric value. For another example the account issuer may contact a healthcare benefit program sponsor e.g. a government agency representative an employer etc. to verify the account access request .

In one implementation the healthcare sponsor entity may verify the status of the restricted use account and may send a status including the currently available balance to the RUAP server. For example the account issuer entity may generate a HTTPS POST message including an XML formatted status message may take a form similar to the following 

Within implementations the RUAP server may constantly periodically and or intermittently send inquiries to the healthcare benefit sponsor entity for available balance updates.

In one implementation upon verifying with the account issuer entity the RUAP server may generate an additional entry on the user s electronic wallet wherein the entry may comprise the added account information user verification information restricted use account rules and or the like that may prompt the user to provide additional payment method into the electronic wallet. In one implementation the RUAP mobile wallet entry including the payment account entry may take a form similar to the following XML formatted data message 

In further implementation the new wallet account entry may be provided to the user wallet e.g. the user may view a newly added FSA account into his wallet and the account record may be saved at the database . For example the RUAP server may execute a hypertext preprocessor PHP script including SQL commands to query the database for wallet account data and or the like. An example PHP SQL command listing illustrating substantive aspects of storing a wallet account entry in the database 

In one implementation the associated applicability rules may be provided to a list of healthcare providers for pre check purposes. For example the RUAP server may provide the applicability rule to healthcare providers within a range of zip codes based on the user s location and or the like. For example the RUAP server may generate a HTTPS POST message including an XML formatted applicability rules message which may take a form similar to the following 

In the above example the RUAP may provide a list of applicable healthcare providers products procedures and or the like which are applicable for FSA account usage to a healthcare provider. In further implementations a user may configure user submitted rules for account usage as further discussed in .

In one implementation the account issuer may verify the account credentials user profile account status and or the like. If the account is in good standing the account issuer may generate and send a token for account access to the RUAP and the most recent balance information and account rules to the RUAP. For example in one implementation the account rules may include a list of procedure product code and or merchant category code MCC applicable for the account usage.

In one implementation the RUAP may store the security token and add a wallet entry to the wallet my account list e.g. in and the enrolled account is ready to use with wallet payment.

In one embodiment a user may check in at a kiosk at a healthcare provider s office e.g. a POS registry a hospital a clinic and or the like. The physician or other healthcare provider may provide healthcare service to the user . In one embodiment the physician s office determines whether or not the user is insured . If the user is insured then process moves to step . Otherwise the process moves to step .

In one implementation the physician s Point Of Service terminal POS may send a bill to the user s insurance company for the healthcare that was provided to the user. For example the healthcare provider may send the medical bill directly to an insurance provider via mail email instant message and or the like. For another example the healthcare provider may submit information related to the medical bill

In one embodiment at step the physician s point of service terminal receives partial compensation from the user s insurance company for the healthcare that was provided to the user. At step the physician s point of service terminal sends a balance due billing to the user s mobile device for instance to an email address or as a text message by use of the user s cellular telephone number.

In one embodiment at step the mobile device renders to the user a description of the bill as received for the balance due billing from the physician. The rendered bill shown in step number shows the amount due the description of the goods and or services of the healthcare provided to the user by the healthcare provider and a MCC of the physician or healthcare provider. At step the user s web enabled device executes an application which may also perform the rendering at step where a decisioning process takes place in order to satisfy the bill rendered at step .

In one embodiment the user may obtain and install a mobile application which determines payment accounts in order to pay the bill shown in step . To make the determination the mobile application draws upon one or more online databases to which it has access. Arrow shows online access to a plurality of databases . These databases include a database having miscellaneous data for the user a database for insurance payment coverage rules a database for local and government rules and one or more databases showing various account balances that have been issued by issuers to the user that have credit or currency available to satisfy the bill shown in step . Various rules for incentives and penalties are contained within in the databases as seen at block . For instance available balances for Medicare Part D provisions can be shown as being available to satisfy the bill in step .

The various databases can also include considerations for government insurance pharmacy benefits employer healthcare considerations employer pharmacy benefit plans employer or government subsidizing of healthcare goods and services and incentives or penalties to use accounts according to code provisions as provided by various business rules. The available deductibles and required deductibles for each of the one or more benefit plans can be found in one or more databases seen at reference numeral as well as various co pay requirements healthcare spending limits and various restricted use currency amounts. Various forfeiture rules such as are applicable to FSA can also be found in databases . The relative merits of using an HSA with its restricted use deposit benefits as well as the ability to grow its balance in terms of both compounding interest and the probability of a rise in the values of various equity holdings are also taken into consideration. The various user account balances maintained by the databases of block can be assessed via one or more issuers of the respective user accounts as seen at . Each issuer is an issuer to an account of the user who is an account holder on that account that was issued by the issuer.

After the mobile application seen at process receives information business rules and data via communication seen at arrow the process calculates a recommendation of one or more accounts having respective one or more amounts to be paid from each account. This recommendation will provide the most favorable tax cost and benefits to the user by using the amounts and respective accounts while also minimized penalties for such use. The mobile applications recommendations are rendered on the mobile device at step . The rendering on the web enabled mobile device may also guard access such as by prompting for and validating a user name and the password to enable making withdrawals from respective accounts for respective amounts suggested by process . Each account can be identified by a nickname or identifier and the nickname will be listed along with the amount that is recommended to be paid from that account toward the balance due billing shown at block .

For example in one implementation a Visa debit or credit account or a prepaid card may be suggested and identified by a nickname i.e. a partial account number along with an amount to be paid from that account. The user has the option to accept or reject the recommendation made as rendered on the web enabled mobile device at step . If the user decides to reject the payment recommendation an override can be submitted by the user to change the account and or amounts and to make effective the changes or to amend the recommendations as to the amounts to be paid from various accounts by the user to the physician. This payment is seen in step where the physician s POS receives a wireless communication from the user s web enabled mobile device. This wireless communication will contain data that reflects each account and each corresponding amount to be paid from each account to satisfy the balance due billing shown at step .

In one embodiment at arrows and the physician communicates with its acquirer and with a transaction handler i.e. VisaNet to send an authorization request for each payment for each account that is designated by the wireless communication from the web enabled mobile device to the physician s POS. The authorization request is sent from VisaNet via communication to the issuer of each account from which a payment is to be made. Each issuer respectively sends an authorization response to the authorization request back to VisaNet which is in turn sent from VisaNet to the physician s acquirer as shown by communication arrow and from there to the physician s acquirer via communication arrow back to the physician s POS. Once the physician s POS has received an authorization response for the payment from each account then the physician may deem that the bill as shown in block has been satisfied. Thereafter the physician s office with its acquirer will initiate a clearing and settlement process for each authorized payment from each account that was used to satisfy the balance due billing seen at block .

In one embodiment considerations are also input through various online databases to show insurance payment coverage rules . These business rules can include i that portion of healthcare services that are covered or not covered for a healthcare service that is rendered by a physician to a patient ii various specific spending rule limits and forfeiture rules various annual and lifetime co payment and maximum insurance payments by the person and or by the policy various limits for various goods and services which may or may not be reimbursable under insurance including pharmacy vision and dental payments to respective healthcare service providers iii insurance coverage for various types of merchants that are available as benefits and restriction of benefits including big box retailers retail pharmacy organizations physician owned organizations rehabilitation organizations various public and private hospitals as well as various private preferred providers for respective insurance plans and iv copayments that are available for each of several different insurance vehicles.

In one embodiment the various patient account balances may be retrieved to determine availability of currency or funds to pay the balance due bill received from the healthcare provider . These accounts can be assessed by online communication with the respective issuers to determine account balances. By way of example these balances can include i a balance for one or more Flexible Savings Accounts FSA including a current balance and the date by which all funds in each FSA account must be spent ii one or more HSA including a liquid asset balance a non liquid asset balance that can including stocks mutual funds certificates of deposit etc. In that some equities must be traded for cash in order to have access to liquid assets to satisfy the healthcare provider s balance due bill the retrieved information can include various requirements for selling stock or other securities including commission charges which information can be taken into consideration by the decisioning application in making the recommendation iii balances for government insurance prepaid accounts such as Medicare and Medicaid iv private insurance deductibles outstanding and yet to be paid v other restricted use accounts that are available to satisfy the healthcare provider s balance due bill such as employee benefit plans vi non restricted use accounts and likely cash flow predictions for in each one of those accounts such as credit available in credit cards cash available in debit card accounts cash available on prepaid card accounts as well as any currency that is available by converting loyalty points for each one of these accounts so that the loyalty points can be used as currency toward balance due billing payments. Also available are calculations made by the mobile application of award thresholds if a payment is made so as to thereby realize more loyalty points that can then be converted into currency to satisfy the healthcare provider s balance due billing.

The various inputs and data that are retrieved are subjected to various calculations as derived from steps through so that the mobile application can make a recommendation as to each account and each amount to be paid from each account that will be in the patient s best interest to pay a balance due billing received by the web enabled mobile device from the patient s physician or other healthcare provider via a point of service terminal.

Once the recommendations are accepted the process taken place as shown in steps through where the patient s web enabled mobile device transmits to the physician s point of service terminal a communication that describes the payment to be made from each account. An e commerce server shown at block processes each payment from each account as is described in through the issuer processer the acquirer processer and the transaction handler VisaNet for a clearing and settlement process by which the physician s accounts receivable satisfied as to the balance due payment made by the patient as shown in block .

In one implementation the patient may operate a web enabled mobile computing device that can be executing a World Wide Web browser or other special purpose software in order to access databases.

In one implementation the RUAP may allow the patient to view specifics of the balance due billing that the physician is charging the patient as well as funds for payment of the balance due billing. The patient can provide information to the web enabled mobile device in order to gain access to financial information stored by each issuer that issued an account to the patient. To access financial information for the patient a name and password can be required. Once supplied by the patient financial information can be sent and retrieved. This information can include account issuer identifiers e.g. account numbers the name of the issuer who issued the account numbers and any amounts that the financially responsible person wishes to pay on balance due billing to the doctor. Specifics of a bill that the patient can view may include i the healthcare organization name that provided healthcare services to the patient ii the name of the physician who treated the patient iii the name of the person who is financially responsible for the patient iv the name of the patient v the date the services were provided by the doctor to the patient vi a description of the healthcare goods and or services that were rendered to the patient by the doctor vii any amounts paid by the insurance company for the foregoing healthcare goods and services and viii any balance due by the person who is financially responsible for the patient to the healthcare organization.

In one implementation when the PoS terminal comprises a smart component e.g. as described in the PoS terminal may determine whether an item is eligible for any restricted use account. For example the PoS terminal may display a message showing a list of pharmaceutical items eligible for FSA and prompt a cashier and or the user to determine whether they would like to check out with the FSA account. If the user selects yes at the screen C the PoS terminal may generate a separate bill for the FSA eligible items and the user may proceed to payment with the FSA account for the eligible items only. In this case the user may not need a smart phone or electronic wallet to engage in RUAP service as the PoS terminal may provide a user interface for the user.

With reference to in some implementations the user may obtain a snapshot of the QR code displayed on the screen of the secure display or the POS terminal using a smartphone e.g. . For example the user s smartphone may have an app e.g. executing on it to detect and capture QR codes e.g. . For example the user may utilize registration features e.g. to align the QR code within the display of the smartphone. The app may in some implementations provide the user with the ability to zoom in e.g. or zoom out e.g. of the QR code to ensure that the image of the QR code fits within the dimensions of the screen of the smartphone. Upon aligning the QR code within the display of the smartphone the user may be able to obtain a snapshot of the QR code using a user interface element e.g. . The user may cancel the snap mobile payment procedure using a user interface element on the display of the smartphone.

With reference to in some implementations RUAP reimbursement may be utilized for authentication verification purposes and for providing digital consent for disclosure of personal and or private information. For example a user visiting his her doctor may be required to provide informed consent to disclosing personal information e.g. medical records to the doctor. The doctor s terminal may generate a QR code embodying the doctor s digital certificate as well as information on the type content of medical records of the user that are requested e.g. . The user may snap the QR code via the user s mobile device. The user s mobile device may generate a request for records release according to the QR code and also serve as verification that the request is obtained from a personal trusted device e.g. the user s mobile device . In alternate implementations the user may be able to select the personal information that the user would like to reveal to the healthcare provider and the user s mobile device may generate a QR code for the doctor s terminal to obtain a snapshot for retrieving the user s medical information. In some implementations the QR code may also include payment information e.g. the user s pay account information or the doctor s acquirer information along with the information on controlled release of personal information.

In some implementations the RUAP may facilitate P2P transactions via pre filled modifiable QR payment codes e.g. . For example a first user having a public profile page e.g. may place an image of a QR code in the public profile e.g. . For example the QR code may include a predetermined payment amount for a purchase transaction initiated by capturing a snapshot of the QR code. In some implementations the predetermined amount may be 0 e.g. a 0 QR pay code . A second user may capture a snapshot of the QR pay code using a mobile device and may set an amount that the second user would like to pay the first user via the second user s mobile device. The second user s mobile device may provide the information encoded within the QR code along with the second user chosen payment amount to a payment network for transaction processing.

It is to be understood that the various aspects described herein of snap mobile payment may be utilized for any controlled exchange of information and or payment. For example with reference to in some implementations a user may obtain pay per view programming via snap mobile payment e.g. . For example a television display may provide an advertisement including programming information e.g. as well as a QR pay code for obtain the programming content e.g. . The QR code may include information identifying the programming information as well as information identifying the television subscriber account information television machine address and or the like. The user may obtain a snapshot of the QR code and provide the information embodied in the QR code along with information from the user s mobile device e.g. subscriber account number linked to the user s virtual wallet pay account information and or the like . Upon processing of the payment information by the payment network the payment network may provide an indication to the television programming provider of the payment completion and the television programming provider may stream the programming content to the user s television. As another example a similar flow may be utilized for in flight entertainment e.g. wherein an in flight screen may provide programming information as well as a QR pay code for the user to snap for in flight entertainment initiation. As another example a billboard wall hanging poster in store advertisement hoarding etc. e.g. may include an offer for a product service and a QR code including merchant information and product information identifying a purchase amount and or the like. The user may snap the QR code with the user s mobile device linked to the user s virtual wallet to purchase the product and or service and if applicable the product may be directly shipped to the user s address as specified by the purchase information exchanged with the payment network as part of the purchase request sent by the user s mobile device. As another example newspapers e.g. may include offers advertisements job postings and or the like including QR codes e.g. embodying the information necessary for the user to initiate a purchase transaction with the payment network. It is to be understood that any aspects of implementing snap mobile payment discussed in any of the implementations herein and or their equivalents may be utilized in any other implementations discussed herein and or their equivalents.

With reference to in some implementations upon selecting the option to utilize the snap mobile payment procedure the merchant checkout webpage e.g. may provide via the browser application a QR code e.g. including information on the items in the virtual shopping cart as well as merchant information for the payment network to process the purchase transaction e.g. a privacy token alias linked to an acquirer financial account of the merchant . In some implementations the webpage may be displayed via a secure display of a trusted computing device of the user. For example as a security measure the position of the QR code frame e.g. within the display may be randomly varied to prevent a snapshot of the QR code from being obtained by fraudulent means e.g. tampering with the trusted computing device . In some implementations a security image e.g. pre selected by the user may be displayed on the screen so that the user may verify as being accurate. In some implementations the image may be encrypted by the RUAP before providing it to the trusted computing device. In some implementations the trusted computing device may be the only device to hold a decryption key required to decrypt and successfully display the image on the secure display to the user.

With reference to in some implementations upon obtaining a snapshot of the merchant product QR code the user s smartphone may extract the product and merchant data stored within the QR code and utilize an account for the user s virtual wallet linked to the user s smartphone to generate a purchase transaction request for processing by a payment network. Upon completion of processing of the payment transaction by the payment network using the information provided by the user s smartphone the merchant website via the browser application may provide a purchase receipt for the user. With reference to in implementations where the user utilizes the snap mobile payment procedure at a brick and mortar store the POS terminal may display a purchase receipt for the user. In some implementations the payment network may provide a purchaser receipt directly to the smartphone of the user. In further implementations the user may enter a phone number email address instant messenger id wallet id social id and or the like to the merchant PoS terminal so that the terminal may send an electronic receipt to the user via email SMS instant messaging wallet messaging social messaging and or the like.

In one implementation upon providing an electronic receipt the RUAP may determine whether items in the receipt are eligible for a restricted use account. For example the RUAP may provide a RUAP alert notifying the user that one or more items are eligible for FSA account usage and inquire whether the user would like to claim a refund from the FSA account. In one implementation the user may select to email e receipt for refund and the RUAP may automatically forward the electronic receipt to the RUAP server for reimbursement processing e.g. continuing on with in .

With reference to in some implementations a user may be advantageously able to provide user settings into a device producing a QR code for a purchase transaction and then capture the QR code using the user s mobile device. For example a display device of a point of sale terminal may be displaying a checkout screen such as a web browser executing on a client e.g. displaying a checkout webpage of an online shopping website e.g. . In some implementations the checkout screen may provide a user interface element e.g. whereby the user can indicate the desire to utilize snap mobile payment. For example if the user activates element the website may generate a QR code using default settings of the user and display the QR code e.g. on the screen of the client for the user to capture using the user s mobile device. In some implementations the user may be able to activate a user interface element e.g. whereby the client may display a pop up menu e.g. with additional options that the user may select from. For example the website may provide user selection options similar to those discussed above in the description with reference to . In some implementations the website may modify the QR code in real time as the user modifies settings provided by activating the user interface element . Once the user has modified the settings using the pop up menu the user may capture a snapshot of the QR code to initiate purchase transaction processing.

In one implementation the RUAP may generate a RUAP alert along with the pop up window when one or more items are eligible for restricted use accounts . For another example the RUAP may provide account recommendation by listing eligible restricted use account e.g. FSA as shown in on top of the account list.

With reference to in some implementations the RUAP may provide the user with a user interface to modify the user s snap mobile payment settings. For example the RUAP may provide a web interface e.g. . For example the user may be able to modify security settings of the user s virtual wallet e.g. using the web interface. For example the user may review a list of trusted device e.g. via which the user may access the user s virtual wallet. In some implementations the web interface may provide a user interface element to add a trusted device e.g. . The web interface may also provide the user with additional security options. For example the user be able to set a security passphrase e.g. modify settings for when the user should be challenged before authorizing a purchase transaction e.g. the type style of presentation of the security features e.g. and a security image to be displayed on the terminal utilized in snap mobile payment e.g. . In various implementations the user may be able to access other services including modifying user profiles accounts account preferences adding cards obtaining offers and coupons locating ATM machines etc.

With reference to in some implementations the app executing on the device of the user may include an app interface providing various features for the user. In some implementations the app may be configured to recognize product identifiers e.g. barcodes QR codes etc. e.g. . In some implementations the user may be required to sign in to the app to enable its features. Once enabled the camera may provide in person one tap purchasing features for the user. For example the client device may have a camera via which the app may acquire images video data streaming live video and or the like e.g. . The app may be configured to analyze the incoming data and search e.g. for a product identifier e.g. such as QR codes and . In some implementations the app may overlay cross hairs target box and or like alignment reference markers e.g. so that a user may align the product identifier using the reference markers so facilitate product identifier recognition and interpretation. In some implementations the app may include interface elements to allow the user to switch back and forth between the product identification mode and product offer interface display screens see e.g. so that a user may accurately study deals available to the user before capturing a product identifier. In some implementations the app may provide the user with the ability to view prior product identifier captures see e.g. so that the user may be able to better decide which product identifier the user desires to capture. In some implementations the user may desire to cancel product purchasing the app may provide the user with a user interface element e.g. to cancel the product identifier recognition procedure and return to the prior interface screen the user was utilizing. In some implementations the user may be provided with information about products user settings merchants offers etc. in list form see e.g. so that the user may better understand the user s purchasing options. Various other features may be provided for in the app see e.g. .

With reference to in some implementations the app may include an indication of the location e.g. name of the merchant store geographical location information about the aisle within the merchant store etc. of the user e.g. . The app may provide an indication of a pay amount due for the purchase of the product e.g. . In some implementations the app may provide various options for the user to pay the amount for purchasing the product s . For example the app may utilize the GPS coordinates to determine the merchant store within the user is present and direct the user to a website of the merchant. In some implementations the RUAP may provide an API for participating merchants directly to facilitate transaction processing. In some implementations a merchant branded RUAP application may be developed with the RUAP functionality which may directly connect the user into the merchant s transaction processing system. For example the user may choose from a number of accounts e.g. credit cards debit cards prepaid cards etc. from various issuers e.g. under the account type RU restricted use at . In some implementations the app may provide the user the option to pay the purchase amount using funds included in an account of the user e.g. a checking savings money market current account etc. e.g. a FSA account . In some implementations the user may have set default options for which card bank account etc. to use for the purchase transactions via the app. In some implementations such setting of default options may allow the user to initiate the purchase transaction via a single click tap swipe and or other remedial user input action e.g. . In some implementations when the user utilizes such an option the app may utilize the default settings of the user to initiate the purchase transaction. In some implementations the app may allow the user to utilize other accounts e.g. Google Checkout Paypal account etc. to pay for the purchase transaction e.g. . In some implementations the app may allow the user to utilize rewards points airline miles hotel points electronic coupons printed coupons e.g. by capturing the printed coupons similar to the product identifier etc. to pay for the purchase transaction e.g. . In some implementations the app may provide an option to provide express authorization before initiating the purchase transaction e.g. . In some implementations the app may provide a progress indicator provide indication on the progress of the transaction after the user has selected an option to initiate the purchase transaction e.g. . In some implementations the app may provide the user with historical information on the user s prior purchases via the app e.g. . In some implementations the app may provide the user with an option to share information about the purchase e.g. via email SMS wall posting on Facebook tweet on Twitter etc. with other users and or control information shared with the merchant acquirer payment network etc. to process the purchase transaction e.g. . In some implementations the app may provide the user an option to display the product identification information captured by the client device e.g. in order to show a customer service representative at the exit of a store the product information e.g. . In some implementations the user app device and or RUAP may encounter an error in the processing. In such scenarios the user may be able to chat with a customer service representative e.g. VerifyChat to resolve the difficulties in the purchase transaction procedure.

In some implementations the user may select to conduct the transaction using a one time anonymized credit card number see e.g. . For example the RUAP may utilize a pre designated anonymized set of card details see e.g. AnonCard1 AnonCard2 . As another example the RUAP may generate e.g. in real time a one time anonymous set of card details to securely complete the purchase transaction e.g. Anon It 1X . In such implementations the app may automatically set the user profile settings such that the any personal identifying information of the user will not be provided to the merchant and or other entities. In some implementations the user may be required to enter a user name and password to enable the anonymization features.

With reference to in some implementations the user interface elements of the snap mobile payment app may be advantageously arranged to provide the user the ability to process a purchase with customized payment parameters with a minimum number of user gestures applied to the user s mobile device. For example the user may be provided with an overloaded user interface element e.g. . For example if the user has a QR pay code within the viewing angle of a camera included in the user s mobile device the user may activate element to snap the QR code and utilize predetermined default settings to process the purchase based on the QR code. However if the user wishes to customize the payment parameters the user may activate user interface element e.g. press and continue to hold . Upon doing so the app may provide a pop up menu e.g. providing a variety of payment customization choices such as those provided previously. The user may e.g. drag the user s finger to the appropriate settings the user prefers and release the user s finger from the touchscreen of the user s mobile device to select the setting for payment processing. In alternate implementations the payment settings options e.g. and QR capture activation buttons e.g. e.g. may provide even more settings that those displayed in the initial screen may be included in the user interface along with a window e.g. for capturing the QR code via the mobile device s camera. In alternate implementations the user s mobile device may generate a hybrid QR code payment settings graphic and the POS terminal or user s trusted computing device may capture the entire graphic for payment processing.

In one embodiment for example a user may select the option current items as shown in the left most user interface of . When the current items option is selected the middle user interface may be displayed. As shown the middle user interface may provide a current list of items in a user s shopping cart . A user may select an item for example item to view product description of the selected item and or other items from the same merchant. The price and total payable information may also be displayed along with a QR code that captures the information necessary to effect a snap mobile purchase transaction.

With reference to in another embodiment a user may select the bills option. Upon selecting the bills option the user interface may display a list of bills and or receipts from one or more merchants. Next to each of the bills additional information such as date of visit whether items from multiple stores are present last bill payment date auto payment number of items and or the like may be displayed. In one example the wallet shop bill dated Jan. 20 2015 may be selected. The wallet shop bill selection may display a user interface that provides a variety of information regarding the selected bill. For example the user interface may display a list of items purchased a total number of items and the corresponding value. For example as shown at the user may elect to pay for a bill for Knee Surgery performed at Jan. 20 2015 which comprises details of the healthcare treatment performed for the user

A user may now select any of the items and select buy again to add purchase the items. The user may also refresh offers to clear any invalid offers from last time and or search for new offers that may be applicable for the current purchase. As shown in a user may select two items for repeat purchase. Upon addition a message may be displayed to confirm the addition of the two items which makes the total number of items in the cart .

In some implementations the RUAP wallet may provide the RUAP with the GPS location of the user. Based on the GPS location of the user the RUAP may determine the context of the user e.g. whether the user is in a store doctor s office hospital postal service office etc. . Based on the context the user app may present the appropriate fields to the user from which the user may select fields and or field values to send as part of the purchase order transmission. For example a user may go to doctor s office and desire to pay the co pay for doctor s appointment. In addition to basic transactional information such as account number and name the app may provide the user the ability to select to transfer medical records health information which may be provided to the medical provider insurance company as well as the transaction processor to reconcile payments between the parties. In some implementations the records may be sent in a Health Insurance Portability and Accountability Act HIPAA compliant data format and encrypted and only the recipients who are authorized to view such records may have appropriate decryption keys to decrypt and view the private user information.

With reference to in one embodiment the wallet mobile application may provide a user with a number of options for paying for a transaction via the wallet mode. In one implementation an example user interface for making a payment is shown. The user interface may clearly identify the amount and the currency for the transaction. The amount may be the amount payable and the currency may include real currencies such as dollars and euros as well as virtual currencies such as reward points. The amount of the transaction may also be prominently displayed on the user interface. The user may select the funds tab to select one or more forms of payment which may include various credit debit gift rewards and or prepaid cards. The user may also have the option of paying wholly or in part with reward points. For example the graphical indicator on the user interface shows the number of points available the graphical indicator shows the number of points to be used towards the amount due 234.56 and the equivalent of the number of points in a selected currency USD for example .

In one implementation the user may combine funds from multiple sources to pay for the transaction. The amount displayed on the user interface may provide an indication of the amount of total funds covered so far by the selected forms of payment e.g. Discover card and rewards points . The user may choose another form of payment or adjust the amount to be debited from one or more forms of payment until the amount matches the amount payable . Once the amounts to be debited from one or more forms of payment are finalized by the user payment authorization may begin.

In one implementation the user may select a secure authorization of the transaction by selecting the cloak button to effectively cloak or anonymize some e.g. pre configured or all identifying information such that when the user selects pay button the transaction authorization is conducted in a secure and anonymous manner. In another implementation the user may select the pay button which may use standard authorization techniques for transaction processing. In yet another implementation when the user selects the social button a message regarding the transaction may be communicated to one of more social networks set up by the user which may post or announce the purchase transaction in a social forum such as a wall post or a tweet. In one implementation the user may select a social payment processing option . The indicator may show the authorizing and sending social share data in progress.

In another implementation a restricted payment mode may be activated for certain purchase activities such as prescription purchases. The mode may be activated in accordance with rules defined by issuers insurers merchants payment processor and or other entities to facilitate processing of specialized goods and services. In this mode the user may scroll down the list of forms of payments under the funds tab to select specialized accounts such as a flexible spending account FSA health savings account HSA and or the like and amounts to be debited to the selected accounts. In one implementation such restricted payment mode processing may disable social sharing of purchase information.

In one embodiment the wallet mobile application may facilitate importing of funds via the import funds user interface . For example a user who is unemployed may obtain unemployment benefit fund via the wallet mobile application. In one implementation the entity providing the funds may also configure rules for using the fund as shown by the processing indicator message . The wallet may read and apply the rules prior and may reject any purchases with the unemployment funds that fail to meet the criteria set by the rules. Example criteria may include for example merchant category code MCC time of transaction location of transaction and or the like. As an example a transaction with a grocery merchant having MCC may be approved while a transaction with a bar merchant having an MCC may be refused.

With reference to in some other embodiments a user may select merchants from the list of options in the shopping mode to view a select list of merchants . In one implementation the merchants in the list may be affiliated to the wallet or have affinity relationship with the wallet. In another implementation the merchants may include a list of merchants meeting a user defined or other criteria. For example the list may be one that is curated by the user merchants where the user most frequently shops or spends more than an x amount of sum or shopped for three consecutive months and or the like. In one implementation the user may further select one of the merchants Amazon for example. The user may then navigate through the merchant s listings to find items of interest such as . Directly through the wallet and without visiting the merchant site from a separate page the user may make a selection of an item from the catalog of Amazon . As shown in the right most user interface of the selected item may then be added to cart. The message indicates that the selected item has been added to the cart and updated number of items in the cart is now 13.

With reference to in one embodiment there may be a local proximity option which may be selected by a user to view a list of merchants that are geographically in close proximity to the user. For example the list of merchants may be the merchants that are located close to the user. In one implementation the mobile application may further identify when the user in a store based on the user s location. For example position icon may be displayed next to a store e.g. Walgreens when the user is in close proximity to the store. In one implementation the mobile application may refresh its location periodically in case the user moved away from the store e.g. Walgreens . In a further implementation the user may navigate the offerings of the selected Walgreens store through the mobile application. For example the user may navigate using the mobile application to items available on aisle of Walgreens. In one implementation the user may select corn from his or her mobile application to add to cart . In one implementation the wallet shopping cart may provide a RUAP alert notifying the purchased items e.g. grocery items are eligible for food voucher redemption.

With reference to in another embodiment the local proximity option may include a store map and a real time map features among others. For example upon selecting the Walgreens store the user may launch an aisle map which displays a map showing the organization of the store and the position of the user indicated by a yellow circle . In one implementation the user may easily configure the map to add one or more other users e.g. user s kids to share each other s location within the store. In another implementation the user may have the option to launch a store view similar to street views in maps. The store view may display images video of the user s surrounding. For example if the user is about to enter aisle the store view map may show the view of aisle . Further the user may manipulate the orientation of the map using the navigation tool to move the store view forwards backwards right left as well clockwise and counterclockwise rotation.

In further implementations the RUAP may tag the store map view e.g. to indicate purchase item categories that are potentially eligible for restricted account usage. For example products in the grocery area may be eligible for the user s food stamp voucher usage products in the pharmacy area may be eligible for various healthcare restricted use accounts e.g. FSA HSA etc.

For example in one implementation when the user operate the camera enabled device to obtain a view inside the merchant store the user may also obtain augmented reality labels which identifies various products items on the shelf and show one or more possible eligible restricted use accounts . For example over the counter drugs may be labeled as eligible for FSA HSA HRA etc. grocery products may be eligible for food stamp usage and infant food may be eligible for a children nutrition benefit account and or the like.

In one embodiment a user may select the snap mode to access its snap features. The snap mode may handle any machine readable representation of data. Examples of such data may include linear and 2D bar codes such as UPC code and QR codes. These codes may be found on receipts product packaging and or the like. The snap mode may also process and handle pictures of receipts products offers credit cards or other payment devices and or the like. An example user interface in snap mode is shown in . A user may use his or her mobile phone to take a picture of a QR code and or a barcode . In one implementation the bar and snap frame may assist the user in snapping codes properly. For example the snap frame as shown does not capture the entirety of the code . As such the code captured in this view may not be resolvable as information in the code may be incomplete. This is indicated by the message on the bar that indicates that the snap mode is still seeking the code. The user may modify the zoom level of the camera to facilitate snapping the QR code. When the code is completely framed by the snap frame the bar message may be updated to for example snap found. Upon finding the code in one implementation the user may initiate code capture using the mobile device camera see . In another implementation the snap mode may automatically snap the code using the mobile device camera see . In some implementations the virtual wallet application may optionally apply a Global Positioning System tag see to the QR code before storing it or utilizing it in a transaction.

With reference to in one embodiment the snap mode may facilitate payment reallocation post transaction. For example a user may buy grocery and prescription items from a retailer Acme Supermarket. The user may inadvertently or for ease of checkout for example use his or her Visa card to pay for both grocery and prescription items. However the user may have an FSA account that could be used to pay for prescription items and which would provide the user tax benefits. In such a situation the user may use the snap mode to initiate transaction reallocation.

As shown the user may enter a search term e.g. bills in the search bar . The user may then identify in the tab the receipt the user wants to reallocate. Alternatively the user may directly snap a picture of a barcode on a receipt and the snap mode may generate and display a receipt using information from the barcode. The user may now reallocate . In some implementations the user may also dispute the transaction or archive the receipt .

In one implementation when the reallocate button is selected the wallet application may perform optical character recognition OCR of the receipt. Each of the items in the receipt may then be examined to identify one or more items which could be charged to which payment device or account for tax or other benefits such as cash back reward points etc. In this example there is a tax benefit if the prescription medication charged to the user s Visa card is charged to the user s FSA. The wallet application may then perform the reallocation as the back end. The reallocation process may include the wallet contacting the payment processor to credit the amount of the prescription medication to the Visa card and debit the same amount to the user s FSA account. In an alternate implementation the payment processor e.g. Visa or MasterCard may obtain and OCR the receipt identify items and payment accounts for reallocation and perform the reallocation. In one implementation the wallet application may request the user to confirm reallocation of charges for the selected items to another payment account. The receipt may be generated after the completion of the reallocation process. As discussed the receipt shows that some charges have been moved from the Visa account to the FSA.

With reference to in one embodiment the snap mode may facilitate payment via pay code such as barcodes or QR codes. For example a user may snap a QR code of a transaction that is not yet complete. The QR code may be displayed at a merchant POS terminal a web site or a web application and may be encoded with information identifying items for purchase merchant details and other relevant information. When the user snaps such as a QR code the snap mode may decode the information in the QR code and may use the decoded information to generate a receipt . Once the QR code is identified the navigation bar may indicate that the pay code is identified. The user may now have an option to add to cart pay with a default payment account or pay with wallet .

In one implementation the user may decide to pay with default . The wallet application may then use the user s default method of payment in this example the wallet to complete the purchase transaction. Upon completion of the transaction a receipt may be automatically generated for proof of purchase. The user interface may also be updated to provide other options for handling a completed transaction. Example options include social to share purchase information with others reallocate as discussed with regard to and archive to store the receipt.

With reference to in one embodiment the snap mode may also facilitate offer identification application and storage for future use. For example in one implementation a user may snap an offer code e.g. a bar code a QR code and or the like . The wallet application may then generate an offer text from the information encoded in the offer code. The user may perform a number of actions on the offer code. For example the user use the find button to find all merchants who accept the offer code merchants in the proximity who accept the offer code products from merchants that qualify for the offer code and or the like. The user may also apply the offer code to items that are currently in the cart using the add to cart button . Furthermore the user may also save the offer for future use by selecting the save button .

In one implementation after the offer or coupon is applied the user may have the option to find qualifying merchants and or products using find the user may go to the wallet using and the user may also save the offer or coupon for later use.

With reference to in one embodiment the snap mode may also offer facilities for adding a funding source to the wallet application. In one implementation a pay card such as a credit card debit card pre paid card smart card and other pay accounts may have an associated code such as a bar code or QR code. Such a code may have encoded therein pay card information including but not limited to name address pay card type pay card account details balance amount spending limit rewards balance and or the like. In one implementation the code may be found on a face of the physical pay card. In another implementation the code may be obtained by accessing an associated online account or another secure location. In yet another implementation the code may be printed on a letter accompanying the pay card. A user in one implementation may snap a picture of the code. The wallet application may identify the pay card and may display the textual information encoded in the pay card. The user may then perform verification of the information by selecting the verify button . In one implementation the verification may include contacting the issuer of the pay card for confirmation of the decoded information and any other relevant information. In one implementation the user may add the pay card to the wallet by selecting the add to wallet button . The instruction to add the pay card to the wallet may cause the pay card to appear as one of the forms of payment under the funds tab discussed in . The user may also cancel importing of the pay card as a funding source by selecting the cancel button . When the pay card has been added to the wallet the user interface may be updated to indicate that the importing is complete via the notification display . The user may then access the wallet to begin using the added pay card as a funding source.

The wallet application may query the storage areas in the mobile device or elsewhere e.g. one or more databases and or tables remote from the mobile device for prior transactions. The user interface may then display the results of the query such as transactions . The user interface may identify a type of the transaction e.g. previously shopped for items bills that have been captured by camera in a snap mode a person to person transfer the date of the transaction a description of the transaction including but not limited to a cart name cart contents indicator total cost merchant s involved in the transaction a link to obtain a shoptrail explained further below in greater detail offers relating to the transaction and any other relevant information. In some implementation any displayed transaction coupon bill etc. may be added to a cart for re purchase .

In one embodiment a user may select the history mode to view a history of filtered prior purchases and perform various actions on those prior purchases. For example a user may enter a merchant identifying information such as name product MCC and or the like in the search bar . In another implementation the user may use voice activated search feature to search the history. In another implementations the wallet application may display a pop up screen in which the user may enter advanced search filters keywords and or the like. The wallet application may query the storage areas in the mobile device or elsewhere e.g. one or more databases and or tables remote from the mobile device for transactions matching the search keywords. The user interface may then display the results of the query such as transactions . The user interface may identify a type of the transaction e.g. previously shopped for items bills that have been captured by camera in a snap mode a person to person transfer the date of the transaction a description of the transaction including but not limited to a cart name cart contents indicator total cost merchant s involved in the transaction a link to obtain a shoptrail explained further below in greater detail offers relating to the transaction and any other relevant information. In some implementation any displayed transaction coupon bill etc. may be added to a cart for re purchase .

With reference to in one embodiment the history mode may also include facilities for exporting receipts. The export receipts pop up may provide a number of options for exporting the receipts of transactions in the history. For example a user may use one or more of the options which include save to local mobile memory to server to a cloud account and or the like print to a printer fax email and or the like. The user may utilize his or her address book to look up email or fax number for exporting. The user may also specify format options for exporting receipts. Example format options may include without limitation text files .doc .txt .rtf iif etc. spreadsheet .csv .xls etc. image files .jpg .tff .png etc. portable document format .pdf postscript .ps and or the like. The user may then click or tap the export button to initiate export of receipts.

In further implementation if the RUAP does not automatically determine an item as eligible for any restricted use accounts e.g. an Ester C supplement a user may tap on the screen to select it and may view a list of accounts to select a user desired reallocation account e.g. any restricted use account loyalty account and or the like.

In further implementations the RUAP may identify a payment account that has been used to fulfill the transaction associated with the receipt e.g. a Visa account and or obtain account information from the barcode printed on the receipt . In one implementation the RUAP may match the 1234 Visa account with any of user s enrolled account in the wallet and recommend the user to reimburse funds into an identified Visa 1234 account if such account is identified from the wallet . In another implementation the RUAP may prompt the user to select other accounts for depositing reimbursement funds .

Continuing on with if the user has tapped on an account e.g. FSA at in to reimburse an eligible item the RUAP may generate a reimbursement request e.g. showing the user is going to reimburse NyQuil Lipcap from the selected FSA 123 account . In one implementation the user may indicate an account for depositing the reimbursement funds e.g. the Visa 1234 account auto identified from the receipt e.g. at in and or select other accounts.

In another implementation if the user selects to tap on in to reimburse Ester C for FSA 123 account as the RUAP does not identify Ester C as an eligible FSA item the RUAP may generate a reimbursement request but with a notification to the user that such reimbursement is subject to FSA review and may not be approved .

In some embodiments when a user activates the GUI element of the mobile device may provide a virtual mobile wallet application interface . In some embodiments the application interface may include a GUI element to initiate a payment communication e.g. transmitting a credit debit prepaid card number via NFC Bluetooth cellular communication . In some embodiments the mobile device may utilize default values for the payment information e.g. credit debit prepaid card information and communication mode e.g. NFC . In alternate embodiments the user may be able to modify the payment information prior to communicating with a PoS terminal to initiate the payment transaction. For example a GUI element may provide a mechanism to modify payment information without leaving the tap to pay screen provided by application interface see e.g. elements of . As another example a GUI element may when activated by the user present the user an application interface wherein the user may make more detailed adjustments to aspects of the payment mechanism e.g. card utilized anonymization security preferences etc. . In some embodiments the user may be able to quickly revert to utilizing default payment settings by activating a GUI element . In some embodiments the user may be able to stop a communication of payment information that is in progress by activating a GUI element tap to stop that the application interface presents during the communication of payment information.

With reference to in some embodiments the user may activate a GUI element when operating the virtual mobile wallet application in a payment activation application interface to obtain a menu of card selection options . For example the user may add a RUAP prepaid account to the wallet upon obtaining a card number. The user may activate any of the card selection options to quickly modify the payment information utilized in the communication to trigger the payment transaction. In some embodiments the user may activate GUI element to obtain an application interface my accounts for a more detailed view from which the user can make selections of payment options. For example the wallet accounts may include a tab for the user s enrolled restricted use accounts. For example a GUI element may describe types of payment options e.g. payment cards loyalty cards NFC tags etc. available to the user. The specific payment options may be depicted in GUI elements . In some embodiments the GUI elements may be arranged as a column browser with multiple columns see . In some embodiments the interface may provide a GUI element that the user can activate to add a new payment option to the existing payment options displayed in the GUI elements . For example as shown at the RUAP may list the user s FSA HSA LOC accounts enrolled in the wallet with its balance information.

With reference to in some embodiments activating a GUI element corresponding to a payment options may provide a detailed view of the payment option e.g. manage my card . The view may include a graphical view of the payment option providing information including without limitation card payment processor e.g. Visa card number payment mechanism e.g. Visa payWave cardholder name expiration date and or the like. The view may also include indications of information such as without limitation a current balance a maximum payment amount currently permissible using the card a date on which a balance payment is due and or the like. The view may include a GUI element that the user can activate to utilize the payment option in the purchase transaction initiation. In some embodiments the view may include a GUI element that the user can activate to view recent purchase transactions initiated using the payment option currently being displayed in e.g. a FSA account etc. . The view may also include a GUI element that the user can activate to add funds to the payment option currently being displayed in . In some embodiments the payment options may be arranged within a column browser interface such that user can scan through the various payment options e.g. by swiping a touchscreen of the mobile device see . As the user scans through the payment options GUI element may modify to indicate the user s position within the column browser interface.

With reference to the user may be able to view a record of recent transactions initiated using a payment option e.g. by activating GUI element of . In the recent transactions view the user may be provided with a record listing including information on a time of a purchase transaction when a description of the transaction what an amount of the transaction amount and a location of the transaction where . The user may be able to scroll through a long list of recent transactions by activating a GUI element view more . In some embodiments the user may activate a GUI element to obtain a view of transactions placed on a geographical map so that the user may understand better where each of the user s transactions originate.

In one implementation an example user interface for making a payment is shown. The user interface may clearly identify the amount and the currency for the transaction. The amount may be the amount payable and the currency may include real currencies such as dollars and euros as well as virtual currencies such as reward points. The user may select the funds tab to select one or more forms of payment which may include various credit debit gift rewards and or prepaid cards. The user may also have the option of paying wholly or in part with reward points. For example the graphical indicator on the user interface shows the number of points available the graphical indicator shows the number of points to be used towards the amount due 234.56 and the equivalent of the number of points in a selected currency USD for example .

In one implementation the user may combine funds from multiple sources to pay for the transaction. The amount displayed on the user interface may provide an indication of the amount of total funds covered so far by the selected forms of payment e.g. Discover card and rewards points . The user may choose another form of payment or adjust the amount to be debited from one or more forms of payment until the amount matches the amount payable . Once the amounts to be debited from one or more forms of payment are finalized by the user payment authorization may begin.

In one implementation the user may select a secure authorization of the transaction by selecting the cloak button to effectively cloak or anonymize some e.g. pre configured or all identifying information such that when the user selects pay button the transaction authorization is conducted in a secure and anonymous manner. In another implementation the user may select the pay button which may use standard authorization techniques for transaction processing. In yet another implementation when the user selects the social button a message regarding the transaction may be communicated to one of more social networks set up by the user which may post or announce the purchase transaction in a social forum such as a wall post or a tweet. In one implementation the user may select a social payment processing option . The indicator may show the authorizing and sending social share data in progress.

In another implementation a restricted payment mode may be activated for certain purchase activities such as prescription purchases. The mode may be activated in accordance with rules defined by issuers insurers merchants payment processor and or other entities to facilitate processing of specialized goods and services. In this mode the user may scroll down the list of forms of payments under the funds tab to select specialized accounts such as a FSA HSA and or the like and amounts to be debited to the selected accounts. In one implementation such restricted payment mode processing may disable social sharing of purchase information.

In one embodiment the wallet mobile application may facilitate importing of funds via the import funds user interface . For example a user who is unemployed may obtain unemployment benefit fund via the wallet mobile application. In one implementation the entity providing the funds may also configure rules for using the fund as shown by the processing indicator message . The wallet may read and apply the rules prior and may reject any purchases with the unemployment funds that fail to meet the criteria set by the rules. Example criteria may include for example merchant category code MCC time of transaction location of transaction and or the like. As an example a transaction with a grocery merchant having MCC may be approved while a transaction with a bar merchant having an MCC may be refused.

In various embodiments the user input may include but not be limited to a single tap e.g. a one tap mobile app purchasing embodiment of a touchscreen interface keyboard entry card swipe activating a RFID NFC enabled hardware device e.g. electronic card having multiple accounts smartphone tablet etc. within the user device mouse clicks depressing buttons on a joystick game console voice commands single multi touch gestures on a touch sensitive interface touching user interface elements on a touch sensitive display and or the like. In some embodiments the user wallet device may authenticate the user based on the user s wallet access input and provide virtual wallet features for the user.

In some embodiments upon authenticating the user for access to virtual wallet features the user wallet device may provide a transaction authorization input e.g. to a point of sale PoS client e.g. . For example the user wallet device may communicate with the PoS client via Bluetooth Wi Fi cellular communication one or two way near field communication NFC and or the like. In embodiments where the user utilizes a plastic card instead of the user wallet device the user may swipe the plastic card at the PoS client to transfer information from the plastic card into the PoS client. For example the PoS client may obtain as transaction authorization input track 1 data from the user s plastic card e.g. credit card debit card prepaid card charge card etc. such as the example track data provided below 

In embodiments where the user utilizes a user wallet device the user wallet device may provide payment information to the PoS client formatted according to a data formatting protocol appropriate to the communication mechanism employed in the communication between the user wallet device and the PoS client. An example listing of transaction authorization input substantially in the form of XML formatted data is provided below 

In some embodiments the PoS client may generate a card authorization request e.g. using the obtained transaction authorization input from the user wallet device and or product checkout data. An example listing of a card authorization request substantially in the form of a HTTP S POST message including XML formatted data is provided below 

In some embodiments the card authorization request generated by the user device may include a minimum of information to process the purchase transaction. For example this may improve the efficiency of communicating the purchase transaction request and may also advantageously improve the privacy protections provided to the user and or merchant. For example in some embodiments the card authorization request may include at least a session ID for the user s shopping session with the merchant. The session ID may be utilized by any component and or entity having the appropriate access authority to access a secure site on the merchant server to obtain alerts reminders and or other data about the transaction s within that shopping session between the user and the merchant. In some embodiments the PoS client may provide the generated card authorization request to the merchant server e.g. . The merchant server may forward the card authorization request to a pay gateway server e.g. for routing the card authorization request to the appropriate payment network for payment processing. For example the pay gateway server may be able to select from payment networks such as Visa Mastercard American Express Paypal etc. to process various types of transactions including but not limited to credit card debit card prepaid card B2B and or like transactions. In some embodiments the merchant server may query a database e.g. merchant acquirer database for a network address of the payment gateway server for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query. For example the merchant server may issue PHP SQL commands to query a database table such as Pay Gateways for a URL of the pay gateway server. An example payment gateway address query substantially in the form of PHP SQL commands is provided below 

In response the merchant acquirer database may provide the requested payment gateway address e.g. . The merchant server may forward the card authorization request to the pay gateway server using the provided address e.g. . In some embodiments upon receiving the card authorization request from the merchant server the pay gateway server may invoke a component to provide one or more services associated with purchase transaction authorization. For example the pay gateway server may invoke components for fraud prevention loyalty and or rewards and or other services for which the user merchant combination is authorized. The pay gateway server may forward the card authorization request to a healthcare collection portal server e.g. for payment processing. For example the pay gateway server may be able to select from payment networks such as Visa Mastercard American Express Paypal etc. to process various types of transactions including but not limited to credit card debit card prepaid card B2B and or like transactions. In some embodiments the pay gateway server may query a database e.g. pay gateway database for a network address of the payment network server for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query. For example the pay gateway server may issue PHP SQL commands to query a database table such as Pay Gateways for a URL of the healthcare collection portal server. An example payment network address query substantially in the form of PHP SQL commands is provided below 

In response the payment gateway database may provide the requested payment network address e.g. . The pay gateway server may forward the card authorization request to the healthcare collection portal server using the provided address e.g. .

With reference to in some embodiments the healthcare collection portal server may process the transaction so as to transfer funds for the purchase into an account stored on an acquirer of the merchant. For example the acquirer may be a financial institution maintaining an account of the merchant. For example the proceeds of transactions processed by the merchant may be deposited into an account maintained by at a server of the acquirer.

In some embodiments the healthcare collection portal server may generate a query e.g. for issuer server s corresponding to the user selected payment options. For example the user s account may be linked to one or more issuer financial institutions issuers such as banking institutions which issued the account s for the user. For example such accounts may include but not be limited to credit card debit card prepaid card checking savings money market certificates of deposit stored cash value accounts and or the like. Issuer server s e.g. of the issuer s may maintain details of the user s account s . In some embodiments a database e.g. healthcare collection portal database may store details of the issuer server s associated with the issuer s . In some embodiments the healthcare collection portal server may query a database e.g. healthcare collection portal database for a network address of the issuer s server s for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query. For example the merchant server may issue PHP SQL commands to query a database table such as Issuers for network address es of the issuer s server s . An example issuer server address es query substantially in the form of PHP SQL commands is provided below 

In response to obtaining the issuer server query e.g. the healthcare collection portal database may provide e.g. the requested issuer server data to the healthcare collection portal server. In some embodiments the healthcare collection portal server may utilize the issuer server data to generate funds authorization request s e.g. for each of the issuer server s selected based on the pre defined payment settings associated with the user s virtual wallet and or the user s payment options input and provide the funds authorization request s to the issuer server s . In some embodiments the funds authorization request s may include details such as but not limited to the costs to the user involved in the transaction card account details of the user user billing and or shipping information and or the like. An example listing of a funds authorization request substantially in the form of a HTTP S POST message including XML formatted data is provided below 

In some embodiments an issuer server may parse the authorization request s and based on the request details may query a database e.g. user profile database for data associated with an account linked to the user. For example the merchant server may issue PHP SQL commands to query a database table such as Accounts for user account s data. An example user account s query substantially in the form of PHP SQL commands is provided below 

In some embodiments on obtaining the user account s data e.g. the issuer server may determine whether the user can pay for the transaction using funds available in the account . For example the issuer server may determine whether the user has a sufficient balance remaining in the account sufficient credit associated with the account and or the like. Based on the determination the issuer server s may provide a funds authorization response e.g. to the healthcare collection portal server. For example the issuer server s may provide a HTTP S POST message similar to the examples above. In some embodiments if at least one issuer server determines that the user cannot pay for the transaction using the funds available in the account the healthcare collection portal server may request payment options again from the user e.g. by providing an authorization fail message to the user device and requesting the user device to provide new payment options and re attempt authorization for the purchase transaction. In some embodiments if the number of failed authorization attempts exceeds a threshold the healthcare collection portal server may abort the authorization process and provide an authorization fail message to the merchant server user device and or client.

In some embodiments the healthcare collection portal server may obtain the funds authorization response including a notification of successful authorization and parse the message to extract authorization details. Upon determining that the user possesses sufficient funds for the transaction e.g. the healthcare collection portal server may invoke a component to provide value add services for the user.

In some embodiments the healthcare collection portal server may generate a transaction data record from the authorization request and or authorization response and store the details of the transaction and authorization relating to the transaction in a transactions database. For example the healthcare collection portal server may issue PHP SQL commands to store the data to a database table such as Transactions . An example transaction store command substantially in the form of PHP SQL commands is provided below 

In some embodiments the healthcare collection portal server may forward a transaction authorization response e.g. to the user wallet device PoS client and or merchant server. The merchant may obtain the transaction authorization response and determine from it that the user possesses sufficient funds in the card account to conduct the transaction. The merchant server may add a record of the transaction for the user to a batch of transaction data relating to authorized transactions. For example the merchant may append the XML data pertaining to the user transaction to an XML data file comprising XML data for transactions that have been authorized for various users e.g. and store the XML data file e.g. in a database e.g. merchant database . For example a batch XML data file may be structured similar to the example XML data structure template provided below 

In some embodiments the server may also generate a purchase receipt e.g. and provide the purchase receipt to the client e.g. . The client may render and display e.g. the purchase receipt for the user. In some embodiments the user s wallet device may also provide a notification of successful authorization to the user. For example the PoS client user device may render a webpage electronic message text SMS message buffer a voicemail emit a ring tone and or play an audio message etc. and provide output including but not limited to sounds music audio video images tactile feedback vibration alerts e.g. on vibration capable client devices such as a smartphone etc. and or the like.

In some embodiments upon authenticating the user for access to virtual wallet features the user wallet device may provide a transaction authorization input e.g. to a point of sale PoS client. For example the user wallet device may communicate with the PoS client via Bluetooth Wi Fi cellular communication one or two way near field communication NFC and or the like. In embodiments where the user utilizes a plastic card instead of the user wallet device the user may swipe the plastic card at the PoS client to transfer information from the plastic card into the PoS client. In embodiments where the user utilizes a user wallet device the user wallet device may provide payment information to the PoS client formatted according to a data formatting protocol appropriate to the communication mechanism employed in the communication between the user wallet device and the PoS client.

In some embodiments the PoS client may obtain the transaction authorization input and parse the input to extract payment information from the transaction authorization input e.g. . For example the PoS client may utilize a parser such as the example parsers provided below in the discussion with reference to . The PoS client may generate a card authorization request e.g. using the obtained transaction authorization input from the user wallet device and or product checkout data.

In some embodiments the PoS client may provide the generated card authorization request to the merchant server. The merchant server may forward the card authorization request to a pay gateway server for routing the card authorization request to the appropriate payment network for payment processing. For example the pay gateway server may be able to select from payment networks such as Visa Mastercard American Express Paypal etc. to process various types of transactions including but not limited to credit card debit card prepaid card B2B and or like transactions. In some embodiments the merchant server may query a database e.g. for a network address of the payment gateway server for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query. In response the merchant acquirer database may provide the requested payment gateway address e.g. . The merchant server may forward the card authorization request to the pay gateway server using the provided address. In some embodiments upon receiving the card authorization request from the merchant server the pay gateway server may invoke a component to provide one or more service associated with purchase transaction authorization e.g. . For example the pay gateway server may invoke components for fraud prevention see e.g. VerifyChat loyalty and or rewards and or other services for which the user merchant combination is authorized.

The pay gateway server may forward the card authorization request to a healthcare collection portal server for payment processing e.g. . For example the pay gateway server may be able to select from payment networks such as Visa Mastercard American Express Paypal etc. to process various types of transactions including but not limited to credit card debit card prepaid card B2B and or like transactions. In some embodiments the pay gateway server may query a database e.g. for a network address of the payment network server for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query. In response the payment gateway database may provide the requested payment network address e.g. . The pay gateway server may forward the card authorization request to the healthcare collection portal server using the provided address e.g. .

With reference to in some embodiments the healthcare collection portal server may process the transaction so as to transfer funds for the purchase into an account stored on an acquirer of the merchant. For example the acquirer may be a financial institution maintaining an account of the merchant. For example the proceeds of transactions processed by the merchant may be deposited into an account maintained by at a server of the acquirer. In some embodiments the healthcare collection portal server may generate a query e.g. for issuer server s corresponding to the user selected payment options. For example the user s account may be linked to one or more issuer financial institutions issuers such as banking institutions which issued the account s for the user. For example such accounts may include but not be limited to credit card debit card prepaid card checking savings money market certificates of deposit stored cash value accounts and or the like. Issuer server s of the issuer s may maintain details of the user s account s . In some embodiments a database e.g. a healthcare collection portal database may store details of the issuer server s associated with the issuer s . In some embodiments the healthcare collection portal server may query a database e.g. for a network address of the issuer s server s for example by using a portion of a user payment card number or a user ID such as an email address as a keyword for the database query.

In response to obtaining the issuer server query the healthcare collection portal database may provide e.g. the requested issuer server data to the healthcare collection portal server. In some embodiments the healthcare collection portal server may utilize the issuer server data to generate funds authorization request s e.g. for each of the issuer server s selected based on the pre defined payment settings associated with the user s virtual wallet and or the user s payment options input and provide the funds authorization request s to the issuer server s . In some embodiments the funds authorization request s may include details such as but not limited to the costs to the user involved in the transaction card account details of the user user billing and or shipping information and or the like. In some embodiments an issuer server may parse the authorization request s e.g. and based on the request details may query a database e.g. for data associated with an account linked to the user.

In some embodiments on obtaining the user account s data e.g. the issuer server may determine whether the user can pay for the transaction using funds available in the account e.g. . For example the issuer server may determine whether the user has a sufficient balance remaining in the account sufficient credit associated with the account and or the like. Based on the determination the issuer server s may provide a funds authorization response e.g. to the healthcare collection portal server. In some embodiments if at least one issuer server determines that the user cannot pay for the transaction using the funds available in the account the healthcare collection portal server may request payment options again from the user e.g. by providing an authorization fail message to the user device and requesting the user device to provide new payment options and re attempt authorization for the purchase transaction. In some embodiments if the number of failed authorization attempts exceeds a threshold the healthcare collection portal server may abort the authorization process and provide an authorization fail message to the merchant server user device and or client.

In some embodiments the healthcare collection portal server may obtain the funds authorization response including a notification of successful authorization and parse the message to extract authorization details. Upon determining that the user possesses sufficient funds for the transaction e.g. the healthcare collection portal server may invoke a component to provide value add services for the user e.g. .

In some embodiments the healthcare collection portal server may forward a transaction authorization response to the user wallet device PoS client and or merchant server. The merchant may parse e.g. the transaction authorization response and determine from it that the user possesses sufficient funds in the card account to conduct the transaction e.g. option Yes. The merchant server may add a record of the transaction for the user to a batch of transaction data relating to authorized transactions. For example the merchant may append the XML data pertaining to the user transaction to an XML data file comprising XML data for transactions that have been authorized for various users e.g. and store the XML data file e.g. in a database. In some embodiments the server may also generate a purchase receipt e.g. and provide the purchase receipt to the client. The client may render and display e.g. the purchase receipt for the user. In some embodiments the user s wallet device may also provide a notification of successful authorization to the user. For example the PoS client user device may render a webpage electronic message text SMS message buffer a voicemail emit a ring tone and or play an audio message etc. and provide output including but not limited to sounds music audio video images tactile feedback vibration alerts e.g. on vibration capable client devices such as a smartphone etc. and or the like.

With reference to in some embodiments for each extracted transaction the healthcare collection portal server may query e.g. a database e.g. healthcare collection portal database for an address of an issuer server. For example the healthcare collection portal server may utilize PHP SQL commands similar to the examples provided above. The healthcare collection portal server may generate an individual payment request e.g. for each transaction for which it has extracted transaction data and provide the individual payment request e.g. to the issuer server e.g. . For example the healthcare collection portal server may provide an individual payment request to the issuer server s as a HTTP S POST message including XML formatted data. An example listing of an individual payment request substantially in the form of a HTTP S POST message including XML formatted data is provided below 

In some embodiments the issuer server may generate a payment command e.g. . For example the issuer server may issue a command to deduct funds from the user s account or add a charge to the user s credit card account . The issuer server may issue a payment command e.g. to a database storing the user s account information e.g. user profile database . The issuer server may provide an individual payment confirmation e.g. to the healthcare collection portal server which may forward e.g. the funds transfer message to the acquirer server. An example listing of an individual payment confirmation substantially in the form of a HTTP S POST message including XML formatted data is provided below 

In some embodiments the acquirer server may parse the individual payment confirmation and correlate the transaction e.g. using the request ID field in the example above to the merchant. The acquirer server may then transfer the funds specified in the funds transfer message to an account of the merchant. For example the acquirer server may query e.g. an acquirer database for payment ledger and or merchant account data e.g. . The acquirer server may utilize payment ledger and or merchant account data from the acquirer database along with the individual payment confirmation to generate updated payment ledger and or merchant account data e.g. . The acquirer server may then store e.g. the updated payment ledger and or merchant account data to the acquire database.

The healthcare collection portal server may parse the batch payment request obtained from the acquirer server and extract the transaction data for each transaction stored in the batch payment request e.g. . The healthcare collection portal server may store the transaction data e.g. for each transaction in a healthcare collection portal database. In some embodiments the healthcare collection portal server may invoke a component e.g. to provide analytics based on the transactions of the merchant for whom purchase transaction are being cleared. For example the healthcare collection portal server may invoke a component such as the example card transaction based analytics component discussed above with reference to .

With reference to in some embodiments for each extracted transaction the healthcare collection portal server may query e.g. a healthcare collection portal database for an address of an issuer server. The healthcare collection portal server may generate an individual payment request e.g. for each transaction for which it has extracted transaction data and provide the individual payment request to the issuer server. In some embodiments the issuer server may parse the individual payment request e.g. and generate a payment command e.g. based on the parsed individual payment request. For example the issuer server may issue a command to deduct funds from the user s account or add a charge to the user s credit card account . The issuer server may issue a payment command e.g. to a database storing the user s account information e.g. a user profile database. The issuer server may provide an individual payment confirmation e.g. to the healthcare collection portal server which may forward e.g. the individual payment confirmation to the acquirer server.

In some embodiments the acquirer server may parse the individual payment confirmation and correlate the transaction e.g. using the request ID field in the example above to the merchant. The acquirer server may then transfer the funds specified in the funds transfer message to an account of the merchant. For example the acquirer server may query e.g. an acquirer database for payment ledger and or merchant account data e.g. . The acquirer server may utilize payment ledger and or merchant account data from the acquirer database along with the individual payment confirmation to generate updated payment ledger and or merchant account data e.g. . The acquirer server may then store e.g. the updated payment ledger and or merchant account data to the acquire database.

Payment processing system has a plurality of merchants that includes merchant through merchant M where M can be up to and greater than an eight digit integer. Payment processing system has a plurality of accounts each of which is held by a corresponding account holder through account holder A where A can be up to and greater than a ten eight digit integer.

Payment processing system includes account user through account user AU where AU can be as large as a ten digit integer or larger. Each account user au may act as a customer and initiate a transaction for goods and or services with merchant m using an account that has been issued by an issuer i to a corresponding account holder a . Data from the transaction on the account is collected by merchant m and forwarded to a corresponding acquirer a . Acquirer a forwards the data to transaction handler who facilitates payment for the transaction from the account issued by the issuer i to account holder a .

Payment processing system has a plurality of issuers . Each issuer i may be assisted in processing one or more transactions by a corresponding agent issuer ai where i can be an integer from 1 to I where ai can be an integer from 1 to AI and where I and AI can be as large as an eight digit integer or larger.

Payment processing system has a plurality of acquirers . Each acquirer q may be assisted in processing one or more transactions by a corresponding agent acquirer aq where q can be an integer from 1 to Q where aq can be an integer from 1 to AQ and where Q and AQ can be as large as a eight digit integer or larger.

Payment processing system has a transaction handler to process a plurality of transactions. The transaction handler can include one or a plurality or networks and switches . Each network switch ns can be a mainframe computer in a geographic location different than each other network switch ns where ns is an integer from one to NS and where NS can be as large as a four digit integer or larger.

Dedicated communication systems e.g. private communication network s facilitate communication between the transaction handler and each issuer i and each acquirer a . The Internet via e mail the World Wide Web cellular telephony and or other optional public and private communications systems can facilitate communications using communication systems among and between each issuer i each acquirer a each merchant m each account holder a and the transaction handler . Alternatively and optionally one or more dedicated communication systems can facilitate respective communications between each acquirer a and each merchant m each merchant m and each account holder a and each account holder a and each issuer i respectively.

Each acquirer q may be assisted in processing one or more transactions by a corresponding agent acquirer aq where q can be an integer from 1 to Q where aq can be an integer from 1 to AQ and where Q and AQ can be as large as a eight digit integer or larger.

Merchant m may be a person or entity that sells goods and or services. Merchant m may also be for instance a healthcare service provider a manufacturer a distributor a retailer a load agent a drugstore a grocery store a gas station a hardware store a supermarket a boutique a restaurant or a doctor s office. In a business to business setting the account holder a may be a second merchant making a purchase from another merchant m . Merchant m may use at least one stationary and or mobile point of sale terminal POS that can communicate with acquirer a transaction handler or issuer i . Thus the POS terminal is in operative communication with the payment processing system.

Typically a transaction begins with account user au presenting a portable consumer device to merchant m to initiate an exchange for a good or service. The portable consumer device may be associated with an account e.g. a monetary or reward points account of account holder a that was issued to the account holder a by issuer i .

The portable consumer device may be in a form factor that can be a payment card a gift card a smartcard a smart media device a payroll card a healthcare card a wrist band a machine readable medium containing account information a keychain device such as a SPEEDPASS device commercially available from ExxonMobil Corporation or a supermarket discount card a cellular phone personal digital assistant a pager a security card an access card a wireless terminal or a transponder. The portable consumer device may include a volatile or non volatile memory to store information such as the account number or the name of an account holder a .

Merchant m may use the POS terminal to obtain account information such as a number of the account of the account holder a from the portable consumer device. The portable consumer device may interface with the POS terminal using a mechanism including any suitable electrical magnetic or optical interfacing system such as a contactless system using radio frequency or magnetic field recognition system or contact system such as a magnetic stripe reader. The POS terminal sends a transaction authorization request to the issuer i of the account corresponding to the portable consumer device. Alternatively or in combination the portable consumer device may communicate with issuer i transaction handler or acquirer a .

Issuer i may authorize the transaction using transaction handler . Transaction handler may also clear the transaction. Authorization includes issuer i or transaction handler on behalf of issuer i authorizing the transaction in connection with issuer i s instructions such as through the use of business rules. The business rules could include instructions or guidelines from transaction handler account holder a merchant m acquirer a issuer i a related financial institution or combinations thereof. Transaction handler may maintain a log or history of authorized transactions. Once approved merchant m will record the authorization allowing account user au to receive the good or service from merchant m or an agent thereof.

Merchant m may at discrete periods such as at the end of the day submit a list of authorized transactions to acquirer a or other transaction related data for processing through the payment processing system. Transaction handler may compare the submitted authorized transaction list with its own log of authorized transactions. If a match is found transaction handler may route authorization transaction amount requests from the corresponding acquirer a to the corresponding issuer i involved in each transaction. Once acquirer a receives the payment of the authorized transaction amount from issuer i acquirer a can forward the payment to merchant m less any transaction costs such as fees for the processing of the transaction. If the transaction involves a debit or prepaid card acquirer a may choose not to wait for the issuer i to forward the payment prior to paying merchant m .

There may be intermittent steps in the foregoing process some of which may occur simultaneously. For example acquirer a can initiate the clearing and settling process which can result in payment to acquirer a for the amount of the transaction. Acquirer a may request from transaction handler that the transaction be cleared and settled. Clearing includes the exchange of financial information between the issuer i and the acquirer a and settlement includes the exchange of funds. Transaction handler can provide services in connection with settlement of the transaction. The settlement of a transaction includes depositing an amount of the transaction settlement from a settlement house such as a settlement bank which transaction handler typically chooses into a clearinghouse such as a clearing bank that acquirer a typically chooses. Issuer i deposits the same from a clearinghouse such as a clearing bank which issuer i typically chooses into the settlement house. Thus a typical transaction involves various entities to request authorize and fulfill processing the transaction.

Payment processing system will preferably have network components suitable for scaling the number and data payload size of transactions that can be authorized cleared and settled in both real time and batch processing. These include hardware software data elements and storage network devices for the same. Examples of payment processing system include those operated at least in part by American Express Master Card Discover Card First Data Corporation Diners Club and Visa Inc. and agents of the foregoing.

Each network switch ns can include one or more data centers for processing transactions where each transaction can include up to 100 kilobytes of data or more. The data corresponding to the transaction can include information about the types and quantities of goods and services in the transaction information about the account holder a the account user au the merchant m financial and incentive treatment s of the goods and services coupons rebates rewards loyalty discounts returns exchanges cash back transactions etc. Of course in the case of the data corresponding to a healthcare related transaction the information would necessarily be limited with respect to the goods and services in the transaction as would be consistent with full regulatory compliance e.g. HIPAA compliance in the USA the Personal Health Information Protection Act PHIPA in Canada etc. 

By way of example network switch ns can include one or more mainframe computers e.g. one or more IBM mainframe computers for communications over systems one or more server farms e.g. one or more Sun UNIX Superservers where the mainframe computers and server farms can be in diverse geographic locations.

Each issuer i or agent issuer ai thereof and each acquirer a or agent acquirer aq thereof can use one or more router switch e.g. Cisco routers switches to communicate with each network switch ns via dedicated communication systems respectively.

Transaction handler stores information about transactions processed through payment processing system in data warehouses such as may be incorporated as part of the plurality of networks switches ns . This information can be data mined. The data mining transaction research and modeling can be used for advertising account holder and merchant loyalty incentives and rewards fraud detection and prediction and to develop tools to demonstrate savings and efficiencies made possible by use of the payment processing system over paying and being paid by cash checks or other traditional payment mechanisms.

The VisaNet system is an example component of the transaction handler in the payment processing system. The open system payment processing network seen in can be enabled via a telecommunications network that may make use of any suitable telecommunications network and may involve different hardware different software and or different protocols then those discussed below. can be deemed to depict a global telecommunications network that supports purchase and cash transactions using any bankcard travel and entertainment cards and other private label and proprietary cards. The network also supports ATM transactions for other networks transactions using paper checks transactions using smart cards virtual cards and transactions using other financial instruments.

These transactions are processed through the network s authorization clearing and settlement services. Authorization is when an issuer approves or declines a sales transaction before a purchase is finalized or cash is dispersed. Clearing is when a transaction is delivered from an acquirer to an issuer for posting to the customer s account. Settlement is the process of calculating and determining the net financial position of each member for all transactions that are cleared. The actual exchange of funds is a separate process.

Transactions can be authorized cleared and settled as either a dual message or a single message transaction. A dual message transaction is sent twice the first time with only information needed for an authorization decision an again later with additional information for clearing and settlement. A single message transaction is sent once for authorization and contains clearing and settlement information as well. Typically authorization clearing and settlement all occur on line.

Access points are typically made up of small computer systems located at a processing center that interfaces between the center s host computer and the interchange center The access point facilitates the transmission of messages and files between the host and the interchange center supporting the authorization clearing and settlement of transaction. Telecommunication links between the acquirer q and its access point and between the access point and issuer i are typically local links within a center and use a proprietary message format as preferred by the center.

A data processing center such as is located within an acquirer issuer or other entity houses processing systems that support merchant and business locations and maintains customer data and billing systems. Preferably each processing center is linked to one or two interchange centers. Processors are connected to the closest interchange and if the network experiences interruptions the network automatically routes transactions to a secondary interchange center. Each interchange center is also linked to all of the other interchange centers. This linking enables processing centers to communicate with each other through one or more interchange centers. Also processing centers can access the networks of other programs through the interchange center. Further the network ensures that all links have multiple backups. The connection from one point of the network to another is not usually a fixed link instead the interchange center chooses the best possible path at the time of any given transmission. Rerouting around any faulty link occurs automatically.

Clearing and settlement system clears and settles previously authorized dual message transactions. Operating six days a week on a global basis system collects financial and non financial information and distributes reports between members It also calculates fees charges and settlement totals and produces reports to help with reconciliation. A bridge forms an interchange between system processing centers and system processing centers.

Single message system processes full financial transactions. System can also process dual message authorization and clearing transactions and communicates with system using a bridge and accesses outside networks as required. System processes Visa Plus Interlink and other card transactions. The SMS files comprise internal system tables that control system access and processing and the cardholder database which contains files of cardholder data used for PIN verification and stand in processing authorization. System on line functions perform real time cardholder transaction processing and exception processing for authorization as well as full financial transactions. System also accumulates reconciliation and settlement totals. System off line functions process settlement and funds transfer requests and provide settlement and activities reporting. Settlement service consolidates the settlement functions of system and including Interlink into a single service for all products and services. Clearing continues to be performed separately by system and system .

Users e.g. which may be people and or other systems may engage information technology systems e.g. computers to facilitate information processing. In turn computers employ processors to process information such processors may be referred to as central processing units CPU . One form of processor is referred to as a microprocessor. CPUs use communicative circuits to pass binary encoded signals acting as instructions to enable various operations. These instructions may be operational and or data instructions containing and or referencing other instructions and data in various processor accessible and operable areas of memory e.g. registers cache memory random access memory etc. . Such communicative instructions may be stored and or transmitted in batches e.g. batches of instructions as programs and or data components to facilitate desired operations. These stored instruction codes e.g. programs may engage the CPU circuit components and other motherboard and or system components to perform desired operations. One type of program is a computer operating system which may be executed by CPU on a computer the operating system enables and facilitates users to access and operate computer information technology and resources. Some resources that may be employed in information technology systems include input and output mechanisms through which data may pass into and out of a computer memory storage into which data may be saved and processors by which information may be processed. These information technology systems may be used to collect data for later retrieval analysis and manipulation which may be facilitated through a database program. These information technology systems provide interfaces that allow users to access and operate various system components.

In one embodiment the RUAP controller may be connected to and or communicate with entities such as but not limited to one or more users from user input devices peripheral devices an optional cryptographic processor device and or a communications network . For example the RUAP controller may be connected to and or communicate with users e.g. operating client device s e.g. including but not limited to personal computer s server s and or various mobile device s including but not limited to cellular telephone s smartphone s e.g. iPhone Blackberry Android OS based phones etc. tablet computer s e.g. Apple iPad HP Slate Motorola Xoom etc. eBook reader s e.g. Amazon Kindle Barnes and Noble s Nook eReader etc. laptop computer s notebook s netbook s gaming console s e.g. XBOX Live Nintendo DS Sony PlayStation Portable etc. portable scanner s and or the like.

Networks are commonly thought to comprise the interconnection and interoperation of clients servers and intermediary nodes in a graph topology. It should be noted that the term server as used throughout this application refers generally to a computer other device program or combination thereof that processes and responds to the requests of remote users across a communications network. Servers serve their information to requesting clients. The term client as used herein refers generally to a computer program other device user and or combination thereof that is capable of processing and making requests and obtaining and processing any responses from servers across a communications network. A computer other device program or combination thereof that facilitates processes information and requests and or furthers the passage of information from a source user to a destination user is commonly referred to as a node. Networks are generally thought to facilitate the transfer of information from source points to destinations. A node specifically tasked with furthering the passage of information from a source to a destination is commonly called a router. There are many forms of networks such as Local Area Networks LANs Pico networks Wide Area Networks WANs Wireless Networks WLANs etc. For example the Internet is generally accepted as being an interconnection of a multitude of networks whereby remote clients and servers may access and interoperate with one another.

The RUAP controller may be based on computer systems that may comprise but are not limited to components such as a computer systemization connected to memory .

A computer systemization may comprise a clock central processing unit CPU s and or processor s these terms are used interchangeably throughout the disclosure unless noted to the contrary a memory e.g. a read only memory ROM a random access memory RAM etc. and or an interface bus and most frequently although not necessarily are all interconnected and or communicating through a system bus on one or more mother board s having conductive and or otherwise transportive circuit pathways through which instructions e.g. binary encoded signals may travel to effectuate communications operations storage etc. The computer systemization may be connected to a power source e.g. optionally the power source may be internal. Optionally a cryptographic processor and or transceivers e.g. ICs may be connected to the system bus. In another embodiment the cryptographic processor and or transceivers may be connected as either internal and or external peripheral devices via the interface bus I O. In turn the transceivers may be connected to antenna s thereby effectuating wireless transmission and reception of various communication and or sensor protocols for example the antenna s may connect to a Texas Instruments WiLink WL1283 transceiver chip e.g. providing 802.11n Bluetooth 3.0 FM global positioning system GPS thereby allowing RUAP controller to determine its location Broadcom BCM4329FKUBG transceiver chip e.g. providing 802.11n Bluetooth 2.1 EDR FM etc. BCM28150 HSPA and BCM2076 Bluetooth 4.0 GPS etc. a Broadcom BCM4750IUB8 receiver chip e.g. GPS an Infineon Technologies X Gold 618 PMB9800 e.g. providing 2G 3G HSDPA HSUPA communications Intel s XMM 7160 LTE DC HSPA Qualcom s CDMA 2000 Mobile Data Station Modem Snapdragon and or the like. The system clock may have a crystal oscillator and generates a base signal through the computer systemization s circuit pathways. The clock may be coupled to the system bus and various clock multipliers that will increase or decrease the base operating frequency for other components interconnected in the computer systemization. The clock and various components in a computer systemization drive signals embodying information throughout the system. Such transmission and reception of instructions embodying information throughout a computer systemization may be referred to as communications. These communicative instructions may further be transmitted received and the cause of return and or reply communications beyond the instant computer systemization to communications networks input devices other computer systemizations peripheral devices and or the like. It should be understood that in alternative embodiments any of the above components may be connected directly to one another connected to the CPU and or organized in numerous variations employed as exemplified by various computer systems.

The CPU comprises at least one high speed data processor adequate to execute program components for executing user and or system generated requests. Often the processors themselves will incorporate various specialized processing units such as but not limited to floating point units integer processing units integrated system bus controllers logic operating units memory management control units etc. and even specialized processing sub units like graphics processing units digital signal processing units and or the like. Additionally processors may include internal fast access addressable memory and be capable of mapping and addressing memory beyond the processor itself internal memory may include but is not limited to fast registers various levels of cache memory e.g. level 1 2 3 etc. RAM etc. The processor may access this memory through the use of a memory address space that is accessible via instruction address which the processor can construct and decode allowing it to access a circuit path to a specific memory address space having a memory state value. The CPU may be a microprocessor such as AMD s Athlon Duron and or Opteron ARM s classic e.g. ARM7 9 11 embedded Coretx M R application Cortex A embedded and secure processors IBM and or Motorola s DragonBall and PowerPC IBM s and Sony s Cell processor Intel s Atom Celeron Mobile Core 2 Duo i3 i5 i7 Itanium Pentium Xeon and or XScale and or the like processor s . The CPU interacts with memory through instruction passing through conductive and or transportive conduits e.g. printed electronic and or optic circuits to execute stored instructions i.e. program code . Such instruction passing facilitates communication within the RUAP controller and beyond through various interfaces. Should processing requirements dictate a greater amount speed and or capacity distributed processors e.g. Distributed RUAP mainframe multi core parallel and or super computer architectures may similarly be employed. Alternatively should deployment requirements dictate greater portability smaller mobile devices e.g. smartphones Personal Digital Assistants PDAs etc. may be employed.

Depending on the particular implementation features of the RUAP may be achieved by implementing a microcontroller such as CAST s R8051XC2 microcontroller Intel s MCS 51 i.e. 8051 microcontroller and or the like. Also to implement certain features of the RUAP some feature implementations may rely on embedded components such as Application Specific Integrated Circuit ASIC Digital Signal Processing DSP Field Programmable Gate Array FPGA and or the like embedded technology. For example any of the RUAP component collection distributed or otherwise and or features may be implemented via the microprocessor and or via embedded components e.g. via ASIC coprocessor DSP FPGA and or the like. Alternately some implementations of the RUAP may be implemented with embedded components that are configured and used to achieve a variety of features or signal processing.

Depending on the particular implementation the embedded components may include software solutions hardware solutions and or some combination of both hardware software solutions. For example RUAP features discussed herein may be achieved through implementing FPGAs which are a semiconductor devices containing programmable logic components called logic blocks and programmable interconnects such as the high performance FPGA Virtex series and or the low cost Spartan series manufactured by Xilinx. Logic blocks and interconnects can be programmed by the customer or designer after the FPGA is manufactured to implement any of the RUAP features. A hierarchy of programmable interconnects allow logic blocks to be interconnected as needed by the RUAP system designer administrator somewhat like a one chip programmable breadboard. An FPGA s logic blocks can be programmed to perform the operation of basic logic gates such as AND and XOR or more complex combinational operators such as decoders or simple mathematical operations. In most FPGAs the logic blocks also include memory elements which may be circuit flip flops or more complete blocks of memory. In some circumstances the RUAP may be developed on regular FPGAs and then migrated into a fixed version that more resembles ASIC implementations. Alternate or coordinating implementations may migrate RUAP controller features to a final ASIC instead of or in addition to FPGAs. Depending on the implementation all of the aforementioned embedded components and microprocessors may be considered the CPU and or processor for the RUAP.

The power source may be of any standard form for powering small electronic circuit board devices such as the following power cells alkaline lithium hydride lithium ion lithium polymer nickel cadmium solar cells and or the like. Other types of AC or DC power sources may be used as well. In the case of solar cells in one embodiment the case provides an aperture through which the solar cell may capture photonic energy. The power cell is connected to at least one of the interconnected subsequent components of the RUAP thereby providing an electric current to all the interconnected components. In one example the power source is connected to the system bus component . In an alternative embodiment an outside power source is provided through a connection across the I O interface. For example a USB and or IEEE 1394 connection carries both data and power across the connection and is therefore a suitable source of power.

Interface bus ses may accept connect and or communicate to a number of interface adapters frequently although not necessarily in the form of adapter cards such as but not limited to input output interfaces I O storage interfaces network interfaces and or the like. Optionally cryptographic processor interfaces similarly may be connected to the interface bus. The interface bus provides for the communications of interface adapters with one another as well as with other components of the computer systemization. Interface adapters are adapted for a compatible interface bus. Interface adapters may connect to the interface bus via expansion and or slot architecture. Various expansion and or slot architectures may be employed such as but not limited to Accelerated Graphics Port AGP Card Bus ExpressCard Extended Industry Standard Architecture E ISA Micro Channel Architecture MCA NuBus Peripheral Component Interconnect Extended PCI X PCI Express Personal Computer Memory Card International Association PCMCIA Thunderbolt and or the like.

Storage interfaces may accept communicate and or connect to a number of storage devices such as but not limited to storage devices removable disc devices and or the like. Storage interfaces may employ connection protocols such as but not limited to Ultra Serial Advanced Technology Attachment Packet Interface Ultra Serial ATA PI Enhanced Integrated Drive Electronics E IDE Institute of Electrical and Electronics Engineers IEEE 1394 Ethernet fiber channel Small Computer Systems Interface SCSI Thunderbolt Universal Serial Bus USB and or the like.

Network interfaces may accept communicate and or connect to a communications network . Through a communications network the RUAP controller is accessible through remote clients e.g. computers with web browsers by users . Network interfaces may employ connection protocols such as but not limited to direct connect Ethernet thick thin twisted pair 10 100 1000 Base T and or the like Token Ring wireless connection such as IEEE 802.11a x and or the like. Should processing requirements dictate a greater amount speed and or capacity distributed network controllers e.g. Distributed RUAP architectures may similarly be employed to pool load balance and or otherwise increase the communicative bandwidth required by the RUAP controller. A communications network may be any one and or the combination of the following a direct interconnection the Internet a Local Area Network LAN a Metropolitan Area Network MAN an Operating Missions as Nodes on the Internet OMNI a secured custom connection a Wide Area Network WAN a wireless network e.g. employing protocols such as but not limited to a Wireless Application Protocol WAP I mode and or the like and or the like. A network interface may be regarded as a specialized form of an input output interface. Further multiple network interfaces may be used to engage with various communications network types . For example multiple network interfaces may be employed to allow for the communication over broadcast multicast and or unicast networks.

Input Output interfaces I O may accept communicate and or connect to user input devices peripheral devices cryptographic processor devices and or the like. I O may employ connection protocols such as but not limited to audio analog digital monaural RCA stereo and or the like data Apple Desktop Bus ADB Bluetooth IEEE 1394a b serial universal serial bus USB infrared joystick keyboard midi optical PC AT PS 2 parallel radio video interface Apple Desktop Connector ADC BNC coaxial component composite digital DisplayPort Digital Visual Interface DVI high definition multimedia interface HDMI RCA RF antennae S Video VGA and or the like wireless transceivers 802.11a b g n x Bluetooth cellular e.g. code division multiple access CDMA high speed packet access HSPA high speed downlink packet access HSDPA global system for mobile communications GSM long term evolution LTE WiMax etc. and or the like. One output device may be a video display which may take the form of a Cathode Ray Tube CRT Liquid Crystal Display LCD Light Emitting Diode LED Organic Light Emitting Diode OLED Plasma and or the like based monitor with an interface e.g. VGA DVI circuitry and cable that accepts signals from a video interface. The video interface composites information generated by a computer systemization and generates video signals based on the composited information in a video memory frame. Another output device is a television set which accepts signals from a video interface. Often the video interface provides the composited video information through a video connection interface that accepts a video display interface e.g. an RCA composite video connector accepting an RCA composite video cable a DVI connector accepting a DVI display cable HDMI etc. .

User input devices often are a type of peripheral device see below and may include card readers dongles finger print readers gloves graphics tablets joysticks keyboards microphones mouse mice remote controls retina readers touch screens e.g. capacitive resistive etc. trackballs trackpads sensors e.g. accelerometers ambient light GPS gyroscopes proximity etc. styluses and or the like.

Peripheral devices may be connected and or communicate to I O and or other facilities of the like such as network interfaces storage interfaces directly to the interface bus system bus the CPU and or the like. Peripheral devices may be external internal and or part of the RUAP controller. Peripheral devices may include antenna audio devices e.g. line in line out microphone input speakers etc. cameras e.g. still video webcam etc. dongles e.g. for copy protection ensuring secure transactions with a digital signature and or the like external processors for added capabilities e.g. crypto devices force feedback devices e.g. vibrating motors near field communication NFC devices network interfaces printers radio frequency identifiers RFIDs scanners storage devices transceivers e.g. cellular GPS etc. video devices e.g. goggles monitors etc. video sources visors and or the like. Peripheral devices often include types of input devices e.g. microphones cameras etc. .

It should be noted that although user input devices and peripheral devices may be employed the RUAP controller may be embodied as an embedded dedicated and or monitor less i.e. headless device wherein access would be provided over a network interface connection.

Cryptographic units such as but not limited to microcontrollers processors interfaces and or devices may be attached and or communicate with the RUAP controller. A MC68HC16 microcontroller manufactured by Motorola Inc. may be used for and or within cryptographic units. The MC68HC16 microcontroller utilizes a 16 bit multiply and accumulate instruction in the 16 MHz configuration and requires less than one second to perform a 512 bit RSA private key operation. Cryptographic units support the authentication of communications from interacting agents as well as allowing for anonymous transactions. Cryptographic units may also be configured as part of the CPU. Equivalent microcontrollers and or processors may also be used. Other commercially available specialized cryptographic processors include the Broadcom s CryptoNetX and other Security Processors nCipher s nShield e.g. Solo Connect etc. SafeNet s Luna PCI e.g. 7100 series Semaphore Communications 40 MHz Roadrunner 184 sMIP s e.g. 208956 Sun s Cryptographic Accelerators e.g. Accelerator 6000 PCIe Board Accelerator 500 Daughtercard Via Nano Processor e.g. L2100 L2200 U2400 line which is capable of performing 500 MB s of cryptographic instructions VLSI Technology s 33 MHz 6868 and or the like.

Generally any mechanization and or embodiment allowing a processor to affect the storage and or retrieval of information is regarded as memory . However memory is a fungible technology and resource thus any number of memory embodiments may be employed in lieu of or in concert with one another. It is to be understood that the RUAP controller and or a computer systemization may employ various forms of memory . For example a computer systemization may be configured wherein the operation of on chip CPU memory e.g. registers RAM ROM and any other storage devices are provided by a paper punch tape or paper punch card mechanism however such an embodiment would result in an extremely slow rate of operation. In one configuration memory may include ROM RAM and a storage device . A storage device may employ any number of computer storage devices systems. Storage devices may include a drum a fixed and or removable magnetic disk drive a magneto optical drive an optical drive i.e. Blueray CD ROM RAM Recordable R ReWritable RW DVD R RW HD DVD R RW etc. an array of devices e.g. Redundant Array of Independent Disks RAID solid state memory devices USB memory solid state drives SSD etc. other processor readable storage mediums and or other devices of the like. Thus a computer systemization generally requires and makes use of memory.

The memory may contain a collection of program and or database components and or data such as but not limited to operating system component s operating system information server component s information server user interface component s user interface Web browser component s Web browser database s mail server component s mail client component s cryptographic server component s cryptographic server the RUAP component s and or the like i.e. collectively a component collection . These components may be stored and accessed from the storage devices and or from storage devices accessible through an interface bus. Although non conventional program components such as those in the component collection may be stored in a local storage device they may also be loaded and or stored in memory such as peripheral devices RAM remote storage facilities through a communications network ROM various forms of memory and or the like.

The operating system component is an executable program component facilitating the operation of the RUAP controller. The operating system may facilitate access of I O network interfaces peripheral devices storage devices and or the like. The operating system may be a highly fault tolerant scalable and secure system such as Apple Macintosh OS X Server AT T Plan 9 Be OS Unix and Unix like system distributions such as AT T s UNIX Berkley Software Distribution BSD variations such as FreeBSD NetBSD OpenBSD and or the like Linux distributions such as Red Hat Ubuntu and or the like and or the like operating systems. However more limited and or less secure operating systems also may be employed such as Apple Macintosh OS IBM OS 2 Microsoft DOS Microsoft Windows 2000 2003 3.1 95 98 CE Millenium NT Vista XP Server Palm OS and or the like. In addition emobile operating systems such as Apple s iOS Google s Android Hewlett Packard s WebOS Microsofts Windows Mobile and or the like may be employed. Any of these operating systems may be embedded within the hardware of the NICK controller and or stored loaded into memory storage. An operating system may communicate to and or with other components in a component collection including itself and or the like. Most frequently the operating system communicates with other program components user interfaces and or the like. For example the operating system may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses. The operating system once executed by the CPU may enable the interaction with communications networks data I O peripheral devices program components memory user input devices and or the like. The operating system may provide communications protocols that allow the RUAP controller to communicate with other entities through a communications network . Various communication protocols may be used by the RUAP controller as a subcarrier transport mechanism for interaction such as but not limited to multicast TCP IP UDP unicast and or the like.

An information server component is a stored program component that is executed by a CPU. The information server may be an Internet information server such as but not limited to Apache Software Foundation s Apache Microsoft s Internet Information Server and or the like. The information server may allow for the execution of program components through facilities such as Active Server Page ASP ActiveX ANSI Objective C C and or .NET Common Gateway Interface CGI scripts dynamic D hypertext markup language HTML FLASH Java JavaScript Practical Extraction Report Language PERL Hypertext Pre Processor PHP pipes Python wireless application protocol WAP WebObjects and or the like. The information server may support secure communications protocols such as but not limited to File Transfer Protocol FTP HyperText Transfer Protocol HTTP Secure Hypertext Transfer Protocol HTTPS Secure Socket Layer SSL messaging protocols e.g. America Online AOL Instant Messenger AIM Apple s iMessage Application Exchange APEX ICQ Internet Relay Chat IRC Microsoft Network MSN Messenger Service Presence and Instant Messaging Protocol PRIM Internet Engineering Task Force s IETF s Session Initiation Protocol SIP SIP for Instant Messaging and Presence Leveraging Extensions SIMPLE open XML based Extensible Messaging and Presence Protocol XMPP i.e. Jabber or Open Mobile Alliance s OMA s Instant Messaging and Presence Service IMPS Yahoo Instant Messenger Service and or the like. The information server provides results in the form of Web pages to Web browsers and allows for the manipulated generation of the Web pages through interaction with other program components. After a Domain Name System DNS resolution portion of an HTTP request is resolved to a particular information server the information server resolves requests for information at specified locations on the RUAP controller based on the remainder of the HTTP request. For example a request such as http 123.124.125.126 myInformation.html might have the IP portion of the request 123.124.125.126 resolved by a DNS server to an information server at that IP address that information server might in turn further parse the http request for the myInformation.html portion of the request and resolve it to a location in memory containing the information myInformation.html. Additionally other information serving protocols may be employed across various ports e.g. FTP communications across port and or the like. An information server may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the information server communicates with the RUAP database operating systems other program components user interfaces Web browsers and or the like.

Access to the RUAP database may be achieved through a number of database bridge mechanisms such as through scripting languages as enumerated below e.g. CGI and through inter application communication channels as enumerated below e.g. CORBA WebObjects etc. . Any data requests through a Web browser are parsed through the bridge mechanism into appropriate grammars as required by the RUAP. In one embodiment the information server would provide a Web form accessible by a Web browser. Entries made into supplied fields in the Web form are tagged as having been entered into the particular fields and parsed as such. The entered terms are then passed along with the field tags which act to instruct the parser to generate queries directed to appropriate tables and or fields. In one embodiment the parser may generate queries in standard SQL by instantiating a search string with the proper join select commands based on the tagged text entries wherein the resulting command is provided over the bridge mechanism to the RUAP as a query. Upon generating query results from the query the results are passed over the bridge mechanism and may be parsed for formatting and generation of a new results Web page by the bridge mechanism. Such a new results Web page is then provided to the information server which may supply it to the requesting Web browser.

Also an information server may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses.

Computer interfaces in some respects are similar to automobile operation interfaces. Automobile operation interface elements such as steering wheels gearshifts and speedometers facilitate the access operation and display of automobile resources and status. Computer interaction interface elements such as check boxes cursors menus scrollers and windows collectively and commonly referred to as widgets similarly facilitate the access capabilities operation and display of data and computer hardware and operating system resources and status. Operation interfaces are commonly called user interfaces. Graphical user interfaces GUIs such as the Apple Macintosh Operating System s Aqua and iOS s Cocoa Touch IBM s OS 2 Google s Android Mobile UI Microsoft s Windows 2000 2003 3.1 95 98 CE Millenium 9 Mobile NT XP Vista 7 8 i.e. Aero Metro Unix s X Windows e.g. which may include additional Unix graphic interface libraries and layers such as K Desktop Environment KDE mythTV and GNU Network Object Model Environment GNOME web interface libraries e.g. ActiveX AJAX D HTML FLASH Java JavaScript etc. interface libraries such as but not limited to Dojo jQuery UI MooTools Prototype script.aculo.us SWFObject Yahoo User Interface any of which may be used and provide a baseline and means of accessing and displaying information graphically to users.

A user interface component is a stored program component that is executed by a CPU. The user interface may be a graphic user interface as provided by with and or atop operating systems and or operating environments such as already discussed. The user interface may allow for the display execution interaction manipulation and or operation of program components and or system facilities through textual and or graphical facilities. The user interface provides a facility through which users may affect interact and or operate a computer system. A user interface may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the user interface communicates with operating systems other program components and or the like. The user interface may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses.

A Web browser component is a stored program component that is executed by a CPU. The Web browser may be a hypertext viewing application such as Google s Mobile Chrome Microsoft Internet Explorer Netscape Navigator Apple s Mobile Safari embedded web browser objects such as through Apple s Cocoa Touch object class and or the like. Secure Web browsing may be supplied with 128 bit or greater encryption by way of HTTPS SSL and or the like. Web browsers allowing for the execution of program components through facilities such as ActiveX AJAX D HTML FLASH Java JavaScript web browser plug in APIs e.g. Chrome FireFox Internet Explorer Safari Plug in and or the like APIs and or the like. Web browsers and like information access tools may be integrated into PDAs cellular telephones smartphones and or other mobile devices. A Web browser may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the Web browser communicates with information servers operating systems integrated program components e.g. plug ins and or the like e.g. it may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses. Also in place of a Web browser and information server a combined application may be developed to perform similar operations of both. The combined application would similarly effect the obtaining and the provision of information to users user agents and or the like from the RUAP equipped nodes. The combined application may be nugatory on systems employing standard Web browsers.

A mail server component is a stored program component that is executed by a CPU . The mail server may be an Internet mail server such as but not limited to Apple s Mail Server 3 dovect sendmail Microsoft Exchange and or the like. The mail server may allow for the execution of program components through facilities such as ASP ActiveX ANSI Objective C C and or .NET CGI scripts Java JavaScript PERL PHP pipes Python WebObjects and or the like. The mail server may support communications protocols such as but not limited to Internet message access protocol IMAP Messaging Application Programming Interface MAPI Microsoft Exchange post office protocol POP3 simple mail transfer protocol SMTP and or the like. The mail server can route forward and process incoming and outgoing mail messages that have been sent relayed and or otherwise traversing through and or to the RUAP.

Access to the RUAP mail may be achieved through a number of APIs offered by the individual Web server components and or the operating system.

Also a mail server may contain communicate generate obtain and or provide program component system user and or data communications requests information and or responses.

A mail client component is a stored program component that is executed by a CPU . The mail client may be a mail viewing application such as Apple Mobile Mail Microsoft Entourage Microsoft Outlook Microsoft Outlook Express Mozilla Thunderbird and or the like. Mail clients may support a number of transfer protocols such as IMAP Microsoft Exchange POP3 SMTP and or the like. A mail client may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the mail client communicates with mail servers operating systems other mail clients and or the like e.g. it may contain communicate generate obtain and or provide program component system user and or data communications requests information and or responses. Generally the mail client provides a facility to compose and transmit electronic mail messages.

A cryptographic server component is a stored program component that is executed by a CPU cryptographic processor cryptographic processor interface cryptographic processor device and or the like. Cryptographic processor interfaces will allow for expedition of encryption and or decryption requests by the cryptographic component however the cryptographic component alternatively may run on a CPU. The cryptographic component allows for the encryption and or decryption of provided data. The cryptographic component allows for both symmetric and asymmetric e.g. Pretty Good Protection PGP encryption and or decryption. The cryptographic component may employ cryptographic techniques such as but not limited to digital certificates e.g. X.509 authentication framework digital signatures dual signatures enveloping password access protection public key management and or the like. The cryptographic component will facilitate numerous encryption and or decryption security protocols such as but not limited to checksum Data Encryption Standard DES Elliptical Curve Encryption ECC International Data Encryption Algorithm IDEA Message Digest 5 MD5 which is a one way hash operation passwords Rivest Cipher RC5 Rijndael RSA which is an Internet encryption and authentication system that uses an algorithm developed in 1977 by Ron Rivest Adi Shamir and Leonard Adleman Secure Hash Algorithm SHA Secure Socket Layer SSL Secure Hypertext Transfer Protocol HTTPS and or the like. Employing such encryption security protocols the RUAP may encrypt all incoming and or outgoing communications and may serve as node within a virtual private network VPN with a wider communications network. The cryptographic component facilitates the process of security authorization whereby access to a resource is inhibited by a security protocol wherein the cryptographic component effects authorized access to the secured resource. In addition the cryptographic component may provide unique identifiers of content e.g. employing and MD5 hash to obtain a unique signature for an digital audio file. A cryptographic component may communicate to and or with other components in a component collection including itself and or facilities of the like. The cryptographic component supports encryption schemes allowing for the secure transmission of information across a communications network to enable the RUAP component to engage in secure transactions if so desired. The cryptographic component facilitates the secure accessing of resources on the RUAP and facilitates the access of secured resources on remote systems i.e. it may act as a client and or server of secured resources. Most frequently the cryptographic component communicates with information servers operating systems other program components and or the like. The cryptographic component may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses.

The RUAP database component may be embodied in a database and its stored data. The database is a stored program component which is executed by the CPU the stored program component portion configuring the CPU to process the stored data. The database may be any of a number of fault tolerant relational scalable secure databases such as DB2 MySQL Oracle Sybase and or the like. Relational databases are an extension of a flat file. Relational databases consist of a series of related tables. The tables are interconnected via a key field. Use of the key field allows the combination of the tables by indexing against the key field i.e. the key fields act as dimensional pivot points for combining information from various tables. Relationships generally identify links maintained between tables by matching primary keys. Primary keys represent fields that uniquely identify the rows of a table in a relational database. More precisely they uniquely identify rows of a table on the one side of a one to many relationship.

Alternatively the RUAP database may be implemented using various standard data structures such as an array hash linked list struct structured text file e.g. XML table and or the like. Such data structures may be stored in memory and or in structured files. In another alternative an object oriented database may be used such as Frontier ObjectStore Poet Zope and or the like. Object databases can include a number of object collections that are grouped and or linked together by common attributes they may be related to other object collections by some common attributes. Object oriented databases perform similarly to relational databases with the exception that objects are not just pieces of data but may have other types of capabilities encapsulated within a given object. If the RUAP database is implemented as a data structure the use of the RUAP database may be integrated into another component such as the RUAP component . Also the database may be implemented as a mix of data structures objects and relational structures. Databases may be consolidated and or distributed in countless variations through standard data processing techniques. Portions of databases e.g. tables may be exported and or imported and thus decentralized and or integrated.

In one embodiment the database component includes several tables . A Users table may include fields such as but not limited to user id applicant id firstname lastname address line1 address line2 dob ssn credit check flag zipcode city state account params list account mode account type account expiry preferred bank name preferred branch name credit report and or the like. The User table may support and or track multiple entity accounts on a RUAP. A Clients table may include fields such as but not limited to client ID client type client MAC client IP presentation format pixel count resolution screen size audio fidelity hardware settings list software compatibilities list installed apps list and or the like. An Apps table may include fields such as but not limited to app ID app name app type OS compatibilities list version timestamp developer ID and or the like. An Accounts table may include fields such as but not limited to user id account firstname account lastname account type account num account balance list billingaddress line1 billingaddress line2 billing zipcode billing state shipping preferences shippingaddress line1 shippingaddress line2 shipping zipcode shipping state and or the like. A Claims table may include fields such as but not limited to user id claim id timestamp claim type snapshot array receipt data process sent flag process clear flag and or the like. An Issuers table may include fields such as but not limited to account firstname account lastname account type account num account balance list billingaddress1 billingaddress line2 billing zipcode billing state shipping preferences shippingaddress line1 shippingaddress line2 shipping zipcode shipping state issuer id issuer name issuer address ip address mac address auth key port num security settings list and or the like. A Merchants table may include fields such as but not limited to merchant id merchant name provi merchant address ip address mac address auth key port num security settings list and or the like. An Acquirers table may include fields such as but not limited to account firstname account lastname account type account num account balance list billingaddress line1 billingaddress line2 billing zipcode billing state shipping preferences shippingaddress line1 shippingaddress line2 shipping zipcode shipping state and or the like. A Transactions table may include fields such as but not limited to order id user id timestamp transaction cost purchase details list num products products list product type product params list product title product summary quantity user id client id client ip client type client model operating system os version app installed flag user id account firstname account lastname account type account num billingaddress line1 billingaddress line2 billing zipcode billing state shipping preferences shippingaddress line1 shippingaddress line2 shipping zipcode shipping state merchant id merchant name merchant auth key rebate ID rebate amount rebate user rebate sponsor social payment id and or the like. A Batches table may include fields such as but not limited to applicant firstname applicant lastname applicant address line1 applicant address line2 consumer bureau data list consumer bureau data applicant clear flag credit limit credit score account balances delinquency flag quality flags batch id transaction id list timestamp list cleared flag list clearance trigger settings and or the like. A Ledgers table may include fields such as but not limited to request id timestamp deposit amount batch id transaction id clear flag deposit account transaction summary payor name payor account and or the like. An Insurance Provider table may include fields such as but not limited to InsuranceID InsuranceName InsuranceProgram InsuranceBlN InsuranceCoverageTable InsuranceVeriCode InsuranceAuthorization and or the like. A Healthcare Provider table may include fields such as but not limited to HealthProviderID HealthProviderName HealthProviderZipcode HealthProviderProcedureCode HealthProviderClaimCode HealthProviderPricingList and or the like. A medical products services table may include fields such as but not limited to authorizedMedProductID authorizedMedServiceID ProductCode ServiceProcedureCode HealthProviderID InsuranceID InsuranceCoverageRate PricingRate and or the like. A Restricted Use Codes table may include fields such as but not limited to ru type ru issuer ru category ru mcc ru sponsor ru rule ru deduction ru alert ru account ru whitelist ru blacklist and or the like. A Receipt table may include fields such as but not limited to receipt id receipt user id receipt wallet id receipt time receipt merchant id receipt image receipt item receipt mcc receipt amount receipt transaction id receipt transaction amount receipt claim receipt qr code receipt item ru and or the like. A Bill table may include fields such as but not limited to bill id bill user id bill wallet id bill time bill merchant id bill image bill item bill mcc bill amount bill transaction id bill transaction amount bill claim bill qr code bill item ru and or the like.

In one embodiment the RUAP database may interact with other database systems. For example employing a distributed database system queries and data access by search RUAP component may treat the combination of the RUAP database an integrated data security layer database as a single database entity.

In one embodiment user programs may contain various user interface primitives which may serve to update the RUAP. Also various accounts may require custom database tables depending upon the environments and the types of clients the RUAP may need to serve. It should be noted that any unique fields may be designated as a key field throughout. In an alternative embodiment these tables have been decentralized into their own databases and their respective database controllers i.e. individual database controllers for each of the above tables . Employing standard data processing techniques one may further distribute the databases over several computer systemizations and or storage devices. Similarly configurations of the decentralized database controllers may be varied by consolidating and or distributing the various database components . The RUAP may be configured to keep track of various settings inputs and parameters via database controllers.

The RUAP database may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the RUAP database communicates with the RUAP component other program components and or the like. The database may contain retain and provide information regarding other nodes and data.

The RUAP component is a stored program component that is executed by a CPU. In one embodiment the RUAP component incorporates any and or all combinations of the aspects of the RUAP discussed in the previous figures. As such the RUAP affects accessing obtaining and the provision of information services transactions and or the like across various communications networks. The features and embodiments of the RUAP discussed herein increase network efficiency by reducing data transfer requirements the use of more efficient data structures and mechanisms for their transfer and storage. As a consequence more data may be transferred in less time and latencies with regard to transactions are also reduced. In many cases such reduction in storage transfer time bandwidth requirements latencies etc. will reduce the capacity and structural infrastructure requirements to support the RUAP s features and facilities and in many cases reduce the costs energy consumption requirements and extend the life of RUAP s underlying infrastructure this has the added benefit of making the RUAP more reliable. Similarly many of the features and mechanisms are designed to be easier for users to use and access thereby broadening the audience that may enjoy employ and exploit the feature sets of the RUAP such ease of use also helps to increase the reliability of the RUAP. In addition the feature sets include heightened security as noted via the Cryptographic components and throughout making access to the features and data more reliable and secure.

The RUAP transforms purchase item information inputs e.g. see in or purchase receipt inputs e.g. see in via RUAP components such as user enrollment component e.g. card processing component e.g. see insurance authorization adjudication component e.g. see account recommendation component e.g. see receipt bill image processing component e.g. see funds allocation reimbursement processing component e.g. see restricted use managing component e.g. see PTA component e.g. see PTC component e.g. see TDA component e.g. see and or the like into restricted use account payment settlement outputs e.g. see in in and or the like .

The RUAP component enabling access of information between nodes may be developed by employing standard development tools and languages such as but not limited to Apache components Assembly ActiveX binary executables ANSI Objective C C and or .NET database adapters CGI scripts Java JavaScript mapping tools procedural and object oriented development tools PERL PHP Python shell scripts SQL commands web application server extensions web development environments and libraries e.g. Microsoft s ActiveX Adobe AIR FLEX FLASH AJAX D HTML Dojo Java JavaScript jQuery UI MooTools Prototype script.aculo.us Simple Object Access Protocol SOAP SWFObject Yahoo User Interface and or the like WebObjects and or the like. In one embodiment the RUAP server employs a cryptographic server to encrypt and decrypt communications. The RUAP component may communicate to and or with other components in a component collection including itself and or facilities of the like. Most frequently the RUAP component communicates with the RUAP database operating systems other program components and or the like. The RUAP may contain communicate generate obtain and or provide program component system user and or data communications requests and or responses.

The structure and or operation of any of the RUAP node controller components may be combined consolidated and or distributed in any number of ways to facilitate development and or deployment. Similarly the component collection may be combined in any number of ways to facilitate deployment and or development. To accomplish this one may integrate the components into a common code base or in a facility that can dynamically load the components on demand in an integrated fashion.

The component collection may be consolidated and or distributed in countless variations through standard data processing and or development techniques. Multiple instances of any one of the program components in the program component collection may be instantiated on a single node and or across numerous nodes to improve performance through load balancing and or data processing techniques. Furthermore single instances may also be distributed across multiple controllers and or storage devices e.g. databases. All program component instances and controllers working in concert may do so through standard data processing communication techniques.

The configuration of the RUAP controller will depend on the context of system deployment. Factors such as but not limited to the budget capacity location and or use of the underlying hardware resources may affect deployment requirements and configuration. Regardless of if the configuration results in more consolidated and or integrated program components results in a more distributed series of program components and or results in some combination between a consolidated and distributed configuration data may be communicated obtained and or provided. Instances of components consolidated into a common code base from the program component collection may communicate obtain and or provide data. This may be accomplished through intra application data processing communication techniques such as but not limited to data referencing e.g. pointers internal messaging object instance variable communication shared memory space variable passing and or the like.

If component collection components are discrete separate and or external to one another then communicating obtaining and or providing data with and or to other components may be accomplished through inter application data processing communication techniques such as but not limited to Application Program Interfaces API information passage distributed Component Object Model D COM Distributed Object Linking and Embedding D OLE and or the like Common Object Request Broker Architecture CORBA Jini local and remote application program interfaces JavaScript Object Notation JSON Remote Method Invocation RMI SOAP process pipes shared files and or the like. Messages sent between discrete component components for inter application communication or within memory spaces of a singular component for intra application communication may be facilitated through the creation and parsing of a grammar. A grammar may be developed by using development tools such as lex yacc XML and or the like which allow for grammar generation and parsing capabilities which in turn may form the basis of communication messages within and between components.

where Value1 is discerned as being a parameter because http is part of the grammar syntax and what follows is considered part of the post value. Similarly with such a grammar a variable Value1 may be inserted into an http post command and then sent. The grammar syntax itself may be presented as structured data that is interpreted and or otherwise used to generate the parsing mechanism e.g. a syntax description text file as processed by lex yacc etc. . Also once the parsing mechanism is generated and or instantiated it itself may process and or parse structured data such as but not limited to character e.g. tab delineated text HTML structured text streams XML and or the like structured data. In another embodiment inter application data processing protocols themselves may have integrated and or readily available parsers e.g. JSON SOAP and or like parsers that may be employed to parse e.g. communications data. Further the parsing grammar may be used beyond message parsing but may also be used to parse databases data collections data stores structured data and or the like. Again the desired configuration will depend upon the context environment and requirements of system deployment.

For example in some implementations the RUAP controller may be executing a PHP script implementing a Secure Sockets Layer SSL socket server via the information server which listens to incoming communications on a server port to which a client may send data e.g. data encoded in JSON format. Upon identifying an incoming communication the PHP script may read the incoming message from the client device parse the received JSON encoded text data to extract information from the JSON encoded text data into PHP script variables and store the data e.g. client identifying information etc. and or extracted information in a relational database accessible using the Structured Query Language SQL . An exemplary listing written substantially in the form of PHP SQL commands to accept JSON encoded input data from a client device via a SSL connection parse the data to extract variables and store the data to a database is provided below 

Also the following resources may be used to provide example embodiments regarding SOAP parser implementation 

In order to address various issues and advance the art the entirety of this application for RESTRICTED USE ACCOUNT PAYMENT ADMINISTRATION APPARATUSES METHODS AND SYSTEMS APPARATUSES METHODS AND SYSTEMS including the Cover Page Title Headings Field Background Summary Brief Description of the Drawings Detailed Description Claims Abstract Figures Appendices and or otherwise shows by way of illustration various example embodiments in which the claimed innovations may be practiced. The advantages and features of the application are of a representative sample of embodiments only and are not exhaustive and or exclusive. They are presented only to assist in understanding and teach the claimed principles. It should be understood that they are not representative of all claimed innovations. As such certain aspects of the disclosure have not been discussed herein. That alternate embodiments may not have been presented for a specific portion of the innovations or that further undescribed alternate embodiments may be available for a portion is not to be considered a disclaimer of those alternate embodiments. It will be appreciated that many of those undescribed embodiments incorporate the same principles of the innovations and others are equivalent. Thus it is to be understood that other embodiments may be utilized and functional logical operational organizational structural and or topological modifications may be made without departing from the scope and or spirit of the disclosure. As such all examples and or embodiments are deemed to be non limiting throughout this disclosure. Also no inference should be drawn regarding those embodiments discussed herein relative to those not discussed herein other than it is as such for purposes of reducing space and repetition. For instance it is to be understood that the logical and or topological structure of any combination of any data flow sequence s program components a component collection other components and or any present feature sets as described in the figures and or throughout are not limited to a fixed operating order and or arrangement but rather any disclosed order is exemplary and all equivalents regardless of order are contemplated by the disclosure. Furthermore it is to be understood that such features are not limited to serial execution but rather any number of threads processes processors services servers and or the like that may execute asynchronously concurrently in parallel simultaneously synchronously and or the like are also contemplated by the disclosure. As such some of these features may be mutually contradictory in that they cannot be simultaneously present in a single embodiment. Similarly some features are applicable to one aspect of the innovations and inapplicable to others. In addition the disclosure includes other innovations not presently claimed. Applicant reserves all rights in those presently unclaimed innovations including the right to claim such innovations file additional applications continuations continuations in part divisions and or the like thereof. As such it should be understood that advantages embodiments examples functional features logical operational organizational structural topological and or other aspects of the disclosure are not to be considered limitations on the disclosure as defined by the claims or limitations on equivalents to the claims. It is to be understood that depending on the particular needs and or characteristics of a RUAP individual and or enterprise user database configuration and or relational model data type data transmission and or network framework syntax structure and or the like various embodiments of the RUAP may be implemented that allow a great deal of flexibility and customization. For example aspects of the RUAP may be adapted for various card management and secured payment processing offer coupon distribution and redemption social payment and or the like. While various embodiments and discussions of the RUAP have been directed to restricted use account payment however it is to be understood that the embodiments described herein may be readily configured and or customized for a wide variety of other applications and or implementations.

