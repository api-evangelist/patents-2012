---

title: Accuracy configurable adders and methods
abstract: A preferred method of accuracy configuration with an approximate adder receives two input operands and generates a first approximate adder output with a plurality of sub-adders having a first accuracy under a first condition. Error detection and correction is selectively enabled to generate a next approximate adder output having a second accuracy that is higher than the first accuracy under a second condition. In preferred embodiments, a pipelined architecture provides selectable stages and the enablement of each successive stage provides a high level of accuracy. Power gated control can achieve enablement of error correction stages to conserve power.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09229686&OS=09229686&RS=09229686
owner: The Regents of the University of California
number: 09229686
owner_city: Oakland
owner_country: US
publication_date: 20120827
---
This invention was made with Government support under DARPA Grant No. 00001755 2009 DT 2049 . The Government has certain rights in the invention.

Fields of the invention include arithmetic circuitry microelectronics and integrated circuits. Example applications of the invention include applications where approximation can increase performance or reduce power consumption with a simplified or to inaccurate circuits in application contexts where strict requirements are relaxed. Example applications are related to circuits used to provide output to human senses because approximate arithmetic can be used to generate sufficient results rather than absolutely accurate results

Adders are key to many circuits including microprocessor architectures. Adders perform critical operations including arithmetic functions addition subtraction multiplication comparison functions and incrementing or decrementing functions. Adders are of interest as a bottleneck to further improvements in the performance of microprocessors and other general and specific purpose circuits.

Approximation has been recognized as providing an opportunity to increase performance or reduce power consumption through use of a simplified or inaccurate circuit in application contexts where strict requirements are relaxed. Approximate design enables a tradeoff of accuracy in computation versus performance and or power. Various approximate arithmetic designs have been proposed that provide a fixed approximation to achieve a set performance. The approximation is designed at a level that provides an error rate that is an acceptable penalty. If error detection and correction is used the penalty rate is set such that correction still results in a net speed computation benefit.

Lu described a faster adder which has shorter carry chains and considers only the previous k bits of input in computing a carry bit. Lu Speeding Up Processing with Approximation Circuits 37 3 2004 pp. 67 73. Verma et al. describe a modification of Lu s adder in the form of a variable latency speculative adder VLSA . Verma et al. Variable Latency Speculative Addition A New Paradigm for Arithmetic Circuit Design 2008 pp. 1250 1255 . The Verma et al. paper describes a modification of Lu s approximate fast adder that includes error detection and correction to Lu s design. This modification is a variable latency adder that produces a correct result very fast with extremely high probability using an approximation. When an error is detected a correction term must be applied and the correct result is produced after is a time delay. Shin et al. also propose a data path redesign technique for various adders which cuts the critical path in the carry chain. Shin et al. A Re Design Technique for Datapath Modules in Error Tolerant Applications 2008 pp. 431 437 . Zhu et al. propose an error tolerant adders ETA . ETAI is divided into an accurate part and an inaccurate part to achieve approximate results. Zhu et al. Design of Low Power High Speed Truncation Error Tolerant Adder and Its Application in Digital Signal Processing 18 8 2010 pp. 1225 1229 . ETAII cuts carry propagation to speed up the adder and ETAIIM modifies ETAII by connecting carry chains in accurate MSB parts. Individually and collectively these approximate adder designs produce almost correct results at prescribed accuracy for a particular application and obtain power reductions or performance improvements in return.

These prior techniques are therefore restricted or at least best suited to particular application contexts. In contexts where the accuracy requirement can change dynamically the previous methods benefits from the accuracy tradeoff are reduced since the implementation must be targeted to the maximum accuracy requirement.

A preferred method of accuracy configuration with an approximate adder receives two input operands and generates a first approximate adder output with a plurality of sub adders having a first accuracy under a first condition. Error detection and correction is selectively enabled to generate a next approximate adder output having a second accuracy that is higher than the first accuracy under a second condition. In preferred embodiments a pipelined architecture provides selectable stages and the enablement of each successive stage provides a high level of accuracy. Power gated control can achieve enablement of error correction stages to conserve power.

The present invention recognizes that required accuracy varies according to applications and 100 accurate results are still required in some situations. The invention provides adders and adding methods with run time solutions that are scalable. To the knowledge of the inventors but without limiting the nature of the advancement of the invention it is not believed that previous approximate adders have been described that can configure the output accuracy during runtime. Previous approximate adders known to the inventors have difficulty detecting and correcting errors since they are designed for error acceptable applications with a target accuracy. However the present inventors have recognized that accurate computations are still required at certain times. The invention provides an approximate adder that supports both accurate and inaccurate computation with error correction and accuracy configuration capability.

A preferred embodiment of the invention is an accuracy configurable approximate adder and adding method for which the accuracy of results is configurable during runtime. The preferred adder and method can adaptively operate in both approximate inaccurate mode and accurate mode. The preferred adder and method can achieve significant throughput improvement and total power reduction over conventional adder designs and methods. The preferred adder and method can be used in accuracy configurable applications and improves the achievable tradeoff between performance power and quality.

A preferred embodiment includes an approximate adder section and an error detection and correction section. The approximate adder section will produce incorrect results when it processes specific input patterns. The error detection and correction section can detect and correct such incorrect results with a is small overhead.

A preferred embodiment implements an accuracy configurable adder of the invention in combination with a pipelined architecture. In the pipelined accuracy configurable adder of the invention each stage generates a result with different accuracy. The output accuracy increases as the number of pipeline stages increases. According to a specified or selected accuracy requirement later stages of the pipeline can be turned off with a power gating technique. This reduces accuracy according to the specified or selected accuracy requirement and results in a desirable reduction in computational load delay and power consumption further with the accuracy tradeoff.

Artisans will recognize that the invention can be applied to all arithmetic designs which allow inaccurate results during specific periods. The invention is applicable to datapath arithmetic parts of digital processors. In some applications more accurate or totally accurate results are required under certain conditions e.g. image processing in security cameras would require cleaner images after detecting a motion. In contexts where the required accuracy changes during runtime accuracy configurable adders of invention can configure the accuracy of results and maximize the benefit of approximate operations.

Preferred embodiments of the invention will now be discussed with respect to the drawings. The drawings may include schematic representations which will be understood by artisans in view of the general knowledge in the art and the description that follows. Features may be exaggerated in the drawings for emphasis and features may not be to scale. It is to be noted however that the appended drawings illustrate only typical embodiments of this invention and are therefore not to be considered limiting of its scope for artisans will recognize additional effective embodiments that are within the scope of the present invention.

The sub adders and can be conventional adders e.g. carry look ahead adders CLA ripple carry adders Kogge Stone adders. Any type of adders can be used for the sub adders and all sub adders can be same type of adder or can be mix of different type of adders. Another option is a Wallace tree adder. The Wallace tree adder is a three input adder and can receive three operands. The invention supports use of Wallace tree adders as the sub adders and such a change does not affect error correction to enable configurable accuracy as indicated below.

With the reduced critical path delay high performance by increasing the clock frequency and or low power consumption by decreasing the operating voltage is obtained. The second middle sub adder adds accuracy. Without the middle sub adder error occurs when the eighth carry bit is high and for random input patterns the error rate is 50.1 . On the other hand with the introduction into the computation path of the middle sub adder error rate for random input patterns is reduced to 5.5 . In preferred actual implementations all redundant parts of sub adders are optimized only for carry generation.

In modern adder designs such as carry lookahead CLA carry select and Kogge Stone adders the path depth and area are asymptotically proportional to logN and N logN respectively where N is the bit width of the adder. Based on this we can express delay area and power consumption of the proposed adder in terms of the parameters N and k. The and adders of the invention have N k 1 sub adders each of which is a 2k bit adder. Therefore delay of the critical path and area can be expressed with the following equations where Cand Care constants for delay and area respectively. delay log1 area 2 log1 

In the adder design the output of each sub adder except the last sub adder is incorrect when a carry signal is supposed to be propagated between sub adders. In when the carry from the third sub adder is 1 and the second sub adder result is 1111 the output result of the first sub adder has an error in SUM 15 12 . In the general implementation shown in the output result will be correct when there are no errors in all N k 1 sub adders. In the isub adder errors occur when 1 the LSB part of the result SUMi k 1 0 has all 1 values probability P 1 2k and 2 the LSB part k 1 0 of the i 1 sub adder produces a carry bit probability P . . . . Therefore with a random input vector the probability of having a correct result in the proposed adder is expressed with the following equation.

As described above configurable adders of the invention will be incorrect when a carry bit is propagated between sub adders. However the error can be detected and corrected with a small overhead in accordance with the invention. A low overhead error detection is accomplished by detecting an error for each sub adder by checking the output of the sub adder and the carry in signal that comes from the previous sub adder. Error detection can be implemented with several and gates. To correct the error 1 should be added to the approximate inaccurate output and the error correction can be implemented with an incrementor circuit.

A pipelined embodiment of the invention shown in permits accurate results with the same throughput as a conventional adder. In the pipelined architecture approximate additions are computed at a first pipeline stage and error correction can be completed in a subsequent stage . The approximate adder produces approximate output in the first pipeline stage . An error bit is generated with the error detection circuit of . In the second pipeline stage the error is corrected with the incrementor circuit . The pipelined implementation of the proposed approximate adder invention has a structural analogy with the pipelined adder of the patent Fast Pipelined Adder Subtractor using Increment Decrement Function with Reduced Register is Utilization U.S. Pat. No. 7 007 059 2006 incorporated by reference herein in which partial summations are performed at the first stage and carry bits are added at the later stages. However the 059 patent is directed to accurate operations and not approximate computations.

In the pipelined approach there is no improvement of the clock frequency since the achievable clock period is the same as that of the conventional adder. However power benefits are obtained through configuration of accuracy in the approximate mode the error correction stage is power gated with foot and or head switches and power reduction over the conventional adder design can be achieved. The switches are controlled by a mode signal . The foot head switches are placed between the voltage ground supply and a given block of functional circuitry the block s leakage is stopped when the switch cuts off the current path from supply to ground.

To achieve higher performance or lower power consumption we can reduce the carry chain depth k of sub adders. However when k is less than N 4 it is impossible to correct all errors and achieve 100 correct results within one clock cycle since the error correction paths become critical. To achieve correct results in the pipelined implementation the error correction stage should be extended to multiple stages.

Designs of the invention have been simulated. The experiments with simulations show excellent performance potential and advantages.

To test approximate designs each design was written in Verilog and synthesized it to a TSMC 65GP cell library with Synopsys Design Compiler. Gate level simulations were performed using Cadence NC Sim. In the simulations gate delay was taken from an SDF standard delay format file. For voltage scaling experiments a Synopsys Liberty .lib file for each voltage was prepared from 1.00V to 0.60V in 0.01V increments using the Cadence Library Characterizer v9.1. The prepared libraries were used for SDF file generation and power estimation at each voltage. Each simulation was performed with input patterns for one million cycles. During the simulation each output value is compared with a reference correct value to produce the accuracy metrics. Random data as well as actual data from SPEC 2006 benchmarks were used as input patterns. Operand data was extracted from ADD instructions in the SPEC benchmarks.

To quantify errors in approximate designs two metrics have been previously proposed. See M. A. Breuer Intelligible Test Techniques to Support Error Tolerance Test Symposium pp. 386 393 2004 . Error rate ER is the percentage of cycles in which output value is different from the correct value. Error significance ES is the numerical difference between correct and output results. which quantifies the amount of error. In image video applications uses the product of ES and ER can be used as a metric of error tolerance. See I. Chong et al. New Quality Metric for Multimedia Compression Using Faulty Hardware Proc. International Workshop on Video Processing and Quality Metrics for Consumer Electronics pp. 267 272 2006 . ES ER can be used as criterion for acceptability called an acceptance threshold where the acceptance threshold is specified according to the application. See D. Shin and S. K. Gupta A Re Design Technique for Datapath Modules in Error Tolerant Applications Asian Test Symp. pp. 431 437 2008 . For the error significance ES metric only amplitude of error needs to be considered for certain applications. N. Zhu et al. Design of Low Power High Speed Truncation Error Tolerant Adder and Its Application in Digital Signal Processing IEEE Trans. on VLSI Systems 18 8 pp. 1225 1229 2010 . This approach is useful for many digital signal processing DSP systems that process e.g. sound and image data. However in communication systems that mainly handle information data the number of incorrect bits Hamming distance .

A metric for the amplitude data can be labeled ACCand is defined as 1 R R R where Rand Rare the correct and obtained results respectively. We provide an additional metric for information data ACC that measures error significance as Hamming distance. This metric is defined as 1 B B where Bis the number of error bits and Bis the bit width of the data. The amplitude and significance metrics were averaged over the entire simulation to evaluate the approximate circuits.

Table I summarizes results minimum clock period area error rate and throughput improvements for each implementation of the 16 bit adder with different k values. According to the results with smaller k the minimum operating frequency increases but the error rate increases as well. With higher k the error rate is reduced significantly but the benefit of the approximate circuit i.e. clock period reduction is small. In the table throughput improvement over conventional design is calculated including error recovery overhead. From the implementations a maximum throughput improvement is achieved when k 3. If we correct erroneous results with error correction and detection as in then 17.2 additional clock cycles are required for error correction. With this overhead the present configurable approximate adder with error correction can improve data throughput by 24.6 over a conventional CLA adder.

Gate level simulation at each possible clock period was conducted to compare five adders carry look ahead adder CLA Lu s adder S. L. Lu Speeding Up Processing with Approximation Circuits Computer 37 3 2004 pp. 67 73 ETAI ETAIIM N. Zhu W. Goh W. Zhang K. Yeo and Z. Kong Design of Low Power High Speed Truncation Error Tolerant Adder and Its Application in Digital Signal Processing IEEE Trans. on VLSI Systems 18 8 2010 pp. 1225 1229 and the present accuracy configurable adder without error correction . In the experiment the same carry chain width 8 bit is selected for the four approximate adders. In the implementation a register flip flop is inserted in each output port to detect timing errors.

Table II shows area pass rate accuracy minimum clock period and EDC overhead for each adder design. According to the results the ETAI adder has is the smallest design area but has a low pass rate and limited accuracy with respect to the ACCmetric. Therefore the ETAI adder is preferred for applications which allow low accuracy in results. The ETAIIM adder shows fairly high accuracy but does not have speed clock period benefit. Lu s adder shows a smaller error rate and high accuracy with respect to both ACCand ACCmetrics. However it requires larger area than the other designs. The present adder ACA shows similar results for both metrics as Lu s adder. However the area of the present adder is smaller than that of Lu s adder and EDC is possible with small area overhead 28 . With the present adder the minimum clock period can be reduced by 26 compared to the accurate CLA.

The pipelined architecture of was also tested in the simulations. In the pipelined architecture the present adder can provide various configurable modes according to the pipeline depth. To improve the design performance increase the pipeline depth the deeper pipeline reduces the path depth of the design. In the conventional pipelined adder bit width of the adder in each stage can be reduced to N stage where N is the entire bit width and stage is the depth number of the pipeline stages. In the present adder the value of parameter k can be reduced with deeper pipeline depth. To show the benefit of accuracy configuration a 32 bit ACA adder N 32 k 4 with 4 stage pipeline was simulated and compared with a conventional pipelined adder with an 8 bit CLA in each stage. Table III shows the implemented results for the 32 bit pipelined adder of the invention. For the accuracy estimation random patterns of is one million cycles are used. The ACA adder can operate in four different modes with the power gating of each stage. The modes show different power consumptions and different achievable accuracies. From the results due to the presence of recovery circuits the present adder consumes 11.5 more power than the conventional adder in accurate mode mode 1 . At the same time it shows a significant power reduction with approximate modes 12.4 31.0 and 51.6 at mode 2 mode 3 and mode 4 respectively. Data showed that accuracy configuration with the mode change is much more effective than with voltage scaling in terms of the tradeoff between accuracy and power.

While specific embodiments of the present invention have been shown and described it should be understood that other modifications substitutions and alternatives are apparent to one of ordinary skill in the art. Such modifications substitutions and alternatives can be made without departing from the spirit and scope of the invention which should be determined from the appended claims.

