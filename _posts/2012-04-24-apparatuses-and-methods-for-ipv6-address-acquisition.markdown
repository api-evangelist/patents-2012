---

title: Apparatuses and methods for IPV6 address acquisition
abstract: A mobile communication device operating as a Mobile Terminal (MT) with multiple processor logics is provided. In the mobile communication device, a first processor logic is configured for sending an Activate PDP (Packet Data Protocol) Context Request message to a service network, a second processor logic is configured for receiving an Activate PDP Context Accept message indicating a PDP address from the service network, and a third processor logic is configured for indicating an interface identifier and a prefix obtained from the PDP address to a Terminal Equipment (TE), so that the TE constructs an IPv6 address based on the prefix and interface identifier.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08982815&OS=08982815&RS=08982815
owner: Mediatek Inc.
number: 08982815
owner_city: Hsin-Chu
owner_country: TW
publication_date: 20120424
---
The invention generally relates to the acquisition of IPv6 addresses and more particularly to the acquisition of IPv6 addresses in mobile communication devices.

With the explosive growth of Internet applications more and more devices such as personal computers workstations laptop computers smart phones and various electric appliances require IP addresses to communicate on the Internet. It leads to a problem that the number of the commonly adopted IP addresses provided by the Internet Protocol version 4 IPv4 is going to be used up. In order to accommodate the fast growing needs for IP addresses the Internet Protocol version 6 IPv6 has been proposed by the Internet Engineering Task Force IETF to solve the long anticipated problem of IPv4 address exhaustion and provide a sufficient address space simplified header format support for authentication and privacy auto configuration of address assignments and new Quality of Service QoS capabilities. The IPv4 uses 32 bits for an IP address and therefore has 2possible addresses while the IPv6 uses 128 bits for an addresses and results in 2possible addresses approximately 340 undecillion or 3.4 1038 . This expansion can accommodate much more devices and users on the Internet and offer extra flexibility in allocating addresses and efficiency in routing traffic. It also relieves the need on Network Address Translation NAT which is widespread deployed as a work around for the IPv4 address exhaustion problem. An IPv6 address is typically composed of two parts a 64 bit network prefix referred to herein as prefix for brevity used for routing and a 64 bit interface identifier used to identify a host s network interface. In general the prefix is contained in the most significant 64 bits of the IPv6 address. The interface identifier is generated from the interface s MAC address using the modified EUI 64 format obtained from a DHCPv6 server of GGSN established randomly or just assigned manually. Particularly a dynamic IPv6 address is configured using the stateless address auto configuration SLAAC .

In order to solve the above mentioned problem the invention proposes a flexible way to speed up the acquisition of an IPv6 address. In one aspect of the invention a mobile communication device operating as a Mobile Terminal MT is provided. The mobile communication device comprises a first processor logic for sending an Activate PDP Packet Data Protocol Context Request message to a service network a second processor logic for receiving an Activate PDP Context Accept message indicating a PDP address from the service network and a third processor logic for indicating an interface identifier and a prefix obtained from the PDP address to a Terminal Equipment TE so that the TE constructs an IPv6 address based on the prefix and interface identifier.

In another aspect of the invention a method for IPv6 address acquisition by a mobile communication device operating as an MT is provided. The method comprises the steps of sending an Activate PDP Context Request message to a service network receiving an Activate PDP Context Accept message indicating a PDP address from the service network and indicating an interface identifier and a prefix obtained from the PDP address to a TE so that the TE constructs an IPv6 address based on the prefix and interface identifier.

Other aspects and features of the present invention will become apparent to those with ordinarily skill in the art upon review of the following descriptions of specific embodiments of the mobile communication device and method for IPv6 address acquisition by a mobile communication device.

The following description is of the best contemplated mode of carrying out the invention. This description is made for the purpose of illustrating the general principles of the invention and should not be taken in a limiting sense. It should be understood that the embodiments may be realized in software hardware firmware or any combination thereof. Note that the 3GPP specifications described herein are used to teach the spirit of the invention and the invention is not limited thereto.

Please note that although the TE and the MT are shown to be two separate devices they may be incorporated into one single device. For example the TE may be implemented as one or more software modules and incorporated into the MT and the invention should not be limited thereto.

The service network may be a Universal Mobile Telecommunications System UMTS network which provides wireless connectivity of the Circuit Switched CS and Packet Switched PS services to the MT . The service network further includes an access network or called radio access network and a core network wherein the access network allows connectivity between the MT and the core network by providing the functionality of wireless transmissions and receptions to and from the MT for the core network and the core network signals the required operation to the access network for providing wireless services to the MT . The access network may contain one or more base stations or called NodeBs and Radio Network Controllers RNCs . Specifically the core network includes a Serving GPRS General Packet Radio Services Support Node SGSN and a Gateway GPRS Support Node GGSN wherein the SGSN is the key control node for packet routing and transfer mobility management e.g. attach detach and location management session management logical link management and authentication and charging functions etc. and the GGSN is responsible for PDP addresses assignments and inter working with external networks. Additionally the service network may further include other functional entities such as a Home Location Register HLR not shown which is a central database storing user related and subscription related information and the invention is not limited thereto.

Subsequently the GGSN replies to the SGSN with a Create PDP Context Response message which indicates an assigned PDP address step S . In addition to containing a PDP address IE for indicating the assigned PDP address the Create PDP Context Response message may also contain the PCO IE which may comprise configuration data such as a list of Domain Name System DNS server IPv6 addresses and a cause value for indicating the outcome of the host authentication and configuration. Next the SGSN forwards the PDP address to the MT by sending an Activate PDP Context Accept message to the MT step S . When receiving the Activate PDP Context Accept message the MT extracts an interface identifier from the PDP address and then indicates the interface identifier to the TE via a response for PDP context activation step S . Also the MT extracts a prefix from the PDP address and then indicates the prefix to the TE via a prefix indication step S . After that the TE constructs an IPv6 address based on the received interface identifier and prefix step S and the procedure ends. Rather than the introduced steps S to S those skilled in the art may practice the MT to construct the IPv6 address by extracting both the interface identifier and the prefix from the PDP address and indicate the IPv6 address to the TE via an IPv6 indication. Note that with violation of the specification 3GPP 29.061 defining that a Mobile Station MS issues a Router Solicitation RS message directly after the user plane establishment PDP context activation to trigger GGSN to send a Router Advertisement RA message immediately the prefix is provided to the TE by the MT once an Activate PDP Context Accept message indicating a PDP address has been received so that the TE saves time required for performing a router discovery process to obtain the prefix and obtains PS services as early as possible.

Similarly the extraction of the interface identifier in the step S may be done by extracting the octet to octet of the PDP address IE when the value of the PDP type number represents IPv6 wherein the bit of the octet represents the most significant bit of the interface identifier and the bit of the octet represents the least significant bit of the interface identifier. Otherwise the MT may extract the octet to octet of the PDP address IE to be the interface identifier when the value of the PDP type number represents IPv4v6 wherein the bit of the octet represents the most significant bit of the interface identifier and the bit of the octet represents the least significant bit of the interface identifier.

Subsequently the TE further constructs a link local address according to the interface identifier and then proceeds to a router discovery process by sending an RS message to the GGSN using the link local address step . After sending the RS message the TE waits for a predetermined time period to receive a reply i.e. an RA message from the GGSN . If in this embodiment no reply has been received from the GGSN after the predetermined time period elapses the MT extracts a prefix from the PDP address indicated by the response i.e. a Activate PDP Context Accept message and then indicates the prefix to the TE via a prefix indication step S . In some embodiments a timer may be started to count the predetermined time period and the step S is performed in response to the expiry of the timer. After that the TE constructs an IPv6 address based on the received interface identifier and prefix step S and the procedure ends. To sum up in order to prevent the TE from waiting too long or waiting endlessly the MT monitors the reception of the reply from GGSN . When observing that the reply has not been received for a predetermined time period the MT extracts a prefix from previously received PDP address and indicates the prefix to the TE thereby enabling the TE to timely construct a global IPv6 address.

Alternatively before performing the step S the TE may resend the RS message when the predetermined time period has elapsed and again count the predetermined time period for waiting to receive an RA message from the GGSN . After a predetermined number of retries and receives no reply the step S is performed. Yet in another embodiment for each retry the amount of the predetermined time period may be increased. For example assume the amount of the predetermined time period to be x milliseconds thus the amount of the predetermined time period may be set to x mmilliseconds for the first retry x mmilliseconds for the second retry and x mmilliseconds for the third retry and so on wherein m

Regarding the step S of and the step of the request for PDP context activation may be sent via an IPv6CP Configure Request message an AT CGACT command or a proprietary interface predefined between the MT and the TE . For example the IPv6CP Configure Request message may be applied in a PPP dial up scenario where the TE and the MT are disposed in two separate devices or incorporated into one single device. The AT CGACT command may be applied in a Network Driver Interface Specification NDIS dial up scenario where the TE and the MT are disposed in two separate devices or incorporated into one single device. The proprietary interface may be applied in the case where the TE and the MT are disposed in two separate devices or incorporated into one single device such as a feature phone.

Regarding the step S of and the step of the prefix indication may be carried out by a forged RA message a proprietary AT command or a proprietary interface predetermined between the MT and the TE or a memory shared between the MT and the TE . For example the forged RA message may be applied in a PPP dial up scenario where the TE and the MT may be disposed in two separate devices or incorporated into one single device. The proprietary AT command may be applied in an NDIS dial up scenario where the TE and the MT may be disposed in two separate devices or incorporated into one single device. The proprietary interface may be applied in the case where the TE and the MT may be disposed in two separate devices or incorporated into one single device. The shared memory may be applied in the case where the TE and the MT are incorporated into one single device such as a feature phone. Specifically an allocated space in the shared memory may be used to store the prefix and the value stored therein may be set to an initial value e.g. ffff to indicate that the prefix is not yet available so that the TE may periodically determine whether the stored value has been changed and obtain the prefix if so.

In block B the MT receives an Activate PDP Context Accept message indicating a PDP address from the SGSN of the service network . Next in block B the MT indicates an interface identifier and a prefix obtained from the PDP address to the TE so that the TE constructs an IPv6 address based on the prefix and interface identifier and the IPv6 address acquisition is completed. Please note that the detailed description regarding the prefix indication may be implemented by several examples with respect to the step S of and the step of as described above and is omitted here for brevity.

Next in block B the MT determines whether an RA message has been received from the GGSN of the service network in a predetermined time period. If not the process proceeds to block B where the MT indicates a prefix obtained from the PDP address to the TE . Consequently in block B the TE constructs an IPv6 address based on the prefix and interface identifier and the IPv6 address acquisition is completed.

Subsequent to block B if so the process proceeds to block B where the TE receives an RA message indicating the prefix from the GGSN of the service network and then the process proceeds to block to complete the IPv6 address acquisition.

Note that the criterion of the determination process in block B may be alternatively configured to determine whether the RS message has been resent for a predetermined number of times wherein the amount of waiting time period between two retries may be increased as described above with respect to the alternative of the step S in .

While the invention has been described by way of example and in terms of preferred embodiment it is to be understood that the invention is not limited thereto. Those who are skilled in this technology can still make various alterations and modifications without departing from the scope and spirit of this invention. Therefore the scope of the present invention shall be defined and protected by the following claims and their equivalents.

Use of ordinal terms such as first second third etc. in the claims to modify a claim element does not by itself connote any priority precedence or order of one claim element over another or the temporal order in which acts of a method are performed but are used merely as labels to distinguish one claim element having a certain name from another element having a same name but for use of the ordinal term to distinguish the claim elements.

