---

title: System and method for simulating virtual machine migration in a network environment
abstract: A method includes simulating network resources of a portion of a cloud in a simulated cloud within a enterprise network, the cloud being communicable with the enterprise network over a first communication channel, which may be external to the enterprise network. The method can also include simulating network behavior of the first communication channel in a second communication channel within the enterprise network, and validating application performance in the simulated cloud. Simulating network resources includes providing a cloud resources abstraction layer in the enterprise network, and allocating enterprise network resources in the enterprise network to the simulated cloud by the cloud resources abstraction layer. The method further includes adding a virtual network service appliance to the simulated cloud, and determining a change to a network topology of the enterprise network to accommodate the virtual appliance without materially impacting application performance.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09223634&OS=09223634&RS=09223634
owner: CISCO TECHNOLOGY, INC.
number: 09223634
owner_city: San Jose
owner_country: US
publication_date: 20120502
---
This disclosure relates in general to the field of communications and more particularly to a system and a method for simulating virtual machine migration in a network environment.

A trend towards virtualization in the information technology IT arena is driving the development of many virtualization technologies such as network virtualization. Network virtualization solutions can consolidate multiple physical networks into one virtual network. They can also logically segment a single physical network into multiple logical networks. Partitions can be added to rapidly scale the network for business needs. Network virtualization represents a new IT paradigm challenging existing physical network deployment models. Network virtualization offers many benefits such as expanding availability of single IT assets to multiple users managing multiple IT assets as a single resource and providing dedicated virtual networks for applications all of which can lead to revenue generation expense reduction and customer satisfaction.

An example method includes simulating network resources of a portion of a cloud in a simulated cloud within an enterprise network. The broad term simulating can include imitating reproducing mimicking copying impersonating emulating duplicating or any other type of performance of certain cloud activities in such a context. The cloud can communicate with the enterprise network over a first communication channel which may be external to the enterprise network. The method further includes simulating network behavior of the first communication channel in a second communication channel within the enterprise network and validating application performance in the simulated cloud. The term validating in such a context can include any type of affirmation checking verifying ensuring a certain quality level or threshold has been met confirming ratifying endorsing assessing inspecting examining etc.

In particular embodiments the first communication channel may have a first wide area network WAN latency and a first error rate. The simulating network behavior can include adding a second WAN latency and injecting a second error rate in the second communication channel where the second WAN latency and the second error rate substantially replicate the first WAN latency and the first error rate respectively. In particular embodiments the first communication channel can connect a first cloud gateway within the enterprise network to a second cloud gateway within the cloud and the second communication channel can connect a third cloud gateway within the enterprise network to a fourth cloud gateway within the simulated cloud. The third cloud gateway may be materially similar to the first cloud gateway and the fourth cloud gateway may be materially similar to the second cloud gateway. In specific embodiments the first communication channel is provided e.g. linked provisioned extended coupled etc. over a public network and the second communication channel is provided over a simulated public network within the enterprise network. The simulated public network may be materially similar to the public network.

In some embodiments simulating the network resource can include providing a cloud resources abstraction layer in the enterprise network and by the cloud resources abstraction layer allocating enterprise network resources in the enterprise network to the simulated cloud. The method may further include deploying a virtual machine in the simulated cloud over network connections within the enterprise network. In other embodiments the method may further include adding a virtual network service appliance to the simulated cloud and determining a change to a network topology of the enterprise network to accommodate the virtual network service appliance without materially adversely impacting application performance. In yet other embodiments the method may further include adding a security policy at the simulated cloud and validating the security policy where the validating comprises isolating a security policy inconsistency and isolating a particular network enforcement activity by the simulated cloud.

Turning to is a simplified block diagram illustrating a communication system for simulating virtual machine migration in a network environment in accordance with one example embodiment. illustrates an enterprise network in communication with a cloud over a public network such as Internet via a secure tunnel . As used herein the term public network encompasses networks where devices on the network are visible and accessible to outsiders e.g. other devices users outside the network. Secure tunnel may connect a cloud gateway in enterprise network with a corresponding cloud gateway in cloud .

Network resources of enterprise network may be extended into cloud through a cloud Virtual Ethernet Module cVEM . As used herein the term network resource may encompass network elements links e.g. transmission connections between nodes in a network and data including computing resources e.g. processors and storage resources e.g. storage devices databases . The term network element is meant to encompass computers network appliances servers storage devices computation devices routers switches gateways bridges load balancers firewalls processors modules or any other suitable device component element or object operable to exchange information in a network environment. Moreover the network elements may include any suitable hardware software components modules interfaces or objects that facilitate the operations thereof. This may be inclusive of appropriate algorithms and communication protocols that allow for the effective exchange of data or information.

cVEM may be embedded in or communicable with cloud gateway and may enable switching inter virtual machine traffic at cloud . cVEM may be configured to perform Layer 2 switching and advanced networking functions such as port channels quality of service QoS security e.g. private virtual local area network VLAN port security etc. and monitoring e.g. net flow switch port analyzer SPAN encapsulated remote SPAN etc. . A plurality of virtual machines VMs N may be provisioned in cloud . In some embodiments nested VM containers NVCs P may be provisioned in cloud to host respective VMs N . In various embodiments NVCs N may provide a network overlay for example to facilitate computing storage and networking services for running application workloads and connecting respective VMs N with enterprise network .

According to embodiments of the present disclosure enterprise network and cloud may form a hybrid cloud network environment. Enterprise network may be any private network such as a data center network operated and controlled by a particular entity or organization. Cloud is a collection of hardware and software cloud infrastructure forming a shared pool of configurable network resources e.g. networks servers storage applications services etc. that can be suitably provisioned to provide on demand self service network access resource pooling elasticity and measured service among other features. In various embodiments cloud may be deployed as a private cloud e.g. infrastructure operated by a single enterprise organization community cloud e.g. infrastructure shared by several organizations to support a specific community that has shared concerns public cloud e.g. infrastructure made available to the general public or a suitable combination of two or more disparate types of clouds.

Cloud may be managed by a cloud service provider who can provide enterprise network with access to cloud and authorization to set up secure tunnel in accordance with a predetermined service level agreement SLA . In particular network resources within cloud are not controlled by the particular entity or organization controlling enterprise network rather the network resources are allocated to enterprise network according to the SLA with the cloud service provider. For example enterprise network may be signed up for using a fixed amount of Central Processing Unit CPU processors storage and network services.

In various embodiments a cloud manager in enterprise network may provide a management platform e.g. through a VM . For example cloud manager may facilitate hybrid cloud operations in cloud manage network resources in cloud that are allocated to enterprise network dynamically instantiate cloud gateways and and perform various other management functions through an enterprise virtualization platform and cloud provider application programming interfaces APIs . Cloud manager may also monitor the health of substantially all components in enterprise network and allocated network resources in cloud and provide high availability of those components based on particular needs.

In various embodiments cloud manager may use a Cloud Management Broker CMB to provide an interface to a management entity of cloud . When enterprise customers request migrating workload e.g. VM to cloud CMB may translate high level resource requirements into a set of cloud management application programming interfaces APIs . CMB may submit cloud management APIs to the management entity of cloud for requesting desired network resources. For example CMB could submit a request for a VM to run cloud gateway at cloud through suitably configured cloud management API .

In various embodiments cloud manager may include a simulator that can simulate network resources of a portion of cloud in a simulated cloud within enterprise network . Simulator may interface with CMB to support the management function of a local virtualization platform within enterprise network e.g. VMware vCenter . CMB can fulfill hybrid cloud resource requirements from simulator by allocating network resources from a local resource pool within enterprise network . CMB could provide a cloud resources abstraction layer which helps to simulate resource provisioning of cloud in simulated cloud within enterprise network . For example CMB may submit a local virtualization management API for provisioning network resources within simulated cloud .

In some embodiments simulating network resources can include replicating material characteristics or functionalities of particular network resources of cloud in simulated cloud . In other embodiments simulating network resources can include reproducing substantially identically particular network resources of cloud in simulated cloud . In yet other embodiments simulating network resources can include substantially approximating network behavior of particular network resources of cloud in simulated cloud so that the simulated network resources of simulated cloud are materially similar to the particular network resources of cloud .

It may be noted that simulated cloud is not merely an abstract mathematical construct for example existing as virtual artifacts in a software application. In addition simulated cloud includes actual network elements selected from a local network resource pool of enterprise network to replicate substantially and or materially a planned or available network resource pool of cloud . Simulated cloud may include various simulated network resources. For example simulated cloud may include a virtual cVEM connecting virtual machines N which may be substantially or materially similar to virtual machines N respectively in cloud .

Material similarity may exist even where substantial similarity is absent if functionalities application performance network behavior and other measurable parameters of interest of the simulated network element in simulated cloud matches with the corresponding network element in cloud . For example VM in cloud may be provisioned on a blade server running a Linux operating system whereas VM in enterprise network may be provisioned on a rack server running a Windows operating system. Despite the difference in infrastructure VM and VM may have similar functionalities and operating performance sufficiently materially similar for purposes of the present disclosure. Likewise cVEM may be substantially or materially similar to cVEM in cloud . NVCs N in simulated cloud may be substantially or materially similar to respective NVCs P in cloud . A secure tunnel over a simulated Internet may connect a cloud gateway with another cloud gateway within simulated cloud . Cloud gateway may be substantially or materially similar to cloud gateway likewise cloud gateway may be substantially or materially similar to cloud gateway in cloud .

In various embodiments network behavior of secure tunnel may be simulated in secure tunnel within enterprise network . As used herein network behavior can include but is not limited to network conditions such as packet loss latency and available bandwidth network performance network traffic network activity protocols used and other such behavior or characteristics of the network connection. In some embodiments simulating network behavior includes replicating network latency error rates and other network characteristics. In yet other embodiments simulating network behavior can include substantially approximating network latency error rates and other network characteristics so that secure tunnel behaves in a materially similar manner to secure tunnel . Likewise simulated Internet may simulate network behavior of Internet within enterprise network . In various embodiments using simulated cloud and secure tunnel data transfer from within enterprise network to network resources e.g. VM P of simulated cloud may be validated. Data as used herein in this specification refers to any type of numeric text voice video or script information or any type of source or object code or any other suitable information in any appropriate format that may be communicated from one point to another in electronic devices and or networks. Data may include applications files folders and hyperlinks among other examples.

For purposes of illustrating the techniques of communication system it is important to understand the communications in a given system such as the system shown in . The following foundational information may be viewed as a basis from which the present disclosure may be properly explained. Such information is offered earnestly for purposes of explanation only and accordingly should not be construed in any way to limit the broad scope of the present disclosure and its potential applications.

Until recently data center networks were designed under the assumption that each end node was connected to an access port of a switch in the network and the end node corresponded to one server running a single instance of an operating system OS and a single instance of a given application. Another assumption was that the application and its associated OS would be persistently bound to that specific physical server and would rarely if ever move onto another physical server. In recent years introduction of server virtualization has invalidated these assumptions and posed some new challenges for data center network designs.

Server virtualization modifies both of the previously mentioned assumptions of data center network design by allowing multiple operating systems to transparently share the same physical server and input output I O devices. Local switching is used between different VMs within the same server invalidating the assumption that each network access port corresponds to a single physical server running a single instance of an OS. Moreover by abstracting hardware from software virtualization effectively enables VMs to become mobile which means that a VM can be moved from one physical server to another within the data center or even across multiple data centers or networks including from within an enterprise network to a cloud extension e.g. as part of cloud .

The consequences of such level of mobility on the network are not trivial. Mobility of VMs can pose stringent requirements on the underlying network infrastructure. For example it could require that both the source and destination hosts be part of the same set of Layer 2 domains e.g. VLANs . Features such as port security IEEE 802.1x and Internet Protocol IP source guard that maintain state information based on the physical port may not be deployed in virtualized networks as the VM may move at any instant. Further as VMs move from one physical server to another it may be desirable that all the network policies defined in the network for the VM for example ACLs be consistently applied without regard to the location of the VM in the network.

VEMs which include virtual interfaces that maintain network configuration attributes security and statistics across mobility events may be dynamically provisioned within virtualized networks based on network policies stored in the DVS as a result of VM provisioning operations by a hypervisor management layer e.g. vCenter . VEMs could be the virtual equivalent of physical network access ports. VEMs may follow virtual network interface cards vNICs when VMs move from one physical server to another. The movement can be performed while maintaining port configuration and state including NetFlow port statistics and any Switched Port Analyzer SPAN session. By virtualizing the network access port with VEMs transparent mobility of VMs across different physical servers and different physical access layer switches within an enterprise network may be possible. However when VMs are moved away from the enterprise network into a cloud extension operated by an entity different from the entity that operates the enterprise network certain issues could arise.

Enterprises may subscribe to IT capacity and applications in a cloud to extend the enterprise network based on demand and workload. In the cloud software applications can be delivered transparently to the user e.g. the user is effectively unaware of where the processing takes place . Additionally virtual environments and compute capacity can be delivered as a service when business units require them without the added cost of purchasing new hardware. Moreover excess capacity can be easily returned to the pool of network resources once it is no longer needed. For example enterprises may use hybrid cloud to extend their network resources.

Hybrid cloud is a cloud infrastructure composed of two or more clouds that interoperate or federate through technology. Hybrid cloud is an interaction between private and public clouds where private cloud joins public cloud and utilizes public cloud resources in a secure and scalable way. Hybrid cloud model provides the following key advantages over others cloud models enterprises can protect their existing investment enterprises can maintain control over their sensitive data and applications enterprises can maintain full control over their network resources enterprises can scale their environment on demand. However some of the challenges in moving to a hybrid cloud environment involve network latency network topology and security policy.

Moving applications to a cloud base deployment could require quantifying the implications of adding additional network hops from the corporate datacenters to cloud providers. Many enterprise applications are not designed with considerations of wide area network WAN link latency. Moreover L2 network extension may need some adjustment of the L2 extension network topology for example by adding a router at the cloud for routing traffic efficiently in cloud networks. Other topological changes may also be necessary however predicting the topological changes apriori may be difficult if not impossible. Further security risks may be involved in running application workloads in the cloud.

Deploying a hybrid cloud and migrating applications to the public part of the cloud are not trivial tasks. Corporate IT administrators should understand their application systems well to select an appropriate set of VMs for migration to the public cloud. In a multi tiered application architecture there are many factors involved to enable a distributed application in the cloud environment. Currently many enterprises resort to a trial by error approach to solve this problem. However trial by error approach may not work well in a hybrid cloud environment because of the long lead time involved in deploying network resources at the cloud. For example the average time to move a VM image 10 Gigabytes in size could be more than 2 hours. Corporate IT administrators cannot afford the lengthy migration process and then realize that the migrated application VMs is not the right choice and some other network topology changes may be in order for the migrated VM to work properly as desired.

Most of hybrid cloud solutions available in the market currently have no staging and or simulation facility to help corporate IT administrators validate their cloud migration plan. For example when deploying an application for the first time within an enterprise network IT administrators generally have the luxury of being able to test and tweak without the burden of production traffic. In contrast when an application is migrated to the cloud IT administrators may have to test the application at the same time that users place product load on the application and other network resources.

A typical VM migration validation process in currently available hybrid cloud environments includes at least four operation phases 1 configuration phase 2 staging phase 3 execution phase and 4 validation phase. In the configuration phase the cloud manager e.g. 30 takes inputs from IT administrators for constructing a VM migration request e.g. through suitably configured APIs to the management entity at the cloud . In the staging phase the cloud manager may prepare the infrastructure for the VM migration request. For example the cloud manager may instantiate appropriate cloud gateways VM images data transformation and network configuration. In the execution phase the cloud manager may transfer the VM images and data to cloud and launch the VM images and data using network resources. In the validation phase IT administrators may work with or alongside application users to validate the functionality of the applications post VM migration.

Based on their best knowledge IT administrators and application users may plan and execute a VM migration plan. The execution process may involve a repetitive preparation migration validation cycle. For example certain network topology changes may be required to improve performance or to get an application working as desired at the cloud. The network topology change may result in a re deployment of the application in the cloud and re execution and re validation. While the cycling validation loop may be necessary to cope with the complexity of application VM migration process the long VM image data transferring time in the loop may be simply not practical. Ideally this long delay e.g. in VM image migration should be avoided whenever possible or at least reduced to the minimum for the VM migration process.

Communication system is configured to address these issues and others in offering a system and a method for simulating virtual machine migration in a network environment. Embodiments of communication system can allow users to simulate a VM migration within enterprise network before deploying the VM e.g. VM in cloud . The simulation can effectively help users to prepare their cloud migration plan. Embodiments of communication system may add a simulation phase in the VM migration process.

In various embodiments a temporary simulated cloud environment e.g. simulated cloud may be built in enterprise network to simulate the VM migration process. The simulation phase can allow application functionality to be validated debugged and adjusted without the long delay of VM image transferring. The simulation can be configured so that WAN latency and errors may be eliminated in VM image data transfer and applied in application data transfers to simulate the actual network data path of the applications deployed at cloud. In some embodiments as a part of the cloud simulation the cloud network overlay infrastructure e.g. cloud gateway and NVCs M can also be deployed in simulated cloud for example to allow certain infrastructure functionality e.g. secure tunneling routing etc. and network services e.g. virtual firewall WAN optimization to be verified and tested in the simulation phase.

Embodiments of communication system may provide for simulating in simulated cloud network resources e.g. cVEM VMs N NVC M of a portion of cloud within enterprise network simulate network behavior of secure tunnel in secure tunnel within enterprise network and validate application performance in simulated cloud . As used herein the term validate can include any testing measuring or analyzing activities including determining throughput frame loss and forwarding rates with various traffic configurations determining application and network behavior under error or abnormal frame conditions measuring effectiveness of quality of service QoS policies on traffic management testing impact of bandwidth limitations measuring response times and such other activities. The term application performance includes application functionality network performance of application data over the network connections application availability speed of application computation and data transfer and other such application behavior and characteristics.

Embodiments of communication system can offer several advantages. For example VM migration plans can be tested verified prior to actual deployment in cloud . Thus cost savings both in terms of time and money may be achieved in the planning and feasibility studying of a VM migration project. Another example advantage may be to identify a set of application VMs that may be suitable candidates for migration to cloud . Because the simulation process could be repetitive in nature simulating within a local resource facility such as enterprise network could ease the identification and migration process. Yet another example advantage may be validation of security policy for application VMs before deploying the VMs into cloud . Still another advantage may include facilitating quality assessment and development teams in problem isolation regression testing and performance tuning processes within a local computing resources center such as enterprise network . Embodiments of communication system may also be made an extension to Virtual Station Interface Discovery Protocol VDP e.g. according to IEEE 802.1 Qbg standards of server virtualization systems.

Turning to the infrastructure of communication system the network topology can include any number of servers VMs routers gateways and other nodes inter connected to form a large and complex network. A node may be any electronic device client server peer service application or other object capable of sending receiving or forwarding information over communications channels in a network. Elements of may be coupled to one another through one or more interfaces employing any suitable connection wired or wireless which provides a viable pathway for electronic communications. Additionally any one or more of these elements may be combined or removed from the architecture based on particular configuration needs. Communication system may include a configuration capable of TCP IP communications for the electronic transmission or reception of data packets in a network. Communication system may also operate in conjunction with a User Datagram Protocol Internet Protocol UDP IP or any other suitable protocol where appropriate and based on particular needs. In addition gateways routers switches and any other suitable nodes physical or virtual may be used to facilitate electronic communication between various nodes in the network.

Note that the numerical and letter designations assigned to the elements of do not connote any type of hierarchy the designations are arbitrary and have been used for purposes of teaching only. Such designations should not be construed in any way to limit their capabilities functionalities or applications in the potential environments that may benefit from the features of communication system . It should be understood that the communication system shown in is simplified for ease of illustration. For example enterprise network and cloud may comprise access switches aggregation switches core switches to aggregate and distribute ingress upstream traffic and egress downstream traffic traffic etc. A plurality of switches virtual and or physical may be provided at each access aggregation and core level to achieve redundancy within enterprise network . Further enterprise network and cloud may include elements particular to the type of network services provided for example in data centers that provide mass storage enterprise network and cloud may include Storage Area Networks SANs .

The example network environment may be configured over a physical infrastructure that may include one or more networks and further may be configured in any form including but not limited to local area networks LANs wireless local area networks WLANs VLANs metropolitan area networks MANs wide area networks WANs VPNs Intranet Extranet any other appropriate architecture or system or any combination thereof that facilitates communications in a network. In some embodiments a communication link may represent any electronic link supporting a LAN environment such as for example cable Ethernet wireless technologies e.g. IEEE 802.11x ATM fiber optics etc. or any suitable combination thereof. In other embodiments communication links may represent a remote connection through any appropriate medium e.g. digital subscriber lines DSL telephone lines T lines T lines wireless satellite fiber optics cable Ethernet etc. or any combination thereof and or through any additional networks such as a wide area networks e.g. the Internet .

In various embodiments cloud gateway may be a VM running in enterprise network . Cloud gateway may be responsible for establishing secure tunnel for interconnecting components within enterprise network with cloud gateway . Cloud gateway may be another VM running in cloud . Cloud gateway may also be responsible for establishing secure tunnel to connect cloud gateway at enterprise with allocated network resources in cloud . Cloud gateway and cVEM may together form a L2 switch. Each of cloud gateways and may be implemented on servers switches or other network elements.

In various embodiments secure tunnel may be an L4 Secure Tunnel to connect network resources allocated at cloud with enterprise network . Secure tunnel may be configured to cope with corporate firewall and network address translation NAT for example from the nature of the transport level protocols e.g. UDP TCP and the transport layer ports opened for hypertext transfer protocol HTTP hypertext transfer protocol secure HTTPS in the firewall. VMs P may be hosted on physical servers not shown in cloud . VMs P in cloud may be managed by a distributed virtual switch comprising various virtual network interface cards associated with each VM. VMs P may be hosted on the corresponding servers with a corresponding hypervisor which manages the hardware allocation between the various VMs hosted on a single server.

cVEM can be a software component embedded in a hypervisor or similar software infrastructure of a network element. cVEM can effectively replace a virtual switch by performing several network functions including advanced networking and security switching between directly attached VMs e.g. VMs P and uplinking to the rest of the network e.g. enterprise network . Traffic may be switched locally at the cVEM interface for example cVEM may switch traffic among VMs P . In various embodiments NVCs P may be virtual appliances deployed in cloud as VMs. For example NVCs P may run as virtual machines on corresponding hypervisors. In another example embodiment NVCs P may be deployed as corresponding hypervisors on operating systems. NVCs P may provide hosting environments for respective VMs P . NVCs P may also serve as protective barriers to respective VMs P monitoring interactions between respective VMs P and other network elements for example restricting the interactions to those that are deemed safe.

In various embodiments network resources e.g. cloud gateway cVEM VMs P NVCs P and other network elements in cloud may be substantially simulated within simulated cloud in enterprise network . Suitable servers routers switches and other network elements within enterprise network may be provisioned to provide the simulated network resources. As a result the infrastructure pertaining to simulated cloud may be substantially or materially similar to at least a portion of the infrastructure provided in cloud according to the respective SLA between cloud and enterprise network .

Cloud manager is an application e.g. computer program running in enterprise network for example as a virtual machine. Cloud manager may include a suitable graphical user interface GUI that can permit a user e.g. customer network administrator etc. to configure and request network resources in cloud . In an example embodiment GUI of cloud manager may include an option e.g. menu option clickable box a selection from a list etc. for simulator which is another application that may be integrated with cloud manager . When integrated with cloud manger simulator may be a set of object modules executable modules and other appropriate software components. In another embodiment simulator may be implemented as stand alone software accessible through the GUI of cloud manager . When implemented as stand alone software simulator may include executable files libraries and other software components. In yet another embodiment simulator may be accessed separately from cloud manager for example through an independent GUI or a command line interface CLI . Simulator may be implemented within enterprise network in any suitable manner based on particular needs.

Simulator may interface with CMB to provision network resources in simulated cloud . CMB may be part of cloud manager for example implemented as an object or executable module within cloud manager . Simulated Internet may be a suitable network simulator for example that simulates traffic flow network connectivity network events bandwidth and other network parameters of Internet . Commercial and off the shelf software may be used to implement simulated Internet using network elements within enterprise network .

Turning to is a simplified block diagram illustrating example details of an embodiment of communication system . Simulator may be a component of cloud manager . In various embodiments simulator may use network resources provided by enterprise network to simulate network resources in cloud . For example in an example configuration including an enterprise datacenter and Amazon cloud simulator uses computing resources provided by the enterprise datacenter to simulate the cloud resources provided by the Amazon cloud services. Once the VM migration process is validated the application and business workload can move to Amazon cloud datacenter eventually.

Simulator in enterprise network may include a processor and a memory element . In various embodiments processor and memory element may be part of the infrastructure of enterprise network . In some embodiments processor and memory element may be dedicated for use exclusively by simulator . In other embodiments processor and memory element may be one or more processors and memory elements respectively that are shared between various other components within enterprise network . In yet other embodiments processor may represent a virtual central processing unit vCPU and memory element may represent virtual memory allocated to simulator according to resource allocation specifications within enterprise network .

In various embodiments simulator may comprise a user interface which may be a suitable GUI or CLI as appropriate. In addition simulator may comprise various modules including a services module a network behavior module a network topology module a security policy module and an applications module . Simulator may interface with CMB which in turn can provision network resources in simulated cloud and manage network behavior in secure tunnel within enterprise network . CMB may appropriately use local virtualization management API to provision network resources and manage network behavior .

During operation a user may request a simulation of network resources in cloud using simulator . For example prior to deploying a network service e.g. wide area application services WAAS in cloud the user may simulate the effect of the deployment using simulator . In one example embodiment user interface may provide a drop down menu informed by the appropriate SLA regarding available network resources that may be provisioned in cloud . In one embodiment services module may provide a list of available services to user interface and user may select one of the listed services. Network behavior module may present network behavior that may be suitably simulated in application data transfer and other network communication with simulated cloud . In one example user may manually input test network conditions in another example user may input a desired application performance through user interface .

Simulator may interface with CMB to provision network resources in simulated cloud through suitable local virtualization management API . For example the appropriate service e.g. WAAS requested by user may be provisioned in simulated cloud . Network behavior module or CMB in some embodiments may monitor network behavior of secure tunnel within enterprise network . In another example embodiment network behavior module may inject WAN latency and error rate into secure tunnel . In a simulation mode e.g. when user selects to activate simulator user may configure a set of WAN latency and error rate parameters for conducting the simulation. The WAN latency and error rate can be applied to an outbound data path of cloud gateway and cloud gateway for example to simulate inter datacenter secure tunnels e.g. that may be connected across Internet . Simulator may simulate services deployment data transfer resulting from the services deployment and other activities from the service deployment in simulated cloud . Simulator may present the results of the simulation to user via user interface .

A VM migration in the simulation mode can validate if the VM migration has any impact to application functionality relevant to the migrated VMs e.g. VM N . If there is any undesired impact suitable adjustments may be applied to the original migration plan and another validation cycle via simulation may be performed. The simulation may also facilitate measuring the performance of the application in the hybrid cloud environment for example so that application user expectation can be managed appropriately.

In another embodiment the results from the simulation may indicate a change to network topology either at cloud or at enterprise network to achieve the desired application performance. For example due to application performance and or security requirements additional network service appliances e.g. virtual firewall WAN optimization load balancer etc. may be inserted onto the hybrid cloud network. Consequently some adjustments e.g. routing service insertion WAN optimization service insertion security service insertion load balancer service insertion may be made to the original enterprise network topology. The hybrid cloud simulation mode can facilitate validating network service insertion and or other adjustments to the hybrid cloud networks. With simulator any undesired application performance impacts and network behavior resulting from the network topology changes can be further isolated and resolved even before the application workload is actually deployed in cloud . In one example embodiment network topology module may suggest changes to network topology for example to obtain a desired application performance. In another example embodiment user may select from alternatives or create new topology elements with network topology module via suitable user interface .

In another embodiment enterprise network may include a virtual security gateway VSG that can enforce security policies on network traffic flowing between VMs in enterprise network and cloud or simulated cloud . With the VSG deployed at enterprise network there may be a foreseeable latency in policy evaluation due to the network path traveling through Internet . The latency can impact security enforcement mechanisms e.g. flow cache in cVEM and cause many potential problems. One possible solution to the problem may be to deploy VSG in cloud as well. Simulator may be used to evaluate the effect of VSG deployment in cloud . For example security policy module may help to validate new cloud security policy with VSG deployed in simulated cloud . With simulator any security policy inconsistency and undesirable network enforcing behaviors resulting by security policy changes can be further isolated and resolved even before the security policy is deployed into cloud .

Turning to is a simplified flow diagram illustrating a simulation and deployment process according to an embodiment of communication system . Process includes a configuration phase followed by a staging phase . At configuration phase cloud manager may take inputs from administrators e.g. user for constructing a VM migration request. At staging phase cloud manager may prepare the network infrastructure for the VM migration request. For example cloud manager may instantiate cloud gateways e.g. and VM images e.g. N N transform appropriate data for the VM migration and configure enterprise network suitably. At simulation phase simulator may be activated and simulated cloud instantiated within enterprise network . At validation phase administrators may work with application users or various options in simulator to validate functionalities of the applications post VM migration. For example the deployment may be tested with simulated or production data. At execution phase cloud manager may transfer VM images and data to cloud and launch the VM images and data using network resources in cloud .

According to embodiments of communication system two repetitive preparation migration validation loops and may be implemented. Loop may involve migration phases and simulation whereas loop may replace simulation phase with the actual VM migration in execution phase . A difference between the processing models of loops and is the avoiding of long delay in transferring VM image data across Internet . For example in loop VM images may be deployed in simulated cloud without actually transferring them over secure tunnel . Consequently WAN latency errors etc. may not be relevant at the VM image deployment simulation. However the WAN latency and errors may be applied at simulation phase . Network administrators may try out the planned VM through one or more validation debugging and adjustment cycles. Once bugs and or inappropriate configuration issues are ironed out the network administrators can proceed with the actual deployment in cloud directly from simulation phase e.g. without repeating configuration phase and staging phase . During implementation of loop minor issues may be encountered and they can be resolved appropriately for example through validation phase . Validation phase may be repeated by testing with production data. If a simulation is required loop may be appropriately repeated as desired.

Turning to is a simplified block diagram illustrating an example simulation of Internet . A VEM in enterprise network may be part of DVS . Cloud manager may manage allocation of network resources via VEM . VEM may connect various VMs to simulated cloud via cloud gateway over simulated Internet . Simulator can inject WAN latency and errors into secure tunnel between cloud gateway and cloud gateway in simulated cloud to determine any adverse effects on performance of business applications running in VMs N .

In various embodiments simulator may interface with off the shelf simulator emulator tools that can perform the WAN latency and error injection. In other embodiments simulator may execute its own internal instructions to perform WAN latency and error injection. Any suitable method may be used to implement WAN latency and error injection in secure tunnel . Simulator may measure network performance e.g. dropped packets QoS congestion etc. and application behavior e.g. computation speed functionality etc. and report the results on user interface . In various embodiments the results may be stored into a log report database files etc. for future reporting and other needs. By simulating both cloud in simulated cloud and secure tunnel in secure tunnel embodiments of communication system can achieve accuracy in monitoring application performance for various network behavior.

Turning to is a simplified block diagram illustrating a network service insertion according to an example embodiment of communication system . Enterprise network may include various virtual local area networks VLANS representatively shown here as . Enterprise network may also include various distributed applications. For example a distributed application may comprise a web application on VLAN e.g. web layer VLAN VLAN Orange an application on VLAN e.g. applications layer VLAN VLAN Blue and a database application on VLAN e.g. database layer VLAN VLAN Green . Enterprise network may also include other applications such as service appliances including a virtual Wide Area Application Services vWAAS . Each application may be hosted on a separate virtual machine e.g. VM within enterprise network .

According to embodiments of communication system the VLAN architecture of enterprise network may be extended into simulated cloud . For example simulated cloud may include VLANs . VLAN may be an extension of VLAN VLAN may be an extension of VLAN and VLAN may be an extension of VLAN . Although three VLANs are illustrated in the FIGURE any number of VLANs may be provisioned in enterprise network and or simulated cloud within the broad scope of the present disclosure. Parts of the distributed application in enterprise network may be extended into simulated cloud . For example web application may be migrated to simulated cloud as a web application . Network service appliances may also be migrated or inserted as needed into simulated cloud . For example vWAAS may be moved replicated or extended into simulated cloud as a vWAAS .

Turning to is a simplified block diagram illustrating a network security insertion according to an example embodiment of communication system . Enterprise network may include a VSG . Using security policy module simulator may effect a migration or insertion of additional security appliances such as VSG in simulated cloud . VSG in simulated cloud may be activated to simulate security policy enforcements at VMs N in simulated cloud . Results from the simulation may be used for various purposes for example to ensure that security policies are enforced appropriately and inefficiencies are eliminated.

Turning to is a simplified flow diagram illustrating example activities that may be associated with embodiments of communication system . Operations may include where simulator may instruct CMB to simulate network resources of cloud in simulated cloud within enterprise network . CMB may provision appropriate network resources using local virtualization management API . At VMs N may be deployed over network connections within enterprise network . Deployment of VMs N may not involve significant time delay in many embodiments as local network connections such as Ethernet can be used for the deployments. In addition a real deployment of VMs N in cloud can involve significant time delay e.g. a 10 GB Windows Server 2008 SP2 VMDK image takes approximately 2 hours to import when it is transferred over a 10 Mbps network connection .

At simulator may simulate in a second communication channel e.g. secure tunnel within enterprise network network behavior of the first communication channel e.g. secure tunnel between enterprise network and cloud . At simulator may validate application performance in simulated cloud . At simulator may change network topology network resources and or network behavior in simulated cloud and enterprise network until desired application performance is attained. In some embodiments simulator may allow user to modify network topology network resources and or network behavior over user interface . In other embodiments simulator may be configured to automatically and iteratively change network topology network resources and or network behavior until the desired application performance is attained.

At simulator may add a network service appliance e.g. vWAAS to simulated cloud . In some embodiments simulator may allow user to provide instructions on which network service appliance to add and where e.g. add vWAAS in VLAN . In other embodiments simulator may determine the service appliance to add and the appropriate location to add the service appliance based on various network policies application performance network behavior and other factors. At simulator may determine a change to network topology of enterprise network or simulated cloud to accommodate virtual network service appliance without materially adversely impacting application performance. In some embodiments the change determination may be pursuant to predetermined logic in simulator . In other embodiments the change determination may be ad hoc or based on heuristics. In yet other embodiments the change determination may be user provided.

At simulator may add service policy at simulated cloud . For example the service policy may specify actions to be performed on detecting certain traffic enforcement mechanisms to be activated at specific VMs in simulated cloud etc. Simulator may test the service policy effectiveness and associated application performance in various simulations. The activities performed by simulator may be prompted by user instructions on user interface or according to pre determined logic heuristics and other suitable methods. At simulator may validate the security policy. Validating may include isolating a security policy inconsistency and isolating a particular undesirable network enforcement activity by simulated cloud . For example simulator may test application performance and determine that the security policy does not adversely impact network speed over secure tunnel . In another example simulator may test if desired enforcement actions are being triggered according to the policy. If changes may be needed simulator may suitably effect such changes based on particular needs.

At network resources may be deployed in cloud over the first communication channel e.g. secure tunnel for example after simulations indicate an optimal network topology and network resources for the predicted network behavior over the first communication channel e.g. secure tunnel . At application performance in cloud may be validated for example with production data. If further changes are in order steps may be repeated until the desired application performance is attained.

Note that in this Specification references to various features e.g. elements structures modules components steps operations characteristics etc. included in one embodiment example embodiment an embodiment another embodiment some embodiments various embodiments other embodiments alternative embodiment and the like are intended to mean that any such features are included in one or more embodiments of the present disclosure but may or may not necessarily be combined in the same embodiments. Note also that an application as used herein this Specification can be inclusive of an executable file comprising instructions that can be understood and processed on a computer and may further include library modules loaded during execution object files system files hardware logic software logic or any other executable modules.

In example implementations at least some portions of the activities outlined herein may be implemented in software in for example simulator and cloud manager . In some embodiments one or more of these features may be implemented in hardware provided external to these elements or consolidated in any appropriate manner to achieve the intended functionality. The various network elements e.g. cloud manager simulated cloud secure tunnel may include software or reciprocating software that can coordinate in order to achieve the operations as outlined herein. In still other embodiments these elements may include any suitable algorithms hardware software components modules interfaces or objects that facilitate the operations thereof.

Furthermore cloud manager simulated cloud secure tunnel described and shown herein and or their associated structures may also include suitable interfaces for receiving transmitting and or otherwise communicating data or information in a network environment. Additionally some of the processors and memory elements associated with the various nodes may be removed or otherwise consolidated such that a single processor and a single memory element are responsible for certain activities. In a general sense the arrangements depicted in the FIGURES may be more logical in their representations whereas a physical architecture may include various permutations combinations and or hybrids of these elements. It is imperative to note that countless possible design configurations can be used to achieve the operational objectives outlined here. Accordingly the associated infrastructure has a myriad of substitute arrangements design choices device possibilities hardware configurations software implementations equipment options etc.

In some of example embodiments one or more memory elements e.g. memory element can store data used for the operations described herein. This includes the memory element being able to store instructions e.g. software logic code etc. in non transitory media such that the instructions are executed to carry out the activities described in this Specification. A processor can execute any type of instructions associated with the data to achieve the operations detailed herein in this Specification. In one example processors e.g. could transform an element or an article e.g. data from one state or thing to another state or thing. In another example the activities outlined herein may be implemented with fixed logic or programmable logic e.g. software computer instructions executed by a processor and the elements identified herein could be some type of a programmable processor programmable digital logic e.g. a field programmable gate array FPGA an erasable programmable read only memory EPROM an electrically erasable programmable read only memory EEPROM an ASIC that includes digital logic software code electronic instructions flash memory optical disks CD ROMs DVD ROMs magnetic or optical cards other types of machine readable mediums suitable for storing electronic instructions or any suitable combination thereof.

In operation components in communication system can include one or more memory elements e.g. memory element for storing information to be used in achieving operations as outlined herein. These devices may further keep information in any suitable type of non transitory storage medium e.g. random access memory RAM read only memory ROM field programmable gate array FPGA erasable programmable read only memory EPROM electrically erasable programmable ROM EEPROM etc. software hardware or in any other suitable component device element or object where appropriate and based on particular needs. The information being tracked sent received or stored in communication system could be provided in any database register table cache queue control list or storage structure based on particular needs and implementations all of which could be referenced in any suitable timeframe. Any of the memory items discussed herein should be construed as being encompassed within the broad term memory element. Similarly any of the potential processing elements modules and machines described in this Specification should be construed as being encompassed within the broad term processor. 

It is also important to note that the operations and steps described with reference to the preceding FIGURES illustrate only some of the possible scenarios that may be executed by or within the system. Some of these operations may be deleted or removed where appropriate or these steps may be modified or changed considerably without departing from the scope of the discussed concepts. In addition the timing of these operations may be altered considerably and still achieve the results taught in this disclosure. The preceding operational flows have been offered for purposes of example and discussion. Substantial flexibility is provided by the system in that any suitable arrangements chronologies configurations and timing mechanisms may be provided without departing from the teachings of the discussed concepts.

Although the present disclosure has been described in detail with reference to particular arrangements and configurations these example configurations and arrangements may be changed significantly without departing from the scope of the present disclosure. For example although the present disclosure has been described with reference to particular communication exchanges involving certain network access and protocols communication system may be applicable to other exchanges or routing protocols. Moreover although communication system has been illustrated with reference to particular elements and operations that facilitate the communication process these elements and operations may be replaced by any suitable architecture or process that achieves the intended functionality of communication system .

Numerous other changes substitutions variations alterations and modifications may be ascertained to one skilled in the art and it is intended that the present disclosure encompass all such changes substitutions variations alterations and modifications as falling within the scope of the appended claims. In order to assist the United States Patent and Trademark Office USPTO and additionally any readers of any patent issued on this application in interpreting the claims appended hereto Applicant wishes to note that the Applicant a does not intend any of the appended claims to invoke paragraph six 6 of 35 U.S.C. section 112 as it exists on the date of the filing hereof unless the words means for or step for are specifically used in the particular claims and b does not intend by any statement in the specification to limit this disclosure in any way that is not otherwise reflected in the appended claims.

