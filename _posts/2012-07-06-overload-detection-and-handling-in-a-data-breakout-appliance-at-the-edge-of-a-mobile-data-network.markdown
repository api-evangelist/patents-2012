---

title: Overload detection and handling in a data breakout appliance at the edge of a mobile data network
abstract: Mobile network services are performed in an appliance in a mobile data network in a way that is transparent to most of the existing equipment in the mobile data network. The mobile data network includes a radio access network and a core network. The appliance in the radio access network breaks out data coming from a basestation, and performs one or more mobile network services at the edge of the mobile data network based on the broken out data. The appliance has defined interfaces and defined commands on each interface that allow performing all needed functions on the appliance without revealing details regarding the hardware and software used to implement the appliance. The appliance includes overload detection and handling within the appliance. This appliance architecture allows performing new mobile network services at the edge of a mobile data network within the infrastructure of an existing mobile data network.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08873382&OS=08873382&RS=08873382
owner: International Business Machines Corporation
number: 08873382
owner_city: Armonk
owner_country: US
publication_date: 20120706
---
This disclosure generally relates to mobile data systems and more specifically relates to breakout out of data by an appliance at the edge of a mobile data network in a way that is transparent to existing equipment in the mobile data network so one or more mobile network services may be performed at the edge of the mobile data network in response to the broken out data.

Mobile phones have evolved into smart phones that allow a user not only to make a call but also to access data such as e mails the internet etc. Mobile phone networks have evolved as well to provide the data services that new mobile devices require. For example 3G networks cover most of the United States and allow users high speed wireless data access on their mobile devices. In addition phones are not the only devices that can access mobile data networks. Many mobile phone companies provide equipment and services that allow a subscriber to plug a mobile access card into a Universal Serial Bus USB port on a laptop computer and provide wireless internet to the laptop computer through the mobile data network. In addition some newer mobile phones allow the mobile phone to function as a wireless hotspot which supports connecting several laptop computers or other wireless devices to the mobile phone which in turn provides data services via the mobile data network. As time marches on the amount of data served on mobile data networks will continue to rise exponentially.

Mobile data networks include very expensive hardware and software so upgrading the capability of existing networks is not an easy thing to do. It is not economically feasible for a mobile network provider to simply replace all older equipment with new equipment due to the expense of replacing the equipment. For example the next generation wireless network in the United States is the 4G network. Many mobile data network providers are still struggling to get their entire system upgraded to provide 3G data services. Immediately upgrading to 4G equipment is not an economically viable option for most mobile data network providers. In many locations portions of the mobile data network are connected together by point to point microwave links. These microwave links have limited bandwidth. To significantly boost the throughput of this links requires the microwave links to be replaced with fiber optic cable but this option is very costly.

Mobile network services are performed in an appliance in a mobile data network in a way that is transparent to most of the existing equipment in the mobile data network. The mobile data network includes a radio access network and a core network. The appliance in the radio access network breaks out data coming from a basestation and performs one or more mobile network services at the edge of the mobile data network based on the broken out data. The appliance has defined interfaces and defined commands on each interface that allow performing all needed functions on the appliance without revealing details regarding the hardware and software used to implement the appliance. The appliance includes overload detection and handling within the appliance. This appliance architecture allows performing new mobile network services at the edge of a mobile data network within the infrastructure of an existing mobile data network.

The foregoing and other features and advantages will be apparent from the following more particular description as illustrated in the accompanying drawings.

The claims and disclosure herein provide mechanisms and methods for monitoring and handling overload conditions in an appliance that performs mobile network services at the edge of a mobile data network within the existing infrastructure of the mobile data network.

Referring to a prior art mobile data network is shown. Mobile data network is representative of known 3G networks. The mobile data network preferably includes a radio access network RAN a core network and an external network as shown in . The radio access network includes the tower basestation with its corresponding NodeB and a radio interface on a radio network controller RNC . The core network includes a network interface on the radio network controller the serving node gateway node and operator service network as part of the mobile data network . The external network includes any suitable network. One suitable example for an external network is the internet as shown in the specific example in .

In mobile data network user equipment communicates via radio waves to a tower . User equipment may include any device capable of connecting to a mobile data network including a mobile phone a tablet computer a mobile access card coupled to a laptop computer etc. The tower communicates via network connection to a basestation . Each basestation includes a NodeB which communicates with the tower and the radio network controller . Note there is a fan out that is not represented in . Typically there are tens of thousands of towers . Each tower typically has a corresponding base station with a NodeB that communicates with the tower. However network communications with the tens of thousands of base stations are performed by hundreds of radio network controllers . Thus each radio network controller can service many NodeBs in basestations . There may also be other items in the network between the basestation and the radio network controller that are not shown in such as concentrators points of concentration or RAN aggregators that support communications with many basestations.

The radio network controller communicates with the serving node . In a typical 3G network the serving node is an SGSN which is short for Service GPRS Support Node where GPRS stands for general packet radio service. The serving node mediates access to network resources on behalf of mobile subscribers and implements the packet scheduling policy between different classes of quality of service. It is also responsible for establishing the Packet Data Protocol PDP context with the gateway node for a given subscriber session. The serving node is responsible for the delivery of data packets from and to the basestations within its geographical service area. The tasks of the serving node include packet routing and transfer mobility management attach detach and location management logical link management and authentication and charging functions. The serving node stores location information and user profiles of all subscribers registered with the serving node . Functions the serving node typically performs include GPRS tunneling protocol GTP tunneling of packets performing mobility management as user equipment moves from one basestation to the next and billing user data.

In a typical 3G network the gateway node is a GGSN which is short for gateway GPRS support node. The gateway node is responsible for the interworking between the core network and external networks. From the viewpoint of the external networks gateway node is a router to a sub network because the gateway node hides the core network infrastructure from the external network. When the gateway node receives data from an external network such as internet addressed to a specific subscriber it forwards the data to the serving node serving the subscriber. For inactive subscribers paging is initiated. The gateway node also handles routing packets originated from the user equipment to the appropriate external network. As anchor point the gateway node supports the mobility of the user equipment . In essence the gateway node maintains routing necessary to tunnel the network packets to the serving node that services a particular user equipment .

The gateway node converts the packets coming from the serving node into the appropriate packet data protocol PDP format e.g. IP or X.25 and sends them out on the corresponding external network. In the other direction PDP addresses of incoming data packets from the external network are converted to the address of the subscriber s user equipment . The readdressed packets are sent to the responsible serving node . For this purpose the gateway node stores the current serving node address of the subscriber and his or her profile. The gateway node is responsible for IP address assignment and is the default router for the subscriber s user equipment . The gateway node also performs authentication charging and subscriber policy functions. One example of a subscriber policy function is fair use bandwidth limiting and blocking of particular traffic types such as peer to peer traffic. Another example of a subscriber policy function is degradation to a 2G service level for a prepaid subscriber when the prepaid balance is zero.

A next hop router located in the operator service network OSN receives messages from the gateway node and routes the traffic either to the operator service network or via an internet service provider ISP towards the internet . The operator service network typically includes business logic that determines how the subscriber can use the mobile data network . The business logic that provides services to subscribers may be referred to as a walled garden which refers to a closed or exclusive set of services provided for subscribers including a carrier s control over applications content and media on user equipment.

Devices using mobile data networks often need to access an external network such as the internet . As shown in when a subscriber enters a request for data from the internet that request is passed from the user equipment to tower to NodeB in basestation to radio network controller to serving node to gateway node to operator service network and to internet . When the requested data is delivered the data traverses the entire network from the internet to the user equipment . The capabilities of known mobile data networks are taxed by the ever increasing volume of data being exchanged between user equipment and the internet because all data between the two have to traverse the entire network.

Some efforts have been made to offload internet traffic to reduce the backhaul on the mobile data network. For example some mobile data networks include a node called a HomeNodeB that is part of the radio access network. Many homes have access to high speed Internet such as Direct Subscriber Line DSL cable television wireless etc. For example in a home with a DSL connection the HomeNodeB takes advantage of the DSL connection by routing Internet traffic to and from the user equipment directly to the DSL connection instead of routing the Internet traffic through the mobile data network. While this may be an effective way to offload Internet traffic to reduce backhaul the HomeNodeB architecture makes it difficult to provide many mobile network services such as lawful interception mobility and charging consistently with the 3G or 4G mobile data network.

Referring to a mobile data network includes mechanisms that provide various services for the mobile data network in a way that is transparent to most of the existing equipment in the mobile data network. shows user equipment tower NodeB radio network controller serving node gateway node operator service node and internet the same as shown in . The additions to the mobile data network when compared with the prior art mobile data network in include the addition of three components that may provide mobile network services in the mobile data network along with a network management mechanism to manage the three components. The mobile network services are performed by what is called herein a Mobile Internet Optimization Platform MIOP and the mobile network services performed by the Mobile Internet Optimization Platform are referred to herein as MIOP services. The three MIOP components that provide these mobile network services are shown in as MIOP NodeB MIOP RNC and MIOP Core . A network management system shown as MIOP NMS manages the overall solution by 1 managing the function of the three MIOP components and determining which MIOP NodeBs in the system aggregate to which MIOP RNCs via the overlay network for performance fault and configuration management and 3 monitoring performance of the MIOP NodeBs to dynamically change and configure the mobile network services. The MIOP NodeB MIOP RNC MIOP Core MIOP NMS and the overlay network and any subset of these and are referred to herein as MIOP components.

The mobile network services provided by MIOP NodeB MIOP RNC and MIOP Core include any suitable services on the mobile data network such as data optimizations RAN aware services subscriber aware services edge based application serving edge based analytics etc. All mobile network services performed by all of MIOP NodeB MIOP RNC and MIOP Core are included in the term MIOP services as used herein. In addition to the services being offer in the MIOP components MIOP NodeB MIOP RNC and MIOP Core the various MIOP services could also be provided in a cloud based manner.

MIOP NodeB includes a first service mechanism and is referred to as the edge based portion of the MIOP solution. MIOP NodeB resides in the radio access network and has the ability to intercept all traffic to and from the NodeB . MIOP NodeB preferably resides in the base station shown by the dotted box in . Thus all data to and from the NodeB to and from the radio network controller is routed through MIOP NodeB . MIOP NodeB performs what is referred to herein as breakout of data on the intercepted data stream. MIOP NodeB monitors the signaling traffic between NodeB and RNC and on connection setup intercepts in particular the setup of the transport layer allocation of the UDP Port IP address or AAL2 channel . For registered sessions the breakout mechanism will be configured in a way that all traffic belonging to this UDP Port IP address to AAL2 channel will be forwarded to an data offload function. MIOP NodeB thus performs breakout of data by defining a previously existing path in the radio access network for non broken out data by defining a new second data path that did not previously exist in the radio access network for broken out data identifying data received from a corresponding NodeB as data to be broken out sending the data to be broken out on the second data path and forwarding other data that is not broken out on the first data path. The signaling received by MIOP NodeB from NodeB is forwarded to RNC on the existing network connection to RNC even though the data traffic is broken out. Thus RNC sees the signaling traffic and knows the subscriber session is active but does not see the user data that is broken out by MIOP NodeB . MIOP NodeB thus performs two distinct functions depending on the monitored data packets 1 forward the data packets to RNC for signaling traffic and user data that is not broken out including voice calls and 2 re route the data packets for user data that is broken out.

Once MIOP NodeB breaks out user data it can perform any suitable service based on the traffic type of the broken out data. Because the services performed by MIOP NodeB are performed in the radio access network e.g. at the basestation the MIOP NodeB can service the user equipment much more quickly than can the radio network controller . In addition by having a MIOP NodeB that is dedicated to a particular NodeB one MIOP NodeB only needs to service those subscribers that are currently connected via a single NodeB. The radio network controller in contrast which typically services dozens or even hundreds of basestations must service all the subscribers accessing all basestations it controls from a remote location. As a result MIOP NodeB is in a much better position to provide services that will improve the quality of service and experience for subscribers than is the radio network controller.

Breaking out data in the radio access network by MIOP NodeB allows for many different types of services to be performed in the radio access network. These services may include optimizations that are similar to optimizations provided by known industry solutions between radio network controllers and the serving node. However moving these optimizations to the edge of the mobile data network will not only greatly improve the quality of service for subscribers but will also provide a foundation for applying new types of services at the edge of the mobile data network such as terminating machine to machine MTM traffic at the edge e.g. in the basestation hosting applications at the edge and performing analytics at the edge.

MIOP RNC includes a second service mechanism in mobile data network . MIOP RNC monitors all communication between the radio network controller and serving node . The monitored communications are all communications to and from the radio network controller and the rest of the core network. MIOP RNC may provide one or more services for the mobile data network. MIOP RNC preferably makes the decision of whether or not to allow breakout of data. If MIOP RNC decides to breakout data for a given subscriber session it may send a message to MIOP NodeB authorizing breakout by MIOP NodeB or may decide to breakout the data at MIOP RNC depending on the configured breakout decision criteria and selected radio channel. Because messages to and from the core network establishing the PDP context for a given subscriber session are monitored by MIOP RNC the decision of whether or not to breakout data resides in the MIOP RNC .

MIOP Core includes a third service mechanism in the mobile data network . MIOP Core may include all the same services as MIOP RNC or any suitable subset of those services. If the decision is made not to provide services at MIOP NodeB or MIOP RNC these same services plus more sophisticated services can be performed at MIOP Core . Thus mobile data network provides flexibility by allowing a decision to be made of where to perform which services. Because MIOP NodeB MIOP RNC and MIOP Core preferably include some of the same services the services between components may interact e.g. MIOP NodeB and MIOP Core may interact to optimize TCP traffic between them or the services may be distributed across the mobile data network e.g. MIOP NodeB performs breakout and provides services for high speed traffic MIOP RNC performs breakout and provides services for low speed traffic and MIOP Core provides services for non broken out traffic . The MIOP system architecture thus provides a very powerful and flexible solution allowing dynamic configuring and reconfiguring on the fly of which services are performed by the MIOP components and where. In addition these services may be implemented taking advantage of existing infrastructure in a mobile data network.

MIOP NMS is a network management system that monitors and controls the functions of MIOP NodeB MIOP RNC and MIOP Core . MIOP NMS preferably includes MIOP internal real time or near real time performance data monitoring to determine if historical or additional regional dynamic changes are needed to improve services on the mobile data network . MIOP NMS provides a user interface that allows a system administrator to operate and to configure how the MIOP components and function.

The overlay network allows MIOP NodeB MIOP RNC MIOP Core and MIOP NMS to communicate with each other. The overlay network is preferably a virtual private network primarily on an existing physical network in the mobile data network. Thus while overlay network is shown in separate from other physical network connections this representation in is a logical representation.

As shown in the overlay network from the NodeBs to POC is a virtual private network implemented on existing physical network connections. However the overlay network requires a second router RT which is connected via a physical network connection to POC and is connected via physical network connection to MIOP RNC . This second router RT may be a separate router or may be a router implemented within MIOP RNC . MIOP RNC is also connected to router RT via a physical network connection and is also connected to MIOP Core . Physical connection in is shown in a line with short dots because it is not part of the pre existing physical network before adding the MIOP components arrows with solid lines and is not part of the overlay network arrows with long dots . Note the connection from MIOP RNC to MIOP Core is via existing physical networks in the core network.

We can see from the configuration of the physical network and overlay network in that minimal changes are needed to the existing mobile data network to install the MIOP components. The most that must be added is one new router and three new physical network connections and . Once the new router and new physical network connections and are installed the router and MIOP components are appropriately configured and the existing equipment in the mobile data network is configured to support the overlay network the operation of the MIOP components is completely transparent to existing network equipment.

As can be seen in data on the overlay network is defined on existing physical networks from the NodeBs to POC . From POC the overlay network is on connection to RT and on connection to MIOP RNC . Thus when MIOP NodeB in needs to send a message to MIOP RNC the message is sent by sending packets via a virtual private network on the physical network connections to POC then to RT then to MIOP RNC . Virtual private networks are well known in the art so they are not discussed in more detail here.

Referring to MIOP NodeB preferably includes a breakout mechanism an edge service mechanism and an overlay network mechanism . The breakout mechanism determines breakout preconditions that when satisfied allow breakout to occur at this edge location. Breakout mechanism in MIOP NodeB communicates with the breakout mechanism in MIOP RNC shown in to reach a breakout decision. The breakout mechanism after receiving a message from MIOP RNC authorizing breakout on connection setup intercepts in particular the setup of the transport layer allocation of the UDP Port IP address or AAL2 channel . For authorized sessions the breakout mechanism will be configured in a way that all traffic belonging to this UDP Port IP address to AAL2 channel will be forwarded to a data offload function. For traffic that should not be broken out the breakout mechanism sends the data on the original data path in the radio access network. In essence MIOP NodeB intercepts all communications to and from the basestation and can perform services at the edge meaning at the edge of the radio access network that is close to the user equipment . By performing services at the edge the services to subscribers may be increased or optimizes without requiring hardware changes to existing equipment in the mobile data network.

The breakout mechanism preferably includes breakout preconditions that specify one or more criterion that must be satisfied before breakout of data is allowed. One suitable example of breakout preconditions is the speed of the channel. In one possible implementation only high speed channels will be broken out at MIOP NodeB . Thus breakout preconditions could specify that subscribers on high speed channels may be broken out while subscribers on low speed channels are not broken out at MIOP NodeB . When the breakout preconditions are satisfied the MIOP NodeB registers the subscriber session with MIOP RNC . This is shown in method in . MIOP NodeB intercepts and monitors network traffic to and from NodeB basestation step . When the traffic does not satisfy the breakout preconditions step NO method returns to step . When the traffic satisfies the breakout conditions step YES MIOP NodeB sends a message to MIOP RNC on the overlay network to register the subscriber session for breakout step . With the subscriber session registered with MIOP RNC the MIOP RNC will determine whether or not to breakout data for the subscriber session and where the breakout is done as explained in more detail below.

Referring back to MIOP NodeB also includes an edge service mechanism . The edge service mechanism provides one or more services for the mobile data network . The edge service mechanism may include any suitable service for the mobile data network including without limitation caching of data data or video compression techniques push based services charging application serving analytics security data filtering new revenue producing services etc. The edge service mechanism is the first of three service mechanisms in the MIOP components. While the breakout mechanism and edge service mechanism are shown as separate entities in the first service mechanism could include both breakout mechanism and edge service mechanism .

MIOP NodeB also includes an overlay network mechanism . The overlay network mechanism provides a connection to the overlay network in thereby allowing MIOP NodeB to communicate with MIOP RNC MIOP Core and MIOP NMS . As stated above the overlay network is preferably a virtual private network primarily on an existing physical network in the mobile data network .

Referring to MIOP RNC preferably includes a breakout mechanism an RNC service mechanism an overlay network mechanism and business intelligence . Breakout mechanism includes breakout criteria that specifies one or more criterion that when satisfied allows breakout of data. Subscriber registration mechanism receives messages from MIOP NodeB and registers subscriber sessions for which the breakout preconditions in MIOP NodeB are satisfied. When the breakout mechanism determines the breakout criteria is satisfied the breakout mechanism will then determine where the breakout should occur. When the breakout can occur at MIOP NodeB the MIOP RNC sends a message to MIOP NodeB on the overlay network authorizing breakout at MIOP NodeB . When the breakout should occur at MIOP RNC the breakout mechanism in MIOP RNC performs the breakout as well for the traffic remaining then . This is shown in more detail in method in . MIOP RNC monitors network traffic between the radio network controller and the serving node step . When the traffic does not satisfy the breakout criteria step NO method loops back to step . When the network traffic satisfies the breakout criteria step YES the breakout mechanism determines whether the subscriber session is registered for breakout step . A subscriber session is registered for breakout when the MIOP NodeB determined the traffic satisfied the breakout preconditions and registered the subscriber session for breakout as shown in . Returning to when the subscriber is registered for breakout step YES MIOP RNC sends a message via the overlay network to MIOP NodeB authorizing breakout of traffic for the subscriber session step . MIOP NodeB may then breakout traffic for the subscriber session step . When the subscriber is not registered for breakout step NO method checks to see if MIOP RNC is going to do breakout step . If not step NO method is done. When MIOP RNC is going to do breakout step YES the traffic is then broken out at MIOP RNC step .

In one specific example the breakout preconditions specify only high speed channels are broken out at MIOP NodeB and when the breakout preconditions are satisfied the subscriber session is registered for breakout as shown in . illustrates that even when the breakout preconditions are not satisfied breakout can still be performed at MIOP RNC . Thus even if the subscriber session is on a low speed channel if all the other breakout criteria are satisfied breakout of the low speed channel may be performed at MIOP RNC . The mobile data network thus provides great flexibility in determining when to do breakout and where.

Referring back to the RNC service mechanism provides one or more services for the mobile data network. RNC service mechanism is the second of three service mechanisms in the MIOP components. The RNC service mechanism may include any suitable service for the mobile data network including without limitation caching of data data or video compression techniques push based services charging application serving analytics security data filtering new revenue producing services etc.

While the breakout mechanism and RNC service mechanism are shown as separate entities in the second service mechanism could include both breakout mechanism and RNC service mechanism . The overlay network mechanism is similar to the overlay network mechanism in providing a logical network connection to the other MIOP components on the overlay network in . MIOP RNC also includes business intelligence which includes 

The business intelligence may be instrumented by the RNC service mechanism to determine when and what types of MIOP services to perform for a given subscriber. For example services for a subscriber on a mobile phone may differ when compared to services for a subscriber using a laptop computer to access the mobile data network. In another example voice over internet protocol VoIP session could have the data broken out.

Referring to the MIOP Core includes a core service mechanism and an overlay network mechanism . Core service mechanism provides one or more services for the mobile data network. Core service mechanism is the third of three service mechanisms in the MIOP components. The core service mechanism may include any suitable service for the mobile data network including without limitation caching of data data or video compression techniques push based services charging application serving analytics security data filtering new revenue producing services etc. In one specific implementation the MIOP Core is an optional component because all needed services could be performed at MIOP NodeB and MIOP RNC . In an alternative implementation MIOP Core performs some services while MIOP RNC performs others or none. The overlay network mechanism is similar to the overlay network mechanisms in in providing a logical network connection to the other MIOP components on the overlay network in .

Referring to the MIOP NMS is a network management system that monitors and manages performance of the mobile data network and controls the function of MIOP NodeB MIOP RNC and MIOP Core . MIOP NMS preferably includes a network monitoring mechanism a performance management mechanism a security management mechanism and a configuration management mechanism . The network monitoring mechanism monitors network conditions such as alarms in the mobile data network . The performance management mechanism can enable disable or refine certain services by supporting the execution of services in real time or near real time such as services that gather information to assess customer satisfaction. The security management mechanism manages security issues in the mobile data network such as intrusion detection or additional data privacy. The configuration management mechanism controls and manages the configuration of MIOP NodeB MIOP RNC and MIOP Core in a way that allows them to dynamically adapt to any suitable criteria including data received from the network monitoring mechanism time of day information received from business intelligence etc.

Referring again to when the traffic satisfies the breakout criteria step YES and the subscriber session is registered for breakout step YES MIOP RNC sends a message to MIOP NodeB authorizing breakout of traffic for this subscriber session step . In response MIOP NodeB begins decrypting the bearer examining the signaling and user IP traffic tunneled through it and may breakout the traffic for this subscriber session step . Note however MIOP NodeB may still decide not to breakout all traffic based on other criteria such as type of IP request the destination of the traffic or the ISO Layer 7 Application of the decrypted user traffic. Determination of the Application may be performed simply by inspection of the IP 5 tuple or optionally via inspection at layer 7 using Deep Packet Inspection DPI techniques. This is shown in the specific example in . Method in is one suitable implementation of step in . MIOP NodeB monitors IP requests from the subscriber step . When the user traffic IP request matches a specified type criteria step YES the IP session is broken out for the subscriber step . When the IP request does not match a specified criteria type step NO no breakout is performed. For example let s assume that IP requests to access video over the RTP layer 7 Application Protocol are broken out so the video data may be cached in MIOP NodeB but other requests such as Google searches are not. The MIOP NodeB monitors the IP requests from the subscriber step and when the subscriber session IP request carries RTP traffic is for a video file step YES the IP session is broken out step . Otherwise the IP session is not broken out at MIOP NodeB. This is one simple example to illustrate additional flexibility and intelligence within MIOP NodeB that may determine whether or not to perform breakout for a given subscriber session at the MIOP NodeB after being authorized by MIOP RNC to perform breakout for that subscriber session. Any suitable criteria could be used to determine what to breakout and when at MIOP NodeB once MIOP NodeB has been authorized for breakout in step in .

Referring to method shows a method for determining when to run MIOP services. The Packet Data Protocol PDP activation context for a subscriber is monitored step . A PDP activation context is established when user equipment connects to tower and the subscriber runs an application that triggers the PDP activation procedure. The core network will determine the subscriber and perhaps corresponding user equipment. When MIOP services are allowed step YES services for this subscriber session are run step upon the arrival of data from the subscriber. When MIOP services are not allowed step NO no MIOP services are run. In one simple example MIOP services in the mobile data network are allowed for authorized subscribers but are not allowed for subscribers from a different wireless company that are roaming.

MIOP services may require communicating between MIOP components on the overlay network. Referring to a method shows communications by MIOP NodeB when MIOP services are running step . When the edge service mechanism requires communication with MIOP RNC step YES MIOP NodeB exchanges messages with MIOP RNC over the overlay network step . When the edge service mechanism requires communication with MIOP Core step YES MIOP NodeB exchanges messages with MIOP Core over the overlay network step . The overlay network thus allows the various MIOP components to communicate with each other when MIOP services are running.

Referring to implementations for MIOP NodeB and MIOP RNC are shown by way of example. Other implementations are possible within the scope of the disclosure and claims herein. User equipment is connected to NodeB . Note the antenna shown in is not shown in but is understood to be present to enable the communication between user equipment and NodeB . MIOP NodeB includes an edge cache mechanism which is one suitable example of edge service mechanism in . MIOP NodeB includes an interface referred to herein as IuB Data Offload Gateway IuB DOGW . This gateway implements the breakout mechanism according to one or more specified breakout preconditions shown in . IuB DOGW includes a switching application an offload data handler and an RNC channel handler . The switching application is responsible for monitoring data packets received from NodeB forwards according to it configuration the broken out data packets to the offload data handler relays the non broken out data packets and control system flows to the RNC via the original connections in the RAN. While switching application is shown as two separate boxes in this is done to visually indicate the switching application performs switching on two different interfaces the network interface and overlay network interface but the switching application is preferably a single entity.

When a breakout decision is made and MIOP RNC sends a message to MIOP NodeB authorizing breakout see step in when MIOP NodeB decides to breakout specified user data the specified user data received by the switching application from NodeB is broken out which means the switching application routes the specified user data to the offload data handler so the broken out data is routed to the data path defined for breakout data. The offload data handler may send the data to the edge cache mechanism for processing which can route the data directly to MIOP RNC via the overlay network as shown by the path with arrows going from NodeB to MIOP RNC .

User data that is not broken out and signaling traffic is routed directly back by the switching application to RNC. In this manner non broken out data and signaling traffic passes through the IuB DOGW to RNC while broken out data is routed by the IuB DOGW to a different destination. Note that edge cache mechanism may send messages to MIOP RNC as shown in but the broken out messages themselves are not sent to MIOP RNC .

MIOP RNC includes an interface referred to herein as IuPS data offload gateway IuPS DOGW . IuPS DO GW forwards all signaling and non broken out data traffic from RNC to SGSN via the GTP tunnel. IuPS DOGW includes the breakout mechanism breakout criteria and subscriber registration mechanism shown in and discussed above with reference to . IuPS DOGW may exchange messages with IuB DOGW via the overlay network to perform any needed service in MIOP NodeB or MIOP RNC . For the specific implementation shown in while the IuPS DOGW in MIOP RNC does not include an offload data handler the IuPS DOGW could include an offload data handler and switching application similar to those shown in MIOP NodeB when MIOP RNC also needs to perform breakout of data.

The IuPS DOGW includes an RNC channel handler . The RNC channel handlers in MIOP NodeB and in MIOP RNC monitor data traffic to and from RNC related to a broken out subscriber session and provide a keep alive channel maintenance mechanism.

Specific methods are shown in that illustrate how the specific implementation in could be used. show a method for setting up breakout of data. The UE sends a connection request to the RNC step . The RNC sets up a radio link via NodeB step . The RNC then sets up a network connection with NodeB step . The UE and SGSN then communicate for the attach and authentication procedure step . IuB DOGW detects the leading message in the attach and authentication procedure and registers the subscriber session with IuPS DOGW when preconditions are fulfilled e.g. UE is capable to carry high speed traffic step . During the attach and authentication procedure IuPS DOGW monitors the security context sent from SGSN to RNC step . IuPS DOGW then sends keys to IuB DOGW step . These keys are needed to decipher decrypt the upcoming signaling and uplink user data and to cipher encrypt the downlink user data. UE then requests PDP context activation to SGSN step . In response SGSN sets up a network tunnel to RNC step . IuPS DOGW monitors network tunnel setup from SGSN to RNC and makes a decision breakout YES step . IuPS DOGW sends a message to IuB DOGW indicating breakout YES step . Continuing on SGSN sends an RAB assignment request to UE step . IuPS DOGW detects the RAB assignment request from SGSN to UE and replaces the SGSN transport address with IuPS DOGW transport address step . IuPS DOGW sends a message to MIOP Core indicating breakout YES step . RNC communicates with NodeB and UE to re configure signaling and data radio bearer step . RNC acknowledges to SGSN when RAB assignment is complete step . SGSN accepts PDP context activation by sending a message to UE step . UE and SGSN may then exchange data for the PDP context step .

Referring to a method begins by establishing a PDP context step . Method in include the detailed steps for establishing a PDP context. When breakout YES RAB assignment requests from SGSN to RNC are monitored by IuPS DOGW step . IuPS DOGW modifies any RAB assignment requests from SGSN to RNC to replace the SGSN transport address in the RAB assignment request with the IuPS DOGW transport address step in case of matching breakout criteria during PDP context activation procedure. The switching application on IuB DOGW is configured upon the RAN transport layer setup to identify based on IP addresses and ports the broken out traffic and forwards this traffic to the Offload data handler and forwards non broken out traffic and control system data flows to the RNC step .

Referring to a method begins when NodeB sends data towards RNC step . The switching application in IuB DOGW redirects the broken out traffic to the edge service mechanism step such as edge cache mechanism in . The switching application also forwards non broken out data and signaling data to the RNC step via the original RAN connections. The RNC can still receive data for non broken out traffic from MIOP NodeB when breakout YES step . The RNC then sends non broken out traffic from MIOP NodeB from UE when breakout YES to IuPS DOGW transport address specified in RAB assignment request step .

A simple example is now provided for the specific implementation in to show how data can be cached and delivered by MIOP NodeB . Referring to method represents steps performed in the implementation in for a cache miss. UE sends a data request to NodeB step . NodeB sends the data request to IuB DOGW step . We assume the requested data meets the offload criteria at MIOP NodeB step which means MIOP NodeB has been authorized to perform breakout and has determined this requested data should be broken out. IuB DOGW sends the data request to the edge cache mechanism step . We assume the data is not present in the edge cache mechanism so due to the cache miss the edge cache mechanism sends the data request back to IuB DOGW step . IuB DOGW then forwards the data request to MIOP RNC via the overlay network step . In the worst case the content is not cached on MIOP RNC or MIOP Core MIOP RNC routes the data request to via the overlay network to the MIOP Core which passes the data request up the line to the internet which delivers the requested data to MIOP Core which delivers the requested data via the overlay network to MIOP RNC step . IuPS DOGW then sends the requested data to IuB DOGW step . IuB DOGW then sends the requested data to the edge cache mechanism step . The edge cache mechanism caches the requested data step . The edge cache mechanism sends the requested data to IuB DOGW step . The offload data handler in IuB DOGW sends the requested data to NodeB step . NodeB then sends the requested data to UE step . At this point method is done.

Method in shows the steps performed for a cache hit in the specific implementation in . The UE sends the data request to NodeB step . NodeB sends the data request to IuB DOGW step . The requested data meets the offload criteria at MIOP NodeB step . IuB DOGW sends the data request to the edge cache mechanism step . Due to a cache hit the edge cache mechanism sends the requested data from the cache to IuB DOGW step . The offload data handler in IuB DOGW sends the requested data to NodeB step . Node B then sends the requested data to UE step . Method shows a great advantage in caching data at MIOP NodeB. With data cached at MIOP NodeB the data may be delivered to the user equipment without any backhaul on the core network. The result is reduced network congestion in the core network while improving quality of service to the subscriber.

The methods shown in provide detailed steps for the specific implementation in . Other implementations may have detailed steps that are different than those shown in . These are shown by way of example and are not limiting of the disclosure and claims herein.

The architecture of the MIOP system allows services to be layered or nested. For example the MIOP system could determine to do breakout of high speed channels at MIOP NodeB and to do breakout of low speed channels at MIOP RNC. In another example MIOP NodeB may have a cache MIOP RNC may also have a cache and MIOP Core may also have a cache. If there is a cache miss at MIOP NodeB the cache in MIOP RNC could be checked followed by checking the cache in MIOP Core. Thus decisions can be dynamically made according to varying conditions of what data to cache and where.

To support the MIOP services that are possible with the mobile data network shown in the preferred configuration of MIOP NodeB is a combination of hardware and software. The preferred configuration of MIOP RNC is also a combination of hardware and software. The preferred configuration of MIOP Core is software only and can be run on any suitable hardware in the core network. The preferred configuration of MIOP NMS is software only and can also be run on any suitable hardware in the core network.

In the most preferred implementation the various functions of MIOP NodeB MIOP RNC MIOP Core and MIOP NMS are performed in a manner that is nearly transparent to existing equipment in the mobile data network. Thus the components in prior art mobile data network that are also shown in the mobile data network in have no knowledge of the existence of the various MIOP components with the exception of existing routers that may need to be updated with routing entries corresponding to the MIOP components. The MIOP services are provided by the MIOP components in a way that requires no changes to hardware and only minor changes to software i.e. new router entries in any existing equipment in the mobile data network thereby making the operation of the MIOP components transparent to the existing equipment once the MIOP components are installed and configured. The result is a system for upgrading existing mobile data networks as shown in in a way that does not require extensive hardware or software changes to the existing equipment. The MIOP services herein can thus be performed without requiring significant capital expenditures to replace or reprogram existing equipment.

Referring to one suitable hardware architecture for MIOP NodeB is shown. MIOP NodeB is one specific implementation for MIOP NodeB shown in and . MIOP NodeB is one suitable example of a breakout component that may be incorporated into an existing mobile data network. The specific architecture was developed based on a balance between needed function and cost. The hardware components shown in may be common off the shelf components. They are interconnected and programmed in a way to provided needed function while keeping the cost low by using off the shelf components. The hardware components shown in include a system controller a service processor a security subsystem and a telco breakout subsystem . In one suitable implementation for MIOP NodeB shown in the system controller is an x86 system. The service processor is an IBM Integrated Management Module version 2 IMMv2 . The security subsystem includes an ATMEL processor and a non volatile memory such as a battery backed RAM for holding keys. The telco breakout system performs the breakout functions for MIOP NodeB . In this specific implementation the x86 and IMMv2 are both on a motherboard that includes a Peripheral Component Interconnect Express PCIe slot. A riser card plugged into the PCIe slot on the motherboard includes the security subsystem along with two PCIe slots for the telco breakout system . The telco breakout system may include a telco card and a breakout card that performs breakout as described in detail above with respect to .

One suitable x86 processor that could serve as system controller is the Intel Xeon E3 1220 processor. One suitable service processor is an IBM Renassas SH7757 but other known service processors could be used. One suitable processor for the security subsystem is an ATMEL processor UC3L064 and one suitable non volatile memory for the security subsystem is a DS3645 battery backed RAM from Maxim. One suitable processor for the telco breakout subsystem is the Cavium Octeon II CN63XX.

Various functions of the MIOP NodeB shown in are divided amongst the different components. Referring to the system controller implements an appliance mechanism a platform services mechanism and an edge application serving mechanism . The appliance mechanism provides an interface to MIOP NodeB that hides the underlying hardware and software architecture by providing an interface that allows configuring and using MIOP NodeB without knowing the details of the underlying hardware and software. The platform services mechanism provides messaging support between the components in MIOP NodeB allows managing the configuration of the hardware and software in MIOP NodeB and monitors the health of the components in MIOP NodeB. The edge application serving mechanism allows software applications to run within MIOP NodeB that perform one or more mobile network services at the edge of the mobile data network in response to broken out data received from user equipment or sent to user equipment. In the most preferred implementation the data broken out and operated on by MIOP NodeB is Internet Protocol IP data requests received from the user equipment and IP data sent to the user equipment. The edge application service mechanism may serve both applications provided by the provider of the mobile data network and may also serve third party applications as well. The edge application serving mechanism provides a plurality of mobile network services to user equipment at the edge of the mobile data network in a way that is mostly transparent to existing equipment in the mobile data network.

Referring to the service processor includes a thermal monitor control mechanism a hardware monitor a fail to wire control mechanism a key mechanism a system controller monitor reset mechanism and a display indicator mechanism . The thermal monitor control mechanism monitors temperatures and activates controls to address thermal conditions. For example the thermal monitor monitors temperature within the MIOP NodeB enclosure and activates one or more fans within the enclosure when the temperature exceeds some threshold. In addition the thermal monitor control mechanism may also monitor temperature in the basestation external to the MIOP NodeB enclosure and may control environmental systems that heat and cool the basestation itself external to the MIOP NodeB enclosure. The hardware monitor monitors hardware for errors. Examples of hardware that could be monitored with hardware monitor include CPUs memory power supplies etc. The hardware monitor could monitor any of the hardware within MIOP NodeB .

The fail to wire control mechanism is used to switch a fail to wire switch to a first operational state when MIOP NodeB is fully functional that causes data between the upstream computer system and the downstream computer system to be processed by MIOP NodeB and to a second failed state that causes data to be passed directly between the upstream computer system and the downstream computer system without being processed by MIOP NodeB . The key mechanism provides an interface for accessing the security subsystem . The system controller monitor reset mechanism monitors the state of the system controller and resets the system controller when needed. The display indicator mechanism activates a display and indicators on the front panel of the MIOP NodeB to provide a visual indication of the status of MIOP NodeB.

Referring to the security subsystem includes a key storage that is a non volatile storage for keys such as a battery backed RAM. The security subsystem further includes a key mechanism and a tamper detection mechanism . Key mechanism stores keys to the non volatile key storage and retrieves keys from the non volatile key storage . Any suitable keys could be stored in the key storage . The security subsystem controls access to the keys stored in key storage using key mechanism . The tamper detection mechanism detects physical tampering of MIOP NodeB and performs functions to protect sensitive information within MIOP NodeB when physical tampering is detected. The enclosure for MIOP NodeB includes tamper switches that are triggered if an unauthorized person tries to open the box. In response the tamper detection mechanism may take any suitable action including actions to protect sensitive information such as not allowing MIOP NodeB to boot the next time erasing keys in key storage and actions to sound an alarm that the tampering has occurred.

Referring to the telco breakout system includes a telco card a breakout mechanism and an overlay network mechanism . Telco card is any suitable card for handling network communications in the radio access network. Breakout mechanism is one specific implementation for breakout mechanism shown in . Breakout mechanism performs the breakout functions as described in detail above. The breakout mechanism interrupts the connection between the NodeB and the next upstream component in the radio access network such as the RNC as shown in . Non broken out data from the upstream component is simply passed through MIOP NodeB to the NodeB. Non broken out data from the NodeB is simply passed through MIOP NodeB to the upstream component. Note the path for non broken out data is the traditional path for data in the mobile data network before the MIOP components were added. Broken out data is intercepted by MIOP NodeB and may be appropriate processed at MIOP NodeB or may be routed to an upstream component via a different data path such as to MIOP RNC via the overlay network. The telco breakout system includes an overlay network mechanism that allows MIOP NodeB to communicate via the overlay network. For example MIOP NodeB could use overlay network mechanism to communicate with MIOP RNC or to communicate with other MIOP NodeBs.

The edge application mechanism may provide many different mobile network services. Examples of some of these services are shown in . This specific implementation for edge application mechanism includes an edge caching mechanism a push based service mechanism a third party edge application serving mechanism an analytics mechanism a filtering mechanism a revenue producing service mechanism and a charging mechanism . The edge caching mechanism is one suitable implementation of edge cache mechanism shown in and includes the functions described above with respect to . The push based service mechanism provides support for any suitable push based service whether currently known or developed in the future. Examples of known push based services include without limitation incoming text messages incoming e mail instant messaging peer to peer file transfers etc.

The third party edge application serving mechanism allows running third party applications that provide mobile network services at the edge of the mobile data network. The capability provided by the third party edge application serving mechanism opens up new ways to generate revenue in the mobile data network. The operator of the mobile data network may generate revenue both from third parties that offer edge applications and from subscribers who purchase or use edge applications. Third party applications for user equipment has become a very profitable business. By also providing third party applications that can run at the edge of the mobile data network the experience of the user can be enhanced. For example face recognition software is very compute intensive. If the user were to download an application to the user equipment to perform face recognition in digital photographs the performance of the user equipment could suffer. Instead the user could subscribe to or purchase a third party application that runs at the edge of the mobile data network executed by the third party edge application serving mechanism that performs face recognition. This would allow a subscriber to upload a photo and have the hardware resources in MIOP NodeB perform the face recognition instead of performing the face recognition on the user equipment. We see from this simple example it is possible to perform a large number of different functions at the edge of the mobile data network that were previously performed in the user equipment or upstream in the mobile data network. By providing applications at the edge of the mobile data network the quality of service for subscribers increases.

The analytics mechanism performs analysis of broken out data. The results of the analysis may be used for any suitable purpose or in any suitable way. For example the analytics mechanism could analyze IP traffic on MIOP NodeB and use the results of the analysis to more intelligently cache IP data by edge caching mechanism . In addition the analytics mechanism makes other revenue producing services possible. For example the analytics mechanism could track IP traffic and provide advertisements targeted to user equipment in a particular geographic area served by the basestation. Because data is being broken out at MIOP NodeB the analytics mechanism may perform any suitable analysis on the broken out data for any suitable purpose.

The filtering mechanism allows filtering content delivered to the user equipment by MIOP NodeB. For example the filtering mechanism could block access to adult websites by minors. This could be done for example via an application on the user equipment or via a third party edge application that would inform MIOP NodeB of access restrictions which the filtering mechanism could enforce. The filtering mechanism could also filter data delivered to the user equipment based on preferences specified by the user. For example if the subscriber is an economist and wants news feeds regarding economic issues and does not want to read news stories relating to elections or politics the subscriber could specify to exclude all stories that include the word election or politics in the headline. Of course many other types of filtering could be performed by the filtering mechanism . The filtering mechanism preferably performs any suitable data filtering function or functions whether currently known or developed in the future.

The revenue producing service mechanism provides new opportunities for the provider of the mobile data network to generate revenue based on the various functions MIOP NodeB provides. An example was given above where the analytics mechanism can perform analysis of data broken out by MIOP NodeB and this analysis could be provided by the revenue producing service mechanism to interested parties for a price thereby providing a new way to generate revenue in the mobile data network. Revenue producing service mechanism broadly encompasses any way to generate revenue in the mobile data network based on the specific services provided by any of the MIOP components.

The charging mechanism provides a way for MIOP NodeB to inform the upstream components in the mobile data network when the subscriber accesses data that should incur a charge. Because data may be provided to the subscriber directly by MIOP NodeB without that data flowing through the normal channels in the mobile data network the charging mechanism provides a way for MIOP NodeB to charge the subscriber for services provided by MIOP NodeB of which the core network is not aware. The charging mechanism tracks the activity of the user that should incur a charge then informs a charging application in the core network that is responsible for charging the subscriber of the charges that should be billed.

The hardware architecture of MIOP NodeB shown in allows MIOP NodeB to function in a way that is mostly transparent to existing equipment in the mobile data network. For example if an IP request from user equipment may be satisfied from data held in a cache by edge caching mechanism the data may be delivered directly to the user equipment by MIOP NodeB without traversing the entire mobile data network to reach the Internet to retrieve the needed data. This can greatly improve the quality of service for subscribers by performing so many useful functions at the edge of the mobile data network. The core network will have no idea that MIOP NodeB handled the data request which means the backhaul on the mobile data network is significantly reduced. The MIOP components disclosed herein thus provide a way to significantly improve performance in a mobile data network by adding the MIOP components to an existing mobile data network without affecting most of the functions that already existed in the mobile data network.

The mobile data network disclosed herein includes MIOP components that provide a variety of different services that are not possible in prior art mobile data network . In the most preferred implementation the MIOP components do not affect voice traffic in the mobile data network. In addition to performing optimizations that will enhance performance in the form of improved download speeds lower latency for access or improved quality of experience in viewing multimedia on the mobile data network the MIOP architecture also provides additional capabilities that may produce new revenue generating activities for the carrier. For example analytics may be performed on subscriber sessions that allow targeting specific subscribers with additional services from the carrier to generate additional revenue. For example subscribers congregating for a live music event may be sent promotions on paid for media related to that event. In another example subscribers getting off a train may be sent a coupon promoting a particular shuttle company as they walk up the platform towards the street curb. Also premium web content in the form of video or other multimedia may be served from local storage and the subscriber would pay for the additional content and quality of service.

MIOP NodeB is preferably an appliance. The difference between a traditional hardware software solution and an appliance is the appliance interface hides the underlying hardware and software configuration from the users of the appliance whether the user is a man or a machine. Appliances for different applications are known in the art. For example a network switch is one example of a known appliance. A network switch typically provides a web based interface for configuring the switch with the appropriate configuration parameters. From the web based interface it is impossible to tell the internal hardware and software configuration of a network switch. The only commands available in the web based interface for the network switch are those commands needed to configure and otherwise control the function of the network switch. Other functions that might be supported in the hardware are hidden by the appliance interface. This allows an interface that is independent from the hardware and software implementation within the appliance. In similar fashion MIOP NodeB is preferably an appliance with a defined interface that makes certain functions needed to configured and operate MIOP NodeB available while hiding the details of the underlying hardware and software. This allows the hardware and software configuration of MIOP NodeB to change over time without having to change the appliance interface. The appliance aspects of MIOP NodeB are implemented within the appliance mechanism in .

One suitable implementation of the appliance mechanism is shown in . In this implementation appliance mechanism includes multiple appliance interfaces and multiple appliance functions. While multiple appliance interfaces are shown in the disclosure and claims herein also extend to an appliance with a single interface as well. Appliance interfaces include a command line interface CLI a web services interface a simple network management protocol SNMP interface and a secure copy SCP interface . The appliance functions include configuration management performance management fault diagnostic management security management network management breakout management appliance platform management edge application management alarm management file transfer management and overload management . Additional details regarding the appliance interfaces and appliance functions are provided below.

The command line interface is a primary external interface to the MIOP NodeB appliance. In the specific implementation shown in the command line interface provides most of the appliance functions which are described in more detail below. Those commands not provided in command line interface are provided by the SNMP interface or the SCP interface as described in detail below with reference to .

The web services interface is another primary external interface to the MIOP NodeB appliance. In the specific implementation shown in the web services interface provides all the same functions as the command line interface .

The SNMP interface is an interface to the MIOP NodeB appliance that is used by an external entity such as MIOP NMS or MIOP RNC to receive alarms from MIOP NodeB. For example if a fan failed on the MIOP NodeB appliance a fan failed SNMP trap could be raised by MIOP NodeB. A monitor running on MIOP NMS could catch this trap and any suitable action could be taken in response including alerting a system administrator of the mobile data network who could take corrective action such as dispatching a repair crew to the basestation that includes the MIOP NodeB appliance to repair the defective fan or replace the MIOP NodeB appliance. Once the repair is made the MIOP NMS would clear the SNMP trap which would communicate to the MIOP NodeB that the repair was made. In one specific implementation the SNMP interface includes only the functions for alarm management . The SNMP interface can also be used as a way to request and send information between two network entities such as MIOP NodeB and MIOP RNC or between MIOP NodeB and MIOP NMS. However the SCP interface provides a more preferred interface for transferring data between two network entities.

The SCP interface is an interface based on the Secure Shell SSH protocol such as that typically used in Linux and Unix systems. SCP interface thus provides a secure way to transfer information between two network entities. The SCP interface could be used for example by MIOP NMS to transfer configuration information or software updates to MIOP NodeB. The SCP interface could likewise be used to transfer audit logs diagnostic information performance data or backups of the appliance configuration from MIOP NodeB to MIOP NMS. Implementing SCP is easy given the SSH already provided on MIOP NodeB that provides a secure shell for the command line interface to run in. In one specific implementation the SCP interface includes only the functions for file transfer management .

The various appliance functions shown in may be implemented using different commands. Examples of some suitable commands are shown in . Referring to configuration management functions may include breakout configuration commands edge cache configuration commands platform configuration commands network configuration commands firmware hardware configuration commands security configuration commands and edge application configuration commands . The breakout configuration commands include commands to configure the breakout mechanism in MIOP NodeB. The edge cache configuration commands include commands to configure caching of IP data within MIOP NodeB. Platform configuration commands include commands to configure MIOP NodeB. Network configuration commands include commands to configure network connections in MIOP NodeB. Firmware hardware configuration commands include commands to configure the firmware or hardware within MIOP NodeB. Security configuration commands include commands to configure security settings in MIOP NodeB. Edge application configuration commands allow configuring applications that run on MIOP NodeB to provide services with respect to IP data exchanged with user equipment. These may include native applications and third party applications.

Referring to performance management functions may include collect performance indicators commands counters commands and analysis commands . The collect performance indicators commands include commands that allow collecting key performance indicators KPIs from MIOP NodeB. The counters commands include commands that set or clear counters that measure performance in MIOP NodeB. The analysis commands include commands that perform analysis of performance parameters within MIOP NodeB. For example analysis commands could perform summations of key performance indicators for a given time period.

Referring to fault diagnostic management functions may include log control commands fault control commands and system health commands . Log control commands include commands that collect logs prune existing logs purge existing logs and set logging parameters. Fault control commands include commands that configure fault targets and view faults that have not been resolved. System health commands include commands that allowing viewing system health and taking actions in response to faults such as restarting breakout shutdown of MIOP NodeB etc.

Referring to security management functions include two different classes of security commands manufacturing security commands and operational security commands . The manufacturing security commands include key commands digital certificate commands system state commands and hardware diagnostic commands . The manufacturing security commands are used during manufacture of MIOP NodeB to perform security functions. The key commands include commands to load security encryption keys. The digital certificate commands include commands to communicate with a trusted server to sign digital certificates. The system state commands include commands to read and modify the state of MIOP NodeB. System state commands could be used for example to modify the state of MIOP NodeB from a manufacturing state to an operational state. The hardware diagnostic commands include commands that run hardware exercisers to verify the MIOP NodeB is functional. The operational security commands include audit record commands which include commands that allow reviewing and auditing records that track the security functions performed by MIOP NodeB.

Referring to the network management commands include network setup commands network status commands and network diagnostic commands . Network setup commands include commands that setup network connections in MIOP NodeB. Network status commands include commands that allow showing network status statistics neighboring MIOP NodeB systems and current network configuration. Network diagnostic commands include commands for network diagnostics and tests such as pinging an interface to see if it responds. Note the configuration management functions shown in include network configuration commands which can be used to configure network connections in MIOP NodeB both during manufacturing as well as when the MIOP NodeB is made operational in a mobile data network.

Referring to the breakout management functions may include breakout stop start commands and breakout status commands . The breakout stop start commands include commands to stop and start breakout in MIOP NodeB. The breakout status commands include commands to determine the state of breakout on MIOP NodeB.

Referring to the appliance platform management functions may include status commands component commands health commands software configuration commands SNMP trap commands and appliance commands . The status commands may include commands that show the health status and overload status of MIOP NodeB. The component commands include commands that list components within MIOP NodeB and their versions. The health commands include commands that monitor the health of MIOP NodeB such as commands that respond to health and overload issues. The software configuration commands include commands to upgrade or rollback software running on MIOP NodeB. The SNMP trap commands include commands to set SNMP trap destinations and define SNMP trap actions. The appliance commands include commands to reboot MIOP NodeB put MIOP NodeB to sleep for some period of time and reset MIOP NodeB to its manufacturing defaults.

Referring to the edge application management functions include native edge application commands and third party edge application commands . The native edge application commands include commands to configure and manage native edge applications in MIOP NodeB. The third party edge application commands include commands to install configure and manage third party applications in MIOP NodeB.

Referring to the alarm management functions include alarm configuration commands and alarm status commands . The alarm configuration commands include commands to configure alarms in MIOP NodeB. The alarm status commands include commands to determine the status of alarms in MIOP NodeB or to clear previously raised alarms on MIOP NodeB. In one particular implementation the alarm management functions are available via the SNMP interface . In this configuration SNMP is used by MIOP NodeB to raise alarms that are being monitored. For example if a fan failed on the MIOP NodeB appliance a fan failed SNMP trap could be raised by the MIOP NodeB. This trap would be caught by a monitor running on MIOP NMS and an alert would be given to a system administrator monitoring the mobile data network. The system administrator could then take corrective action such as dispatching a repair crew to the basestation to repair the failed fan. Once the failure is fixed the system administrator can clear the alarm by sending a clear SNMP trap to MIOP NodeB.

Referring to the file transfer management functions include file transfer commands that allow transferring files to and from MIOP NodeB. In one particular implementation the file transfer commands are available via the SCP interface . The file transfer commands include commands in a Secure Shell SSH which is a network protocol used to remote shell access to the MIOP NodeB appliance. SSH is very commonly used for secure shell access on Linux and Unix systems. Secure Copy SCP runs in SSH and allows securely copying files between systems. The SCP interface thus provides file transfer commands that allow transferring files to and from MIOP NodeB. For example configuration files or software updates could be transferred to MIOP NodeB while audit logs diagnostic information performance data and backups of the appliance configuration could be transferred from the MIOP NodeB.

Referring to the overload management functions include overload configuration commands overload monitoring commands and overload handling commands . The overload configuration commands include commands to configure overload monitoring and handling in the MIOP NodeB appliance. The overload monitoring commands include commands that determine how overload monitoring is performed on the MIOP NodeB appliance. The overload handling commands include commands that determine how overload handling is performed on the MIOP NodeB appliance.

A block diagram view of the MIOP NodeB appliance is shown in . MIOP NodeB appliance includes an enclosure hardware and software . The hardware includes network connections to a downstream computer system such as a NodeB in a basestation. Hardware also includes network connections to an upstream computer system such as an RNC. The software includes the breakout mechanism shown in and the appliance mechanism shown in . This simple block diagram in shows the encapsulation of hardware and software within an enclosure into an appliance view where the appliance defines one or more interfaces with commands that are allowed to be performed on the MIOP NodeB appliance. Creating a MIOP NodeB appliance as shown in and discussed in detail herein allows changing the implementation of hardware and software within the appliance while maintaining the consistent appliance interface. This allows the design and functionality of the MIOP NodeB appliance to evolve over time while maintaining the same interfaces and commands. As a result the MIOP NodeB hardware and software can be changed dramatically without affecting how external components interact with MIOP NodeB. Of course changes in design and improvements in performance may give rise to new commands that could be defined in the MIOP NodeB appliance. Note however that defining new commands in MIOP NodeB would not affect the compatibility of MIOP NodeB with other components in the mobile data network that do not need the new commands. As a result the MIOP NodeB appliance is backwards compatible with all earlier versions of MIOP NodeB.

Referring to a block diagram is shown that is similar to the block diagram in . Appliance is one suitable implementation of appliance shown in and includes an overload manager in the system controller and overload agents and in the service processor security subsystem and telco breakout system respectively. The overload manager may be implemented within the appliance mechanism as part of the overload management shown in or may be implemented separate from the appliance mechanism with one or more appropriate interfaces that allow the overload management in the appliance mechanism to access the overload manager .

In a mobile data network there may be hundreds or thousands of basestations any number of which could include the MIOP NodeB appliance. To meet stringent performance standards in a mobile data network the appliance must be self monitoring and self healing to the extent possible. Because each MIOP NodeB appliance includes a complex combination of hardware and software in multiple subsystems overload monitoring and handling requires interaction between the overload manager and all subsystems. Overload monitoring and handling in MIOP NodeB includes tracking resource usage of all appliance components including subsystems processes network bandwidth etc. The resource usage is then compared to expected values. Multiple status levels are defined to indicate whether an overload condition exists and if so the severity of the overload condition. Once the overload condition is detected and its severity is determined one or more actions may be taken in an attempt to correct the overload condition. These actions are arranged in a hierarchy so that one or more low impact actions are tried first followed by one or more high impact actions if the low impact actions do not correct the overload condition. If neither low impact actions nor high impact actions correct the overload condition the final action in the hierarchy will shut down the MIOP NodeB appliance.

In the specific configuration shown in the overload manager receives overload information from the overload agents in the other subsystems in the appliance. Because the overload manager runs on the system controller the overload manager can perform the overload monitoring functions for the system controller that are performed by the overload agents for other subsystems. The exchange of overload information between the overload manager and the overload agents and may occur in any suitable way. For example the overload manager could poll each overload agent. In the alternative each overload agent could notify the overload manager when an overload is detected. This notification could take any suitable form including a network message calling an application programming interface API generating a software trap generating a hardware interrupt etc. The notification could be an indication of current overload status or could simply be performance parameters from which the overload manager will determine the corresponding overload status. The overload manager overload agent arrangement thus allows flexibility in determining what overload functions are performed in different locations in the MIOP NodeB appliance.

One particular implementation for the overload manager is shown in . In this implementation the overload manager includes overload conditions and corresponding overload thresholds overload status and status levels and overload actions and overload action levels . Simple examples will illustrate. Referring to sample overload conditions include CPU memory network breakout edge application and operating system . Each overload condition has one or more corresponding overload thresholds . Thus the CPU overload condition has one or more corresponding CPU thresholds the memory overload condition has one or more corresponding memory thresholds the network overload condition has one or more corresponding network thresholds the breakout overload condition has one or more corresponding breakout thresholds the edge application overload condition has one or more corresponding edge application thresholds and the operating system overload condition has one or more corresponding operating system thresholds . The overload thresholds may specify multiple thresholds that correspond to different status levels. Thus a first CPU threshold could be defined to indicate a mild overload while a second CPU threshold could be defined to indicate a severe CPU overload. The same goes for all of the overload thresholds. Each overload condition preferably includes one or more corresponding overload thresholds that allow the overload manager to determine the severity of the corresponding overload condition.

One suitable implementation for overload status and its corresponding status levels is shown in . The overload status includes three status levels namely green indicating no overload yellow indicating mild overload and red indicating severe overload. By providing multiple status levels the overload manager can determine the overload status of each subsystem and each condition in each subsystem on a scale that indicates the severity of a detected overload.

One suitable implementation for overload actions and its corresponding overload action levels is shown in . Overload actions specify actions according to the overload action levels . Overload action levels include low impact actions high impact actions and a shut down and fail to wire action. The overload actions may thus be arranged in a hierarchy that allows attempting low impact actions first to address an overload condition followed by a high impact action and if neither are successful in correcting the overload the appliance may be shut down. Note that shutting down the appliance requires that the absence of the appliance not negatively impact the other components in the mobile data network. Thus the appliance must shut down in a manner that its failure is invisible to the network after the failure occurs. This is referred to herein as fail to wire which means that shutting down the MIOP NodeB appliance will result in switches routing data from the downstream computer system to the upstream computer system and vice versa without interruption. In other words after the MIOP NodeB appliance is shut down it essentially disappears and does not negatively impact the performance of the remaining components in the mobile data network.

One suitable implementation for the overload agents and in is shown as overload agent in . The overload agent preferably includes an overload monitor and an overload status reporter . The overload monitor monitors performance in a subsystem and reports the overload status using the overload status reporter . Note this can be done in any suitable manner. In a first example the overload monitor determines performance parameters for a subsystem and reports those performance parameters to the overload manager. The performance parameters may related to any of the overload conditions such as those shown in to include CPU memory network breakout edge application and operating system. Not all of these parameters exist in all subsystems. For example breakout is done in the telco breakout subsystem so the overload agent in the telco breakout system will report overload with respect to breakout. Because the service processor and security subsystem do not perform breakout their respective overload agents and will not monitor or report any overload with respect to breakout. Each overload agent may monitor and report performance in its subsystem as relates to overload and will monitor and report based on things in its subsystem that need to be monitored for overload. The overload manager will compare the performance parameters received from the overload agents to the corresponding overload thresholds to determine when an overload occurs. In a second example the overload monitor determines performance parameters for a subsystem compares those performance parameters to defined overload conditions and thresholds and reports via the overload status reporter a status level for the subsystem such as green yellow or red . The system thus has flexibility in determining where the overload functions are performed.

Referring to examples of low impact actions are shown to include halting of breakout of new contexts notifying an edge application to refuse service for any new broken out contexts reducing frequency or priority of platform services agents and halting download of upgrades or new cache content. Referring to examples of high impact actions are shown to include offloading of broken out contexts to neighboring MIOP NodeBs shutting down or killing processes stopping breakout of existing sessions and shutting down an edge application.

Referring to method represents steps performed by the overload manager working in concert with the overload agents in each subsystem. The MIOP NodeB systems are monitored for overload step . When there is no overload step NO method loops back to step to continue monitoring for overloads. When an overload is detected step YES if there is a low impact action available for the detected overload step YES the low impact action is performed step . If the overload condition is corrected as a result of performing the low impact action step YES method loops back to step to continue monitoring for overloads. When the overload condition is not corrected by performing the low impact action step NO if there is a high impact action available step YES the high impact action is performed step . If performing the high impact action corrects the overload condition step YES method loops back to step to continue monitoring for overloads. When the overload condition is not corrected by performing the high impact action step NO the MIOP NodeB appliance is shut down and the fail to wire mechanism is activated step so data is passed directly from upstream components to downstream components without interruption and so data is passed directly from downstream components to upstream components without interruption. Note there may not always be both a low impact action and a high impact action for a detected overload. When there is no low impact action available step NO a check is made to see if there is a high impact action available step . If not step NO the appliance is shut down and fail to wire is activated step . The overload manager thus provides a hierarchy of actions that may be taken to address overload conditions in the MIOP NodeB appliance allowing the MIOP NodeB appliance to monitor itself for overload conditions and take appropriate steps to correct the overload conditions depending on the severity of the overload. In this manner the MIOP NodeB appliance is self monitoring and self healing to the greatest extent possible.

While the mobile data network in and discussed herein is in the context of a 3G mobile data network the disclosure and claims herein expressly extend to other networks as well including Long Term Evolution LTE networks flat RAN networks and code division multiple access CDMA networks.

As will be appreciated by one skilled in the art aspects of the present invention may be embodied as a system method or computer program product. Accordingly aspects of the present invention may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore aspects of the present invention may take the form of a computer program product embodied in one or more computer readable medium s having computer readable program code embodied thereon.

Any combination of one or more computer readable medium s may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device or any suitable combination of the foregoing. More specific examples a non exhaustive list of the computer readable storage medium would include the following an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory an optical fiber a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device or any suitable combination of the foregoing. In the context of this document a computer readable storage medium may be any tangible medium that can contain or store a program for use by or in connection with an instruction execution system apparatus or device.

A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein for example in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms including but not limited to electro magnetic optical or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate propagate or transport a program for use by or in connection with an instruction execution system apparatus or device.

Program code embodied on a computer readable medium may be transmitted using any appropriate medium including but not limited to wireless wireline optical fiber cable RF etc. or any suitable combination of the foregoing.

Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language Streams Processing language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

Aspects of the present invention are described herein with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and or block diagrams and combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer other programmable data processing apparatus or other devices to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer other programmable data processing apparatus or other devices to cause a series of operational steps to be performed on the computer other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

The methods disclosed herein may be performed as part of providing a web based service. Such a service could include for example offering the method to online users in exchange for payment.

The disclosure and claims are directed to a mobile data network that includes an appliance that performs one or more mobile data services in the mobile data network. The appliance breaks out data coming from a basestation and performs one or more mobile network services at the edge of the mobile data network based on the broken out data. The appliance has defined interfaces and defined commands on each interface that allow performing all needed functions on the appliance without revealing details regarding the hardware and software used to implement the appliance. The appliance includes overload detection and handling within the appliance. This appliance architecture allows performing new mobile network services at the edge of a mobile data network within the infrastructure of an existing mobile data network.

One skilled in the art will appreciate that many variations are possible within the scope of the claims. Thus while the disclosure is particularly shown and described above it will be understood by those skilled in the art that these and other changes in form and details may be made therein without departing from the spirit and scope of the claims.

