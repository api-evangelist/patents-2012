---

title: Image forming apparatus, image processing system, and computer program product
abstract: An image forming apparatus has a display device and a mechanically-configured operating unit, and enables use of a function implemented in an information processing apparatus via a network. The image forming apparatus includes: a remote function-displaying unit that obtains display information to display a visual interface of the function implemented in the information processing apparatus to display the visual interface on the display device; a remote operating unit that sends operation information indicating contents of an operation on the display screen to the information processing apparatus; and a mechanical operation detecting unit that obtains contents of an operation on the mechanically-configured operating unit. When the visual interface of the function implemented in the information processing apparatus is being displayed on the display device, the mechanical operation detecting unit sends mechanical operation information indicating the contents of the operation on the mechanically-configured operating unit to the information processing apparatus.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09262707&OS=09262707&RS=09262707
owner: RICOH COMPANY, LIMITED
number: 09262707
owner_city: Tokyo
owner_country: JP
publication_date: 20120716
---
The present application claims priority to and incorporates by reference the entire contents of Japanese Patent Application No. 2011 167102 filed in Japan on Jul. 29 2011.

The present invention relates to an image forming apparatus an image processing system and a computer program product and particularly relates to an operation operating an information processing apparatus which is provided for the purpose of adding a function to the image forming apparatus via an operating unit of the image forming apparatus.

In recent years there is a trend for promoting digitization of information. Hence image processing apparatuses such as a printer or a facsimile machine used to output digitized information or a scanner used to digitize a document have become indispensable. Such an image processing apparatus is often equipped with the imaging function the image forming function the communication function etc. and are thus configured as a multifunction peripheral that can be used as a printer a facsimile machine a scanner and a copying machine.

In order to equip such an image processing apparatus with various functions the image processing apparatus is typically integrated with an information processing apparatus and the function provided by the information processing apparatus is combined with the function implemented by the image processing apparatus. Thus for example an information processing apparatus performs optical character recognition OCR on an image generated by means of scanning in an image processing apparatus or an information processing apparatus stores an image which is generated by means of scanning in an image processing apparatus in a memory area provided over a network.

In such an image processing apparatus integrated manner with an information processing apparatus a user interface such as a hardware key and a display panel is connected to the information processing apparatus so that the image processing apparatus is controlled from the information processing apparatus.

On the other hand as a method to control the information processing apparatus from the image processing apparatus a method of using a remote desktop function is already known for example see Japanese Patent Application Laid open No. 2007 304881 .

In a configuration in which an image processing apparatus and an information processing apparatus are configured in an integrated manner the image processing apparatus and the information processing apparatus are paired on a one to one basis. However from the perspective of efficient use of hardware resources it is desirable that a single information processing apparatus is installed against a plurality of image processing apparatuses and that the single information processing apparatus can operate in tandem with the image processing apparatuses. In this case the image processing apparatuses are installed at different locations. Hence unlike the typical configuration a configuration in which an operating unit is connected to the information processing apparatus is hard to be adopted and an operating unit connected to the image processing apparatuses is preferably adopted.

If the technology disclosed in Japanese Patent Application Laid open No. 2007 304881 is used it becomes possible to operate the information processing apparatus using the operating unit connected to the image processing apparatus. However in the case of using the remote desktop function signals that can be communicated with the information processing apparatus are limited to only operation signals regarding screens that is operation signals caused by touching the display panel.

Therefore when the information processing apparatus is controlled using the remote desktop function it is neither possible to perform the operation using the hardware key nor to perform light emitting control of a light emitting diode LED that is installed in the operating unit. Thus in a system in which the image processing apparatus and the information processing apparatus operate in tandem if the operating unit that is connected to the image processing apparatus is used it becomes difficult to make use of all functions of the operating unit when controlling the function implemented by the image processing apparatus and the information processing apparatus in tandem.

There is a need to enable in a system in which an image processing apparatus and an information processing apparatus operate in tandem use of all functions of the operating unit even when controlling a function implemented by the image processing apparatus and the information processing apparatus in tandem and using an operating unit connected to the image processing apparatus.

It is an object of the present invention to at least partially solve the problems in the conventional technology.

An image forming apparatus has a display device which enables input of information by performing operation on a display screen thereof and a mechanically configured operating unit and enables use of a function implemented in a separately provided information processing apparatus via a network. The image forming apparatus includes a remote function displaying unit that obtains display information to display a visual interface of the function implemented in the information processing apparatus and that displays the visual interface on the display device a remote operating unit that according to an operation on the display screen displaying the visual interface sends operation information indicating contents of the operation to the information processing apparatus and a mechanical operation detecting unit that obtains contents of an operation on the mechanically configured operating unit. When the visual interface of the function implemented in the information processing apparatus is being displayed on the display device and the mechanical operation detecting unit obtains the contents of the operation on the mechanically configured operating unit the mechanical operation detecting unit sends mechanical operation information indicating the obtained contents of the operation to the information processing apparatus.

An image processing system includes an information processing apparatus that has an image processing function and an image processing apparatus that has a display device which enables input of information by performing an operation on a display screen thereof and a mechanically configured operating unit and that enables use of a function implemented in the information processing apparatus via a network. The image forming apparatus includes a remote function displaying unit that obtains display information to display a visual interface of the function implemented in the information processing apparatus and that displays the visual interface on the display device a remote operating unit that according to an operation on the display screen displaying the visual interface sends operation information indicating contents of the operation to the information processing apparatus and a mechanical operation detecting unit that obtains contents of an operation on the mechanically configured operating unit. When the visual interface of the function implemented in the information processing apparatus is being displayed on the display device and the mechanical operation detecting unit obtains the contents of the operation on the mechanically configured operating unit the mechanical operation detecting unit sends mechanical operation information indicating the obtained contents of the operation to the information processing apparatus. The information processing apparatus includes a remote display providing unit that sends the display information to display the visual interface of the function implemented in the information processing apparatus to the image forming apparatus in response to a request from the remote function displaying unit and a remote operation receiving unit that inputs an operation signal based on the operation information received from the remote operating unit to the function implemented in the information processing apparatus and that inputs an operation signal based on the mechanical operation information received from the mechanical operation detecting unit to the function implemented in the information processing apparatus.

A computer program product includes a non transitory computer usable medium having computer readable program codes of a control program of an image forming apparatus that has a display device which enables input of information by performing operation on a display screen thereof and a mechanically configured operating unit and that enables use of a function implemented in a separately provided information processing apparatus via a network. The program codes when executed causing a computer to execute a step of displaying that includes obtaining display information to display a visual interface of the function implemented in the information processing apparatus and displaying the visual interface on the display apparatus a step of sending according to an operation on the display screen displaying the visual interface operation information indicating contents of the operation to the information processing apparatus a step of obtaining contents of an operation on the mechanically configured operating unit and a step of sending when the visual interface of the function implemented in the information processing apparatus is being displayed on the display device and the contents of the operation on the mechanically configured operating unit are obtained mechanical operation information indicating the obtained contents of the operation to information processing apparatus.

The above and other objects features advantages and technical and industrial significance of this invention will be better understood by reading the following detailed description of presently preferred embodiments of the invention when considered in connection with the accompanying drawings.

An embodiment of the present invention is described below with reference to the accompanying drawings. In the present embodiment explanation is given for an example of an image processing system in which an image processing apparatus and an information processing apparatus are operated in tandem with the aim of implementing additional functions in the image processing apparatus and in which applications installed in an information processing apparatus can be operated using an operating unit that is connected to the image processing apparatus.

As illustrated in a system according to the present embodiment is caused to function by connecting a plurality of image forming apparatuses and hereinafter collectively referred to as image forming apparatus an additional function processing apparatus and a client terminal to each other via a network. In the network that connects the abovementioned equipments is for example a local area network LAN installed in an office.

The image forming apparatus is equipped with an imaging function an image forming function and a communication function and is thus configured as a multifunction peripheral MFP that can be used as a printer a facsimile machine a scanner and a copying machine. In the present embodiment the image forming apparatus operates in tandem with the additional function processing apparatus and thereby can make use of a function that is implemented by an application installed in the additional function processing apparatus .

The additional function processing apparatus serves as an information processing apparatus to realize an information processing function in cooperative processing with the image forming apparatus and that performs processing according to the application installed therein. Moreover in the present embodiment the additional function processing apparatus has a function of a remote desktop protocol RDP server to receive operation signals from the image forming apparatus and has a function to make use of functions of the operating unit that is connected to the image forming apparatus . This is one of key points of the present embodiment. Meanwhile the client terminal is an information processing terminal that is operated by the user and is put into practice using a personal computer PC or the like.

Explained below with reference to is a hardware configuration of the image forming apparatus the additional function processing apparatus and the client terminal . Regarding the image forming apparatus in addition to the hardware configuration illustrated in the image forming apparatus also includes an engine to serve as a scanner and a printer. In the following description although the hardware configuration of only the image forming apparatus is explained as an example the same example also applies to the other apparatuses.

As illustrated in the image forming apparatus according to the present embodiment has a configuration like a commonly used server a commonly used PC or the like. That is in the image forming apparatus according to the present embodiment a central processing unit CPU a random access memory RAM a read only memory ROM a hard disk drive HDD and an interface I F are connected to each other via a bus . Moreover to the I F are connected a liquid crystal display LCD and an operating unit .

The CPU is a computing unit that controls the overall operations of the image forming apparatus . The RAM is a volatile memory medium that allows high speed reading and writing and is used as a work memory by the CPU while processing information. The ROM is a read only type nonvolatile memory medium in which computer programs such as firmware are stored. The HDD is a nonvolatile memory medium that allows reading and writing of information and is used to store the operating system OS various control programs and various application programs.

The I F enables establishing connection between the bus and various hardware components or a network and controls the connection. The LCD is a visual user interface that enables a user to check the state of the image forming apparatus . The operating unit is a user interface such as a keyboard or a mouse that enables the user to input information to the image forming apparatus . In the present embodiment the operating unit of the image forming apparatus includes a display panel that is used to display an operating screen as a graphical user interface GUI a hardware key that is installed to enable general purpose information input and an LED to notify the user of a state of the image forming apparatus .

With such a hardware configuration a computer program that is stored in a memory medium such as the ROM the HDD or an optical disk not illustrated is loaded into the RAM . Then according to the computer program loaded into the RAM the CPU performs operations so that a software control unit is established. With a combination of the software control unit established in this way and a hardware component a functional block gets configured that enables implementation of a function of the image forming apparatus according to the present embodiment.

Explained below with reference to is a functional configuration of the image forming apparatus according to the present embodiment. is a block diagram of a functional configuration of the image forming apparatus according to the present embodiment. As illustrated in the image forming apparatus according to the present embodiment includes a controller an auto document feeder ADF a scanner unit a discharge tray a display panel a hardware key operating unit a paper feeding table a print engine a discharge tray and a network I F .

Further the controller includes a main control unit an engine control unit an image processing unit an operation display control unit an input output control unit and a document storing unit . As illustrated in the image forming apparatus according to the present embodiment is configured to be a multifunction peripheral including the scanner unit and the print engine . Meanwhile in electrical connection is illustrated with a solid line arrow while a flow of a paper sheet is illustrated with a dashed line arrow.

The display panel serves as an output interface that visually displays the state of the image forming apparatus . Besides the display panel also serves as a touch panel used as an input interface using which the user can directly operate the image forming apparatus or input information to the image forming apparatus . Thus the display panel is equipped with a function of displaying an image to receive a user operation. The hardware key operating unit is a mechanically configured operating unit that includes hardware keys that are pressed to input general purpose information such as a start key that is pressed to instruct a start of copying or scanning or a numerical keypad that is pressed to input numbers from 0 to 9 and LEDs that notify the user of the keys which can be pressed. The display panel and the hardware key operating unit are respectively put into practice using the LCD and the operating unit illustrated in .

The network I F serves as an interface that enables the image forming apparatus to communicate with other devices such as the client terminal and the additional function processing apparatus . As the network I F an Ethernet registered trademark interface or a universal serial bus USB interface is used. The network I F can perform communication using the TCP IP protocol. Moreover when the image forming apparatus serves as a facsimile machine the network I F serves also as an interface to perform facsimile transmission. For that reason the network I F is also connected to a telephone line. Herein the network I F is put into practice using the I F illustrated in .

The controller is configured by a combination of software and hardware. More specifically a control unit gets configured with a software control unit established by loading a computer program that is stored in the ROM a nonvolatile memory the HDD or a nonvolatile memory medium such as an optical disk not illustrated into a volatile memory such as the RAM hereinafter referred to as memory and then performing operations by the CPU according to that computer program and a hardware component such as an integrated circuit. The controller serves as a control unit to control overall operations of the image forming apparatus .

The main control unit fulfills a role of controlling each unit included in the controller and issues a command to each unit of the controller . The engine control unit fulfills a role of a driving unit to control or drive the print engine and the scanner unit . The image processing unit operates under the control of the main control unit and generates drawing information based on information on an image to be printed. The drawing information represents the information that is used by the print engine which serves as an image forming unit to draw an image to be formed during an image forming operation.

The image processing unit processes imaging data that is input from the scanner unit and generates image data. This image data is information that is as a result of performing a scanner operation either stored in a memory area of the image forming apparatus or is transmitted to another information processing terminal or another memory device.

The operation display control unit performs information display on the display panel lighting control of LEDs installed in the hardware key operating unit and so on and notifies the main control unit of information input via the display panel and the hardware key operating unit . The input output control unit inputs to the main control unit information that has been input through the network I F . The main control unit controls the input output control unit and accesses through the network I F and via the network the additional function processing apparatus and other devices connected to the network.

When the image forming apparatus serves as a printer firstly the input output control unit receives a print job through the network I F . Then the input output control unit transfers the received print job to the main control unit . Upon receiving the print job the main control unit controls the image processing unit and causes the image processing unit to generate drawing information based on the document information or image information included in the print job.

Once the drawing information is generated by the image processing unit the engine control unit controls the print engine in such a way that based on the drawing information that has been generated in the above the print engine performs image formation on the paper sheet fed from the paper feeding table . Thus the image processing unit the engine control unit and the print engine serve as an image forming output unit. As a specific configuration of the print engine it is possible to use an ink jet image forming mechanism or an electrophotographic image forming mechanism. Meanwhile a document that is obtained as a result of the image formation by the print engine is discharged to the discharge tray .

When the image forming apparatus serves as a scanner in response to a scan execution instruction that is input by the user by operating the display panel or the hardware key operating unit or is input from another terminal such as the client terminal through the network I F the operation display control unit or the input output control unit transfers a scan execution signal to the main control unit . Then based on the received scan execution signal the main control unit controls the engine control unit .

The engine control unit drives the ADF to convey a original to be imaged which is set in the ADF to the scanner unit . Moreover the engine control unit drives the scanner unit and performs imaging of the original conveyed from the ADF . If the original is not set in the ADF but is directly set in the scanner unit then the scanner unit performs imaging of that original under the control of the engine control unit . Thus the scanner unit serves as an imaging unit while the engine control unit serves as a reading control unit.

During an imaging operation an imaging element such as a charge coupled device CCD installed in the scanner unit optically scan an original. As a result imaging information gets generated based on optical information. The engine control unit transfers the imaging information which is generated by the scanner unit to the image processing unit . Then under the control of the main control unit the image processing unit generates image information based on the imaging information received from the engine control unit .

The main control unit obtains the image information generated by the image processing unit and stores it in a memory medium installed in the multifunctional peripheral such as the HDD . Thus the scanner unit the engine control unit and the image processing unit operate in tandem as an image input unit. According to an user instruction the image information that is generated by the image processing unit is either stored in the HDD or the like or is transmitted to an external apparatus such as the additional function processing apparatus or the client terminal through the input output control unit and the network I F .

When the image forming apparatus serves as a copying machine the image processing unit generates drawing information based on the imaging information that is received by the engine control unit from the scanner unit or based on the image information generated by the image processing unit . Then based on the drawing information the engine control unit drives the print engine like in a printing operation. Meanwhile if the drawing information and the imaging information are in the same information format the imaging information can be used as drawing information without modification.

According to the present embodiment the image forming apparatus communicates information with the additional function processing apparatus and implements a function that is installed in the additional function processing apparatus . For example in order to store the image information which is generated by scanning in a file server of a cloud system provided through a network the image forming apparatus sends the image information as well as a store request to the additional function processing apparatus . Moreover in order to display a list of image information which is stored in a cloud system on the display panel and to enable printing of that image information the image forming apparatus issues a get request to obtain the list of image information to the additional function processing apparatus . Then the image forming apparatus receives the list of image information obtained by and transferred from the additional function processing apparatus and displays that list on the display panel

Explained below with reference to is a software configuration of the main control unit designed for the purpose of implementing the abovementioned functions of the image forming apparatus . As illustrated in various applications and platform are included in the software configuration of the main control unit . The applications and the platform are executed in parallel and in units of process by an OS such as UNIX registered trademark . Each of the applications represents the software used to perform information processing unique to one of the functions of the multifunctional peripheral .

The applications include a copying application written for a copying machine a printing application written for a printer a scanning application written for a scanner a faxing application written for facsimile a document box application that provides a function of storing a scanning result into the additional function processing apparatus and an RDP client application that provides the remote desktop protocol RDP function to enable operations of the additional function processing apparatus via the image forming apparatus .

The platform is software to perform information processing related to a processing request issued from the applications to the various hardware components such as the display panel and the network I F . For the purpose of receiving a processing request from the applications an application programming interface API is used in which the processing request is received using a predefined function. For the purpose of issuing a processing request to the hardware component an engine interface ENI is used in which the processing request is issued using a predefined function.

The platform includes various control services a system resource manager SRM and various handlers . The control services interpret the processing request issued from the applications to the hardware components and generate a use request to use a hardware component according to a result of interpretation.

The control services include a network control service NCS a facsimile control service FCS a delivery control service DCS an engine control service ECS a memory control service MCS an operation control service OCS a user directory control service UCS a system control service SCS and an on demand update service OUS .

The process of the NCS provides an API to perform data communication via a network or the like. A process of the FCS provides an API to perform image data communication image data obtaining image data printing etc. as a facsimile machine. A process of the DCS performs control related to distribution of document data stored in the multifunctional peripheral . A process of the ECS performs control related to the engine of an imaging unit or a printing unit . A process of the MCS performs control related to a memory or a hard disk drive such as image data storing and image data processing. A process of the OCS performs control related to the display panel and the hardware key operating unit

A process of the UCS performs control related to management of user information. A process of the SCS performs control related to system management. A process of the OUS performs control related to computer program update. The SRM arbitrates between use requests to use the hardware component and according to an arbitration result performs control to implement a processing request with respect to the hardware component. More particularly A process of the SRM determines whether or not a hardware component related to a use request is usable i.e. whether or not another use request competes for that hardware component . If the hardware component is usable the process of the SRM notifies the control services of this. Moreover the process of the SRM creates a usage schedule for the hardware component related to the use request and performs control to implement processing requests with respect to the hardware component according to the usage schedule.

The handlers manage the hardware component according to an arbitration result mentioned above. The handlers include a facsimile control unit handler FCUH and an image memory handler IMH . The FCUH manages a facsimile control unit. The IMH allocates memory to each process and manages each memory to which a process is allocated. A multifunctional peripheral starting unit is run initially when the power of the multifunctional peripheral is switched ON. As a result an OS such as UNIX registered trademark is started and the applications and the platform are started.

Upon detecting a user operation performed with respect to the hardware key via the operation display control unit the OCS refers to the hardware key identification table and obtains the identifier of the hardware key that has been operated. Meanwhile the information regarding identifiers included in the hardware key identification table is also registered in the additional function processing apparatus . Thus by communicating the identifier obtained in the manner above described the image forming apparatus and the additional function processing apparatus can perform an action in response to an operation to the hardware key operating unit and control of the hardware key operating unit in tandem.

Explained below with reference to is a functional configuration of the additional function processing apparatus according to the present embodiment. As illustrated in the additional function processing apparatus according to the present embodiment includes a controller and a network I F . The controller includes an input output control unit an application an RDP server and an image forming apparatus communication module .

The network I F serves as an interface through which the additional function processing apparatus can communicate with other apparatuses such as the image forming apparatus and the client terminal via a network. As the network I F an Ethernet registered trademark interface or a USB interface is used.

The controller is configured with a combination of software and hardware. More specifically a control unit gets configured with a software control unit established by loading a computer program that is stored in a memory medium such as the ROM a nonvolatile memory the HDD or a nonvolatile memory medium such as an optical disk into a volatile memory such as the RAM hereinafter referred to as memory and then performing operations by the CPU according to that computer program and a hardware component such as an integrated circuit. The controller serves as a control unit to control overall operations of the additional function processing apparatus .

The input output control unit controls network communication performed through the network I F . Moreover the input output control unit has a function of monitoring unauthorized access or a virus coming from the Internet and maintaining a secure state. The application is a software module to implement an additional function by operating in tandem with the image forming apparatus . Explained below with reference to is the function implemented by the application according to the present embodiment.

As illustrated in according to the present embodiment the application installed in the additional function processing apparatus includes an image transfer client application and an optical character recognition OCR application . The image transfer client application provides a function by which the image information generated in the image forming apparatus by means of scanning is stored in a file server of a cloud system provided through a network hereinafter referred to as scan to cloud function a function by which image information stored in a file server of a cloud system is obtained and sent as a print job to the image forming apparatus hereinafter referred to as cloud to print function etc. The OCR application provides a function by which a character represented by an image included in the image information which is generated in the image forming apparatus by means of scanning is recognized and character information is generated.

The RDP server is a module to implement the remote desktop function and communicates information with the RDP client application running in the image forming apparatus . When the remote desktop function is enabled the RDP server sends image information of a graphical user interface GUI provided by the application to the image forming apparatus in which the RDP client application is running.

Moreover the RDP server obtains from the image forming apparatus and via the network information indicating contents of an operation on the display panel and detected by the RDP client application running in the image forming apparatus and informs the application of the obtained information. Using this function of the RDP server it becomes possible to perform an operation regarding the application using the operating unit of the image forming apparatus .

When the remote desktop function is enabled the image forming apparatus communication module provides a function that enables performing an operation regarding the application by an operation to the hardware key operating unit and that enables performing control of the hardware key operating unit depending on an operating state of the application . The image forming apparatus communication module stores therein the identifiers that are specified in the hardware key identification table. Thus when the identifier is received from the image forming apparatus the image forming apparatus communication module identifies the hardware key that has been operated based on the received identifier.

Consider a case of performing control of the hardware key operating unit depending on the operating state of the application . For example consider a case of turning ON an LED of a start key. In that case the image forming apparatus communication module specifies the identifier indicating the hardware key to be controlled and issues a command to the image forming apparatus . With this function of the image forming apparatus communication module when implementing the function of the application from the image forming apparatus by means of the remote desktop function it becomes possible to make use of the key or LED installed in the hardware key operating unit

As illustrated in the application that is installed in the additional function processing apparatus is registered in the image forming apparatus at the time of starting up the additional function processing apparatus then it becomes possible to use the application via the image forming apparatus . Explained below with reference to is an operation performed at the time of starting up the additional function processing apparatus . As illustrated in when the additional function processing apparatus is started by switching the power ON S the image forming apparatus communication module starts communicating with the control services of the image forming apparatus S .

Upon starting the communication with the control services of the image forming apparatus the image forming apparatus communication module notifies the image forming apparatus of the application installed in the additional function processing apparatus that is the image transfer client application and the OCR application S . In the image forming apparatus upon receiving notification of the application from the additional function processing apparatus the main control unit stores the function of the notified application in a memory area such as the RAM to register that function S . Thereby the operation is completed. As illustrated in when a plurality of image forming apparatuses to is connected to a network the additional function processing apparatus performs an operation as illustrated in in tandem with each of those image forming apparatuses to

By performing the operation as illustrated in the function implemented in the additional function processing apparatus is registered in the image forming apparatus and is displayed in a selectable manner on the display panel of the image forming apparatus . illustrates an example of a function selection screen that is displayed on the display panel of the image forming apparatus . As illustrated in in the function selection screen of the image forming apparatus according to the present embodiment various buttons are displayed that enable selection of a function such as copy scan fax print document box scan to cloud and cloud to print . The function selection screen is displayed under the control of the main control unit . That is the control services running in the main control unit serve as a function selection screen displaying unit.

Of the functions illustrated in copy scan fax print and document box are implemented by the applications installed in the image forming apparatus as illustrated in . On the other hand the functions scan to cloud and cloud to print are implemented by the image transfer client application installed in the additional function processing apparatus .

In this way the image forming apparatus is not limited to a configuration in which applications and functions are registered while being associated with each other on a one to one basis. Rather when a single application implements a plurality of functions the image forming apparatus registers all those functions. Meanwhile the OCR application is not used in a stand alone manner but is used as an option of the scan function or the scan to cloud function. Thus the OCR application is not registered as a stand alone function but is registered as an optional setting function of the scan function or the scan to cloud function.

When the scan to cloud function is selected the RDP client application is run in the image forming apparatus . At that time if the hardware key operating unit is operated then contents of this operation are notified to the additional function processing apparatus via the control services . Meanwhile the application registration table illustrated in is generated by performing the operation at S illustrated in . That is the main control unit serves as a remote function storing unit to store the application registration table in a memory medium.

In the image forming apparatus and the additional function processing apparatus described above a key point of the present embodiment relates to controlling the hardware key operating unit when the remote desktop function is enabled that is when the RDP client application is running in the image forming apparatus . Explained below is an operation performed regarding that key point.

A request for the screen information at S also contains information to specify an application that corresponds to the function selected at S. Based on the information explained with reference to the main control unit identifies the application that corresponds to the function selected at S. In the additional function processing apparatus the RDP server receives the request for the screen information from the image forming apparatus and sends the screen information of the GUI of the specified application to the RDP client application S . Thus the RDP server serves as a remote display providing unit. If the specified application is not yet started an operation performed at S also includes starting that application. Thus at S the RDP client application also serves as a remote function starting unit.

The RDP client application receives screen information from the RDP server and instructs the operation display control unit to display the screen information on the display screen of the display panel S . Thus the RDP client application serves as a remote function displaying unit. This enables the user to check the screen displayed on the display panel and to perform a touch operation to operate the application which is installed in the additional function processing apparatus via the image forming apparatus . Herein operations for various settings of the scan to cloud function are performed.

When the operation with respect to the GUI displayed on the display panel is received by the RDP client application of the main control unit via the operation display control unit S the RDP client application notifies the RDP server of the additional function processing apparatus of information on the received operation S . Thus the RDP client application serves as a remote operating unit. Upon receiving the notification of the operation information from the image forming apparatus the RDP server performs operation control on the application according to the informed operation information S . Thus the RDP server serves as a remote operation receiving unit. Herein the application is informed of a parameter that is set on the GUI which is displayed on the display panel of the image forming apparatus and that parameter is stored in the application .

As a result of the operation at S if there is a change in display of the GUI of the application then the RDP server sends information on the changed screen of the GUI of the application that has been operated to the RDP client application of the image forming apparatus S . Then in the image forming apparatus the RDP client application updates the display on the display panel according to the screen information received from the RDP server S .

Moreover in response to change in the operation state of the application as a result of the operation at S if there arises a need to perform control of the hardware key operating unit such as turning ON an LED installed in the hardware key operating unit of the image forming apparatus then the image forming apparatus communication module notifies the main control unit of the image forming apparatus about the control state S . Thus the image forming apparatus communication module serves as a control information sending unit to send control information to control the mechanically configured operating unit. Notification sent at S contains an identifier explained with reference to . With that identifier a control target such as an LED is identified.

In the image forming apparatus that receives notification of the control state from the image forming apparatus communication module the control services running in the main control unit control a device in the hardware key operating unit identified by the identifier S . Thus the control services running in the main control unit serve as a mechanical operation control unit. As a result in the hardware key operating unit the LED indicating that effect of the start key has been enabled is turned ON. That is even for the function implemented by the additional function processing apparatus a user interface can be realized by the function of the hardware key operating unit . This makes it possible to enhance user friendliness.

In such a state if a key installed in the hardware key operating unit such as the start key is pressed the main control unit accepts this operation with respect to the hardware key operating unit S and notifies the image forming apparatus communication module of the additional function processing apparatus of contents of that operation S . Thus the control services running in the main control unit serve as a mechanical operation detecting unit. Notification at S contains the identifier explained with reference to . With that identifier the hardware key that has been operated is identified. Herein explanation is given for an example in which the start key is pressed which instructs start of scanning in the scan to cloud function.

Upon receiving notification of information on the operation of the hardware key operating unit from the image forming apparatus the image forming apparatus communication module recognizes that the hardware key is pressed based on the abovementioned identifier and notifies the application of the same. As a result the application becomes a standby state to perform the scan to cloud function. Then to the image forming apparatus the image forming apparatus communication module issues a scan execution request to generate by means of scanning image information that is to be stored in a file server provided by cloud service S .

In the image forming apparatus that receives the scan execution request from the additional function processing apparatus the main control unit performs scanning by controlling the units and sends the resultant image information to the image forming apparatus communication module of the additional function processing apparatus S . Upon receiving the image information that is generated by means of scanning in the image forming apparatus the additional function processing apparatus inputs the received image information to the application . Then on the input image information the application performs image processing according to the set parameter that is set by the operation at S and S and sends the processed image information to the file server provided by the cloud service S .

As a result of the operation performed at S when there occurs a change in the GUI the RDP server sends the screen information to the RDP client application of the image forming apparatus S . Consequently in the image forming apparatus the RDP client application updates the display on the display panel according to the screen information received from the RDP server S . Thereby the operation of the scan to cloud function for one time is completed.

As a result of the above operation a function concerning the key point of the present embodiment is fulfilled in which the function that is implemented in the additional function processing apparatus is controlled via the hardware key operating unit that is connected to the image forming apparatus and the hardware key operating unit is controlled according to the implementation state of the function of the additional function processing apparatus . Explained below in detail with reference to are an operation performed by the main control unit when the hardware key operating unit of the image forming apparatus is operated at S illustrated in .

As illustrated in the hardware key operating unit is operated S and the main control unit detects via the operation display control unit an operation on the hardware key operating unit . Then the main control unit checks an owner application that is being currently displayed on the display panel in other words checks which application has its GUI currently displayed on the display panel . That is the main control unit checks the screen owner of the display panel in other words checks what a screen displayed on the display panel is used for S .

As explained with reference to the main control unit includes a plurality of applications. Thus the application that corresponds to the function selected by the user serves as the screen owner and the GUI of that application is displayed on the display panel . Thus the main control unit can check which application is being currently selected as the screen owner.

As a result of checking at S if the RDP client application is found to be the screen owner YES at S the main control unit sends a hardware key operation signal indicating that the hardware key is operated to the additional function processing apparatus based on the table explained with reference to S . Thereby the operation is completed. Meanwhile operation information sent at S contains the identifier explained with reference to .

On the other hand as a result of the checking at S if an application other than the RDP client application is found to be the screen owner NO at S the main control unit sends the operation signal to the application that is the screen owner based on the table explained with reference to S . Thereby the operation is completed. With this operation performed by the main control unit when the remote desktop function is enabled the operation information of the hardware key operating unit is sent to the additional function processing apparatus and when an application that can be run only by the image forming apparatus is selected the operation information of the hardware key operating unit is sent to that application.

Explained below with reference to is an operation performed when there is a failure in displaying a screen using the remote desktop function. In a case of a system in which the commonly used remote desktop function is used the application installed on the RDP server cannot determine whether or not a screen is being correctly displayed in the image forming apparatus in which the RDP client application is running.

More specifically the application installed on the RDP server does not recognize whether the GUI is displayed on a display device connected to the additional function processing apparatus or on the display panel of the image forming apparatus via the RDP server and the RDP client application . Therefore irrespective of whether an error occurs in the remote desktop function the application runs under the assumption that the GUI is displayed in a correct manner. With regards to such an issue the image forming apparatus communication module according to the present embodiment includes a unit to notify the application of when a screen is not correctly displayed when the remote desktop function is used.

As illustrated in an application starts in the image forming apparatus S and the RDP server sends screen information in response to a request for image information issued by the RDP client application S . Then as described above the RDP client application of the image forming apparatus performs an operation of displaying a screen. Thereat if the RDP client application detects failure of the operation of displaying the screen S the main control unit displays an error dialogue on the display panel S . Herein besides displaying an error dialogue on the display panel an operation performed at S may also include an operation of turning ON an LED installed in the hardware key operating unit

Then the main control unit performs an error notification indicating the failure of the operation of displaying the screen to the image forming apparatus communication module of the additional function processing apparatus S . Thus the control services running in the main control unit serve as an error information sending unit. Upon receiving the error notification from the image forming apparatus the image forming apparatus communication module notifies the application of the error. Thus the image forming apparatus communication module serves as an error notifying unit. Consequently the application performs predetermined error processing corresponding to a screen display error S . As a result of performing such an operation the application becomes able to recognize an error in displaying the screen by the remote desktop function and becomes able to perform error processing corresponding to the errors.

As described above in the image forming apparatus according to the present embodiment when the hardware key operating unit is operated the main control unit recognizes the screen owner of the display panel . If the main control unit determines that the application providing the remote desktop function is the screen owner that is if the RDP client application according to the present embodiment is the screen owner then the main control unit sends operation information to the image forming apparatus . The operation information contains an identifier that is set in common among the image forming apparatus and the additional function processing apparatus . With such a configuration the function of the application that is installed in the additional function processing apparatus can be implemented by operating the hardware key operating unit that is connected to the image forming apparatus .

Moreover in the additional function processing apparatus according to the present embodiment the image forming apparatus communication module generates a control signal to control the hardware key operating unit according to the operating state of the application and sends the control signal to the image forming apparatus . The control signal contains the identifier that is set in common among the image forming apparatus and the additional function processing apparatus . With such a configuration according to the operating state of the application installed in the additional function processing apparatus it becomes possible to control the hardware key operating unit connected to the image forming apparatus and to perform an operation such as turning ON the LED.

In this way in a system according to the present embodiment in which the image forming apparatus and the additional function processing apparatus operate in tandem as an image processing apparatus and an information processing apparatus respectively even when operating an operating unit connected to the image processing apparatus all functions of the operating unit can be used when controlling the function performed in tandem with the information processing apparatus.

Meanwhile in the present embodiment as illustrated in explanation is given for the example in which a single additional function processing apparatus has a plurality of image forming apparatuses connected thereto via the network. However this is not the only possible case. Alternatively the additional function processing apparatus and the image forming apparatus can be paired on a one to one basis. Even in this case by adopting the configuration according to the present embodiment it becomes possible to use the operating unit that is connected to the image processing apparatus. This eliminates a need to manufacture an operating unit which is to be connected to the additional function processing apparatus in accordance with the image processing apparatuses.

In the present embodiment the remote desktop protocol RDP is explained to be used to operate the additional function processing apparatus from the image forming apparatus . However any other technology such as virtual network computing VNC that provides the remote desktop function can also be used.

In this way according to an embodiment of the present invention in a system in which an image processing apparatus and an information processing apparatus operate in tandem all functions of the operating unit can be used even when controlling the function implemented by the image processing apparatus and the information processing apparatus in tandem and using an operating unit connected to the image processing apparatus.

Although the invention has been described with respect to specific embodiments for a complete and clear disclosure the appended claims are not to be thus limited but are to be construed as embodying all modifications and alternative constructions that may occur to one skilled in the art that fairly fall within the basic teaching herein set forth.

