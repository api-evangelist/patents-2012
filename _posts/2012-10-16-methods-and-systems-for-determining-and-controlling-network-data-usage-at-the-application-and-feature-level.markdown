---

title: Methods and systems for determining and controlling network data usage at the application and feature level
abstract: An operating system of a computing device can include or operate in conjunction with a data usage service. The data usage service can determine the network data usage of applications and features of the applications and attribute the network data usage to the specific application and features of the specific application responsible for the network data usage. The data usage service can utilize the determined network data usage in order to control and adapt the network behavior of the application and features of the application.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09160790&OS=09160790&RS=09160790
owner: Google, Inc.
number: 09160790
owner_city: Mountain View
owner_country: US
publication_date: 20121016
---
This application claims priority to U.S. Provisional Patent Application Serial Nos. 61 548 189 filed Oct. 17 2011 and 61 611 697 filed on Mar. 16 2012 the disclosures of which are incorporated in their entirety by reference herein.

This disclosure relates generally to determining and controlling the usage of network data bandwidth in computing devices.

The classification of network data flows on the Internet backbone has helped provide an insight into the trends of network usage over time based on applications devices geographies and network types. Such efforts to study and control the network usage behavior relate to and are often aggregated over a large number of users on the Internet. Current computing devices however do not provide fine grained visibility and control of network usage patterns on individuals computing device where the network data flows originate.

There has been an exponential growth in the number of Internet connected devices in the past decade. For example mobile devices such as cellular telephones tablet computers laptops etc. are increasingly using wireless networks to send and receive data. In the past wireless network providers allowed unlimited data plans that charged a flat rate for sending and receiving data over the wireless network. The explosive growth in the data transmitted over the wireless network by mobile devices has led to the replacement of unlimited data plans with pay per use plans. These pay per use plans require that the users of the mobile devices pay by bandwidth used for example by the rate for GigaBytes GB per Month for typical cellular telephone plans and the rate for MegaBytes MB Hour for WiFi hotspots. This move towards pay per use plans has adversely affected users because of the overage charges that are incurred when a user unexpectedly exceeds the monthly quota of download and upload limits. Similarly wired network providers may also offer plans which include quotas on network data usage.

More and more applications e.g. social networking online gaming news weather used by mobile devices rely on sending and receiving data over the wireless networks. Some applications may cause excessive usage of the network and thus cause the user to incur large and sometimes unexpected charges. Some governments are imposing rules that require wireless network providers to warn the user when such limits are being approached or exceeded. But from the user s perspective it is not clear which application or feature of the application is causing the data usage in the wireless network.

The problem of attributing the data usage of an application is further complicated by the fact that sometimes separate applications e.g. a mediaserver download manager or the operating system OS on the mobile device provide a network data exchange service to the application. To correctly account for data usage by the application it becomes important to correctly attribute data usage to the application requesting the network data exchange service and not the separate application providing the network data exchange service. Likewise to control data usage limits need to be imposed on the application requesting the network data exchange service and not the separate application providing the network data exchange service.

Conversely from an application developer s point of view it is important to profile the data usage of their application. Because data exchanged over the network has an associated overhead in terms of the system setup costs e.g. battery and cpu usage and protocol overheads at each layer of the networking stack e.g. hypertext transfer session HTTP session transmission control protocol TCP handshake and transmission control protocol internet protocol TCP IP headers for each packet the ability to profile control and adapt the behavior of an application based on a data usage can be extremely useful for application developers. Applications however can themselves not determine how much data they are using as the payload they want to transfer actually incurs an overhead caused by the protocols used. For example some applications will request a secure HTTP HTTPS connection to a server but the applications cannot determine how much extra data is used to establish a secure connection. Likewise applications will use a connection for different types of transfers which don t all have the same importance for example speculatively pre fetching the attachments of unread emails versus getting the actual subject lines needed to notify the user of an available email. In all these cases it is difficult for the developer to know which parts of the application need to avoid costly traffic and difficult for the end user to apply limitations on specific portions of an application s traffic.

Some OSes e.g. Unix and Linux derived OSes offer network filtering and quota handling at a coarse level. The OSes allow determining on specific networking interfaces set quota limits that cut off traffic on the interfaces allow filtering specific users and specific protocols. Additionally on mobile devices some tools exist that will determine data usage globally for all applications as a whole. Data usage selecting notifying apps can then disable access to the network for all applications when a certain quota is exceeded by all the applications combined. But none of the these tools and applications are able to distinguish which application or part of an application is causing the data usage and when those applications are using services like Download Managers. Due to this ambiguity tools and applications cannot attribute the data usage to a specific application or parts of the applications. Accordingly it impossible to set a quota on a specific application and on specific parts of the applications.

This inability to attribute network data usage exists for any type of computing device running applications whether mobile computing devices or other types of computing devices such as a desktop computer a set top box a gaming console etc. Likewise the need to determine data usage can apply to any type of computing device and to any network whether wireless or wired.

Accordingly there is a need for determining controlling adapting and reporting data usage for specific application and features of applications that are running on computing devices and exchanging data with networks.

Embodiments of the present teachings relate to a method for determining and controlling network data usage in a computing device. The method includes receiving a request to establish a connection across a network by an application executing on the computing device. The method further includes identifying a communication channel of the connection to be utilized by the application to exchange data over the network and associating a tag with the communication channel wherein the tag identifies the application or features of the application and identifies a policy governing data being exchanged over the network. Additionally the method includes determining an amount of data exchanged over the communication channel. The method also includes storing the amount of the data exchanged in a record associated with the tag.

Embodiments of the present teachings also relate to a computer readable storage medium embodying instructions for causing a processor to perform a method. The method includes receiving a request to establish a connection across a network by an application executing on the computing device. The method further includes identifying a communication channel of the connection to be utilized by the application to exchange data over the network and associating a tag with the communication channel wherein the tag identifies the application or features of the application and identifies a policy governing data being exchanged over the network. Additionally the method includes determining an amount of data exchanged over the communication channel. The method also includes storing the amount of the data exchanged in a record associated with the tag.

Embodiments of the present teachings also relate to a computing device for determining and controlling network data usage. The computing device includes a processor and a computer readable storage medium coupled to the processor and comprising instructions for causing the processor to perform a method. The method includes receiving a request to establish a connection across a network by an application executing on the computing device. The method further includes identifying a communication channel of the connection to be utilized by the application to exchange data over the network and associating a tag with the communication channel wherein the tag identifies the application or features of the application and identifies a policy governing data being exchanged over the network. Additionally the method includes determining an amount of data exchanged over the communication channel. The method also includes storing the amount of the data exchanged in a record associated with the tag.

For simplicity and illustrative purposes the principles of the present teachings are described by referring mainly to examples of various embodiments thereof. However one of ordinary skill in the art would readily recognize that the same principles are equally applicable to and can be implemented in all types of information and systems and that any such variations do not depart from the true spirit and scope of the present teachings. Moreover in the following detailed description references are made to the accompanying figures which illustrate specific examples of various embodiments. Electrical mechanical logical and structural changes can be made to the examples of the various embodiments without departing from the spirit and scope of the present teachings. The following detailed description is therefore not to be taken in a limiting sense and the scope of the present teachings is defined by the appended claims and their equivalents.

Embodiments of the present teachings relate to systems and methods for determining profiling controlling and adapting network data usage and associated cost in an intelligent and granular fashion. According to embodiments an operating system OS of a computing device can include or operate in conjunction with a data usage service. The data usage service can determine the network data usage of applications and features of the applications and attribute the network data usage to the specific application and features of the specific application responsible for the network data usage. By determining the network data usage to specific applications and features of the specific applications the data usage service can obtain a true picture of the network usage by the applications of the computing device. Likewise the data usage service can control and adapt the network data usage of specific applications to prevent overages in network data usage while allowing greater flexibility in data usage by important or desired applications or features.

As illustrated the computing device can be any type of computing device that can run and execute applications . For example the computing device can be a cellular telephone a personal digital assistant a tablet computer a media player device a laptop computer a thin client computer a desktop computer a server computer a set top box e.g. cable or satellite a game console or other conventional computing devices. The computing device can include hardware found in conventional computing devices such as one or more processors computer readable storage media e.g. volatile and non volatile memory storage devices etc. network hardware e.g. wired network cards wireless networks cards radio receivers and transmitters video hardware and input output hardware.

The computing device can communicate with the networks utilizing the network hardware of the computing device . The networks can be any types of networks whether wired or wireless that supports the exchange of data between computing devices. While the following description describes that computing device can communicate with multiple networks one skilled in the art will realize that the computing device can communicate with any number of networks whether one or more.

The computing device can store and execute an operating system OS . The OS can include one or more software programs and modules that manage the hardware resources of the computing device . The OS can provide common services for the applications . The OS can be any type of known proprietary and or open source operating system that can be stored on one or more of the computer readable storage media of the computing device and that can be executed by the computing device .

During execution the applications can connect to one or more of the networks and exchange data with the networks . For example an email application can send and receive emails via one or more of the networks a web browser application can access websites via one or more of the networks a media player can download media files via one or more of the networks and the like.

Due to various reasons the computing device a user of the computing device or both can desire to determine and control the usage of one or more of the networks by the applications to send and receive data. For example if the computing device is charged a fee for exchanging data with one or more of the networks the computing device or a user of the computing device can desire to determine and control the network data usage of the applications in order to identify and control the cost of using the networks . Likewise for example the computing device or a user of the computing device can desire to determine and control the network data usage of the applications to optimize the connections to the networks for the applications . One skilled in the art will realize that the computing device and users of the computing device can desire to determine and control network data usage for any number of reasons.

According to embodiments the computing device can include a data usage service . The data usage service can determine the network data usage of applications and features of the applications when exchanging data with the networks . The data usage service can attribute the network data usage to the applications and features of the applications responsible for the network data usage. By determining the network data usage of the applications and features of the applications the data usage service can obtain a true picture of the network usage by the applications running on the computing device . Likewise the data usage service can control and adapt the network data usage of the applications and features of the applications to prevent overages in network data usage while allowing greater flexibility in network data usage by the applications . Additionally the users of the computing device can obtain a complete picture of network data usage by the applications and features of the applications when exchanging data with the networks .

The data usage service can be implemented as one or more software programs modules or both that are configured to be executed by the computing device to perform the processes as described herein. The data usage service or parts of the data usage service can be implemented as a portion of other software programs such as the OS . Likewise the data usage service or parts of the data usage service can be implemented as stand alone software programs modules or both. In any implementation the data usage service can be configured to include the necessary logic commands instructions and protocols to perform the processes described herein. In any implementation the data usage service can be written in any type of conventional open source and or proprietary programming language. Copies of the data usage service can be stored on one or more of the computer readable storage media of the computing device .

According to embodiments the data usage service can determine control and adapt an overall network data usage of one or more of the applications and features of the applications . The data usage service can uniquely associate a communication channel used by the applications or features of the applications with an identification of the applications and features of the applications and any policies that govern the applications and features network data usage. The communication channel can be any type of logical communication channel that the applications utilize to exchange data with the networks . For example the communication channels can be network sockets used by the applications or other levels of application programming interface API abstractions.

When an application and features of the application requests a network connection to one of the networks the data usage service can associate one or more tags with a communication channel created for the application and the features of the application to exchange data over the network connection. The one or more tags can uniquely identify the application and the features of the application and any policies that govern the application s or feature s network data usage.

When the data is received at the communication channel the data usage service can label the data with one or more tags associated with the communication channel. The data usage service can then determine an amount of the data received at the communication channel and record the amount of the data in one or more data usage records associated with the one or more tags. The same procedure can be performed for each of the applications or features of the applications as each of the applications or features of the applications requests a network connection and a communication channel is created. As such the data usage service can identify and determine the network data usage by each of the applications or features.

According to embodiments the data usage records can be any type of data structure that can be associated with a tag and the one or more networks used to exchange data and that can store the amount of the data exchanged with the networks . The data usage records can be stored on one or more of the computer readable media of the computing device .

According to embodiments a policy governing network data usage data usage policy utilized by the data usage service can include any information necessary to identify a condition present in an application s network data usage or feature s network data usage and one or more actions to take once the condition occurs. The data usage policy can include an identification of one or more of the networks subject to the policy a condition in the network data usage that invokes the data usage policy and one or more actions to take in response to the condition. The condition can be any condition occurring in the network data usage for one or more of the networks for example any network data usage a defined amount of network data usage and the like. The condition for example can be a quota that specifies an amount of network data usage within a period of time. For example a quota can specify MBytes used per day MBytes user per week GBytes used per month and the like. The one or more actions taken in response to the condition can be any action associated with an application s network data usage a feature s network data usage or both. For example the action can include blocking or limiting an application s or feature s use of one or more of the networks altering the rate at which the application or the feature can exchange data with one or more of the networks altering the quality of service of the connection to one or more of the networks switching the application s or feature s connection to different ones of the networks .

According to embodiments the data usage service can maintain the data usage policies in a data usage policies record . The data usage policies record can be any type of data structure that can store the data usage policies. The data usage policies record can be stored on one or more of the computer readable media of the computing device .

According to embodiments the data usage service can control and adapt the data usage of the applications and features of the applications using the amount of network data usage recorded in the data usage records and using the data usage policies record . When the data usage is recorded for an application features of the application or both the data usage service can compare the amount of data recorded in the data usage records for the application features or both to the data usage policies that govern the application s or features network data usage which are stored in the data usage policies record . If the amount of network data usage meets a condition specified in the data usage policies the data usage service can perform the one or more actions that are specified in the policy. Accordingly the data usage service can control and adapt the activities of the applications and the features of the applications based on conditions occurring in the network data usage.

According to embodiments the data usage service can provide notifications such as warnings and alerts that the condition has occurred and an action has been taken. The data usage service can also provide notifications on a current level of network data usage by the applications and the features of the application . The data usage service can generate a user interface to provide the notification and receive information from the user of the computing device . In implementations the data usage service can notify the application and the application can generate the user interface . The user interface can be any type of interface that can provide information to the user and receive information from the user such as a graphical user interface GUI and command line interface and the like. The data usage service can provide the user interface in a display device of the computing device . While illustrates a single user interface one skilled in the art will realize that the data usage service can generate and provide any number of user interfaces.

In addition to determining and controlling the overall data usage the data usage service can classify and determine the applications based on a context. The context can be related to the manner within which the applications execute on the computing device to the network which the application is utilizing to exchange data to activities being performed by the applications to user defined situations or combinations of these contexts. For example a context can be related to whether a specific application is executing in the foreground or background or has been singled out by a user. Likewise for example a context can be related to each of the networks with which the application can utilize to send and receive data. When an application requests a network connection the data usage service can associate a tag with the communication channel created for the application that can uniquely identify the application and the context of the application .

When the data is received at the communication channel the data usage service can label the data with the tag associated with the communication channel. The data usage service can then determine the amount of data being communicated over the communication channel and record the amount of data in one or more of the data usage records associated with the tag which identifies both the application and the context. If the application switches context the data usage service can determine and separately store the amount of network data usage in a record of the data usage records that is associated with the context within which the network data usage occurred. Accordingly the data usage service can determine the overall data usage of the application as well as the network data usage in each context.

Likewise the data usage service can provide notifications that identify the overall data usage of an application as well as data usage in any relevant context associated with the application . For example the data usage service can provide the notifications in the user interface .

According to embodiments the policies governing data usage can be associated with different contexts. When identifying policies to be associated with an application the data usage service can utilize the context associated with the application to identify which data usage policies should be applied to the application s data usage determined by the data usage service . As such the data usage service can determine and control data usage based on the specific context of an application .

As discussed above in addition to determining and controlling the network data usage of an application the data usage service can determine control adapt and report the network data usage of features of the application . The data usage service can utilize sub categories that identify the different features of each of the applications . To determine the network data usage the data usage service can associate a tag with the communication channel that identifies the application and any policies that govern the application s network data usage and can associate the communication channel with a separate tag that identifies a sub category for the feature using the communication channel and any policies that govern the feature s network data usage.

When the data is received at the communication channel the data usage service can label the data with all the tags associated with the communication channel. The data usage service can then determine the amount of data received at the communication channel and record the amount of data usage in separate records in the data usage records associated with the each tag e.g. a record in the data usage records showing data usage by the application and a record in the data usage records showing data usage by the feature of the application .

If a different feature classified under a different sub category provides the data to the communication channel the data usage service can associate the communication channel with a tag that identifies the application and any policies that govern the application s network data usage and can associate the communication channel with a new tag that identifies a different sub category for the different feature using the communication channel and any policies that govern the different feature s network data usage. Accordingly the data usage service can determine both the overall network data usage of each of the applications as well as the network data usage by each feature of the applications . Further the data usage service can control and adapt the network data usage by each feature of each of the applications .

According to embodiments the data usage service can provide notification of the applications overall network data usage and network data usage by each feature. The data usage service can provide the notification in the user interface .

According to embodiments the data usage service can utilize both context and sub categories as well as other attributes to determine control and adapt the network data usage of each of the applications and the features of the application . The data usage service can determine and record the network data usage for each of the applications the context of each of the applications and the sub categories for the features of the applications . Accordingly the data usage service can provide an overall and detailed view of the network data usage of the applications .

According to embodiments when determining network data usage the data usage service can automatically associate the tags with the communications channel and vice versa. Likewise the applications can communicate with the OS to associate tags with the communications channel. As such the applications that provide network services to other ones of the applications can properly attribute the network data usage to the correct application. In implementations the application can request that the data usage service update the data to properly attribute the network data usage to the correction application after data has already been processed.

According to embodiments the different contexts and data usage polices associated with the different contexts can be predefined by the data usage service . Likewise for each predefined context the data usage service can allow a user of the computing device to set the data usage policies for the predefined context. For example the data usage service can allow a user to identify network subject to a data usage policy the conditions of the policy and the action to take if the conditions occurs. Additionally the data usage service can allow a user of the computing device to set the policies governing network data usage for any of the applications and features of the applications . Accordingly the data usage service can allow users to control the network data usage of the applications features of the application and any of the applications associated with a context.

According to embodiments the sub categories associated with features of the applications can be defined by a developer of the applications . When determining and controlling network data usage in the application the data usage service can identify the sub categories by examining the applications . Accordingly developers of the applications can specify and define the features of the application for which the network data usage is determined and controlled by the data usage service .

In the OS can initiate start up of the computing device . The OS can load and can initiate the software programs modules and applications necessary to allow operation of the computing device . The OS can also load and initiate the data usage service .

In the data usage service can load default data usage contexts and default data usage policies. The data usage service can retrieve the data usage policies record and load the data usage policies record for use in determining adapting and controlling the network data usage of the applications .

In the data usage service can scan the applications for custom sub categories and custom data usage policies. The applications can specify custom sub categories and custom data usage policies for the features of the applications. The data usage service can scan the applications to identify the custom sub categories and the custom data usage policies.

In the data usage service can load the custom sub categories and custom data usage policies. The data usage service can store the custom sub categories and the custom data usage policies in the data usage policies record .

In the data usage service can load prior data usage records . For example prior to a shut down or restart the data usage service may have determined the network data usage of one or more of the applications and the features of the applications . As such the data usage service can store the amount of network data usage in the data usage records retrieve the previous values and load the data usage records with the previous value. In the exemplary process can end return to any point or repeat.

In the data usage service can detect the initiation of an application . The application can be initiated by a user of the computing device or by the computing device itself. In the data usage service can retrieve and set up data usage policies for the application . The data usage service can access the data usage policies record to set up the data usage policies for the application and any features of the application .

In the data usage service can detect the opening of a communication channel. For example when accessing one or more of the networks the application or the OS can open a communication channel to allow the exchange of data with the one or more networks . The communication channel can be any type of logical communication channel that the application utilizes to exchange data with the networks . For example the communication channels can be network sockets used by the application or other levels of API abstractions.

In the data usage service can determine if one or more tags are associated with the communication channel. For example the application or another application can associate the tags with the communication channel. For instance the application can utilize an intermediate application to access the networks and the intermediate application can associate the tags with the communication channel. If no tags are associated with the communications channel in the data usage service can associate the tags with the communication channel. The tags can identify the application any relevant contexts any relevant sub categories and any relevant data usage policies.

In if one or more tags are already associated with the communication channel the data usage service can determine if additional tags should be associated with the communication channel. In the data usage service can associate the additional tags with the communication channel. For example if an intermediate application assigned a tag identifying the application the data usage service can associate additional tags that identify any relevant contexts any relevant sub categories and any relevant data usage policies which were not associated by the intermediate application.

In the data usage service can determine if data usage records exist for the application . The data usage service can examine the data usage records to determine if records exist that match the tags associated with the communication channel. If the records do not exist in the data usage service can generate the data usage records .

In the data usage service can label the data received at the communication channel with the tags associated with the communication channel. In the data usage service can determine the amount of data received and store the amount of network data usage in the data usage records associated with the tags.

In the data usage service can retrieve a data usage policy for an application and any features that is identified by the tags of the communication channel. The data usage service can search the data usage policies record with the information in the tags and retrieve any data usage polices that are applicable.

In the data usage service can retrieve an amount of network data usage from the data usage records corresponding to the application and any features of the application . The data usage service can identify one or more of the data usage records using the information in the tags. Then the data usage service can retrieve the amount of network data usage from the identified data usage records .

In the data usage service can compare the amount of network data usage to any conditions for network data usage specified in the data usage policies. For example the condition can be a quota that specifies an amount of network data usage within a period of time. For example a quota can specify MBytes used per day MBytes user per week GBytes used per month and the like. If the amount of network data usage does not meet any conditions the data usage service can check for more data received at the communication channel in .

If the amount of network data usage does meets a condition in the data usage service can perform any actions specified in the policies with a matching condition. The action taken in response to the condition can be any action associated with the application s network data usage the feature s network data usage or both. For example the action can include blocking or limiting the application s or feature s use of one or more of the networks altering the rate at which the application or the feature can exchange data with one or more of the networks altering the quality of service of the connection to one or more of the networks switching the application s or feature s connection to different ones of the networks .

In the data usage service can optionally notify a user of the computing device of any conditions met and any actions taken. For example the data usage service can provide the notification in the user interface .

In the data usage service can check for more data received at the communication channel. If more data is received the data usage service can return to of the exemplary process . If no more data is received the exemplary process can end return to any point or repeat.

As mentioned above the data usage service can determine and control the network data usage of one or more of the applications using context and sub categories. illustrate several examples of determining and controlling the network data usage by the data usage service according to various embodiments. While illustrate various examples of network data usage determining and control one skilled in the art will realize that the data usage service can determine and control the network data usage of any application running on the computing device using any combinations of context and sub categories.

According to embodiments the data usage service can maintain two contexts for the different execution states of the application . For example the data usage application can maintain a context A for determining the network data usage of applications such as the social networking application running in the foreground. For instance as the user actively interacts with the social networking application the social networking application can run in the foreground and exchange the data with one or more of the networks . Likewise the data usage application can maintain a context B for the applications running in the background. For instance the social networking application runs in the background as the social networking application passively checks for updates and exchanges the data with one or more of the networks .

As the social networking application exchanges the data and the data the data usage service can utilize two separate data usage records a data usage record for determining the data exchanged in context A and a data usage record for determining the data exchanged in the context B. To properly attribute the data to the correct context the data usage service can associate different tags with a communication channel being utilized by the social networking application as the context changes. The tags associated with the communication channel can identify the current context of the social networking application e.g. running in foreground or background. As the data or is received at the communication channel the data usage service can identify the context from the tags and record the network data usage in the data usage records or the data usage record based on the tag currently associated with the communication channel. As such the data usage service can accurately account for the network data usage of the social networking application in both context A and B as well as the overall network data usage of the social networking application .

In this example the data usage service can control and adapt the network data usage of the social networking application based on overall network data usage of the social networking application the network data usage in context A and the network data usage in context B. For instance the data usage service can utilize a policy that governs the overall network data usage of the social networking application a policy that governs the network data usage in context A and a policy that governs the network data usage in context B. For example if the network data usage in the context B is considered less important the policy for the context B can specify that the context B has a lower quota than context A and can specify that the data is limited blocked given less priority or transferred over a different one of the networks when the quota is reached.

For example as illustrated in the computing device can communicate with two networks a network and a network . The network can be a network that has a quota on the amount of data exchanged with the network before a fee is changed for example a cellular network. The network can be a network that allows unlimited data exchange over the network for example a WiFi network. The data usage service can utilize a policy that governs the overall network data usage of the social networking application a policy that governs the network data usage in context A i.e. the active user interaction and a policy that governs the network data usage in context B the passive update checking. If the data usage recorded in the data usage record and the data usage record or other data usage records reaches the quota the policy can specify that any data usage for context B will be limited to the network . Accordingly the computing device can route the data or can instruct the OS to route to the network until the quota is reset for example at the beginning of a new billing cycle.

Likewise in another example the policy for the context B can specify that the applications e.g. the social networking application running in the context B e.g. the background can only utilize a specific one of the networks e.g. either the network or the network . For instance the policy for the context B can specify that the applications running in the context B can only utilize the network .

In this example the data usage service can control and adapt the network data usage of the media player based on overall network data usage of the media player and or all application using the one or more networks . As illustrated in the computing device can communicate with two networks a network and a network . The network can be a network that has a quota on the amount of data exchanged with the network before a fee is changed for example a cellular network. The network can be a network that allows unlimited data exchange over the network for example a WiFi network. The data usage service can utilize a policy that governs the overall network data usage of the media player and or all application utilizing the networks . If the data usage recorded in the data usage record and the data usage record or the combination of all data usage records reaches the quota the policy can specify that any data usage for the media player will be limited to the network . Accordingly the computing device can route or can instruct the OS to route the data to the network until the quota is reset for example at the beginning of a new billing cycle.

As the email applications exchanges the data and the data the data usage service can utilize two separate data usage records a data usage record for determining all the data exchanged by the email application and a data usage record for determining the data exchanged by the sub category of the speculative pre fetching of attachments . To properly attribute the data the data usage service can associate different tags with a communication channel being utilized by the email application depending on which features of the email application are exchanging data. The tags associated with the communication channel can identify the current features exchanging data.

For instance as the email application exchanges data with one or more of the networks the data usage service can label the communication channel with a tag for the email application and record the network data usage in the data usage record . As the email application exchanges data with one or more of the networks the data usage service can label the communication channel with a tag for the email application and a tag for the sub category of the speculative pre fetching of attachments . The data usage service can record the network data usage in the data usage record and the data usage record . As such the data usage service can accurately account for the network data usage of the speculative pre fetching of attachments of the emails application as well as the overall network data usage of the email application .

In this example the data usage service can control and adapt the network data usage of the email application based on the data usage determined for each feature of the email application . As illustrated in the network can be a network that has a quota on the amount of data exchanged with the network before a fee is changed for example a cellular network. The data usage service can include a policy that blocks the speculative pre fetching of attachments if the usage of the email application reaches a threshold. Once the data usage stored in the data usage record and the data usage record reaches the threshold the data usage service can block or can instruct the OS to block the data related to the speculative pre fetching of attachments. Likewise for example the data usage service can route or can instruct the OS to route the data to another network in in the networks .

In this example the data usage service can control and adapt the network data usage of the email application based on overall network data usage of the email application and the network data usage of the feature of speculative pre fetching of attachments . For instance the data usage service can utilize a policy that governs the overall network data usage of the email application and a policy that governs the network data usage of the feature of speculative pre fetching of attachments .

As illustrated in the computing device can include one or more processors of varying core configurations and clock frequencies. The computing device can also include one or more memory devices that serve as a main memory during the operation of the computing device . The computing device can also include one or more peripheral interfaces such as keyboards mice touchpads computer screens touchscreens etc. for enabling human interaction with and manipulation of the computing device .

The computing device can also include one or more network interfaces for communicating via one or more networks such as Ethernet adapters wireless transceivers or serial network components for communicating over wired or wireless media using protocols such as Ethernet wireless Ethernet Global System for Mobile Communications GSM Enhanced Data rates for GSM Evolution EDGE Universal Mobile Telecommunications System UMTS Worldwide Interoperability for Microwave Access WiMAX Long Term Evolution LTE etc. The computing device can also include one or more storage device of varying physical dimensions and storage capacities such as flash drives hard drives random access memory etc. for storing data such as images files and program instructions for execution by the one or more processors . One or more software programs can be stored in the one or more memory devices and or on in the one or more storage devices . For example the one or more software program can include the OS the data usage service and any other software program utilized by the computing device .

In embodiments the components of the computing device need not be enclosed within a single enclosure or even located in close proximity to one another. Those skilled in the art will appreciate that the above described componentry are examples only as the computing device can include any type of hardware componentry including any necessary accompanying firmware or software for performing the disclosed embodiments. The computing device can also be implemented in part or in whole by electronic circuit components or processors such as application specific integrated circuits ASICs or field programmable gate arrays FPGAs .

Certain embodiments described above can be performed as a computer applications or programs. The computer program can exist in a variety of forms both active and inactive. For example the computer program can exist as one or more software programs software modules or both that can be comprised of program instructions in source code object code executable code or other formats firmware program s or hardware description language HDL files. Any of the above can be embodied on a computer readable medium which include computer readable storage devices and media and signals in compressed or uncompressed form. Exemplary computer readable storage devices and media include conventional computer system RAM random access memory ROM read only memory EPROM erasable programmable ROM EEPROM electrically erasable programmable ROM and magnetic or optical disks or tapes. Exemplary computer readable signals whether modulated using a carrier or not are signals that a computer system hosting or running the present teachings can be configured to access including signals downloaded through the Internet or other networks. Concrete examples of the foregoing include distribution of executable software program s of the computer program on a CD ROM or via Internet download. In a sense the Internet itself as an abstract entity is a computer readable medium. The same is true of computer networks in general.

While the teachings have been described with reference to the exemplary embodiments thereof those skilled in the art will be able to make various modifications to the described embodiments without departing from the true spirit and scope. The terms and descriptions used herein are set forth by way of illustration only and are not meant as limitations. In particular although the method has been described by examples the steps of the method may be performed in a different order than illustrated or simultaneously. Furthermore to the extent that the terms including includes having has with or variants thereof are used in either the detailed description and the claims such terms are intended to be inclusive in a manner similar to the term comprising. As used herein the terms one or more of and at least one of with respect to a listing of items such as for example A and B means A alone B alone or A and B. Those skilled in the art will recognize that these and other variations are possible within the spirit and scope as defined in the following claims and their equivalents.

