---

title: Device and power saving control method for selectively transitioning to one or more low power modes depending on whether all of the programs on the device have been interrupted or terminated
abstract: A device having at least one power-saving mode includes a storage unit configured to store a program; an advance notification unit configured to send, to the program, an advance notice of transition to the power-saving mode prior to transition start timing at which the transition to the power-saving mode is started; a transition determining unit configured to query the program, at the transition start timing, whether the transition to the power-saving mode is acceptable; and a transition control unit configured to cause the device to transition to the power saving mode if the transition to the power-saving mode is acceptable for the queried program.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09261947&OS=09261947&RS=09261947
owner: RICOH COMPANY, LTD.
number: 09261947
owner_city: Tokyo
owner_country: JP
publication_date: 20120209
---
The present application is based upon and claims the benefit of priority of Japanese Patent Application No. 2011 036883 filed on Feb. 23 2011 and Japanese Patent Application No. 2011 279507 filed on Dec. 21 2011 the entire contents of which are incorporated herein by reference.

There exist devices that transition or switch to a power saving mode or energy saving mode to save power when for example the devices are not operated for a predetermined period of time. Examples of such devices include image forming devices like a printer a facsimile machine a copier and a multifunction peripheral. Also there is an image forming device where components e.g. programs running on the image forming device are queried to determine whether transition to the power saving mode is acceptable for the components see for example Japanese Laid Open Patent Publication No. 2007 152824 . The image forming device transitions to the power saving mode only if it is acceptable to the components. This configuration makes it possible to prevent malfunction of the components and damage to data being processed by the components which may occur as a result of an abrupt transition to the power saving mode.

Meanwhile there is an image forming device where functions can be added after the factory shipment by installing application programs that can be developed using public application programming interfaces APIs . In such an image forming device a large number of application programs may be running depending on the needs of the user.

Here an increase in the number of application programs running on a device such as an image forming device indicates an increase in the number of objects to be queried to determine whether to transition to the power saving mode. That is it is necessary to query all installed application programs to determine whether transition to the power saving mode is acceptable. Accordingly if the number of objects to be queried increases the time necessary to determine whether to switch to the power saving mode increases. This may result in a delay in switching to the power saving mode and may reduce the power saving efficiency.

In an aspect of this disclosure there is provided a device having at least one power saving mode. The device includes a storage unit configured to store a program an advance notification unit configured to send to the program an advance notice of transition to the power saving mode prior to transition start timing at which the transition to the power saving mode is started a transition determining unit configured to query the program at the transition start timing whether the transition to the power saving mode is acceptable and a transition control unit configured to cause the device to transition to the power saving mode if the transition to the power saving mode is acceptable for the queried program.

Preferred embodiments of the present invention are described below with reference to the accompanying drawings. is a block diagram illustrating an exemplary hardware configuration of an image forming device according to an embodiment. As illustrated in the image forming device may include as hardware components a controller a scanner a printer a modem an operations panel a network interface and a secure digital SD card slot .

The controller may include a central processing unit CPU a random access memory RAM a read only memory ROM a hard disk drive HDD and a non volatile RAM NVRAM . The ROM stores for example programs and data used by the programs. The RAM is used for example as a storage area into which programs are loaded and as a work area for the loaded programs. The CPU executes the programs loaded into the RAM to implement various functions. The HDD stores for example programs and data used by the programs. The NVRAM stores for example various settings.

The scanner is a hardware component image scanning unit for scanning a document to obtain image data. The printer is a hardware component printing unit for printing print data on a recording medium such as paper. The modem is a hardware component for connecting the image forming device to a telephone line and is used to send and receive image data for facsimile communications. The operations panel is a hardware component including an input unit such as buttons for receiving user inputs and a display unit such as a liquid crystal display panel. The network interface is a hardware component for connecting the image forming device to a wired or wireless network such as a local area network LAN . The SD card slot reads for example programs stored in a secure digital SD card . With the image forming device configured as described above in addition to the programs stored in the ROM and the HDD programs stored in the SD card can be loaded into the RAM and executed.

The standard applications are default applications installed in the image forming device before the factory shipment. In the example of the standard applications include a scan application a print application a copy application and a fax application . The scan application performs a scan job. The print application performs a print job. The copy application performs a copy job. The fax application performs a facsimile transmission job and a facsimile reception job.

The control service is implemented by software modules that for example provide functions for controlling various hardware resources to upper layer applications and perform fundamental functions of the image forming device . Also in the control service may include a transition control unit an advance notification unit and a transition determining unit .

The transition control unit controls transition to power saving modes energy saving modes or power saving states . In the power saving modes power consumption of the image forming device is reduced. For example in the power saving modes supply of power to the operations panel may be stopped or reduced or supply of power to engines such as the scanner and the printer may be stopped or reduced.

The advance notification unit sends an advance notice of transition to a power saving mode to programs e.g. the standard applications the SDK applications and the SDK platform running on the image forming device prior to the timing transition start timing to start transition to the power saving mode. The transition start timing may be determined according to the specifications of the image forming device . For example the image forming device may start transition to a power saving mode if the image forming device is not operated for a predetermined period of time and this timing may be called the transition start timing.

At the transition start timing the transition determining unit queries programs running on the image forming device to determine whether transition to the power saving mode is acceptable for the programs. This makes it possible to prevent malfunction of the programs and damage to data being processed by the programs which may occur as a result of an abrupt transition to the power saving mode.

The SDK applications may sometimes be referred to in their singular form for descriptive purposes are plug in applications that are additionally installed to add functions to the image forming device after its factory shipment. Applications implementing any appropriate functions may be provided as the SDK applications . The SDK applications may be installed for example via the SD card or a network into the image forming device .

The SDK platform provides an execution environment for the SDK applications . The SDK applications are developed using application programming interfaces API provided by the SDK platform . For example the SDK platform provides the SDK applications with a scan function interface a print function interface and a copy function interface. APIs provided by the SDK platform may be made public to allow a third party to develop the SDK applications . Since the APIs are machine independent it is generally not necessary to modify the SDK applications for different types or models of image forming devices.

Programs that can be installed into the image forming device are not limited to the SDK applications and the SDK platform that are provided as examples in the present embodiment. Any appropriate programs may be additionally installed into the image forming device .

The OS is an operating system. Software programs in the image forming device run as processes or threads on the OS .

Next exemplary power saving modes of the image forming device are described. is a drawing used to describe how the image forming device transitions to power saving modes.

In a normal mode ST indicates a non power saving mode where the power consumption of the image forming device is not reduced. When the image forming device is in the normal mode ST the user can use the image forming device without any wait time. For example in the normal mode ST when the power key is pressed or the image forming device is not operated for a predetermined period of time the image forming device transitions or switches to a silent mode ST.

The silent mode ST is an example of a power saving mode. For example in the silent mode ST a supply of power to the operations panel may be stopped or reduced. In the silent mode ST however the standard applications the SDK applications and the SDK platform are still running or active . The power key is for example a hardware key such as a button that is disposed on the operations panel and allows that user to manually switch operational modes of the image forming device .

For example in the silent mode ST when the power key is pressed or a print job is started in response to print data received via a network the image forming device returns to the normal mode ST. Meanwhile when the silent mode ST continues for a predetermined period of time hereafter may be called engine off mode wait time the image forming device transitions or switches to an engine off mode ST.

The engine off mode ST is also an example of a power saving mode. However the silent mode ST and the engine off mode ST have different power saving levels. In the engine off mode ST the power consumption of the image forming device is reduced further than in the silent mode ST i.e. the engine off mode ST has a higher power saving efficiency . For example in the engine off mode ST supply of power to engines such as the scanner and the printer may also be stopped or reduced. Also in the engine off mode ST the SDK applications may be terminated. Further in the engine off mode supply of power to the HDD and or the NVRAM may be stopped or reduced.

For example in the engine off mode ST when the power key is pressed a pressing plate is opened or a document to be scanned or copied is set on a document feeder DF the image forming device transitions or switches to the normal mode ST.

The power saving modes and transition between the power saving modes illustrated in are just examples. Any other power saving modes and events triggering transition between them may also be defined in an image forming device. The normal mode ST the silent mode ST and the engine off mode ST may be collectively called operational modes.

An exemplary process performed by the image forming device is described below. is a sequence chart illustrating an exemplary process according to a first embodiment.

If the image forming device is not operated for a predetermined period of time or the power key is pressed while the image forming device is in the normal mode ST the transition control unit queries the SDK platform whether transition to the silent mode ST is acceptable or allowed S . When queried the SDK platform queries the SDK applications running on the SDK platform whether transition to the silent mode ST is acceptable S . Since transition to the silent mode ST does not extensively affect the SDK applications the SDK applications immediately return responses to the query.

Next the SDK platform sends a response which indicates whether transition to the silent mode ST is acceptable to the transition control unit . For example when receiving responses indicating that transition to the silent mode ST is acceptable or allowed from all the queried SDK applications the SDK platform returns a response indicating that the transition is acceptable. Meanwhile when receiving a response indicating that transition to the silent mode ST is not acceptable or not allowed from at least one of the queried SDK applications the SDK platform returns a response indicating that the transition is not acceptable.

When receiving a response indicating that the transition is acceptable the transition control unit reports to the SDK platform that transition to the silent mode ST has been determined S . In response to the report from the transition control unit the SDK platform reports to the running SDK applications that transition to the silent mode ST has been determined S . As a result the SDK applications recognize that transition to the silent mode ST has been determined. Since the SDK applications are queried separately in step S each SDK application does not know how other SDK applications responded to the query. Therefore SDK applications that have sent responses indicating that the transition is acceptable are not able to determine whether transition to the silent mode ST is to actually be performed. For this reason the SDK platform reports to the SDK applications that transition to the silent mode ST has been determined.

Next the SDK platform sends a response to the report to the transition control unit S . When receiving the response from the SDK platform the transition control unit causes the image forming device to transition to the silent mode ST.

Meanwhile if a response indicating that the transition is not acceptable is received in step S the transition control unit reports to the SDK platform that transition to the silent mode ST has been cancelled. In this case the SDK platform reports to the running SDK applications that transition to the silent mode ST has been cancelled.

After transition to the silent mode ST and a predetermined period of time e.g. 10 s before the end of the engine off mode wait time i.e. when engine off mode wait time predetermined period of time passes the advance notification unit sends to the SDK platform an advance notice of transition to the engine off mode ST S . The period of time represented by engine off mode wait time predetermined period of time may be called a first time period and the engine off mode wait time may be called a second time period.

In response to the advance notice the SDK platform performs a termination process for terminating the running SDK applications S . In this sense the SDK platform may be called a terminating unit. For example the SDK platform inputs a termination command to each of the SDK applications . In response to the termination command the SDK applications perform end processes. The end processes may vary depending on the SDK applications . For example an SDK application releases resources such as memory and record a log before the thread of the SDK application is terminated. Accordingly an end process of an SDK application may take several seconds.

When the engine off mode wait time passes after transition to the silent mode ST or when the predetermined period of time e.g. 10 s passes after the advance notice is sent the transition determining unit queries the SDK platform whether transition to the engine off mode ST is acceptable S . After completing the termination process for the SDK applications which has been started in response to the advance notice i.e. after terminating all SDK applications the SDK platform sends a response to the query which indicates that transition to the engine off mode ST is acceptable S . When receiving the response from the SDK platform the transition control unit causes the image forming device to transition to the engine off mode ST.

As described above according to the first embodiment an advance notice is sent to the SDK platform before transition to the engine off mode ST is started i.e. before querying the SDK platform in step S . This configuration or method enables the SDK platform to start the termination process for terminating the SDK applications before the transition to the engine off mode ST is actually started. This in turn makes it possible to reduce the time necessary for the SDK platform to respond in step S to the query made in step S. That is if the termination process has been completed for all the SDK applications or if the end processes of all the SDK applications have been completed when the SDK platform is queried in step S the SDK platform can respond immediately in step S. Also even if the termination process has not been completed for some of the SDK applications or the end processes of some of the SDK applications have not been completed when the SDK platform is queried in step S the time necessary for the SDK platform to respond to the query can still be reduced. Thus compared with a case where the termination process for terminating the SDK applications is started in response to the query in step S the method of can reduce the time necessary for the SDK platform to respond to the query. This in turn makes it possible to prevent reduction in the power saving efficiency due to the increase in the number of SDK applications .

A second embodiment is described below. Here mainly steps and configurations that are different from the first embodiment are described. Accordingly steps and configurations of the second embodiment not described below may be substantially the same as those of the first embodiment.

In the second embodiment if the termination process has not been completed for at least one of the SDK applications when the SDK platform is queried in step S the SDK platform immediately sends a response indicating that the transition is not acceptable or not allowed S .

When receiving the response the transition control unit reports to the SDK platform that transition to the engine off mode ST has been cancelled S . Next the transition control unit reports to the SDK platform that transition to the silent mode ST has been determined S . In other words the transition control unit reports to the SDK platform that the silent mode ST is maintained since transition to the engine off mode ST has been cancelled. If the termination command has not been input to one or more SDK applications at the time when the report is received the SDK platform stops inputting the termination command and reports to the still running SDK applications that transition to the silent mode ST has been determined. At this time the SDK applications to which the termination command has already been input or the SDK applications that have been terminated are not restarted. Instead these SDK applications are restarted for example when the image forming device returns to the normal mode ST.

Following step S the SDK platform sends a response to the report S . Then after a predetermined period of time from when the determination of transition to the silent mode ST is reported in step S or from when the response is sent in step S the advance notification unit again sends to the SDK platform an advance notice of transition to the engine off mode ST S .

In response to the advance notice the SDK platform resumes the termination process for terminating the SDK applications S . That is the SDK platform inputs the termination command to the remaining SDK applications . Here if the termination process has already been completed for all the SDK applications when the advance notice is received step S may be omitted.

When a predetermined period of time passes after the advance notice is sent in step S the transition determining unit queries the SDK platform as to whether transition to the engine off mode ST is acceptable S . If the termination process for all the SDK applications has been completed when the SDK platform is queried in step S the SDK platform sends a response indicating that transition to the engine off mode ST is acceptable S .

The second embodiment provides advantageous effects similar to those provided by the first embodiment. In the second embodiment the time from when the cancellation of transition to the engine off mode ST is reported S to when the SDK platform is queried again whether transition to the engine off mode ST is acceptable S is preferably less than the time necessary to terminate all running SDK applications .

A third embodiment is described below. Here steps and configurations that are different from the first and second embodiments are mainly described. Accordingly steps and configurations of the third embodiment not described below may be substantially the same as those of the first and second embodiments.

In the third embodiment it is assumed that an event e.g. the power key is pressed causing the image forming device to return to the normal mode ST occurs after the advance notice is sent S and before the SDK platform is queried whether transition to the engine off mode ST is acceptable S .

When the event occurs the transition control unit reports to the SDK platform that transition to the normal mode ST has been determined S . In response to the report the SDK platform performs a start up process for starting the terminated SDK applications S . After completing the start up process the SDK platform sends a response S .

Thus according to the third embodiment even if the image forming device is caused to return to the normal mode ST after the advance notice is sent and before the engine off mode wait time passes the SDK applications that have been terminated in response to the advance notice are automatically restarted. This method or configuration makes it possible to reduce inconvenience to the user.

A fourth embodiment is described below. Here steps and configurations that are different from the second embodiment are mainly described. Accordingly steps and configurations of the fourth embodiment not described below may be substantially the same as those of the second embodiment.

In other modules indicate program modules e.g. the standard applications other than the SDK applications and the SDK platform . The other modules may also be present in other embodiments and similarly to the SDK platform transition among operational modes may also be reported to the other modules.

In step S of is replaced with step S. In step S the SDK platform starts a termination process for terminating the running SDK applications . In step S however the SDK platform inputs an interruption command instead of the termination command to each SDK application that supports power saving modes hereafter called power saving supported SDK application .

The power saving supported SDK application is configured to be not terminated even when the image forming device transitions to the engine off mode ST. For example an SDK application having a facsimile reception function needs to be running even in the engine off mode ST and is therefore configured as a power saving supported SDK application . Information indicating whether an SDK application supports power saving modes may be recorded for example in the SDK platform when the SDK application is installed.

The interruption command causes the power saving supported SDK application to interrupt a process currently being performed at an appropriate point. The thread of an interrupted SDK application is not terminated.

Also in step Sof is replaced with step S. In it is assumed that all the SDK applications have been terminated or interrupted at the timing when the SDK platform is queried in step S whether transition to the engine off mode ST is acceptable. Therefore in step S the SDK platform sends a response indicating that transition to the engine off mode ST is acceptable.

Next the transition determining unit also queries the other modules as to whether transition to the engine off mode ST is acceptable S . Here it is assumed that transition to the engine off mode ST is not acceptable for at least one of the other modules. For example transition to the engine off mode ST is not acceptable for the print application when it is performing a print job or for the fax application when it is performing a facsimile transmission job or a facsimile reception job. Accordingly at least one of the other modules sends a response indicating that transition to the engine off mode ST is not acceptable or allowed S .

Thus the fourth embodiment is different from the second embodiment in that transition to the engine off mode ST is denied not accepted by at least one of the other modules.

When receiving a response indicating that the transition is not acceptable from at least one of the other modules the transition control unit reports to the SDK platform and the other modules that transition to the engine off mode ST has been cancelled S S .

Next the transition control unit reports to the SDK platform that transition to the silent mode ST has been determined S . When receiving the report the SDK platform resumes the power saving supported SDK applications that have been interrupted in step S S . As a result the power saving supported SDK applications return to a normal operational state. Next the SDK platform sends a response to the report to the transition control unit S .

The transition control unit also reports to the other modules that transition to the silent mode ST has been determined S . In response to the report the other modules send responses to the transition control unit S .

After a predetermined period of time from when the determination of transition to the silent mode ST is reported in step S S S or from when the responses are sent in step S S S the advance notification unit again sends to the SDK platform an advance notice of transition to the engine off mode ST S .

In response to the advance notice the SDK platform inputs the interruption command to the power saving supported SDK applications S . Since SDK applications other than the power saving supported SDK applications have already been terminated in step S the termination process for those SDK applications is not performed here.

When a predetermined period of time passes after the advance notice is sent in step S the transition determining unit queries the SDK platform as to whether transition to the engine off mode ST is acceptable S . If all the power saving supported SDK applications have been terminated when the SDK platform is queried in step S the SDK platform sends a response indicating that transition to the engine off mode ST is acceptable S .

Then the transition determining unit queries the other modules whether transition to the engine off mode ST is acceptable S . If transition to the engine off mode ST is acceptable the other modules send responses indicating that the transition is acceptable S .

The fourth embodiment provides advantageous effects similar to those provided by the second embodiment.

A fifth embodiment is described below. Here steps and configurations that are different from the third embodiment are mainly described. Accordingly steps and configurations of the fifth embodiment not described below may be substantially the same as those of the third embodiment.

In the fifth embodiment it is assumed that the image forming device transitions to an offline mode before a predetermined period of time passes after the advance notice of transition to the engine off mode ST is sent in step S.

In the offline mode for example parameters related to operations of the image forming device are set and changed using a configuration screen for the administrator displayed on the operations panel . For example the image forming device transitions to the offline mode when a request to display the configuration screen for the administrator is entered. Accordingly the offline mode is different in type from the power saving modes illustrated in .

Since parameters of the image forming device are set and changed in the offline mode it is not preferable to cause the image forming device to transition to the engine off mode ST while it is in the offline mode. For example since supply of power to the HDD and or the NVRAM is stopped or reduced in the engine off mode ST parameters set or changed in the offline mode cannot be recorded in the HDD and or the NVRAM .

For the above reason when the image forming device transitions to the offline mode the transition control unit stops a timer for measuring the passage of the predetermined period of time from when the advance notice of transition to the engine off mode ST is sent. Next the transition control unit reports to the SDK platform that transition to the silent mode ST has been determined S . By reporting the determination of transition to the silent mode ST the transition control unit reports to the SDK platform that transition to the engine off mode ST has been cancelled and thereby causes the SDK platform and the SDK applications to switch to an operational state corresponding to the current power saving mode i.e. the silent mode ST of the image forming device .

More specifically when receiving the advance notice of transition to the engine off mode ST the SDK platform and the SDK applications switch to an operational state e.g. where the power saving supported SDK applications are interrupted corresponding to the engine off mode ST. If the determination of transition to the silent mode ST is not reported the SDK platform and the SDK applications continue to be in the operational state corresponding to the engine off mode ST even if the image forming device is in the silent mode ST and therefore cannot work properly.

When the determination of transition to the silent mode ST is reported the SDK platform resumes the power saving supported SDK applications that have been interrupted in step S S . After resuming the power saving supported SDK applications the SDK platform sends a response S .

Thus according to the fifth embodiment even if the image forming device is caused to transition to the offline mode after the advance notice is sent and before the engine off mode wait time passes the power saving supported SDK applications that have been interrupted in response to the advance notice are automatically resumed. This method or configuration makes it possible to reduce inconvenience to the user.

In addition to the image forming device the above embodiments may also be applied to any device such as a projector a smartphone a cell phone or a digital camera having a power saving mode.

An aspect of this disclosure provides a device a power saving control method and a non transitory computer readable storage medium storing program code that make is possible to prevent reduction in the power saving efficiency due to the increase in the number of installed programs.

The present invention is not limited to the specifically disclosed embodiments and variations and modifications may be made without departing from the scope of the present invention.

