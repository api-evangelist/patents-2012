---

title: Global positioning system (GPS) carrier phase cycle slip detection and correction
abstract: A method and detector for detecting a global positioning system (GPS) carrier phase (CP) cycle slip or correcting the GPS CP cycle slip is disclosed. A GPS CP cycle slip detector can include an integrated CP (ICP) change measurement module, an ICP change prediction module, and a processor. The ICP change measurement module can be configured for generating a measured ICP change of a measured CP of a GPS signal for a time duration. The ICP change prediction module can be configured for determining a predicted ICP change of the GPS signal CP for the time duration using directional position information. The processor can be configured for detecting in near real time a GPS CP cycle slip when the measured ICP change varies from the predicted ICP change by greater than a threshold value.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09182497&OS=09182497&RS=09182497
owner: Raytheon Company
number: 09182497
owner_city: Waltham
owner_country: US
publication_date: 20120308
---
Satellite navigation systems such as the global positioning system GPS enable a receiver to determine a location from ranging signals received from a plurality of satellites. The ranging signals can be broadcasted on frequencies such as the Lsignal 1.57542 gigahertz GHz and or Lsignal 1.2276 GHz . Lcan have a wavelength of about 19 centimeters cm and Lcan have a wavelength of about 24 cm. Position can be determined from code e.g. pseudorandom noise PRN code and or carrier phase CP information. A PRN code is transmitted by the GPS satellites to the receiver and correlated with replica codes to determine ranges to different satellites. Accuracy can be enhanced using real time kinematic RTK processing of carrier phase information. Accuracy at the level of tens of centimeters is possible with RTK carrier phase integer ambiguity resolution. RTK carrier phase integer ambiguity resolution can be used in applications with very accurate positional location information requirements and high integrity requirements.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended.

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence.

An initial overview of technology embodiments is provided below and then specific technology embodiments are described in further detail later. This initial summary is intended to aid readers in understanding the technology more quickly but is not intended to necessarily identify key features or essential features of the technology nor is it intended to limit the scope of the claimed subject matter. However the initial summary should not be considered limiting and may contribute to the enabling disclosure of the present invention and support of the appended claims.

Global positioning system GPS carrier phase CP cycle slips can cause disruptions in the CP information used by a GPS receiver for precise relative position determination. Cycle slips can occur with unacceptably high frequency e.g. several in a period as short as 100 seconds even while a GPS receiver is stationary . A method and apparatus can be used for detecting and correcting errors induced by momentary loss of phase track in a GPS receiver. The GPS receiver can use a near real time cycle slip detector to detect cycle slips and or correct a measured integrated CP ICP change of a GPS signal with a predicted ICP change of the GPS signal.

In one embodiment a GPS receiver may be located on a vehicle. The vehicle may be a ground based vehicle an air based vehicle or a water based vehicle. The prediction of the ICP change can be based on predicting or accounting for vehicle dynamics of the vehicle with the GPS receiver clock dynamics and GPS satellite dynamics. A GPS calibrated directional sensor e.g. a inertial measurement unit IMU or other type of directional sensor or group of directional sensors can be used in the prediction of a phase change induced by vehicle dynamics. Since a GPS antenna and directional sensor may not be in the same location a lever arm from the directional sensor to a GPS antenna can be used to capture the effects of the vehicle under rotation.

Clock dynamics of the prediction of the ICP change can be removed through single differences or estimated clock phase error difference e.g. by using a Kalman filter . GPS satellite dynamics can be estimated using ephemeris of the GPS satellite.

The cycle slip detector can compare the measured ICP change of the GPS signal with the analytical prediction of the ICP change based upon information external to the GPS tracking loop such as information provided by the directional sensor that can be used to calculate a predicted ICP change. The cycle slip detector can correct for a cycle slip when the measured ICP change varies from the prediction of the ICP change by more than a threshold value by substituting the measured ICP change with the analytical prediction of the ICP change.

Uncorrected CP cycle slips can impair precise GPS positioning. For example using a single frequency carrier e.g. Lor L a single CP cycle slip may generate a positional shift or jump of approximately 20 centimeters cm Typically information external to the carrier tracking loops are not supplied to aid in the CP cycle slip detection process and CP cycle slip detection is not performed in real time or near real time in a typical GPS receiver so typical or post processing CP cycle slip detection cannot be used to correct the CP. For applications that may use a high level of accuracy such as an accuracy of approximately 10 20 cm CP cycle slips can impair accuracy. Cycle slips may be minimized through oscillator selection. However cycle slips can occur even for high performance expensive oscillators. Accordingly CP cycle slip detection and correction can be used to significantly reduce the chances of CP cycle slips causing undesired changes in GPS positioning. Accurate positioning can be valuable in a wide variety of fields including air travel farming and mining to name a few.

While examples are provided herein using particular frequencies such as the GPS Land Lfrequencies this is not considered limiting. Any frequency may be used to communicate location information from the GPS satellites to a GPS receiver.

Examples are also provided of pseudo range detection based on the use of PRN codes. While this is one way of identifying a distance between a satellite and a GPS receiver other mechanisms may also be used. The embodiments described herein can be used with any measurement system in which a carrier phase of a GPS signal can be measured.

The following provides additional details of examples for CP cycle slip detection and correction. Precise relative positioning can achieve centimeter level cm level accuracies using global positioning system GPS real time kinematic RTK positioning. RTK positioning can replace conventional GPS pseudo range PR constructed from code tracking with ranges constructed from carrier phase CP tracking. In a code tracking example a GPS receiver compares a pseudorandom noise PRN signal received from the GPS satellite with an internally generated copy of the same PRN signal. Due to the delay or time of flight TOF of the PRN signal of the GPS satellite traveling to the GPS receiver a copy of the GPS satellite s PRN signal in the GPS receiver is delayed in relation to an internally generated local copy of the PRN signal. The time delay can be calculated by aligning the two signals. The time delay represents the TOF for the signal to reach the GPS receiver from the GPS satellite. Using the time delay the distance from the satellite can be calculated. By identifying the location of multiple GPS satellites relative to the GPS receiver the location of the GPS receiver can be determined.

The accuracy of the resulting pseudo range PR measurement of the PRN code using code tracking is generally a function of the ability of the GPS receiver s electronics to accurately compare the PRN received signal with the internally generated copy of the PRN signal. GPS receivers can align the received and generated PRN signals within a tolerance or margin of error of a bit width or chip width . For example the commercial or coarse acquisition C A code sent by the GPS satellites can send a bit every 0.98 microsecond s so a GPS receiver with a 1 margin of error can be accurate to 0.01 s which can translate to about 3 meters m in terms of distance without considering other effects and errors.

The military only P Y code sent by the GPS satellites can be clocked ten times faster than the C A code so with code tracking the GPS receiver can be accurate down to about 30 cm without considering other effects and errors. Other effects on the signal can introduce errors on the accuracy of the C A code so accuracy based on an uncorrected C A signal can be generally about 15 m when the other effects are considered. The P Y code can be similarly affected. A plurality of GPS signals such as L L and or L can be used to reduce the errors and other effects and improve accuracy over using a single GPS signal. Mechanisms may be used to correct for errors common to the plurality of GPS signals referred to as common mode error.

In a CP tracking example the GPS receiver tracks the GPS satellite s carrier or phase as the signal instead of the messages contained within the signal or PRN code. CP tracking or carrier tracking can provide greater accuracy and resolution of the signal over code tracking since the signal can be subdivided into multiple segments based on the signal s phase. For instance the GPS coarse acquisition C A code broadcast in the Lsignal changes phase at a frequency at approximately 1.023 MHz but the Lcarrier can change phase at a frequency at 1575.42 MHz which can correspond to a wavelength of 19 cm for the Lsignal.

Each wavelength of a received carrier signal is comprised of a 360 degree change in the phase of a sinusoidal signal of the carrier signal. This signal may be further subdivided into segments based on the change in phase such as three 120 degree segments four 90 degree segments six 60 degree segments and so forth. The actual accuracy may depend on the accuracy of a phase lock loop to track the carrier s phase. This enables the accuracy to be improved by approximately the number of phase segments. For instance if four 90 degree phase segments are tracked for the Lcarrier each segment can represent of the wavelength or approximately 5 cm. However when a cycle slip occurs an entire wavelength can pass thereby resulting in a 19 cm error. Thus cycle slips can cause relatively large errors to occur in systems designed for CP tracking.

The received and generated PRN signals are deliberately encoded in order to allow them to be easily aligned whereas every cycle of the carrier using in CP tracking is similar to every other so the CP signals may be subject to misalignment. A misalignment of CP signals in CP tracking can introduce errors adversely affecting the precision of the GPS receiver. For example if the alignment of a CP of an Lsignal is off by one cycle an error of 19 cm or a larger multiple of 19 cm can be introduced. A misalignment problem or integer ambiguity problem can be addressed or corrected to some degree with sophisticated statistical methods that compare the measurements from the C A signals and by comparing the resulting ranges between multiple satellites.

CP cycle slips can be a source of misalignment not resolved by integer ambiguity statistical methods and can cause disruptions in the carrier phase information required for precise relative position determination. CP cycle slips cause a jump on the integer ambiguities and deteriorate the obtainable accuracy if the cycle slips remain undetected.

In another example precise positioning based upon CP may use a continuous CP reference maintained by tracking the phase of each GPS carrier frequency i.e. the Land Lfrequencies . A momentary loss of a CP track on either frequency can induce loss of the full attainable accuracy based upon CP. Cycle slip detection within a carrier phase tracking loop may be unreliable. For example in some applications a CP cycle slip with missed detections may occur frequently such as greater than 4 times within 100 secs. The momentary loss of phase tracking may occur at any time such as landing or alignment of a host vehicle relative to a remote vehicle.

A cycle slip can negatively impact the solution accuracy of a GPS receiver in a way which cannot be predicted when the slip is not at least detected. The GPS CP cycle slip detector and method for GPS CP cycle slip detection can exploit the full redundancy of carrier phase tracking information within the receiver and analytical predictions external to the receiver s tracking loops such as GPS ephemeris information and directional sensor information. Independent L only and L only CP references plus a third analytically derived pseudo CP reference determined from the directional sensor information and the GPS satellite position and velocity information derived from the GPS ephemeris data may provide redundant pieces of information. Since directional sensor and ephemeris based predictions of integrated carrier phase can develop errors very slowly over time the prediction can be suitable for detecting and correcting abrupt errors induced by cycle slips over a short time duration such as each second but can be extended over several seconds to cover momentary loss of phase track situations. The analytical predictions can be jump free and can be used to detect cycle slips reliably in either tracking frequency. Common mode errors related to oscillator behavior can produce cycle slips strongly correlated across Land Ltracking i.e. occurring on both Land L so a comparison between Land Ltracking may not detect common mode errors. In some examples common mode errors can account for approximately half of the cycle slips. Examples of common mode errors can include ionospheric errors tropospheric errors GPS position errors and satellite clock error. Examples of non common mode errors can include residual noise of the GPS receiver and multipath error e.g. reflection error . A CP measurement from the first carrier frequency e.g. L a CP measurement from the second carrier frequency e.g. L and a CP prediction can permit a voting operation or selection process to isolate faults including cycle slips in either the Lor Lcarrier phases. The voting process can be repeated periodically such as each second within the GPS receiver. The use of directional sensor information and or GPS satellite ephemeris information can be used predict the ICP and establish redundancy to permit cycle slip detection and or correction.

A higher quality oscillator such as oven controlled crystal oscillator OCXO where XO is an old acronym for crystal oscillator can have lower tracking loop bandwidths and or fewer cycle slips than a lower precision temperature compensated crystal oscillator TCXO . A crystal oven is a temperature controlled chamber used to maintain the quartz crystal in electronic crystal oscillators at a constant temperature in order to prevent changes in the frequency due to variations in ambient temperature. The OCXO can achieve high frequency stability with a crystal but can have longer warm up times e.g. 2 minutes . The TCXO can be stable within a few seconds smaller in size and cheaper than an OCXO but can experience more cycle slips or hiccups.

A GPS satellite s position and PR measurement can define a sphere centered on the GPS satellite with radius equal to the PR measurement. The CP can be the carrier phase in the segment of the current cycle of the GPS signal i.e. wavelength measured as a fraction of a full wavelength i.e. in radians or degrees . The ICP can be the total integrated number of carrier cycles since a carrier tracking loop has established phase lock measured in an integer number of carrier cycles plus a fraction. The ICP change can be the difference between the ICP at a first time and the ICP at a second time. The ICP may not be calculated in a standard GPS receiver but the ICP measurement and prediction may be used to support a precise carrier phase solution. The ICP measurement differences may also be used to filter noise and multipath in the PR measurements. The ICP measurement or prediction can include the total change in carrier phase which can be used to calculate a total change in host vehicle motion e.g. GPS receiver motion GPS satellite motion and an effective movement of a GPS receiver and GPS satellite clocks in the absence of cycle slips. For example in a host vehicle travelling 100 meters second m sec in the direction of a GPS satellite the ICP can increment on a GPS signal carrier by the velocity wavelength of the GPS signal carrier e.g. 100 0.1903 meters the Lwavelength every second .

PR measurements PR and ICP measurements ICP may be generated from at least two signals combined together to form a wide lane measurement or a narrow lane measurement. For example a narrow lane combination of PR measurements using Land Lcan be represented by PR PR PR 2.

A CP measurement where f is the phase combination used used in the ICP can use multiple GPS signals or a single GPS signal. For example a wide lane combination of CP measurements using Land Lcan be represented by with 86.19 cm a narrow lane combination of CP measurements using Land Lcan be represented by with 10.70 cm and a single frequency CP measurement using Lor Lcan be represented by with 19.03 cm or with 24.42 cm respectively. The CP or CP measurements can include a LCP a LCP a wide lane CP a narrow lane CP or combinations of these CPs.

The GPS engine can generate a PR measurement and an ICP measurement for the GPS CP cycle slip detector . In an example the PR measurement can be a narrow lane PR measurement and the ICP measurement can be a wide lane ICP measurement. The GPS CP cycle slip detector can include an ICP change measurement module an ICP change prediction module and a processor .

The integrated CP ICP change measurement module can generate a measured ICP change of a measured CP of a GPS signal for a time duration such as one second. In another example where a momentary loss of a GPS CP track occurs the time duration can be set for longer such as less than five seconds.

The ICP change prediction module can determine a predicted ICP change of the GPS signal CP for the time duration using directional position information. The directional position information can be provided by a navigation module discussed in greater detail below . The processor can identify in near real time a GPS CP cycle slip when the measured ICP change output by the ICP change measurement module varies from the predicted ICP change output by the ICP change prediction module by greater than a threshold value.

Near real time can refer to time within a sampling cycle of directional sensor information or GPS signal information such as a sampling cycle of 50 Hertz Hz i.e. less than 20 ms . In an example the threshold value can be set to one half wavelength of the CP a multiple of a half wavelength of the CP or a fraction of the CP wavelength greater than a quarter of the CP wavelength. The threshold value can be used to determine the sensitivity of detecting cycle slips or other CP errors. The processor can correct in near real time the GPS CP cycle slip by replacing the measured ICP change for a CP cycle with the predicted ICP change when the measured ICP change varies from the predicted ICP change by greater than the threshold value.

The GPS receiver may also include a channel manager a navigation module a radio a PR smoothing filter and a relative position estimator . The channel manager can generate GPS satellite information including GPS satellite ephemeris information and provide telemetry processing. The navigation module can be coupled to a directional sensor. The navigation module may generate a change in position of the host vehicle of the GPS receiver using directional sensor information. The change in position detected by the directional sensor may be calibrated by past GPS PR and delta range DR measurements.

The directional sensor can include an inertial measurement unit IMU an inertial navigation system INS a motion sensor an accelerometer a magnetometer a barometer a rotation sensor a gyroscope or a combination of these sensors. The radio can be coupled to an antenna for transceiving messages with a remote radio on a remote vehicle or a known ground location. The radio can receive remote vehicle position and or velocity information such a filtered ICP and a filtered PR from a remote GPS receiver e.g. a second GPS receiver . The filtered ICP and the filtered PR from the remote GPS receiver can be differenced e.g. single differenced or double differenced with a filtered ICP and a filtered PR from the GPS receiver to correct for clock errors or to determine a relative position between the remote receiver of a remote vehicle and the GPS receiver of the host vehicle. The radio can compensate for transmission delay of the remote vehicle position and or velocity information from a remote GPS receiver relative to the position and or velocity information from the host GPS receiver.

In an example the GPS CP cycle slip detector can generate the PR measurement and an ICP change from the PR measurement and the ICP measurement of the GPS engine a clock estimate from the radio and a clock estimate from the navigation module . A PR smoothing filter may generate a filtered PR using an output of the GPS CP cycle slip detector. In an example the output of the GPS CP cycle slip detector can include a narrow lane PR and or an ICP change. The relative position estimator can generate a three dimensional 3D relative position vector r using the filtered PR output by the smoothing filter a host vehicle velocity from the navigation module and a remote vehicle velocity e.g. a remote GPS receiver velocity from the radio.

Each carrier smoothing filter or PR smoothing filter can include a filter for handling noise and other inaccuracies such as a Kalman filter. The relative position estimator and or navigation module may also include a filter for handling noise and other inaccuracies such as a Kalman filter.

With measurements observed over time containing noise random variations and other inaccuracies the Kalman filter can generate values that tend to be closer to the true values of the measurements and their associated calculated values. The Kalman filter can produce estimates of the true values of measurements and their associated calculated values by predicting a value estimating the uncertainty of the predicted value and computing a weighted average of the predicted value and the measured value. The most weight can be given to the value with the least uncertainty. The estimates produced by the method used by the Kalman filter tend to be closer to the true values than the original measurements because the weighted average has a better estimated uncertainty than either of the values that went into the weighted average.

The ICP change prediction module can use directional sensor information including the change in position of the host vehicle generated by the directional sensor and GPS satellite ephemeris information. illustrates an example of a host vehicle with a GPS antenna and a directional sensor . The host vehicle is shown as an airplane above the ground .

Examples of vehicles e.g. host vehicles or remote vehicles can include land vehicles e.g. a car a tank or unmanned ground vehicle UGV water vehicle e.g. a ship a submarine or an unmanned surface vehicle USV an airborne vehicle e.g. a jet a missile or an unmanned aerial vehicle UAV or a space vehicle SV such as a satellite a space shuttle or a manned or un unmanned spacecraft.

The ICP change prediction module can determine a change in position projected along a GPS satellite line of sight LOS from a phase center of a GPS antenna over the time duration account for a clock phase error change over the time duration and or integrate a velocity of the GPS satellite projected along the GPS satellite LOS over the time duration. The ICP change prediction module can sum contributions from the change in position the clock phase error change if any and the integration of the velocity of the GPS satellite to generate the predicted ICP change.

In an example the predicted ICP change ICPgenerated by the ICP change prediction module using the directional sensor information can be represented by Equation 1 shown below where ICPis the predicted integrated carrier phase change for a GPS satellite with index i uis a transpose of a unit line of sight LOS vector from the GPS receiver to the GPS satellite pis a change in a position vector of the directional sensor such as an inertial measurement unit IMU is an angular velocity vector of the GPS receiver l is a lever arm vector between the IMU and a phase center for a GPS antenna for the GPS receiver is a clock phase error change over the time duration and is a velocity vector of the GPS satellite. ICP 1 Equation 1 

In an example the vehicle dynamics of the vehicle with the GPS receiver can be represented by the term u p 1 clock dynamics can be represented by the term and space vehicle SV dynamics or GPS satellite dynamics can be represented by the term uv dt shown in Equation 1.

Referring back to the GPS antenna can receive GPS signals from GPS satellites and . A reference GPS satellite may have a higher elevation than remaining GPS satellites in communication with a GPS receiver where the remaining GPS satellites may be referred to as index GPS satellites .

The predicted ICP change ICPrepresentation can apply to reference and index satellites. The distinction between a reference GPS satellite and an index GPS satellite can be useful when determining a predicted ICP change single difference ICPbetween a predicted ICP change ICPfor an index GPS satellite and a predicted ICP change ICPfor a reference GPS satellite where reference r is substituted for index i in Equation 1.

The differences such as single differences can be useful in accounting for the clock phase error change over the time duration by cancelling the clock phase error change. Difference measurements can be calculation between measurements from two receivers or two GPS satellites. For example a single difference can represent a subtraction of a distance measurement from a first GPS satellite e.g. the reference satellite from a distance measurement from a second GPS satellite e.g. the index satellite at the same GPS receiver. A double difference can represent a subtraction of a single difference measurement from a first GPS receiver e.g. the local GPS receiver from a single difference measurement from a second GPS receiver e.g. the remote GPS receiver using the same first and second GPS satellites represented in the single differences. Alternatively a single difference can represent a subtraction of a distance measurement of a reference GPS satellite or an index GPS satellite to a first GPS receiver e.g. the local GPS receiver from a distance measurement of the reference GPS satellite or the index GPS satellite to a second GPS receiver e.g. the remote GPS receiver . Double differences can then be calculated using the single differences between two GPS satellites. The clock phase error change may be essentially removed from Equation 1 by subtracting the predicted ICP for the reference GPS satellite i.e. doing the prediction for the single difference .

Each GPS satellite can have a unit line of sight LOS vector from the GPS receiver to the GPS satellite. For example a LOS vector for an index GPS satellite and a LOS vector for a reference GPS satellite may be generated using PR information. A unit LOS vector for the index GPS satellite can be calculated from the LOS vector for the index GPS satellite and a unit LOS vector for the reference GPS satellite can be calculated from the LOS vector for the reference GPS satellite. The unit vector in a normed vector space is a vector often a spatial vector whose length is equal to one the unit length .

The GPS antenna can have a phase center which can be used as the center for a GPS antenna for positioning calculations. The directional sensor such as an inertial measurement unit IMU can have a directional sensor center such as an IMU center which can be used as the center for the directional sensor e.g. IMU for positioning calculations. The GPS antenna phase center and directional sensor center can be measured and or provided in the specifications for the GPS antenna or directional sensor respectively.

The GPS satellite can have a position relative to a horizon i.e. horizontal plane with the ground relative to the GPS receiver for the host vehicle. The GPS satellite can be in an overhead position when the GPS satellite is in a perpendicular position with the horizontal plane or 90 degrees with the horizon. An elevation angle can be an angle of the GPS satellite with the horizon relative to the GPS receiver where the elevation angle can have a range from zero degrees 0 to ninety degrees 90 . For example an index GPS satellite is shown with an elevation angle . The GPS receiver can have a greater multipath error when the GPS satellite has a smaller elevation angle which can adversely affect GPS positioning precision and can generate greater number of cycle slips. A multipath error can occur when multiple duplicate phase shifted signals due to reflection and other causes are received by the GPS receiver.

When a GPS receiver is a static receiver e.g. a receiver not in motion relative to the ground a directional sensor on the host vehicle may not be needed thus the change in position of the directional sensor and the angular velocity of the GPS receiver e.g. u p 1 shown in Equation 1 can be approximately zero. Alternatively when a GPS receiver with a directional sensor is static e.g. the vehicle dynamics is static the directional sensor information may not contribute to the change in position and the angular velocity of the GPS receiver due to the lack of motion by the host vehicle thus the change in position and the angular velocity of the GPS receiver u p 1 shown in Equation 1 may be approximately zero.

In an example space vehicle SV dynamics or GPS satellite dynamics represented by the term uv dt can be further evaluated as shown. The SV dynamics can be expanded for evaluation by Expression 1 where u v is the dot product of the unit LOS vector ufrom the GPS receiver to the GPS satellite e.g. the GPS satellite of interest or index GPS satellite and a velocity vector of the GPS satellite in a Earth Center Earth Fixed ECEF coordinate system frame.

The integral can be performed over the ICP change ICP ICP ICPfor a specified time duration or time interval such as one second 1 sec where k represents a positive integer for time. If simple differences e.g. a single difference is used between the unit LOS vector ufrom the index GPS satellite and a unit LOS vector ufrom the reference GPS satellite the single difference unit LOS vector ucan be represented by u u u. For sufficient accuracy u and ucan be assumed to be constant over a short time interval t t so Expression 1 can be represented by Expression 2.

The term can be computed from ephemeris data and the integral evaluation can be approximated by Equation 2 where N is a positive integer representing the number of subintervals selected and

When the measured ICP change varies from the predicted ICP change by greater than a threshold value a GPS CP cycle slip is detected . illustrates a diagram of GPS CP cycle slip correction using a GPS ICP measurement corrected with a GPS ICP prediction. When the measured ICP change varies from the predicted ICP change by greater than the threshold value the measured ICP change for a CP cycle may be replaced with the predicted ICP change for the time duration. In another example the predicted ICP change may replace the measured ICP change for multiple or consecutive cycle slips e.g. a momentary loss of a GPS CP track when the measured ICP change varies from the predicted ICP change by greater than the threshold value until the measured ICP is within the threshold value of the predicted ICP.

In another example an ICP change can be generated measured or predicted separately on independent carrier frequencies or with independent carrier components such as a first carrier frequency and a second carrier frequency e.g. Lor L before a wide lane or a narrow lane combination. The ICP change can be compared between the first carrier frequency and second carrier frequency by applying a threshold value to the first carrier frequency. When the second carrier frequency varies by more that the threshold value a cycle slip may be detected.

The predicted ICP change may be use to select the carrier frequency without the cycle slip for positioning measurements. In an example the carrier frequency with the least variation from the predicted ICP change may be the carrier frequency selected for positioning measurements. In another example the threshold can be applied to the predicted ICP change and when both the first carrier frequency and the second carrier frequency vary by more than a threshold value a cycle slip can be detected on both carrier frequencies and the predicted ICP change can be used instead of the measured ICP change of the carrier frequencies. Using a corrected ICP change in each carrier smoothing filter can immunize integer search against cycle slips.

The GPS CP cycle slip detector may include a synchronization module for aligning navigation information from the navigation module with the measured ICP and a pseudo range PR from the GPS engine or GPS satellite ephemeris information. Detecting GPS CP cycle slip may synchronize the measured ICP change with the predicted ICP change. illustrates a diagram of synchronizing or aligning navigation information e.g. directional sensor information with channel information e.g. GPS satellite ephemeris information for a same time duration. The navigation module can run or sample directional sensor data with NAV updates B D on a navigation timeline at a specified frequency e.g. 50 Hz independent of channel manager sampling or GPS engine carrier tracking. A LOS aiding thread in the navigation module can calculate polynomial coefficients for each channel as polynomial updates B D on an aiding thread timeline to curve fit to the navigational velocity within a specified time after the NAV updates or the specified frequency phase shifted from the NAV updates. A separate channel thread in the channel manager can run or sample at channel time correlated to N in Equation 2 using the polynomial coefficients calculated by the LOS aiding thread to move B C the LOS velocity aiding to the channel update time A C on a channel thread timeline .

Another example provides a method for detecting a global positioning system GPS carrier phase CP cycle slip as shown in the flow chart in . The method includes the operation of measuring an integrated CP ICP change from a GPS signal CP for a time duration as in block . The operation of predicting an ICP change for the GPS signal CP for the time duration using directional position information follows as in block . The next operation of the method can be detecting in real time a GPS CP cycle slip when the measured ICP change varies from the predicted ICP change by greater than a threshold value as in block .

In another example a computer program product including a computer readable program code embodied on a computer usable medium may be adapted to execute the method for detecting the GPS CP cycle slip and or correcting the GPS CP cycle slip. The computer usable medium can be a non transitory medium. In another aspect the GPS CP cycle slip detection and or correction can be performed by a processor.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive or other medium for storing electronic data. The base station and mobile station may also include a transceiver module a counter module a processing module and or a clock module or timer module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

