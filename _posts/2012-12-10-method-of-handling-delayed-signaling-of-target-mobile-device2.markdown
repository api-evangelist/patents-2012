---

title: Method of handling delayed signaling of target mobile device
abstract: A method of handling delayed signaling of a target mobile device for a first network control node is disclosed. The method comprises the first network control node receiving a request from a network gateway node; the registered network control node setting a flag and informing a data base to set the flag for the target mobile device when the first network control node fails to deliver the request to the target mobile device; and the first network control node sending the flag to a second network control node when the target mobile device is reachable in the second network control node.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09603037&OS=09603037&RS=09603037
owner: HTC Corporation
number: 09603037
owner_city: Taoyuan
owner_country: TW
publication_date: 20121210
---
This application claims the benefit of U.S. Provisional Application No. 61 568 172 filed on Dec. 8 2011 and entitled Method of handling delayed triggers for temporary unreachable UE the contents of which are incorporated herein.

The present invention relates to a method utilized in a mobile communication environment and more particularly to a method of handling delayed triggering when a target mobile device or user equipment UE is temporarily unreachable in the mobile communication environment.

Machine type communication MTC is one type of data communication including one or more entities not requiring human interactions. That is the MTC refers to the concept of communication based on a network such as the existing GERAN UMTS long term evolution LTE or the like used by a machine device instead of a mobile station MS used by a user. The machine device used in the MTC can be called an MTC device. There are various MTC devices such as a vending machine a machine of measuring a water level at a dam etc. That is the MTC is widely applicable in various fields. The MTC device has features different from that of a typical MS. Therefore a service optimized to the MTC may differ from a service optimized to human to human communication. In comparison with a current mobile network communication service the MTC can be characterized as a different market scenario data communication less costs and efforts a potentially great number of MSs for communication wide service areas low traffic per MS etc.

Machine to machine M2M communications may take advantage of deployed wireless networks based on Third Generation Partnership Project 3GPP technologies such as Global System for Mobile Communications GSM Universal Mobile Telecommunications System UMTS Long Term Evolution LTE Long Term Evolution Advanced LTE Advanced and or other technologies such as WiMAX Worldwide Interoperability for Microwave Access or those developed by the Institute for Institute of Electrical and Electronics Engineers IEEE and 3GPP2. M2M communications may use networks based on these technologies to deliver business solutions in a cost effective manner. In a circumstance involving ubiquitous deployment of wireless networks the availability of the wireless networks may facilitate and or encourage the deployment and use of M2M devices. Additionally further enhancements to these technologies may provide additional opportunities for the deployment of M2M based solutions.

A Device Trigger Delivery Gateway DT GW could be a standalone physical entity or a functional entity. At least one Device Trigger Delivery Gateway is owned by and deployed in a HPLMN that supports the MTC device trigger feature for subscribed devices. The DT GW is deployed on the boundary between the HPLMN and the public Internet. Alternatively the DT GW is owned and operated by a 3rd party on behalf of the HPLMN and or deployed in the public Internet. In which case a secure tunnelling mechanism between the DT GW and the HPLMN is utilized.

The MTC server sends a trigger request message encapsulated in an IP packet to the appropriate DT GW or interworking function for machine type communication MTC IWF . The trigger request message could contain pertinent information needed to route the trigger e.g. device subscriber identity trigger command arguments relevant device location information security parameters etc. . When a trigger request message is received from a submitting node e.g. an authorized MTC server the DT GW or MTC IWF should first authorize the received trigger request message making sure it originated from a trusted MTC server and is targeted for a device for which the MTC server is authorized to trigger. The next step is for the DT GW or MTC IWF to determine the reachability of the MTC device. Per the requirements specified in clause 5.8 of 3GPP documentation TS 22.368 b.1.1 a trigger able MTC device can be received in the detached state in the attached state without a publically routable PDP context PDN connection and in the attached state with a publically routable PDP context PDN connection.

When the MTC server sends Device trigger request to MTC IWF or DT GW the MTC IWF can retrieve info about registered network control node of the target triggering UE from the home subscriber server home location register HSS HLR . Then the MTC IWF forwards the Device trigger request to one of the registered network control node e.g. MSC SGSN MME. If the forwarding network control node cannot deliver the trigger request to the target UE e.g. the UE is temporarily unreachable it replies delivery failure report to the MTC IWF. However when the UE becomes reachable to a network control node later it is not clear how the MTC IWF delivers the trigger request to the UE via a network control node which may be different from the one which failed to deliver the trigger request.

The MTC IWF can quarry a domain name server DNS or PDN gateway P GW about the IP address of the target UE and send the trigger request via the obtained IP address in the user plane. If the user plane delivery fails the MTC IWF can only try to deliver trigger via T5 or T4 path in the control plane. It is not clear how the MTC IWF delivers the trigger via the user plane if the IP address of the UE becomes reachable.

It is therefore a primary objective of the present invention to provide method of handling delayed signaling of a target mobile device.

A method of handling delayed signaling of a target mobile device for a first network control node is disclosed. The method comprises the first network control node receiving a request from a network gateway node the registered network control node setting a flag and informing a data base to set the flag for the target mobile device when the first network control node fails to deliver the request to the target mobile device and when the target mobile device is reachable in a second network control node the first network control node sending the flag to the second network control node if the second network control node is not the first network control node wherein according to a status of the flag the second network control node is capable of determining whether to inform the data base that the target mobile device is reachable in the second network control node.

A method of handling delayed signaling of a target mobile device for a network gateway node is disclosed. The method comprises the network gateway node receiving a request from a server and storing the request the network gateway node sending the request to a first network control node for delivering the request to the target mobile device the network gateway node informing a data base to set a flag when the network gateway node receives a delivery failure report of the request from the first network control node the network gateway node receiving an indication from the data base when the data base detects that the target mobile device is reachable at a second network control node and the flag is set wherein the indication indicates the second network control node which the target mobile device registers to and the network gateway node sending the request to the second network control node according to the received indication.

A method of handling delayed signaling of a target mobile device for a network gateway node is disclosed. The method comprises the network gateway node informing at least one of a HSS a HLR a PDN gateway node and a DNS to set a flag indicating a message waiting for delivery for the target mobile device when the network gateway node fails to deliver a request to the target mobile device via a first IP address of the target mobile device in user plane.

These and other objectives of the present invention will no doubt become obvious to those of ordinary skill in the art after reading the following detailed description of the preferred embodiment that is illustrated in the various figures and drawings.

The following description is of the best contemplated mode of carrying out the invention. This description is made for the purpose of illustrating the general principles of the invention and should not be taken in a limiting sense. Note that the 3GPP target stations described herein are used to teach the spirit of the invention and the invention is not limited thereto.

In order to solve the aforementioned problems the invention provides methods for delayed signaling for temporarily unreachable mobile device where the signaling may be related trigger messages but not limited herein and the data transmission may be with small payload which is eligible for delivering via control plane. Please note that the signaling may be for mobile device with particular MTC features e.g. MTC monitoring MTC device triggering MTC small data transmission etc that is depending on the services requested from the MTC server. is an exemplary system architecture for MTC Machine Type Communication which illustrates a mobile communication environment or mobile communication system according to an example of the disclosure. The mobile communication environment includes at least one mobile communication device a service network and a MTC server . In the mobile communication environment the mobile communication device which may be a Mobile Station MS User Equipment UE is wirelessly connected to the service network for obtaining wireless services.

In the mobile communication environment the mobile communication device is configured for MTC and runs an application for MTC. The mobile communication device may communicate with the MTC server via the service network which may be a 3GPP network e.g. Global System for Mobile Communication GSM network Universal Mobile Telecommunications System UMTS network or Evolved Packet System EPS network. The MTC server may be a server capable of triggering MTC applications also called MTC services on the mobile communication device . The MTC server can be further connected to one or more MTC application server via certain Application Programming Interfaces API and provides triggering services via the service network for the connected MTC application servers. Specifically the MTC server can send a trigger request message or called trigger indication via the service network to the mobile communication device for executing target MTC application s .

The service network may comprise an access network or called radio access network and a core network wherein the access network allows connectivity between the mobile communication device and the core network by providing the functionality of wireless transmissions and receptions to and from the mobile communication device for the core network and the core network signals the required operations to the access network for providing wireless services to the mobile communication device . The service network may be a network in compliance with the Global System for Mobile Communication GSM Universal Mobile Telecommunications System UMTS or Evolved Packet System EPS technology. The access network may be a GSM Edge Radio Access Network GERAN in the GSM technology a UMTS Terrestrial Radio Access Network UTRAN in the WCDMA HSPA technology or an Evolved UTRAN E UTRAN in the LTE LTE Advanced technology and the core network may be a GSM core network a General Packet Radio Service GPRS core network in the GSM UMTS system or an Evolved Packet Core EPC network in the EPS system.

The core network is connected to the access network which may include a network control node e.g. SGSN MME MSC a data base e.g. HSS and or HLR a PDN gateway node e.g. P GW GGSN and a network gateway node e.g. device trigger delivery gateway MTC IWF for providing various services to the mobile communication device . Please note that the data base can also co located with the network gateway node . For example the SGSN MME MSC is the key network control node for packet routing and transfer mobility management e.g. attach detach and location management session management logical link management authentication and charging functions and interfaces an E UTRAN UTRAN GERAN for the creation of relevant radio bearers. The PDN gateway node is responsible for inter working between the UMTS or EPS network and external networks. The HSS or HLR is a central database that contains user related and subscription related information. HLR is responsible for enabling subscriber access which can be considered as a subset of HSS. Functions of HSS HLR include functionalities such as mobility management call and session establishment support user authentication and access authorization. The service related entity e.g. MTC server may be inside or outside of the service network and may indirectly connect to network entity e.g. via network gateway or interworking function after appropriate authorization process or directly connect to GGSN PGW if user plane connection is established and remains active. Further the core network may provide different interfaces to the MTC server . The MTC server may transmit a request message to the network gateway node with interworking function IWF to process service request e.g. trigger service received from the MTC server for further trigger delivery where the network gateway node is an entry point of the service network to the MTC server and an intermediate network control node to interface with SMS SC SMS service center or network control node e.g. MME SGSN MSC. Please note that the mobile communication device receives the request message from network control node via NAS signaling connection.

When the MTC server sends a request e.g. trigger request to the network gateway node the network gateway node can retrieve registered network control node information of a target mobile device or UE from the data base so as to know the target UE registers at which network control node s . A registered network control node of the target UE can be its serving network control node. Then the network gateway node forwards the request to one of the registered network control node s e.g. MSC SGSN MME. If that registered network control node can not deliver the request to the target UE an exemplary process can be used to handle delayed signaling of the target UE in a validity period for the registered network control node when the target UE is temporarily unreachable. The validity period indicates the time period during which the request message is valid. Please refer to is a flow chart of the process . The process can be compiled into the program code and includes the following steps 

Step The registered network control node sets a UE reachability request parameter URRP flag as well as informs the data base to set the URRP flag for a target UE when the registered network control node fails to deliver the trigger request to the target UE.

Step When the target UE becomes reachable in a registered network control node denoted as second network control node below which is not the previous registered network control node the second network control node retrieves an EPS mobility management mobility management EMM MM context including the URRP flag from the previous registered network control node . Please note that the second network control node may also be the previous registered network control node . In this case Step is not executed.

Step The second network control node checks the URRP flag. If active it sets the URRP flag as inactive and informs the data base using an appropriate message e.g. UE Activity Notification IMSI URRP .

According to the process the registered network control node receives the trigger request from the network gateway node e.g. DT GW or MTC IWF . The trigger request may include IMSI priority validity period etc. The registered network control node can not deliver the trigger request because the target UE is temporarily unreachable. The registered network control node sets the URRP flag as well as informs the data base e.g. HSS HLR to set the URRP flag for the target UE by International Mobile Subscriber Identity IMSI when the delivery of the trigger request fails. Such that the URRP flags are active at the registered network control node and the data base . Also the registered network control node sends a delivery failure report which may include a failure cause to the network gateway node to inform of the delivery failure of the trigger request. When the target UE becomes reachable in the second network control node which is not the previous registered network control node the second network control node retrieves the EMM MM context with the URRP flag from the previous registered network control node . Namely the registered network control node includes the URRP flag in the EMM MM context sent to the second network control node. Since the second network control node retrieves the URRP flag from the previous registered network control node the second network control node is aware of the status of the URRP flag and can determine whether to inform the data base of the reachability of the target UE according to this status. If the URRP flag is active the serving network control node can then send an appropriate message to inform the data base of the target UE being reachable at the second network control node. Preferably the appropriate message is UE Activity Notification IMSI URRP . In this situation the data base can know that the target UE is currently reachable at the second network control node.

Please refer to which is a flow chart of an exemplary process . When the MTC server sends a request e.g. trigger request to the network gateway node the process can be used to handle delayed signaling of a target UE in a validity period for the network gateway node . The process can be compiled into the program code and includes the following steps 

Step The network gateway node receives the trigger request from the MTC server and stores the trigger request.

Step The network gateway node sends the trigger request to the registered network control node of the target UE.

Step The network gateway node informs the data base to set a message waiting flag and register the address of the network gateway node when the network gateway node receives a delivery failure report of the trigger request from the registered network control node .

Step The network gateway node receives an indication from the data base when the data base detects the target UE is reachable at the second network control node which may be the previous registered network control node or not and the message waiting flag is set as active.

Step The network gateway node sends the trigger request to the second network control node according to the received indication.

According to the process when the network gateway node e.g. DT GW or MTC IWF receives the trigger request from the MTC server the network gateway node stores the trigger request and forwards the trigger request to the registered network control node of the target UE. When the delivery of the trigger request fails e.g. due to the temporarily unreachable UE or network control node overload congestion the registered network control node sends the delivery failure report to the network gateway node . When the network gateway node receives the delivery failure report of the trigger request from the registered network control node the network gateway node informs the database e.g. HSS HLR to set the message waiting flag and register the address of the network gateway node . It is noticed that if the target UE originally has more than one registered network control nodes the network gateway node may deliver the trigger request message via one or more registered network nodes . In this case the network gateway node may register its address and set the message waiting flag to the data base when receiving failure delivery reports from the registered network control node s for the failed delivery attempts. Further when the data base receives the notification from the network gateway node for the message waiting flag and the address of the network gateway node it checks the URRP flag. If the URRP flag is not set as active the data base sets the URRP flag as active and initiates the UE reachability procedure by sending a notification message indicating active URRP flag and the IMSI of the target UE to the registered network control node s . Since the message waiting flag is active the data base sends an indication indicating the address of the second network control node to the network gateway node when the data base detects the target UE is reachable at the second network control node. The network gateway node receives the indication of the second network control node address from the data base and sends the stored trigger request to the second network control node accordingly. The indication indicates the second network control node which the target UE registers to. In this situation the network gateway node can deliver the trigger request to the second network control node for example via direct delivery T5 path or via SMS delivery T4 path.

Therefore the network gateway node delivers the trigger request to the target UE via UE s registered network node i.e. the second network control node mentioned above that may be the same as or different from the network control node that previously failed to deliver the trigger request e.g. due to temporarily unreachable target UE or network control node overload congestion etc. Also when the target UE becomes available the network gateway node can also determine a delivery route based on network status e.g. overload condition.

Briefly when the MTC server sends the trigger request to the network gateway node the network gateway node stores and forwards the trigger request to one of the registered network control node s e.g. MSC SGSN MME of the target UE. If that registered network control node can not deliver the trigger request successfully e.g. due to temporary absence of the target UE or network node overload congestion the registered network control node sets the URRP flag as well as informs the data base to set the URRP flag for the target UE. Apart from that the registered network control node sends the delivery failure report to the network gateway node . The network gateway node may attempt to deliver the trigger request via another registered network control node. When the network gateway node receives the delivery failure reports of the trigger request from the registered network control node s for attempted trigger deliveries the network gateway node informs the data base to set the message waiting flag. Once the target UE becomes reachable in the registered network control node i.e. the second network control node mentioned above which is not the previous registered network control node the second network control node retrieves the EMM MM context with the URRP flag from the previous registered network control node . Please note that if the second network control node is just the previous registered network control node then there is no need for the second network control node to retrieve the EMM MM context. The second network control node sends a notification message e.g. UE Activity Notification message to inform the data base of the target UE being reachable at the second network control node. The data base detects the target UE is reachable at the second network control node and sends the indication to the network gateway node . The indication indicates to the network gateway node that the target mobile device is at the second network control node. According to the indication the network gateway node can deliver the trigger request to the second network control node via delivery T5 path or via SMS delivery T4 path. The message waiting flag the stored trigger message at the network gateway node and the URRP flag at the registered network control node s and the data base are valid before the expiry of the validity period. That is before the expiry of the validity period the network keeps attempting to deliver the trigger message.

In some examples the network gateway node e.g. MTC IWF can quarry a domain name server DNS or the PDN gateway node e.g. P GW about the IP address of the target UE and send the trigger request via the obtained IP address in the user plane. Please refer to which is a flow chart of an exemplary process . The process can be used to handle delayed signaling of the target UE for the network gateway node when a delivery of a request e.g. trigger request fails in the user plane. The process can be compiled into the program code and includes the following steps 

Step The network gateway node receives a trigger request from the MTC server and then stores the trigger request.

Step The network gateway node attempts to deliver the trigger request to the PDN gateway node via user plane if it obtains a first IP address of the target UE from the data base or a DNS or the PDN gateway node .

Step The network gateway node informs the data base or the DNS or the PDN gateway node to set a message waiting flag for the target UE and registers its address when the network gateway node fails to deliver the trigger request to the target UE via the first IP address.

Step The network gateway node receives notification from the data base or the DNS or the PDN gateway node with the information of a second IP address of the target UE and may attempt to deliver the stored trigger request in the user plane via the second IP address.

According to the process the network gateway node informs the data base e.g. HSS HLR or DNS or PDN gateway node to set the message waiting flag for a target UE when failing to deliver a trigger request to the target UE via the first IP address. Since the message waiting flag is active the data base informs the network gateway node of the address of the new registered network control node when the data base detects activity of the target UE or the data base or DNS or PDN gateway node informs the network gateway node of the information of the second IP address of the target UE when the data base or DNS or PDN gateway node updates the second IP address of the target UE. If the trigger request has not yet sent in the control plane e.g. due to temporarily absent UE or network congestion the network gateway node can deliver the trigger request to the target UE via the second IP address in the user plane.

Furthermore the aforementioned steps of the processes including suggested steps can be realized by means that could be a hardware a firmware known as a combination of a hardware device and computer instructions and data that reside as read only software on the hardware device or an electronic system. Examples of hardware can include analog digital and mixed circuits known as microcircuit microchip or silicon chip. Examples of the electronic system can include a system on chip SOC system in package SiP a computer on module COM and the communication device .

To sum up when the MTC server sends a request e.g. trigger request to the network gateway node the network gateway node stores and forwards the request to one of the registered network control nodes. If the registered network control node cannot deliver the request due to temporary absence of the target UE the registered network control node sets the URRP flag as well as informs the HSS HLR to set the URRP flag for the target UE. Apart from that the registered network control node sends the delivery failure report to the network gateway node. When the network gateway node receives the delivery failure report the network gateway node informs the HSS HLR to set the message waiting flag. Once the target UE becomes reachable in a new serving network control node the new serving network control node retrieves the EMM MM context with the URRP flag from the previous registered network control node if the new serving network control node is not the previous registered network control node. The new serving network control node informs the HSS HLR of the target UE being reachable at the new serving network control node. When the HSS HLR detects the target UE is reachable at the new serving network control node the HSS HLR sends the indication to the network gateway node. The network gateway node can deliver the request to the new serving network control node according to the indication. In some examples the network gateway node can quarry DNS or PDN gateway node about the IP address of the target UE and send the request via the obtained IP address in the user plane. If the network gateway node fails to deliver the request via a reachable IP address in the user plane the network gateway node informs the HSS or DNS or PDN gateway node to set the message waiting flag for the target UE. If the HSS or DNS or PDN gateway node updates the IP address of the UE or detects the UE activity it informs the network gateway node of the info of available IP address of the UE. If the request has not yet been sent in the control plane the network gateway node can use the available IP address to deliver the request to the UE via the user plane.

Those skilled in the art will readily observe that numerous modifications and alterations of the device and method may be made while retaining the teachings of the invention. Accordingly the above disclosure should be construed as limited only by the metes and bounds of the appended claims.

