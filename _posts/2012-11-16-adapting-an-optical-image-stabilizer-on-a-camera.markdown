---

title: Adapting an optical image stabilizer on a camera
abstract: Disclosed are methods and systems of adapting an optical image stabilizer (OIS) for a camera, the methods comprising acquiring an image of the scene; obtaining image context associated with the image of the scene; selecting a mode of operating the OIS based on the obtained image context; and, applying the OIS using the selected mode of operation.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09124805&OS=09124805&RS=09124805
owner: BlackBerry Limited
number: 09124805
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20121116
---
The present matter is related to optical image stabilizers OIS and in particular to OISs for cameras in electronic devices.

Communication devices such as mobile communication devices may be equipped with cameras. Cameras can use optical image stabilizers to assist with stabilizing the camera while the camera is capturing an image.

In accordance with an aspect described is a method of adapting an optical image stabilizer OIS for a camera the method comprising acquiring an image of the scene obtaining image context associated with the image of the scene selecting a mode of operating the OIS based on the obtained image context and applying the OIS using the selected mode of operation.

In accordance with another aspect described is an electronic device comprising a camera configured to acquire an image of the scene an image signal processor ISP connected to the camera for obtaining image context associated with acquired image of the scene and an optical image stabilizer OIS connected to the camera the OIS configured to operate in one of a selection of modes of operation based on image context obtained by the ISP.

In accordance with another aspect described is a computer readable memory comprising computer executable instructions which when executed cause a processor to instruct a camera to acquire an image of the scene obtain image context associated with the image of the scene select a mode of operating an optical image stabilizer OIS based on the obtained image context and apply the OIS using the selected mode of operation.

Cameras may be installed on electronic devices such as mobile communication devices. Cameras installed on mobile communication devices may be smaller than other types of handheld cameras such as point and shoot cameras. Smaller cameras can have smaller parts including smaller lenses and smaller image sensors and may also have smaller pixel sizes for representing or capturing images. As a consequence the exposure time may need to be increased as compared to cameras with larger pixel sizes in order to allow enough light to enter the smaller pixels during the image acquisition.

One potential effect of longer exposure times especially with handheld cameras is that the cameras may be prone to inadvertent movements which can result in a blurry image because the details of an optical image are spread on larger areas of the image sensor due to the camera movement. Thus longer exposure time can lead to more error or imprecision in the image quality due to one or more inadvertent movements of the electronic device or camera relative to the environment that is being captured in the image. In order to counteract this problem electronic devices can apply gain to the captured image to amplify and otherwise affect the electronic signal that represents the captured image so that it may appear brighter and easier to see. Accordingly the use of gain can decrease the need for exposure time that is required. However gain applied to the captured image can increase the noise level of the captured image resulting in a grainy image.

To address one or more of the above noted issues an optical image stabilizer can be implemented on the camera or electronic device that includes a camera. The optical image stabilizer can be used to stabilize the camera relative to the environment or image being captured so that the camera can remain exposed for a relatively longer period of time. For example a mobile communication device with a camera may be able to capture an image with a relatively longer exposure time by using an optical image stabilizer because the risk of inadvertent movement of the camera relative to the environment is diminished by the presence of the optical image stabilizer. Thus it may be less important to apply gain to the captured image when an optical image stabilizer is used resulting in less risk of a blurry captured image.

However there may be certain problems with the implementation of an optical image stabilizer on a mobile communication device or a camera. For example the implementation of an optical image stabilizer may be non uniform so that certain areas of a captured image e.g. the corners of the image are not stabilized as sharply as other areas resulting in the corners of a captured image becoming blurry. By way of further example the components of an optical image stabilizer may be smaller for a camera in a mobile communication device as compared to those found in another camera and therefore may be relatively more prone to mechanical or optical errors. During the time an image is being stabilized using the optical image stabilizer the errors in the optical image stabilizer may compound making the resulting image more blurry. For example when a camera is in use the optical image stabilizer may introduce mechanical defects through certain operations such as tilting the lens relative to the sensor. Such defects can result in a lower image quality when the optical image stabilizer is used as compared to the image quality that would result by not using the optical image stabilizer.

In order to address at least one of the above noted issues an optical image stabilizer may be selectively implemented on a camera. For example the optical image stabilizer may be implemented depending on the image of the scene or image context related to the camera at the time the image is captured. By way of further example the optical image stabilizer may be partially implemented depending on the image of the scene or image context. For example the optical image stabilizer may be configured to compensate for or counteract only certain camera movements certain amounts of camera movements or certain types of camera movements depending on the image context itself.

Cameras installed on electronic devices may also be used to capture videos. Similarly cameras installed on electronic devices may also be configured to implement or display a streaming viewfinder while capturing an image. For example the streaming viewfinder may display video data or video images prior to and while a signal is received to capture an image that is displayed in the streaming viewfinder. The environment or context in which an image is captured can be different from the environment or context in which a video is captured. For example when capturing a video the context or environment can continuously change whereas when capturing an image the intention may be that the context or environment remains still. By way of further example a particular defect that can arise while video is being captured is the visible shaking of the video during the time this video is recorded or captured.

To address one or more of the above noted issues an optical image stabilizer can be implemented on a camera or on an electronic device that includes a camera. The optical image stabilizer can be used to stabilize the image relative to the camera movement in order to limit or attempt to avoid visible shaking on the captured video.

However the stabilization during video capture or during the viewfinding that can occur prior to and during image capture may induce a general degradation of the user experience. For example such stabilization may not be able to compensate for all the camera movements. This might result in a residual low frequency movement highly visible on the video or viewfinder degrading the general user experience. By way of further example such implementation of the optical image stabilizer may generate extra defects such as audible noises in a certain range of compensation. This might result in an audible noises recorded by the speakers degrading the general user experience. In yet another example the temperature of the camera or optical image stabilizer may adversely affect the performance behaviour or power consumption of the optical image stabilizer. Certain temperatures may induce unwanted visible content in video for certain temperatures resulting in lower video quality compared to a video that is captured without the use of an optical image stabilizer or resulting in operational malfunctions of the camera or electronic device associated with the camera.

In order to address at least one of the above noted issues an optical image stabilizer may be selectively implemented on a camera. For example the optical image stabilizer may be implemented depending on the image context related to the camera at the time the video is captured. For example the optical image stabilizer may be configured to compensate for or counteract only certain camera movements certain amounts of camera movements or certain types of camera movements arising during the implementation or use of the viewfinder or during video acquisition or video capture.

The image context which is discussed in more detail below can include the intensity of the light available to the camera or any other parameter associated with the camera such as the exposure time the colour spectrum or colour temperature or histogram in the image to be captured the zoom level the temperature of the environment or camera the time of day geolocalization information e.g. from one or more sensors associated with the camera the flash activation e.g. whether the flash is activated or other indications or data available from the captured media e.g. from the captured video or viewfinder etc. The image context for example can be data obtained from a processor e.g. the time or temperature at or around the time of the image capture. By way of further example the image context can be obtained from the camera or from an image sensor in the camera . By way of further example the image context can be obtained from the camera application e.g. whether the flash is activated or whether the camera is in video or still picture or viewfinder mode . In yet a further example the image context can be obtained from a sensor such as a gyroscope accelerometer or magnetometer. Image context can include any combination of the above noted examples of image context.

In one or more embodiments an image of the scene or image context relating to the camera at the time an image is captured may identify certain predefined types of environments. For example an image signal processor associated with the camera may process or evaluate image context to determine whether the image context indicates or identifies a predefined type of environment. Predefined environments can include ranges of colour temperatures ranges of light intensity ranges of time of day and other types of image context or combinations of image context.

Predefined environments can be associated with types or modes of operation of an optical image stabilizer associated with the camera. For example an image context that indicates an intensity of light at least above a predefined threshold may be associated with not operating the optical image stabilizer. This can be because the level of light indicates a relatively short exposure time will be required so that the risk of inadvertent camera movement is minimized and so the use of the optical image stabilizer is not necessarily beneficial . Or image context that indicates that a camera lens is zoomed in to a particular image may be associated with operating the optical image stabilizer. This can be because when the field of view is reduced the defects introduced by the optical image stabilizer in the corners of the image may be minimized or not visible and as such the risk of the corners being blurry due to non uniform application of the optical image stabilizer may be negligible. By way of further example the colour temperature of an image to be captured could be consistent with an outdoor landscape image at dusk e.g. with a relatively minimal amount of light and the camera or lens configuration could be consistent with not zooming in. In such a situation a predefined operation or setting of the optical image stabilizer may be a different operation such as compensating for only a limited amount or a different range of camera movement.

Referring first to a front view of an example electronic device is illustrated. The electronic device can be a mobile phone portable computer smartphone tablet computer personal digital assistant a wearable computer such as a watch a television a digital camera or a computer system for example. The electronic device may be of a form apart from those specifically listed above.

The electronic device includes one or more cameras . The cameras are configured to generate camera media such as images in the form of still photographs motion video or another type of camera data. The camera media may be captured in the form of an electronic signal which is produced by an image sensor associated with the camera . Components other than the image sensor may be associated with the camera although such other components may not be shown in the Figures. More particularly the image sensor not shown is configured to produce an electronic signal in dependence on received light. That is the image sensor converts an optical image into an electronic signal which may be output from the image sensor by way of one or more electrical connectors associated with the image sensor. The electronic signal represents electronic image data which may also be referred to as camera media or camera data from which information referred to as image context may be computed.

In the embodiment illustrated the electronic device includes a rear facing camera . A rear facing camera is a camera which is located to obtain images of a subject near a rear face of the electronic device . That is the rear facing camera may be located on or near a rear face of the electronic device .

In other embodiments not illustrated the electronic device may include a front facing camera instead of or in addition to the rear facing camera. A front facing camera is a camera which is located to obtain images of a subject near the front face of the electronic device . That is the front facing camera may be generally located at or near a front face of the electronic device . The front facing camera may be located anywhere on the front surface of the electronic device for example the front facing camera may be located above or below the display . In at least some example embodiments the front facing camera may be provided in a central location relative to the display to facilitate image acquisition of a face. In at least some embodiments the front facing camera may be used for example to allow a user of the electronic device to engage in a video based chat with a user of another electronic device . In at least some embodiments the front facing camera is mounted internally within a housing of the electronic device beneath a region of the front face which transmits light. For example the front facing camera may be mounted beneath a clear portion of the housing which allows light to be transmitted to the internally mounted camera.

In at least some embodiments not shown the electronic device may include a front facing camera and also a rear facing camera. The rear facing camera may obtain images which are not within the field of view of the front facing camera. The fields of view of the front facing and rear facing cameras may generally be in opposing directions.

The electronic device includes a flash . The flash may in at least some embodiments be a light emitting diode LED flash. The flash emits electromagnetic radiation. More particularly the flash may be used to produce a brief bright light which may facilitate picture taking in low light conditions. That is the flash may emit light while an image is captured using the camera . In the embodiment illustrated the flash is located to emit light at the rear face of the electronic device . That is the flash is a rear facing flash in the illustrated embodiment. The electronic device may include a front facing flash instead of or in addition to the rear facing flash to emit light at the front face of the electronic device . The electronic device may have additional camera hardware which may complement the camera .

Still referring to a transparent cover covers the image sensor of the camera and the flash . The transparent cover allows light to pass through e.g. from the flash to the exterior of the housing or from the exterior of the housing to the image sensor and prevents debris or dirt from entering into the housing. Dirt or debris that could otherwise enter into the housing could potentially damage the components of the camera and flash . In the embodiment illustrated in a transparent cover is secured to the housing. For example the transparent cover may be secured to the housing an adhesive or using snaps or similar attachment mechanism in such a manner so as to be flush with the housing. The transparent cover can be transparent and made out of glass or plastic or another suitable transparent or translucent material. For example the lens can be made out of stained or partially stained glass.

Referring now to a block diagram of an example electronic device is illustrated. The electronic device of may include a housing which houses components of the electronic device . Internal components of the electronic device may be constructed on a printed circuit board PCB . The electronic device includes a controller including at least one processor such as a microprocessor which controls the overall operation of the electronic device . The processor interacts with device subsystems such as a wireless communication subsystem for exchanging radio frequency signals with a wireless network to perform communication functions. The processor interacts with additional device subsystems including one or more input interfaces such as a keyboard one or more control buttons one or more microphones one or more cameras and or a touch sensitive overlay associated with a touchscreen display flash memory random access memory RAM read only memory ROM auxiliary input output I O subsystems a data port which may be a serial data port such as a Universal Serial Bus USB data port one or more output interfaces such as a display which may be a liquid crystal display LCD a flash one or more speakers or other output interfaces a short range communication module and other device subsystems generally designated as . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions.

The electronic device may include a touchscreen display in some example embodiments. The touchscreen display may be constructed using a touch sensitive input surface connected to an electronic controller. The touch sensitive input surface overlays the display and may be referred to as a touch sensitive overlay. The touch sensitive overlay and the electronic controller provide a touch sensitive input interface and the processor interacts with the touch sensitive overlay via the electronic controller. That is the touchscreen display acts as both an input interface and an output interface .

The communication subsystem includes a receiver a transmitter and associated components such as one or more antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . The antenna elements and may be embedded or internal to the electronic device and a single antenna may be shared by both receiver and transmitter as is known in the art. The particular design of the wireless communication subsystem depends on the wireless network in which the electronic device is intended to operate.

The electronic device may communicate with any one of a plurality of fixed transceiver base stations of the wireless network within its geographic coverage area. The electronic device may send and receive communication signals over the wireless network after the required network registration or activation procedures have been completed. Signals received by the antenna through the wireless network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection etc. as well as analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission to the wireless network via the antenna . The DSP not only processes communication signals but may also provide for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

In some example embodiments the auxiliary input output I O subsystems may include an external communication link or interface for example an Ethernet connection. The electronic device may include other wireless communication interfaces for communicating with other types of wireless networks for example a wireless network such as an orthogonal frequency division multiplexed OFDM network.

In some example embodiments the electronic device also includes a removable memory module typically including flash memory and a memory module interface . Network access may be associated with a subscriber or user of the electronic device via the memory module which may be a Subscriber Identity Module SIM card for use in a GSM network or other type of memory module for use in the relevant wireless network type. The memory module may be inserted in or connected to the memory module interface of the electronic device .

The electronic device may store data in an erasable persistent memory which in one example embodiment is the flash memory . In various example embodiments the data may include service data having information required by the electronic device to establish and maintain communication with the wireless network . The data may also include user application data such as email messages address book and contact information calendar and schedule information notepad documents images and other commonly stored user information stored on the electronic device by its user and other data. The data may in at least some embodiments include metadata which may store information about the images. In some embodiments the metadata and the images may be stored together. That is a single file may include both an image and also metadata regarding that image. For example in at least some embodiments the image may be formatted and stored as a JPEG image.

The data stored in the persistent memory e.g. flash memory of the electronic device may be organized at least partially into a number of databases or data stores each containing data items of the same data type or associated with the same application. For example email messages contact records and task items may be stored in individual databases within the electronic device memory.

The data port may be used for synchronization with a user s host computer system. The data port enables a user to set preferences through an external device or software application and extends the capabilities of the electronic device by providing for information or software downloads to the electronic device other than through the wireless network . The alternate download path may for example be used to load an encryption key onto the electronic device through a direct reliable and trusted connection to thereby provide secure device communication.

In some example embodiments the electronic device is provided with a service routing application programming interface API which provides an application with the ability to route traffic through a serial data i.e. USB or Bluetooth Bluetooth is a registered trademark of Bluetooth SIG Inc. connection to the host computer system using standard connectivity protocols. When a user connects their electronic device to the host computer system via a USB cable or Bluetooth connection traffic that was destined for the wireless network is automatically routed to the electronic device using the USB cable or Bluetooth connection. Similarly any traffic destined for the wireless network is automatically sent over the USB cable Bluetooth connection to the host computer for processing. Further data may be transmitted to and from the electronic device using a WiFi network or using near field communication technologies.

The electronic device also includes a battery as a power source which is typically one or more rechargeable batteries that may be charged for example through charging circuitry coupled to a battery interface such as the serial data port . The battery provides electrical power to at least some of the electrical circuitry in the electronic device and the battery interface provides a mechanical and electrical connection for the battery . The battery interface is coupled to a regulator not shown which provides power V to the circuitry of the electronic device .

The short range communication module provides for communication between the electronic device and different systems or devices which need not necessarily be similar devices. For example the short range communication module may include an infrared device and associated circuits and components or a wireless bus protocol compliant communication mechanism such as a Bluetooth communication module to provide for communication with similarly enabled systems and devices.

The electronic device can also include one or more sensor such as temperature sensor rotation sensors for example a gyroscope translation sensors for example accelerometers position sensors for example magnetometers and sensor sub systems such as a geolocalization sub system which can be based on a global positional signal.

In the embodiment illustrated the camera is included in a camera system along with a flash an optical image stabilizer OIS and an image signal processor ISP . The optical image stabilizer OIS may be integrated with the camera or it may be a separate component. For example the OIS may be considered as a functional part of the camera system . Similarly the ISP may be embedded in the processor and it may also be considered as a functional part of the camera system . In at least some embodiments the camera may be associated with a dedicated image signal processor which may provide at least some camera related functions with the image signal processor being either embedded in the camera or a separate device. For example in at least some embodiments the image signal processor may be configured to provide auto focusing functions. Functions or features which are described below with reference to the camera application may in at least some embodiments be provided in whole or in part by the image signal processor .

The camera system associated with the electronic device also includes a flash . As noted above the flash is used to illuminate a subject while the camera captures an image of the subject. The flash may for example be used in low light conditions. In the example embodiment illustrated the flash is coupled with the main processor of the electronic device . The flash may be coupled to the image signal processor which may be used to trigger the flash . The image signal processor may in at least some embodiments control the flash . In at least some such embodiments applications associated with the main processor may be permitted to trigger the flash by providing an instruction to the image signal processor to instruct the image signal processor to trigger the flash . In one or more embodiments the image signal processor may be coupled to the processor .

The optical image stabilizer can be coupled to the camera or the image signal processor or both and operates to stabilize the camera during an image capture. The optical image stabilizer may receive instructions from the image signal processor . Similarly the optical image stabilizer may be coupled to the processor and may receive instructions from the processor . The image signal processor may obtain data from the optical image stabilizer relating to its movement and operation. In one or more embodiments the camera system may have a separate memory not shown on which the image signal processor can store data and retrieve instructions. Such instructions may for example have been stored in the memory by the processor which may in some embodiments also be coupled to the separate memory in the camera system .

A predetermined set of applications that control basic device operations including data and possibly voice communication applications may be installed on the electronic device during or after manufacture. Additional applications and or upgrades to an operating system or software applications may also be loaded onto the electronic device through the wireless network the auxiliary I O subsystem the data port the short range communication module or other suitable device subsystems . The downloaded programs or code modules may be permanently installed for example written into the program memory e.g. the flash memory or written into and executed from the RAM for execution by the processor at runtime.

In some example embodiments the electronic device may provide two principal modes of communication a data communication mode and a voice communication mode. In the data communication mode a received data signal such as a text message an email message or webpage download will be processed by the communication subsystem and input to the processor for further processing. For example a downloaded webpage may be further processed by a web browser or an email message may be processed by the email messaging application and output to the display . A user of the electronic device may also compose data items such as email messages for example using an input interface in conjunction with the display . These composed items may be transmitted through the communication subsystem over the wireless network .

In the voice communication mode the electronic device provides telephony functions and may operate as a typical cellular phone. The overall operation is similar to the data communication mode except that the received signals would be output to the speaker and signals for transmission would be generated by a transducer such as the microphone . The telephony functions are provided by a combination of software firmware i.e. a voice communication module and hardware i.e. the microphone the speaker and input devices . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the electronic device . Although voice or audio signal output may be accomplished primarily through the speaker the display may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information.

The processor operates under stored program control and executes software modules such as applications stored in memory such as persistent memory for example in the flash memory . As illustrated in the software modules may include operating system software and one or more additional applications or modules such as for example a camera application . The processor may also operate to process data stored in memory associated with the electronic device .

In the example embodiment of the camera application is illustrated as being implemented as a stand alone application . However in other example embodiments the camera application could be provided by another application or module such as for example the operating system software . Further while the camera application is illustrated with a single block the functions or features provided by the camera application could in at least some embodiments be divided up and implemented by a plurality of applications and or modules. In one or more embodiments the camera application can be implemented by the ISP .

The camera application may for example be configured to provide a viewfinder on the display by displaying in real time or near real time an image defined in the electronic signals received from the camera . The camera application may also be configured to capture an image or video by storing an image or video defined by the electronic signals received from the camera and processed by the image signal processor . For example the camera application may be configured to store an image or video to memory of the electronic device .

The camera application may also be configured to control options or preferences associated with the camera . For example the camera application may be configured to control a camera lens aperture and or a shutter speed. The control of such features may in at least some embodiments be automatically performed by the image signal processor associated with the camera .

In at least some embodiments the camera application may be configured to focus the camera on a subject. For example the camera application may be configured to request the image signal processor to control an actuator of the camera to move a lens which is comprised of one or more lens elements in the camera relative to an image sensor in the camera . For example when capturing images of subjects which are very close to the camera e.g. subject at macro position the image signal processor may control the actuator to cause the actuator to move the lens away from the image sensor.

In at least some embodiments the image signal processor may provide for auto focusing capabilities. For example the image signal processor may analyze received electronic signals to determine whether the images captured by the camera are in focus. That is the image signal processor may determine whether the images defined by electronic signals received from the camera are focused properly on the subject of such images. The image signal processor may for example make this determination based on the sharpness of such images. If the image signal processor determines that the images are not in focus then the camera application may cause the image signal processor to adjust the actuator which controls the lens to focus the image.

In at least some embodiments the camera application may be configured to control a flash associated with the camera and or to control a zoom associated with the camera . In at least some embodiments the camera application is configured to provide digital zoom features. The camera application may provide digital zoom features by cropping an image down to a centered area with the same aspect ratio as the original. In at least some embodiments the camera application may interpolate within the cropped image to bring the cropped image back up to the pixel dimensions of the original.

The software modules or parts thereof may be temporarily loaded into volatile memory such as RAM . The RAM is used for storing runtime data variables and other types of data or information. Although specific functions are described for various types of memory this is merely one example and a different assignment of functions to types of memory could also be used.

Components of an exemplary camera system will now be described in more detail with reference to the embodiment shown in . The camera system includes a camera a flash an image signal processor ISP and an optical image stabilizer OIS .

The camera includes a lens a focusing actuator and an image sensor . The lens can have a fixed focal length or a variable focal length i.e. optical zoom lens . If the lens has a variable focal length a zoom actuator not shown may be associated with the camera . The zoom actuator can adjust the focal length e.g. from instructions received from the ISP . The camera can also include a lens barrel for holding the lens in position as well as other components that may be used to operate a camera that are not illustrated. The camera can be configured to acquire an image of the scene. An image of the scene can be the environment that is visible through the lens for example. The image of the scene can be represented by light energy imaged by the lens and received at the image sensor . The lens can include various transparent or translucent lens elements or both that can be configured to bend or focus light or both coming from outside of the camera . The position of the lens and or lens elements can be such that the light that passes through them arrives at the image sensor as an optical image of the scene which may include optical signals . The image sensor can then convert this optical image i.e. light that arrives at the image sensor into electrical signals. The image of the scene which may be the received optical signals can thus be represented by the electrical signals.

The focusing actuator is connected to the lens or lens elements as the case may be and can move the lens relative to the image sensor thereby causing the image of the scene as converted into electrical signals by the sensor to appear to be more or less sharp.

There may be more components associated with a camera that are not shown in the illustrated embodiment of including a housing for holding or supporting all of the components an optical filter for reflecting or absorbing infrared light and additional electronic components.

The ISP may be connected to the camera for obtaining image context associated with the acquired image of the scene. For example the ISP can be connected to the focusing actuator or to the image sensor or to both and can obtain or receive data from the focusing actuator or the image sensor or both related to the image of the scene. The ISP or the sensor or both can also be associated with or can include a memory not shown for storing instructions or data. For example the ISP or the sensor may store data in memory concerning the lens for example the effective focal length or any other sub component of the camera or the camera assembly for example the distance from the lens to the image sensor . The ISP may also be able to access the electrical signals created at the image sensor . Using this access the ISP can obtain some image context data from the electrical signals. For example the ISP may have access to such image context as a colour temperature or a histogram associated with the image of the scene. Image context may also include the distance between the lens and the image sensor which may be determined by the ISP from data sent or received from the focusing actuator . The ISP can operate the focusing actuator thereby causing the scene content or image of the scene to zoom in or zoom out or to become more or less sharp.

The electrical signals representative of the image of the scene may be stored as pixels or texels in a memory associated with the camera or associated with the ISP or any memory associated or accessible to the electronic device . Pixels can represent visual data e.g. in RGB format for locations on a viewing area. The viewing area may be the display for example.

In one or more embodiments the ISP is configured to obtain image context for multiple sequential images of the scene. For example the ISP may be configured to obtain image context for sequential images at a rate of at least 30 images per second. In other words the ISP obtains image context for 30 separate instances over a second. In one or more embodiments the distance between the lens or at least one lens element and the image sensor can be different for two or more of the multiple sequence images of the scene. The ISP may retrieve image context related to two or more of the multiple sequential images of the scene and compare and evaluate each images of the scene e.g. using image context to determine which image is the sharpest or to determine which image is evaluated as the best in accordance with another evaluation metric such as brightness level of noise from electric gain etc. .

In one or more embodiments the ISP controls the exposure time of the optical image of the scene on the sensor and thereby controls the exposure time of an image captured with the camera . For example the camera may include a mechanical shutter not shown which in turn may be operatively connected to the ISP so that the ISP can control the shutter speed of the shutter. In some other embodiments the ISP can control the exposure time of each pixel on the sensor thereby controlling the exposure time of an image captured with the camera .

In one or more embodiments the ISP is connected to and controls the focusing actuator in order to control the level of focus applied to the scene content or to the image of the scene .

The OIS includes an OIS driver an OIS actuator and a rotation sensor . The OIS driver may be connected to the OIS actuator in order to control the OIS actuator . The OIS and specifically the OIS actuator operates to counteract a movement of the camera in order to maintain the sharpness of an image captured by the camera . One or more movements of the camera can be sensed by the rotation sensor . For example the rotation sensor may have the ability to sense rotation of the camera around one or more axes of the camera . The movement of the camera may cause the optical image of the scene to be translated on the image sensor . As a result the same optical detail of the image may be sampled by more pixels on the sensor than without any movement. As a result the image of the scene will appear blurry. The movement of the camera may be as a result of the camera shaking while it is being held for example. The OIS can act on the camera or on its line of sight to counteract or attempt to cancel the effect of the shaking on the acquisition of the image scene by the sensor and therefore counteract the blur of a captured image caused by shaking.

In one or more embodiments the rotation sensor is embedded in the camera . In one or more alternative embodiments the rotation sensor is physically external to the camera and can be a sensor shared with or associated with other sub components of the electronic device . The rotation sensor may be considered a functional part of the camera system .

In one or more embodiments the OIS actuator and the focusing actuator are integral or combined together or form a single actuator. In other embodiments the OIS actuator and the focusing actuator are different actuators. The OIS actuator may be considered a component of the OIS . The focusing actuator may be a component of the camera . In one or more embodiments the OIS driver may be part of the ISP . In other embodiments the OIS driver and the ISP are different i.e. separate components. The OIS driver may be a component of the OIS .

The OIS may be implemented in a number of different ways. For example the OIS actuator may be connected to the camera lens so as to move or translate the camera lens relative to the image sensor to counteract the shaking or movement of the camera .

By way of further example the OIS actuator may be connected to the image sensor so as to move or translate the image sensor relative to the camera lens to counteract the movement of the camera .

By way of further example the OIS can operate by rotating the camera in order to counteract the movement created by the shaking. For example this can be done by rotating a sub assembly or sub component of the camera containing the lens sensor and actuator inside the body of the camera .

By way of further example the OIS can operate by optically tilting the light coming into the camera in order to optically change the line of sight and counteract the movement created by unwanted camera movements e.g. shaking . For example this can be done by rotating a mirror or using another device or component that can introduce optical tilt associated with the camera .

The OIS may also be connected to the ISP . For example the ISP may provide instructions to the OIS in order to operate the OIS . Similarly the OIS driver may be in communication with the ISP in order to receive instructions and or retrieve data. In one or more embodiments the OIS driver receives image context from the ISP and controls the OIS based on the content of the image context. The image context received from the ISP may be received in real time. For example the image context received from the ISP may be the image context associated with the current screen content. The OIS may also include a memory not shown that can store data or instructions that may be used in the operation of the OIS . In one or more embodiments the OIS is connected to the camera and is configured to operate in one of a selection of modes of operation based on the image context obtained by the ISP .

In accordance with one or more embodiments the OIS can operate in one or more different modes. For example the OIS can operate in an engaged mode and a not engaged mode. By way of further example the OIS can operate in an engaged mode a not engaged mode or in one or more special engaged modes. In the engaged mode the OIS can be fully operational within a range of movement. For example in the engaged mode the OIS can counteract or attempt to counteract a range of movement of the camera . For example the range of movement could include a tilt of one or more degrees in either direction in relation to a pre defined axis . By way of further example the range of movement could include a frequency of camera movements between 2 Hertz and 20 Hertz. In the not engaged mode the OIS is not operational. For example in the not engaged mode the OIS will not compensate for or counteract and will not attempt to compensate for or counteract any movement of the camera . In the special engaged mode the OIS may be partially operational or operational on a different range of compensation e.g. frequency or movement than when operating in the engaged mode. For example in the special engaged mode the OIS can counteract or will attempt to counteract certain predefined movements of the camera . The predefined movements of the camera can be a range of frequency of movement or a range of angles or degrees of movement for example. For example the predetermined range of angles or degrees could include a movement of 0.5 degrees in either direction even when using an OIS that is able to compensate up to a one degree movement in either direction. By way of further example the predetermined movements of the camera can include a range of frequency of camera movements of between 1 Hertz and 10 Hertz even when using an OIS able to compensate up to 20 Hertz and even if the engaged mode only compensates higher frequencies than 2 Hz.

In accordance with one or more embodiments the ISP can be connected to the OIS in order to instruct the OIS to operate in a particular mode of operation. For example the instructions from the ISP may be received at the OIS driver which may in turn instruct the OIS actuator to operate in a particular mode of operation. The instructions may be received from the ISP at predetermined intervals. Or alternatively the instructions may be received from the ISP on the occurrence of certain events. For example the ISP may detect a certain change in image context or may evaluate the image context to determine that a certain predefined threshold has been reached. For example the image context may indicate that the intensity of the light received at the camera is increased by a predetermined amount or the image context may indicate that the image of the scene has been zoomed in i.e. that the lens has moved in relation to the image sensor .

An exemplary method of adapting an OIS for a camera will now be described with reference to . The method can be implemented on a camera associated with or connected to an electronic device such as that shown in for example.

One or more of the processor the ISP and the OIS driver may be configured to carry out the methods described in reference to .

At an image of the scene is acquired. In accordance with an exemplary embodiment the image sensor acquires the image of the scene. For example the image of the scene is received at or acquired by the image sensor as a set of optical signals. The optical signals can be converted to electrical signals at the image sensor so that the electrical signals are representative of the image of the scene. The electrical signals can be accessed or processed by the ISP . Further the ISP can instruct the image sensor to convert optical signals to electrical signals thereby capturing an image. The electrical signals can be stored in a memory associated with the ISP .

At image context associated with the image of the scene is obtained. For example an ISP that communicates with the camera can access or obtain image context associated with the image of the scene. Image context can include but is not limited to a colour temperature associated with the image of the scene or the electrical signals representative of the image of the scene a colour temperature associated with a subset of the pixels associated with the image of the scene a colour histogram associated with the image of the scene or with a subset of the pixels associated with the image of the scene or a zoom level associated with the lens or the ISP . The image context can be obtained at before or around the time that an image is captured. For example the ISP may have access to a memory not shown where image context can be stored so that image context can be stored in the time leading up to the capture of an image. Continuing with the example the ISP can retrieve the image context from memory after the image is captured.

In one or more embodiments image context can be obtained from a sensor such as a gyroscope or thermometer from a geolocalization system or from a clock. For example at least one sensor can be associated with the ISP and from which the ISP can retrieve image context. For example the ISP may retrieve the image context from the sensor at the time or during the time the image of the scene is obtained e.g. when the electrical signal is created based on the optical signal at the image sensor . In an example the sensor is a gyroscope and the image context is the tilt of the camera calculated by the gyroscope. The ISP may associate a certain mode of operation of the OIS if the tilt of the camera relative to the ground is within a predefined threshold range of angles. In another example the sensor is a light sensor and the image context is sensed light intensity associated with the image of the scene. The ISP can associate a specific mode of operation of the OIS with a specific range of light intensities. In another example the image context can include the geographic localization determined using the geolocalization system of the electronic device . The ISP can associate a specific mode of operation of the OIS with the geographic localization. As noted image context can be stored in memory e.g. on an ongoing basis and then retrieved from memory after the image is captured.

At a mode of operating the OIS based on the obtained image context is selected. For example a mode of operating the OIS can be selected to optimize one of the noise level and sharpness of the image of the scene based on the image context. As described above a higher noise level in the image of the scene can correspond with an increase in the electronic gain applied to the image of the scene. To counteract the noise level the OIS can be applied in order to be able to set a longer exposure and compensate shaking defects which can in some conditions decrease the sharpness of at least a portion of the image of the scene due to OIS defects. For example the sharpness of an image may be decreased if the OIS is applied despite a short exposure and if the image is zoomed out. Such a situation can occur if there is relatively bright light relatively little electric gain is applied to the image of the scene and the view is a landscape view e.g. if the lens is relatively close to the image sensor . In another example in a situation when the camera is implemented to capture video a mode of operating of the OIS can be selected to minimize the effect of certain frequencies of movement of the camera depending on the geographic localization of the camera . Such a situation can occur if the electronic device is located in a geographic localization that corresponds to an ocean or sea. The mode of operation of the OIS can include counteracting certain frequencies such as a pre determined range of frequencies that correspond to frequencies such as the movement of ocean waves.

Selecting a mode of operation can include selecting one of an engaged mode in which the OIS is configured to counteract a camera movement and a not engaged mode. In the not engaged mode the OIS does not have any effect on the image of the scene. For example in the not engaged mode the OIS does not counteract any movement associated with the camera .

In accordance with one or more embodiments the image context includes a colour temperature associated with the image of the scene. For example the ISP can determine that an average colour temperature associated with the image of the scene is at least Tmax Kelvins and the exposure time is lower than Ymin seconds and in such a situation the selected mode of operating the OIS can be the not engaged mode wherein Tmax and Ymin are optimized depending on the camera capabilities . Continuing with the example if the ISP determines that the average colour temperature associated with the image of the scene is less than Tmin Kelvins and the exposure time is higher than Ymax seconds then the selected mode of operating the OIS can be the engaged mode Tmin and Ymax being optimized depending on the camera capabilities . In other words the ISP can associate the not engaged mode for the OIS with a predefined range of colour temperatures.

By way of further example the image context can include an exposure time associated with the image of the scene. For example the ISP can determine that the exposure time associated with the image of the scene is at least Y seconds Y to be optimized depending on the camera . For example the ISP can determine the exposure time at the time the image data or image context is obtained from the image sensor associated with the camera . The ISP can then determine that the selected mode of operating the OIS is the not engaged mode whereby the ISP instructs the OIS not to operate. In other words the ISP can associate the not engaged mode for the OIS with a predefined range of exposure times.

By way of further example the image context can include a flash activation. For example the ISP can determine that the flash needs to be activated for a still picture. The ISP can then determine that the selected mode of operating the OIS is the engaged mode whereby the ISP instructs the OIS to operate at this engaged mode. In other words the ISP can associate the engaged mode for the OIS with the flash activation. In one or more alternative embodiments the ISP can associate a special engaged mode for the OIS with the flash activation.

The selected mode of operation can be identified and stored in a memory associated with the ISP for example. By way of further example a memory associated with the ISP can store data indicating or identifying a mode of operation of the OIS and associated image context. For example the memory may indicate that certain colour temperatures are associated with certain modes of operation of the OIS . Accordingly the selection of the mode of operation can be a performed by the ISP based on the obtained image context by retrieving the identified associated mode of operation of the OIS . The ISP can then instruct the OIS e.g. by instructing the OIS driver to operate the OIS actuator in accordance with the identified mode of operation of the OIS .

In accordance with one or more embodiments selecting a mode of operating the OIS can include selecting one of an engaged mode in which the OIS is configured to counteract a camera movement a special engaged mode in which the OIS is configured to counteract a predetermined range of degrees of a camera movement and a not engaged mode. In one or more embodiments the predetermined range of angles or degrees of movement of the camera can be plus or minus 0.5 degrees. The degrees of movement of the camera can be a measurement of the amount that a camera has rotated. For example the measurement of rotation can be the amount that a camera has rotated for a set period of time.

In accordance with one or more embodiments in the special engaged mode the OIS is further configured to counteract a predetermined range of frequencies of camera movement. For example the predetermined range of frequencies of camera movement can be 2 Hertz to 10 Hertz. The predetermined range of frequencies can be adapted to conform to or depending on the OIS capabilities.

At the OIS is applied using the selected mode of operation. For example if the selected mode of operation is the engaged mode then the ISP will instruct the OIS to operate or attempt to operate on the camera to counteract shaking movement of the camera . By way of further example if the selected mode of operation is the not engaged mode then the ISP will instruct the OIS not to operate on the camera thereby not counteracting any movement of the camera . In yet another example if the selected mode of operation is the special engaged mode then the ISP will instruct the OIS to operate or attempt to operate on the camera to counteract a limited amount or a different range of movement.

In accordance with one or more embodiments the method may also include capturing an image or video using the camera while the OIS is applied using the selected mode of operation. For example capturing an image using the camera while the OIS is applied in the selected mode of operation can be performed in response to the camera receiving input. The input can be from a button or from a signal received from an external source for example.

In one or more embodiments the mode of operation of the OIS can be changed. For example an image or a video can be captured by the camera while the OIS is applied in a selected mode of operation and then a subsequent image can be captured by the camera while the OIS is applied in another selected mode of operation. By way of further example after an image is captured by the camera subsequent image of the scene can be acquired subsequent image context can be obtained and a subsequent mode of operating the OIS can be selected and applied . A subsequent image or video can be captured while the OIS is applied. In yet a further example after an image is captured a new mode of operating the OIS can be selected and then applied while capturing a subsequent image without obtaining image context .

In accordance with an embodiment the image context comprises a zoom level of the image of the scene. The zoom level may be controlled by the ISP or may be controlled at the camera application for example. In one or more embodiments the zoom level is a digital zoom. The digital zoom can be controlled by input into the camera . The input may be from a button on the exterior of the camera or may be from another component of the camera . For example input may be received instructing the camera or ISP to increase the zoom level. The image to be captured which may be viewable through the display and which comprises at least a portion of the image of the scene can be stored digitally as representative electronic signals in a memory. When the digital zoom level is increased the outer portion of the digital image visible on the display may be cropped or deleted from the view in the display for example so that the image visible on the display becomes magnified. Thus the remaining portion of the digital image may then be viewable in the display and will appear to be enlarged or zoomed in. The captured image may be correspondingly cropped after being captured and may be stored in memory in its cropped form. The level of zoom may be measured by the ISP and be considered image context. The zoom level may be measured as a percentage increase of the size of the zoomed image relative to the image of the scene. For example the image visible on the display may be compared to the image to be captured in order to determine the amount of the image to be captured that is cropped. Similarly or inversely the percentage of increase in the size of the image visible on the display as compared to the size of the image to be captured may be used as the zoom level measurement. The image to be captured can identify the image that is received as optical signals at the image sensor for example. The image to be captured may become the captured image after the corresponding electronic signals from the image sensor are stored in memory. For example a level of zoom of at least 2 i.e. magnified by two times may be associated with the fully engaged mode of operation of the OIS . For example because the edges of the image of the scene are cropped from the image to be captured at a certain level of zoom any blurriness or noise introduced at the edges of the image of the scene by the operation of the OIS may not be visible in the image to be captured. In one or more alternative embodiments the zoom level is controlled by an optical zoom.

At it is determined that the zoom level is within a predetermined range. In another embodiment it may be determined that the zoom level is in a different range. Different ranges of zoom levels may be associated with different modes of operating the OIS .

At a mode of operating the OIS is selected based on the obtained image context. In accordance with an embodiment selecting a mode of operating the OIS includes selecting one of an engaged mode in which the OIS is configured to counteract or compensate for a camera movement a special engaged mode in which the OIS is configured to counteract or compensate for a predetermined range of motion of a camera movement and a not engaged mode. In the not engaged mode the OIS may not be operating to counteract or compensate for any movement of the camera . In accordance with an example the selected mode of operating the OIS is a special engaged mode when the zoom level of the image of the scene is between 1 and 2 i.e. between one time and 2 times of magnification .

At the OIS is applied using the selected mode of operation. For example the special engaged mode of operation of the OIS can be applied after certain lens configurations are determined. In accordance with one or more embodiments in the special engaged mode the OIS operates to counteract or compensate for at least a predetermined frequency of camera movement. In another example in the special engaged mode the OIS operates to counteract or compensate for at least a predetermined angle of movement e.g. in degrees or a predetermined range of angles of movement.

In one or more embodiment the image context includes the configuration of the lens . For example the configuration of the lens may include the position of the lens relative to the image sensor . For example it may be determined that the lens is positioned by at least a predetermined distance relative to the image sensor .

In one or more embodiment electronic gain can be applied to the electrical signal representative of the image of the scene.

The camera can be located in or connected to a communication device or mobile communication device. The communication device can be an electronic device such as a computer a handheld computer a mobile device a mobile phone a cellular phone a personal digital assistant a tablet computer a desktop computer a wearable computer a personal computer or a smart phone.

While the present application is primarily described in terms of methods a person of ordinary skill in the art will understand that the present application is also directed to various apparatus such as an electronic device including a mobile communications device or camera. The electronic device includes components for performing at least some of the aspects and features of the described methods which may be by way of hardware components such as the memory and or the processor software or any combination of the two or in any other manner. Moreover an article of manufacture for use with the apparatus such as a pre recorded storage device or other similar computer readable storage medium including program instructions recorded thereon or a computer data signal carrying computer readable program instructions may direct an apparatus to facilitate the practice of the described methods. For example a compute readable storage medium may include computer executable instructions for performing one or more of the methods described herein. It is understood that such apparatus and articles of manufacture also come within the scope of the present application.

In one or more embodiments the term image context can be understood to include image data . Image data may be stored in a one or more memory.

The term computer readable medium or computer readable storage medium as used herein means any medium which can store instructions for use by or execution by a computer or other computing device including but not limited to a portable computer diskette a hard disk drive HDD a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory an optical disc such as a Compact Disc CD Digital Versatile Disc DVD or Blu ray Disc and a solid state storage device e.g. NAND flash or synchronous dynamic RAM SDRAM .

One or more embodiments have been described by way of example. It will be apparent to persons skilled in the art that a number of variations and modifications can be made without departing from the scope of what is defined in the claims.

