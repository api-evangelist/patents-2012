---

title: Method and apparatus for high rate packet data transmission
abstract: In a data communication system capable of variable rate transmission, high rate packet data transmission improves utilization of the forward link and decreases the transmission delay. Data transmission on the forward link is time multiplexed and the base station transmits at the highest data rate supported by the forward link at each time slot to one mobile station. The data rate is determined by the largest C/I measurement of the forward link signals as measured at the mobile station. Upon determination of a data packet received in error, the mobile station transmits a NACK message back to the base station. The NACK message results in retransmission of the data packet received in error. The data packets can be transmitted out of sequence by the use of sequence number to identify each data unit within the data packets.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09001735&OS=09001735&RS=09001735
owner: QUALCOMM Incorporated
number: 09001735
owner_city: San Diego
owner_country: US
publication_date: 20121210
---
The present application for patent is a Continuation and claims priority to co pending patent application Ser. No. 11 540 286 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION filed Sep. 29 2006 which is a continuation of U.S. Pat. No. 7 184 426 entitled METHOD AND APPARATUS FOR BURST PILOT FOR A TIME DIVISION MULTIPLEX SYSTEM issued Feb. 27 2007 which is a continuation of U.S. Pat. No. 7 079 550 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION issued on Jul. 18 2006 which is a continuation of U.S. Pat. No. 6 574 211 entitled METHOD AND APPARATUS FOR HIGH RATE PACKET DATA TRANSMISSION issued on Jun. 3 2003 all assigned to the assignee hereof and hereby expressly incorporated by reference herein.

The present invention relates to data communication. More particularly the present invention relates to a novel and improved method and apparatus for high rate packet data transmission.

A modern day communication system is required to support a variety of applications. One such communication system is a code division multiple access CDMA system which conforms to the TIA EIA IS 95 Mobile Station Base Station Compatibility Standard for Dual Mode Wideband Spread Spectrum Cellular System hereinafter referred to as the IS 95 standard. The CDMA system allows for voice and data communications between users over a terrestrial link. The use of CDMA techniques in a multiple access communication system is disclosed in U.S. Pat. No. 4 901 307 entitled SPREAD SPECTRUM MULTIPLE ACCESS COMMUNICATION SYSTEM USING SATELLITE OR TERRESTRIAL REPEATERS and U.S. Pat. No. 5 103 459 entitled SYSTEM AND METHOD FOR GENERATING WAVEFORMS IN A CDMA CELLULAR TELEPHONE SYSTEM both assigned to the assignee of the present invention and incorporated by reference herein.

In this specification base station refers to the hardware with which the mobile stations communicate. Cell refers to the hardware or the geographic coverage area depending on the context in which the term is used. A sector is a partition of a cell. Because a sector of a CDMA system has the attributes of a cell the teachings described in terms of cells are readily extended to sectors.

In the CDMA system communications between users are conducted through one or more base stations. A first user on one mobile station communicates to a second user on a second mobile station by transmitting data on the reverse link to a base station. The base station receives the data and can route the data to another base station. The data is transmitted on the forward link of the same base station or a second base station to the second mobile station. The forward link refers to transmission from the base station to a mobile station and the reverse link refers to transmission from the mobile station to a base station. In IS 95 systems the forward link and the reverse link are allocated separate frequencies.

The mobile station communicates with at least one base station during a communication. CDMA mobile stations are capable of communicating with multiple base stations simultaneously during soft handoff. Soft handoff is the process of establishing a link with a new base station before breaking the link with the previous base station. Soft handoff minimizes the probability of dropped calls. The method and system for providing a communication with a mobile station through more than one base station during the soft handoff process are disclosed in U.S. Pat. No. 5 267 261 entitled MOBILE STATION ASSISTED SOFT HANDOFF IN A CDMA CELLULAR COMMUNICATIONS SYSTEM assigned to the assignee of the present invention and incorporated by reference herein. Softer handoff is the process whereby the communication occurs over multiple sectors which are serviced by the same base station. The process of softer handoff is described in detail in U.S. patent application Ser. No. 08 763 498 entitled METHOD AND APPARATUS FOR PERFORMING HANDOFF BETWEEN SECTORS OF A COMMON BASE STATION filed Dec. 11 1996 now U.S. Pat. No. 5 933 787 issued Aug. 3 1999 by Klein S. Gilhousen et al. assigned to the assignee of the present invention and incorporated by reference herein.

Given the growing demand for wireless data applications the need for very efficient wireless data communication systems has become increasingly significant. The IS 95 standard is capable of transmitting traffic data and voice data over the forward and reverse links. A method for transmitting traffic data in code channel frames of fixed size is described in detail in U.S. Pat. No. 5 504 773 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention and incorporated by reference herein. In accordance with the IS 95 standard the traffic data or voice data is partitioned into code channel frames which are 20 msec. wide with data rates as high as 14.4 Kbps.

A significant difference between voice services and data services is the fact that the former imposes stringent and fixed delay requirements. Typically the overall one way delay of speech frames must be less than 100 msec. In contrast the data delay can become a variable parameter used to optimize the efficiency of the data communication system. Specifically more efficient error correcting coding techniques which require significantly larger delays than those that can be tolerated by voice services can be utilized. An exemplary efficient coding scheme for data is disclosed in U.S. patent application Ser. No. 08 743 688 entitled SOFT DECISION OUTPUT DECODER FOR DECODING CONVOLUTIONALLY ENCODED CODEWORDS filed Nov. 6 1996 now U.S. Pat. No. 5 933 462 issued Aug. 3 1999 by Andrew J. Viterbi et al. assigned to the assignee of the present invention and incorporated by reference herein.

Another significant difference between voice services and data services is that the former requires a fixed and common grade of service GOS for all users. Typically for digital systems providing voice services this translates into a fixed and equal transmission rate for all users and a maximum tolerable value for the error rates of the speech frames. In contrast for data services the GOS can be different from user to user and can be a parameter optimized to increase the overall efficiency of the data communication system. The GOS of a data communication system is typically defined as the total delay incurred in the transfer of a predetermined amount of data hereinafter referred to as a data packet.

Yet another significant difference between voice services and data services is that the former requires a reliable communication link which in the exemplary CDMA communication system is provided by soft handoff. Soft handoff results in redundant transmissions from two or more base stations to improve reliability. However this additional reliability is not required for data transmission because the data packets received in error can be retransmitted. For data services the transmit power used to support soft handoff can be more efficiently used for transmitting additional data.

The parameters which measure the quality and effectiveness of a data communication system are the transmission delay required to transfer a data packet and the average throughput rate of the system. Transmission delay does not have the same impact in data communication as it does for voice communication but it is an important metric for measuring the quality of the data communication system. The average throughput rate is a measure of the efficiency of the data transmission capability of the communication system.

It is well known that in cellular systems the signal to noise and interference ratio C I of any given user is a function of the location of the user within the coverage area. In order to maintain a given level of service TDMA and FDMA systems resort to frequency reuse techniques i.e. not all frequency channels and or time slots are used in each base station. In a CDMA system the same frequency allocation is reused in every cell of the system thereby improving the overall efficiency. The C I that any given user s mobile station achieves determines the information rate that can be supported for this particular link from the base station to the user s mobile station. Given the specific modulation and error correction method used for the transmission which the present invention seek to optimize for data transmissions a given level of performance is achieved at a corresponding level of C I. For idealized cellular system with hexagonal cell layouts and utilizing a common frequency in every cell the distribution of C I achieved within the idealized cells can be calculated.

The C I achieved by any given user is a function of the path loss which for terrestrial cellular systems increases as rto r where r is the distance to the radiating source. Furthermore the path loss is subject to random variations due to man made or natural obstructions within the path of the radio wave. These random variations are typically modeled as a lognormal shadowing random process with a standard deviation of 8 dB. The resulting C I distribution achieved for an ideal hexagonal cellular layout with omni directional base station antennas rpropagation law and shadowing process with 8 dB standard deviation is shown in .

The obtained C I distribution can only be achieved if at any instant in time and at any location the mobile station is served by the best base station which is defined as that achieving the largest C I value regardless of the physical distance to each base station. Because of the random nature of the path loss as described above the signal with the largest C I value can be one which is other than the minimum physical distance from the mobile station. In contrast if a mobile station was to communicate only via the base station of minimum distance the C I can be substantially degraded. It is therefore beneficial for mobile stations to communicate to and from the best serving base station at all times thereby achieving the optimum C I value. It can also be observed that the range of values of the achieved C I in the above idealized model and as shown in is such that the difference between the highest and lowest value can be as large as 10 000. In practical implementation the range is typically limited to approximately 1 100 or 20 dB. It is therefore possible for a CDMA base station to serve mobile stations with information bit rates that can vary by as much as a factor of 100 since the following relationship holds 

One example provides a receiver method and apparatus for determining modulation format for transmission as a function of channel quality of a link in a communication system. The receiver periodically transmits a quality indicator which maps to a transmission data rate. In response the receiver receives data as a function of the quality indicator. The transmitter periodically receives a quality indicator wherein the quality indicator maps to a transmission data rate and the transmitter transmits data as a function of the quality indicator.

In accordance with the exemplary embodiment of the data communication system of the present invention forward link data transmission occurs from one base station to one mobile station see at or near the maximum data rate which can be supported by the forward link and the system. Reverse link data communication can occur from one mobile station to one or more base stations. The calculation of the maximum data rate for forward link transmission is described in detail below. Data is partitioned into data packets with each data packet being transmitted over one or more time slots or slots . At each time slot the base station can direct data transmission to any mobile station which is in communication with the base station.

Initially the mobile station establishes communication with a base station using a predetermined access procedure. In this connected state the mobile station can receive data and control messages from the base station and is able to transmit data and control messages to the base station. The mobile station then monitors the forward link for transmissions from the base stations in the active set of the mobile station. The active set contains a list of base stations in communication with the mobile station. Specifically the mobile station measures the signal to noise and interference ratio C I of the forward link pilot from the base stations in the active set as received at the mobile station. If the received pilot signal is above a predetermined add threshold or below a predetermined drop threshold the mobile station reports this to the base station. Subsequent messages from the base station direct the mobile station to add or delete the base station s to or from its active set respectively. The various operating states of the mobile station are described below.

If there is no data to send the mobile station returns to an idle state and discontinues transmission of data rate information to the base station s . While the mobile station is in the idle state the mobile station monitors the control channel from one or more base stations in the active set for paging messages.

If there is data to be transmitted to the mobile station the data is sent by a central controller to all base stations in the active set and stored in a queue at each base station. A paging message is then sent by one or more base stations to the mobile station on the respective control channels. The base station may transmit all such paging messages at the same time across several base stations in order to ensure reception even when the mobile station is switching between base stations. The mobile station demodulates and decodes the signals on one or more control channels to receive the paging messages.

Upon decoding the paging messages and for each time slot until the data transmission is completed the mobile station measures the C I of the forward link signals from the base stations in the active set as received at the mobile station. The C I of the forward link signals can be obtained by measuring the respective pilot signals. The mobile station then selects the best base station based on a set of parameters. The set of parameters can comprise the present and previous C I measurements and the bit error rate or packet error rate. For example the best base station can be selected based on the largest C I measurement. The mobile station then identifies the best base station and transmits to the selected base station a data request message hereinafter referred to as the DRC message on the data request channel hereinafter referred to as the DRC channel . The DRC message can contain the requested data rate or alternatively an indication of the quality of the forward link channel e.g. the C I measurement itself the bit error rate or the packet error rate . In the exemplary embodiment the mobile station can direct the transmission of the DRC message to a specific base station by the use of a Walsh code which uniquely identifies the base station. The DRC message symbols are exclusively OR ed XOR with the unique Walsh code. Since each base station in the active set of the mobile station is identified by a unique Walsh code only the selected base station which performs the identical XOR operation as that performed by the mobile station with the correct Walsh code can correctly decode the DRC message. The base station uses the rate control information from each mobile station to efficiently transmit forward link data at the highest possible rate.

At each time slot the base station can select any of the paged mobile stations for data transmission. The base station then determines the data rate at which to transmit the data to the selected mobile station based on the most recent value of the DRC message received from the mobile station. Additionally the base station uniquely identifies a transmission to a particular mobile station by using a spreading code which is unique to that mobile station. In the exemplary embodiment this spreading code is the long pseudo noise PN code which is defined by IS 95 standard.

The mobile station for which the data packet is intended receives the data transmission and decodes the data packet. Each data packet comprises a plurality of data units. In the exemplary embodiment a data unit comprises eight information bits although different data unit sizes can be defined and are within the scope of the present invention. In the exemplary embodiment each data unit is associated with a sequence number and the mobile stations are able to identify either missed or duplicative transmissions. In such events the mobile stations communicate via the reverse link data channel the sequence numbers of the missing data units. The base station controllers which receive the data messages from the mobile stations then indicate to all base stations communicating with this particular mobile station which data units were not received by the mobile station. The base stations then schedule a retransmission of such data units. Each mobile station in the data communication system can communicate with multiple base stations on the reverse link. In the exemplary embodiment the data communication system of the present invention supports soft handoff and softer handoff on the reverse link for several reasons. First soft handoff does not consume additional capacity on the reverse link but rather allows the mobile stations to transmit data at the minimum power level such that at least one of the base stations can reliably decode the data. Second reception of the reverse link signals by more base stations increases the reliability of the transmission and only requires additional hardware at the base stations.

In the exemplary embodiment the forward link capacity of the data transmission system of the present invention is determined by the rate requests of the mobile stations. Additional gains in the forward link capacity can be achieved by using directional antennas and or adaptive spatial filters. An exemplary method and apparatus for providing directional transmissions are disclosed in U.S. patent application Ser. No. 08 575 049 entitled METHOD AND APPARATUS FOR DETERMINING THE TRANSMISSION DATA RATE IN A MULTI USER COMMUNICATION SYSTEM filed Dec. 20 1995 now U.S. Pat. No. 5 857 147 issued Jan. 5 1999 by William R. Gardner et al. and U.S. patent application Ser. No. 08 925 521 entitled METHOD AND APPARATUS FOR PROVIDING ORTHOGONAL SPOT BEAMS SECTORS AND PICOCELLS filed Sep. 8 1997 now U.S. Pat. No. 6 285 655 issued Sep. 4 2001 by Stein A. Lundby et al. both assigned to the assignee of the present invention and incorporated by reference herein.

Referring to the figures represents the exemplary data communication system of the present invention which comprises multiple cells . Each cell is serviced by a corresponding base station . Various mobile stations are dispersed throughout the data communication system. In the exemplary embodiment each of mobile stations communicates with at most one base station on the forward link at each time slot but can be in communication with one or more base stations on the reverse link depending on whether the mobile station is in soft handoff. For example base station transmits data exclusively to mobile station base station transmits data exclusively to mobile station and base station transmits data exclusively to mobile station on the forward link at time slot n. In the solid line with the arrow indicates a data transmission from base station to mobile station . A broken line with the arrow indicates that mobile station is receiving the pilot signal but no data transmission from base station . The reverse link communication is not shown in for simplicity.

As shown by each base station preferably transmits data to one mobile station at any given moment. Mobile stations especially those located near a cell boundary can receive the pilot signals from multiple base stations . If the pilot signal is above a predetermined threshold mobile station can request that base station be added to the active set of mobile station . In the exemplary embodiment mobile station can receive data transmission from zero or one member of the active set.

A block diagram illustrating the basic subsystems of the data communication system of the present invention is shown in . Base station controller interfaces with packet network interface PSTN and all base stations in the data communication system only one base station is shown in for simplicity . Base station controller coordinates the communication between mobile stations in the data communication system and other users connected to packet network interface and PSTN . PSTN interfaces with users through the standard telephone network not shown in .

Base station controller contains many selector elements although only one is shown in for simplicity. One selector element is assigned to control the communication between one or more base stations and one mobile station . If selector element has not been assigned to mobile station call control processor is informed of the need to page mobile station . Call control processor then directs base station to page mobile station .

Data source contains the data which is to be transmitted to mobile station . Data source provides the data to packet network interface . Packet network interface receives the data and routes the data to selector element . Selector element sends the data to each base station in communication with mobile station . Each base station maintains data queue which contains the data to be transmitted to mobile station .

In the exemplary embodiment on the forward link a data packet refers to a predetermined amount of data which is independent of the data rate. The data packet is formatted with other control and coding bits and encoded. If data transmission occurs over multiple Walsh channels the encoded packet is demultiplexed into parallel streams with each stream transmitted over one Walsh channel.

The data is sent in data packets from data queue to channel element . For each data packet channel element inserts the necessary control fields. The data packet control fields frame check sequence bits and code tail bits comprise a formatted packet. Channel element then encodes one or more formatted packets and interleaves or reorders the symbols within the encoded packets. Next the interleaved packet is scrambled with a scrambling sequence covered with Walsh covers and spread with the long PN code and the short PNand PNcodes. The spread data is quadrature modulated filtered and amplified by a transmitter within RF unit . The forward link signal is transmitted over the air through antenna on forward link .

At mobile station the forward link signal is received by antenna and routed to a receiver within front end . The receiver filters amplifies quadrature demodulates and quantizes the signal. The digitized signal is provided to demodulator DEMOD where it is despread with the long PN code and the short PNand PNcodes decovered with the Walsh covers and descrambled with the identical scrambling sequence. The demodulated data is provided to decoder which performs the inverse of the signal processing functions done at base station specifically the de interleaving decoding and frame check functions. The decoded data is provided to data sink . The hardware as described above supports transmissions of data messaging voice video and other communications over the forward link.

The system control and scheduling functions can be accomplished by many implementations. The location of channel scheduler is dependent on whether a centralized or distributed control scheduling processing is desired. For example for distributed processing channel scheduler can be located within each base station . Conversely for centralized processing channel scheduler can be located within base station controller and can be designed to coordinate the data transmissions of multiple base stations . Other implementations of the above described functions can be contemplated and are within the scope of the present invention.

As shown in mobile stations are dispersed throughout the data communication system and can be in communication with zero or one base station on the forward link. In the exemplary embodiment channel scheduler coordinates the forward link data transmissions of one base station . In the exemplary embodiment channel scheduler connects to data queue and channel element within base station and receives the queue size which is indicative of the amount of data to transmit to mobile station and the DRC messages from mobile stations . Channel scheduler schedules high rate data transmission such that the system goals of maximum data throughput and minimum transmission delay are optimized.

In the exemplary embodiment the data transmission is scheduled based in part on the quality of the communication link. An exemplary communication system which selects the transmission rate based on the link quality is disclosed in U.S. patent application Ser. No. 08 741 320 entitled METHOD AND APPARATUS FOR PROVIDING HIGH SPEED DATA COMMUNICATIONS IN A CELLULAR ENVIRONMENT filed Sep. 11 1996 now U.S. Pat. No. 6 496 543 issued Dec. 17 2002 by Ephraim Zehavi assigned to the assignee of the present invention and incorporated by reference herein. In the present invention the scheduling of the data communication can be based on additional considerations such as the GOS of the user the queue size the type of data the amount of delay already experienced and the error rate of the data transmission. These considerations are described in detail in U.S. patent application Ser. No. 08 798 951 entitled METHOD AND APPARATUS FOR FORWARD LINK RATE SCHEDULING filed Feb. 11 1997 now U.S. Pat. No. 6 335 922 issued Jan. 1 2002 by Edward G. Tiedemann Jr. et al. and U.S. patent application Ser. No. 08 835 632 entitled METHOD AND APPARATUS FOR REVERSE LINK RATE SCHEDULING filed Aug. 20 1997 now U.S. Pat. No. 5 914 950 issued Jun. 22 1999 by Tao Chen et al. both are assigned to the assignee of the present invention and incorporated by reference herein. Other factors can be considered in scheduling data transmissions and are within the scope of the present invention.

The data communication system of the present invention supports data and message transmissions on the reverse link. Within mobile station controller processes the data or message transmission by routing the data or message to encoder . Controller can be implemented in a microcontroller a microprocessor a digital signal processing DSP chip or an ASIC programmed to perform the function as described herein.

In the exemplary embodiment encoder encodes the message consistent with the Blank and Burst signaling data format described in the aforementioned U.S. Pat. No. 5 504 773. Encoder then generates and appends a set of CRC bits appends a set of code tail bits encodes the data and appended bits and reorders the symbols within the encoded data. The interleaved data is provided to modulator MOD .

Modulator can be implemented in many embodiments. In the exemplary embodiment see the interleaved data is covered with Walsh codes spread with a long PN code and further spread with the short PN codes. The spread data is provided to a transmitter within front end . The transmitter modulates filters amplifies and transmits the reverse link signal over the air through antenna on reverse link .

In the exemplary embodiment mobile station spreads the reverse link data in accordance with a long PN code. Each reverse link channel is defined in accordance with the temporal offset of a common long PN sequence. At two differing offsets the resulting modulation sequences are uncorrelated. The offset of a mobile station is determined in accordance with a unique numerical identification of mobile station which in the exemplary embodiment of the IS 95 mobile stations is the mobile station specific identification number. Thus each mobile station transmits on one uncorrelated reverse link channel determined in accordance with its unique electronic serial number.

At base station the reverse link signal is received by antenna and provided to RF unit . RF unit filters amplifies demodulates and quantizes the signal and provides the digitized signal to channel element . Channel element despreads the digitized signal with the short PN codes and the long PN code. Channel element also performs the Walsh code decovering and pilot and DRC extraction. Channel element then reorders the demodulated data decodes the de interleaved data and performs the CRC check function. The decoded data e.g. the data or message is provided to selector element . Selector element routes the data and message to the appropriate destination. Channel element may also forward a quality indicator to selector element indicative of the condition of the received data packet.

In the exemplary embodiment mobile station can be in one of three operating states. An exemplary state diagram showing the transitions between the various operating states of mobile station is shown in . In the access state mobile station sends access probes and waits for channel assignment by base station . The channel assignment comprises allocation of resources such as a power control channel and frequency allocation. Mobile station can transition from the access state to the connected state if mobile station is paged and alerted to an upcoming data transmission or if mobile station transmits data on the reverse link. In the connected state mobile station exchanges e.g. transmits or receives data and performs handoff operations. Upon completion of a release procedure mobile station transitions from the connected state to the idle state . Mobile station can also transmission from the access state to the idle state upon being rejected of a connection with base station . In the idle state mobile station listens to overhead and paging messages by receiving and decoding messages on the forward control channel and performs idle handoff procedure. Mobile station can transition to the access state by initiating the procedure. The state diagram shown in is only an exemplary state definition which is shown for illustration. Other state diagrams can also be utilized and are within the scope of the present invention.

In the exemplary embodiment the initiation of a communication between mobile station and base station occurs in a similar manner as that for the CDMA system. After completion of the call set up mobile station monitors the control channel for paging messages. While in the connected state mobile station begins transmission of the pilot signal on the reverse link.

An exemplary flow diagram of the forward link high rate data transmission of the present invention is shown in . If base station has data to transmit to mobile station base station sends a paging message addressed to mobile station on the control channel at block . The paging message can be sent from one or multiple base stations depending on the handoff state of mobile station . Upon reception of the paging message mobile station begins the C I measurement process at block . The C I of the forward link signal is calculated from one or a combination of methods described below. Mobile station then selects a requested data rate based on the best C I measurement and transmits a DRC message on the DRC channel at block .

Within the same time slot base station receives the DRC message at block . If the next time slot is available for data transmission base station transmits data to mobile station at the requested data rate at block . Mobile station receives the data transmission at block . If the next time slot is available base station transmits the remainder of the packet at block and mobile station receives the data transmission at block .

In the present invention mobile station can be in communication with one or more base stations simultaneously. The actions taken by mobile station depend on whether mobile station is or is not in soft handoff. These two cases are discussed separately below.

Referring to the data destined for a particular mobile station is provided to selector element which has been assigned to control the communication with that mobile station . Selector element forwards the data to data queue within base station . Base station queues the data and transmits a paging message on the control channel. Base station then monitors the reverse link DRC channel for DRC messages from mobile station . If no signal is detected on the DRC channel base station can retransmit the paging message until the DRC message is detected. After a predetermined number of retransmission attempts base station can terminate the process or re initiate a call with mobile station .

In the exemplary embodiment mobile station transmits the requested data rate in the form of a DRC message to base station on the DRC channel. In the alternative embodiment mobile station transmits an indication of the quality of the forward link channel e.g. the C I measurement to base station . In the exemplary embodiment the 3 bit DRC message is decoded with soft decisions by base station . In the exemplary embodiment the DRC message is transmitted within the first half of each time slot. Base station then has the remaining half of the time slot to decode the DRC message and configure the hardware for data transmission at the next successive time slot if that time slot is available for data transmission to this mobile station . If the next successive time slot is not available base station waits for the next available time slot and continues to monitor the DRC channel for the new DRC messages.

In the first embodiment base station transmits at the requested data rate. This embodiment confers to mobile station the important decision of selecting the data rate. Always transmitting at the requested data rate has the advantage that mobile station knows which data rate to expect. Thus mobile station only demodulates and decodes the traffic channel in accordance with the requested data rate. Base station does not have to transmit a message to mobile station indicating which data rate is being used by base station .

In the first embodiment after reception of the paging message mobile station continuously attempts to demodulate the data at the requested data rate. Mobile station demodulates the forward traffic channel and provides the soft decision symbols to the decoder. The decoder decodes the symbols and performs the frame check on the decoded packet to determine whether the packet was received correctly. If the packet was received in error or if the packet was directed for another mobile station the frame check would indicate a packet error. Alternatively in the first embodiment mobile station demodulates the data on a slot by slot basis. In the exemplary embodiment mobile station is able to determine whether a data transmission is directed for it based on a preamble which is incorporated within each transmitted data packet as described below. Thus mobile station can terminate the decoding process if it is determined that the transmission is directed for another mobile station . In either case mobile station transmits a negative acknowledgments NACK message to base station to acknowledge the incorrect reception of the data units. Upon receipt of the NACK message the data units received in error is retransmitted.

The transmission of the NACK messages can be implemented in a manner similar to the transmission of the error indicator bit EIB in the CDMA system. The implementation and use of EIB transmission are disclosed in U.S. Pat. No. 5 568 483 entitled METHOD AND APPARATUS FOR THE FORMATTING OF DATA FOR TRANSMISSION assigned to the assignee of the present invention and incorporated by reference herein. Alternatively NACK can be transmitted with messages.

In the second embodiment the data rate is determined by base station with input from mobile station . Mobile station performs the C I measurement and transmits an indication of the link quality e.g. the C I measurement to base station . Base station can adjust the requested data rate based on the resources available to base station such as the queue size and the available transmit power. The adjusted data rate can be transmitted to mobile station prior to or concurrent with data transmission at the adjusted data rate or can be implied in the encoding of the data packets. In the first case wherein mobile station receives the adjusted data rate before the data transmission mobile station demodulates and decodes the received packet in the manner described in the first embodiment. In the second case wherein the adjusted data rate is transmitted to mobile station concurrent with the data transmission mobile station can demodulate the forward traffic channel and store the demodulated data. Upon receipt of the adjusted data rate mobile station decodes the data in accordance with the adjusted data rate. And in the third case wherein the adjusted data rate is implied in the encoded data packets mobile station demodulates and decodes all candidate rates and determine a posteriori the transmit rate for selection of the decoded data. The method and apparatus for performing rate determination are described in detail in U.S. patent application Ser. No. 08 730 863 entitled METHOD AND APPARATUS FOR DETERMINING THE RATE OF RECEIVED DATA IN A VARIABLE RATE COMMUNICATION SYSTEM filed Oct. 18 1996 now U.S. Pat. No. 5 751 725 issued May 12 1998 by Tao Chen and patent U.S. application Ser. No. 08 908 866 also entitled METHOD AND APPARATUS FOR DETERMINING THE RATE OF RECEIVED DATA IN A VARIABLE RATE COMMUNICATION SYSTEM filed Aug. 17 1999 now U.S. Pat. No. 6 175 590 issued Jan. 16 2001 by Jeremy M. Stein both assigned to the assignee of the present invention and incorporated by reference herein. For all cases described above mobile station transmits a NACK message as described above if the outcome of the frame check is negative.

The discussion hereinafter is based on the first embodiment wherein mobile station transmits to base station the DRC message indicative of the requested data rate except as otherwise indicated. However the inventive concept described herein is equally applicable to the second embodiment wherein mobile station transmits an indication of the link quality to base station .

In the handoff case mobile station communicates with multiple base stations on the reverse link. In the exemplary embodiment data transmission on the forward link to a particular mobile station occurs from one base station . However mobile station can simultaneously receive the pilot signals from multiple base stations . If the C I measurement of a base station is above a predetermined threshold the base station is added to the active set of mobile station . During the soft handoff direction message the new base station assigns mobile station to a reverse power control RPC Walsh channel which is described below. Each base station in soft handoff with mobile station monitors the reverse link transmission and sends an RPC bit on their respective RPC Walsh channels.

Referring to selector element assigned to control the communication with mobile station forwards the data to all base stations in the active set of mobile station . All base stations which receive data from selector element transmit a paging message to mobile station on their respective control channels. When mobile station is in the connected state mobile station performs two functions. First mobile station selects the best base station based on a set of parameter which can be the best C I measurement. Mobile station then selects a data rate corresponding to the C I measurement and transmits a DRC message to the selected base station . Mobile station can direct transmission of the DRC message to a particular base station by covering the DRC message with the Walsh cover assigned to that particular base station . Second mobile station attempts to demodulate the forward link signal in accordance with the requested data rate at each subsequent time slot.

After transmitting the paging messages all base stations in the active set monitor the DRC channel for a DRC message from mobile station . Again because the DRC message is covered with a Walsh code the selected base station assigned with the identical Walsh cover is able to decover the DRC message. Upon receipt of the DRC message the selected base station transmits data to mobile station at the next available time slots.

In the exemplary embodiment base station transmits data in packets comprising a plurality of data units at the requested data rate to mobile station . If the data units are incorrectly received by mobile station a NACK message is transmitted on the reverse links to all base stations in the active set. In the exemplary embodiment the NACK message is demodulated and decoded by base stations and forwarded to selector element for processing. Upon processing of the NACK message the data units are retransmitted using the procedure as described above. In the exemplary embodiment selector element combines the NACK signals received from all base stations into one NACK message and sends the NACK message to all base stations in the active set.

In the exemplary embodiment mobile station can detect changes in the best C I measurement and dynamically request data transmissions from different base stations at each time slot to improve efficiency. In the exemplary embodiment since data transmission occurs from only one base station at any given time slot other base stations in the active set may not be aware which data units if any has been transmitted to mobile station . In the exemplary embodiment the transmitting base station informs selector element of the data transmission. Selector element then sends a message to all base stations in the active set. In the exemplary embodiment the transmitted data is presumed to have been correctly received by mobile station . Therefore if mobile station requests data transmission from a different base station in the active set the new base station transmits the remaining data units. In the exemplary embodiment the new base station transmits in accordance with the last transmission update from selector element . Alternatively the new base station selects the next data units to transmit using predictive schemes based on metrics such as the average transmission rate and prior updates from selector element . These mechanisms minimize duplicative retransmissions of the same data units by multiple base stations at different time slots which result in a loss in efficiency. If a prior transmission was received in error base stations can retransmit those data units out of sequence since each data unit is identified by a unique sequence number as described below. In the exemplary embodiment if a hole or non transmitted data units is created e.g. as the result of handoff between one base station to another base station the missing data units are considered as though received in error. Mobile station transmits NACK messages corresponding to the missing data units and these data units are retransmitted.

In the exemplary embodiment each base station in the active set maintains an independent data queue which contains the data to be transmitted to mobile station . The selected base station transmits data existing in its data queue in a sequential order except for retransmissions of data units received in error and signaling messages. In the exemplary embodiment the transmitted data units are deleted from queue after transmission.

An important consideration in the data communication system of the present invention is the accuracy of the C I estimates for the purpose of selecting the data rate for future transmissions. In the exemplary embodiment the C I measurements are performed on the pilot signals during the time interval when base stations transmit pilot signals. In the exemplary embodiment since only the pilot signals are transmitted during this pilot time interval the effects of multipath and interference are minimal.

In other implementations of the present invention wherein the pilot signals are transmitted continuously over an orthogonal code channel similar to that for the IS 95 systems the effect of multipath and interference can distort the C I measurements. Similarly when performing the C I measurement on the data transmissions instead of the pilot signals multipath and interference can also degrade the C I measurements. In both of these cases when one base station is transmitting to one mobile station the mobile station is able to accurately measure the C I of the forward link signal because no other interfering signals are present. However when mobile station is in soft handoff and receives the pilot signals from multiple base stations mobile station is not able to discern whether or not base stations were transmitting data. In the worst case scenario mobile station can measure a high C I at a first time slot when no base stations were transmitting data to any mobile station and receive data transmission at a second time slot when all base stations are transmitting data at the same time slot. The C I measurement at the first time slot when all base stations are idle gives a false indication of the forward link signal quality at the second time slot since the status of the data communication system has changed. In fact the actual C I at the second time slot can be degraded to the point that reliable decoding at the requested data rate is not possible.

The converse extreme scenario exists when a C I estimate by mobile station is based on maximal interference. However the actual transmission occurs when only the selected base station is transmitting. In this case the C I estimate and selected data rate are conservative and the transmission occurs at a rate lower than that which could be reliably decoded thus reducing the transmission efficiency.

In the implementation wherein the C I measurement is performed on a continuous pilot signal or the traffic signal the prediction of the C I at the second time slot based on the measurement of the C I at the first time slot can be made more accurate by three embodiments. In the first embodiment data transmissions from base stations are controlled so that base stations do not constantly toggle between the transmit and idle states at successive time slots. This can be achieved by queuing enough data e.g. a predetermined number of information bits before actual data transmission to mobile stations .

In the second embodiment each base station transmits a forward activity bit hereinafter referred to as the FAC bit which indicates whether a transmission will occur at the next half frame. The use of the FAC bit is described in detail below. Mobile station performs the C I measurement taking into account the received FAC bit from each base station .

In the third embodiment which corresponds to the scheme wherein an indication of the link quality is transmitted to base station and which uses a centralized scheduling scheme the scheduling information indicating which ones of base stations transmitted data at each time slot is made available to channel scheduler . Channel scheduler receives the C I measurements from mobile stations and can adjust the C I measurements based on its knowledge of the presence or absence of data transmission from each base station in the data communication system. For example mobile station can measure the C I at the first time slot when no adjacent base stations are transmitting. The measured C I is provided to channel scheduler . Channel scheduler knows that no adjacent base stations transmitted data in the first time slot since none was scheduled by channel scheduler . In scheduling data transmission at the second time slot channel scheduler knows whether one or more adjacent base stations will transmit data. Channel scheduler can adjust the C I measured at the first time slot to take into account the additional interference mobile station will receive in the second time slot due to data transmissions by adjacent base stations . Alternately if the C I is measured at the first time slot when adjacent base stations are transmitting and these adjacent base stations are not transmitting at the second time slot channel scheduler can adjust the C I measurement to take into account the additional information.

Another important consideration is to minimize redundant retransmissions. Redundant retransmissions can result from allowing mobile station to select data transmission from different base stations at successive time slots. The best C I measurement can toggle between two or more base stations over successive time slots if mobile station measures approximately equal C I for these base stations . The toggling can be due to deviations in the C I measurements and or changes in the channel condition. Data transmission by different base stations at successive time slots can result in a loss in efficiency.

The toggling problem can be addressed by the use of hysteresis. The hysteresis can be implemented with a signal level scheme a timing scheme or a combination of the signal level and timing schemes. In the exemplary signal level scheme the better C I measurement of a different base station in the active set is not selected unless it exceeds the C I measurement of the current transmitting base station by at least the hysteresis quantity. As an example assume that the hysteresis is 1.0 dB and that the C I measurement of the first base station is 3.5 dB and the C I measurement of the second base station is 3.0 dB at the first time slot. At the next time slot the second base station is not selected unless its C I measurement is at least 1.0 dB higher than that of the first base station . Thus if the C I measurement of the first base station is still 3.5 dB at the next time slot the second base station is not selected unless its C I measurement is at least 4.5 dB.

In the exemplary timing scheme base station transmits data packets to mobile station for a predetermined number of time slots. Mobile station is not allowed to select a different transmitting base station within the predetermined number of time slots. Mobile station continues to measure the C I of the current transmitting base station at each time slot and selects the data rate in response to the C I measurement.

Yet another important consideration is the efficiency of the data transmission. Referring to each data packet format and contains data and overhead bits. In the exemplary embodiment the number of overhead bits is fixed for all data rates. At the highest data rate the percentage of overhead is small relative to the packet size and the efficiency is high. At the lower data rates the overhead bits can comprise a larger percentage of the packet. The inefficiency at the lower data rates can be improved by transmitting variable length data packets to mobile station . The variable length data packets can be partitioned and transmitted to mobile station over multiple time slots. Preferably the variable length data packets are transmitted to mobile station over successive time slots to simplify the processing. The present invention is directed to the use of various packet sizes for various supported data rates to improve the overall transmission efficiency.

In the exemplary embodiment base station transmits at the maximum power available to base station and at the maximum data rate supported by the data communication system to a single mobile station at any given slot. The maximum data rate that can be supported is dynamic and depends on the C I of the forward link signal as measured by mobile station . Preferably base station transmits to only one mobile station at any given time slot.

To facilitate data transmission the forward link comprises four time multiplexed channels the pilot channel power control channel control channel and traffic channel. The function and implementation of each of these channels are described below. In the exemplary embodiment the traffic and power control channels each comprises a number of orthogonally spread Walsh channels. In the present invention the traffic channel is used to transmit traffic data and paging messages to mobile stations . When used to transmit paging messages the traffic channel is also referred to as the control channel in this specification.

In the exemplary embodiment the bandwidth of the forward link is selected to be 1.2288 MHz. This bandwidth selection allows the use of existing hardware components designed for a CDMA system which conforms to the IS 95 standard. However the data communication system of the present invention can be adopted for use with different bandwidths to improve capacity and or to conform to system requirements. For example a 5 MHz bandwidth can be utilized to increase the capacity. Furthermore the bandwidths of the forward link and the reverse link can be different e.g. 5 MHz bandwidth on the forward link and 1.2288 MHz bandwidth on the reverse link to more closely match link capacity with demand.

In the exemplary embodiment the short PNand PNcodes are the same length 2PN codes which are specified by the IS 95 standard. At the 1.2288 MHz chip rate the short PN sequences repeat every 26.67 msec 26.67 msec 2 1.2288 10. In the exemplary embodiment the same short PN codes are used by all base stations within the data communication system. However each base station is identified by a unique offset of the basic short PN sequences. In the exemplary embodiment the offset is in increments of 64 chips. Other bandwidth and PN codes can be utilized and are within the scope of the present invention.

A block diagram of the exemplary forward link architecture of the present invention is shown in . The data is partitioned into data packets and provided to CRC encoder . For each data packet CRC encoder generates frame check bits e.g. the CRC parity bits and inserts the code tail bits. The formatted packet from CRC encoder comprises the data the frame check and code tail bits and other overhead bits which are described below. The formatted packet is provided to encoder which in the exemplary embodiment encodes the packet in accordance with the encoding format disclosed in the aforementioned U.S. Pat. No. 5 933 462. Other encoding formats can also be used and are within the scope of the present invention. The encoded packet from encoder is provided to interleaver which reorders the code symbols in the packet. The interleaved packet is provided to frame puncture element which removes a fraction of the packet in the manner described below. The punctured packet is provided to multiplier which scrambles the data with the scrambling sequence from scrambler . Puncture element and scrambler are described in detail below. The output from multiplier comprises the scrambled packet.

The scrambled packet is provided to variable rate controller which demultiplexes the packet into K parallel inphase and quadrature channels where K is dependent on the data rate. In the exemplary embodiment the scrambled packet is first demultiplexed into the inphase I and quadrature Q streams. In the exemplary embodiment the I stream comprises even indexed symbols and the Q stream comprises odd indexed symbol. Each stream is further demultiplexed into K parallel channels such that the symbol rate of each channel is fixed for all data rates. The K channels of each stream are provided to Walsh cover element which covers each channel with a Walsh function to provide orthogonal channels. The orthogonal channel data are provided to gain element which scales the data to maintain a constant total energy per chip and hence constant output power for all data rates. The scaled data from gain element is provided to multiplexer MUX which multiplexes the data with the preamble. The preamble is discussed in detail below. The output from MUX is provided to multiplexer MUX which multiplexes the traffic data the power control bits and the pilot data. The output of MUX comprises the I Walsh channels and the Q Walsh channels.

A block diagram of the exemplary modulator used to modulate the data is illustrated in . The I Walsh channels and Q Walsh channels are provided to summers and respectively which sum the K Walsh channels to provide the signals Iand Q respectively. The Iand Qsignals are provided to complex multiplier . Complex multiplier also receives the PN I and PN Q signals from multipliers and respectively and multiplies the two complex inputs in accordance with the following equation 

In the exemplary embodiment the data packet is spread with the long PN code and the short PN codes. The long PN code scrambles the packet such that only the mobile station for which the packet is destined is able to descramble the packet. In the exemplary embodiment the pilot and power control bits and the control channel packet are spread with the short PN codes but not the long PN code to allow all mobile stations to receive these bits. The long PN sequence is generated by long code generator and provided to multiplexer MUX . The long PN mask determines the offset of the long PN sequence and is uniquely assigned to the destination mobile station . The output from MUX is the long PN sequence during the data portion of the transmission and zero otherwise e.g. during the pilot and power control portion . The gated long PN sequence from MUX and the short PNand PNsequences from short code generator are provided to multipliers and respectively which multiply the two sets of sequences to form the PN I and PN Q signals respectively. The PN I and PN Q signals are provided to complex multiplier .

The block diagram of the exemplary traffic channel shown in is one of numerous architectures which support data encoding and modulation on the forward link. Other architectures such as the architecture for the forward link traffic channel in the CDMA system which conforms to the IS 95 standard can also be utilized and are within the scope of the present invention.

In the exemplary embodiment the data rates supported by base stations are predetermined and each supported data rate is assigned a unique rate index. Mobile station selects one of the supported data rates based on the C I measurement. Since the requested data rate needs to be sent to a base station to direct that base station to transmit data at the requested data rate a trade off is made between the number of supported data rates and the number of bits needed to identify the requested data rate. In the exemplary embodiment the number of supported data rates is seven and a 3 bit rate index is used to identify the requested data rate. An exemplary definition of the supported data rates is illustrated in Table 1. Different definition of the supported data rates can be contemplated and are within the scope of the present invention.

In the exemplary embodiment the minimum data rate is 38.4 Kbps and the maximum data rate is 2.4576 Mbps. The minimum data rate is selected based on the worse case C I measurement in the system the processing gain of the system the design of the error correcting codes and the desired level of performance. In the exemplary embodiment the supported data rates are chosen such that the difference between successive supported data rates is 3 dB. The 3 dB increment is a compromise among several factors which include the accuracy of the C I measurement that can be achieved by mobile station the losses or inefficiencies which results from the quantization of the data rates based on the C I measurement and the number of bits or the bit rate needed to transmit the requested data rate from mobile station to base station . More supported data rates requires more bits to identify the requested data rate but allows for more efficient use of the forward link because of smaller quantization error between the calculated maximum data rate and the supported data rate. The present invention is directed to the use of any number of supported data rates and other data rates than those listed in Table 1.

A diagram of the exemplary forward link frame structure of the present invention is illustrated in . The traffic channel transmission is partitioned into frames which in the exemplary embodiment are defined as the length of the short PN sequences or 26.67 msec. Each frame can carry control channel information addressed to all mobile stations control channel frame traffic data addressed to a particular mobile station traffic frame or can be empty idle frame . The content of each frame is determined by the scheduling performed by the transmitting base station . In the exemplary embodiment each frame comprises 16 time slots with each time slot having a duration of 1.667 msec. A time slot of 1.667 msec is adequate to enable mobile station to perform the C I measurement of the forward link signal. A time slot of 1.667 msec also represents a sufficient amount of time for efficient packet data transmission. In the exemplary embodiment each time slot is further partitioned into four quarter slots.

In the present invention each data packet is transmitted over one or more time slots as shown in Table 1. In the exemplary embodiment each forward link data packet comprises 1024 or 2048 bits. Thus the number of time slots required to transmit each data packet is dependent on the data rate and ranges from 16 time slots for the 38.4 Kbps rate to 1 time slot for the 1.2288 Mbps rate and higher.

An exemplary diagram of the forward link slot structure of the present invention is shown in . In the exemplary embodiment each slot comprises three of the four time multiplexed channels the traffic channel the control channel the pilot channel and the power control channel. In the exemplary embodiment the pilot and power control channels are transmitted in two pilot and power control bursts which are located at the same positions in each time slot. The pilot and power control bursts are described in detail below.

In the exemplary embodiment the interleaved packet from interleaver is punctured to accommodate the pilot and power control bursts. In the exemplary embodiment each interleaved packet comprises 4096 code symbols and the first 512 code symbols are punctured as shown in . The remaining code symbols are skewed in time to align to the traffic channel transmission intervals.

The punctured code symbols are scrambled to randomize the data prior to applying the orthogonal Walsh cover. The randomization limits the peak to average envelope on the modulated waveform S t . The scrambling sequence can be generated with a linear feedback shift register in a manner known in the art. In the exemplary embodiment scrambler is loaded with the LC state at the start of each slot. In the exemplary embodiment the clock of scrambler is synchronous with the clock of interleaver but is stalled during the pilot and power control bursts.

In the exemplary embodiment the forward Walsh channels for the traffic channel and power control channel are orthogonally spread with 16 bit Walsh covers at the fixed chip rate of 1.2288 Mcps. The number of parallel orthogonal channels K per in phase and quadrature signal is a function of the data rate as shown in Table 1. In the exemplary embodiment for lower data rates the in phase and quadrature Walsh covers are chosen to be orthogonal sets to minimize cross talk to the demodulator phase estimate errors. For example for 16 Walsh channels an exemplary Walsh assignment is Wthrough Wfor the in phase signal and Wthrough Wfor the quadrature signal.

In the exemplary embodiment QPSK modulation is used for data rates of 1.2288 Mbps and lower. For QPSK modulation each Walsh channel comprises one bit. In the exemplary embodiment at the highest data rate of 2.4576 Mbps 16 QAM is used and the scrambled data is demultiplexed into 32 parallel streams which are each 2 bit wide 16 parallel streams for the inphase signal and 16 parallel streams for the quadrature signal. In the exemplary embodiment the LSB of each 2 bit symbol is the earlier symbol output from interleaver . In the exemplary embodiment the QAM modulation inputs of 0 1 3 2 map to modulation values of 3 1 1 3 respectively. The use of other modulation schemes such as m ary phase shift keying PSK can be contemplated and are within the scope of the present invention.

The in phase and quadrature Walsh channels are scaled prior to modulation to maintain a constant total transmit power which is independent of the data rate. The gain settings are normalized to a unity reference equivalent to unmodulated BPSK. The normalized channel gains G as a function of the number of Walsh channels or data rate are shown in Table 2. Also listed in Table 2 is the average power per Walsh channel inphase or quadrature such that the total normalized power is equal to unity. Note that the channel gain for 16 QAM accounts for the fact that the normalized energy per Walsh chip is 1 for QPSK and 5 for 16 QAM.

In the present invention a preamble is punctured into each traffic frame to assist mobile station in the synchronization with the first slot of each variable rate transmission. In the exemplary embodiment the preamble is an all zero sequence which for a traffic frame is spread with the long PN code but for a control channel frame is not spread with the long PN code. In the exemplary embodiment the preamble is unmodulated BPSK which is orthogonally spread with Walsh cover W. The use of a single orthogonal channel minimizes the peak to average envelope. Also the use of a non zero Walsh cover Wminimizes false pilot detection since for traffic frames the pilot is spread with Walsh cover Wand both the pilot and the preamble are not spread with the long PN code.

The preamble is multiplexed into the traffic channel stream at the start of the packet for a duration that is a function of the data rate. The length of the preamble is such that the preamble overhead is approximately constant for all data rates while minimizing the probability of false detection. A summary of the preamble as a function of data rates is shown in Table 3. Note that the preamble comprises 3.1 percent or less of a data packet.

In the exemplary embodiment each data packet is formatted by the additions of frame check bits code tail bits and other control fields. In this specification an octet is defined as 8 information bits and a data unit is a single octet and comprises 8 information bits.

In the exemplary embodiment the forward link supports two data packet formats which are illustrated in . Packet format comprises five fields and packet format comprises nine fields. Packet format is used when the data packet to be transmitted to mobile station contains enough data to completely fill all available octets in DATA field . If the amount of data to be transmitted is less than the available octets in DATA field packet format is used. The unused octets are padded with all zeros and designated as PADDING field .

In the exemplary embodiment frame check sequence FCS fields and contain the CRC parity bits which are generated by CRC generator see in accordance with a predetermined generator polynomial. In the exemplary embodiment the CRC polynomial is g x x x x 1 although other polynomials can be used and are within the scope of the present invention. In the exemplary embodiment the CRC bits are calculated over the FMT SEQ LEN DATA and PADDING fields. This provides error detection over all bits except the code tail bits in TAIL fields and transmitted over the traffic channel on the forward link. In the alternative embodiment the CRC bits are calculated only over the DATA field. In the exemplary embodiment FCS fields and contain 16 CRC parity bits although other CRC generators providing different number of parity bits can be used and are within the scope of the present invention. Although FCS fields and of the present invention has been described in the context of CRC parity bits other frame check sequences can be used and are within the scope of the present invention. For example a check sum can be calculated for the packet and provided in the FCS field.

In the exemplary embodiment frame format FMT fields and contain one control bit which indicates whether the data frame contains only data octets packet format or data and padding octets and zero or more messages packet format . In the exemplary embodiment a low value for FMT field corresponds to packet format . Alternatively a high value for FMT field corresponds to packet format .

Sequence number SEQ fields and identify the first data unit in data fields and respectively. The sequence number allows data to be transmitted out of sequence to mobile station e.g. for retransmission of packets which have been received in error. The assignment of the sequence number at the data unit level eliminates the need for frame fragmentation protocol for retransmission. The sequence number also allows mobile station to detect duplicate data units. Upon receipt of the FMT SEQ and LEN fields mobile station is able to determine which data units have been received at each time slot without the use of special signaling messages.

The number of bits assigned to represent the sequence number is dependent on the maximum number of data units which can be transmitted in one time slot and the worse case data retransmission delays. In the exemplary embodiment each data unit is identified by a 24 bit sequence number. At the 2.4576 Mbps data rate the maximum number of data units which can be transmitted at each slot is approximately 256. Eight bits are required to identify each of the data units. Furthermore it can be calculated that the worse case data retransmission delays are less than 500 msec. The retransmission delays include the time necessary for a NACK message by mobile station retransmission of the data and the number of retransmission attempts caused by the worse case burst error runs. Therefore 24 bits allows mobile station to properly identify the data units being received without ambiguity. The number of bits in SEQ fields and can be increased or decreased depending on the size of DATA field and the retransmission delays. The use of different number of bits for SEQ fields and are within the scope of the present invention.

When base station has less data to transmit to mobile station than the space available in DATA field packet format is used. Packet format allows base station to transmit any number of data units up to the maximum number of available data units to mobile station . In the exemplary embodiment a high value for FMT field indicates that base station is transmitting packet format . Within packet format LEN field contains the value of the number of data units being transmitted in that packet. In the exemplary embodiment LEN field is 8 bits in length since DATA field can range from 0 to 255 octets.

DATA fields and contain the data to be transmitted to mobile station . In the exemplary embodiment for packet format each data packet comprises 1024 bits of which 992 are data bits. However variable length data packets can be used to increase the number of information bits and are within the scope of the present invention. For packet format the size of DATA field is determined by LEN field .

In the exemplary embodiment packet format can be used to transmit zero or more signaling messages. Signaling length SIG LEN field contains the length of the subsequent signaling messages in octets. In the exemplary embodiment SIG LEN field is 8 bits in length. SIGNALING field contains the signaling messages. In the exemplary embodiment each signaling message comprises a message identification MESSAGE ID field a message length LEN field and a message payload as described below.

PADDING field contains padding octets which in the exemplary embodiment are set to 0x00 hex . PADDING field is used because base station may have fewer data octets to transmit to mobile station than the number of octets available in DATA field . When this occurs PADDING field contains enough padding octets to fill the unused data field. PADDING field is variable length and depends on the length of DATA field .

The last field of packet formats and is TAIL fields and respectively. TAIL fields and contain the zero 0x0 code tail bits which are used to force encoder see into a known state at the end of each data packet. The code tail bits allow encoder to succinctly partition the packet such that only bits from one packet are used in the encoding process. The code tail bits also allow the decoder within mobile station to determine the packet boundaries during the decoding process. The number of bits in TAIL fields and depends on the design of encoder . In the exemplary embodiment TAIL fields and are long enough to force encoder to a known state.

The two packet formats described above are exemplary formats which can be used to facilitate transmission of data and signaling messages. Various other packet formats can be create to meet the needs of a particular communication system. Also a communication system can be designed to accommodate more than the two packet formats described above.

In the present invention the traffic channel is also used to transmit messages from base station to mobile stations . The types of messages transmitted include 1 handoff direction messages 2 paging messages e.g. to page a specific mobile station that there is data in the queue for that mobile station 3 short data packets for a specific mobile station and 4 ACK or NACK messages for the reverse link data transmissions to be described later herein . Other types of messages can also be transmitted on the control channel and are within the scope of the present invention. Upon completion of the call set up stage mobile station monitors the control channel for paging messages and begins transmission of the reverse link pilot signal.

In the exemplary embodiment the control channel is time multiplexed with the traffic data on the traffic channel as shown in . Mobile stations identify the control message by detecting a preamble which has been covered with a predetermined PN code. In the exemplary embodiment the control messages are transmitted at a fixed rate which is determined by mobile station during acquisition. In the preferred embodiment the data rate of the control channel is 76.8 Kbps.

The control channel transmits messages in control channel capsules. The diagram of an exemplary control channel capsule is shown in . In the exemplary embodiment each capsule comprises preamble the control payload and CRC parity bits . The control payload comprises one or more messages and if necessary padding bits . Each message comprises message identifier MSG ID message length LEN optional address ADDR e.g. if the message is directed to a specific mobile station and message payload . In the exemplary embodiment the messages are aligned to octet boundaries. The exemplary control channel capsule illustrated in comprises two broadcast messages intended for all mobile stations and one message directed at a specific mobile station . MSG ID field determines whether or not the message requires an address field e.g. whether it is a broadcast or a specific message .

In the present invention a forward link pilot channel provides a pilot signal that is used by mobile stations for initial acquisition phase recovery timing recovery and ratio combining. These uses are similar to that of the CDMA communication systems that conform to IS 95 standard. In the exemplary embodiment mobile stations to perform the C I measurement also use the pilot signal.

The exemplary block diagram of the forward link pilot channel of the present invention is shown in . The pilot data comprises a sequence of all zeros or all ones which is provided to multiplier . Multiplier covers the pilot data with Walsh code W. Since Walsh code Wis a sequence of all zeros the output of multiplier is the pilot data. The pilot data is time multiplexed by MUX and provided to the I Walsh channel which is spread by the short PNcode within complex multiplier see . In the exemplary embodiment the pilot data is not spread with the long PN code which is gated off during the pilot burst by MUX to allow reception by all mobile stations . The pilot signal is thus an unmodulated BPSK signal.

A diagram illustrating the pilot signal is shown in . In the exemplary embodiment each time slot comprises two pilot bursts and which occur at the end of the first and third quarters of the time slot. In the exemplary embodiment each pilot burst is 64 chips in duration Tp 64 chips . In the absence of traffic data or control channel data base station only transmits the pilot and power control bursts resulting in a discontinuous waveform bursting at the periodic rate of 1200 Hz. The pilot modulation parameters are tabulated in Table 4.

In the present invention the forward link power control channel is used to send the power control command which is used to control the transmit power of the reverse link transmission from remote station . On the reverse link each transmitting mobile station acts as a source of interference to all other mobile stations in the network. To minimize interference on the reverse link and maximize capacity the transmit power of each mobile station is controlled by two power control loops. In the exemplary embodiment the power control loops are similar to that of the CDMA system disclosed in detail in U.S. Pat. No. 5 056 109 entitled METHOD AND APPARATUS FOR CONTROLLING TRANSMISSION POWER IN A CDMA CELLULAR MOBILE TELEPHONE SYSTEM assigned to the assignee of the present invention and incorporated by reference herein. Other power control mechanism can also be contemplated and are within the scope of the present invention.

The first power control loop adjusts the transmit power of mobile station such that the reverse link signal quality is maintained at a set level. The signal quality is measured as the energy per bit to noise plus interference ratio E Iof the reverse link signal received at base station . The set level is referred to as the E Iset point. The second power control loop adjusts the set point such that the desired level of performance as measured by the frame error rate FER is maintained. Power control is critical on the reverse link because the transmit power of each mobile station is an interference to other mobile stations in the communication system. Minimizing the reverse link transmit power reduces the interference and increases the reverse link capacity.

Within the first power control loop the E Iof the reverse link signal is measured at base station . Base station then compares the measured E Iwith the set point. If the measured E Iis greater than the set point base station transmits a power control message to mobile station to decrease the transmit power. Alternatively if the measured E Iis below the set point base station transmits a power control message to mobile station to increase the transmit power. In the exemplary embodiment the power control message is implemented with one power control bit. In the exemplary embodiment a high value for the power control bit commands mobile station to increase its transmit power and a low value commands mobile station to decrease its transmit power.

In the present invention the power control bits for all mobile stations in communication with each base station are transmitted on the power control channel. In the exemplary embodiment the power control channel comprises up to 32 orthogonal channels which are spread with the 16 bit Walsh covers. Each Walsh channel transmits one reverse power control RPC bit or one FAC bit at periodic intervals. Each active mobile station is assigned an RPC index which defines the Walsh cover and QPSK modulation phase e.g. inphase or quadrature for transmission of the RPC bit stream destined for that mobile station . In the exemplary embodiment the RPC index of 0 is reserved for the FAC bit.

The exemplary block diagram of the power control channel is shown in . The RPC bits are provided to symbol repeater which repeats each RPC bit a predetermined number of times. The repeated RPC bits are provided to Walsh cover element which covers the bits with the Walsh covers corresponding to the RPC indices. The covered bits are provided to gain element which scales the bits prior to modulation so as to maintain a constant total transmit power. In the exemplary embodiment the gains of the RPC Walsh channels are normalized so that the total RPC channel power is equal to the total available transmit power. The gains of the Walsh channels can be varied as a function of time for efficient utilization of the total base station transmit power while maintaining reliable RPC transmission to all active mobile stations . In the exemplary embodiment the Walsh channel gains of inactive mobile stations are set to zero. Automatic power control of the RPC Walsh channels is possible using estimates of the forward link quality measurement from the corresponding DRC channel from mobile stations . The scaled RPC bits from gain element are provided to MUX .

In the exemplary embodiment the RPC indices of 0 through 15 are assigned to Walsh covers Wthrough W respectively and are transmitted around the first pilot burst within a slot RPC bursts in . The RPC indices of 16 through 31 are assigned to Walsh covers Wthrough W respectively and are transmitted around the second pilot burst within a slot RPC bursts in . In the exemplary embodiment the RPC bits are BPSK modulated with the even Walsh covers e.g. W W W etc. modulated on the inphase signal and the odd Walsh covers e.g. W W W etc. modulated on the quadrature signal. To reduce the peak to average envelope it is preferable to balance the inphase and quadrature power. Furthermore to minimize cross talk due to demodulator phase estimate error it is preferable to assign orthogonal covers to the inphase and quadrature signals.

In the exemplary embodiment up to 31 RPC bits can be transmitted on 31 RPC Walsh channels in each time slot. In the exemplary embodiment 15 RPC bits are transmitted on the first half slot and 16 RPC bits are transmitted on the second half slot. The RPC bits are combined by summers see and the composite waveform of the power control channel is as shown is in .

A timing diagram of the power control channel is illustrated in . In the exemplary embodiment the RPC bit rate is 600 bps or one RPC bit per time slot. Each RPC bit is time multiplexed and transmitted over two RPC bursts e.g. RPC bursts and as shown in . In the exemplary embodiment each RPC burst is 32 PN chips or 2 Walsh symbols in width Tpc 32 chips and the total width of each RPC bit is 64 PN chips or 4 Walsh symbols . Other RPC bit rates can be obtained by changing the number of symbol repetition. For example an RPC bit rate of 1200 bps to support up to 63 mobile stations simultaneously or to increase the power control rate can be obtained by transmitting the first set of 31 RPC bits on RPC bursts and and the second set of 32 RPC bits on RPC bursts and . In this case all Walsh covers are used in the inphase and quadrature signals. The modulation parameters for the RPC bits are summarized in Table 4.

The power control channel has a bursty nature since the number of mobile stations in communication with each base station can be less than the number of available RPC Walsh channels. In this situation some RPC Walsh channels are set to zero by proper adjustment of the gains of gain element .

In the exemplary embodiment the RPC bits are transmitted to mobile stations without coding or interleaving to minimize processing delays. Furthermore the erroneous reception of the power control bit is not detrimental to the data communication system of the present invention since the error can be corrected in the next time slot by the power control loop.

In the present invention mobile stations can be in soft handoff with multiple base stations on the reverse link. The method and apparatus for the reverse link power control for mobile station in soft handoff is disclosed in the aforementioned U.S. Pat. No. 5 056 109. Mobile station in soft handoff monitors the RPC Walsh channel for each base station in the active set and combines the RPC bits in accordance with the method disclosed in the aforementioned U.S. Pat. No. 5 056 109. In the first embodiment mobile station performs the logic OR of the down power commands. Mobile station decreases the transmit power if any one of the received RPC bits commands mobile station to decrease the transmit power. In the second embodiment mobile station in soft handoff can combine the soft decisions of the RPC bits before making a hard decision. Other embodiments for processing the received RPC bits can be contemplated and are within the scope of the present invention.

In the present invention the FAC bit indicates to mobile stations whether or not the traffic channel of the associated pilot channel will be transmitting on the next half frame. The use of the FAC bit improves the C I estimate by mobile stations and hence the data rate request by broadcasting the knowledge of the interference activity. In the exemplary embodiment the FAC bit only changes at half frame boundaries and is repeated for eight successive time slots resulting in a bit rate of 75 bps. The parameters for the FAC bit is listed in Table 4.

In the present invention the reverse link supports variable rate data transmission. The variable rate provides flexibility and allows mobile stations to transmit at one of several data rates depending on the amount of data to be transmitted to base station . In the exemplary embodiment mobile station can transmit data at the lowest data rate at any time. In the exemplary embodiment data transmission at higher data rates requires a grant by base station . This implementation minimizes the reverse link transmission delay while providing efficient utilization of the reverse link resource.

An exemplary illustration of the flow diagram of the reverse link data transmission of the present invention is shown in . Initially at slot n mobile station performs an access probe as described in the aforementioned U.S. Pat. No. 5 289 527 to establish the lowest rate data channel on the reverse link at block . In the same slot n base station demodulates the access probe and receives the access message at block . Base station grants the request for the data channel and at slot n 2 transmits the grant and the assigned RPC index on the control channel at block . At slot n 2 mobile station receives the grant and is power controlled by base station at block . Beginning at slot n 3 mobile station starts transmitting the pilot signal and has immediate access to the lowest rate data channel on the reverse link.

If mobile station has traffic data and requires a high rate data channel mobile station can initiate the request at block . At slot n 3 base station receives the high speed data request at block . At slot n 5 base station transmits the grant on the control channel at block . At slot n 5 mobile station receives the grant at block and begins high speed data transmission on the reverse link starting at slot n 6 at block .

In the data communication system of the present invention the reverse link transmission differs from the forward link transmission in several ways. On the forward link data transmission typically occurs from one base station to one mobile station . However on the reverse link each base station can concurrently receive data transmissions from multiple mobile stations . In the exemplary embodiment each mobile station can transmit at one of several data rates depending on the amount of data to be transmitted to base station . This system design reflects the asymmetric characteristic of data communication.

In the exemplary embodiment the time base unit on the reverse link is identical to the time base unit on the forward link. In the exemplary embodiment the forward link and reverse link data transmissions occur over time slots which are 1.667 msec in duration. However since data transmission on the reverse link typically occurs at a lower data rate a longer time base unit can be used to improve efficiency.

In the exemplary embodiment the reverse link supports two channels the pilot DRC channel and the data channel. The function and implementation of each of this channel are described below. The pilot DRC channel is used to transmit the pilot signal and the DRC messages and the data channel is used to transmit traffic data.

A diagram of the exemplary reverse link frame structure of the present invention is illustrated in . In the exemplary embodiment the reverse link frame structure is similar to the forward link frame structure shown in . However on the reverse link the pilot DRC data and traffic data are transmitted concurrently on the in phase and quadrature channels.

In the exemplary embodiment mobile station transmits a DRC message on the pilot DRC channel at each time slot whenever mobile station is receiving high speed data transmission. Alternatively when mobile station is not receiving high speed data transmission the entire slot on the pilot DRC channel comprises the pilot signal. The pilot signal is used by the receiving base station for a number of functions as an aid to initial acquisition as a phase reference for the pilot DRC and the data channels and as the source for the closed loop reverse link power control.

In the exemplary embodiment the bandwidth of the reverse link is selected to be 1.2288 MHz. This bandwidth selection allows the use of existing hardware designed for a CDMA system which conforms to the IS 95 standard. However other bandwidths can be utilized to increase capacity and or to conform to system requirements. In the exemplary embodiment the same long PN code and short PNand PNcodes as those specified by the IS 95 standard are used to spread the reverse link signal. In the exemplary embodiment the reverse link channels are transmitted using QPSK modulation. Alternatively OQPSK modulation can be used to minimize the peak to average amplitude variation of the modulated signal which can result in improved performance. The use of different system bandwidth PN codes and modulation schemes can be contemplated and are within the scope of the present invention.

In the exemplary embodiment the transmit power of the reverse link transmissions on the pilot DRC channel and the data channel are controlled such that the E Iof the reverse link signal as measured at base station is maintained at a predetermined E Iset point as discussed in the aforementioned U.S. Pat. No. 5 506 109. The power control is maintained by base stations in communication with the mobile station and the commands are transmitted as the RPC bits as discussed above.

A block diagram of the exemplary reverse link architecture of the present invention is shown in . The data is partitioned into data packets and provided to encoder . For each data packet encoder generates the CRC parity bits inserts the code tail bits and encodes the data. In the exemplary embodiment encoder encodes the packet in accordance with the encoding format disclosed in the aforementioned U.S. Pat. No. 5 933 462. Other encoding formats can also be used and are within the scope of the present invention. The encoded packet from encoder is provided to block interleaver which reorders the code symbols in the packet. The interleaved packet is provided to multiplier which covers the data with the Walsh cover and provides the covered data to gain element . Gain element scales the data to maintain a constant energy per bit Eregardless of the data rate. The scaled data from gain element is provided to multipliers and which spread the data with the PN Q and PN I sequences respectively. The spread data from multipliers and are provided to filters and respectively which filter the data. The filtered signals from filters and are provided to summer and the filtered signals from filter and are provided to summer . Summers sum the signals from the data channel with the signals from the pilot DRC channel. The outputs of summers and comprise IOUT and QOUT respectively which are modulated with the in phase sinusoid COS wt and the quadrature sinusoid SIN wt respectively as in the forward link and summed not shown in . In the exemplary embodiment the traffic data is transmitted on both the inphase and quadrature phase of the sinusoid.

In the exemplary embodiment the data is spread with the long PN code and the short PN codes. The long PN code scrambles the data such that the receiving base station is able to identify the transmitting mobile station . The short PN code spreads the signal over the system bandwidth. The long PN sequence is generated by long code generator and provided to multipliers . The short PNand PNsequences are generated by short code generator and also provided to multipliers and respectively which multiply the two sets of sequences to form the PN I and PN Q signals respectively. Timing control circuit provides the timing reference.

The exemplary block diagram of the data channel architecture as shown in is one of numerous architectures which support data encoding and modulation on the reverse link. For high rate data transmission an architecture similar to that of the forward link utilizing multiple orthogonal channels can also be used. Other architectures such as the architecture for the reverse link traffic channel in the CDMA system which conforms to the IS 95 standard can also be contemplated and are within the scope of the present invention.

In the exemplary embodiment the reverse link data channel supports four data rates which are tabulated in Table 5. Additional data rates and or different data rates can be supported and are within the scope of the present invention. In the exemplary embodiment the packet size for the reverse link is dependent on the data rate as shown in Table 5. As described in the aforementioned U.S. Pat. No. 5 933 462 improved decoder performance can be obtained for larger packet sizes. Thus different packet sizes than those listed in Table 5 can be utilized to improve performance and are within the scope of the present invention. In addition the packet size can be made a parameter which is independent of the data rate.

As shown in Table 5 the reverse link supports a plurality of data rates. In the exemplary embodiment the lowest data rate of 9.6K bps is allocated to each mobile station upon registration with base station . In the exemplary embodiment mobile stations can transmit data on the lowest rate data channel at any time slot without having to request permission from base station . In the exemplary embodiment data transmission at the higher data rates are granted by the selected base station based on a set of system parameters such as the system loading fairness and total throughput. An exemplary scheduling mechanism for high speed data transmission is described in detail in the aforementioned U.S. Pat. No. 6 335 922.

The exemplary block diagram of the pilot DRC channel is shown in . The DRC message is provided to DRC encoder which encodes the message in accordance with a predetermined coding format. Coding of the DRC message is important since the error probability of the DRC message needs to be sufficiently low because incorrect forward link data rate determination impacts the system throughput performance. In the exemplary embodiment DRC encoder is a rate 8 4 CRC block encoder that encodes the 3 bit DRC message into an 8 bit code word. The encoded DRC message is provided to multiplier which covers the message with the Walsh code which uniquely identifies the destination base station for which the DRC message is directed. The Walsh code is provided by Walsh generator . The covered DRC message is provided to multiplexer MUX which multiplexes the message with the pilot data. The DRC message and the pilot data are provided to multipliers and which spread the data with the PN I and PN Q signals respectively. Thus the pilot and DRC message are transmitted on both the inphase and quadrature phase of the sinusoid.

In the exemplary embodiment the DRC message is transmitted to the selected base station . This is achieved by covering the DRC message with the Walsh code which identifies the selected base station . In the exemplary embodiment the Walsh code is 128 chips in length. The derivation of 128 chip Walsh codes are known in the art. One unique Walsh code is assigned to each base station which is in communication with mobile station . Each base station decovers the signal on the DRC channel with its assigned Walsh code. The selected base station is able to decover the DRC message and transmits data to the requesting mobile station on the forward link in response thereto. Other base stations are able to determine that the requested data rate is not directed to them because these base stations are assigned different Walsh codes.

In the exemplary embodiment the reverse link short PN codes for all base stations in the data communication system is the same and there is no offset in the short PN sequences to distinguish different base stations . The data communication system of the present invention supports soft handoff on the reverse link. Using the same short PN codes with no offset allows multiple base stations to receive the same reverse link transmission from mobile station during a soft handoff. The short PN codes provide spectral spreading but do not allow for identification of base stations .

In the exemplary embodiment the DRC message carries the requested data rate by mobile station . In the alternative embodiment the DRC message carries an indication of the forward link quality e.g. the C I information as measured by mobile station . Mobile station can simultaneously receive the forward link pilot signals from one or more base stations and performs the C I measurement on each received pilot signal. Mobile station then selects the best base station based on a set of parameters which can comprise present and previous C I measurements. The rate control information is formatted into the DRC message which can be conveyed to base station in one of several embodiments.

In the first embodiment mobile station transmits a DRC message based on the requested data rate. The requested data rate is the highest supported data rate which yields satisfactory performance at the C I measured by mobile station . From the C I measurement mobile station first calculates the maximum data rate which yields satisfactory performance. The maximum data rate is then quantized to one of the supported data rates and designated as the requested data rate. The data rate index corresponding to the requested data rate is transmitted to the selected base station . An exemplary set of supported data rates and the corresponding data rate indices are shown in Table 1.

In the second embodiment wherein mobile station transmits an indication of the forward link quality to the selected base station mobile station transmits a C I index which represents the quantized value of the C I measurement. The C I measurement can be mapped to a table and associated with a C I index. Using more bits to represent the C I index allows a finer quantization of the C I measurement. Also the mapping can be linear or predistorted. For a linear mapping each increment in the C I index represents a corresponding increase in the C I measurement. For example each step in the C I index can represent a 2.0 dB increase in the C I measurement. For a predistorted mapping each increment in the C I index can represent a different increase in the C I measurement. As an example a predistorted mapping can be used to quantize the C I measurement to match the cumulative distribution function CDF curve of the C I distribution as shown in .

Other embodiments to convey the rate control information from mobile station to base station can be contemplated and are within the scope of the present invention. Furthermore the use of different number of bits to represent the rate control information is also within the scope of the present invention. Throughout much of the specification the present invention is described in the context of the first embodiment the use of a DRC message to convey the requested data rate for simplicity.

In the exemplary embodiment the C I measurement can be performed on the forward link pilot signal in the manner similar to that used in the CDMA system. A method and apparatus for performing the C I measurement is disclosed in U.S. patent application Ser. No. 08 722 763 entitled METHOD AND APPARATUS FOR MEASURING LINK QUALITY IN A SPREAD SPECTRUM COMMUNICATION SYSTEM filed Sep. 27 1996 now U.S. Pat. No. 5 903 554 issued May 11 1999 by Keith W. Saints assigned to the assignee of the present invention and incorporated by reference herein. In summary the C I measurement on the pilot signal can be obtained by despreading the received signal with the short PN codes. The C I measurement on the pilot signal can contain inaccuracies if the channel condition changed between the time of the C I measurement and the time of actual data transmission. In the present invention the use of the FAC bit allows mobile stations to take into consideration the forward link activity when determining the requested data rate.

In the alternative embodiment the C I measurement can be performed on the forward link traffic channel. The traffic channel signal is first despread with the long PN code and the short PN codes and decovered with the Walsh code. The C I measurement on the signals on the data channels can be more accurate because a larger percentage of the transmitted power is allocated for data transmission. Other methods to measure the C I of the received forward link signal by mobile station can also be contemplated and are within the scope of the present invention.

In the exemplary embodiment the DRC message is transmits in the first half of the time slot see . For an exemplary time slot of 1.667 msec the DRC message comprises the first 1024 chips or 0.83 msec of the time slot. The remaining 1024 chips of time are used by base station to demodulate and decode the message. Transmission of the DRC message in the earlier portion of the time slot allows base station to decode the DRC message within the same time slot and possibly transmit data at the requested data rate at the immediate successive time slot. The short processing delay allows the communication system of the present invention to quickly adapt to changes in the operating environment.

In the alternative embodiment the requested data rate is conveyed to base station by the use of an absolute reference and a relative reference. In this embodiment the absolute reference comprising the requested data rate is transmitted periodically. The absolute reference allows base station to determine the exact data rate requested by mobile station . For each time slots between transmissions of the absolute references mobile station transmits a relative reference to base station which indicates whether the requested data rate for the upcoming time slot is higher lower or the same as the requested data rate for the previous time slot. Periodically mobile station transmits an absolute reference. Periodic transmission of the data rate index allows the requested data rate to be set to a known state and ensures that erroneous receptions of relative references do not accumulate. The use of absolute references and relative references can reduce the transmission rate of the DRC messages to base station . Other protocols to transmit the requested data rate can also be contemplated and are within the scope of the present invention.

The access channel is used by mobile station to transmit messages to base station during the registration phase. In the exemplary embodiment the access channel is implemented using a slotted structure with each slot being accessed at random by mobile station . In the exemplary embodiment the access channel is time multiplexed with the DRC channel.

In the exemplary embodiment the access channel transmits messages in access channel capsules. In the exemplary embodiment the access channel frame format is identical to that specified by the IS 95 standard except that the timing is in 26.67 msec frames instead of the 20 msec frames specified by IS 95 standard. The diagram of an exemplary access channel capsule is shown in . In the exemplary embodiment each access channel capsule comprises preamble one or more message capsules and padding bits . Each message capsule comprises message length MSG LEN field message body and CRC parity bits .

In the present invention mobile station transmits the NACK messages on the data channel. The NACK message is generated for each packet received in error by mobile station . In the exemplary embodiment the NACK messages can be transmitted using the Blank and Burst signaling data format as disclosed in the aforementioned U.S. Pat. No. 5 504 773.

Although the present invention has been described in the context of a NACK protocol the use of an ACK protocol can be contemplated and are within the scope of the present invention.

The previous description of the preferred embodiments is provided to enable any person skilled in the art to make or use the present invention. The various modifications to these embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without the use of the inventive faculty. Thus the present invention is not intended to be limited to the embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

