---

title: Test circuit having scan warm-up
abstract: A test circuit for a functional circuit includes a scan chain coupled to the functional circuit, and a controller coupled to the scan chain, for controlling the scan chain to scan a test pattern into the scan chain, and subsequently and repetitively for a multiple number of times launch the test pattern to the functional circuit, capture test data into the scan chain, and restore the test pattern in the scan chain for subsequent launch.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09046574&OS=09046574&RS=09046574
owner: ADVANCED MICRO DEVICES, INC
number: 09046574
owner_city: Sunnyvale
owner_country: US
publication_date: 20121128
---
This disclosure relates generally to test circuits and more specifically to a test circuit having a scan chain.

Consumers continue to demand complex functional circuits with higher performance and lower cost such as data processors very large scale integrated circuits VLSI systems on chips SoCs central processing units CPUs advanced processing units APUs graphics processing units GPUs memory sub systems system controllers and peripheral functions. At the same time testing the operation of the functional circuit and determining that the functional circuit is operating as desired is increasingly difficult. Robust testing technologies have been developed such as boundary scan now defined as a standard by the Joint Test Action Group JTAG . Also Automatic Test Pattern Generation ATPG which is compatible with many automatic test equipment systems is used to determine if a functional circuit is operating according to specification. More advanced at speed ATPG technologies launch test patterns and capture the resulting data in a manner that tests a functional circuit at substantially the same speed the functional circuit runs during normal operation.

However a problem arises when testing circuits at speed by using a test pattern received and launched from an internal scan chain. The scan operation involves shifting bits of data serially through the scan chain at a relatively low speed. Once the test is enabled however a relatively large number of logic gates switch at high speed and their outputs are captured in the scan chain. This scan to test transition can cause a significant disruption on the internal power supply voltage and the disruption can distort the test and cause circuits that operate according to specifications to fail.

In the following description the use of the same reference numerals in different drawings indicates similar or identical items. Unless otherwise noted the word coupled and its associated verb forms include both direct connection and indirect electrical connection by means known in the art and unless otherwise noted any description of direct connection implies alternate embodiments using suitable forms of indirect electrical connection as well.

Multiplexer has a select input to receive a scan enable signal labeled SE an input 1 to receive a scan data input signal labeled SDI an input 0 to receive a data signal labeled D and an output. Scan latch has a clock input to receive a clock signal labeled SCLK a data input D connected to the output of multiplexer and an output Q to provide a serial data output signal labeled SDO and which forms a signal input to a functional circuit also labeled Q . The serial data output signal is used as a signal input to the SDI input of the next scan cell in a scan chain arrangement.

In operation in a scan shift mode multiplexer provides SDI to the D input of scan latch in response to a logic high on signal SE. Scan latch latches SDI on a rising edge of SCLK to provide SDO. Other latches in the scan chain not shown in are used to shift a test pattern through the scan chain until it is properly aligned.

In a test mode during a launch phase scan cell launches the Q output of scan latch after the scan shift mode is finished. In a capture phase multiplexer provides captured data D to the D input of scan latch in response to a logic low on signal SE. Scan latch latches the capture data on a rising edge of SCLK.

Functional circuits and may have a multiple number of inputs not shown for functional circuit and a multiple number of outputs not shown for functional circuit .

Test circuit includes a controller and a scan chain . Controller has an output to provide a scan shift enable signal labeled SSE an output to provide a shift clock signal labeled SCLK and an output to provide a control signal labeled WARMUP EN to scan cells in scan chain . Controller also has a scan data output to provide scan data to the first scan cell in scan chain and a scan data input to receive test data from the last scan cell in scan chain .

Scan chain includes a multiple number of scan cells forming a chain in which a scan data output of one scan cell is connected to a scan data input of the next scan cell in the chain. The first scan cell of scan chain has a scan data input connected to the scan data output of controller . Each subsequent scan cell of scan chain receives serial data input from the previous scan cell . The last scan cell of scan chain has a scan data output connected to the scan data input of controller .

In operation controller provides an interface for an external agent to load a scan pattern into integrated circuit perform a test using the scan pattern and determine the response of the various functional circuits to the test pattern. In this particular example controller defines a common boundary scan test interface and conforms to the Institute of Electrical and Electronic Engineers IEEE standard 1149.1. Controller first controls scan chain to shift in the desired test pattern. During scan shifting controller provides the SCLK signal at a relatively low speed such as 200 megahertz MHz . When the test pattern has been shifted into the appropriate position in scan chain controller warms up the functional circuits by repetitively outputting the desired test pattern from scan cells to the corresponding functional circuits and captures preliminary test data generated by the test pattern in scan cells . Controller then restores the original test pattern to the output of scan latches within scan cells . Controller provides SCLK as a relatively high speed clock such as 2 gigahertz GHz during test mode. The relatively high speed clock allows the functional circuits to react in the same way they would react during normal operation and to load the power supply in the same way. By repetitively performing warmup sequences and then restoring the desired test data to the scan latches test circuit causes the power supply voltage to settle so that the results of the at speed test will eventually reflect the operation of the circuit under normal operating conditions. After a desired number of repetitions corresponding to a power supply voltage settling time interval during which the power supply voltage initially deviates from its nominal value and subsequently returns to approximately the nominal value test circuit captures test response data generated by the functional circuits into scan chain and shifts the test response data out.

Restore latch has an active low enable input to receive signal WARMUP EN a D input to receive signal SDI from a previous scan latch and a Q output. Multiplexer has an input to receive a scan shift enable input labeled SSE a 1 input connected to the Q output of restore latch a 0 input to receive a data signal D and an output. Scan latch has a clock input to receive signal SCLK a D input connected to the output of multiplexer and a Q output to provide serial data output signal SDO to a subsequent latch and output signal Q to a functional circuit.

Considering both in a scan shift mode controller provides signal WARMUP EN at a logic low and signal SSE at a logic high to scan cell . Restore latch operates in a transparent mode during an inactive WARMUP EN WARMUP EN at a logic low in which the output changes in response to changes in the input. Multiplexer provides SDI to the D input of scan latch while signal SSE is at a logic high. Scan latch latches the value of SDI on the next low to high transition of SCLK. Controller provides additional transitions of SCLK to move data into successive positions until the desired test pattern has moved into the desired position in the scan chain.

When controller has shifted the test pattern into the desired position in the scan chain it provides signal WARMUP EN at a logic high to latch SDI in restore latch and enters the test mode. The test mode has three phases restore launch and capture. In the restore phase controller provides SSE at a logic high at a time sufficient to provide adequate setup time at the input of scan latch . A low to high transition of SCLK captures the data in scan latch and outputs the data to the corresponding functional circuit. In the capture phase controller provides signal SSE at a logic low to select the D input of multiplexer at a time sufficient to provide adequate setup time at the input of scan latch and this value is latched into scan latch on the next rising edge of SCLK. The launch phase separates the restore and capture phases. Controller repeats the restore launch and capture phases a multiple number of times to warm up the functional circuits. By changing the data at the output of scan latch with data from the D input via the multiplexor selector SSE 0 path during the launch phase scan cell ensures that the functional circuits under test are subjected to the same type of signal transitions at the same speed as they would encounter during normal operation.

After the end of the test mode controller enters a shift out mode by providing WARMUP EN at a logic low and SSE at a logic high and providing a series of SCLK pulses at a relatively low speed to shift the captured test response data out of the scan chain for comparison with expected results.

Note that while scan cell adds an additional level sensitive restore latch that requires a few extra transistors to implement restore latch eliminates the need for extra hold time buffers between scan cells as is typically needed in scan chain . Thus in actual embodiments the additional circuit area required to implement scan cell will be smaller than the size of an extra latch per cell.

In operation controller performs a launch on capture LOC test methodology. For the LOC test methodology test circuit launches a test pattern the functional circuits under test provide data to the D input signal of multiplexer and scan latch captures the data on a rising edge of CLK waveform when signal SSE is at a logic low SSE waveform .

Before time t controller provides SCLK at a relatively low speed such as 200 MHz and test circuit operates in the scan in mode to shift a test pattern through scan chain . When controller has shifted the test pattern into scan chain it provides signal WARMUP EN at a logic high. Between time t and t controller performs an initial RESTORE cycle and restore latch latches the test data. The initial RESTORE cycle is needed for ATPG to shift the test pattern into the desired position in the scan chain. Controller subsequently provides signal SSE at a logic low and after a launch period starting at t the scan chain captures the test data on the next rising edge of SCLK.

Time t to time t defines a WARMUP period covering the launch and capture phases during which controller provides SSE at a logic high with sufficient setup time before the next rising edge of SCLK to set the test data in restore latch to the D input of scan latch . At the next rising edge of SCLK at time t scan latch restores the test data before another WARMUP period.

The RESTORE and WARMUP periods described from time t to time t repeat at times t to t t to t and t to t. From times t to t controller performs final LAUNCH and CAPTURE phases which includes a launch period starting at t before capturing the output data at the next rising edge of SCLK. To scan the test data out controller deactivates WARMUP EN after t and scan chain shifts the test data to controller again using a relatively low frequency clock.

Signal SSE is a pipelined signal that is at a logic high a setup time before a rising edge of SCLK to implement the restore phase and is at a logic low a setup time before subsequent rising edges of SCLK to implement the launch and capture phases. Test circuit uses a tree circuit to generate SSE with appropriate timing that has a trunk and branches to account for propagation delays throughout the scan chain.

In operation controller implements the timing diagram of to perform a launch on shift LOS test methodology. For the LOS test methodology test circuit launches a test pattern on the last shift cycle of the scan shift mode when signal SSE is active before a low to high transition of SCLK SSE waveform .

Before time t controller provides SCLK at a relatively low clock speed such as 200 MHz and integrated circuit operates in the scan shift test mode to shift a test pattern through scan chain . At time t controller has previously asserted an active SSE and further asserts an active WARMUP EN waveform . In response restore latch latches the test pattern. Scan latch latches the test pattern on the next rising edge of SCLK waveform .

From time t to time t during the LOS phase controller de asserts SSE and provides a launch pulse on SCLK to launch the test pattern into functional circuitry such as functional circuit . From time t to time t during a CAPTURE phase controller provides a capture pulse on SCLK and scan latch latches the captured data while restore latch continues to store the test pattern. After the CAPTURE phase is performed controller asserts an active SSE and an inactive WARMUP EN and scan chain shifts the test result to controller .

While scan cell can be used to implement the LOS test methodology without warmup it cannot realize the warmup capability at the same time as a LOS methodology. This incompatibility is due to the inability to restore the starting state from a LOS test pattern.

Gated clock signal generator includes a latch which is a level sensitive latch and an AND gate . Latch has an active low enable input to receive a high speed clock signal labeled CLK a D input to receive a control signal labeled ENABLE g and a Q output. AND gate has an input connected to the Q output of latch an input to receive signal CLK and an output to provide signal CLK g.

Gated clock signal generator includes a latch an AND gate and an OR gate . Latch has an active low enable input to receive signal CLK a D input to receive a scan enable signal labeled RESTORE EN and a Q output. AND gate has an input connected to the Q output of latch an input to receive signal CLK and an output. OR gate has an input to receive a scan clock signal labeled SC an input connected to the output of AND gate and an output to provide signal SC CLK.

In operation for an LSSD test methodology data latch operates with output latch in a normal mode and a capture mode based on logic high and logic low states of signal CLK g. Scan latch operates with output latch in an LSSD scan shift mode based on asserted non overlapping SC and SC CLK edges.

Controller provides signal CLK at a second clock rate faster than the shift clock rate and gated clock signal generator provides a CLK g launch pulse followed by a CLK g capture pulse when enabled by ENABLE g as a function of CLK. While controller provides RESTORE EN at a logic low gated clock signal generator provides SC CLK edges to scan cell as a function of the lower speed SC scan clock signal. While controller provides RESTORE EN at a logic high gated clock signal generator provides SC CLK edges to scan cell as a function of the higher speed CLK. Scan latch restores test patterns to output latch using the faster CLK.

As for scan cell of controller controls scan cell to perform a desired number of warm up and restore cycles to mitigate the power supply droop that would otherwise occur during a rapid transition between scan and test modes. At the end of the desired number of cycles controller controls scan cell to capture reliable test response data and scan the test response data out of the scan chain.

In operation before time t controller operates scan cell in a scan shift mode and provides non overlapping SC SC waveform and SC CLK SC CLK waveform signals at a first relatively low scan clock rate to shift a test pattern into the appropriate position in scan chain . Between times t and t controller performs a series of warmup and restores sequences. Between time t and time t controller performs a final launch and capture sequence. After time t controller operates scan cells in a scan shift mode to shift captured test data out of the scan chain. In particular between time t and time t controller performs an initial launch phase followed by an initial capture phase in response to high pulse on CLK g between time t and t. Between time t and t during which SC EN is high controller performs an initial restore phase and the data is restored to the output of output latch on the next high pulse of SC CLK. Controller repeats the sequence of warmup and restore phases enough times to warm up the functional circuits and to reduce the power supply voltage droop to a sufficiently small amount. After the desired number of times controller provides a final launch and capture phase t to t to capture reliable test data into the scan chain and a subsequent scan out phase using repetitive pulses of pulses SC and SC CLK.

Like scan cell scan cell captures reliable test data by warming up the functional circuits to reduce power supply voltage droop. Scan latch provides hold time buffering for SDI and adds only a small amount of area compared to known LSSD scan cells.

The flow then proceeds to decision box that includes determining whether the warmup sequence has been executed the desired number of times. If the warmup sequence has not been executed the desired number of times then the flow proceeds back to action box . If the warmup sequence has been executed the desired number of times then the flow proceeds to action box that includes launching the test pattern into the functional circuit action box that includes capturing test data into scan chain and action box that includes scanning the test data to an output. When using a scan cell like scan cell of the method may further include an action box between action boxes and not shown in that includes performing an initial restore phase to move the test pattern into a desired position in the scan chain.

The testing functions of scan cells and respectively of and test circuit for functional circuits and of may be implemented with various combinations of hardware and software and the software component may be stored in a computer readable storage medium for execution by at least one processor. Moreover the method illustrated in may also be governed by instructions that are stored in a computer readable storage medium and that are executed by at least one processor. Each of the operations shown in may correspond to instructions stored in a non transitory computer memory or computer readable storage medium. In various embodiments the non transitory computer readable storage medium includes a magnetic or optical disk storage device solid state storage devices such as Flash memory or other non volatile memory device or devices. The computer readable instructions stored on the non transitory computer readable storage medium may be in source code assembly language code object code or other instruction format that is interpreted and or executable by one or more processors.

Moreover scan cells and of respectively and test circuit for functional circuits and of may be described or represented by a computer accessible data structure in the form of a database or other data structure which can be read by a program and used directly or indirectly to fabricate integrated circuit . For example this data structure may be a behavioral level description or register transfer level RTL description of the hardware functionality in a high level design language HDL such as Verilog or VHDL. The description may be read by a synthesis tool which may synthesize the description to produce a netlist comprising a list of gates from a synthesis library. The netlist comprises a set of gates which also represent the functionality of the hardware comprising integrated circuit . The netlist may then be placed and routed to produce a data set describing geometric shapes to be applied to masks. The masks may then be used in various semiconductor fabrication steps to produce integrated circuit . Alternatively the database on the computer accessible storage medium may be the netlist with or without the synthesis library or the data set as desired or Graphic Data System GDS II data.

While particular embodiments have been described various modifications to these embodiments will be apparent to those skilled in the art. For example functional circuits and can represent a variety of elements including a GPU a CPU core an APU a memory sub system a system controller a north bridge or a south bridge complex peripheral functions and so on and sub circuits of each of them. Also in some embodiments functional circuits and could include a certain number of functional blocks where a functional block could include a certain set of GPUs CPU cores APUs memory sub systems system controllers complex peripheral functions and so on. For example in some embodiments representative functional circuit includes a CPU core an APU and a Universal Serial Bus USB controller and representative functional circuit could include a memory sub system and a bus arbitration module. Also the circuits of integrated circuit could be formed on multiple integrated circuits.

The illustrated embodiments show restore latch and scan latch being implemented within scan cells and respectively. In some embodiments restore latch and scan latch could be implemented anywhere along scan chain and could be considered to be between scan cells .

While test circuit improves the integrity of the test by implementing scan warmup to reduce the power supply droop it can be used in conjunction with other techniques to reduce the droop. For example test circuit can be used on an integrated circuit that also uses on die droop inducers ODDI . ODDI are essentially transistors between the power supply terminals that are made conductive to simulate the current flowing through the power supply rails when the circuit is operating at speed.

Accordingly it is intended by the appended claims to cover all modifications of the disclosed embodiments that fall within the scope of the disclosed embodiments.

