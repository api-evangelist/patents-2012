---

title: Activity detection in MEMS accelerometers
abstract: A method of detecting activity with a MEMS accelerometer stores a value of acceleration, then measures acceleration at a later time, calculates a change in acceleration using the measured acceleration and the stored acceleration, and compares the change in acceleration to an activity threshold to detect activity. A method of detecting inactivity uses a similar technique along with a timer. The method of detecting inactivity with a MEMS accelerometer stores an acceleration value, then measures acceleration at a later time, calculates a change in acceleration using the measured acceleration and the stored acceleration, and compares the change in acceleration to an inactivity threshold. If the change in acceleration is less than the inactivity threshold and, if a predetermined period of time has elapsed, then inactivity is detected.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09008995&OS=09008995&RS=09008995
owner: Analog Devices, Inc.
number: 09008995
owner_city: Norwood
owner_country: US
publication_date: 20120606
---
This patent application is a continuation in part of U.S. patent application Ser. No. 12 408 536 filed Mar. 20 2009 now allowed entitled MANAGEMENT SYSTEM FOR MEMS INERTIAL SENSORS and is a continuation in part of U.S. patent application Ser. No. 12 408 540 filed Mar. 20 2009 now allowed entitled ACTIVITY DETECTION IN MEMS ACCELEROMETERS.

This patent application also claims priority to U.S. Provisional Patent Application No. 61 038 594 filed Mar. 21 2008 entitled ACTIVITY DETECTION IN MEMS ACCELEROMETERS U.S. Provisional Patent Application No. 61 049 590 filed May 1 2008 entitled MANAGEMENT SYSTEM AND METHOD FOR MEMS INERTIAL SENSORS and U.S. Provisional Patent Application No. 61 078 923 filed Jul. 8 2008 entitled SYSTEM AND METHOD FOR CAPTURING AN EVENT IN MEMS INERTIAL SENSORS. The disclosure of each of the above named applications is incorporated by reference herein in their entirety.

This patent application is also related to U.S. patent application Ser. No. 12 408 532 entitled SYSTEM AND METHOD FOR CAPTURING AN EVENT IN MEMS INERTIAL SENSORS filed Mar. 20 2009 the disclosure of which is incorporated by reference herein in its entirety.

The invention generally relates to MEMS accelerometers and more particularly the invention relates to detecting activity or inactivity in MEMS accelerometers.

A variety of different applications use sensor systems to detect the movement of an underlying object. Sensors employing microelectromechanical systems MEMS devices are increasingly used in such applications due to their relatively small size and their capability to detect relatively small changes in the measured item. MEMS devices such as an accelerometer typically employ a movable inertial mass formed with one or more fixed non moving structures. For example in a MEMS accelerometer the inertial mass may be suspended in a plane above a substrate and movable with respect to the substrate. The movable structure and the fixed structures form a capacitor having a capacitance that changes when the movable structure moves relative to the fixed structures in response to applied forces such as along a predetermined axis of the device e.g. x y and z axes.

Currently accelerometers may be used for monitoring the interaction of users with electronic devices such as gaming devices cell phones personal digital assistants etc. The accelerometer in the devices may detect a movement above a particular threshold or a change in orientation. However accelerometers experience a constant 1 g field due to the earth s gravitational field. This 1 g field is in an arbitrary direction depending upon the orientation of the device. In order to find the actual acceleration of an object relative to the earth a 1 g threshold is typically set in the device in order to eliminate the contribution from the earth s gravitational field. This means however that a device typically can only detection acceleration greater than 1 g. High pass filters may be used in an attempt to compensate for this shortcoming but this solution does not detect extremely slow interactions. In some cases however users move electronic devices in a slow manner and do not cause greater than a 1 g change. Other problems with monitoring the interaction of users with electronic devices is determining when users stop moving the device. The device may not be placed in a known orientation so detecting inactivity has some similar challenges as detecting movement or activity of the device.

In accordance with one embodiment of the invention a method of detecting activity with a MEMS accelerometer captures and stores an acceleration value measures acceleration at a later predetermined time calculates a change in acceleration using the measured acceleration and the stored acceleration value and compares the change in acceleration to a threshold to detect activity.

In some embodiments of the invention detecting activity requires determining if the change of acceleration exceeds the activity threshold at a plurality of intervals and only declaring that activity is detected if the change of acceleration exceeds the threshold during each interval.

In accordance with another embodiment of the invention a method of detecting inactivity with a MEMS accelerometer captures and stores an acceleration value then measures acceleration at a later predetermined time calculates a change in acceleration using the measured acceleration and the stored acceleration and compares the change in acceleration to an inactivity threshold. The process further determines if the change in acceleration is less than the inactivity threshold and if so determines if a predetermined period of time has elapsed to detect inactivity.

The method of detecting activity and inactivity can be realized using circuitry implemented as an integrated circuit including an output pin that signals activity. This output pin is configured to present a first electrical value when the last state detected is activity and to present a second electrical value when the last state detected is inactivity.

In some embodiments the method may further include changing the predetermined time for measuring acceleration when activity or inactivity is detected. The MEMS accelerometer may include at least one measurement axis and measuring acceleration may include measuring acceleration from one or more measurement axes. In addition or alternatively the threshold may be a different value for two or more measurement axes or may be the same value for two or more measurement axes. Activity may be detected if the change in acceleration is greater than or equal to the threshold for any measurement axis. In contrast inactivity is detected if the change in acceleration is less than the threshold for all measurement axes. The method may further include initiating a method of detecting inactivity once activity is detected or vice versa. The threshold for detecting activity may be a different value than the threshold for detecting inactivity for a given measurement axis.

For inactivity detection if the change in acceleration is greater than or equal to the threshold the method may further repeat capturing measuring calculating and comparing until the change in acceleration is less than the threshold. If the predetermined period of time has not elapsed the method may further repeat measuring calculating comparing and determining if the change in acceleration is less than the threshold until the predetermined period of time has elapsed or the change in acceleration is greater than or equal to the threshold.

Illustrative embodiments of the invention may be implemented as a computer program product having a computer usable medium with computer readable program code thereon. The computer readable code may be read and utilized by a computer system in accordance with conventional processes.

Embodiments of the present invention provide a system and method of detecting activity or inactivity in a MEMS accelerometer. For activity detection the process may capture an acceleration offset or bias upon the start of looking for activity. This bias is taken and stored. The accelerometer may measure a current acceleration at a data rate and compare the measured acceleration to the acceleration bias to look for a difference greater than an activity threshold. For inactivity detection a similar technique may be used along with a timer. When inactivity detection is desired the measured acceleration data is compared to the stored acceleration bias. The process continues until the change in acceleration is less than the inactivity threshold for a desired period of time. In some embodiments of the invention a desired period of time can be measured by a specified number of samples taken at a given sampling rate. Embodiments of the present invention provide a way of monitoring activity and or inactivity and detecting when it changes and even in the presence of a constant acceleration such as the earth s 1 g. gravitational field and even when the change in acceleration or orientation is less than 1 g. The activity inactivity monitoring and detection may be performed by a sensor management system that uses digital logic and state machines. The sensor management system may be coupled with one or more sensors to effectively manage different conditions of a device containing the sensor s without interaction with the device s central computer or microprocessor excluding the sensor s interaction with the microprocessor during its initial configuration . For instance the inertial sensor does receive some initial input from the microprocessor such as initial configurations or settings e.g. threshold values which may be set manually by a user or automatically. In this way the sensor management system coordinates the sensor s functions and responds to specific types of detected movement. By embedding the functionality in the sensor management system benefits may be realized such as achieving maximal power savings since only the sensor and the sensor management system may need to be powered rather than the device s microprocessor. Thus the activity inactivity monitoring and detection capability may provide efficient management of a MEMS inertial sensor. Details of illustrative embodiments are discussed below. Note that the term dynamic component of acceleration in the following description and any appended claims unless context requires otherwise shall mean the total measured acceleration minus any static component of acceleration e.g. gravity.

As shown in various embodiments may include a sensor system having one or more inertial sensors that communicate with a central computer or microprocessor through some interconnection medium . The sensor system may also include one or more sensor management systems in communication with the inertial sensor s . The inertial sensor s may produce data values e.g. motion data related to the detected movement of an object which may be transmitted to the microprocessor via interconnection and or the sensor management system through the management system s interface as discussed in more detail below. Although shows two inertial sensors with one management system one sensor may be used with one or more management systems and or two or more inertial sensors may be used with one or more management systems .

The sensor management system may also include a management module that may modify the sensor s configuration. Various parameters may be set in the sensor by the management module e.g. parameters may be set based on whether activity or inactivity is detected by the detection module . In some embodiments for example the rate the acceleration is measured from the accelerometer may vary depending upon whether activity or inactivity is detected. For instance a more frequent sample rate may be used by the sensor when activity is detected or monitored by the detection module rather than when inactivity is detected or monitored. In addition or alternatively the management module may coordinate the functionality of the detection module . For example in some embodiments it may be desirable to look for activity after inactivity is detected and vise versa. Thus the management module may instruct the detection module when to look for activity and or inactivity. By coordinating the activity detection and inactivity detection functions in the detection module intelligent management of the accelerometer functions may be achieved e.g. effective automated power management. The functionality of the sensor management system and its detection module are discussed in greater detail below with regard to embodiments of its implementation.

In step an acceleration offset or bias may be captured upon the start of looking for activity. This may be accomplished by having the detection module capture a snap shot of the current acceleration or orientation of the device and digitally store the value as the acceleration bias in memory .

In step the acceleration of the device may be measured by the sensor s and the data values stored in memory . The acceleration may be measured on one or more axes of the device e.g. x y and or z axis which may be determined automatically or manually e.g. set by the user . The accelerometer may sample the acceleration data at a data rate. The management module may determine the sensor s data rate depending on the current detected state of the device by the detection module . For example the accelerometer sample rate may be set to a desired awake mode or more frequent sampling rate when activity is detected or monitored by the detection module . Similarly the accelerometer sample rate may be set to a desired sleep mode or more infrequent sampling rate when inactivity is detected monitored. When the detection module has yet to determine activity and or inactivity the management module may set a default value for the sensor s sample rate e.g. sleep mode sampling rate awake mode sampling rate or some other sampling rate until the detection module determines the current detected state of the device. Although one mode is discussed for when activity or inactivity is detected monitored the management module may set two or more different modes during a given state of the device.

In step the detection module calculates the change in acceleration and verifies whether that change is greater than or equal to a threshold. The detection module may determine the change in acceleration by calculating the difference between the current measured acceleration and the digitally stored acceleration bias using a computational component. The detection module may then compare an absolute value of the change in acceleration to a threshold value using a comparator. The detection module performs these calculations and the measured acceleration values the calculated difference and the threshold value may be stored in the memory . The threshold may be set automatically or manually and may be the same or different for different axes. If the change in acceleration is less than the threshold then the process returns to step where the acceleration may be measured again. If the change in acceleration is greater than or equal to the threshold then the process proceeds to step where activity is detected. When activity is detected by the detection module it may inform the management module of the current detected state of the device. The management module may then send instructions or parameters to the inertial sensor via the interface as discussed above e.g. setting sampling rates and may send instructions back to the detection module e.g. start to look for inactivity. Thus the detection module may optionally start to look for inactivity once activity is detected.

In step an acceleration offset or bias may be captured by the detection module upon the start of looking for inactivity. This step is similar to step in the activity detection process described above. In step the detection module s timer may be started or reset. In step the acceleration of the device may be measured similar to step described above.

In step the detection module calculates the change in acceleration and verifies whether that change is greater than or equal to a threshold similar to step described above. The threshold may be set automatically or manually and may be the same or different for different axes. The inactivity threshold may also be the same or different than the activity threshold. If the change in acceleration is greater than or equal to the given threshold in any of the measured axes then the process returns back to step . If the change in acceleration is less than the given threshold for all of the measured axes then the process proceeds to step .

In step the detection module verifies whether a predetermined period of time has elapsed e.g. by determining whether the timer has expired. If the timer has not expired then the process returns to step and the acceleration may be measured again. If the timer has expired then the process proceeds to step where inactivity is detected. The predetermined period of time may be set automatically or manually. When inactivity is detected by the detection module it may inform the management module of the current detected state of the device. The management module may then send instructions or parameters to the inertial sensor via the interface as discussed above e.g. setting sampling rate parameters and may send instructions back to the detection module e.g. start to look for activity. Thus the detection module may optionally start to look for activity once inactivity is detected.

As mentioned above various parameters may be set in the inertial sensor by the management module . Although the sampling rate parameter is mentioned above discussion of a specific parameter is exemplary and not intended to limit the scope of various embodiments of the invention. Other parameters in the inertial sensor s may also be set by the management module as known by those skilled in the art. In addition the management module may set parameters in the detection module the memory and or the sensor s .

Although inertial sensors such as accelerometers are discussed above principles of illustrative embodiments may apply to other inertial sensors or sensor devices such as MEMS gyroscopes and MEMS pressure sensors or microphones. Accordingly discussion of inertial sensors is exemplary and not intended to limit the scope of various embodiments of the invention.

Among other implementations the detection module and the management module may be a single integrated unit having the discussed functionality and or a plurality of interconnected separate functional devices. Reference to a module therefore is for convenience and not intended to limit its implementation. Moreover the various functionalities within the detection module and or the management module may be implemented in any number of ways such as by means of one or more application specific integrated circuits or digital signal processors or the discussed functionality may be implemented in software.

In some embodiments of the present invention activity and inactivity detection may be determined independently of one another and or concurrently. In some embodiments activity detection may be dependent upon detecting inactivity and vise versa. As mentioned above the start of looking for activity step may be based on having detected inactivity and the start of looking for inactivity step may be triggered by having detected activity. For example once inactivity is detected the sample rate of the sensor may be slowed to a sleep rate to further reduce power consumption.

The activity and inactivity functions may be embedded in the accelerometer for power control of the end device. This may be accomplished by using digital logic and state machines closely embedded with the accelerometer. Alternatively the activity and inactivity functions may exist separately and a microprocessor or other controller may configure the sensor to look for activity inactivity or both.

All or part of the functionality of the sensor management system may be implemented in management circuitry which may be implemented as part of the sensor specific circuitry. For example if the sensor is an accelerometer then all or part of its functionality may be integrated with the accelerometer or sensor circuitry. The sensor circuitry may detect an acceleration above a particular threshold or a change in orientation and transmit such motion data to other circuitry for further processing. Sensor specific circuitry may be on the same chip or die as the sensor itself or on a different chip or die. As another example the sensor specific circuitry may be implemented on an application specific integrated circuit ASIC while the sensor may be on a sensor chip with no circuitry other than pads for wirebonding with the ASIC . Both the ASIC and sensor chip may be within a single package or in separate packages.

In specific embodiments of the invention the sensor management system of and one or more sensors may be implemented within a single package i.e. an integrated circuit. An output pin of this integrated circuit may be configured to present a first electrical value when the last state detected by the sensor management system is activity and a second electrical value when the last state detected by the sensor management system is inactivity. This activity inactivity output may then be connected for example to a power switch. In illustrative devices the power switch could turn on a light or activate cell phone circuitry or turn on a wireless radio etc. when the output pin signals the activity state and power down these functions when the output pin signals the inactivity state. Thus power savings leading to extended battery life may be realized. In some embodiments the sensor management system coupled with the activity inactivity output pin may employ the activity inactivity algorithms shown in . In other embodiments alternative activity inactivity algorithms may be employed. One alternative approach to activity inactivity detection is disclosed in U.S. Pat. No. 7 409 291 to Pasolini entitled DEVICE FOR AUTOMATIC DETECTION OF STATES OF MOTION AND REST AND PORTABLE ELECTRONIC APPARATUS INCORPORATING IT which is incorporated by reference herein in its entirety.

In some embodiments of the invention as shown in activity detection is configured so that two or more successive detections of a change in acceleration exceeding an activity threshold are required before activity is determined to be detected. When an initial change in acceleration is detected the acceleration measurement is repeated up to N times and activity is declared detected when a change in acceleration exceeding the activity threshold is detected in N successive measurements . This configuration can reduce activation of power draining functions when the movement of a device is only incidental. In further embodiments the sensor management system may generate an interrupt signal when activity is detected and when inactivity is detected. The system may clear the interrupt signal automatically after a timeout interval elapses.

Embodiments may be implemented as a computer program product for use with a computer system. Such implementation may include a series of computer instructions fixed either on a tangible medium such as a computer readable medium e.g. a diskette CD ROM ROM or fixed disk or transmittable to a computer system via a modem or other interface device such as a communications adapter connected to a network over a medium. The medium may be either a tangible medium e.g. optical or analog communications lines or a medium implemented with wireless techniques e.g. microwave infrared or other transmission techniques . The series of computer instructions may embody all or part of the functionality previously described herein with respect to the method and system. Those skilled in the art should appreciate that such computer instructions may be written in a number of programming languages for use with many computer architectures or operating systems. For example embodiments may be implemented in a procedural programming language e.g. C or an object oriented programming language e.g. C . Alternative embodiments of the invention may be implemented as pre programmed hardware elements other related components or as a combination of hardware and software components.

Furthermore such instructions may be stored in any memory device such as semiconductor magnetic optical or other memory devices and may be transmitted using any communications technology such as optical infrared microwave or other transmission technologies. It is expected that such a computer program product may be distributed as a removable medium with accompanying printed or electronic documentation e.g. shrink wrapped software preloaded with a computer system e.g. on system ROM or fixed disk or distributed from a server or electronic bulletin board over the network e.g. the Internet or World Wide Web . Thus some embodiments of the invention may be implemented as hardware software e.g. a computer program product or a combination of both software and hardware.

Although the above discussion discloses various exemplary embodiments of the invention it should be apparent that those skilled in the art can make various modifications that will achieve some of the advantages of the invention without departing from the true scope of the invention. For example intervals of time can be measured by counting a number of samples at a given sampling rate as well as using a timer to provide a direct measurement of time. The scope of the invention includes all such embodiments as described in any appended claims.

