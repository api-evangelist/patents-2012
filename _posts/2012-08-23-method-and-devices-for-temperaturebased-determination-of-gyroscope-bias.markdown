---

title: Method and devices for temperature-based determination of gyroscope bias
abstract: In one aspect, the present disclosure provides a processor-implemented method of determining a bias for an axis of a gyroscope. The method includes: obtaining a temperature reading; maintaining a plurality of bias estimators for the axis, each bias estimator associated with a temperature and configured to estimate a bias at the associated temperature, the plurality of bias estimators including a number of short term bias estimators for estimating biases for recently obtained temperatures and a number of long term bias estimators for estimating biases for temperatures obtained over a comparatively longer period of time; and determining a bias for the axis of the gyroscope based on the temperature reading and one or more of the bias estimators.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09354080&OS=09354080&RS=09354080
owner: BLACKBERRY LIMITED
number: 09354080
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20120823
---
The present disclosure relates generally to gyroscopes and more particularly to methods and devices for determining a bias for a gyroscope based on a temperature.

A gyroscope is a device for measuring rotation. Gyroscopes are sometimes included in electronic devices such as handheld electronic devices in order to provide information about the orientation of such electronic devices. Such orientation information allows the electronic device to know information about its own physical position. The gyroscope may allow for recognition of movement within a three dimensional space. The electronic device may use such orientation information as an input signal. That is the electronic device may be operated in a mode in which gyroscope readings affect the operation of the electronic device.

Even when a gyroscope is not rotating the gyroscope may have a signal output. The output when the gyroscope is not rotating is referred to as the bias or the bias error. Each sensing axis of the gyroscope may have a different bias. The bias may not be a fixed amount. That is the bias may vary over time. Such variations may for example be caused by changes to the temperature of the electronic device or changes to the operating state of the electronic device. For example the bias may be affected when the electronic device switches from an off state to an on state.

If the amount of the bias is known the electronic device may account for the bias when using the gyroscope.

In one aspect the present disclosure provides a processor implemented method of determining a bias for an axis of a gyroscope. The method includes obtaining a temperature reading maintaining a plurality of bias estimators for the axis each bias estimator associated with a temperature and configured to estimate a bias at the associated temperature the plurality of bias estimators including a number of short term bias estimators for estimating biases for recently obtained temperatures and a number of long term bias estimators for estimating biases for temperatures obtained over a comparatively longer period of time and determining a bias for the axis of the gyroscope based on the temperature reading and one or more of the bias estimators.

In another aspect the present disclosure provides an electronic device. The electronic device is configured for determining a bias for an axis of a gyroscope. The electronic device includes a memory for storing a plurality of bias estimators for the axis. Each bias estimator has a temperature associated therewith. Each bias estimator is configured to estimate a bias at the associated temperature. The plurality of bias estimators include a number of short term bias estimators for estimating biases for recently obtained temperatures and a number of long term bias estimators reserved for estimating biases for temperatures obtained over a comparatively longer period of time. The electronic device also includes the gyroscope and a temperature sensor. The electronic device also includes a processor coupled to the memory and the gyroscope and the temperature sensor. The processor is configured to obtain a temperature reading maintain the plurality of bias estimators for the axis and determine a bias for the axis of the gyroscope based on the temperature reading and one or more of the bias estimators.

In another aspect the present disclosure describes a computer readable storage medium. The computer readable storage medium includes computer executable instructions for determining a bias for an axis of a gyroscope. The computer executable instructions include instructions for obtaining a temperature reading instructions for maintaining a plurality of bias estimators for the axis each bias estimator associated with a temperature and configured to estimate a bias at the associated temperature the plurality of bias estimators including a number of short term bias estimators for estimating biases for recently obtained temperatures and a number of long term bias estimators for estimating biases for temperatures obtained over a comparatively longer period of time and instructions for determining a bias for the axis of the gyroscope based on the temperature reading and one or more of the bias estimators.

Gyroscope readings may suffer from a bias. Bias or bias error is the difference between the ideal output which is zero when the gyroscope is not rotating and the actual output when the gyroscope is not rotating. That is the bias is the gyroscope output when the electronic device is not rotating. If the bias is unknown to an electronic device interpreting the gyroscope output then the electronic device may erroneously interpret the gyroscope output. For example the electronic device may believe that the gyroscope output represents a rotation when the gyroscope is in fact not rotating.

When the electronic device which is interpreting the gyroscope output knows the bias then the electronic device can account for the bias when interpreting the gyroscope output. That is when the electronic device knows the amount of the bias the electronic device can effectively cancel out the effect of the bias to ensure that the gyroscope output is correctly correlated to rotation of the gyroscope.

The bias for a gyroscope may be different for each sensing axis of the gyroscope. Accordingly the bias may be determined separately for each sensing axis of the gyroscope and the electronic device which interprets the gyroscope output may cancel the effect of bias on a per axis basis. Methods and electronic devices for determining the bias of a gyroscope will be discussed below.

The bias for a gyroscope may vary based on temperature conditions. That is the temperature in the operating environment in which the gyroscope operates may affect the bias of that gyroscope. Accordingly in at least some embodiments described below the bias for a gyroscope may be determined in a manner that is temperature dependent.

Referring first to a gyroscope is shown located within an electronic device . The electronic device may take many forms. By way of example the electronic device may be a global positioning system GPS unit an inertial navigation system INS a mobile communication device such as a mobile phone or smartphone a tablet computer a laptop computer a wearable computer such as a watch a camera or an electronic device of another type.

The electronic device may be any electronic device which makes use of one or more gyroscopes . In some embodiments the electronic device includes a display such as a liquid crystal display LCD and an input interface such as a keyboard or keypad or a navigation tool such as a clickable scroll wheel also referred to as a track wheel or thumbwheel or trackball. In some embodiments the display may be a touchscreen display which permits a user to provide input to the electronic device by touching the display . That is the display may act as an input interface .

The gyroscope measures rotational velocity of the gyroscope . In the embodiment illustrated since the gyroscope is integrated within the electronic device the gyroscope effectively measures rotational velocity of the electronic device .

The gyroscope includes one or more sensing axis. In the embodiment illustrated the gyroscope includes three orthogonal primary sensing axes denoted x y and z. Each sensing axis is orthogonal to the other sensing axes. For example the x sensing axis is orthogonal to the y and z sensing axes the y sensing axis is orthogonal to the x and z sensing axes and the z sensing axis is orthogonal to the x and y sensing axes.

The gyroscope may produce a gyroscope reading for each of the sensing axes. For example a gyroscope reading wmay be produced by the gyroscope based on gyroscope readings associated with the x sensing axis such as a rotation about the x sensing axis a gyroscope reading wmay be produced by the gyroscope based on gyroscope readings associated with the y sensing axis such as a rotation about the y sensing axis and a gyroscope reading wmay be produced by the gyroscope based on gyroscope readings associated with the z sensing axis such as a rotation about the z sensing axis . These gyroscope readings collectively form the gyroscope output. That is the gyroscope output is an electronic signal which is representative of the gyroscope readings w w wfor the sensing axes x y z of the gyroscope . The electronic signal may for example provide the gyroscope readings w w wfor the sensing axes x y z of the gyroscope as measures of an amount of rotation per unit time about each sensing axis. For example the gyroscope may produce an output in terms of radians per second or degrees per second. The gyroscope output may in some embodiments be an analog output. In other embodiments the gyroscope output may be digital. A gyroscope reading captured at a point in time may be referred to as a gyroscope sample or a gyroscope reading. Such samples may be obtained for example at regular intervals.

The gyroscope output may separate the gyroscope readings for each sensing axis at a signal level or at an output interface level or both. For example in some embodiments the gyroscope may have a separate output interface such as a separate pad or pin associated with each sensing axis. Each output interface associated with a sensing axis may provide an output signal representing gyroscope readings for its associated sensing axis thus separating the gyroscope readings for the sensing axes at an output interface level . In other example embodiments a common output interface such as a common pad or pin may be associated with a plurality of sensing axes. That is gyroscope readings for a plurality of sensing axes may be provided on a common output interface such as a common pad or pin .

In some embodiments the gyroscope may be a digital gyroscope provided in an integrated circuit IC having a memory such as Electrically Erasable Programmable Read Only Memory EEPROM or flash memory analog to digital A D converter and a controller such as a suitably programmed microprocessor or Field Programmable Gate Array FPGA . The IC may provide an industry standard interface such as an SPI Serial Peripheral Interface or I2C Inter Integrated Circuit interface for connecting to a printed circuit board PCB of the electronic device .

As shown in the sensing axes x y z may be aligned with the form factor of the electronic device . In some embodiments the x sensing axis is aligned along an axis extending along the midpoint of the electronic device between left and right sides of the electronic device the y sensing axis is aligned along an axis extending along the midpoint of the electronic device between top and bottom ends and the z sensing axis extends perpendicularly through the x y plane defined by the x and y sensing axes at the intersection origin of these axes. In this way when the electronic device is oriented on a flat surface such as a table the x and y sensing axes are parallel to the table and the z sensing axis is perpendicular to the table. It is contemplated that the sensing axes x y z may be aligned with different features of the electronic device in other embodiments.

Referring now to a block diagram of an example electronic device is illustrated. The electronic device of may include a housing which houses components of the electronic device . Internal components of the electronic device may be constructed on a printed circuit board PCB . The electronic device includes a controller including at least one processor such as a microprocessor which controls the overall operation of the electronic device . The processor interacts with device subsystems such as a wireless communication subsystem for exchanging radio frequency signals with a wireless network to perform communication functions. The processor interacts with additional device subsystems including one or more input interfaces such as a keyboard one or more control buttons one or more microphones one or more cameras a gyroscope and or a touch sensitive overlay associated with a touchscreen display flash memory random access memory RAM read only memory ROM auxiliary input output I O subsystems a data port which may be a serial data port such as a Universal Serial Bus USB data port one or more output interfaces such as a display which may be a liquid crystal display LCD one or more speakers or other output interfaces a temperature sensor a short range communication module and other device subsystems generally designated as . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions.

The electronic device may include a touchscreen display in some example embodiments. The touchscreen display may be constructed using a touch sensitive input surface connected to an electronic controller. The touch sensitive input surface overlays the display and may be referred to as a touch sensitive overlay. The touch sensitive overlay and the electronic controller provide a touch sensitive input interface and the processor interacts with the touch sensitive overlay via the electronic controller. That is the touchscreen display acts as both an input interface and an output interface .

The communication subsystem includes a receiver a transmitter and associated components such as one or more antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . The antenna elements and may be embedded or internal to the electronic device and a single antenna may be shared by both receiver and transmitter as is known in the art. The particular design of the wireless communication subsystem depends on the wireless network in which the electronic device is intended to operate.

The electronic device may communicate with any one of a plurality of fixed transceiver base stations of the wireless network within its geographic coverage area. The electronic device may send and receive communication signals over the wireless network after the required network registration or activation procedures have been completed. Signals received by the antenna through the wireless network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection etc. as well as analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission to the wireless network via the antenna . The DSP not only processes communication signals but may also provide for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

In some example embodiments the auxiliary input output I O subsystems may include an external communication link or interface for example an Ethernet connection.

The electronic device may include other wireless communication interfaces for communicating with other types of wireless networks for example a wireless network such as an orthogonal frequency division multiplexed OFDM network.

In some example embodiments the electronic device also includes a removable memory module typically including flash memory and a memory module interface . Network access may be associated with a subscriber or user of the electronic device via the memory module which may be a Subscriber Identity Module SIM card for use in a GSM network or other type of memory module for use in the relevant wireless network type. The memory module may be inserted in or connected to the memory module interface of the electronic device .

The electronic device may store data in an erasable persistent memory which in one example embodiment is the flash memory . In various example embodiments the data may include service data having information required by the electronic device to establish and maintain communication with the wireless network . The data may also include user application data such as email messages address book and contact information calendar and schedule information notepad documents images and other commonly stored user information stored on the electronic device by its user and other data.

The data may in at least some embodiments include one or more bias estimators . The bias estimators represent gyroscope readings from which a bias may be determined. More specifically at least some of the bias estimators may be temperature associated bias estimators. That is at least some of the bias estimators are associated with a temperature. In the embodiment illustrated there are eight temperature associated bias estimators a first bias estimator which is associated with a temperature T a second bias estimator which is associated with a temperature T a third bias estimator which is associated with a temperature T a fourth bias estimator which is associated with a temperature T a fifth bias estimator which is associated with a temperature T a sixth bias estimator which is associated with a temperature T a seventh bias estimator which is associated with a temperature T an eighth bias estimator which is associated with a temperature T .

Each bias estimator represents or may be used to determine a bias for an axis of the gyroscope . The bias estimators may include or represent gyroscope readings. Each temperature associated bias estimator represents or may be used to estimate the gyroscope bias at an associated temperature or a narrow range of temperatures e.g. a one degree range . By way of example in at least some embodiments each temperature associated bias estimator may include a plurality of gyroscope readings obtained at a temperature associated with that bias estimator e.g. obtained when the temperature sensor indicated that temperature . For example the first bias estimator may include a plurality of gyroscope readings obtained at a first temperature T. Similarly the second bias estimator may include a plurality of gyroscope readings obtained at the second temperature T. The third bias estimator may include a plurality of gyroscope readings obtained at the third temperature T. The fourth bias estimator may include a plurality of gyroscope readings obtained at the fourth temperature T. The fifth bias estimator may include a plurality of gyroscope readings obtained at the fifth temperature T. The sixth bias estimator may include a plurality of gyroscope readings obtained at the sixth temperature T. The seventh bias estimator may include a plurality of gyroscope readings obtained at the seventh temperature T. The eighth bias estimator may include a plurality of gyroscope readings obtained at the eighth temperature T. That is the temperature associated bias estimators contain temperature tagged gyroscope readings.

As will be described in greater detail below the gyroscope readings included in a bias estimator allow a bias to be determined by the electronic device for that bias estimator. Where the bias estimator is a temperature associated bias estimator i.e. where it is a bias estimator that is associated with a specific temperature the bias estimator allows a bias to be determined for the specific temperature.

The bias estimators include a predetermined number of short term bias estimators . In the example illustrated the first bias estimator second bias estimator and third bias estimator are short term bias estimators . Accordingly in the example illustrated the bias estimators include three short term bias estimators . The short term bias estimators are reserved for estimating biases for recent temperatures. That is the short term bias estimators are reserved for estimating biases for temperatures that were observed recently at or near the electronic device . A short term bias estimator may be used to determine the bias at an associated temperature which was recently observed by the temperature sensor.

In at least some embodiments the short term bias estimators are stored in a least recently used LRU cache. A least recently used LRU cache is a short term storage which values elements contained in the cache based on the elapsed period of time since the elements were accessed. That is the least recently used LRU cache is configured to remove bias estimators from inclusion among the short term bias estimators based on how recently a temperature associated with the bias estimator was observed. In order to free up space to create a bias estimator for newly observed temperatures i.e. temperatures that are observed using the temperature sensor and that do not have an existing bias estimator associated therewith the LRU cache may remove the least recently used short term bias estimator . That is the short term bias estimator whose associated temperature was observed least recently may be removed from inclusion as a short term bias estimator to make room for a new short term bias estimator . As will be described in greater detail below when this short term bias estimator is removed it may either be deleted from memory or may be stored as a long term bias estimator.

The electronic device also includes a predetermined number of long term bias estimators . A long term bias estimator is a bias estimator that is reserved for estimating biases for temperatures observed over a comparatively longer period of time. That is the long term bias estimator is used for estimating biases for temperatures that have been observed in the past but which may not have been observed recently. A long term bias estimator may store data that can be used to calculate a bias for the gyroscope at an associated temperature. For example a long term bias estimator may store gyroscope readings all obtained at the same temperature or within a narrow range of that temperature . As will be described in greater detail below a bias may be determined from such measurements e.g. using an adaptive histogram of the type described below .

Long term bias estimators may help to protect the range of temperatures that an accurate bias may be calculated for. More specifically the long term bias estimators help to ensure that data that may be used to determine a gyroscope is stored for a wide range of temperatures. For example when a user is travelling outside in cold weather the short term bias estimators may become populated with data that may be used to determine a bias in cold weather. However when they move inside into warmer weather the short term bias estimators may not initially include data from which a bias may be calculated in the warmer temperatures. In this scenario the long term bias estimators may include data for warmer temperatures and may be used to calculate a bias. Thus the long term bias estimators help to ensure that the temperature bias model that is developed by the electronic device based on the bias estimators is valid over a wide range of temperatures.

As will be described in greater detail below in order to allow the long term bias estimators to operate over a wide range of temperatures the long term bias estimators may be managed by the electronic device to represent a wide range of temperatures. For example to ensure that the long term bias estimators represent a wide range of temperatures and or a diverse set of temperatures one or more of the long term bias estimators may be protected from deletion or replacement. That is the electronic device may prevent one or more of the long term bias estimators from being replaced.

Accordingly the electronic device manages a predetermined number of long term bias estimators . In the example illustrated five long term bias estimators these are labelled as are included each associated with a different temperature these temperatures are labelled as T T T T T . The temperatures T T T T T of the long term bias estimators differ from the temperatures T T T of the short term bias estimators .

In at least some embodiments the data may also include a temperature independent bias estimator . The temperature independent bias estimator is not associated with a specific temperature. Rather the temperature independent bias estimator may be used for determining a bias over all temperatures. The temperature independent bias estimator may also be referred to as an aggregate bias estimator since it may be used to determine an estimate of a bias for a gyroscope irrespective of temperature. That is the temperature independent bias estimator provides a bias estimate for the gyroscope across all temperatures.

The temperature independent bias estimator stores data that may be used to determine a bias for the gyroscope . For example the temperature independent bias estimator may store a plurality of gyroscope readings. As will be described in greater detail below a bias may be determined from such measurements e.g. using an adaptive histogram of the type described below .

In at least some embodiments the temperature independent bias estimator may be used by the electronic device for determining a bias when the bias estimators associated with temperatures are not stable. For example the temperature independent bias estimator may be used when the bias estimators that are associated with temperatures such as the long term bias estimators and the short term bias estimators do not yet contain enough data to be reliable e.g. when they do not contain enough gyroscope readings to be reliable .

Each of the bias estimators in the example embodiment illustrated is associated with the same axis of a gyroscope . That is a single axis of a gyroscope may have the bias estimators described above associated with that axis. Since the bias may vary for each axis of a gyroscope in embodiments in which the gyroscope is a multi axis gyroscope each axis may have bias estimators of the type described above associated therewith and the methods for determining the bias for a gyroscope may be performed independently for each axis using the techniques described herein. The determination of a bias for an axis may be performed using the bias estimators associated with that axis and not the bias estimators associated with other axes .

In at least some embodiments the bias estimators may be configured to rely on a histogram to determine a bias measurement. In at least some such embodiments each bias estimator may include a histogram. The histogram is a representation of past gyroscope readings for a sensing axis. For a bias estimator that is associated with a temperature the histogram for that bias estimator represents past gyroscope readings obtained at that temperature. That is for a bias estimator associated with a temperature T the histogram is obtained based on gyroscope readings obtained when the temperature sensor indicated the temperature T.

As will be described in greater detail below with reference to the histograms may be created maintained and or used by a software application or module such as a gyroscope calibration application .

The data stored in the persistent memory e.g. flash memory of the electronic device may be organized at least partially into a number of databases or data stores each containing data items of the same data type or associated with the same application. For example email messages contact records and task items may be stored in individual databases within the electronic device memory.

The data port may be used for synchronization with a user s host computer system. The data port enables a user to set preferences through an external device or software application and extends the capabilities of the electronic device by providing for information or software downloads to the electronic device other than through the wireless network . The alternate download path may for example be used to load an encryption key onto the electronic device through a direct reliable and trusted connection to thereby provide secure device communication.

In some example embodiments the electronic device is provided with a service routing application programming interface API which provides an application with the ability to route traffic through a serial data i.e. USB or Bluetooth Bluetooth is a registered trademark of Bluetooth SIG Inc. connection to the host computer system using standard connectivity protocols. When a user connects their electronic device to the host computer system via a USB cable or Bluetooth connection traffic that was destined for the wireless network is automatically routed to the electronic device using the USB cable or Bluetooth connection. Similarly any traffic destined for the wireless network is automatically sent over the USB cable Bluetooth connection to the host computer for processing.

The electronic device also includes or is connectable to a power source such as a battery . The battery may be one or more rechargeable batteries that may be charged for example through charging circuitry coupled to a battery interface such as the serial data port . The battery provides electrical power to at least some of the electrical circuitry in the electronic device and the battery interface provides a mechanical and electrical connection for the battery . The battery interface is coupled to a regulator not shown which provides power V to the circuitry of the electronic device .

The short range communication module provides for communication between the electronic device and different systems or devices which need not necessarily be similar devices. For example the short range communication module may include an infrared device and associated circuits and components or a wireless bus protocol compliant communication mechanism such as a Bluetooth communication module to provide for communication with similarly enabled systems and devices.

The electronic device includes a gyroscope which is configured to sense rotation of the electronic device . The gyroscope may in at least some embodiments be a three axis gyroscope of the type described above with reference to .

The electronic device includes a temperature sensor . The temperature sensor is an electronic temperature sensor which is configured to produce an electronic signal in dependence on an observed temperature. This electronic signal may be referred to as a temperature reading or a temperature measurement. The temperature sensor may be an analog temperature sensor or a digital temperature sensor. While the temperature sensor is illustrated as a separate component in some embodiments the temperature sensor may be embedded with another component such as for example the gyroscope .

A predetermined set of applications that control basic device operations including data and possibly voice communication applications may be installed on the electronic device during or after manufacture. Additional applications and or upgrades to an operating system or software applications may also be loaded onto the electronic device through the wireless network the auxiliary I O subsystem the data port the short range communication module or other suitable device subsystems . The downloaded programs or code modules may be permanently installed for example written into the program memory e.g. the flash memory or written into and executed from the RAM for execution by the processor at runtime.

In some example embodiments the electronic device may provide two principal modes of communication a data communication mode and a voice communication mode. In the data communication mode a received data signal such as a text message an email message or webpage download will be processed by the communication subsystem and input to the processor for further processing. For example a downloaded webpage may be further processed by a web browser or an email message may be processed by the email messaging application and output to the display . A user of the electronic device may also compose data items such as email messages for example using an input interface in conjunction with the display . These composed items may be transmitted through the communication subsystem over the wireless network .

In the voice communication mode the electronic device provides telephony functions and may operate as a typical cellular phone. The overall operation is similar to the data communication mode except that the received signals would be output to the speaker and signals for transmission would be generated by a transducer such as the microphone . The telephony functions are provided by a combination of software firmware i.e. a voice communication module and hardware i.e. the microphone the speaker and input devices . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the electronic device . Although voice or audio signal output may be accomplished primarily through the speaker the display may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information.

The processor operates under stored program control and executes software modules stored in memory such as persistent memory for example in the flash memory . As illustrated in the software modules may include operating system software and one or more additional applications or modules such as for example a gyroscope calibration application .

In the example embodiment of the gyroscope calibration application is illustrated as being implemented as a stand alone application . However in other example embodiments the gyroscope calibration application could be provided by another application or module such as for example the operating system software . Furthermore while the gyroscope calibration application is illustrated with a single block the functions or features provided by the gyroscope calibration application could in at least some embodiments be divided up and implemented by a plurality of applications and or modules.

Furthermore while in the example embodiment of the gyroscope calibration application is illustrated as being associated with the main processor of the electronic device in other embodiments the gyroscope calibration application could be associated with another processor or group of processors. For example in some embodiments the gyroscope may include or be connected to a secondary processor. The secondary processor may provide a narrow set of functions or features and may be used to offload some processing from the main processor . For example in some embodiments the secondary processor is a gyroscope specific processor which is coupled to the gyroscope and which is configured to provide gyroscope related functions such as those provided by the gyroscope calibration application . For example the secondary processor may be configured to determine the bias of the gyroscope in the manner described herein and may in at least some embodiments be configured to correct for the bias. For example the secondary processor may separate and remove the effect of the bias from gyroscope readings and may provide the resulting corrected gyroscope readings to the main processor for further analysis and or interpretation.

The gyroscope calibration application may be configured to determine the bias for a gyroscope . Example methods of determining a bias for a gyroscope will be described in greater detail below.

The electronic device may include a range of additional software applications including for example a notepad application voice communication i.e. telephony application mapping application a media player application or any combination thereof. Each of the software applications may include layout information defining the placement of particular fields and graphic elements e.g. text fields input fields icons etc. in the user interface i.e. the display according to the application.

The software modules or parts thereof may be temporarily loaded into volatile memory such as the RAM . The RAM is used for storing runtime data variables and other types of data or information. Although specific functions are described for various types of memory this is merely one example and a different assignment of functions to types of memory could also be used.

As noted previously gyroscope bias tends to vary based on temperature. Accordingly in at least some embodiments the determination of a bias for a gyroscope is dependent on the current temperature. Referring now to an example method for determining a bias for an axis of a gyroscope is illustrated.

The method may include features which may be provided by an electronic device such as the electronic device of . For example one or more applications or modules associated with an electronic device such as the gyroscope calibration application may contain processor readable instructions for causing a processor associated with the electronic device to perform one or more operations of the method . That is in at least some example embodiments the electronic device may be configured to perform the method . For example the method may be implemented by a processor of an electronic device .

In at least some embodiments one or more of the functions or features of the method may be performed in whole or in part by another system software application module component or device apart from those specifically listed above. For example in some embodiments the method may be performed by a processor associated with the gyroscope . That is in at least some embodiments the method or a portion thereof may be performed by a processor other than the main processor the electronic device . A processor which is associated with the gyroscope and which may be used for the specific purpose of controlling the gyroscope i.e. a gyroscope specific processor may be configured to perform the method or a portion thereof.

At a temperature reading is obtained. More particularly a temperature reading is obtained by the electronic device from the temperature sensor .

At a gyroscope reading is obtained from the gyroscope . The gyroscope reading is obtained at or near the time when the temperature reading is obtained. In some embodiments the gyroscope reading and the temperature reading are obtained simultaneously. Thus the gyroscope reading is effectively a temperature tagged reading. That is the gyroscope reading is associated with a temperature.

At the electronic device maintains a plurality of bias estimators . More particularly at the electronic device may update one or more bias estimators stored in memory of the electronic device based on the gyroscope reading and the temperature reading. The bias estimators that are maintained at may each have a temperature associated therewith. Each bias estimator that is associated with a temperature may be configured to estimate a bias at that temperature.

The plurality of bias estimators that are maintained at include a predetermined number of short term bias estimators that are reserved for estimating biases for recent temperatures and a predetermined number of long term bias estimators reserved for estimating biases for temperatures observed over a comparatively longer period of time. The short term bias estimators and long term bias estimators are described in greater detail in the discussion of above.

In at least some embodiments the temperature tagged gyroscope reading obtained at may be used to update a bias estimator . That is a bias estimator may be updated so that the newly obtained gyroscope reading may be used when calculating a bias for that bias estimator.

As will be explained in greater detail below at a short term bias estimator may be updated based on the gyroscope reading or a long term bias estimator may be updated based on the gyroscope reading.

In at least some embodiments at the electronic device may determine whether the temperature represented by the temperature reading obtained at is associated with an existing bias estimator . That is the electronic device may determine whether one of the short term bias estimators or the long term bias estimators are associated with that temperature.

If one of the existing bias estimators is associated with that temperature then at the electronic device may update the bias estimator associated with that temperature. More specifically the electronic device may update the bias estimator associated with that temperature to include or represent the gyroscope reading obtained at .

If however it is determined at that the temperature represented by the temperature reading obtained at is not associated with an existing bias estimator then the electronic device may create a new short term bias estimator to be associated with that temperature.

To prevent the bias estimators from consuming too much memory the number of bias estimators that will be maintained e.g. the number of bias estimators that will be permitted to exist in memory may be predetermined. In at least some embodiments the number of short term bias estimators may be predetermined and the number of long term bias estimators may also be predetermined. For example as illustrated in in some embodiments three short term bias estimators may be maintained and five long term bias estimators may be maintained.

Thus when the number of bias estimators that are being maintained by the electronic device has reached the maximum that will be allowed in order to create a new short term bias estimator an existing short term bias estimator is removed. That is if it is determined that the temperature reading obtained at defines a temperature that does not have a bias estimator associated therewith then one of the short term bias estimators may be replaced with a new short term bias estimator . The new short term bias estimator is associated with the temperature defined by the temperature reading obtained at .

The short term bias estimator that will be removed to free up space for a new short term bias estimator may be automatically selected by the electronic device . As noted previously in at least some embodiments the electronic device is configured to value short term bias estimators based on how recently those bias estimators have been accessed. That is in at least some embodiments the short term bias estimators are stored in a least recently used cache. A least recently used LRU cache is a short term storage which values elements contained in the cache based on the elapsed period of time since the elements were accessed. The least recently used LRU cache is configured to remove bias estimators from inclusion among the short term bias estimators based on how recently a temperature associated with the bias estimator was observed. In order to free up space to create a bias estimator for newly observed temperatures i.e. temperatures that are observed using the temperature sensor and that do not have an existing bias estimator associated therewith the LRU cache may remove the least recently used short term bias estimator . That is the short term bias estimator whose associated temperature was observed least recently may be removed from inclusion as a short term bias estimator .

In embodiments in which the least recently used short term bias estimator is removed at the electronic device may identify the least recently used short term bias estimator. The electronic device may do so by identifying the short term bias estimator that is associated with a temperature that has not been observed recently. For example the electronic device may examine all of the temperatures associated with the short term bias estimators and may determine which of those temperatures was observed least recently. The bias estimator associated with this temperature may be considered by the electronic device to be the least recently used LRU short term bias estimator .

The identified least recently used short term bias estimator may be the bias estimator that will be removed from inclusion among the short term bias estimators to free up space for a new short term bias estimator based on the temperature represented in the temperature reading obtained at .

However in at least some embodiments before removing a short term bias estimator from memory the electronic device may determine at whether a long term bias estimator should be replaced with the short term bias estimator that is to be removed. That is the electronic device determines whether the short term bias estimator that is to be removed will be re designated as one of the long term bias estimators .

In at least some embodiments at the electronic device may determine if the least recently used short term bias estimator contains too few samples to be considered for inclusion as a long term bias estimator. This determination may be made by comparing a number of gyroscope readings represented by the least recently used short term bias estimator to a predetermined threshold. The predetermined threshold may represent a minimum number of gyroscope readings that must be represented by a short term bias estimator for the short term bias estimator to be considered reliable enough for inclusion among the long term bias estimators.

If based on the comparison the electronic device determines that the least recently used short term bias estimator contains too few samples e.g. enough gyroscope readings to be considered for inclusion as a long term bias estimator then the electronic device may determine that a long term bias estimator should not be replaced with the short term bias estimator i.e. it determines that the short term bias estimator should not become a long term bias estimator and the method may proceed to where the short term bias estimator is replaced by discarding the least recently used short term bias estimator and by also storing a new short term bias estimator based on the gyroscope reading obtained at . The new short term bias estimator is associated with the temperature represented by the temperature reading obtained at .

When the electronic device determines that the least recently used short term bias estimator contains enough samples to be considered for inclusion as a long term estimator it may then determine whether it would be better to keep all of the existing long term bias estimators rather or whether it would be better to replace one of the long term bias estimators with the least recently used short term bias estimator. To do so at the electronic device may select one of the long term bias estimators for possible replacement. As noted in the discussion of above the electronic device may be configured to protect one or more of the long term bias estimators from replacement to ensure that the bias estimators maintained by the electronic device represent bias estimators for a wide range of temperatures.

To ensure that the bias estimators represent a wide range of temperatures in at least some embodiments when selecting a long term bias estimator for possible replacement the electronic device may identify the range of temperatures represented by the bias estimators. That is the electronic device may identify the minimum and maximum temperatures that are represented by the bias estimators and or may identify the maximum and minimum temperatures that have ever been observed at the temperature sensor . Based on the identified range of temperatures the electronic device may selectively protect one or more of the long term bias estimators from replacement. For example in at least some embodiments the identified range of temperatures represented by the bias estimators may be separated into a plurality of sub ranges. These sub ranges may all be of the same size. That is the difference between the maximum temperature and minimum temperature may be the same for each sub range. By way of example in at least some embodiments the identified range of temperatures represented by the bias may be separated into three sub ranges e.g. the range of temperatures represented by the bias estimators may be separated into thirds . In at least some embodiments the electronic device may attempt to ensure that a long term bias estimator may be included in each sub range.

For example in some embodiments for each sub range that does not include the temperature associated with the short term bias estimator that was identified as the least recently used short term bias estimator at the electronic device may protect from replacement one of the long term bias estimators having a temperature included in that range. In each of these sub ranges the electronic device may identify the long term bias estimator representing the greatest number of gyroscope readings in that sub range and may protect the identified long term bias estimator from being replaced. This ensures that even after replacement each sub range will have at least one bias estimator.

After the electronic device selectively protects one or more of the long term bias estimators it may identify the unprotected long term bias estimator representing the fewest gyroscope readings. This identified bias estimator is selected for possible replacement.

The electronic device may then compare the number of gyroscope readings associated with the short term bias estimator identified at as the least recently used short term bias estimator with the number of gyroscope readings associated with the unprotected long term bias estimator identified as representing the fewest number of gyroscope readings. Based on this comparison the electronic device may determine whether the identified long term bias estimator should be replaced. For example if the least recently used short term bias estimator represents fewer gyroscope readings than the identified unprotected long term bias estimator then the electronic device may determine that no long term bias estimators should be replaced. Conversely if the least recently used short term bias estimator represents more gyroscope readings than the identified unprotected long term bias estimator then the electronic device may determine that the long term bias estimator that was identified for possible replacement should be replaced.

If the electronic device determines at that a long term bias estimator should be replaced then at the electronic device may replace one of the long term bias estimators with the least recently used short term bias estimator. The long term bias estimator that was identified for possible replacement may be discarded and in its place the least recently used short term bias estimator may be re designated as a long term bias estimator.

Then at the short term bias estimator may be replaced. That is a new short term bias estimator may be stored based on the gyroscope reading obtained at . The new short term bias estimator is associated with the temperature defined by the temperature reading obtained at .

If at the electronic device determines that the long term bias estimator should not be replaced then may not be performed. Instead the method may proceed directly to where the least recently used short term bias estimator is replaced with a new bias estimator. More particularly the least recently used short term bias estimator may be discarded and a new short term bias estimator may be stored based on the gyroscope reading obtained at . The new short term bias estimator is associated with the temperature defined by the temperature reading obtained at .

In at least some embodiments not illustrated when maintaining the bias estimators the electronic device may be configured to periodically reduce the number of gyroscope readings represented by the long term bias estimators. For example in at least some embodiments the electronic device may periodically reduce the number of gyroscope readings represented by the long term bias estimators by a predetermined factor e.g. by a factor of two . Such periodic reductions may avoid an old outlier bias estimator from permanently affecting bias estimates.

As will be described in greater detail below in at least some embodiments each bias estimator may include a histogram which may be used for determining a bias associated with that bias estimator. As will be described in greater detail below the histogram may represent the gyroscope readings associated with the bias estimator i.e. the histogram represents the gyroscope readings at the temperature associated with that bias estimator .

In some embodiments the electronic device may be configured to maintain a temperature independent bias estimator at . The temperature independent bias estimator is a bias estimator that is configured for providing a bias estimate across all temperatures. That is the temperature independent bias estimator is composed of gyroscope readings irrespective of the temperature associated with such readings. Accordingly at the gyroscope reading obtained at may be added to the temperature independent bias estimator .

The temperature independent bias estimator may for example be used for determining the bias of a gyroscope when the bias estimators that are associated with temperatures i.e. the bias estimators maintained at are not yet stable.

At the electronic device may determine the bias for the gyroscope based on the temperature reading obtained at and based on one or more of the bias estimators maintained by the electronic device .

As noted previously in at least some instances the bias estimators that are associated with temperatures i.e. the bias estimators maintained at may not yet be reliable. For example when the electronic device is first powered on the bias estimators that are associated with temperatures may not yet contain enough data to be reliable. Since the temperature independent bias estimator i.e. the bias estimator maintained at is constructed using gyroscope readings irrespective of temperature this bias estimator may be quicker to stabilize. Accordingly in at least some embodiments the electronic device may determine whether the bias estimators that are associated with temperatures are reliable e.g. whether they contain sufficient data and if they are not reliable may use the temperature independent bias estimator to determine the bias for the gyroscope .

The determination of a bias using the temperature independent bias estimators may for example be performed according to a method described below with reference to . For example a plurality of gyroscope readings may be represented as a histogram an example of which is illustrated in . The histogram for the temperature independent bias estimator may represent gyroscope readings irrespective of temperature. That is the histogram may be constructed based on gyroscope readings without regard to the temperature indicated by the temperature sensor at the time such readings were obtained. Using the histogram a bias may be determined.

After the bias estimators associated with temperatures become reliable then these bias estimators may be used to determine a bias for the gyroscope based on the temperature reading obtained at .

If the temperature reading obtained at represents a temperature that does not have a bias estimator associated therewith apart from a possible newly created short term bias estimator which may have been created at but which would not yet have sufficient data to be useful a least squares fit may be performed to model the relationship between temperature and bias. For example a least squares fit may be performed on the long term bias estimators and in some embodiments on one or more of the short term bias estimators e.g. short term bias estimators may be used if they contain enough gyroscope readings to be considered reliable .

To perform a least squares fit a bias may be determined for each of these bias estimators. The bias for each bias estimator may be determined according to a method described below with reference to . For example a plurality of gyroscope readings may be represented as a histogram an example of which is illustrated in . Since the long term bias estimators and the short term bias estimators are associated with temperatures each bias estimator provides a bias at a specific temperature. By modeling the relationship between the bias and temperature a bias may be determined based on temperatures that are not directly associated with a bias estimator. Accordingly when the bias estimators apart from a possible newly created short term bias estimator which will not be considered are not associated with the temperature represented by the temperature reading obtained at then the bias may be determined by performing a least squares fit using a plurality of bias estimators i.e. by first determining the bias represented by those bias estimators and the temperatures associated with those bias estimators.

In some embodiments when one of the bias estimators other than a possible new short term bias estimator created at is associated with the temperature represented by the temperature reading obtained at then that bias estimator may be used to determine the bias of the gyroscope at the current temperature i.e. the other bias estimators may not be used and the bias may be determined directly from the bias estimator associated with the current temperature .

In at least some embodiments when one of the bias estimators is associated with the temperature represented by the temperature reading obtained at then the electronic device may evaluate the stability of that bias estimator and may use that bias estimator directly for determining the bias only if that bias estimator is stable. In at least some embodiments the stability of that bias estimator may be evaluated relative to the stability of other bias estimators and or to the stability of the least squares fit model. The stability may be based on the number of gyroscope readings represented by such bias estimators. For example in some embodiments the electronic device may determine whether the bias estimator associated with the temperature is more stable than the least squares fit model by comparing the number of gyroscope readings represented by the bias estimator associated with the temperature to a fraction of the number of gyroscope readings represented by the bias estimators used to generate the least squares fit model. In at least some embodiments if the bias estimator associated with the temperature represented by the temperature reading obtained at is determined to be stable and or if it is determined to be more stable than the least squares fit model then the bias may be determined directly from the bias estimator associated with the temperature represented by the temperature reading obtained at . If however the bias estimator associated with the temperature represented by the temperature reading obtained at is determined to not be stable and or if it is determined to be less stable than the least squares fit model then the bias may be determined using the least squares fit model.

The method described above generally described the determination of a bias for a single axis of a gyroscope. Since the bias may vary for each axis of a gyroscope the method may be performed independently for each axis of the gyroscope to obtain biases for all axes. That is a separate set of bias estimators may be maintained for each axis.

As noted previously in some embodiments each bias estimator may use a histogram to determine a bias associated with that bias estimator. In the description that follows a technique for determining a bias associated with bias estimator will be described. This technique may be used for each of the bias estimators described above to determine a bias associated with that bias estimator.

In the description which follows reference will be made to methods which are illustrated in . Any one or more of these methods may include features which may be provided by an electronic device such as the electronic device of . For example one or more applications or modules associated with an electronic device such as the gyroscope calibration application may contain processor readable instructions for causing a processor associated with the electronic device to perform one or more operations of the methods of . That is in at least some example embodiments the electronic device may be configured to perform one or more of the methods . For example one or more of the methods may be implemented by a processor of an electronic device .

In at least some embodiments one or more of the functions or features of one or more of the methods may be performed in whole or in part by another system software application module component or device apart from those specifically listed above. For example in some embodiments one or more of the methods may be performed by a processor associated with the gyroscope . That is in at least some embodiments one or more of the methods or a portion thereof may be performed by a processor other than the main processor the electronic device . A processor which is associated with the gyroscope and which may be used for the specific purpose of controlling the gyroscope i.e. a gyroscope specific processor may be configured to perform one or more of the methods or a portion thereof.

Referring first to at the electronic device represents a plurality of gyroscope readings for an axis of the gyroscope in a histogram . These gyroscope readings may include the reading obtained at of .

An example histogram will be described below with reference to . As will be described in greater detail below with reference to the histogram includes a plurality of bins that are associated with respective ranges. That is each bin has a range which is associated with that bin. The range of the bin defines gyroscope readings which are considered to be included within that bin. That is the ranges of the bins define boundaries which are used to separate gyroscope readings into the bins.

Accordingly at the electronic device effectively builds a histogram which includes past gyroscope readings for the bias estimator. The histogram represents the number of times a gyroscope reading was within each of the ranges of the bins of the histogram . That is the histogram is used to track past gyroscope readings in to allow for easy identification of highly concentrated gyroscope reading values.

The histogram which is generated at may have a small number of bins. For example in some embodiments the number of bins is less than twenty. In some embodiments the number of bins is less than ten. In some embodiments the histogram includes eight bins. A small number of bins may allow gyroscope readings to be assigned to a bin rapidly and may allow for easier evaluation of bins when determining the bias from the histogram .

An example method for adding a gyroscope reading for an axis to a histogram will be described in greater detail below with reference to . That is a method of generating a histogram based on gyroscope readings will be described in greater detail below.

At the bias is determined for the bias estimator associated with the histogram obtained at . The bias is determined by identifying a concentration of the gyroscope readings within the histogram . That is the bias is determined by looking for an area of the histogram where there are a large number of gyroscope readings within a small range.

In at least some embodiments the bias may be determined at based on bin populations of the bins. The bin population for a bin identifies a total number of gyroscope readings associated with that bin. The bias may in at least some embodiments also be determined based on bin widths for the bins.

For example in some embodiments the electronic device may at identify a most significant bin for the histogram . The most significant bin is identified based on the bin population for the bins and the width for the bins. For example in some embodiments the gyroscope calibration application may determine the most significant bin by calculating a bin significance score for each of the bins. The bin significance score for a bin may be calculated by dividing the bin population for the bin by the width of the bin. Accordingly the bin significance score varies directly with the bin population and inversely with the width of the bin. The bin having the highest bin significance score may be selected as the most significant bin.

After identifying the most significant bin the electronic device may determine the bias for an axis of the gyroscope based on the identified most significant bin. For example the electronic device may determine the bias for the gyroscope by averaging the gyroscope readings in the most significant bin. That is the bias may be determined as the average of the values of the gyroscope readings which were included in the most significant bin.

In at least some embodiments at after the bias is determined the bias may be stored in memory of the electronic device .

In some embodiments at the electronic device may perform histogram maintenance on the histogram. That is at one or more maintenance operations may be performed on the histogram . The maintenance operations may be used to improve the efficiency of the histogram . That is the maintenance operations may be used to improve the speed at which the histogram may be used to identify a bias and or the accuracy of the bias which is identified.

In at least some embodiments at the electronic device may improve precision in concentrated areas of the histogram by adapting bin widths. In at least some embodiments at the electronic device may reduce the size of the histogram .

In at least some embodiments the method may be repeated. That is the method may be performed multiple times in order to ensure that the determined bias remains accurate. Since the bias of a gyroscope tends to vary over time the method may be repeated to ensure that such changes are reflected in the determined bias. That is the method may be repeated to ensure that the electronic device continues to have a current estimate of the bias. In at least some embodiments the method may be continually repeated. For example the method may upon completing resume operation again at .

Referring now to at example histogram is illustrated. The example histogram includes a plurality of bins . For the sake of clarity only a single bin has been labelled.

The example histogram illustrates the bin population of each bin illustrated on the y axis . For the sake of clarity only a single bin population has been labelled. Each bin has an associated bin population . The bin population is a measure of the number of gyroscope readings which were included in the bin . That is the bin population illustrates the number of samples which were considered to fall within the bin .

In the example histogram the x axis has been used to represent gyroscope reading values which are considered to be associated with that bin. That is the x axis of the histogram effectively illustrates the range of each bin . It will be appreciated that in other examples the histogram may be represented so that the x axis represents a bin number instead of the range of gyroscope reading values for the bin.

Each bin has an associated bin width only one of which has been labelled . The bin width is defined by the range of the bin. That is the bin width is the difference between an upper limit for gyroscope readings which are considered to be associated with the bin and a lower limit for gyroscope readings which are considered to be associated with the bin .

Two bins may be considered to be extreme bins . The extreme bins are the bins which are at the outside of the histogram . The extreme bins include a lower extreme bin and an upper extreme bin . The extreme bins and effectively define the range of the histogram . A lower limit of the range of the lower extreme bin defines a lower limit associated with the histogram and an upper limit of the range of the upper extreme bin defines an upper limit associated with the histogram .

One of the bins may be considered to be a most significant bin . The most significant bin identifies a point of concentration in the histogram . That is the most significant bin is a bin having the best combination of bin width and bin population. Methods of identifying which bin is the most significant bin are described in greater detail with reference to .

Referring now to a method for obtaining a histogram is illustrated in flowchart form. The method may for example be performed at of the method of .

At the electronic device may in some embodiments determine whether the histogram is already initialized. For example the electronic device may determine whether the memory of the electronic device already includes the histogram or whether a new histogram must be created.

If the histogram is not already initialized then at the histogram may be initialized. In at least some embodiments the histogram may be initialized by storing in memory a histogram having one or more default properties. For example the histogram may have a default number of bins each having default ranges. In at least some embodiments the histogram may be created so that all bins initially have the same bin width . The bin population for the bins of the newly created histogram may initially be nil.

After a histogram is initialized i.e. after a new histogram is initialized at or if it is determined at that a histogram is already initialized then at the gyroscope reading which may have been obtained at of may be added to the histogram . That is the histogram may be updated to reflect the additional gyroscope reading. More particularly the electronic device may use the ranges associated with the bins of the histogram to assign the gyroscope reading to a specific one of the bins . That is an appropriate bin for the gyroscope reading is identified based on the ranges of the bins . A bin population for identified bin may be updated to reflect the fact that the bin has a new bin member.

In some embodiments a sum of gyroscope readings within each bin may be maintained by the electronic device . For example rather than track all of the individual gyroscope readings associated with a bin the electronic device may instead maintain a sum of the gyroscope readings which were associated with that bin . The sum of the readings when coupled with the bin population allows an average gyroscope reading for a bin to be determined. As noted in the discussion of of the method of above the average gyroscope reading for the most significant bin may provide the bias.

In some embodiments and in some situations a gyroscope reading may be obtained which falls outside of the range of the histogram . In some such embodiments the reading may be ignored. In other embodiments if a gyroscope reading is outside of a range of the histogram the electronic device may automatically increase the range of one of the extreme bins of the histogram so that the gyroscope reading may be included in that bin.

The method of may be repeatedly performed in order to provide a well populated histogram which yields an accurate estimate of bias.

Referring now to a method of adapting bin widths of a histogram is illustrated in flowchart form. The method may for example be performed at of the method of . The bin adaptation is performed to maintain the histogram so that the histogram may easily identify areas of concentration.

At the electronic device determines whether width adaptation is required. The electronic device may make this determination based on one or more predetermined criteria. The predetermined criteria may consider for example the bin population of the bin having the largest bin population. The predetermined criteria may also consider for example the sum of the bin populations for a pair of adjacent bins of the histogram which collectively contain fewer gyroscope readings than any other pair of adjacent bins. For example in some embodiments the electronic device may determine the ratio of the bin population of the bin having the largest bin population to the sum of the bin populations for the pair of adjacent bins which collectively contain fewer gyroscope readings than any other pair of adjacent bins. If this ratio exceeds a threshold then the electronic device may determine that bin width adaptation is required.

If bin adaptation is required then at the electronic device may identify the bin of the histogram containing the greatest number of gyroscope readings and may at identify the pair of adjacent bins of the histogram which collectively contain fewer gyroscope readings than any other pair of adjacent bins.

At the electronic device may split the largest bin into two bins. That is the electronic device may form two bins from the single largest bin. The bin width of each of the newly formed bins may be half the bin width of the largest bin. In some embodiments the bin population of each of the newly formed bins is half the bin population of the largest bin. Similarly if the electronic device maintains a sum of gyroscope readings associated with each bin then the sums for the new bins may be half of the sum from the largest bin.

At the electronic device may merge the pair of adjacent bins identified at . That is the electronic device may combine these two bins so that these two bins now become one bin. The bin width of the newly formed bin may be the sum of the bin widths of both bins in the pair. Similarly the bin population of the newly formed bin may be the sum of the bin populations for both bins in the pair. The sum of gyroscope readings associated with the newly formed bin may be the sum of the gyroscope readings for both bins in the pair.

In at least some embodiments the method maintains the number of bins in the histogram at a constant number. That is the number of bins in the histogram is the same before the method is performed as it is after the method is performed. While the ranges of individual bins may be affected the number of bins is static.

The method eventually causes the bin with the most gyroscope readings to continually split and increase its resolution. Accordingly the bin which contains the bias and which contains a high concentration of measurements will eventually become very precise. Furthermore the splitting allows slow changing bias signals to be tracked because after the bin with the bias is split one of the two sides of that bin will typically take the new gyroscope readings representing the bias.

While the present disclosure is primarily described in terms of methods a person of ordinary skill in the art will understand that the present disclosure is also directed to various apparatus such as a handheld electronic device including components for performing at least some of the aspects and features of the described methods be it by way of hardware components software or any combination of the two or in any other manner. Moreover an article of manufacture for use with the apparatus such as a pre recorded storage device or other similar computer readable storage medium including program instructions recorded thereon which may for example cause a processor to perform one or more of the methods described herein or a computer data signal carrying computer readable program instructions may direct an apparatus to facilitate the practice of the described methods. It is understood that such apparatus articles of manufacture and computer data signals also come within the scope of the present disclosure.

The term computer readable storage medium as used herein means any medium which can store instructions for use by or execution by a computer or other computing device including but not limited to a portable computer diskette a hard disk drive HDD a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory an optical disc such as a Compact Disc CD Digital Versatile Video Disc DVD or Blu Ray Disc and a solid state storage device e.g. NAND flash or synchronous dynamic RAM SDRAM .

The embodiments of the present disclosure described above are intended to be examples only. Those of skill in the art may effect alterations modifications and variations to the particular embodiments without departing from the intended scope of the present disclosure. In particular features from one or more of the above described embodiments may be selected to create alternate embodiments comprised of a sub combination of features which may not be explicitly described above. In addition features from one or more of the above described embodiments may be selected and combined to create alternate embodiments comprised of a combination of features which may not be explicitly described above. Features suitable for such combinations and sub combinations would be readily apparent to persons skilled in the art upon review of the present disclosure as a whole. The subject matter described herein and in the recited claims intends to cover and embrace all suitable changes in technology.

