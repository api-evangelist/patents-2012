---

title: Device, system, and method for communicating with a power inverter using power line communications
abstract: A device, system, and method for communicating with a power inverter of an array of inverters includes transmitting a relay message from an inverter array controller to a relay inverter in response to failing to receive a response from at least one power inverter of the array. The relay inverter is configured to retransmit a message from the inverter array controller to a non-responsive power inverter of the array of inverters in response to receiving the relay message. The relay inverter may subsequently retransmit a reply received from the non-responsive power inverter to the inverter array controller or to another power inverter of the array of inverters.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09276635&OS=09276635&RS=09276635
owner: SUNPOWER CORPORATION
number: 09276635
owner_city: San Jose
owner_country: US
publication_date: 20120629
---
The present disclosure relates generally to power inverters for converting direct current DC power to alternating current AC power and more particularly to systems and methods for controlling and communicating with such power inverters.

Power inverters convert a DC input power to an AC output power. Some power inverters are configured to convert the DC input power to an AC output power suitable for supplying energy to an AC grid and in some cases an AC load coupled to the AC grid. One particular application for such power inverters is the conversion of DC power generated by an alternative energy source such as photovoltaic cells PV cells or solar cells fuel cells DC wind turbine DC water turbine and other DC power sources to a single phase AC power for delivery to the AC grid at the grid frequency.

In an effort to increase the amount of AC power generated a large number of power inverters may be used in a single application to form an array of power inverters. In some implementations each power inverter of the array is incorporated or otherwise associated with an alternative energy source e.g. solar cell panel to form an alternative energy source module such as a photovoltaic module. Such power inverters are generally referred to as microinverters. Communication with each power inverter used in the application is often desirable to for example monitor the health or energy output of the power inverters. In some applications a power inverter controller or manager may be used to control and manage the array of inverters.

According to on aspect an inverter array controller for maintaining and communicating with an array of power inverters configured to convert direct current DC power generated by an alternative energy source to alternating current AC power may include a power line communication circuitry a processing circuitry and a memory device. The power line communication circuit may communicate with the array of power inverters over a power line connecting the inverter array controller to each of the power inverters of the array of power inverters. The memory device may have stored therein a plurality of instructions which when executed by the processing circuitry result in the inverter array controller transmitting using the power line communication circuitry a first message to a power inverter of the array of power inverters determining whether a response was received from the power inverter transmitting in response to failing to receive the response from the power inverter a relay message to another power inverter of the array of power inverters the relay message including the first message and instructing the another inverter to transmit the first message to the power inverter and receiving a response message transmitted by the another power inverter from the power inverter.

In some embodiments the first message is a broadcast message to each power inverter of the array of power inverters that requests each power inverter to respond to the broadcast message. Additionally in some embodiments the plurality of instructions further result in the inverter array controller selecting the another power inverter to receive the relay message from the array of power inverters. In some embodiments selecting the another power inverter may include selecting the another power inverter from the array of power inverters based on a signal characteristic of a communication received from the another power inverter. Additionally in some embodiments selecting the another power inverter from the array of power inverters based on signal characteristic of the communication received from the another power inverter in response to the test communication. In some embodiments the signal characteristic may included for example a signal amplitude a signal integrity a signal to noise ratio and or a response time of the communication received from the another power inverter.

Additionally or alternatively selecting the another power inverter may include identifying the power inverter that did not respond to the first message and selecting the another power inverter based on the identity of the power inverter. For example in some embodiments identifying the power inverter may include identifying the location of the power inverter relative to the other power inverters within the array of power inverters. Further in some embodiments transmitting the relay message may include transmitting a first relay message it the another power inverter that instructs the another power inverter to echo the next received message and transmitting a second relay message including the first message to the another power inverter.

According to another aspect a power inverter of an array of power configured to convert direct current DC power generated by an alternative energy source to alternating current AC power may include a power line communication circuitry an inverter circuit to convert the DC power to the AC power and an inverter controller to control operation of the inverter circuit. The power line communication circuit may communicate with an inverter array controller over a power line connecting the power inverter to the inverter array controller and other power inverters of the array of power inverters. The inverter controller may receive a message from the inverter array controller using the power line communication circuit determine whether the message is a relay message retransmit in response to determining the message is a relay message the relay message to a non responsive power inverter of the array of power inverters that has not responded to a previous communication from the inverter array controller and receive in response to retransmitting the relay message a response from the non responsive power inverter and transmit the response using the power line communication circuit to the inverter array controller.

In some embodiments to determine whether the message received from the inverter array controller is a relay message may include to determine whether the message instructs the power inverter to transmit a message to the non responsive power inverter. Additionally in some embodiments to retransmit the relay message comprises to identify the non responsive power inverter as a function of the relay message. Further in some embodiments to retransmit the relay message includes to extract a first message from the relay message the first message having been previously sent by the inverter array controller and transmit the first message to the non responsive power inverter.

In some embodiments the relay message is a second relay message and the inverter controller is further to receive a first relay message from the inverter array controller that instructs the power inverter to echo the next received message from the inverter array controller and receive the second relay message from the inverter array controller. In such embodiments to retransmit the relay message may include to retransmit in response to receiving the first and second relay messages the second relay message to the non responsive power inverter of the array of power inverter.

According to a further aspect a method for communicating with an array of power inverters configured to convert direct current DC power generated by an alternative energy source to alternating current AC power may include transmitting a first message to a power inverter of the array of power inverters transmitting in response to failing to receive a response from the power inverter a relay message to another power inverter of the array of power inverters the relay message including the first message and instructing the another inverter to transmit the first message to the power inverter and receiving a response message transmitted by the another power inverter from the power inverter. In some embodiments transmitting the first message and transmitting the relay message may include transmitting the first message and relay message using a power line communications protocol. Additionally in some embodiments transmitting the first message comprises transmitting a broadcast message to each power inverter of the array of power inverters that requests each power inverter to respond to the broadcast message.

In some embodiments the method may further include selecting the another power inverter to receive the relay message from the array of power inverters. In such embodiment selecting the another power inverter may include selecting the another power inverter from the array of power inverters based on a signal characteristic of a communication received from the another power inverter. For example in some embodiments selecting the another power inverter from the array of power inverters based on signal characteristic of the communication received from the another power inverter in response to the test communication. Additionally or alternatively selecting the another power inverter may include identifying the power inverter that did not respond to the first message and selecting the another power inverter based on the identity of the power inverter. In such embodiments identifying the power inverter may include identifying the location of the power inverter relative to the other power inverters within the array of power inverters. Further in some embodiments transmitting the relay message may include transmitting a first relay message to the another power inverter that instructs the another power inverter to echo the next received message and transmitting a second relay message including the first message to the another power inverter.

According to yet a further aspect a method for handling communications in an array of power inverters may include determining on a power inverter whether a message received from a inverter array controller is a relay message retransmitting in response to determining the message is a relay message the relay message to a non responsive power inverter of the array of power inverters that has not responded to a previous communication from the inverter array controller receiving in response to retransmitting the relay message a response from the non responsive power inverter and transmitting the response from the power inverter to the inverter array controller. In some embodiments determining whether the message received from the inverter array controller is a relay message may include determining whether the message instructs the power inverter to transmit a message to the non responsive power inverter.

In some embodiments retransmitting the relay message may include identifying the non responsive power inverter as a function of the relay message. For example in some embodiments retransmitting the relay message may include extracting a first message from the relay message the first message having been previously sent by the inverter array controller and transmitting the first message to the non responsive power inverter. Additionally in some embodiment the relay message may be embodied as a second relay message and the method may further include receiving on the power inverter a first relay message from the inverter array controller that instructs the power inverter to echo the next received message from the inverter array controller and receiving the second relay message from the inverter array controller. In such embodiments retransmitting the relay message may include retransmitting in response to receiving the first and second relay messages the second relay message to the non responsive power inverter of the array of power inverter.

While the concepts of the present disclosure are susceptible to various modifications and alternative forms specific exemplary embodiments thereof have been shown by way of example in the drawings and will herein be described in detail. It should be understood however that there is no intent to limit the concepts of the present disclosure to the particular forms disclosed but on the contrary the intention is to cover all modifications equivalents and alternatives consistent with the present disclosure and the appended claims.

In the following description numerous specific details such as logic implementations opcodes means to specify operands resource partitioning sharing duplication implementations types and interrelationships of system components and logic partitioning integration choices are set forth in order to provide a more thorough understanding of the present disclosure. It will be appreciated however by one skilled in the art that embodiments of the disclosure may be practiced without such specific details. In other instances control structures gate level circuits and full software instruction sequences have not been shown in detail in order not to obscure the invention. Those of ordinary skill in the art with the included descriptions will be able to implement appropriate functionality without undue experimentation.

References in the specification to one embodiment an embodiment an example embodiment etc. indicate that the embodiment described may include a particular feature structure or characteristic but every embodiment may not necessarily include the particular feature structure or characteristic. Moreover such phrases are not necessarily referring to the same embodiment. Further when a particular feature structure or characteristic is described in connection with an embodiment it is submitted that it is within the knowledge of one skilled in the art to effect such feature structure or characteristic in connection with other embodiments whether or not explicitly described.

Embodiments of the invention may be implemented in hardware firmware software or any combination thereof. Embodiments of the invention implemented in a computer system may include one or more bus based interconnects between components and or one or more point to point interconnects between components. Embodiments of the invention may also be implemented as instructions carried by or stored on a transitory or non transitory machine readable e.g. computer readable medium which may be read and executed by one or more processors. A machine readable medium may be embodied as any device mechanism or physical structure for storing or transmitting information in a form readable by a machine e.g. a computing device . For example a machine readable medium may be embodied as read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices mini or micro SD cards memory sticks electrical signals and others.

In the drawings specific arrangements or orderings of schematic elements such as those representing devices modules instruction blocks and data elements may be shown for ease of description. However it should be understood by those skilled in the art that the specific ordering or arrangement of the schematic elements in the drawings is not meant to imply that a particular order or sequence of processing or separation of processes is required. Further the inclusion of a schematic element in a drawing is not meant to imply that such element is required in all embodiments or that the features represented by such element may not be included in or combined with other elements in some embodiments.

In general schematic elements used to represent instruction blocks may be implemented using any suitable form of machine readable instruction such as software or firmware applications programs functions modules routines processes procedures plug ins applets widgets code fragments and or others and that each such instruction may be implemented using any suitable programming language library application programming interface API and or other software development tools. For example some embodiments may be implemented using Java C and or other programming languages. Similarly schematic elements used to represent data or information may be implemented using any suitable electronic arrangement or structure such as a register data store table record array index hash map tree list graph file of any file type folder directory database and or others.

Further in the drawings where connecting elements such as solid or dashed lines or arrows are used to illustrate a connection relationship or association between or among two or more other schematic elements the absence of any such connecting elements is not meant to imply that no connection relationship or association can exist. In other words some connections relationships or associations between elements may not be shown in the drawings so as not to obscure the disclosure. In addition for ease of illustration a single connecting element may be used to represent multiple connections relationships or associations between elements. For example where a connecting element represents a communication of signals data or instructions it should be understood by those skilled in the art that such element may represent one or multiple signal paths e.g. a bus as may be needed to effect the communication.

Referring now to in one embodiment a system for generating alternative energy includes an array of alternative energy source module and an inverter array controller electrically coupled to each alternative energy source module via an alternating current AC power line s . The alternative energy source modules are configured to convert direct current DC power from an alternative energy source to AC power which may be supplied to an AC power grid and or a load coupled to the grid via the power line s . In the illustrative embodiment the alternative energy source modules are embodied as photovoltaic modules configured to convert solar energy to AC power. However in other embodiments other types of alternative energy sources may be used such as for example fuel cells DC wind turbines DC water turbines and or other alternative energy sources. Additionally although only two alternative energy source modules are illustrated in it should be appreciated that the array may and in many applications will include a greater number of modules as indicated by the ellipses in . For example in some embodiments the array may include ten fifty one hundred or more alternative energy source modules .

The array of alternative energy source modules may be located remotely from the inverter array controller . For example each module of the array may be located on a roof of a building or at a designated location e.g. at a solar panel farm while the inverter array controller is located in a separate location. Additionally the alternative energy source modules may or may not be located near each other. For example the array may be embodied as a plurality of sub arrays each located apart from each other and having a plurality of alternative energy source modules . Additionally although a single AC power line is illustrated as coupling the modules to the controller in it should be appreciated that the AC power line may be embodied as a plurality of AC power lines in other embodiments.

As discussed above each of the illustrative alternative energy source modules is embodied as a photovoltaic module configured to convert solar energy to an AC power. As such in the illustrative embodiment each module includes a DC photovoltaic module and an inverter . The DC photovoltaic module may be embodied as one or more photovoltaic cells and is configured to deliver DC power to the inverter in response to receiving an amount of sunlight. Of course the DC power delivered by DC photovoltaic module is a function of environmental variables such as e.g. sunlight intensity sunlight angle of incidence and temperature. The inverter is configured to convert the DC power generated by the DC photovoltaic module to AC power. In some embodiments the inverter and the DC photovoltaic module are located in a common housing. Alternatively the inverter may include its own housing secured to the housing of the DC photovoltaic module . Additionally in some embodiments the inverter is separate from the housing of the DC photovoltaic module but may be located nearby.

Each of the illustrative inverters includes a DC to AC inverter circuit and an inverter controller . The DC to AC inverter circuit is configured to convert the DC power generated by the DC photovoltaic module to AC power at the grid frequency of the power grid . One of a number of various inverter topologies and devices may be used in the DC to AC inverter circuit . Examples of inverter topologies that may be used in the inverter circuit are described in for example U.S. patent application Ser. No. 12 563 499 entitled Apparatus for Converting Direct Current to Alternating Current by Patrick L. Chapman et al. filed on Sep. 21 2009 and in U.S. patent application Ser. No. 12 563 495 entitled Apparatus and Method for Controlling DC AC Power Conversion by Patrick L. Chapman et al. filed on Sep. 21 2009.

The operation of the inverter circuit is controlled and monitored by the inverter controller . The illustrative inverter controller includes a processor a memory and a power line communication circuit . Additionally the inverter controller may include other devices commonly found in controllers which are not illustrated in for clarity of description. Such additional devices may include for example peripheral devices data storage devices input output ports and or other devices.

The processor of the inverter controller may be embodied as any type of processor capable of executing software firmware such as a microprocessor digital signal processor microcontroller or the like. The processor is illustratively embodied as a single core processor but may be embodied as a multi core processor having multiple processor cores in other embodiments. Additionally the inverter controller may include additional processors having one or more processor cores in other embodiments.

The memory of the inverter controller may be embodied as one or more memory devices or data storage locations including for example dynamic random access memory devices DRAM synchronous dynamic random access memory devices SDRAM double data rate synchronous dynamic random access memory device DDR SDRAM flash memory devices and or other volatile memory devices. The memory is communicatively coupled to the processor via a number of signal paths such as a data bus point to point interconnection or other interconnection. Although only a single memory device is illustrated in in other embodiments the inverter controller may include additional memory devices. Various data and software may be stored in the memory device . For example applications programs libraries and drivers that make up the firmware executed by the processor may reside in memory .

The power line communication circuit may be embodied as any number of devices and circuitry for enabling communications between the inverter i.e. the inverter controller and the controller . In the illustrative embodiment the communication circuit is configured to communicate with the controller over the AC power line s and may use any suitable power line communication protocol to effect such communication.

As discussed above the inverter array controller is configured to monitor and or control the operation of the alternative energy source modules i.e. the inverters . The illustrative inverter array controller includes a processing circuit a memory and a power line communication circuit . Additionally the inverter array controller may include other devices commonly found in controllers which are not illustrated in for clarity of description. Such additional devices may include for example peripheral devices data storage devices input output ports and or other devices.

The processing circuit of the inverter array controller may be embodied as any type of processor or processing circuit capable of executing software firmware such as a microprocessor digital signal processor microcontroller or the like. The processing circuit is illustratively embodied as a single core processor but may be embodied as a multi core processor having multiple processor cores in other embodiments. Additionally the processing circuit may be embodied as additional processors and associated circuits in other embodiments.

The memory of the inverter array controller may be embodied as one or more memory devices or data storage locations including for example dynamic random access memory devices DRAM synchronous dynamic random access memory devices SDRAM double data rate synchronous dynamic random access memory device DDR SDRAM flash memory devices and or other volatile memory devices. The memory is communicatively coupled to the processing circuit via a number of signal paths such as a data bus point to point interconnection or other interconnection. Although only a single memory device is illustrated in in other embodiments the inverter array controller may include additional memory devices. Various data and software may be stored in the memory device . For example applications programs libraries and drivers that make up the software firmware executed by the processing circuit may reside in memory .

Similar to the communication circuit the communication circuit may be embodied as any number of devices and circuitry for enabling communications between the controller and the inverters . In the illustrative embodiment the communication circuit is configured to communicate with the communication circuit of the inverters over the AC power line s and may use any suitable power line communication protocol to effect such communication. For example in some embodiments a frequency shift keying FSK modulation protocol using a half duplex communication link may be used. In one particular embodiment the communication circuit is configured to use the CENELEC B power line communication protocol but may be use other protocols in other embodiments such as those protocols including a form of error detection and or correction.

In use the inverter array controller may control the operation of the inverter controllers request information and data from the inverter controllers and provide instructions and data to the inverter controllers . To do so the inverter array controller communicates with the inverters over the AC power line s as discussed above. However depending on the configuration of the array and or the location of the individual inverter in the array communications between the inverter and the inverter array controller may be adversely affected. As such as discussed in more detail below the inverter array controller may utilize another inverter of the array as a relay inverter to relay messages to a non responsive inverter .

Referring now to in the illustrative embodiments the inverter array controller and each of the inverters of the corresponding alternative energy source module are coupled in parallel with each other to the AC power line which may be coupled to the power grid . Again although the illustrative array of includes only three inverters the array may include a larger number of inverters in other embodiments i.e. the inverter array controller may control a larger number of inverters . Additionally the array may form a sub array of a larger array in some embodiments. In such embodiments the additional sub arrays may be coupled in parallel with the array to the inverter array controller and the power grid such that a single inverter array controller may control multiple arrays . Alternatively in other embodiments each sub array may include its own inverter array controller .

The illustrative power grid AC power line is embodied as a three wire cable including a pair of line wires and a neutral wire . Power is delivered from the inverters to the power grid via the line wires . As shown in the inverter array controller is coupled to one of the line wires and the neutral wire . As such power line communications between the inverter array controller and the inverters occur via the line to neutral L N coupling.

An equivalent circuit of the array of inverters is shown in . The equivalent circuit is embodied as a distributed impedance network formed from the circuit characteristics of the inverters of the array and the interconnecting power line cable . For example in each inverter is represented by a corresponding inductor capacitor LC network including an inductor and a capacitor . Each inductor represents the inductance of the cable connector and associated wiring through which the corresponding inverter is coupled to the power line cable and the inductance of the power line cable section associated with the corresponding inverter . The capacitor represents the input capacitance of the corresponding inverter and the capacitance of the power line cable section associated with the corresponding inverter . Illustratively each inductor is embodied as a 1 mH inductor and each capacitor is embodied as a 1 nF capacitor. Of course it should be appreciated that in some embodiments arrays of inverters having a more complex structure and therefore a more complex equivalent circuit may be used in the system .

In alternative energy generation systems having arrays of inverters similar to the configurations shown in the effectiveness of the power line communication between the inverters and the inverter array controller has been determined to be a function of the location of the individual inverter within the array . That is the magnitude of the voltage of a power line communication sent from an inverter and received by the inverter array controller may vary generally non linearly with the distance between the inverter and the inverter array controller . For example a graph showing a normalized voltage level of a power line communication message received from inverters of an array versus the position within the array of each inverter is shown in . As shown in the graph a power line communication received by the inverter array controller from the middle inverters e.g. inverter numbers 13 17 has a much lower voltage level relative to inverters nearer or farther away from the associated inverter array controller . That is the middle inverters are located in a communication null in which the power line communications from those middle inverters to the inverter array controller are adversely attenuated. Additionally such communication nulls can occur between inverters of an array . For example in the embodiment of two inverters located fifteen nodes i.e. inverters apart may receive power line communications from each other having the low normalized voltage level as shown for inverter number 15 in .

Depending on the severity of the communication null communications between the inverter within the null and the inverter array controller or other inverter may have such a reduced voltage level that such communications are simply not received by each other. The communication null illustrated in is due to the configuration of the array the resultant equivalent LC circuit and the frequency of the communication which can cause attenuation of signals over particular distances. It should be appreciated that a single array may have one or more communication nulls and that such communication nulls may occur at various locations within the array i.e. centered on various inverters of the array depending on the configuration layout communication frequency and surrounding conditions of the array . Although the inverter array controller may utilize a re try algorithm to attempt communicating with the inverters located in a communication null such re try attempts are likely not to be successful due to the consistent attenuation of the power line communication between the inverter array controller and the affected inverters .

Referring now to in one embodiment a method for communicating with the inverters of the array may be executed by the inverter array controller . The method begins with block in which the inverter array controller is initialized. During the initialization procedure the inverter array controller may perform various system checks such as memory validations load executable software firmware and or otherwise prepare for controlling and communicating with the inverters of the array .

Subsequently or as part of the initialization of block the inverter array controller may determine which power inverters of the array are to be used as relay inverters. As discussed in more detail below a relay inverter is a power inverter of the array selected to relay communications from the inverter array controller to inverters located in communication nulls. In some embodiments the relay inverters are pre selected and identification data that identifies the relay inverters may be stored in the inverter array controller e.g. in memory . In such embodiments the relay inverters may be selected based on for example the location of the inverter within the array the location of the inverter relative to the inverter array controller the configuration of the array and or other criteria or factors useable to select at least one inverter of the array that is not located in a communication null relative to the inverter array controller .

Alternatively in some embodiments the inverter array controller is configured to dynamically or automatically determine or otherwise select one or more power inverters as the relay inverter s . To do so for example the inverter array controller may execute a method for determining at least one relay inverter from the array of power inverters as shown in . The method begins with block in which the inverter array controller transmits a request for a test communication from each power inverter of the array . Such request communication may be embodied as for example a broadcast communication from the inverter array controller which is to be received by each power inverter of the array assuming no communication nulls . In block the inverter array controller receives the test communication responses from each responding power inverter of the array . Such test communication response may be embodied as any type of power line communication message such as a simple acknowledgement. Of course those power inverters located in a communication null may not receive or otherwise be able to interpret the original request communication transmitted by the inverter array controller due to the voltage attenuation occurring at the communication null. Similarly even if an inverter located in a communication null did receive the request communication from the inverter array controller the test communication response from that inverter may not be received or otherwise be properly interpreted by the inverter array controller .

Accordingly in block the inverter array controller records one or more signal characteristics of the test communication response received from each responding inverter of the array . Subsequently in block the inverter array controller selects one or more inverters of the array to be the relay inverter based on the recorded signal characteristic e.g. having the best signal characteristic . The signal characteristic recorded and compared in blocks may be embodied as any characteristic of the test communication response signal received from each responding inverter that may be compared to each other to determine the relay inverter s . For example in some embodiments the signal characteristic may be embodied as the signal amplitude the signal integrity the signal to noise ratio the response time or other characteristic of the test communication response signal received from each of the responding inverters . Of course in other embodiments other criteria may be used in place of or in addition to the signal characteristic s of the test communication responses such as for example the number of inverters in the array the configuration of the array historical communication data and or the like.

Of course in other embodiments other methodologies for determining or selecting the relay inverter s from the array of power inverters may be used. For example it has been determined that the last inverter in an array of power inverters i.e. the inverter having the greatest communication distance to the inverter array controller such as the inverter of may exhibit the most effective communication with the inverter array controller . That is the communication from the last inverter of the array received by the inverter array controller may have the largest amplitude best signal to noise characteristic or other signal characteristic relative to the other inverters of the array . Conversely it has been determined that the inverters closest to the inverter array controller e.g. the inverter having the least communication distances to the inverter array controller may be located in a communication null and exhibit the least effective communication with the inverter array controller . As such in those embodiments in which the configuration or structure of the array is known predetermined or otherwise discoverable by the inverter array controller the controller may select the last inverter of the array as the relay inverter or one of the relay inverters.

Referring back to after the relay inverter s has been selected or otherwise determined the inverter array controller may periodically or occasionally request communication from one or more power inverters of the array in block . Such requested communication may be embodied as any type of request such as without limitation a request for operational data a request to acknowledge instructions a heartbeat request and or the other types of communications. In block the inverter array controller determines whether a response was received from each power inverter from which a communication was requested in block . For example in some embodiments the inverter array controller may transmit a broadcast requests in block that request each power inverter of the array to respond e.g. with particular operational data . In such embodiments the inverter array controller determines whether a response was received from each power inverter of the array . If so the method loops back to block in which the inverter array controller may request additional communications at some later time.

However if a response was not received from one or more of the inverters to which the request was directed in block the method advances to block in which the inverter array controller retransmits the request for communication to the non responsive inverter s . That is the inverter array controller retransmits the request to any inverter that did not respond to the request transmitted in block or otherwise responded with a communication that was not received or cannot be interpreted by the inverter array controller e.g. the voltage level of the response communication is too low to be received or interpreted by the controller . In block the inverter array controller again determines whether a response to the retransmitted request is received from each of the non responsive inverters . If so the method loops back to block in which the inverter array controller may request additional communications at some later time.

In some embodiments the inverter array controller may be configured to adjust the frequency of the power line communication between the controller and the inverter or just the non responding inverter prior to retransmitting the request in block . As discussed above the existence and location of a communication null is dependent upon the circuit characteristics i.e. the circuit impedance as discussed above with regard to of the array and the frequency of the power line communication transmission. As such by adjusting the frequency of the power line communication transmission the location of the null may be adjusted i.e. which inverter is located in the communication null . Accordingly in some embodiments the inverter array controller may be configured to adjust the frequency of the power line communication transmission and re attempt to communicate with the non responsive inverter in block . Such additional communication may include instructions to the non responding inverter to likewise adjust the frequency of the its power line communication transmission when responding back to the inverter array controller . In this way the inverter array controller may be able to establish communications with the non responding inverter by changing the location of the communication null using a different communication frequency. Such frequency adjustments may be implemented in place of or in addition to the use of a relay inverter as discussed below.

If however no response to the request retransmitted in block is received from one or more of the non responsive inverters the method advances to block . In block the inverter array controller transmits a relay message to the identified or selected relay inverter s . In embodiments in which multiple power inverters have been identified as relay inverters the inverter array controller may select one of the identified relay inverters to receive the relay message. For example in one embodiment the inverter array controller selects one of the identified relay inverters to receive the relay message based on the identity of the non responsive inverter s in block . The identity of the non responsive inverter s may be embodied as any type of data capable of identifying the non responsive inverter s including but not limited to a virtual or machine address such as a globally unique identifier GUID the location of the non responsive inverter within the array the location of the non responsive inverter relative to the inverter array controller and or other data or criteria.

The relay message transmitted by the inverter array controller in block may be embodied as any type of communication message that instructs the relay inverter to retransmit a message from the inverter array controller . For example in some embodiments the relay message may include the original request message transmitted in block e.g. the relay message may wrap the original request message . Alternatively the relay message may be embodied as a first relay message that instructs the relay inverter to echo the next message received from the inverter array controller followed by a second relay message that is a retransmission of the original request message transmitted in block .

As discussed in more detail below the relay inverter s is used to relay the messages from the inverter array controller to the non responsive inverter s as well as from the non responsive inverter s to the inverter array controller . As such the inverter array controller determines whether a response was received from the relay inverter s in block . If not the method advances to block in which an error is generated. Such error may include storing the identity of the non responsive inverter and or relay inverter storing additional information related to the non responsive inverter and or relay inverter generating a visual or audio alter and or providing an error message to a remote computer or server.

If however a response is received from the relay inverter the method advances to block in which the inverter array controller determines whether the response is an error message from the relay inverter . That is although a response may be received from the relay inverter such response may be an error message indicating that the relay inverter did not receive a response from the non responsive inverter . If so the method advances to block in which an error is generated as discussed above. However if a non error response is received from the relay inverter s the method advances to block in which the inverter array controller processes the message received from the from the non responsive inverter s via the response from the relay inverter s . In this way the inverter array controller is capable of communicating with any inverter within the array even those inverters located in an communication null via use of a relay inverter .

Referring now to in one embodiment each relay inverter of the array may execute a method to relay communications between the inverter array controller and one or more non responsive inverters . The method begins with block in which the relay inverter determines whether a communication has been received from the inverter array controller . If so the method advances to block in which the inverter array determines whether the received communication is a relay message. To do so the inverter array may analyze the received communication to determine whether the received communication is a relay message. Such determination may be based on the metadata of the received communication instructions included in the received communication the type of communications and or other aspects of the received communication. If the received communication is determine not to be a relay message the method advances to block in which the relay inverter responds if required to the received communication as normal. If however the received communication is determined to be a relay message the method advances to block .

In block the relay inverter retransmits a message from the inverter array controller to one or more non responsive inverters . As discussed above the message retransmitted by the relay inverter may be included in the relay message received in block . As such in some embodiments the relay inverter identifies the non responsive inverter based on the relay message in block . To do so for example the relay inverter may retrieve identification data from the relay message that identifies the non responsive inverter . Such identification data may be embodied may be embodied as any type of data capable of identifying the non responsive inverter such as for example a virtual or machine address e.g. a GUID .

After the non responsive inverter has been identified by the relay inverter the relay inverter retransmits the message from the inverter array controller to the non responsive inverter in block . To do so in some embodiments the relay inverter may simply retransmit the relay message received from the inverter array controller in block . Alternatively the relay inverter may extract a message included in the relay message e.g. wrapped by the relay message and retransmit only the extracted message to the non responsive inverter in block .

In some embodiments the message to be retransmitted by the relay inverter is embodied as a subsequent message received from the inverter array controller which is to be echoed to the non responsive inverter s . In such embodiments the relay message received in block instructs the relay inverter to echo the next message received from the inverter array controller . As such the relay inverter prepares to echo the next message received from the inverter array controller in block and subsequently receives the next message from the inverter array controller in block . In block the relay inverter retransmits the subsequent message received from the inverter array controller in block to the non responsive inverter . As discussed above the relay inverter may identify the non responsive inverter based on metadata or other data associated with the first or second relay messages received from the inverter array controller .

After the relay inverter has retransmitted the message from the inverter array controller to the non responsive inverter the method advances to block . In block the relay inverter determines whether a reply has been received from the non responsive inverter . For example in some embodiments the relay inverter is configured to wait a predetermined amount of time for such a reply. The reply may be embodied as a simple acknowledgement or a message including for example data requested by the inverter array controller. If no reply is received from the non responsive inverter in block the relay inverter transmits an error message to the inverter array controller in block to inform the controller that the non responsive inverter has failed to reply to the relay inverter. However if a reply is received from the non responsive inverter the method advances to block in which the relay inverter retransmits the reply message received from the non responsive inverter to the inverter array controller . In this way non responsive inverter is capable of communicating with the inverter array controller via the relay inverter .

It should be appreciated that although the methods and have been described above with regard to DC to AC power inverters the concepts described therein are equally applicable to DC to DC and AC to DC converters. That is although the power line communication is carried by the power line cable the power line communication has a signal frequency e.g. about 110 kHz different from the AC power line frequency which is typically 50 Hz or 60 Hz. As such the techniques described above can be implemented on a system in which the power line frequency has a different frequency from the power line communication including for example a frequency of about 0 Hz e.g. embodiments in which the converters generate a DC output . Similar to AC output systems such DC output systems may also exhibit communication nulls based on the circuit characteristics the configuration of the converters and other factors.

While the concepts of the present disclosure have been illustrated and described in detail in the drawings and foregoing description such an illustration and description is to be considered as exemplary and not restrictive in character it being understood that only illustrative embodiments have been shown and described and that all changes and modifications consistent with the disclosure and recited claims are desired to be protected.

