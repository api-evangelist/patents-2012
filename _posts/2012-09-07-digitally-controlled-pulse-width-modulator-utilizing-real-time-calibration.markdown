---

title: Digitally controlled pulse width modulator utilizing real time calibration
abstract: A system and method for controlling pulse width for electronic devices in real time is disclosed. The system includes a Digital Pulse Width Modulator (DPWM), a real time calibration circuit and a delay line circuit. The real time calibration circuit is configured to ensure proper fractional delay is applied to yield correct duty cycle of the DPWM. The delay line circuit comprising a multiplexer delay line with built in decoders, modulates the pulse width for fractional clock cycle delay.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08803579&OS=08803579&RS=08803579
owner: BAE Systems Information and Electronic Systems Integration Inc.
number: 08803579
owner_city: Nashua
owner_country: US
publication_date: 20120907
---
The invention was made with United States Government assistance under contract no. 08 C 0295 CLIN 0002 awarded by the Department of Defense National Reconnaissance Office. The United States Government has certain rights in the invention.

This Application claims rights under 35 USC 119 e from U.S. Application Ser. No. 61 532 204 filed Sep. 8 2011 the contents of which are incorporated herein by reference.

Embodiments are generally related to Pulse Width Modulators PWM . Embodiments are particularly related to Digital Pulse Width Modulator DPWM for controlling pulse width in electronic devices. Embodiments are additionally related to digital pulse width modulators with continuous real time calibration.

Power management to improve the power efficiency of Micro Processing Unit MPUs Field Programmable Gate Array FPGAs and Digital Signal Processor DSPs and the like has become a vital element in digital system design. The power management system includes a full operation mode standby mode and sleep mode. The clock frequency core voltage and or core current are changed in each mode accordingly. As a result the output current of the Point Of Load POL DC DC converters is intermittent and has a high slew rate. A low output voltage a large output current and a high speed response are required for the POL. In such a condition control circuits with high accuracy and high speed are required as the tolerance of the output voltage becomes internally severe for speed and lower voltage of the Micro Processor Units MPUs Field Programmable Gate Arrays FPGAs and Digital Signal Processors DSPs . A general control method is pulse width modulation PWM control with Proportional Integral Derivative PID . Generally such control circuits are composed with analog circuits and or simple combination digital circuits.

Robustness or flexible controls for versatile conditions are demanded which cannot be accomplished with analog control circuits. For the control purpose DPWM control is a one of appropriate technique. Also current analog comparator methods for pulse width modulation are not programmable and may not be calibrated.

DPWM have technical limitations mainly associated with delay related with the sampling process and discrete time computation. There is generally a tradeoff between the sampling and computation frequency and the controller power use. Thus it is beneficial to develop specialized analog to digital converter ADC architectures which can meet the voltage regulation requirements without excessive power consumption. Importantly applications requiring very high speed of response of order of 100 ns tend to be high power applications such as servers where the power overhead of a fast high resolution ADC s is negligible.

DPWM requires high resolution to produce tightly regulated output voltages and for elimination of undesirable limit cycle oscillations of output voltage and inductor current thus may not be able to provide real time calibration.

The following summary is provided to facilitate an understanding of some of the innovative features unique to the disclosed embodiment and is not intended to be a full description. A full appreciation of the various aspects of the embodiments disclosed herein can be gained by taking the entire specification claims drawings and abstract as a whole.

It is another aspect of the disclosed embodiments to provide Digital Pulse Width Modulator DPWM for controlling pulse width in electronic devices.

It is a further aspect of the disclosed embodiments to provide digital pulse width modulators with continuous real time calibration.

It is another aspect of the disclosed embodiments to provide a low power digitally controlled pulse modulator that utilizes various sized delay lines and allows digital filtering and programmable resolution.

It is yet another aspect of the disclosed embodiments to provide a digitally controlled pulse modulator that performs digital pulse width modulation with real time calibration to compensate environmental variations due to radiation aging temperature and voltage changes.

The aforementioned aspects and other objectives and advantages can now be achieved as described herein. A system and method for controlling pulse width for electronic devices in real time is disclosed. The system includes a Digital Pulse Width Modulator DPWM a real time calibration circuit and a delay line circuit. The real time calibration circuit is configured to ensure proper fractional delay is applied to yield correct duty cycle of the DPWM. The delay line circuit modulates the pulse width for fractional clock cycle delay. The delay line circuit comprises a multiplexer delay line with built in decoders.

The particular values and configurations discussed in these non limiting examples can be varied and are cited merely to illustrate at least one embodiment and are not intended to limit the scope thereof.

Referring to a schematic diagram of a DPWM system connected to gate drivers is disclosed. The input voltage in the range of 2.97 Volts to 3.6 Volts is applied to a power MOSFET . The input voltage is monitored by utilizing a telemetry unit . The power MOSFET is driven by the gate drivers which are controlled by a DPWM . The DPWM receives control signals and from Over Voltage Protection OVP circuit and Over Current Protection OCP circuit .

A voltage scaler receives the output voltage and generates a voltage depending on the signal from a calibration unit . The voltage is converted to a digital signal by utilizing an Analog to Digital Converter ADC . The digital signal from ADC and reference signal from reference circuit are compared in a comparator . The error signal is given to Proportional Integral Derivative PID controller to generate a control signal for the DPWM . The DPWM generates a duty cycle pulse based on the control signal which drives the gate drivers . The DPWM provides dead time control between the high side and low side of the device for the internal gate driver with power MOSFET . The dead time control can also be provided to an external gate driver and FETs. The digital control unit provides necessary control and status signal to various devices in Point of Common Coupling PCC . The house keeping supply provide necessary voltage to reference circuit . Point Of Load POL is shown.

Referring to a top level block diagram of the DPWM is shown. Fifty percent duty cycle clock is generated by fifty percent duty cycle clock generation block by utilizing PWM rate and clock such that the period of the fifty percent duty cycle clock is multiples of twice the period of clock . A delay is calculated based on duty cycle by utilizing a delay calculator . The delay calculation is based on the desired duty cycle and decision on how much to delay the fifty percent clock Delay block consists of a cycle delay unit which provides delay for the amount of clock periods and fractional delay unit which provides delay for the amount of fractions of clock period. The fifty percent duty cycle clock is fed to delay block and fed directly without delay to OR gate as well to AND gate . Delay information from delay calculator is fed to cycle delay unit . Fractional delay calculation from delay calculator is fed to fractional delay unit . The output of delay block is fed to AND gate as well to OR gate . The output of AND gate and output of OR gate is fed to multiplexer unit . Based on the information from delay calculator if desired duty cycle is greater than fifty percent signal then output path is selected otherwise output path is selected by the multiplexer unit . The output of multiplexer unit is desired duty out with coarse delay or fine delay depending on output path selected.

Referring to timing diagrams and for duty cycle greater than fifty percent and less than fifty percent are shown. For duty cycle greater than fifty percent the graphs and represents the timing diagrams of the outputs and depicted in . For duty cycle less than fifty percent the graphs and represents the timing diagrams of the signals and depicted in .

Referring to a second top level block diagram of the DPWM is shown. The block diagram is with cycle delay unit in addition to the delay elements referred in . For generation of Fifty percent duty cycle clock in addition to the PWM rate and clock PWM synchronization signal which specifies beginning of PWM cycle is also provided and generated fifty percent duty cycle clock is fed to cycle delay unit . Using PWM rate and reference phase delay amount by which phase of PWM output to be delayed is calculated by phase delay calculator . The cycle delay unit is used to provide phase delay of cycle portion to the fifty percent duty cycle clock by utilizing phase delay calculation obtained from phase delay calculator . The information from phase delay calculator is also utilized for providing percentage of cycle portion phase delay to the selected output of multiplexer .

Referring to the timing diagram for duty cycle less than fifty percent is shown. For duty cycle less than fifty percent the graphs and represents the timing diagrams of the signals and depicted in .

Referring to the programmable high resolution delay line circuit of is shown. The programmable high resolution delay line circuit is also referred as the delay block in . Fifty percent duty cycle clock output is given as input to a delay block depicted in which provides delay out . Fifty percent duty cycle clock output after phase delay is given as input to a delay block depicted in which provides delay out . The delay block allows for the modulation of the pulse width for fractional clock cycle delay. For larger delay the upper delay section is selected by utilizing upper delay select block . For medium delay the lower delay section is selected by utilizing lower delay select block . For very fine resolution delay the fine delay section is selected by utilizing fine delay select block . The upper delay section comprises of multiplexers each of them typically provides delay in order of one nano seconds. The lower delay section comprises of multiplexers each of them typically provides delay in order of 100 pica seconds. The fine delay section comprises of transistor switches each of them typically provides fine amount of delay. shows a schematic block diagram of a set of multiplexer delay lines with built in Most Significant Bit MSB and Least Significant Bit LSB decoders and .

Referring to a real time calibration unit depicted in is shown. A reset counter is utilized to count the system clock to generate a reference time . The reference time is fed to a state machine calculator . The ring oscillator generates a clock signal based on the reference time and compares the generated clock with the system clock . The compared clock is counted by utilizing a counter which is fed to the state machine calculator . The state machine calculator determines delay characterization data by running a ring oscillator with different delays. The delay characterization data is used as unit delays in DPWM. This delay chain calibration used to ensure that proper fractional delay is applied to yield correct duty cycle of the output of the Digital Pulse Width Modulator.

Referring to a delay chain calibration algorithm is shown. The algorithm selects appropriate delay code for necessary delay. Also the algorithm ensures that at real time the device corrects for any given voltage temperature radiation and aging conditions. Delay line is used as oscillator and calibration is performed in background parallel with normal POC PCC operation.

The algorithm is used in conjunction with the existing circuitry and the fractional high precision delay line to calibrate the delay line across the environmental conditions so that proper delay is applied to the pulse output. Without this real time calibration the fractional delay would vary with temperature voltage radiation and aging conditions.

While the present invention has been described in connection with the preferred embodiments of the various figures it is to be understood that other similar embodiments may be used or modifications and additions may be made to the described embodiment for performing the same function of the present invention without deviating therefrom. Therefore the present invention should not be limited to any single embodiment but rather construed in breadth and scope in accordance with the recitation of the appended claims.

