---

title: Determining maximum bandwidth in a mixed version MoCA deployment
abstract: A method, performed by a computer device, may include identifying Multimedia over Coaxial Alliance nodes associated with a customer's network; querying particular pairs of the identified Multimedia over Coaxial Alliance nodes for physical rates to obtain reported physical rates for the particular pairs of the identified Multimedia over Coaxial Alliance nodes; and querying particular ones of the identified Multimedia over Coaxial Alliance nodes for supported Multimedia over Coaxial Alliance versions. The method may further include determining a maximum bandwidth for the customer's network based on the reported physical rates and based on the supported Multimedia over Coaxial Alliance versions.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08737430&OS=08737430&RS=08737430
owner: Verizon Patent and Licensing Inc.
number: 08737430
owner_city: Basking Ridge
owner_country: US
publication_date: 20120413
---
A customer may have multiple multimedia devices in the customer s home. The multimedia devices may be connected with coaxial cables and multimedia content may be sent or received over the coaxial cables based on the Multimedia over Coaxial Alliance MoCA standard. The MoCA standard may include different versions and different multimedia devices in the customer s home may support different versions of the MoCA standard. Management of resources in a network which includes devices associated with different MoCA versions may be challenging.

The following detailed description refers to the accompanying drawings. The same reference numbers in different drawings identify the same or similar elements.

An implementation described herein may relate to determining a maximum bandwidth in a mixed version Multimedia over Coaxial Alliance MoCA deployment. MoCA versions 1.1 and 2.0 may support parameterized Quality of Service QoS which may allow a server to reserve bandwidth between the server and an Internet Protocol IP client endpoint on a MoCA connection for sending multimedia streams. In a deployment of a network where the server providing a multimedia stream is on a MoCA medium and the IP client endpoint receiving the multimedia stream is on a non MoCA medium e.g. Ethernet or Wifi it may be necessary to use an admission and control algorithm to prevent over subscription of multimedia streams on the network.

Signal flow may include user device sending a user selection to MoCA node signal . For example a user may select a particular television channel on a set top box. MoCA node may request a video stream from VMS signal and VMS may check for bandwidth availability item . If VMS determines that there is available bandwidth VMS may request bandwidth for the requested video stream from bandwidth broker signal . Bandwidth broker may run a bandwidth allocation algorithm to reserve requested bandwidth item and may send an acknowledgement of the bandwidth reservation to VMS signal . Once VMS confirms that the bandwidth has been reserved VMS may start sending the requested video stream to MoCA node signal .

VMS may keep sending keep alive messages to bandwidth broker while the video stream is being sent to MoCA node to ensure the bandwidth remains reserved signal . When VMS detects the end of the stream item VMS may send a request to bandwidth broker to free up the reserved bandwidth signal . In response bandwidth broker may run an algorithm to free up the bandwidth item and may send an acknowledgement to VMS that the bandwidth has been freed up signal .

Although shows exemplary signals of signal flow in other implementations signal flow may include fewer signals different signals differently arranged signals or additional signals than depicted in .

Thus bandwidth broker may keep track of the bandwidth usage in the network and may maintain information about the total available bandwidth. When a server wants to send a multimedia stream to another IP endpoint in the network the server may request the required bandwidth for the multimedia stream from bandwidth broker . Bandwidth broker may accept or deny the request based on the available bandwidth. In order for bandwidth broker to implement an admission and control algorithm to accept or deny requests for bandwidth bandwidth broker may need to be able to determine the maximum available bandwidth per interface type. In a customer premises network the interface types may include an Ethernet interface type a WiFi interface type and a MoCA interface type. Computation of the maximum bandwidth for a MoCA interface may be complicated by the fact that different version of MoCA may support different bandwidths. In a network where two different MoCA nodes are associated with different supported MoCA versions e.g. a digital video recorder DVR that supports MoCA version 1.1 and a set top box that supports MoCA version 2.0 the maximum bandwidth may be the lower value of the maximum bandwidth supported by each of the two MoCA nodes. However computation of the maximum bandwidth may not scale up and may be difficult to implement in a home router that manages a customer premises network.

An implementation described herein may include identifying MoCA nodes associated with a customer s network obtaining reported physical rates for pairs of the identified MoCA nodes obtaining a supported MoCA version for each of the identified MoCA nodes and generating a table of all pairs of the identified MoCA nodes. A normalized physical rate for each of the pairs in the table may be determined by applying a normalized ratio associated with the two MoCA versions of the two nodes in a pair of nodes to the reported physical rate of the pair of nodes in the pair of nodes. The maximum bandwidth for the customer s network may be determined based on the minimum normalized physical rate for the pairs in the table.

Content provider may include one or more devices such as server devices that provide content to head end . For example content provider may include free television broadcast providers e.g. local broadcast providers such as NBC CBS ABC and or Fox for pay television broadcast providers e.g. TNT ESPN HBO Cinemax CNN etc. a server device associated with an online multimedia game and or Internet based content providers e.g. Youtube Vimeo Netflix Hulu Veoh etc. that stream content from web sites and or permit content to be downloaded e.g. via progressive download etc. .

Head end may include one or more devices such as server devices that ingest content store content format content and or deliver content to customer premises . For example head end may provide television channels including content received from content providers and or multimedia streams from other sources to customer premises . Furthermore head end may provide Internet Protocol IP connectivity to customer premises and may enable customer premises to send and or receive data to or from another device across an IP network not shown in .

Customer premises may include a particular location or multiple locations associated with a customer. For example customer premises may include the customer s home. Customer premises may include one or more MoCA nodes A to N referred to herein collectively as MoCA nodes and individually as MoCA node a home router an Ethernet device and a WiFi device .

Home router may receive content from head end via a connection such as for example via a fiber optic cable connection a coaxial cable connection a twisted pair connection a wireless connection and or another type of connection. Furthermore home router may send information from a device associated with customer premises to head end . In one implementation home router may include an optical network terminal ONT and head end may form part of a high speed fiber optic network. In another implementation home router may include a cable modem. In yet another implementation home router may include a fixed wireless transceiver. Additionally or alternatively home router may include a layer 2 and or layer 3 network device such as a switch router firewall and or gateway. Customer premises may receive one or more services via the connection between home router and head end such as for example a television service Internet service and or voice communication e.g. telephone service.

Home router may support different types of interfaces such as an Ethernet interface a WiFi interface and or a MoCA interface. Home router may manage the available bandwidth for customer premises . In order to manage the available bandwidth home router may need to determine a maximum bandwidth for each interface type. Furthermore home router may include a MoCA node.

MoCA node may include one or more devices configured to receive content such as a multimedia stream or data communication over coaxial cables based on a MoCA standard. As an example MoCA node may include a set top box that receives content such as television content from head end and output the content to a television. As another example MoCA node may include a television device a media server device a computer device a digital video recorder DVR and or a gaming console.

Ethernet device may include one or more devices that connect to home router via an Ethernet interface. For example Ethernet device may include a personal computer or another device with Ethernet connectivity. WiFi device may include one or more devices that connect to home router via a WiFi interface. For example WiFi device may include a WiFi access point e.g. a wireless router .

Although shows exemplary components of environment in other implementations environment may include fewer components different components differently arranged components or additional components than depicted in . Additionally or alternatively one or more components of environment may perform functions described as being performed by one or more other components of environment .

Bus may include a path that permits communication among the components of device . Processor may include any type of single core processor multi core processor microprocessor latch based processor and or processing logic or families of processors microprocessors and or processing logics that interprets and executes instructions. In other embodiments processor may include an application specific integrated circuit ASIC a field programmable gate array FPGA and or another type of integrated circuit or processing logic.

Memory may include any type of dynamic storage device that may store information and or instructions for execution by processor and or any type of non volatile storage device that may store information for use by processor . For example memory may include a random access memory RAM or another type of dynamic storage device a read only memory ROM device or another type of static storage device a content addressable memory CAM a magnetic and or optical recording memory device and its corresponding drive e.g. a hard disk drive optical drive etc. and or a removable form of memory such as a flash memory.

Input device may allow an operator to input information into device . Input device may include for example a keyboard a mouse a pen a microphone a remote control an audio capture device an image and or video capture device a touch screen display and or another type of input device. In some embodiments device may be managed remotely and may not include input device . In other words device may be headless and may not include a keyboard for example.

Output device may output information to an operator of device . Output device may include a display a printer a speaker and or another type of output device. For example device may include a display which may include a liquid crystal display LCD for displaying content to the customer. In some embodiments device may be managed remotely and may not include output device . In other words device may be headless and may not include a display for example.

Communication interface may include a transceiver that enables device to communicate with other devices and or systems via wireless communications e.g. radio frequency infrared and or visual optics etc. wired communications e.g. conductive wire twisted pair cable coaxial cable transmission line fiber optic cable and or waveguide etc. or a combination of wireless and wired communications. Communication interface may include a transmitter that converts baseband signals to radio frequency RF signals and or a receiver that converts RF signals to baseband signals. Communication interface may be coupled to an antenna for transmitting and receiving RF signals.

Communication interface may include a logical component that includes input and or output ports input and or output systems and or other input and output components that facilitate the transmission of data to other devices. For example communication interface may include a network interface card e.g. Ethernet card for wired communications and or a wireless network interface e.g. a WiFi card for wireless communications. Communication interface may also include a universal serial bus USB port for communications over a cable a Bluetooth wireless interface a radio frequency identification RFID interface a near field communications NFC wireless interface and or any other type of interface that converts data from one form to another form.

As will be described in detail below device may perform certain operations relating to determining a maximum bandwidth in a mixed version MoCA deployment. Device may perform these operations in response to processor executing software instructions contained in a computer readable medium such as memory . A computer readable medium may be defined as a non transitory memory device. A memory device may be implemented within a single physical memory device or spread across multiple physical memory devices. The software instructions may be read into memory from another computer readable medium or from another device. The software instructions contained in memory may cause processor to perform processes described herein. Alternatively hardwired circuitry may be used in place of or in combination with software instructions to implement processes described herein. Thus implementations described herein are not limited to any specific combination of hardware circuitry and software.

Although shows exemplary components of device in other implementations device may include fewer components different components additional components or differently arranged components than depicted in . Additionally or alternatively one or more components of device may perform one or more tasks described as being performed by one or more other components of device .

MoCA query module may obtain information about MoCA nodes . For example MoCA query module may identify MoCA nodes connected to home router and may query a particular MoCA node for a reported physical rate. The reported physical rate may correspond to a rate at which MoCA node may receive data from home router . The reported physical rate may be measured for example in megabits per second mbps . Furthermore MoCA query module may query a particular MoCA node for a MoCA version supported by the particular MoCA node. For example the particular MoCA node may support MoCA version 1.1 MoCA version 2.0 or a future version of MoCA e.g. MoCA 3.0 .

MoCA node table may store information about pairs of MoCA nodes . Exemplary information that may be stored in MoCA table is described below with reference to .

Bandwidth computation module may compute a maximum bandwidth for customer premises based on MoCA nodes . For example bandwidth computation module may generate MoCA node table which may include pairs of MoCA nodes including home router as one of the MoCA nodes based on information obtained from MoCA query module . Bandwidth computation module may determine a normalized physical rate for each of the pairs in the table and may determine the maximum bandwidth for the customer s network based on the minimum normalized physical rate for the pairs in the table.

Although shows exemplary functional components of home router in other implementations home router may include fewer functional components different functional components differently arranged functional components or additional functional components than depicted in . Additionally or alternatively one or more functional components of home router may perform functions described as being performed by one or more other functional components of home router .

MoCA node pair entry may identify a particular pair of MoCA nodes . Physical rate entry may store information about a reported physical rate associated with the particular pair of MoCA nodes . The reported physical rate may correspond to the measured physical bit rate between the first Moca node of the particular pair and the second MoCA node of the particular pair.

MoCA versions entry may store information about the supported MoCA version of each of the two MoCA nodes in the particular pair. For example MoCA version entry may indicate that both MoCA nodes of the particular pair support MoCA version 1.1 that one MoCA node of the particular pair supports MoCA version 1.1 and that the other MoCA node of the particular pair supports MoCA version 2.0 that both MoCA nodes of the particular pair support MoCA version 2.0 or that one or both of the MoCA nodes of the particular pair support another MoCA version e.g. MoCA version 3.0 .

Normalized physical rate entry may include information about a normalized physical rate associated with the particular pair of MoCA nodes . The normalized physical rate may be determined by multiplying the reported physical rate by a normalization ratio. The normalization ratio may be based on a ratio of the theoretical maximum bandwidth associated with the supported MoCA versions for the two MoCA nodes of the particular pair.

Although shows exemplary components of MoCA node table in other implementations MoCA node table may include fewer components different components differently arranged components or additional components than depicted in .

The process of may include identifying MoCA nodes block . For example MoCA query module may identify MoCA node when MoCA node is connected to home router via a MoCA interface and when MoCA node identifies itself with a MoCA identifier ID . Each identified MoCA node pair may be queried for a physical rate block . For example MoCA query module may use a physical rate query application programming interface API to determine the physical rate between each pair of MoCA nodes from the identified MoCA nodes. Each identified MoCA node may be queried for the supported MoCA version block . For example MoCA query module may send a query to each of the identified MoCA nodes to identify the MoCA version supported by each of the identified MoCA nodes.

A MoCA node table may be generated for each pair of MoCA nodes block . For example bandwidth computation module may generate MoCA node table wherein MoCA node table includes an entry for each pair of Moca nodes of the identified MoCA nodes. A normalized physical rate for each pair of MoCA nodes may be determined based on the supported MoCA versions associated with the pair of MoCA nodes and based on the reported physical rate for the pair of MoCA nodes block . A process for determining a normalized physical rate for a pair of MoCA nodes is described below with reference to .

A minimum physical rate may be determined based on the normalized physical rates block . For example bandwidth computation module may select the lowest of the normalized physical rates as the minimum physical rate. A maximum bandwidth may be determined based on the determined minimum physical rate block . For example bandwidth computation module may select a particular percentage e.g. 80 percent of the determined minimum physical rate as the maximum bandwidth for the MoCA interface. The remaining bandwidth of the determined minimum physical rate may be reserved for MoCA interface management for bandwidth variation due to environmental variations and or for other factors.

The process of may include determining a theoretical maximum bandwidth for each MoCA version block . For example each particular MoCA version may be associated with a theoretical maximum bandwidth based on the particular MoCA version specification. A higher MoCA version may be associated with a higher theoretical maximum bandwidth. For example MoCA version 1.1 may be associated with a theoretical maximum bandwidth of 175 Megabits per second and MoCA version 2.0 may be associated with a theoretical maximum bandwidth of 700 Megabits per second. A future MoCA version may be associated with a theoretical maximum bandwidth that is higher than 700 Megabits per second.

A normalized ratio NR for a pair of MoCA nodes for each pair of nodes may be determined based on the highest theoretical maximum bandwidth associated with a MoCA version supported by a MoCA node in the network and based on the lowest theoretical maximum bandwidth associated with one of the MoCA nodes in a pair of MoCA nodes block .

For example in a network that includes MoCA nodes supporting MoCA version 1.1 and MoCA nodes supporting MoCA version 2.0 the highest supported MoCA version may be MoCA version 2.0 and the normalized ratios may be based on MoCA version 2.0. Since MoCA version 1.1 may take twice the time on the wire to transmit the same amount of data as MoCA version 2.0 the normalization ratio may be 2 for a pair of MoCA nodes in which one of the MoCa nodes supports MoCA version 1.1 and the normalization ratio may be 1 for a pair of MoCA nodes with both MoCA nodes supporting MoCA version 2.0.

Generalizing this concept assume three supported MoCA versions for MoCA nodes in customer premises MoCA version 1.1 MoCA version 2.0 and a future version of MoCA e.g. MoCA version 3.0 and assume a theoretical maximum bandwidth x for MoCA version 1.1 a theoretical maximum bandwidth y for MoCA version 2.0 and a theoretical maximum bandwidth z for the future MoCA version.

The normalized ratio for a pair of MoCA nodes may correspond to NR z x for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is MoCA version 1.1 NR z y for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is MoCA version 2.0 and NR z z for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is the future MoCA version.

A normalized physical rate may be determined for a pair of MoCA nodes based on the normalized ratio for the pair of MoCA nodes and based on the reported physical rate for the pair of MoCA nodes block . The normalized ratio for a pair of MoCA nodes may be multiplied by the reported physical rate for the pair of MoCA nodes to generate the normalized physical rate for the pair of MoCA nodes. For example the normalized physical rate for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is MoCA version 1.1 may be NRtimes the reported physical rate for the pair of MoCA nodes the normalized physical rate for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is MoCA version 2.0 may be NRtimes the reported physical rate for the pair of MoCA nodes and the normalized physical rate for a pair of MoCA nodes wherein the lowest MoCA version associated with one of the MoCA nodes in the pair of MoCA nodes is a future MoCA version may be NRtimes the reported physical rate for the pair of MoCA nodes.

The process of may include detecting a request for a multimedia stream from a MoCA node block . For example home router may detect a request from a media server corresponding to MoCA node to stream an on demand movie. A determination may be made that the maximum bandwidth would be exceeded if the multimedia stream were to be opened or downloaded block . For example bandwidth broker may determine the maximum bandwidth for a MoCA interface based on a determination made by bandwidth computation module . Bandwidth broker may determine the current bandwidth use and may determine whether the additional reserved bandwidth for the requested multimedia stream would exceed the maximum bandwidth. For example a first user at customer premises may be watching a television program via a set top box corresponding to a first MoCA node and a second user may be playing an online game via a gaming console corresponding to a second MoCA node . Adding the requested multimedia stream may exceed the determined maximum bandwidth for the MoCA interface of home router .

An indication may be provided to the MoCA node which requested the multimedia stream that the maximum bandwidth would be exceeded if the multimedia stream were to be opened or otherwise provided block . For example bandwidth broker of home router may send a visual and or audio message to be outputted by the requesting MoCA node indicating to the user that the maximum bandwidth would be exceeded. The indication may include an advice to the user to close one of the other existing MoCA streams to free up some bandwidth.

Bandwidth computation module may generate MoCA node table for all possible pairs of the Moca nodes. Physical rates field may store the reported physical rate for each pair of MoCA nodes in Megabits per second. For example the lowest reported physical rate may be between MoCA node A and MoCA node E and the highest reported physical rate may be between MoCA node B and MoCA node C.

Bandwidth computation module may determine a normalized physical rate for each pair. The highest supported MoCA version in example may be MoCA version 2.0 and thus the normalized physical rate may be based on normalization ratios based on MoCA version 2.0. The normalized physical rates may be determined for the pairs of MoCA nodes as 400 400 400 350 400 350 400 325 400 and 440 Megabits per second respectively. Thus the minimum physical rate may be selected as 325 Megabits per second. The maximum bandwidth for the MoCA interface may be selected as 80 of the minimum physical rate namely 260 Megabits per second.

In the preceding specification various preferred embodiments have been described with reference to the accompanying drawings. It will however be evident that various modifications and changes may be made thereto and additional embodiments may be implemented without departing from the broader scope of the invention as set forth in the claims that follow. The specification and drawings are accordingly to be regarded in an illustrative rather than restrictive sense.

For example while series of blocks have been described with respect to the order of the blocks may be modified in other implementations. Further non dependent blocks may be performed in parallel.

It will be apparent that systems and or methods as described above may be implemented in many different forms of software firmware and hardware in the implementations illustrated in the figures. The actual software code or specialized control hardware used to implement these systems and methods is not limiting of the embodiments. Thus the operation and behavior of the systems and methods were described without reference to the specific software code it being understood that software and control hardware can be designed to implement the systems and methods based on the description herein.

Further certain portions described above may be implemented as a component that performs one or more functions. A component as used herein may include hardware such as a processor an ASIC or a FPGA or a combination of hardware and software e.g. a processor executing software .

It should be emphasized that the terms comprises comprising when used in this specification are taken to specify the presence of stated features integers steps or components but does not preclude the presence or addition of one or more other features integers steps components or groups thereof.

No element act or instruction used in the present application should be construed as critical or essential to the embodiments unless explicitly described as such. Also as used herein the article a is intended to include one or more items. Further the phrase based on is intended to mean based at least in part on unless explicitly stated otherwise.

