---

title: Object selection in an image
abstract: Illustrative embodiments of methods, machine-readable media, and computing devices allowing object selection in an image are disclosed. In some embodiments, a method may include detecting one or more features of an object in a machine-readable image file, simulating an electrostatic charge distribution by assigning a virtual point charge to each of the one or more detected features, determining a virtual electric potential field resulting from the simulated electrostatic charge distribution, and selecting a portion of the object in the machine-readable image file that is bounded by an equipotential line in the virtual electric potential field.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09232154&OS=09232154&RS=09232154
owner: Intel Corporation
number: 09232154
owner_city: Santa Clara
owner_country: US
publication_date: 20120125
---
The recognition and selection of objects in images present challenging problems in the computational photography area. Systems and methods configured to select an object in an image based on the object s features of interest may significantly improve the effectiveness of image editing software as well as its user experience. For instance selecting an image area containing an object s features of interest while avoiding selecting an unnecessarily large image area containing unwanted image artifacts may allow the object to be copied and pasted into another image in a seamless manner. In particular systems and methods configured to select an object in an image based on the object s features of interest may allow the user of a mobile computing device to perform on the fly editing of images captured by a camera of the mobile computing device.

Current image editing systems typically use a graph cut method to select an object in an image. Graph cut methods generally attempt to separate an object of interest in an image from the background of the image by determining the similarity or dissimilarity of each pixel from its neighboring pixels and selecting an image area bounded by a line drawn between the most dissimilar pixels. When selecting certain types of objects in images e.g. a human face such graph cut methods often select an unnecessarily large image area containing unwanted image artifacts e.g. background pixels geometric artifacts etcetera .

While the concepts of the present disclosure are susceptible to various modifications and alternative forms specific exemplary embodiments thereof have been shown by way of example in the drawings and will herein be described in detail. It should be understood however that there is no intent to limit the concepts of the present disclosure to the particular forms disclosed but on the contrary the intention is to cover all modifications equivalents and alternatives consistent with the present disclosure and appended claims.

In the following description numerous specific details such as logic implementations opcodes means to specify operands resource partitioning sharing duplication implementations types and interrelationships of system components and logic partitioning integration choices are set forth in order to provide a more thorough understanding of the present disclosure. It will be appreciated however by one skilled in the art that embodiments of the disclosure may be practiced without such specific details. In other instances control structures gate level circuits and full software instruction sequences have not been shown in detail in order not to obscure the invention. Those of ordinary skill in art with the included descriptions will be able to implement appropriate functionality without undue experimentation.

References in the specification to one embodiment an embodiment an example embodiment etcetera indicate that the embodiment described may include a particular feature structure or characteristic but every embodiment may not necessarily include the particular feature structure or characteristic. Moreover such phrases are not necessarily referring to the same embodiment. Further when a particular feature structure or characteristic is described in connection with an embodiment it is submitted that it is within the knowledge of one skilled in the art to effect such feature structure or characteristic in connection with other embodiments whether or not explicitly described.

Embodiments of the invention may be implemented in hardware firmware software or any combination thereof. Embodiments of the invention implemented in a computing device may include one or more bus based or link based interconnects between components and or one or more point to point interconnects between components. Embodiments of the invention may also be implemented as instructions carried by or stored on one or more machine readable media which may be read and executed by one or more processors. A machine readable medium may be embodied as any device mechanism or physical structure for storing or transmitting information in a form readable by a machine e.g. a computing device . For example a machine readable medium may be embodied as read only memory ROM random access memory RAM magnetic disk storage media optical storage media flash memory devices mini or micro SD cards memory sticks electrical signals and others.

In the drawings specific arrangements or orderings of schematic elements such as those representing devices modules instruction blocks and data elements may be shown for ease of description. However it should be understood by those skilled in the art that the specific ordering or arrangement of the schematic elements in the drawings is not meant to imply that a particular order or sequence of processing or separation of processes is required. Further the inclusion of a schematic element in a drawing is not meant to imply that such element is required in all embodiments or that the features represented by such element may not be included in or combined with other elements in some embodiments.

In general schematic elements used to represent instruction blocks may be implemented using any suitable form of machine readable instruction such as software or firmware applications programs functions modules routines processes procedures plug ins applets widgets code fragments and or others and that each such instruction may be implemented using any suitable programming language library application programming interface API and or other software development tools. For example some embodiments may be implemented using Java C and or other programming languages. Similarly schematic elements used to represent data or information may be implemented using any suitable electronic arrangement or structure such as a register data store table record array index hash map tree list graph file of any file type folder directory database and or others.

Further in the drawings where connecting elements e.g. solid or dashed lines or arrows are used to illustrate a connection relationship or association between or among two or more schematic elements the absence of any such connecting elements is not meant to imply that no connection relationship or association can exist. In other words some connections relationships or associations between elements may not be shown in the drawings so as not to obscure the disclosure. In addition for ease of illustration a single connecting element may be used to represent multiple connections relationships or associations between elements. For example where a connecting element represents a communication signals data or instructions it should be understood by those skilled in the art that such element may represent one or multiple signal paths e.g. a bus as may be needed to effect the communication.

The present disclosure generally relates to systems and methods for selecting an object in a machine readable image file based on the object s features of interest. By the term image the present disclosure refers both to still images and to videos which it will be appreciated comprise a series of still images that may be processed in a similar manner and contemplates both two dimensional 2D and three dimensional 3D images and videos. The presently disclosed systems and methods may be used in a computing device such as the mobile computing device illustrated in by way of example. As described in more detail below with reference to the simplified flow diagram illustrated in the presently disclosed systems and methods involve detecting one or more features of an object in a machine readable image file and simulating an electrostatic charge distribution by assigning a virtual point charge to each of the one or more detected features. A virtual electric potential field resulting from the simulated electrostatic charge distribution may then be determined using a Poisson solver by way of example . After determining the virtual electric potential field a portion of the object in the machine readable image file may be selected using an equipotential line in the virtual electric potential field. The presently disclosed systems and methods will be further described with reference to several illustrative embodiments of images containing a human face as shown in .

Referring now to one illustrative embodiment of a computing device that may select an object in a machine readable image file is shown as a simplified block diagram. The computing device may be embodied as any type of electronic device capable of performing the functions described herein. By way of example the computing device may be embodied as a personal computer a workstation a laptop computer a handheld computer a mobile internet device a cellular phone a personal data assistant a telephony device a network appliance a virtualization device a storage controller or other computer based device. In the illustrative embodiment shown in the computing device is embodied as a mobile computing device e.g. a mobile internet device including a processor an I O subsystem a system memory an image co processor a camera and communication circuitry . The computing device may also optionally include one or more peripheral devices and one or more data storage devices . Furthermore it should be appreciated that the computing device may include other components sub components and devices commonly found in a computer and or computing device which are not illustrated in for clarity of the description.

The processor of the computing device may be any type of processor capable of executing software firmware such as a microprocessor digital signal processor microcontroller or the like. It is contemplated that the processor may be embodied as a single core processor or as a multi core processor. The processor functions as a primary processor or central processing unit of the computing device and is generally responsible for executing a software stack which may include an operating system and various applications programs libraries and drivers resident on the computing device .

The processor is communicatively coupled to the I O subsystem via a number of signal paths. These signal paths and other signal paths illustrated in may be embodied as any type of signal paths capable of facilitating communication between the components of the computing device . For example the signal paths may be embodied as any number of wires cables light guides printed circuit board traces via bus intervening devices and or the like. The I O subsystem of the computing device may be embodied as circuitry and or components to facilitate input output operations with the processor and or outer components of the computing device . In some embodiments the I O subsystem may be embodied as a memory controller hub MCH or northbridge an input output controller hub ICH or southbridge and a firmware device. In other embodiments I O subsystems having other configurations may be used. For example in some embodiments the I O subsystem may be embodied as a platform controller hub PCH . In such embodiments the memory controller hub MCH may be incorporated in or otherwise associated with the processor and the processor may communicate directly with the system memory as shown by the hashed line in . In still other embodiments the I O subsystem may form a portion of a system on a chip SoC and be incorporated along with the processor and other components of the computing device on a single integrated circuit chip.

The system memory of the computing device is also communicatively coupled to the I O subsystem via a number of signal paths. The system memory may be embodied as one or more memory devices or data storage locations including for example dynamic random access memory devices DRAM synchronous dynamic random access memory devices SDRAM double data rate synchronous dynamic random access memory device DDR SDRAM flash memory devices and or other volatile memory devices. Additionally although only a single system memory device is illustrated in in other embodiments the computing device may include additional system memory devices. In some embodiments the system memory may utilized as a shared memory that is accessible to additional processors of the computing device such as the image co processor .

The computing device also includes an image co processor that serves to off load image processing functions from the primary processor . The image co processor may be any type processor capable of executing software firmware such as a microprocessor digital signal processor microcontroller or the like. The image co processor is communicatively coupled to a camera of the computing device via a number of signal paths and receives machine readable image files including still images and or videos captured by the camera . As illustrated in the image co processor may also be communicatively coupled to the I O subsystem via a number of signal paths. In some embodiments the image co processor the primary processor and the I O subsystem may all be part of an SoC and be incorporated on a single integrated circuit chip.

The communication circuitry of computing device may be embodied as any number of devices and circuitry for enabling communications between the computing device and one or more networks not shown including but not limited to local area networks wide area networks publicly available global networks e.g. the Internet and or other networks. The communication circuitry may include one or more wired and or wireless network interfaces to facilitate communications over the wired and or wireless portions of these networks. Communication circuitry is also communicatively coupled to the I O subsystem via a number of signal paths.

The computing device may also optionally include one or more peripheral devices and one or more data storage devices . By way of illustrative example the peripheral device s may include a display a touchpad a touchscreen a keyboard a microphone and or one or more external speakers. The particular peripheral device s included in the computing device may depend upon for example the intended use of the computing device . The data storage device s may be illustratively embodied as any type of device configured for the short term or long term storage of data such as for example memory devices and circuits memory cards solid state drives hard disk drives or other data storage devices. When present the peripheral device s and the data storage device s are each communicatively coupled to the I O subsystem via a number of signal paths allowing the I O subsystem to receive inputs from and send outputs to the peripheral device s and or to the data storage device s .

Referring now to an illustrative embodiment of a method for selecting an object in a machine readable image file is shown as a simplified flow diagram. The method may be used to select any desired type of object from an image. For instance the method may be used to select a car a house an animal or any other object that is present in an image. The method is particularly well suited for selecting a human face in an image and the illustrative embodiment of method will be described below using the selection of a human face as an example with reference to . In the illustrative embodiment the method may be executed by the image co processor to select an object in an image captured by the camera and or in a machine readable image file retrieved from the system memory . It is also contemplated that in other embodiments the method may be performed by a multi purpose processor such as the processor for instance. The method is illustrated as a number of blocks in . Blocks and may be optionally employed in some embodiments of the method and are therefore indicated in phantom in .

The method begins with block in which the image co processor detects one or more features of an object machine readable image file. The one or more features detected by the image co processor in block may be any features of interest pertaining to the particular object to be selected. By way of example where the object to be selected by the method is a human face the image co processor may detect one or more facial features. One illustrative embodiment of an image including a human face is shown in . In this illustrative embodiment the human face includes several features that may be detected by the image co processor the centers of the eyes the corners of the mouth the nose and others. It is also contemplated that additional features of the human face e.g. the corners of the eyes the lips etcetera may be detected by the image co processor and or be used in the method .

During block the image co processor may detect the one or more features of the object using any suitable method for recognizing objects in a machine readable image file. In some embodiments the image co processor may detect the one or more features of the object by applying a cascade of classifiers based on Haar like feature to the machine readable image file. For instance the image co processor may apply the well known Viola Jones algorithm or a variant thereof. Where the size of an image is relatively large compared to the object to be selected the image co processor may iteratively use multiple classifiers to perform block . First the image co processor may use an appropriate classifier over the entire image to detect the object. Second the image co processor may use one or more appropriate classifiers over just the area of the object to detect the one or more features of interest. By way of example the Viola Jones algorithm may be applied to a relatively large image to detect the human face resulting in the smaller image shown in . Further classifiers may then be applied to the image to detect the centers of the eyes the corners of the mouth and the nose .

After block the method proceeds to block in which the image co processor simulates electrostatic charge distribution by assigning a virtual point charge to each of the one or more features of the object that were detected in block . In some embodiments the image co processor may apply virtual point charges to a plurality of features of the object but need not apply a virtual point charge to every detectable feature. As shown in by way of example the image co processor may apply virtual point charges to the centers of the eyes and the corners of the mouth detected in block but not to the nose or other features . The spacing of the virtual point charges in the simulated electrostatic charge distribution is thus determined by the relative locations of the relevant features in the image . Although all of the virtual point charges shown in are illustrated as having a positive charge it also contemplated that the simulated electrostatic charge distribution may additionally or alternatively comprise virtual point charges with negative charges.

In some embodiments of the method the block may optionally include block in which the image co processor weights the virtual point charge assigned to each of the one or more detected features in response to the pixel colors near each virtual point charge . In other words the image co processor may assign some virtual point charges greater or lesser charge values than other virtual point charges e.g. 1 coulomb 2 coulomb 3 coulomb etcetera . Virtual point charges with greater charge values will have a larger impact on the resulting electric potential field as compared to virtual point charges with lesser charge values. In embodiments of the method that do not include block each of the virtual point charges may have the same charge value e.g. 1 coulomb .

After block and optionally block the method proceeds to block in which the image co processor determines a virtual electric potential field resulting from the simulated electrostatic charge distribution. The image co processor may use any suitable method for calculating the electric potential field created by a particular electrostatic charge distribution i.e. the arrangement of virtual point charges assigned in block . In some embodiments of block the image co processor may calculate the virtual electric potential or voltage at each pixel within the image . As shown in the virtual electric potential field may be represented by a number of equipotential lines A H. Each equipotential line A H represents all pixels in the image that have a particular electric potential i.e. an equal voltage to one another . It will be appreciated that the virtual electric potential field for the image may contain greater or fewer equipotential lines than those shown in .

In the illustrative embodiment the image co processor may determine the virtual electric potential field resulting from the simulated electrostatic charge distribution comprises in block by applying a Poisson solver to calculate the virtual electric potential field. As will be appreciated by those of skill in the art the electric potential field resulting from a particular electrostatic charge distribution will satisfy Poisson s equation 

After block the method proceeds to block in which the image co processor determines whether the determination of the virtual electric potential field in block achieved a desired solution quality. In the illustrative embodiment described above the Poisson solver applied in block may be capable of calculating the virtual electric potential field resulting from the simulated electrostatic charge distribution with varying levels of granularity with increasing solution quality coming at the expense of increased computation time . By way of example in embodiments employing an iterative Poisson solver the solution quality may increase with each successive iteration. Thus in block the image co processor examines the virtual electric potential field calculated in block to determine whether adequate equipotential lines can be found in the image . If the image co processor determines that the desired solution quality for the virtual electric potential field has not been achieved the method returns to block as shown in .

If the image co processor instead determines in block that the desired solution quality for the virtual electric potential field has been achieved the method then proceeds to block in which the image co processor selects a portion of the object in the machine readable image file that is bounded by one equipotential lines A H in the virtual electric potential field. In some embodiments the image co processor may automatically choose one of the equipotential lines A H as the boundary for the selected portion of the object. For instance the image co processor may automatically choose the equipotential line D having the smallest internal area while encompassing all virtual point charges . As another example the image co processor may automatically choose the equipotential line F having the largest internal area while not encompassing any background pixels. In other embodiments the image co processor may allow a user to choose which one of the equipotential lines A H will serve as the boundary for the selected portion of the object. In the illustrative embodiment of the equipotential line E has been chosen as the boundary for the selected portion of the human face .

After block the method may optionally proceed to block in which the image co processor applies an alpha mask to the selected portion of the object. The image co processor may apply the alpha mask to allow the selected portion of the object to be seamlessly copied and pasted to another machine readable image file or to another location in the same machine readable image file . The alpha mask serves to make the area surrounding the selected portion of the object transparent. In the illustrative embodiment of the alpha mask represented by the dark area surrounds the selected portion of the human face i.e. the alpha mask occupies the area outside the equipotential line E . Thus using the method the image co processor may allow a user of the mobile computing device to perform on the fly editing of images captured by the camera .

While the disclosure has been illustrated and described in detail in the drawings and foregoing description such an illustration and description is to be considered as exemplary and not restrictive in character it being understood that only illustrative embodiments have shown and described and that all changes and modifications consistent with the disclosure and recited claims are desired to be protected.

