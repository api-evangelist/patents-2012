---

title: System for scheduling using an external calendaring service
abstract: A building control system incorporating an external calendar service, having a schedule subsystem, a schedule synchronization subsystem connected to the schedule subsystem, and an external calendar configuration subsystem connected to the schedule synchronization subsystem. The schedule subsystem may have a schedule object, a building schedule mechanism for activating different subsystems in a building based on a configuration of a building schedule, and a schedule change mechanism for creating, configuring and/or changing the building schedule.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08532794&OS=08532794&RS=08532794
owner: Honeywell International Inc.
number: 08532794
owner_city: Morristown
owner_country: US
publication_date: 20120518
---
This application is a continuation application of U.S. patent application Ser. No. 12 506 990 filed Jul. 21 2009 and entitled System for Scheduling Using an External Calendaring Service . U.S. patent application Ser. No. 12 506 990 filed Jul. 21 2009 is hereby incorporated by reference.

In every building automation system there are devices that are responsible for scheduled events that occur in a control system. A schedule object for example is responsible for managing events and activity in the system. In a building control system the schedule object is responsible for executing commands at specific times or when specific conditions are encountered.

The user interface UI and business logic for configuring such events is implemented as part of the Building Automation Systems BAS supervisor. The supervisor may be a device on the network or it may be software installed on a stand alone PC. The supervisor contains logic allowing the schedule object s to be modified. This limits interaction and configuration of the BAS to the supervisor software.

This invention enables configuration of schedule objects through an external calendar system such as Google Calendar and allows for bidirectional synchronization of schedule objects with the external calendar system.

This system decouples the user interface for configuring schedule objects therefore removing the need for each supervisor to implement the UI framework. The system also provides a consistent way to manage the schedule objects since Google Calendar or Yahoo Calendar is accessible from anywhere there is an Internet connection.

The supervisor may have a component that knows how to interact with the Google and Yahoo Calendar services. This component would be able to use standard Internet protocols to read and write data between the external calendar system and the BAS. The component may consume the data via an RSS feed public application programming interfaces or any other available method. The external calendar system may act as a tool used to configure one or more schedule objects in the BAS. Schedule identifiers which correspond to different schedule objects would appear in each calendar event to uniquely identify the corresponding schedule object in the BAS.

The present design may be regarded as BAS schedule synchronization with an external calendar system. The design may extend a supervisor s scheduling system to be synchronized with various external calendaring systems. The design may effectively enable a schedule object to be viewed and updated by those external calendaring systems such as Google Calendar Yahoo Calendar and desktop calendaring tools such as Outlook.

A brief description of each of these subsystems may be indicated herein. ScheduleSubsystem may represent a building supervisor device s scheduling subsystem. Its key functionality service may include a persistent building schedule data model e.g. BuildingSchedule and functionality for creating reading writing and deleting the building schedule. ScheduleSyncService may be a general building schedule control synchronization service. ScheduleSyncService may be for coordinating the overall schedule synchronization process which includes reading detecting changes and updating the schedule in the different systems and providing the general cross reference configuration of building control schedule and associated external schedule info which could include various items.

Some of the various items may include the list of mapped schedules in a configured external calendaring service user authorized access info for reading writing the associated schedules or calendars in the external calendaring service and optional tags for matching a list of events in a single external calendar with each of the multiple building schedules. Additional details related to this many to 1 relationship mapping are noted herein. Another item may include optional tags for matching schedule event requests corresponding to Add Delete or Reserve Cancel in order to support the sync method by merging. For example each schedule edited by an external calendaring service could flag the event created with tag Reserve to indicate that the event is to be added merged and tag Cancel to indicate the event to be deleted. Additional options related to merging method may be defined in details at a later time as there could be different results such as whether a time block event s Add request is allowed if it s overlapped with an existing one and so forth. 

GoogleCalendarService may refer to Google Calendar s data access service. A key responsibility functionality may include providing conversion functionality for normalizing Google Calendar service s data model e.g. GoogleCalendar into the specific building control s schedule data model e.g. BuildingSchedule . It could also include providing data access functionality for creating reading writing and deleting a specific configured calendar in Google s Calendaring service. This data access service may work with the normalized building control s schedule data model.

An object s relationship of building schedules and external systems calendars schedules may be noted. is an object diagram of a sample set of four building schedules and and the mapping of those into three external schedules and from two different calendaring services. There may be various mapping configurations. For instance 1 to 1 mapping may mean that a building control schedule maps just to one external schedule as shown in building control confRoomMedia . For another configuration many to 1 mapping may mean that multiple building schedules and map to one external schedule as shown in TenantA s Google calendar . In order to differentiate which list of event time blocks in the external calendar service is associated with each of the many building schedules this schedule synchronization method may require that each of those calendar s events be tagged with the a keyword in some fields within the external calendar schedule data model that is recognized by the corresponding configured calendar service such as GoogleCalendarService . Also there may be a configuration of 1 to many mapping where a building schedule maps to multiple calendars schedules in possibly multiple external calendaring services. This scenario may be used in the case of scheduling a share resource by multiple tenants or users that cannot share a single external calendaring service.

There may be subsystems components interactions involving a sync process. The following item shows pseudo code logic describing the process of synchronizing schedules in each of the 3 different mapping scenarios described herein. In an actual implementation this could be combined and structurally different for optimization purposes.

One may note that the synchronization process could be a triggered by one of the following conditions. Such conditions may include being triggered periodically by the ScheduleSyncService itself. A triggering may be based on schedule changes occurred in the building control system or based on change notification from a configured external calendaring service e.g. via exchanges for an external calendaring service for Outlook or via Google Calendar Service s notification possibly via email or other external calendaring service when it is available in the future.

Schedule mapping of 1 to 1 may involve a scenario of 1 building schedule 1 external schedule. The following pseudo code may outline the logic for carrying out a schedule synchronization process related to the 1 to 1 schedule mapping.

The ScheduleSyncService gets a list of schedule configurations to synchronize by calling SchedCalendarServiceXRef s getListofSyncSchedConfig opt method. Each schedule configuration item contains the following a information for identifying the external service s calendar and b a reference to the associated building control schedule. A parameter opt may be sent to the SchedCalendarServiceXRef containing information associated with a specific triggering condition. The information in the opt parameter could be used limit the external schedule configurations that need to be synchronized. For example the opt parameter could pass in the info indicating a specific schedule change occurred in the building control system. Using that info only the impacted list of external calendaring services schedules would need to be retrieved and synchronized. Similarly it could pass in the info indicating specific schedule change occurred in the external calendaring service.

For each external schedule returned by the SchedCalendarServiceXRef the ScheduleSyncService would call the SchedCalendarServiceXRef s getServiceAcessInfo s which would call the GDataCalendarDataAccess s getCalendar info process which would in turn call the GoogleCalendarService s getFeed API to return the normalized schedule object from the external calendar service. The ScheduleSyncService then calls the SchedCalendarServiceXRef s getSchedObjRef s which returns a reference to the building schedule by calling the ScheduleModel s getSched s process. The ScheduleSyncService then compares the external schedule and the building schedule and merges any differences. If there are differences the ScheduleSyncService would update both the building schedule and the external schedule by calling the ScheduleModel s writeSchedule syncSched and the GDataCalendarDataAccess s writeCalendar syncSched processes which calls the GoogleCalendarService s update API.

There may be the schedule mapping having a many to 1 scenario including many building schedules 1 external schedule calendar . The following pseudo code may outline the logic for carrying out a schedule synchronization process related to the Many to 1 schedule mapping.

There may be the schedule mapping having a 1 to many scenario including 1 building schedule many external schedules calendar . The following pseudo code may outline the logic for carrying out a schedule synchronization process related to the 1 to many schedule mapping.

One may note that the sync method for schedules s c in this case would likely use the optional sync method by merging schedule events from an external source when the sync direction is from an external to building schedule.

GoogleCalendarService may have a readWriteCalendar flow line to a GDataCalendarAPI of the GoogleCalendarService. YahooCalendarService may have a readWriteCalendar flow line to a YDataCalendarAPI of the YahooCalendarService. OtherCalendarService may have a readWriteCalendar flow line to an OtherCalendaringTool .

In a summary there may be a building control system incorporating an external calendar service having a schedule subsystem which may in some circumstances be referred to as a building schedule subsystem or a mechanism for using an external calendar system to schedule operations or activities within a building a schedule synchronization subsystem connected to the schedule subsystem and an external calendar configuration subsystem connected to the schedule synchronization subsystem. The schedule subsystem may have a schedule object a building schedule mechanism for activating different subsystems in a building based on a configuration of a building schedule and a schedule change mechanism for creating configuring and or changing the building schedule.

The schedule synchronization subsystem may have a coordination mechanism for coordinating an overall schedule synchronization process between the schedule subsystem and the external calendar configuration subsystem. The schedule synchronization subsystem may also have a reference mechanism for providing a cross reference configuration of the building schedule and associated external schedule information.

The external calendar configuration subsystem may have a data mechanism for providing data access for creating reading writing and or deleting at least a portion of a specific configured calendar in the external calendar configuration subsystem.

The external calendar configuration subsystem may have a normalization mechanism for normalizing a data model of an external calendar configuration into a data model of a specific building control schedule.

The schedule synchronization subsystem may have a synchronization mechanism for providing a synchronization process. The synchronization process can be triggered by one of a set of certain conditions. The set of certain conditions may include a schedule change in the building control subsystem a change notification from the external calendar configuration subsystem and or a periodic updating by the schedule synchronization subsystem.

The schedule subsystem may be for controlling one or more devices from a group containing but not limited to building subsystems such as HVAC lighting power sources access control and security.

In the present specification some of the matter may be of a hypothetical or prophetic nature although stated in another manner or tense.

Although the invention has been described with respect to at least one illustrative example many variations and modifications will become apparent to those skilled in the art upon reading the present specification. It is therefore the intention that the appended claims be interpreted as broadly as possible in view of the prior art to include all such variations and modifications.

