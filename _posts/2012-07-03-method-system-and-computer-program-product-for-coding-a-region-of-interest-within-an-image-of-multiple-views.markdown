---

title: Method, system and computer program product for coding a region of interest within an image of multiple views
abstract: For coding at least one region of interest within an image of multiple views, disparities are identified between the multiple views. In response to the disparities, the at least one region of interest is identified. The at least one region of interest is encoded at lower quantization relative to a remainder of the image. The remainder of the image is encoded at higher quantization relative to the at least one region of interest.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08768073&OS=08768073&RS=08768073
owner: Texas Instruments Incorporated
number: 08768073
owner_city: Dallas
owner_country: US
publication_date: 20120703
---
This application claims priority to U.S. Provisional Patent Application Ser. No. 61 504 449 filed Jul. 5 2011 entitled REGION OF INTEREST ROI 3D VIDEO CODING BASED ON DEPTH INFORMATION naming Do Kyoung Kwon et al. as inventors which is hereby fully incorporated herein by reference for all purposes.

The disclosures herein relate in general to digital image processing and in particular to a method system and computer program product for coding a region of interest within an image of multiple views.

Region of interest ROI coding is useful for increasing an encoded image s perceptual quality at relatively low bitrate. For ROI coding in response to various criteria e.g. motion and or texture an encoder selects an ROI within the image to encode at relatively lower quantization. However if the encoder selects the ROI in response to criteria that fail to accord with a human s interests then the encoded image s perceptual quality may actually diminish especially in coding an image of multiple views e.g. three dimensional 3D video coding . For example such diminished quality can strain the human s viewing of a corresponding decoded image with 3D effect on a stereoscopic display screen thereby causing the human s eventual discomfort e.g. headaches and or eye muscle pain .

For coding at least one region of interest within an image of multiple views disparities are identified between the multiple views. In response to the disparities the at least one region of interest is identified. The at least one region of interest is encoded at lower quantization relative to a remainder of the image. The remainder of the image is encoded at higher quantization relative to the at least one region of interest.

From the camera system the encoding device receives such images. The encoding device encodes such images into a binary logic bit stream. Also the encoding device outputs the bit stream to a storage device which receives and stores the bit stream.

A decoding device reads the bit stream from the storage device . In response to the bit stream the decoding device decodes the bit stream into such images. Also the decoding device outputs such images to a display device for display to a human user . The display device a receives such images from the decoding device e.g. in response to a command that the user specifies via a touchscreen of the display device and b in response thereto displays such images e.g. stereoscopic images of the object and its surrounding foreground and background which are viewable by the user .

In the example of the display device is a stereoscopic display whose optical components enable viewing with 3D effect. In one example the display device displays such images e.g. anaglyph images with 3D effect for viewing by the user through special glasses that a filter the left view against being seen by a right eye of the user and b filter the right view against being seen by a left eye of the user . In another example the display device is a stereoscopic 3D liquid crystal display device or a stereoscopic 3D organic electroluminescent display device which displays such images with 3D effect for viewing by the user without relying on special glasses.

The encoding device performs its operations in response to instructions of a computer readable program that is stored on a computer readable medium e.g. hard disk drive flash memory card or other nonvolatile storage device . Also the computer readable medium stores a database of information for operations of the encoding device . Similarly the decoding device performs its operations in response to instructions of a computer readable program that is stored on a computer readable medium . Also the computer readable medium stores a database of information for operations of the decoding device .

In an alternative embodiment a the encoding device outputs the bit stream directly to the decoding device via a communication channel e.g. Ethernet Internet or wireless communication channel and b accordingly the decoding device receives and processes the bit stream directly from the encoding device in real time. In such alternative embodiment the storage device either a concurrently receives in parallel with the decoding device and stores the bit stream from the encoding device or b is absent from the system . The system is formed by electronic circuitry components for performing the system operations implemented in a suitable combination of software firmware and hardware such as one or more digital signal processors DSPs microprocessors discrete logic devices application specific integrated circuits ASICs and field programmable gate arrays FPGAs .

Within the stereoscopic image a feature s disparity is a horizontal shift between a such feature s location within the left view and b such feature s corresponding location within the right view. For example if a feature within the stereoscopic image is horizontally centered on the point D within the left view and likewise horizontally centered on the point D within the right view then a such feature s disparity D D 0 and b the user will perceive the feature to appear at the point D with zero horizontal disparity on the screen which is a natural convergence distance away from the left and right eyes.

By comparison if the feature is horizontally centered on a point P within the left view and horizontally centered on a point P within the right view then a such feature s disparity P P and b the user will perceive the feature to appear at the point D with positive disparity behind the screen which is greater than the natural convergence distance away from the left and right eyes. Conversely if the feature is horizontally centered on the point P within the left view and horizontally centered on the point P within the right view then a such feature s disparity P P and b the user will perceive the feature to appear at the point D with negative disparity in front of the screen which is less than the natural convergence distance away from the left and right eyes. The amount of the feature s disparity e.g. horizontal shift of the feature from P within the left view to P within the right view is measurable as a number of pixels so that a positive disparity is represented as a positive number and b negative disparity is represented as a negative number.

The matched pair of left and right views are temporally co located because they are contemporaneously e.g. simultaneously digitized and output to the encoding device by the left and right imaging sensors respectively. Portions of the image e.g. features such as objects within the image include a mountain range a truck and a person s face. Because the truck is horizontally centered on the same coordinate in both of the left and right views of the user will perceive the truck to appear on the screen which is a natural convergence distance away from the left and right eyes.

By comparison the mountain range within the left view of is left of the mountain range within the right view of . As discussed hereinabove in connection with if a feature e.g. at the point P in within the left view is left of the same feature e.g. at the point P in within the right view then the user will perceive such feature to appear behind the screen. Accordingly the user will perceive the mountain range of to appear behind the screen.

Conversely the person s face within the left view of is right of the person s face within the right view of . As discussed hereinabove in connection with if a feature e.g. at the point P in within the left view is right of the same feature e.g. at the point P in within the right view then the user will perceive such feature to appear in front of the screen. Accordingly the user will perceive the person s face of to appear in front of the screen.

Accordingly in the example of B and the convergence plane is located at the depth B. As discussed hereinbelow in connection with per image of multiple views e.g. stereoscopic image the encoding device automatically a identifies e.g. computes by itself or receives from another source disparities between the multiple views e.g. left and right views of such image such as respective disparities of features within such image e.g. disparities as identified from a depth map that assigns suitable depth values to regions within the image and b in response to such disparities determines one or more regions of interest ROIs within such image.

At a next step in response to disparities of such features and in response to such information from the computer readable medium the encoding device generates a depth map that assigns suitable depth values to such regions within the image. Each region includes its own group of respective pixels so that all pixels within such region have such region s depth value in the depth map. In an alternative embodiment the encoding device receives the disparities e.g. by receiving the depth map from another source e.g. from the camera system . At a next step in response to a pixel s depth value the encoding device determines whether such pixel is located at a depth of interest.

In response to the encoding device determining that such pixel is located at a depth of interest the operation continues from the step to a step at which the encoding device adds such pixel to a list of ROIs. After the step the operation continues to a step . Conversely in response to the encoding device determining that such pixel is not located at a depth of interest the operation continues from the step to the step .

At the step the encoding device determines whether a next pixel within the image remains to be evaluated for possible addition to the list of ROIs. In response to the encoding device determining that a next pixel within the image remains to be so evaluated the operation returns from the step to the step for evaluation of such next pixel. Conversely in response to the encoding device determining that a next pixel within the image does not remain to be so evaluated the operation continues from the step to a step .

At the step the encoding device automatically encodes the image so that a if a macroblock MB includes one or more pixels in the list of ROIs then an entirety of such MB is encoded at relatively lower e.g. more fine quantization and b a remainder of the image is encoded at relatively higher e.g. more course quantization. After the step the operation continues to a step at which the encoding device determines whether a next image remains to be encoded. In response to the encoding device determining that a next image remains to be encoded the operation returns from the step to the step for encoding of such next image. Conversely in response to the encoding device determining that a next image does not remain to be encoded the operation ends.

By encoding at relatively lower quantization for the entirety of MBs that include one or more pixels in the list of ROIs the encoding device increases perceptual quality of such MBs. By encoding at relatively higher quantization for the remainder of the image the encoding device achieves a relatively low bitrate for efficiency. The encoding device encodes each MB s respective quantization parameter QP into the bit stream so that the decoding device receives the QPs and decodes the MBs accordingly. In one embodiment QP is an integer within a range of 0 QP 51. A lower QP indicates relatively lower quantization and a higher QP indicates relatively higher quantization.

The depth s of interest accord with interests e.g. natural focus of the user . For example within a stereoscopic image a pixel s depth is proportional to such pixel s disparity between a such pixel s location within the left view and b such pixel s corresponding location within the right view. Accordingly in one embodiment the encoding device determines whether a pixel is located at a depth of interest by determining whether such pixel s disparity d x y is not greater than a threshold dTH.

In a first example dTH is 0 so the encoding device determines that a pixel is located at a depth of interest in response to determining that such pixel s disparity d x y is zero or negative e.g. if the user naturally focuses upon objects that appear on the screen or in front of the screen . In the truck and the person s face have disparities that are zero or negative. Accordingly in the first example a the truck and the person s face are ROIs which are outlined by dashed enclosures in for illustrative purposes and b the encoding device encodes MBs of such ROIs at relatively lower quantization.

In a second example dTH is a positive number. In a third example dTH is a negative number. In a fourth example dTH is an image s average disparity dAVG e.g. if the image s disparities are all positive or if the image s disparities are all negative . In a fifth example dTH dAVG C where C is a predetermined non zero constant e.g. a negative number .

In another embodiment e.g. for a security monitoring system the encoding device determines whether a pixel is located at a depth of interest by determining whether such pixel s disparity d x y is within one or more ranges of disparity. In one example the encoding device determines that a pixel is located at a depth of interest in response to determining that such pixel s disparity d x y is within either a a first range of dTHlow d x y dTHhigh b a second range of dTHlow d x y dTHhigh or c a third range of dTHlow d x y dTHhigh. In yet another alternative embodiment the encoding device determines whether a pixel is located at a depth of interest by determining a whether such pixel s disparity d x y satisfies a disparity condition e.g. equal to or less than dTH or within a range of disparity and b whether such pixel satisfies at least one additional criterion e.g. color and or position of such pixel .

In the illustrative embodiments a computer program product is an article of manufacture that has a a computer readable medium and b a computer readable program that is stored on such medium. Such program is processable by an instruction execution apparatus e.g. system or device for causing the apparatus to perform various operations discussed hereinabove e.g. discussed in connection with a block diagram . For example in response to processing e.g. executing such program s instructions the apparatus e.g. programmable information handling system performs various operations discussed hereinabove. Accordingly such operations are computer implemented.

Such program e.g. software firmware and or microcode is written in one or more programming languages such as an object oriented programming language e.g. C a procedural programming language e.g. C and or any suitable combination thereof. In a first example the computer readable medium is a computer readable storage medium. In a second example the computer readable medium is a computer readable signal medium.

A computer readable storage medium includes any system device and or other non transitory tangible apparatus e.g. electronic magnetic optical electromagnetic infrared semiconductor and or any suitable combination thereof that is suitable for storing a program so that such program is processable by an instruction execution apparatus for causing the apparatus to perform various operations discussed hereinabove. Examples of a computer readable storage medium include but are not limited to an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory an optical fiber a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device and or any suitable combination thereof.

A computer readable signal medium includes any computer readable medium other than a computer readable storage medium that is suitable for communicating e.g. propagating or transmitting a program so that such program is processable by an instruction execution apparatus for causing the apparatus to perform various operations discussed hereinabove. In one example a computer readable signal medium includes a data signal having computer readable program code embodied therein e.g. in baseband or as part of a carrier wave which is communicated e.g. electronically electromagnetically and or optically via wireline wireless optical fiber cable and or any suitable combination thereof

Although illustrative embodiments have been shown and described by way of example a wide range of alternative embodiments is possible within the scope of the foregoing disclosure.

