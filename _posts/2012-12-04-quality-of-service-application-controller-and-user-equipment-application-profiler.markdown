---

title: Quality of service application controller and user equipment application profiler
abstract: Various topologies of a quality of service application controller and related techniques to optimize the communications performance an application executing on a device participating in a communications environment are disclosed. The communications environment may include a cellular network, an unlicensed spectrum network, or a combination of the two. The quality of service application controller observes one or more key performance indicators of the communications network, and retrieves a policy from a policy store specific to the application. The quality of service application controller then modifies the execution of the application and/or the configurable aspects of the communications environment to optimize the communications performance of the application. For example, the application's data throughput may be increased, the power draw of the application may be minimized, data requested by the application may be minimized, or the apparent response time of the application's response to a web service may be minimized.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09100854&OS=09100854&RS=09100854
owner: T-Mobile USA, Inc.
number: 09100854
owner_city: Bellevue
owner_country: US
publication_date: 20121204
---
This patent application claims priority to U.S. provisional patent application Ser. No. 61 567 562 titled QoS Application Controller and Handset Application Profiler filed Dec. 6 2011 which is incorporated by reference in its entirety herein.

As communications networks have increased in both capacity and capability applications have demanded an increasing amount of data. Presently cellular networks are in their fourth generation 4G where voice services are being ported from switch based systems to packet based systems video calls and multi media streaming are typical scenarios and social networking and electronic mail applications constantly receive notifications and other data from web services and or applications over the Internet.

Developing communications environments into heterogenous networks hetnets that combine cellular networks with unlicensed spectra such as Wi Fi networks has increased network capacity and a mechanism to load balance servicing data requests.

However the advantages of larger capacity communications environments are offset by the proliferation of user equipment such as smartphones wireless tablets and laptop computers connected via cellular modems. Specifically user equipment has diversified to larger form factors and more powerful processors which in turn have increased user expectations for higher resolution and higher fidelity multimedia experiences.

However different applications have different data use profiles. For example data demands of an Internet news browser are typified by brief bursts of high data use as a user requests content followed by extremely low data use as the user reads or otherwise consumes the content. In contrast a user watching a video has a more extended periods of high data use as a video buffer is filled.

Accordingly there is an opportunity to develop a way to control quality of service given limited communications capacity compared to application data demand on a per application basis not presently in the art.

This disclosure describes a quality of service application controller that dynamically optimizes application execution on user equipment participating in a communications environment on a per application basis. For example a user watching a movie streamed over a video web service on the Internet via a cellular connection at home may execute a policy to offload some data throughput to the user s home Wi Fi network. By way of another example a user participating on a video conference on a laptop with a cellular modem may execute a policy to lower the priority of voice data in favor of video data in order to minimize synchronization errors between voice and video. These policies may execute either upon the start up of an application or during run time of an application.

Furthermore optimization may come in several forms. Typically a user will desire the best quality of data rendering with the minimum response time. In this situation optimization may mean increasing data throughput. However user equipment devices participating on a cellular network portion of a communications environment are typically billed charges based on the volume of data used over the cellular network. In this situation optimization may mean reducing data charges and therefore minimizing data throughput the opposite of the previous example. Optimization need not be specific to data. For example user equipment may be in the form of a mobile smartphone with limited battery life. In this situation optimization may mean limiting power draw on the smartphone s battery as to prolong battery life.

Oftentimes optimization is subjective. For example a user equipment device s connection over a communications environment may have excellent quality of service from the perspective of having maximum data throughput. But if the application on the device that renders data is inefficient for example a video player that does not refill its buffer quickly enough the user s perception or quality of experience will be worse that what would otherwise be available from the high quality of service connection. A typical scenario is to minimize an application s response time to a web service. Specifically the time between an application request and the application rendering data returned by the corresponding web services response should be minimized. Accordingly optimization is more than increasing data throughput over a cellular network. Rather optimization may be to reconfigure the cellular environment reconfigure the application reconfigure the operating system and potentially provide feedback to the web service. In particular optimization may be application specific.

A user equipment device includes any device that may participate on a communications network. The user equipment device may be fixed such as a personal computer or may be may be a mobile device such as a smartphone.

The user equipment device may execute an application . The application may be strictly a client side application such as a non networked casual game or may rely on a web service such as an electronic mail reader connected to an electronic mail service or may have server side components such as an Internet browser connected to a web site.

The application may execute on an operating system such as Google Android or Apple iOS . In particular the application may participate on a communications network by invoking a communications application programming interface API exposed by operating system . In turn the operating system may access a modem and radio hardware via a radio interface layer API . An operating system may segregate operation into a user mode and a kernel mode. The kernel provides operations to manage processes threads memory management input output and other functionality common to multiple applications. Thus if the kernel ceases operation for example from a fatal programming bug then all applications will cease operation. To isolate fatal programming bugs in a particular application from affecting other applications operating system may expose an application s access to the operating system to user mode functions that upon failure will not extend failure to the kernel. The user equipment device and associated software are discussed in more detail with respect to .

The modem and radio hardware provide wireless connectivity for the user equipment device to a communications environment . The communications environment includes all equipment to support a communications network. A communications network may be a cellular network operating on licensed spectrum . For example in the United States licensed spectrum would include any spectrum licensed by the Federal Communications Commission FCC such as spectrum for cellular networks. In this case the communications environment would include towers base station controllers voice and data nodes and gateways.

A communications network may be a network not operating on licensed spectrum . Specifically a wireless network whose power is not sufficiently strong to impact the operation of non local equipment generally does not make use of licensed spectrum. Accordingly examples of unlicensed networks may include Wi Fi networks. In this case the communications environment may include Wi Fi access points and internet protocol routers repeaters switches and bridges. As licensed spectrum networks and unlicensed spectrum networks are used in combination as heterogenous networks a communications environment may include both licensed and unlicensed spectrum networks .

A quality of service application controller is communicatively coupled to one or more applications on user equipment device and operates to monitor startup execution and shut down of the applications and operations on the user equipment device . Monitoring includes receiving key performance indicators KPI that can be measured that relate to the operation of the application or the user equipment device itself. For example a KPI may be communications related and measure network throughput or network latency. A KPI could relate to power draw on a battery over time. A KPI might be a binary measure such as merely determining whether a particular application is on or off. KPIs are typically exposed through APIs by the application or the operating system . KPIs specific to chipsets and other user equipment device hardware may be exposed via APIs implemented in kernel mode device drivers thereby providing programmatic access. KPIs may be combined aggregated and or analyzed statistically to provide a composite KPI. For example an average power draw over time may be calculated from a power draw measure and date time stamps. Thus KPIs may measure an application a specific portion of the user equipment device or the user equipment device as a whole.

The quality of service application controller may reside in any number of places. While the quality of service application controller may be communicatively coupled to various portions of the user equipment device and associated software it may be advantageous to choose the hosting location based on what KPIs are to be measured and the user equipment device capabilities. For example if most of the KPIs to be measured apply to multiple applications than hosting the quality of service application controller might be local to the user equipment device and in particular be hosted in the operating system. However if the user equipment device has insufficient processing capabilities to host the quality of service application controller or if distribution of the quality of service application controller is otherwise too difficult to manage the quality of service application controller may be hosted remotely on a server for example a server part of the communications environment .

The location of the quality of service application controller may varying according to the whether the quality of service application controller is to reside within a specific programming boundary or whether the quality of service application controller is to have a specific focus. For example some user equipment device functionality may be partially implemented in a chipset and partially implemented in software such as the radio interface layer and the communications stack. Accordingly the quality of service application controller may reside in the radio interface layer or a particular layer of the communications stack. Similarly if the quality of service application controller has a specific focus on a particular application type such as multimedia then the quality of service application controller may advantageously reside in a media framework library.

A more general quality of service application controller may reside as a separate user mode application on user equipment device where KPIs are received through extensions of the radio interface layer communications stack operating system and media framework. Hardware KPIs may be exposed via additional device drivers or modifying existing device drivers. Software KPIs may be exposed by adding additional APIs to the corresponding software.

The quality of service application controller may be communicatively coupled to a policy storage . For example policy storage may be a file server participating on a network such as a network in communications environment . Alternatively the policy storage may be local to the user equipment device for example in a static file potentially periodically updated via the communications environment . In some cases the policy storage may be resident on the application itself. In particular policies need not be static but alternatively may be dynamically generated by the application during run time either from a request by the quality of service application controller or other trigger. In some cases a separate trusted application executing either on the user equipment device or on a remote server may store policies. The trusted application may be privileged to provide policies either by running under the same account and privileges as the application or by negotiating privileges via cryptographic key exchange. By way of yet another example the policy storage may be fully or partially resident in hardware such as in the modem or radio.

Regardless of location the policy storage contains one or more application specific policies describing how the user equipment device associated software such as the application and operating system and or communications environment is to reconfigure specific to an application launch operation shutdown or observed KPI. The operation of the quality service application controller and policies are described in more detail with respect to .

Within this context the quality of service application controller may operate to monitor user equipment device and may observe an application launch. Based on the launch the quality of service application controller may retrieve a policy specific to the launched application from policy storage . The quality of service application controller may then configure the user equipment device the application the operating system or potentially the communications environment . For example the quality of service application controller may send a request to the communication environment to open more communications pipes. The quality of service application controller may observe one or more key performance indicators and may recon according to the retrieved policy . The operation of the quality of service application controller is described in more detail with respect to .

User equipment device is any computing device participating in a communications environment. A user equipment device may have a processor and a memory .

Client device s memory is any computer readable media which may store several programs including an application media framework or other library and or an operating system .

Computer readable media includes at least two types of computer readable media namely computer storage media and communications media. Computer storage media includes volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other non transmission medium that can be used to store information for access by a computing device. In contrast communication media may embody computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transmission mechanism. As defined herein computer storage media does not include communication media.

To participate in a communications environment user equipment device may have a modem and a radio . The modem radio separately or in combination may supports one or more transports. For example modem radio may support unlicensed spectrum communications such as Wi Fi or licensed spectrum such as WCDMA and CDMA2000. Alternatively user equipment device may have multiple modems radios to support different communications transports.

To facility participation in a communications environment user equipment device may have additional chipsets . These chipsets may fully or partially implement application or communications specific functionality in hardware. Common examples include the communications stack and the radio interface layer .

User equipment may communicate to a server . Server is any computing device that may participate in a network. The server may be part of the communications environment. Examples may include servers in a cellular base station or alternatively in the core network for a cellular carrier. Alternatively server may be part of a Wi Fi access point or a separate network aware device participating on a Wi Fi network. Server comprises processor memory and communications interface . As per the preceding discussion regarding user equipment device memory is any computer readable media including both computer storage media and communication media.

In particular memory stores software which may include an operating system and or an application . Memory may also store applications that may include a database management system. Accordingly server may include data store . Data store may be configured as a relational database an object oriented database and or a columnar database or any configuration to support policy storage.

In block the quality of service application controller receives an application indicator. Specifically the quality of service application controller receives an indicator that an application is starting. This may be via a notification from the operating system that exposes a unique application identifier. Since some applications may be tied to a web service the quality of service application controller may determine that the launched application is an Internet browser and may monitor the URL and or IP address accessed and or the addressed port.

Upon receiving the application indicator in block the quality of service application controller identifies the corresponding application. In the case where the unique application identifier identifies a local application such as a non networked casual game there may be a lookup table to resolve the application identifier to specific information about the application. Where the unique application identifier is identified to rely on a networked or web service such as a social networking client or electronic mail client the quality of service application controller may identify the corresponding web service. In cases where the unique application identifier corresponds to an Internet browser the URL and or IP address and address port information from block may be utilized to identify server side application functionality. For example the optimal communications configuration from a video web site is typically different from a news web site although both sites could be accessed by the same Internet browser and hence be identified by the same unique application identifier.

Based on the application identified in block the quality of service application controller will access the policy storage and retrieve one or more policies corresponding to the identified application. Upon retrieval in block the quality of service application controller will execute one or more of the retrieved policies. The policies may configure the user equipment device the application the operating system specific portions of the user equipment or other software such as the communications stack and or media framework and or other libraries. The quality of service application controller may send requests to the communications environment as well. Example policies are described in more detail with respect to .

During runtime of the application conditions on the device or in the communications environment may change. For example network congestion may increase. Accordingly in block the quality of service application controller may continue to monitor the user equipment device associated software and communications environment in particular to monitor KPIs. Upon receiving a KPI that triggers a reconfiguration event in block the quality of service application controller will reconfigure the user equipment device the application the operating system specific portions of the user equipment or other software such as the communications stack and or media framework and or other libraries as in block .

In block the quality of service application controller retrieves a policy either in response to an application starting or from some other trigger. In block the quality of service application controller will read the policy and perform one or more optimizations. Some policies may be implemented conditionally. For example the user equipment device may store a profile storing general user preferences and or application specific user preferences. The preference may override the quality of service application controller and indeed may provide an option to make the application exempt from the quality of service application controller from particular policies or may specify alternate policies. Two or more policies may be performed in combination. In the optimization techniques are illustrated in a one to one correspondence with a policy.

In block an optimization requested by a policy may be to open or close or to configure reconfigure communications pipes. For example the user equipment device may be configured to have a number of generic communications pipes in reserve. In the event an application is likely to use more data one or more additional communications pipes may be opened. Conversely if an application is likely to use less data then communications pipes may be closed. In particular different applications will have different data use templates. Thus opening and closing communications pipes would provide an application specific technique to control data throughput. Configuration reconfigure may include modifying attributes of a communications pipe including but not limited to modifying maximum bitrate granted bitrate or other bitrate attributes pipe traffic class quality class indicator and allocation and retention priorities.

In some cases an optimization requested by a policy may include changes to the communications environment. For example in block an optimization requested by a policy may be to hold data packets in buffer. By way of another example in block the protocol timers may be dynamically modified. The user equipment device may send a request to the communications environment and may make local changes in the operation of the communications stack.

In drastic cases an optimization requested by a policy may be to shut an application off. For example if a particular application has background process updates that are causing unacceptably high charges on a user s data plan then that particular application may be to shut off network access for that application or as in block to completely shut off the application. A notification to the user that the application is being shut off may be sent by the quality of service application controller. In this case this policy may be applied at run time long after the application has been launched.

In cases where changes to the networks in the communications environment is not desirable the communications protocol may be spoofed with fake notifications as in block . For example in some cases a protocol will negotiate for information that is already known or not used for specific scenarios in use. Accordingly response packets with sent with hardcoded responses designed to satisfy the protocol thereby shortening response time.

Upon completion of the one or more optimizations requested by a policy operation continues as in block .

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

