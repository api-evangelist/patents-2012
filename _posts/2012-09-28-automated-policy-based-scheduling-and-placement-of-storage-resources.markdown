---

title: Automated policy based scheduling and placement of storage resources
abstract: A computer-executable method, system, and computer program product comprising providing a policy based scheduling model comprising modeled instances of objects representing resources, wherein the resources are provisioned within a heterogeneous storage environment, wherein the modeled instances of objects includes a transport zone for mapping a data storage resource within the heterogeneous storage environment to a data storage host, wherein each of the modeled instances of objects includes one or more ports to create I/O paths between the data storage resource and the data storage host, and using the policy based scheduling model to manage the provisioning of the data storage resource in the heterogeneous storage environment.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09417997&OS=09417997&RS=09417997
owner: EMC Corporation
number: 09417997
owner_city: Hopkinton
owner_country: US
publication_date: 20120928
---
A portion of the disclosure of this patent document may contain command formats and other computer language listings all of which are subject to copyright protection. The copyright owner has no objection to the facsimile reproduction by anyone of the patent document or the patent disclosure as it appears in the Patent and Trademark Office patent file or records but otherwise reserves all copyright rights whatsoever.

This Application is related to U.S. patent application Ser. No. 13 630 455 entitled SINGLE CONTROL PATH Ser. No. 13 631 030 entitled METHOD AND APPARATUS FOR FEDERATING A PLURALITY OF ONE BIG ARRAYS Ser. No. 13 631 039 entitled METHOD AND APPARATUS FOR AUTOMATED INFORMATION LIFECYCLE MANAGEMENT USING A FEDERATION OF ARRAYS Ser. No. 13 631 055 entitled METHOD AND APPARATUS FOR FEDERATED IDENTITY AND AUTHENTICATION SERVICES Ser. No. 13 631 246 entitled APPLICATION PROGRAMMING INTERFACE and Ser. No. 13 631 190 entitled DISTRIBUTED SYSTEM SOFTWARE INFRASTRUCTURE filed on even date herewith the teachings of which applications are hereby incorporated herein by reference in their entirety.

Computer systems are constantly improving in terms of speed reliability and processing capability. As is known in the art computer systems which process and store large amounts of data typically include a one or more processors in communication with a shared data storage system in which the data is stored. The data storage system may include one or more storage devices usually of a fairly robust nature and useful for storage spanning various temporal requirements e.g. disk drives. The one or more processors perform their respective operations using the storage system. Mass storage systems MSS typically include an array of a plurality of disks with on board intelligent and communications electronics and software for making the data on the disks available.

Companies that sell data storage systems and the like are very concerned with providing customers with an efficient data storage solution that minimizes cost while meeting customer data storage needs. It would be beneficial for such companies to have a way for reducing the complexity of implementing data storage services balanced against the need for unified and centralized management that can grow or scale proportionally with the growth of what is being managed.

A computer executable method system and computer program product comprising providing a policy based scheduling model comprising modeled instances of objects representing resources wherein the resources are provisioned within a heterogeneous storage environment wherein the modeled instances of objects includes a transport zone for mapping a data storage resource within the heterogeneous storage environment to a data storage host wherein each of the modeled instances of objects includes one or more ports to create I O paths between the data storage resource and the data storage host and using the policy based scheduling model to manage the provisioning of the data storage resource in the heterogeneous storage environment.

Typically control of and provisioning of multiple data services for heterogeneous storage systems may be problematic. Conventionally some systems may have only enabled provisioning of homogenous storage systems. Generally controlling and managing provisioning of heterogeneous storage may not have been possible.

In certain embodiments the current disclosure may enable a distributed software control platform that allows enterprise IT departments and cloud service providers to convert the heterogeneous storage systems within a data center into one large storage array. In some embodiments the current disclosure may enable exposure of logical storage resources and allow enterprise IT departments and cloud service providers to manage heterogeneous storage environments through a simple robust Representational State Transfer REST API and a command line interface CLI . In at least one embodiment one API and one CLI may be used to connect to all the storage arrays in a data center as if they were one large storage array.

In some embodiments the current disclosure may enable a software platform for multi tenant environments that delivers a single logical cloud scale geo distributed storage system for developers and storage cloud administrators. In certain embodiments the current disclosure may enable an enterprise to adopt hybrid management models in environments where storage infrastructure resides in enterprise data centers but is also hosted by a service provider or a public cloud. In certain embodiments the current disclosure may enable an enterprise to manage hybrid deployments as one large storage array. In further embodiments the current disclosure may enable one big array to scale to millions of storage volumes and file shares. In still further embodiments the techniques and implementations described herein may be deployed as a vApp a set of virtual machines.

In certain embodiments the current disclosure may enable data centric cloud infrastructures to be managed efficiently and flexibly through a data storage software platform. In some embodiments the current disclosure may simplify the management of complex heterogeneous geo distributed storage resources by exposing the storage systems as logical resources through robust easy to use REST API and CLI interfaces. In most embodiments the current disclosure may provide integrations into cloud stacks such as VMware and OpenStack .

A data service may be a service for receiving processing storing and protecting data. In certain embodiments data services provide the high level data and storage management capabilities of the system.

A storage medium may be any medium that is capable of storing data including but not limited to a storage array a storage cluster a physical disk a virtual disk and a virtual storage system.

A tenant may represent an organization operating within a one big array. In some embodiments a tenant may be created in the system for the purposes of security isolation.

A neighborhood may represent a fault domain within a network. In many embodiments a plurality of data centers may be combined to create a federation. In some embodiments the federation failures may occur that may affect the availability of resources. In certain embodiments the data centers or federation may account for the failures by segmenting the infrastructure into different fault domains. In some embodiments each fault domain may be designed to be isolated from other fault domains while part of the same data center so that each failure within one fault domain does not affect other fault domains.

A Class of Service may represent high level capabilities and services that are created by users through composition of resource attributes and quality of services including level of protection availability access protocol performance and additional storage data services such as versioning snap backup remote replication data reduction encryption etc.

A project may be a resource organization abstraction that maps resources to applications virtual data centers departments or other entities. In some embodiments a user may create projects and may associate multiple resources from different data services with the projects. In most embodiments resources from one project may be shared between users under the same tenant.

A Data Mover may be a component enabled to retrieve data from a storage medium or storage device and make it available to a network client.

Generally a data storage array or system may be one or more physical boxes or a cluster of physical boxes. In conventional systems the data storage array or system may have one control path and data paths. In typical systems one or more data path ports may provide data path access to the storage resources contained within the storage system. Typically the protocols for the data path ports may be fiber channel Internet Protocol IP iSCSI or NTFS. Usually to add more capacity to a data storage array or system more physical disks more inline cards or more CPUs may be added to the data storage array or system. Conventionally the data storage system or array may be a cluster of storage mediums. Typically providing management for large numbers of data storage arrays or systems may be challenging.

Refer now to the example embodiment of which illustrates a sample storage device. Storage device has control path ports and disks and . Control path enables a user to interface with storage device . Control path enables a user to access disks and via the services storage device offers through one or more of ports .

In an embodiment the current disclosure may enable data centric cloud infrastructures to be managed efficiently and flexibly through a data storage software platform. In some embodiments a data storage software platform may partition the infrastructure into neighborhoods. A neighborhood may include a highly cohesive set of inter connected heterogeneous data storage pools network nodes and computer nodes. In some embodiments a data storage pool may be associated with one or more neighborhoods.

In many embodiments a data storage software platform may include a placement scheduler module scheduler to automatically place and allocate a storage resource based on a created policy. In certain embodiments the policy may be defined by attributes such as Class of Service neighborhood or bandwidth. In some embodiments the scheduling and placement of storage resources may be accomplished by storage pool selection or array port s or data mover s selection.

In certain embodiments the scheduler may be used to select a data storage pool based on a created policy. In some embodiments the policy may specify a neighborhood where the volume may be created i.e. block volumes etc. . In many embodiments the scheduler may query across the data storage pools within a neighborhood to find one or more pools that may match the desired Class of Service capabilities. In certain embodiments when one or more data storage pools match the selection criteria the scheduler may select one of the pools using a number of heuristics i.e. most available capacity least number of volumes round robin etc. . In other embodiments the policy may not specify the neighborhood where the volume may be created. In some embodiments the scheduler may query across all data storage pools available to find a pool that matches the desired Class of Service capabilities.

In some embodiments the scheduler may enable selection of array ports or data movers to affect operating attributes i.e. visibility bandwidth etc of specified data storage resources. In many embodiments array port or data mover selection may be used for provisioning in an environment using physical Storage Area Networks SAN or virtual Storage Area Networks vSAN . In certain embodiments an array port or data mover selection may be used to ensure a proper number I O paths are created to achieve a desired level of availability. In other embodiments array port or data mover selection may be used to ensure that multiple I O paths do not share a common fault domain with respect to ports directors or SAN switches. In some embodiments array port or data mover selection may be used to ensure proper balancing of I O bandwidth across array ports.

In many embodiments a scheduler may create a model representing resources provisioned within heterogeneous storage resources. In certain embodiments heterogeneous storage resources may be created in a heterogeneous storage environment containing one or more heterogeneous resources. In some embodiments the scheduler may model potential implementations of data storage allocation placement or port allocations. In other embodiments a created policy may include potential implementations of data storage allocation placement or port allocations. In an embodiment the scheduler may be enabled to call management functions to implement a potential implementation. In some embodiments a created policy may be used to call management functions to implement a potential implementation. In certain embodiments the model may enable the scheduler to select ports or data movers. In some embodiments the model may have a topology of the heterogeneous storage resources. In an embodiment the topology may have representations of data storage directors hosts associated ports and transport zones. In certain embodiments a transport zone may represent a potential region of connectivity within a neighborhood. In some embodiments transport zones may include vSAN VLAN or other IP network constructs for use with iSCSI or file protocols. In many embodiments the scheduler may use the model to allocate connections between data volumes and the host applications attempting to consume the data volumes. In some embodiments the data volumes may be allocated from heterogeneous storage resources.

Refer now to the example embodiment of . is a simplified illustration of a one big array in accordance with an embodiment of the present disclosure. As shown in API Service enables external access to users administrators through API . API Service communicates requests to One Big Array . API Service enables access to Service Coordinator which enables access to other services and management modules. Through Service Coordinator API Service has access to tenant manager catalog manager metering manager monitoring manager data services meta data service job service authn authz log service messaging eventing scheduler and BIOS Controller Device . As shown Data Services within One Big Array provides block file and object data services . In many embodiments scheduler may enable allocation placement and data path access of storage resources based on a created policy. In some embodiments scheduler may use storage pool selection or array port s or data mover s selection to determine allocation placement or data path access of storage resources based on a created policy. In the embodiment of embodiment a placement or allocation of storage resources may be located within storage arrays . As shown in policy based scheduling model is accessed through placement scheduler . Scheduler allocates array port s or data mover s to facilitate in the placement or allocation of storage resources within storage arrays . In certain embodiments scheduler may select storage pools based on user created policy.

Refer now to example embodiment of . is a simplified illustrated of policy based scheduling model in accordance with an embodiment of the present disclosure. As shown a scheduler i.e. is using policy based scheduling model to view potential implementations to make data storage volume visible to Host and Host . As shown a scheduler uses policy based scheduling model to create a policy from which a data management software platform may manage the provisioning of a data resource in heterogeneous storage resources. In some embodiments the heterogeneous storage resources may be located in a heterogeneous storage environment.

When scheduler i.e. uses a created policy to issue management commands to data storage on heterogeneous storage resources the policy based schedule model is implemented on the data storage. As shown created policy from policy based scheduling model is used to allocate data storage volume to host . As shown data storage volume allocates data storage pool . When scheduler issues management commands to data storage on heterogeneous storage resources scheduler enables data storage pool to be visible externally through directors . As shown directors have ports A B C D through which data volume is visible outside of data storage pool . Ports A B C D are connected to transport zones . Host has initiator ports A B C D. Hosts connect to transport zones through initiator ports A B C D. As shown data volume is visible to host through transport zone and transport zone . For example initiator port A on host is connected to transport zone which is connected to port A on director . Similarly data volume is visible to host through transport zone and transport zone . In many embodiments policy based scheduling model may include one or more directors having one or more ports. In some embodiments policy based scheduling model may include one or more transport zones. In certain embodiments policy based scheduling model may include one or more hosts having one or more ports. In some embodiments policy based schedule model may be used to modify a grouping of ports on hosts and or directors.

Refer now to the example embodiments of . The example embodiments illustrate a simplified flow of how One Big Array manages provisioning of heterogeneous storage resources. As shown in scheduler is provided a policy based scheduling model enabled for providing modeled instances of objects representing a heterogeneous storage resource Step . Scheduler uses policy based scheduling model to manage the provisioning of the heterogeneous storage resources through creating a scheduling and placement policy Step .

Refer now to example embodiments of . The example embodiments illustrate a simplified flow of how a One Big Array manages provisioning of heterogeneous storage resources. As shown in a policy based scheduling model enabled for providing modeled instances of objects representing heterogeneous storage resources is provided step . Policy based scheduling model modifies ports A B C D and or initiator ports A B C D to manage the I O paths between the data storage volume and the data storage hosts Step . As shown in port A is connected to initiator port A through transport zone thereby reserving port A for Host . In many embodiments a port mapping may be modified to ensure a proper number I O paths are created to achieve a desired level of availability. In other embodiments a port mapping may be modified to ensure that multiple I O paths do not share a common fault domain with respect to ports directors or SAN switches. In some embodiments a port mapping may be used to ensure proper balancing of I O bandwidth across array ports.

Refer now to example embodiments of . As shown in a policy based scheduling model enabled for providing modeled instances of objects representing a heterogeneous storage resource Step . In contrast to a third transport zone is created adding an additional transport zone between the storage data resource and the data storage hosts . Step . As shown director port A is reserved for use by initiator port A.

The methods and apparatus of this invention may take the form at least partially of program code i.e. instructions embodied in tangible non transitory media such as floppy diskettes CD ROMs hard drives random access or read only memory or any other machine readable storage medium.

The logic for carrying out the method may be embodied as part of the aforementioned system which is useful for carrying out a method described with reference to embodiments shown in for example . For purposes of illustrating the present invention the invention is described as embodied in a specific configuration and using special logical arrangements but one skilled in the art will appreciate that the device is not limited to the specific configuration but rather only by the claims included with this specification.

Although the foregoing invention has been described in some detail for purposes of clarity of understanding it will be apparent that certain changes and modifications may be practiced within the scope of the appended claims. Accordingly the present implementations are to be considered as illustrative and not restrictive and the invention is not to be limited to the details given herein but may be modified within the scope and equivalents of the appended claims.

