---

title: Thermal and power aware graphics processing
abstract: Embodiments for thermal and/or power aware graphics processing are provided. In an embodiment, a thermally and/or power adaptive graphics processing environment is presented. The graphics processing environment includes various thermally and/or power adaptive elements, each of which may be thermally and/or power aware (adaptive) in the sense that it may adapt at least one aspect of its operation and/or outputs based on thermal and/or power information to effectuate a change in graphics processing in any element (including itself) of the environment. This may include changing or causing a change in at least one of a graphics element, feature, setting, or characteristic based on thermal and/or power information. In an embodiment, thermal and/or power based adaptation may include software and/or hardware adaptation of graphics processing to affect thermal and/or power performance.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09047835&OS=09047835&RS=09047835
owner: Broadcom Corporation
number: 09047835
owner_city: Irvine
owner_country: US
publication_date: 20120319
---
This application claims the benefit of U.S. Provisional Patent Application No. 61 524 538 filed Aug. 17 2011.

In conventional graphics environments graphics are processed based on fixed settings that are typically set by the user. Often the user is unable to optimize the graphics settings based on current conditions e.g. temperature power available resources etc. . Further as conditions within the graphics environment change e.g. due to thermal power and or user changes the settings become even more sub optimal wasting available resources and degrading the user experience.

The present disclosure will be described with reference to the accompanying drawings. Generally the drawing in which an element first appears is typically indicated by the leftmost digit s in the corresponding reference number.

According to embodiments as further described below any element of example environment may be thermally and or power aware adaptive in the sense that it may adapt at least one aspect of its operation and or outputs based on thermal and or power information to effectuate a change in graphics processing in any element including itself of example environment . This may include changing or causing a change in at least one of a graphics element feature setting or characteristic based on thermal and or power information.

Adaptive graphics sources and or source elements may include sources that contain or generate graphics and or sources that contain or generate graphics elements. Graphics elements are elements that can be used to generate graphics and or to render graphics on a physical medium such as a display for example. Adaptive graphics sources and or source elements may be embodied as servers and or other associated program code that generate and store graphics and or graphics elements.

Adaptive graphics sources and or source elements may deliver graphics and or graphics elements to different remote end points. For example adaptive graphics sources and or source elements may deliver graphics and or graphics elements to smart phone laptop and or gaming device via communication networks . Communication networks may include any combination of without limitation a cellular network the Internet a wireless mobile network and a wireless Wide Area Network WAN Local Area Network LAN .

Adaptive graphics sources and or source elements may also deliver graphics and or graphics elements to display . Display may be a television TV or a computer monitor. This may be performed directly or through one or more intermediate nodes such as headend and middling node . Headend may be without limitation a cable fiber or satellite network headend. For example headend may be a server that delivers graphics graphics elements. Middling node may be without limitation a set top box STB gateway access point or a gaming unit console.

Adaptive graphics sources and or source elements may be thermally and or power aware. As such adaptive graphics sources and or source elements may adapt independently any feature or characteristic of its generated graphics or graphics elements based on thermal and or power information. For example adaptive graphics sources and or source elements may be delivering real time graphics to display . In response to thermal and or power information received from display and or in response to a control signal from display or from middling node for example adaptive graphics sources and or source elements may adapt the resolution for example of the graphics being delivered. In another example the color depth of the graphics may be adapted. Adaptation may be graduated step wise or continuous.

In addition graphics adaptation may take place independently at one or more nodes anywhere in the path between adaptive graphics sources and or source elements and display . For example while the resolution of graphics being transmitted from adaptive graphics sources and or source elements to display is being adapted at adaptive graphics sources and or source elements the color depth of the same graphics may be adapted at middling node based on the same or different thermal and or power information.

Thermal and or power based adaptation of graphics may also take place in a user equipment device such as smart phone laptop gaming device and display . The user equipment device may include a thermally and or power aware adaptive system . System may include one or more components each of which may include a participant to enable thermally and or power aware operation at the user equipment.

Without limitation and by way of example system may include local adaptive graphics sources and or source elements a central processing unit CPU a thermally and or power adaptive graphics processing circuitry an adaptive power source thermally and or power adaptive graphics drivers and or application programming interfaces APIs and a removable adaptive graphics source interface .

Local adaptive graphics sources and or source elements may be thermally and or power aware. As such local adaptive graphics sources and or source elements may adapt independently any feature or characteristic of its generated graphics or graphics elements based on thermal and or power information. Graphics sources and or source elements may be associated with an application program that generates user graphics such as a video game for example. Similarly system may interface via removable graphics source interface with a removable thermally and or power aware graphics source. The removable graphics source may be a dongle memory component or Video Compact Disc DVD for example.

CPU may be thermally and or power aware. For example CPU may adaptively vary its mode of operation e.g. speed based on thermal and or power information. For example in response to power information indicating that the power supply is below a given threshold CPU may adapt its clocking frequency to extend the battery lifetime. In another example CPU may reduce its clocking frequency in response to thermal information indicating that graphics processing circuitry is overheating thereby forcing a less demanding mode of operation at graphics processing circuitry .

Thermally and or power adaptive graphics processing circuitry is thermally and or power aware. As further described below graphics processing circuitry may rely on historical current and or predicted thermal and or power information to adapt graphics features on a feature by feature basis. Adaptation may also depend in part on system characteristics and limitations as well as performance goals e.g. green performance requirements battery lifetime requirements etc. . For example in deciding to increase the refresh rate graphics processing circuitry may take into account one or more of the maximum refresh rate of the display thermal considerations of increasing the refresh rate based on historical current and or predicted thermal information and power consumption considerations based on green performance requirements. Adaptive graphics drivers and or APIs may also be thermally and or power aware like graphics processing circuitry .

Thermal and or power based adaptation by graphics processing circuitry and or by adaptive graphics drivers and or APIs may be self driven i.e. initiated based on internal processes or functions . Alternatively or additionally adaptation may be based on control signals received from external components including user driven control signals. For example in a battery powered environment providing graphics at a first performance level the user may be prompted with the battery falling below a given threshold to select between continuing at the first performance level with a first associated remaining battery time or to reduce graphics performance to a second performance level with a second associated remaining battery time . The user input may cause adaptive graphics processing circuitry to adapt one or more graphics feature as appropriate to ensure that the user selection is enabled.

In addition to adapting in response to external control signals graphics processing circuitry and or adaptive graphics drivers and or APIs may in turn communicate with external components to cause them to adapt based on thermal and or power information. For example in response to thermal and or power information graphics processing circuitry may adapt one or more features of the graphics settings. In view of this adaptation graphics processing circuitry may communicate with a running thermally and or power adaptive graphics application e.g. a gaming application to cause it to adapt its settings accordingly. For example graphics processing circuitry may have increased the display resolution such that anti aliasing being performed by the graphics application is no longer needed and can be disabled thereby lowering the processing requirements of the graphics application.

Furthermore as further described below graphics processing circuitry may implement a thermally and or power adaptive hardware architecture which can be scaled on the fly based on thermal and or power information. The thermally and or power adaptive architecture may include one or more hardware software components that are thermally and or power adaptive.

An example scenario that illustrates thermal based graphics adaptation according to an embodiment of the present disclosure is now described with respect to adaptive graphics sources and or source elements headend middling node and display . This example is provided for the purpose of illustration only and is not limiting. As would be understood by a person of skill in the art based on the teachings herein similar thermal based graphics adaptation may be applied within other elements or communication paths of example environment and may also be extended to different environments than example environment .

As described above in an embodiment thermal information from display and or middling node headend and adaptive graphics sources may cause any one of adaptive graphics sources and or source elements headend and middling node to adapt its operation. In an example embodiment this graphics adaptation may be driven by the below described constraints and objectives and may include adaptation of graphics contents as further described below.

Graphics processing is usually performed by graphics processors on board or via graphics cards within any of adaptive graphics sources headend middling node smart phone laptop gaming device and possibly even display . Such graphics processors and associated circuitry along with other device circuitry and components generate heat and consume power. For a given graphics configuration and a particular thermal dissipation environment e.g. packaging characteristic cooling systems ambient temperature etc. a graphics processor is characterized by a thermal configuration which includes the thermal characteristics of the graphics processor. Typically for different graphics configurations and or thermal dissipation environments the graphics processor has different thermal configurations.

Generally higher quality graphics video output of the graphics processor generates higher heat and consumes greater energy. Absent power consumption concerns viewers typically demand the highest possible graphics video quality that is noticeably better than lower quality counterparts. Typically graphics processors and associated circuitry using a variety of techniques selected from an overall set of techniques via configurations setup receive graphics instructions and use graphics data and related data to generate raw or compressed video frame output.

Referring back to adaptive graphics sources and or source elements may generate first graphics content including for example i graphics instructions e.g. graphic object commands such as move shrink expand hide overlap draw commands such as lines and common shapes objects text commands etc. ii graphics data e.g. 36 images of an object at 10 degree rotation resolution yielding a 360 degree sequence of image data graphics related data e.g. texture maps and iii graphics configuration commands e.g. use shading with two light sources distance of object discard gamma resolution framing etc. . Generally most elements of the first graphics content are generated and delivered by adaptive graphics sources with the expectation that they will be consumed i.e. intended to be processed by a node in the downstream path e.g. headend middling node display . As such changing one characteristic or element of the first graphics content may require changes to other characteristics and other graphics content elements.

In an embodiment adaptive graphics sources may generate the first graphics content on the fly in real time. Alternatively or additionally adaptive graphics sources may retrieve the first graphics content or a portion thereof predefined from a storage. In an embodiment adaptive graphics sources delivers the first graphics content as is without regard to downstream thermal conditions. Alternatively adaptive graphics sources may adapt the first graphics content via real time processing or via a selection of predefined alternatives from the storage. Such adaptation may be in response to downstream thermal conditions including thermal characteristics e.g. of graphics processors sensed experienced or predicted to be experienced by one or more of adaptive sources headend middling node and display . In embodiments adaptation of graphics content may include modifying one or more of graphics instructions graphics data graphics related data and graphics configuration commands contained in the graphics content.

In an embodiment headend may receive the first graphics content from adaptive graphics sources . Headend may modify the first graphics content in response to thermal conditions sensed experienced or predicted by one or more of headend middling node and display . In addition headend may generate second graphics content. The second graphics content may be generated from the first graphics content for example by modifying one or more of graphics instructions graphics data graphics related data and graphics configuration commands contained in the first graphics content. In an embodiment the first graphics content has a higher thermal loading characteristic i.e. expected to cause higher thermal output by graphics processors than the resulting second graphics content. In an embodiment the second graphics content may be an overlay or otherwise merged along with the first graphics content for a single viewing experience. Alternatively the second graphics content may be generated separately from the first graphics content and may be intended for separate consumption than the first graphics content e.g. a separate window frame or object . As with adaptive graphics sources headend may adapt the second graphics content via real time processing or via a selection of predefined alternatives from storage.

In similar fashion middling node may receive the first graphics content and or the second graphics content from headend . One or more of the first graphics content and the second graphics content may be adapted by middling node in response to thermal conditions sensed experienced or predicted by one or more of middling node and display . In addition middling node may generate third graphics content from one or more of the first graphics content and the second graphics content or separately from either the first graphics content and the second graphics content. The third graphics content may be generated to have a lower thermal loading characteristic than the first or second graphics content. Middling node may further adapt the third graphics content via real time processing or via a selection of predefined alternatives from storage.

In an embodiment middling node may be the intended consumer of the first second or third graphics contents. In an embodiment graphics content is consumed or processed to generate video frame data. Accordingly in an embodiment middling node may process the first second or third graphics content to generate and deliver compressed video frame data e.g. MPEG to display for decoding and display. In another embodiment display may have the ability to process graphics content. Accordingly middling node may forward without processing the first second or third graphics content to display . In yet another embodiment middling node may process a portion e.g. the first graphics content of the graphics contents and forward without processing another portion e.g. the second or third graphics content of the graphics content.

As would be understood by a person of skilled in the art based on the teachings herein the above described example scenario may be applied in the same fashion with respect to power information or thermal and power information instead of thermal information only. To support these example scenarios and as alluded to above one or more elements of example environment may include without limitation one or more of a thermal power information gathering capabilities and or historical thermal power information and prediction processing capabilities b adaptive power sources c graphics content generation capabilities d graphics content selection capabilities pre stored e modification capabilities of upstream sourced graphics content and f video frame data generation from graphics content capabilities.

Adaptive power source may be thermally and or power aware. As such adaptive power source may vary the supply voltage that it provides based on thermal and or power information. For example adaptive power source may reduce the supply voltage thus causing a reduction in overall graphics performance in response to a control signal indicating overheating by graphics processing circuitry . In another example adaptive power source may reduce the supply voltage thus causing a reduction in overall graphics performance in response to a user selection opting for a longer user experience time at the expense of lower graphics performance. In yet another example adaptive power source may increase the supply voltage to support faster processing in view of an increase in graphics performance demand.

Temperature sensor circuitry include without limitation embedded on chip temperature sensors outside housing temperature sensors and inside housing temperature sensors . Temperature sensor circuitry thus generates various temperature sensor data which can be used to determine current thermal conditions as well as to predict future thermal conditions at different locations within device .

Storage includes without limitation temperature sensor data processing code current and or predicted thermal performance data thermally and or power adaptive client side graphics applications thermally and or power adaptive stand alone graphics applications thermally and or power adaptive APIs and thermally and or power adaptive graphics drivers .

Processing code includes one or more functions for processing temperature sensor data. For example processing code may include a code for processing temperature sensor data to generate current and or predicted thermal performance data . The code may use historical and or current temperature sensor data to make predictions regarding future thermal performance for various graphics performance settings. Predictions may include for example estimated times until a temperature threshold is reached at the various graphics performance settings or the predicted thermal effect of adjusting a graphics feature setting.

Adaptive applications and APIs and graphics drivers are thermally and or power adaptive as described above with respect to adaptive graphics drivers and or APIs for example. Client side graphics applications include applications that may communicate with counterpart server side applications. As such thermal and or power based adaptation of graphics applications may additionally be performed by the server side applications. Stand alone applications include applications with no server side counterpart applications.

Host processing circuitry is the main processor of example device . Host processing circuitry may include an integrated graphics processing circuitry . Alternatively graphics processing circuitry may be separate from host processing circuitry . One or more thermally and or power adaptive graphics applications graphics APIs graphics drivers etc. may operate inside host processing circuitry .

In embodiment host processing circuitry and or graphics processing circuitry receive first graphics content from communication interfaces . The first graphics content may be from an upstream node and intended for downstream delivery. Host processing circuitry and or graphics processing circuitry may perform one or more of a adaptively modifying one or more elements of the first graphics content b adaptively generating second graphic content e.g. from the first graphics content c modifying the first graphics content or generating the second graphic content based on local and or downstream power thermal information d merging the first and second graphics contents and forwarding the merged content downstream e merging a portion of the first graphics content and a portion of the second graphics content and forwarding the merged portions and unmerged portions of the first and second graphics content downstream f forwarding the first and second graphics contents downstream separately g processing the first graphic content and or the second graphic content to generate video frame data and forwarding the video frame data downstream and h encoding the generated video frame data for downstream delivery.

Host processing circuitry and program code enable a thermally and or power adaptive graphics application program graphics APIs settings managers and graphics drivers to execute. Thermal and or power based adaptation can take place on a graphics feature basis manually or automatically in any one or more of graphics application programs and graphics APIs settings managers and graphics drivers .

For example as shown in graphics application program may provide a graphics user interface . Graphics user interface can be used to adjust a number of graphics features some or all of which may be thermally and or power adaptive. Upon making a manual or automatic adjustment to a graphics feature a built in system hierarchy may determine whether or not and the extent to which the adjustment is actually performed. For example although graphics user interface provides an option to adjust the refresh rate this setting may be constrained by what the display can handle. As such certain adjustments by the application program may not always result in corresponding changes in the feature adjusted.

Certain graphics features may be thermally and or power adapted in one or more locations within the built in system hierarchy. For example a feature may be thermally adaptable in application program and also thermally and or power adaptable in graphics APIs . On the other hand other features such as the depth of field for example can only be set in the application program. As such thermal and or power based adaptation can be centralized or distributed on a feature by feature basis.

Interface circuitry may include one or more interfaces that allow host processing circuitry to communicate with external components. In an embodiment interface circuitry include an interface that allows host processing circuitry to communicate with external graphics processing circuitry such as graphics processing circuitry .

Referring back to graphics processing circuitry may be a graphics processing unit GPU or a visual processing unit VPU . Graphics processing circuitry includes specialized circuitry for processing graphics data. In an embodiment graphics processing circuitry is integrated within host processing circuitry . Alternatively graphics processing circuitry is external to host processing circuitry . As further described below graphics processing circuitry may be thermally and or power adaptive both in terms of software and hardware.

As shown in example architecture may include a thermally and or power predictive command processor a thermally and or power adaptive command translator a thermally and or power adaptive setup engine with supporting functions a thermally and or power adaptive dispatch processor and shader caches a thermally and or power adaptive array of stream processing units a thermally and or power adaptive array of texture units a memory read write R W cache and stream output buffer texture and vertex caches a thermally and or power adaptive controller a shader export module a thermally and or power adaptive array of render back end units a color cache internal and external communication interfaces and or buses external sensor interface s and a plurality of internal on chip sensors . As would be understood by a person of skill in the art based on the teachings herein example graphics architecture may include more or less elements than shown in . For example some of the shown elements may be optional and can thus be eliminated or located outside of example architecture .

Example graphics processor architecture may adapt one or more of its thermally and or power adaptive elements in response to thermal and or power information. Thermal and power information may be internal i.e. produced by on chip sensors or external i.e. received by external sensor interface s e.g. in housing sensor data and external sensor data . Further thermal and or power based adaptation may be centralized i.e. initiated by a sole decision making element e.g. controller or distributed i.e. self initiated by the adapting element itself and may be performed by internal and or external elements.

In embodiments thermal and or power based adaptation may include software and or hardware adaptation of graphics processing to affect thermal and or power performance. For example dispatch processor controls thread execution units allocating graphics tasks to stream processing units texture units and or render back end units based on requirements and priorities. Thermal and or power based adaptation by dispatch processor may involve for example scaling itself down to handle a lower number of threads and or a lower number of stream processing units texture units and render back end units . This adaptation may be performed by adapting the software that controls the operation of dispatch processor .

Alternatively or additionally thermal and or power based adaptation by dispatch processor may involve adjusting on the fly the number of stream processing units texture units and or render back end units that are powered up. This adaptation thus involves changing the graphics processing hardware architecture to change the thermal and or power performance. In an embodiment dispatch processor performs this adaptation in response to a control signal from controller .

Referring back to adaptive power supply includes control circuitry that may be thermally and or power adaptive. Optionally control circuitry generates and or has available various power thermal performance data including without limitation battery power level battery power usage rates predicted remaining life and green performance data .

Control circuitry may rely on the power thermal performance data to vary the supply voltage provided by adaptive power supply . For example control circuitry may reduce the supply voltage thus causing a reduction in overall graphics performance in response to green performance data indicating overheating by graphics processing circuitry . In another example control circuitry may use battery power usage rates which may include battery power usage rates for various graphics performance settings and or predicted remaining life which may include predicted remaining life for various graphics performance settings to increase or decrease the supply voltage in response to a user selection opting for a particular graphics performance setting. In another example control circuitry may adjust the supply voltage in response to preset triggers. For example if battery power level drops below a predetermined threshold control circuitry may be preset to reduce the supply voltage by a certain amount thereby reducing graphics performance and increasing remaining battery life.

Graphics interface s include interfaces that may be used to connect example device to external display systems to display graphics processed by example device .

Communication interfaces include wired and or wireless interfaces which may be used by example device to communicate with external systems. For example as shown in a thermally and or power aware device e.g. may communicate with remote adaptive graphics sources and or source elements headend or middling node . In embodiments each of these remote elements may include a thermally and or power adaptive graphics source which may participate in thermal and or power based adaptation of graphics at the device.

Remote graphics source and or server elements may include sources that contain or generate graphics and or sources that contain or generate graphics elements. Graphics elements are elements that can be used to generate graphics and or to render graphics on a physical medium such as a display for example. Remote graphics source and or server elements may be thermally and or power aware. As such remote graphics source and or server elements may adapt independently any feature or characteristic of its generated graphics or graphics elements based on thermal and or power information.

Graphics application program may include a graphics interface that can be used to adjust a number of graphics features some or all of which may be thermally and or power adaptive. In an embodiment each adaptable graphics feature may be adapted in a graduated or a step wise fashion.

Graphics application program may be the server side of a graphics application which further includes a client side application at a remote device. Thermal and or power based adaptation of graphics by the application may be performed by the client side and or the server side application on a feature by feature basis. Adaptation may be initiated and performed by the client side application and communicated to the server side application initiated by the client side application performed by the server side application and communicated to the client side application initiated and performed by the server side application and communicated to the client side application or initiated by the server side application performed by the client side application and communicated to the server side application .

In an embodiment controller uses communication interface circuitry to initiate perform or communicate thermal and or power graphics adaptation to a remote device. Controller may communicate for example with the CPU graphics applications graphics APIs graphics drivers or GPU of the remote device. For example controller may communicate with the graphics API e.g. DirectX to cause thermal and or power based adaptation in a graphics application program. The same graphics application program may also be adapted locally through the same graphics API by the GPU for example of the device. As such the graphics API serves an interface for both local and remote based adaptation of the graphics application program.

GPU includes graphics processing circuitry and code . Graphics processing circuitry and code support the processing of graphics data. GPU also includes data which may include graphics feature settings includes current settings for various graphics features graphics configurations with associated power requirement and or prediction data e.g. predicted thermal and or power consumption data for various graphics configurations and or various graphics feature settings . In addition GPU may include display s characteristics data e.g. resolution refresh rate color depth etc. and 3D features and configurations data .

GPU may use one or more of data and in making thermal and or power based adaptation of graphics. For example before adapting the graphics resolution GPU may use data to check that the resolution does not exceed the display resolution. Then GPU may use data to check the predicted effect of the resolution change on power and or thermal goals. GPU also uses data the current graphics feature settings in generating its graphics output. The graphics feature settings may be defined by one or more elements of the system. For example a local or remote graphics application program API settings manager or graphics driver may set certain graphics features while the display sets other graphics features based on its limitations.

As shown in host processing circuitry remote graphics source and GPU may interact with each other to effectuate thermal and or power based adaptation of graphics. Initiation and performance of thermal and or power based graphics adaptation can be done on the fly on a graphics feature basis by host processing circuitry remote graphics source and or GPU . Further as described above thermal and or power based graphics adaptation may be initiated and or performed on a graphics feature basis by one or more elements of each of host processing circuitry remote graphics source and GPU .

Information regarding thermal and or power based adaptation is communicated around as necessary in example environment so that all graphics participants can also adapt their behavior accordingly. For example upon lowering the graphics resolution GPU may communicate this change to graphics application programs of host processing circuitry . In response graphics application programs may adjust their own graphics settings accordingly. For example graphics application programs may have been operating with a higher resolution setting than the one set by GPU . Continuing with the same higher setting given that GPU has limited the resolution to a lower setting would be wasteful. As such graphics application programs also reduce their resolution setting.

Embodiments have been described above with the aid of functional building blocks illustrating the implementation of specified functions and relationships thereof. The boundaries of these functional building blocks have been arbitrarily defined herein for the convenience of the description. Alternate boundaries can be defined so long as the specified functions and relationships thereof are appropriately performed.

The foregoing description of the specific embodiments will so fully reveal the general nature of the disclosure that others can by applying knowledge within the skill of the art readily modify and or adapt for various applications such specific embodiments without undue experimentation without departing from the general concept of the present disclosure. Therefore such adaptations and modifications are intended to be within the meaning and range of equivalents of the disclosed embodiments based on the teaching and guidance presented herein. It is to be understood that the phraseology or terminology herein is for the purpose of description and not of limitation such that the terminology or phraseology of the present specification is to be interpreted by the skilled artisan in light of the teachings and guidance.

The breadth and scope of embodiments of the present disclosure should not be limited by any of the above described exemplary embodiments but should be defined only in accordance with the following claims and their equivalents.

