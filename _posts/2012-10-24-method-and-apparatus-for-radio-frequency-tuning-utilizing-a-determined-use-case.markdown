---

title: Method and apparatus for radio frequency tuning utilizing a determined use case
abstract: A system that incorporates teachings of the present disclosure may include, for example, a memory, a transceiver, a plurality of antennas coupled with the transceiver, a matching network coupled with at least one of the plurality of antennas, a detector coupled with the matching network where the detector obtains operational data associated with at least two of the plurality of antennas, and a controller circuit coupled with the detector and the matching network. The controller circuit can analyze the operational data to determine an operational data differential between the at least two of the plurality of antennas. The controller circuit selects a use case for the communication device from among a group of use cases stored in the memory based on the operational data differential. Additional embodiments are disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09496901&OS=09496901&RS=09496901
owner: BlackBerry Limited
number: 09496901
owner_city: Waterloo
owner_country: CA
publication_date: 20121024
---
This application claims priority to EP Application Serial Number 12189423.2 filed Oct. 22 2012 which is incorporated herein by reference in its entirety.

The present disclosure relates to a method and apparatus for radio antenna frequency tuning and in particular determining a use case in order to perform the impedance tuning in a communication device.

Existing multi frequency wireless devices e.g. radios use an antenna structure that attempts to radiate at optimum efficiency over the entire frequency range of operation but can really only do so over a subset of the frequencies. Due to size constraints and aesthetic design reasons the antenna designer is forced to compromise the performance in some of the frequency bands. An example of such a wireless device could be a mobile telephone that operates over a range of different frequencies. The antenna will not radiate efficiently at all frequencies due to the nature of the design and the power transfer between the antenna the power amplifier and the receiver in the radio will vary significantly.

Additionally an antenna s performance is impacted by its operating environment. For example multiple use cases exist for radio handsets which include such conditions as the placement of the handset s antenna next to a user s head or in the user s pocket or the covering of an antenna with a hand all of which can significantly impair the wireless device antenna s radiated efficiency.

Further many existing radios use a simple circuit composed of fixed value components that are aimed at improving the power transfer from power amplifier to antenna or from the antenna to the receiver but since the components used are fixed in value there is always a compromise when attempting to cover multiple frequency bands and multiple use cases.

The present disclosure provides a method and apparatus for radio antenna frequency tuning. One or more exemplary embodiments can identify or determine a use case for a communication device by selecting the use case from among a group of use cases based on operational data associated with antennas of the communication device. For example Receive Signal Strength Indicator RSSI information and phase information can be obtained for first and second antennas and the differential of the RSSI and phase respectively for each antenna can be used in selecting a use case from a look up table that has been mapped to these differentials. The mapping of the look up table can be based on empirical data such as from chamber testing. In one or more embodiments the selected use case can be used for performing impedance tuning such as in an open loop algorithm or in combination with a closed loop algorithm utilizing a variable reactance of a tunable element of a matching network coupled with one or both of the first and second antennas. In one or more embodiments the detection or determination of the use case can be repeated throughout operation of the mobile device such as periodically and or based on a detected operational parameter change e.g. detected motion of the device detected change in measured metrics associated with the transceiver and so forth . By repeating the detection or determination of the use case the mobile device can identify when there has been a change in use case for the mobile device e.g. a user has switched from left hand up to head state to hands free operation state and can tune according to the newly detected use case.

In one or more embodiments a use case e.g. mobile device held in left or right hand or held against the head can be detected or otherwise determined based on a comparison of operational data associated with different antennas of the mobile device. The determined use case which in this example can be determined without user input and without mechanical sensor feedback can be utilized for impedance tuning of one or more matching networks associated with one or more of the antennas. For example one or more of the matching networks can be set to a predefined stage based on the use case where the predefined stage is determined during product development to perform better or best at that specific use case. In this example the Total Radiated Power TRP and or Total Isotropic Sensitivity TIS and or throughput performance can be improved or maximized based on the tuning which can be open loop or a combination of open and closed loops.

In one exemplary embodiment a mobile communication device can include a first antenna and a first matching network coupled with a transceiver where the first matching network includes a first tunable element with a variable reactance for impedance tuning. The mobile communication device can include a second antenna and a second matching network coupled with the transceiver where the second matching network includes a second tunable element with a variable reactance for impedance tuning. The mobile communication device can include a detector coupled with the first and second matching networks where the detector obtains RSSI information and phase information for the first and second antennas. The mobile communication device can include a controller circuit coupled with the detector and the first and second matching networks where the controller circuit analyzes the RSSI information and the phase information to determine an RSSI differential and a phase differential between the first and second antennas. The controller circuit can select a use case for the mobile communication device from among a group of use cases based on the RSSI differential and the phase differential.

In one exemplary embodiment a method can include obtaining by a detector of a mobile communication device RSSI information and phase information for a first and second antenna of the mobile communication device. The method can include determining by a controller circuit of the mobile communication device an RSSI differential and a phase differential between the first and second antennas based on the RSSI information and the phase information. The method can include selecting by the controller circuit a use case for the mobile communication device from among a group of use cases based on the RSSI differential and the phase differential.

In one exemplary embodiment a communication device can include a memory a transceiver and a plurality of antennas coupled with the transceiver. The communication device can also include a matching network coupled with at least one of the plurality of antennas and a detector coupled with the matching network where the detector obtains operational data associated with at least two of the plurality of antennas. The communication device can further include a controller circuit coupled with the detector and the matching network where the controller circuit analyzes the operational data to determine an operational data differential between the at least two of the plurality of antennas. The controller circuit can select a use case for the communication device from among a group of use cases stored in the memory based on the operational data differential.

Referring to a portion of a communication device is illustrated having multiple antennas and corresponding tunable matching networks . In this exemplary embodiment there are two antennas which can be a transmit receive antenna and a diversity reception antenna. However it should be understood that other numbers types and or configurations of antennas can be utilized with device . For instance the antennas can be spatially diverse pattern diverse polarization diverse and or adaptive array antennas. The tunable matching networks and allow for tuning and or detuning of one or more of the antennas .

The matching networks can include one or more tunable elements e.g. a capacitor s with a tunable dielectric constant and or a capacitor s of a fixed capacitance controlled by one or more micro electromechanical systems MEMS switches one or more mechanical switches and or one or more semiconductor switches that enable impedance tuning. The one or more tunable elements can also be other types of components that have a variable and adjustable reactance that enables the impedance tuning. Matching networks are illustrated as separate networks that are connected to a feed or input output port of the antenna. However the matching networks can be combined into a single matching network that can perform impedance tuning for both antennas such as through use of switches that select desired variable reactance components for performing tuning. In one or more embodiments one or both of the matching networks can be on antenna tuning matching networks such that the tunable element s are connected e.g. directly with radiating elements or a portion thereof of the antenna and or . In another embodiment multiple matching networks e.g. a first matching network connected at the antenna feed and a second matching network connected directly to one or more of the radiating elements can be connected to a single antenna such as antenna or antenna .

One or more of the exemplary embodiments can also be other types of multiple antenna systems such as a MIMO multiple input and multiple output system. The multiple antennas can be utilized for improving communications such as through switching or selecting techniques including analyzing noise in the multiple signals and selecting the most appropriate signal. The multiple antennas can also be used with combining techniques where the signals can be added together such as equal gain combining or maximal ratio combining. Other techniques for utilizing multiple signals from multiple antennas are also contemplated by the exemplary embodiments including dynamic systems that can adjust the particular techniques being utilized such as selectively applying a switching technique and a combination technique. The particular position s of the antenna s can vary and can be selected based on a number of factors including being in close enough proximity to couple RF energy with each other. Communication device can include a number of other components such as directional couplers sensor ICs bias control and other control ICs. As an example a transceiver of the communication device can include multiple receivers and or transmitters for the multiple antennas and to serve the purpose of diversity reception. The tunable matching networks can include various other components in addition to or in place of the components described above including components described below with respect to the other exemplary embodiments.

Communication device can include a detector or other device for measuring or otherwise determining parameters associated with the antennas . The parameters can include the RSSI and the phase associated with the antennas . In one embodiment the detector can be an application programming interface that measures the desired parameters. Communication device can also include a controller that identifies or otherwise determines a use case for the communication device e.g. without user input and or without mechanical sensors detecting a mechanical configuration such as slider out of the communication device . The controller can be various types of devices such as a micro controller or other component having software which performs an algorithm to compare RSSI information for the antennas and to compare phase information for the antennas to detect a difference or delta to identify or otherwise determine the present use case of the communication device.

Communication device is illustrated with a separate detector and controller where both components are coupled with the matching networks as well as coupled with each other. However one or more of the exemplary embodiments can utilize other configurations of components in order to acquire and analyze the RSSI and phase information of the antennas or other antenna parameters such as integrating the detector and the controller into a single component. Communication device can perform antenna tuning for one or both of the antennas via adjusting one or both of the matching networks based on the identified use case. The use case can be utilized in an open loop tuning algorithm e.g. selecting tuning values for one or more variable reactances based on a look up table or other stored values mapped to the use case and or can be utilized in conjunction with a closed loop algorithm e.g. the use case is a parameter of the algorithm that also relies upon operational parameters of the communication device such as output power of the transmitter return loss received power current drain and or transmitter linearity . In one or more embodiments the pre defined tuning states which are mapped to the use cases can be determined during product development or manufacture based on empirical data. For example empirical data can be stored in a look up table that is based on a desired TRP and or TIS and which can be indexed based on use cases. In this example the empirical data can be obtained through chamber testing under various conditions including under various use cases. In another embodiment the empirical data can be indexed e.g. in combination with the use cases based on other factors including operating frequency device mode of operation device operating metrics and so forth. In another embodiment the empirical data of the look up table can be based on desired Uplink UL and or Downlink DL throughput which can be indexed based on use cases. In this embodiment the empirical data can be indexed e.g. in combination with the use cases based on other factors including operating frequency device mode of operation device operating metrics and so forth.

Referring to method is illustrated which can be utilized by the communication device for identifying or otherwise determining the present use case for the communication device. Method can be practiced with more or less than the steps illustrated in and can be practiced by various communication devices including communication device . At an initial or ideal state can be implemented by the matching networks in order to obtain antenna parameters. The particular initial state of the matching networks can vary and can be predefined such as based on empirical data which indicates an initial state that affords a more accurate determination of antenna parameters. For instance the initial state at can be settings for the variable reactive elements that correspond with a free state operation of the phone. Other initial states for the tuning network can be utilized that provide a baseline or zero line for determining operational data for the antennas.

At operational data associated with at least two antennas e.g. first antenna and second antenna of a multi antenna system can be requested. The operational data can include RSSI information and phase information. At the operational data such as the RSSI and phase information can be retrieved. The particular component retrieving the information can vary and can include a detector or an application programming interface. In this example step retrieves an RSSI of 88.7 and a phase of 0 for the first antenna and an RSSI of 83.3 and a phase of 330.45 for the second antenna . These values are meant to be exemplary and other values can be retrieved as a result of the particular use case effecting the antennas operation.

At the operational data differential can be determined such as the RSSI differential e.g. 5.4 and the phase differential e.g. 330.45 . At a use case can be selected from a group of use cases that are mapped to the operational data differential which in this embodiment is the RSSI differential and the phase differential. The mapping can be based on empirical data that was pre determined such as during chamber testing for the model of the mobile communication device. The group of use cases and the corresponding mapping can be configured in a look up table e.g. table shown in so that the controller circuit can select the use case from among the group of stored use cases based on the differentials. In this example the RSSI differential of 5.4 and the phase differential of 330.45 is mapped to a use case of head hand right and is not mapped to the other use cases of head hand left hand right and hand left. 

At the matching network s can be set or otherwise adjusted based on the selected use case. The exemplary embodiments can utilize open loop tuning closed loop tuning or a combination of open and closed loop tuning. For example the use case can be used in an open loop tuning algorithm in which variable reactances are directly selected such as from another look up table based on the selected use case. In another embodiment the use case can be used as part of a closed loop algorithm in which the use case is a factor along with one or more measured parameters of the mobile communication device such as output power return loss received power current drain or transmitter linearity. Other tuning algorithms can also be implemented that make use of the selected use case such as utilizing the use case as a starting point in the tuning e.g. utilizing the selected use case to achieve a 50 Ohm match and then performing additional tuning such as based on TRP TIS UL throughput and or DL throughput. In one embodiment at tuning can be adjusted based on the RSSI and relative phase being within a desired range.

Method enables a pair of data points for each antenna e.g. RSSI and phase data points to be utilized to select or otherwise determine a use case that the mobile communication device is presently operating in such as operating in a flip open state a slider out state a hand s free operation state a hand held operation state an ear piece speaker operation state or a speaker phone operation state. In one or more embodiments the use case can be determined without receiving any user input indicating the use case and without receiving any mechanical sensor information such as a contact sensor detecting a flip open mechanical configuration of the mobile device . In one or more embodiments the use case can be detected solely from at least two operational data associated with the antennas e.g. RSSI and phase and from a relationship between the at least two operational data for each of the antennas such as based on the RSSI differential and the phase differential for the antennas.

In one or more embodiments another look up table as illustrated in can be stored in a memory of a communication device such as device which can be indexed by a controller such as controller of the communication device of according to the determined or detected use case of the communication device as well as one or more other criteria including the operational frequency band. In one or more embodiments the physical use case can represent a physical state of the communication device while a functional use case can represent an operational state of the communication device. For example for a flip phone of an open flip can represent one physical use case while a closed flip can represent another physical use case. In a closed flip state i.e. bottom and top flips are aligned a user may have his her hands surrounding the top flip and the bottom flip while holding the phone which can result in one range of load impedances experienced by an internal or retrievable antenna not shown of the phone . The range of load impedances of the internal or retrievable antenna can be determined by empirical analysis. With the flip open a user may hold the bottom flip with one hand while positioning the top flip near the user s ear when an audio system of the phone is set to low volume. If on the other hand the audio system is in speakerphone mode the user may be positioning the top flip away from the user s ear. In these arrangements different ranges of load impedances can be experienced by the internal or retrievable antenna which can be analyzed empirically. The low and high volume states of the audio system illustrate varying functional use cases. Other examples of use cases can include handheld operations such as shown by handheld and phone to head operations such as shown in handheld and typing operations as shown in and operations while on a metal table as shown in . These are a few examples of use cases and more use cases can be determined or detected according to method in the exemplary embodiments. In one or more embodiments the determined or detected use case can be either or both of a physical or functional use case.

For a phone with a slideable keypad illustrated in the keypad in an outward position can present one range of load impedances of an internal antenna while the keypad in a hidden position can present another range of load impedances each of which can be analyzed empirically. For a smartphone illustrated in presenting a video game the user may hold the phone away from the user s ear in order to view the game. Placing the smartphone in a portrait position can represent one physical and operational use case while utilizing the smartphone in a landscape position presents another physical and operational use case.

A multimode phone capable of facilitating multiple access technologies such as GSM CDMA LTE WiFi GPS and or Bluetooth in two or more combinations can provide additional insight into possible ranges of impedances experienced by two or more internal antennas of the multimode phone . For example a multimode phone that provides GPS services by processing signals received from a constellation of satellites can be empirically analyzed when other access technologies are also in use. Suppose for instance that while navigation services are enabled the multimode phone is facilitating voice communications by exchanging wireless messages with a cellular base station . In this state an internal antenna of the GPS receiver may be affected by a use case of a user holding the multimode phone e.g. near the user s ear or away from the user s ear . The affect on the GPS receiver antenna and the GSM antenna by the user s hand position can be empirically analyzed.

Suppose in another scenario that the antenna of a GSM transceiver is in close proximity to the antenna of a WiFi transceiver. Further assume that the GSM frequency band used to facilitate voice communications is near the operational frequency of the WiFi transceiver. Also assume that a use case for voice communications may result in certain physical states of the multimode phone e.g. slider out which can result in a particular hand position of the user of the multimode phone . Such a physical and functional use case can affect the impedance range of the antenna of the WiFi transceiver as well as the antenna of the GSM transceiver.

A close proximity between the WiFi and GSM antennas and the near operational frequency of the antennas may also result in cross coupling between the antennas thereby changing the load impedance of each of the antennas. Cross coupling under these circumstances can be measured empirically. Similarly empirical measurements of the impedances of other internal antennas can be measured for particular physical and functional use configurations when utilizing Bluetooth WiFi Zigbee or other access technologies in peer to peer communications with another communication device or with a wireless access point .

The number of physical and functional use cases of the communication device can be substantial when accounting for combinations of access technologies frequency bands antennas of multiple access technologies antennas configured for diversity designs such as multiple input and multiple output MIMO antennas and so on. These combinations however can be empirically analyzed for load impedances and affects on other tunable circuits. The empirical data collected can be recorded in the look up table of and indexed according to corresponding combinations of physical and functional use cases which in turn can be determined or detected in whole or in part by method based on a comparison of operational parameters associated with the different antennas. In one or more embodiments the information stored in the look up table can be used in open loop RF tuning applications to initialize tunable circuit components of a transceiver as well as tuning algorithms that control operational aspects of the tunable circuit components.

In one or more embodiments the empirical data of the look up table of can be based on desired TRP and or TIS which can be indexed based on the determined or detected use cases. In this example the empirical data can be obtained through chamber testing under various conditions including under various use cases. In another embodiment the empirical data can be indexed in combination with or in place of the use cases based on other factors including operating frequency device mode of operation device operating metrics and so forth. In another embodiment the empirical data of the look up table of can be based on desired UL and or DL throughput which can be indexed based on the determined or detected use cases according to method . In this embodiment the empirical data can be indexed in combination with or in place of the use cases based on other factors including operating frequency device mode of operation device operating metrics and so forth. In one or more embodiments look up tables and can be combined or otherwise arranged to facilitate a selection of the use case from among a group of use cases based on the comparison of the operational data associated with the antennas e.g. the RSSI and phase differential and to facilitate a selection of tuning states for the matching network s based at least in part on the determined or detected use cases e.g. a tuning state that defines a variable reactance such as a capacitance value to be utilized for the tuning .

In another exemplary embodiment depicts a portion of a communication device such as device in having tunable matching networks for use with a multiple antenna system. In this exemplary embodiment there are two antennas which are a transmit receive antenna and a diversity reception antenna . However it should be understood that other numbers types and or configurations of antennas can be utilized with device . For instance the antennas can be spatially diverse pattern diverse polarization diverse and or adaptive array antennas. Tunable elements can be connected with radiating elements or a portion thereof of the antenna for on antenna tuning. In another embodiment tunable elements can be connected with multiple antennas not shown . Tunable elements allow for tuning and or detuning of one or more of the antennas including in combination with the tuning of the matching networks and or which can be connected at the feed or port of the one or more antennas.

In one embodiment the antennas of communication device can be part of a MIMO multiple input and multiple output system. The multiple antennas can be utilized for improving communications such as through switching or selecting techniques including analyzing noise in the multiple signals and selecting the most appropriate signal. The multiple antennas can also be used with combining techniques where the signals can be added together such as equal gain combining or maximal ratio combining. Other techniques for utilizing multiple signals from multiple antennas are also contemplated by the exemplary embodiments including dynamic systems that can adjust the particular techniques being utilized such as selectively applying a switching technique and a combination technique. The particular position s of the antenna s can vary and can be selected based on a number of factors including being in close enough proximity to couple RF energy with each other.

Communication device can include a number of other components such as directional couplers sensor ICs bias control and other control ICs. This example also includes a transceiver of the communication device that includes multiple receivers and or transmitters for the multiple antennas and to serve the purpose of diversity reception.

In one embodiment a first tunable matching network can be coupled at the feed or port of the transmit receive antenna and a second tunable matching network can be coupled to the feed or port of the diversity reception antenna . Both of these matching networks and can be adjusted e.g. tuned to improve performance of the communication device in response to changes in bands frequencies of operation determined or detected use cases and or proximity of the antennas and to the user or other objects which can affect the impedances presented by the antennas to the Front End Module FEM and transceiver . In one embodiment the feedback line could be removed such as by using the FEM to route signals appropriately to perform these measurements e.g. avoiding filtering out the signals . The tuning of one or more of matching network matching network or tunable element can be based on other criteria such as improving TRP TIS UL throughput and or DL throughput. In one or more embodiments a controller can be used for determining tuning states or settings for one or more of the matching network matching network or tunable element such as providing a bias voltage to voltage tunable capacitors of the matching network s or tunable element.

In one or more embodiments the controller can receive operational data e.g. RSSI information and phase information for each of the antennas . The operational data can be received from one or more detectors such as detector detector detector or directional coupler . The controller can compare the operational data for the antennas to determine a relationship between the data such as determining a differential between the RSSI information and the phase information between antenna and antenna . The controller can use the differential information or other data from a comparison between the antennas operational parameters to determine a present use case for the communication device . In one or more embodiments controller can determine or otherwise detect the use case without user input and without mechanical sensor information such as a mechanical sensor that alarms when the slider is pushed out . In one or more embodiments the controller can select the use case from a look up table stored in a memory of the device in which a group of use cases are mapped to operational data associated with the antennas such as pairs of differentials of operational data for the antennas which may include RSSI and phase differentials for the antennas . For instance the controller can detect that the device is in the use case of head hand right based on the RSSI and phase differentials for the antennas listed in the look up table which correspond to this use case. The look up table can be provisioned or otherwise provided to the device where the use cases and mapping to the operational data e.g. RSSI and phase differential are determined based on empirical data during development or manufacture such as during chamber testing.

The tuning of one or more of matching network matching network or tunable element can be based on the determined or detected use case. In one or more embodiments the determined use case can be used in another look up table e.g. table to identify reactance values that can be used in one or more of matching network matching network or tunable element . In this example the tuning can be performed without using additional criteria such as other parameter measurements. In another example the use case can be used in combination with other criteria such as measured parameters of the device e.g. transmitter reflection loss output power of the transmitter current drain and or transmitter linearity .

In one or more embodiments tunable matching networks and or and or tunable element can be adjusted using other methods and or components some of which were disclosed in U.S. Patent Application Publication No. 2009 0121963 the disclosure of which is hereby incorporated by reference. In one embodiment the detector can be coupled to the device so as to detect RF voltage present at the connection to the diversity reception antenna . Received power levels at this point may be below 50 dBm. Some detectors such as a diode detector or a logarithmic amplifier may not typically be adequate to detect such levels. However since in this exemplary embodiment the two antennas and are in the same device and in proximity to each other they can inherently couple RF energy from one antenna to the other. While the communication device does not require this coupling its presence can be utilized by the exemplary embodiments for the purposes of tuning the antenna matching networks. In one example after establishing the tuning state for the diversity match at the transmit frequency a predetermined relationship or offset can be applied to the matching network in order to adjust the match to the receiver operating frequency.

In another embodiment after tunable matching network is adjusted by the algorithm tunable matching network can also be adjusted. By measuring the coupled transmitted power present at detector the tunable matching network can be adjusted to increase coupled transmitter power seen at detector . In one example after establishing the tuning state for the diversity match at the transmit frequency a predetermined relationship or offset can be applied to the matching network in order to adjust the match to the receiver operating frequency. For instance the tuning circuits can be adjusted initially based on transmitter oriented metrics and then a predetermined relationship or offset can be applied to attain a desired tuning state for both transmitter and receiver operation. In another embodiment the operational metric can be one or more of transmitter reflection loss output power of the transmitter current drain and or transmitter linearity. For example in a time division multiplexed TDM system in which the transmitter and the receiver operate at different frequencies but only operate in their respective time slots i.e. transmit time slot and receive time slot this can be accomplished by identifying an optimal tuning for the transmitter and then adding an empirically derived adjustment to the tuning circuits in receive mode. As another example in a frequency division multiplexed FDM system in which the transmitter and receiver operate simultaneously and at different frequencies this can be accomplished by identifying a target operation for the transmitter and then adjusting the tuning circuits first to the target value for the transmitter and then adjusting the values to approach a compromised value proximate to an equal or desired target value for the receiver. These tuning techniques can also be used in combination with the determined or detected use case based on the RSSI and phase differentials that are mapped into the look up table.

In one embodiment a predetermined relationship e.g. an offset scaling factor translation or other change or modification can be applied to the adjustments of the variable components when switching from the transmit mode to the receive mode. This translation can be a function of the values obtained while adjusting during the transmit time slot. The translation can then be removed upon return to the transmitter mode and the adjustment process is resumed. In one embodiment because any frequency offset between the transmit signal and the receive signal may be known an adjustment or modification of the setting of the matching network in the form of a translation or some other function can be applied to the matching network during the receive time slot. In another embodiment the adjustment can be performed in multiple steps if the transmission and reception frequencies are far apart.

In another embodiment a Figure of Merit can be utilized that not only incorporates the transmit metrics but also incorporates an element to attain a compromise between optimal transmitter and optimal receiver operation. This can be accomplished by identifying a target operation goal such as a desired transmitter and receiver reflection loss and then identifying an operational setting that is a close compromise between the two. This embodiment thus can incorporate not only transmitter metrics but also tuning circuit settings or preferences into the algorithm. The tuning preferences can be empirically identified to ensure the desired operation.

In one embodiment where the communication device employs antenna diversity for receive operation but does not employ antenna diversity for transmit operation antenna may be receive only. The transceiver can transmit on antenna and can receive on both antennas and . For adaptive closed loop tuning of the tunable matching network on the diversity antenna the communication device can obtain a metric indicating the performance of the tunable matching circuit at the receive frequency. The metric can be used to tune the match to adjust the performance at the receive frequency. This can be done by measuring the level of the received signal using the receiver in the transceiver IC i.e. the RSSI . This technique can also be combined with the determined or detected use case based on the RSSI and phase differentials that are mapped into the look up table. In this embodiment the transmit signal may be moderately coupled to the tunable match in the diversity path because the main antenna and the diversity antenna are located on the same communications device. The main antenna and the diversity antenna may only have 20 dB isolation in many cases. The transmit signal present at tunable match may be a much stronger and more stable signal than the receive signal present at tunable matching network . The transmit signal can be used to make reliable measurements that can be used for closed loop tuning.

The transmit signal can be measured using detector . The detector can be placed between the tunable match and the transceiver. This is effectively the output of the tunable match. A directional coupler may not be necessary for this measurement in this embodiment and capacitive or resistive coupling may be used as long as the detector has sufficient dynamic range. Other components and configurations of the components can also be utilized for the parameter detection such as shown in U.S. Patent Publication No. 20090039976 by McKinzie the disclosure of which is hereby incorporated by reference. In this embodiment maximizing the output voltage of a tunable match can be the equivalent to minimizing insertion loss and for a lossless network it can be equivalent to minimizing mismatch loss. An alternative to using detector can be to use the receiver itself tuned to the transmit frequency to measure the transmit signal. These are a few viable methods for measuring the transmit signal through the diversity tunable match. Other forms of signal detection are contemplated by the present disclosure.

Another exemplary embodiment can use detector of the communication device in the diversity path as feedback to adjust tunable matching network on the main antenna . The tunable matching network coupled with the main antenna has both transmit and receive signals and can be optimized for Tx performance Rx performance and Duplex performance. For the Tx solution Vout can be maximized. For the Rx solution and the Duplex solution dVout can be included in the Figure of Merit. A PTC preference may be used to identify the optimal Rx solution but is not required to identify the optimal duplex solution.

In one or more exemplary embodiments the Figure of Merit may be constructed such that when it equals a certain value or is minimized or maximized the desired tuner settings are achieved. The Figure of Merit may be used with a number of different optimization algorithms that can include utilization of the determined or detected use case based on the RSSI and phase differentials that are mapped into the look up table. For example a more exhaustive approach may be used that evaluates the Figure of Merit at every combination of capacitor values. Other suitable algorithms can also be utilized including a simplex algorithm a binary search algorithm and or a gradient algorithm.

The tunable circuit can comprise variable reactive elements such as variable capacitors variable inductors or combinations thereof that are tunable with digital and or analog bias signals based in part on the determined or detected use case for the communication device . The tunable circuit can represent a tunable matching network coupled to one or more of the antennas to compensate for a change in impedance of the antenna s a compensation circuit to compensate for mutual coupling in the multi antenna system an amplifier tuning circuit to control operations of an amplifier of the transceiver a filter tuning circuit to alter a pass band of a filter of the transceiver and so on. The tuning sensors can be placed at any stage of the transceiver such as before or after a matching network shown in . The tuning sensors or detectors can utilize any suitable sensing technology such as directional couplers voltage dividers or other sensing technologies to measure signals at any stage of the transceiver . The measured signals can be provided to the controller by way of analog to digital converters included in the tuning sensors for processing and tuning a variable reactance of the tunable circuit .

The UI can include a depressible or touch sensitive keypad with a navigation mechanism such as a roller ball a joystick a mouse or a navigation disk for manipulating operations of the communication device . The keypad can be an integral part of a housing assembly of the communication device or an independent device operably coupled thereto by a tethered wireline interface such as a USB cable or a wireless interface supporting for example Bluetooth. The keypad can represent a numeric keypad commonly used by phones and or a QWERTY keypad with alphanumeric keys. The UI can further include a display such as monochrome or color LCD Liquid Crystal Display OLED Organic Light Emitting Diode or other suitable display technology for conveying images to an end user of the communication device . In an embodiment where the display is touch sensitive a portion or all of the keypad can be presented by way of the display with navigation features.

The display can use touch screen technology to also serve as a user interface for detecting user input. As a touch screen display the communication device can be adapted to present a user interface with graphical user interface GUI elements that can be selected by a user with a touch of a finger. The touch screen display can be equipped with capacitive resistive or other forms of sensing technology to detect how much surface area of a user s finger has been placed on a portion of the touch screen display. This sensing information can be used to control the manipulation of the GUI elements or other functions of the user interface. The display can be an integral part of the housing assembly of the communication device or an independent device communicatively coupled thereto by a tethered wireline interface such as a cable or a wireless interface.

The UI can also include an audio system that utilizes audio technology for conveying low volume audio such as audio heard in proximity of a human ear and high volume audio such as speakerphone for hands free operation . The audio system can further include a microphone for receiving audible signals of an end user. The audio system can also be used for voice recognition applications. The UI can further include an image sensor such as a charged coupled device CCD camera for capturing still or moving images.

The power supply can utilize common power management technologies such as replaceable and rechargeable batteries supply regulation technologies and or charging system technologies for supplying energy to the components of the communication device to facilitate long range or short range portable applications. Alternatively or in combination the charging system can utilize external power sources such as DC power supplied over a physical interface such as a USB port or other suitable tethering technologies.

The location receiver can utilize location technology such as a global positioning system GPS receiver capable of assisted GPS for identifying a location of the communication device based on signals generated by a constellation of GPS satellites which can be used for facilitating location services such as navigation. The motion sensor can utilize motion sensing technology such as an accelerometer a gyroscope or other suitable motion sensing technology to detect motion of the communication device in three dimensional space. The orientation sensor can utilize orientation sensing technology such as a magnetometer to detect the orientation of the communication device north south west and east as well as combined orientations in degrees minutes or other suitable orientation metrics .

The communication device can use the transceiver to also determine a proximity to or distance to cellular WiFi Bluetooth or other wireless access points by sensing techniques such as utilizing a received signal strength indicator RSSI and or signal time of arrival TOA or time of flight TOF measurements. The controller can utilize computing technologies such as a microprocessor a digital signal processor DSP and or a video processor with associated storage memory such as Flash ROM RAM SRAM DRAM or other storage technologies for executing computer instructions controlling and processing data supplied by the aforementioned components of the communication device .

Other components not shown in are contemplated by the subject disclosure. The communication device can include a slot for inserting or removing an identity module such as a Subscriber Identity Module SIM card. SIM cards can be used for identifying and registering for subscriber services executing computer programs storing subscriber data and so forth. The communication device as described herein can operate with more or less of the circuit components shown in . It is further noted that communication device be an integral part of consumer or industrial devices such as cellular phones computers laptops tablets utility meters telemetry measurement devices and so on.

The tunable capacitors can each utilize technology that enables tunability of the capacitance of said component. One embodiment of the tunable capacitors can utilize voltage or current tunable dielectric materials such as a composition of barium strontium titanate BST . An illustration of a BST composition is the Parascan Tunable Capacitor. In another embodiment the tunable reactive element can utilize semiconductor varactors. Other present or next generation methods or material compositions that can support a means for a voltage or current tunable reactive element are contemplated by the present disclosure.

The DC to DC converter can receive a power signal such as 3 Volts from the power supply of the communication device in . The DC to DC converter can use common technology to amplify this power signal to a higher range e.g. 30 Volts such as shown. The controller can supply digital signals to each of the DACs by way of a control bus of n or more wires to individually control the capacitance of tunable capacitors thereby varying the collective reactance of the tunable matching network . The control bus can be implemented with a two wire common serial communications technology such as a Serial Peripheral Interface SPI bus. With an SPI bus the controller can submit serialized digital signals to configure each DAC in or the switches of the tunable reactive element of . The control circuit of can utilize common digital logic to implement the SPI bus and to direct digital signals supplied by the controller to the DACs.

In another embodiment the tunable matching network can comprise a control circuit in the form of a decoder and a tunable reactive element comprising switchable reactive elements such as shown in . In this embodiment the controller can supply the control circuit signals via the SPI bus which can be decoded with Boolean or state machine logic to individually enable or disable the switching elements . The switching elements can be implemented using various types of switches such as semiconductor switches or micro machined switches including those utilized in micro electromechanical systems MEMS . By independently enabling and disabling the reactive elements capacitor or inductor of with the switching elements the collective reactance of the tunable reactive element can be varied.

The tunability of the tunable matching network provides the controller a means to optimize performance parameters of the transceiver such as for example but not limited to transmitter power transmitter efficiency receiver sensitivity power consumption of the communication device a specific absorption rate SAR of energy by a human body frequency band performance parameters and so forth. To achieve one or more desirable performance characteristics which can be defined the communication device can utilize a tuning state selection method such as depicted in .

Other algorithms can be used for selecting a desired tuning state and which may resolve any inaccuracy in determining a particular use case that affects the antenna environment and resulting antenna performance. For instance the radio frequency and or other RF information e.g. band and sub band can be determined and one or more usage conditions or factors such as for example but not limited to audio path configuration user interface mode of operation and radio bearer type can be used to determine a number of tuning state candidates which have the highest probability of matching the actual environment of the communication device. An example of this algorithm is described in U.S. patent application Ser. No. 13 030 177 to Hoirup et al. filed on Feb. 18 2011 the disclosure of which is hereby incorporated by reference.

In one or more embodiments the look up table that includes tuning settings or states can be static and or dynamic. For example the look up table can be pre loaded into the memory of the communication device based on known or estimated use cases usage conditions or factors and so forth. In another example the look up table can be populated or adjusted based on values determined during operation of the communication device such as from a remote source transmitting the data. The tuning state candidates can be a subset of use cases that are selected from a group of use cases stored in a memory of the communication device such as in tables .

In one or more embodiments the tuning algorithm can employ a threshold to remove the most unlikely tuning state candidates from consideration. When more than one tuning state candidate has been determined the algorithm can resolve which candidate provides the desirable or best match by examining parameters such as those that are readily available in the wireless device. As an example but not being limited thereto the algorithm can utilize RSSI Received Signal Code Power RSCP Received Signal Quality RXQUAL Received Bit Error Rate current drain transmit power control level and so forth as parameters to select a tuning state from among the subset of tuning states that were identified via the look up table. One of these or other parameters can be utilized alone in selecting from among the subset of identified tuning states or a combination of parameters can be utilized by the algorithm for performing the tuning state selection. In addition feedback from a cellular base station can be utilized in the tuning process. For instance if the handset is directed to transmit at a lower power step with one tuning state than another that information could be utilized to determine which tuning state provides a better match for the handset transmitter. Other parameters can also be utilized for performing the tuning state selection from among the subset of tuning states including parameters identified in various communication device standards. In one or more embodiments the algorithm can set the tuning state and sample the parameter s resulting from that tuning state change. In one embodiment at least one sample for each tuning state setting can be utilized. More samples may also be utilized in which case the sample order can be interleaved where n different possible tuning states can be set and RSSI or other parameter s measured for each with each of the n states repeated m times. The resultant m measurements for each state can be then be averaged or otherwise processed in order to determine which tuning state will be chosen as the preferred state.

In one or more embodiments the determined or detected use case according to method or the other embodiments described herein can be utilized in tuning based on various goals such as one or more of a better pre determined antenna match e.g. 50 for each radio Tx Rx band achieving better TRP TIS in the various use cases e.g. free space handheld and other limited modes of operation a better or best QoS with a lower or lowest power consumption. For example radiated UL throughput can be compared with a desired UL throughput e.g. a throughput threshold such as through use of RSSI measurement to determine whether tuning is to be performed to improve or maintain the radiated UL throughput. If tuning is to be utilized e.g. the UL throughput is outside of a desired range then an iterative process can be employed whereby the matching network is adjusted and the UL throughput is again compared with the throughput threshold to drive the UL throughput toward a desired value. Improvement of the UL throughput can be achieved by presenting the load impedance to a Tx power amplifier which would provide better trade off between TRP and EVM. If on the other hand the UL throughput is in a desired range then an iterative process can be employed whereby the transmit power is adjusted e.g. reduced in incremental steps and the UL throughput is again compared with the throughput threshold to maintain the UL throughput in the desired range. The incremental step sizes that are utilized for the transmit power reduction can be pre determined or can be dynamic. One or more of the exemplary embodiments can take into account that an optimized TRP and or TIS may not provide the best user experience. In one or more embodiments the best user experience can be defined by quality of service parameters such as voice quality and or data throughput. QoS is not directly proportional or otherwise 100 related to TRP and TIS which are just two variables of QoS function.

In one or more embodiments the comparison of operational data of the different antennas such as the differential of the RSSI and phase information between two antennas may provide more than one use case such as where the differential is zero . In these cases other criteria including other operational parameters can be used for selecting from among the more than one returned use case and or a compromise or other selection strategy for the tuning state can be implemented based on the more than one returned use case.

The machine may comprise a server computer a client user computer a personal computer PC a tablet PC a laptop computer a desktop computer a control system a network router switch or bridge or any machine capable of executing a set of instructions sequential or otherwise that specify actions to be taken by that machine. It will be understood that a device of the present disclosure includes broadly any electronic device that provides voice video or data communication. Further while a single machine is illustrated the term machine shall also be taken to include any collection of machines that individually or jointly execute a set or multiple sets of instructions to perform any one or more of the methodologies discussed herein.

The computer system may include a processor e.g. a central processing unit CPU a graphics processing unit GPU or both a main memory and a static memory which communicate with each other via a bus . The computer system may further include a video display unit e.g. a liquid crystal display LCD a flat panel a solid state display or a cathode ray tube CRT . The computer system may include an input device e.g. a keyboard a cursor control device e.g. a mouse a disk drive unit a signal generation device e.g. a speaker or remote control and a network interface device .

The disk drive unit may include a machine readable medium on which is stored one or more sets of instructions e.g. software embodying any one or more of the methodologies or functions described herein including those methods illustrated above. The instructions may also reside completely or at least partially within the main memory the static memory and or within the processor during execution thereof by the computer system . The main memory and the processor also may constitute machine readable media.

Dedicated hardware implementations including but not limited to application specific integrated circuits programmable logic arrays and other hardware devices can likewise be constructed to implement the methods described herein. Applications that may include the apparatus and systems of various embodiments broadly include a variety of electronic and computer systems. Some embodiments implement functions in two or more specific interconnected hardware modules or devices with related control and data signals communicated between and through the modules or as portions of an application specific integrated circuit. Thus the example system is applicable to software firmware and hardware implementations.

In accordance with various embodiments of the present disclosure the methods described herein are intended for operation as software programs running on a computer processor. Furthermore software implementations can include but not limited to distributed processing or component object distributed processing parallel processing or virtual machine processing can also be constructed to implement the methods described herein.

The present disclosure contemplates a machine readable medium containing instructions or that which receives and executes instructions from a propagated signal so that a device connected to a network environment can send or receive voice video or data and to communicate over the network using the instructions . The instructions may further be transmitted or received over a network via the network interface device .

While the machine readable medium is shown in an example embodiment to be a single medium the term machine readable medium should be taken to include a single medium or multiple media e.g. a centralized or distributed database and or associated caches and servers that store the one or more sets of instructions. The term machine readable medium shall also be taken to include any medium that is capable of storing encoding or carrying a set of instructions for execution by the machine and that cause the machine to perform any one or more of the methodologies of the present disclosure.

The term machine readable medium shall accordingly be taken to include but not be limited to solid state memories such as a memory card or other package that houses one or more read only non volatile memories random access memories or other re writable volatile memories magneto optical or optical medium such as a disk or tape and or a digital file attachment to e mail or other self contained information archive or set of archives is considered a distribution medium equivalent to a tangible storage medium. Accordingly the disclosure is considered to include any one or more of a machine readable medium or a distribution medium as listed herein and including art recognized equivalents and successor media in which the software implementations herein are stored.

Although the present specification describes components and functions implemented in the embodiments with reference to particular standards and protocols the disclosure is not limited to such standards and protocols. Each of the standards for Internet and other packet switched network transmission e.g. TCP IP UDP IP HTML HTTP represent examples of the state of the art. Such standards are periodically superseded by faster or more efficient equivalents having essentially the same functions. Accordingly replacement standards and protocols having the same functions are considered equivalents.

The illustrations of embodiments described herein are intended to provide a general understanding of the structure of various embodiments and they are not intended to serve as a complete description of all the elements and features of apparatus and systems that might make use of the structures described herein. Many other embodiments will be apparent to those of skill in the art upon reviewing the above description. Other embodiments may be utilized and derived therefrom such that structural and logical substitutions and changes may be made without departing from the scope of this disclosure. Figures are also merely representational and may not be drawn to scale. Certain proportions thereof may be exaggerated while others may be minimized. Accordingly the specification and drawings are to be regarded in an illustrative rather than a restrictive sense.

Such embodiments of the inventive subject matter may be referred to herein individually and or collectively by the term invention merely for convenience and without intending to voluntarily limit the scope of this application to any single invention or inventive concept if more than one is in fact disclosed. Thus although specific embodiments have been illustrated and described herein it should be appreciated that any arrangement calculated to achieve the same purpose may be substituted for the specific embodiments shown. This disclosure is intended to cover any and all adaptations or variations of various embodiments. Combinations of the above embodiments and other embodiments not specifically described herein will be apparent to those of skill in the art upon reviewing the above description.

The Abstract of the Disclosure is provided with the understanding that it will not be used to interpret or limit the scope or meaning of the claims. In addition in the foregoing Detailed Description it can be seen that various features are grouped together in a single embodiment for the purpose of streamlining the disclosure. This method of disclosure is not to be interpreted as reflecting an intention that the claimed embodiments require more features than are expressly recited in each claim. Rather as the following claims reflect inventive subject matter lies in less than all features of a single disclosed embodiment. Thus the following claims are hereby incorporated into the Detailed Description with each claim standing on its own as a separately claimed subject matter.

