---

title: Hit testing curve-based shapes using polygons
abstract: Upon receiving an input comprising an area of a user interface, a user interface element associated with the area of the user interface may be identified and a polygon-based representation of the at least one user interface element may be created. If the input is determined to comprise a selection of the user interface element according to the polygon-based representation, an operation associated with the user interface element may be performed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09383885&OS=09383885&RS=09383885
owner: MICROSOFT TECHNOLOGY LICENSING, LLC
number: 09383885
owner_city: Redmond
owner_country: US
publication_date: 20120613
---
Different computing platforms utilize differing software options to define and display user interface elements. For example some systems define user interface element boundaries using curves while others use primitive shapes such as triangles and or other polygons. Conventional systems often have difficulty defining element edges when passing data between applications because the translation between different styles does not result in a 1 1 mapping of the element s edges.

This Summary is provided to introduce a selection of concepts in a simplified form that are further described below in the Detailed Description. This Summary is not intended to identify key features or essential features of the claimed subject matter. Nor is this Summary intended to be used to limit the claimed subject matter s scope.

Upon receiving an input comprising an area of a user interface a user interface element associated with the area of the user interface may be identified and a polygon based representation of the at least one user interface element may be created. If the input is determined to comprise a selection of the user interface element according to the polygon based representation an operation associated with the user interface element may be performed.

Both the foregoing general description and the following detailed description provide examples and are explanatory only. Accordingly the foregoing general description and the following detailed description should not be considered to be restrictive. Further features or variations may be provided in addition to those set forth herein. For example embodiments may be directed to various feature combinations and sub combinations described in the detailed description.

The following detailed description refers to the accompanying drawings. Wherever possible the same reference numbers are used in the drawings and the following description to refer to the same or similar elements. While embodiments of the invention may be described modifications adaptations and other implementations are possible. For example substitutions additions or modifications may be made to the elements illustrated in the drawings and the methods described herein may be modified by substituting reordering or adding stages to the disclosed methods. Accordingly the following detailed description does not limit the invention.

Many computing devices now use touch sensitive screens as input devices. When a user provides an input such as by gesturing and or touching the screen with a finger and or stylus the computing device may receive the input as a selection of an area of the screen. The area may comprise for example a pixel a rectangular area and or an elliptical area that may be centered on the point touched by the user. The device then needs to determine which displayed user interface element has been selected.

In some devices this hit testing process may be performed by an underlying utility that may be called via an application programming interface API . The API may receive the selection area and an identification of any user interface elements in that area. The elements may have been rendered as open e.g. a line or a hollow shape and or closed e.g. a solid shape two dimensional objects and or as three dimensional objects. The rendering may make use of various rendering techniques such as curve based models that may be represented as mathematical equations and or vector graphics.

The API however may only accept shapes that have been translated from curves into representative polygons. Upon receiving an input area a Boolean operation may be performed on the area to determine which object may have been touched. That is each object in the user interface may be examined to determine whether or not the shape intersects and or falls entirely within the input area. These objects and or the portions of the object within the touched area may then be translated into polygon based representations.

This translation may result in more accurate identification of the user s desired element by identifying each of the elements within the selection area and ranking their likelihood of being the target object. For example when an object is within the selection area but its display is obscured by a second object the second object may be more likely to be the target object. For hollow shapes a selection in the hollow area may be interpreted as a selection of the shape. In some situations some objects within the selection area may not be selectable such as user interface elements that are only selectable in certain contexts. These non selectable objects may be eliminated as part of the identification process as there is no need to rank them as possibly being the target object.

Method may then advance to stage where computing device may identify one and or more elements displayed within the input area. For example the input area may comprise input area of user interface in which vector based shapes A B are displayed.

Method may then advance to stage where computing device may tessellate the element into a polygon based shape. For example the vector based shape may be translated into a representation comprising a plurality of triangles of a predefined size. In cases where the element comprises a line the line shape may be padded by a configurable amount of pixels before tessellation. In cases where the element comprises a hollow area a cut may be created in the vector based shape to create a single contiguous boundary. Similarly multiple hollow areas may result in multiple cuts to create a contiguous perimeter.

Other conditions may result in additional processing to create the polygon based shape. For example where the element comprises a three dimensional shape an outer boundary for the three dimensional shape may be identified and the area within that boundary may be tessellated into a polygon regardless of any ancillary shapes within the three dimensional shapes e.g. interior lines of squares that comprise the faces of a cube may be ignored. Shapes comprising discontiguous fragments within the selection area such as the tips of a horseshoe type shape may be identified as belonging to a single shape. As each fragment is further processed the fragments may be tracked and tied back to the single overall shape as displayed on the user interface.

Method may then advance to stage where computing device may determine whether the input area comprises at least a subset of the plurality of elements. For example the input area may comprise only a single element that may be identified as the target element of the input. In some cases multiple elements may be displayed in whole and or in part within the input area as illustrated above at least in and .

If multiple elements are displayed in the input area method may advance to stage where computing device may identify a most likely target of the input from among the subset of the plurality of elements according to a ranking criteria. The ranking criteria may comprise for example whether the element within the input area is occluded by other elements reducing its relative area within the input area. Another example criteria may comprise an application priority associated with one and or more of the elements such as where the input area comprises a particular element of high importance to the application. Further example criteria may comprise a relative size of each element within and or outside the input area and a distance from a center point of the input area for each of the subset of the plurality of elements. The center point may be defined according to an initial point of contact and or a final point of contact. In some cases these points may be different due to movement of the input device e.g. a finger and or stylus while in contact with the display and or due to a user s gestures to select a portion of the display.

After identifying the most likely target at stage or if only one element was identified at stage method may advance to stage where computing device may execute an operation associated with the most likely target of the input. For example user interface may display feedback to the user indicating which element was selected. For another example an application associated with the target element may be notified of the selection and may execute appropriate operations e.g. selection of a menu element may cause the application to generate a menu for display. Method may then end at stage .

An embodiment consistent with the invention may comprise a system for providing shape hit testing. The system may comprise a memory storage and a processing unit coupled to the memory storage. The processing unit may be operative to receive an input comprising an area of a user interface identify at least one user interface element associated with the area of the user interface create a polygon based representation of the at least one user interface element determine whether the input comprises a selection of the at least one user interface element according to the polygon based representation and if so perform an operation associated with the at least one user interface element.

Another embodiment consistent with the invention may comprise a system for providing shape hit testing. The system may comprise a memory storage and a processing unit coupled to the memory storage. The processing unit may be operative to receive an input to an area of a user interface identify a plurality of user interface elements displayed within the input area of the user interface each of which may comprise a vector based shape tessellate each of the plurality of user interface elements into a polygon based shape identify at least one of the plurality of user interface elements that comprises a most likely target of the input and execute an operation associated with the identified at least one of the plurality of user interface elements.

Yet another embodiment consistent with the invention may comprise a system for providing shape hit testing. The system may comprise a memory storage and a processing unit coupled to the memory storage. The processing unit may be operative to receive a touch input to an area of a user interface comprising a plurality of elements each comprising a vector based shape identify at least one of the plurality of elements displayed within the input area of the user interface and tessellate the at least one of the plurality of elements into a polygon based shape. Being operative to tessellate the at least one of the plurality of elements may comprise the processing unit being operative to pad each element determined to comprise a line by a configurable amount of pixels create at least one cut in the vector based shape of each element determined to comprise a hollow area and identify an outer boundary for each element determined to comprise a three dimensional shape.

The processing unit may be further operative to determine whether the input area comprises at least a subset of the plurality of elements and if so identify a most likely target of the input from among the subset of the plurality of elements according to one and or more ranking criteria. The ranking criteria may consider for example an occlusion of each of the subset of the plurality of elements an application priority associated with each of the subset of the plurality of elements a relative size of each of the subset of the plurality of elements within the input area a relative size of each of the subset of the plurality of elements outside the input area a relation between a plurality of fragments each associated with a single element and or a distance from a center point of the input area for each of the subset of the plurality of elements. For example an element with multiple fragments within the selection area may be ranked more highly by considering the total area of the multiple fragments within the input area. The processing unit may be further operative to execute an operation associated with the most likely target of the input.

With reference to a system consistent with an embodiment of the invention may include a computing device such as computing device . In a basic configuration computing device may include at least one processing unit and a system memory . Depending on the configuration and type of computing device system memory may comprise but is not limited to volatile e.g. random access memory RAM non volatile e.g. read only memory ROM flash memory or any combination. System memory may include operating system one or more programming modules and may comprise translation API . Operating system for example may be suitable for controlling computing device s operation. Furthermore embodiments of the invention may be practiced in conjunction with a graphics library other operating systems or any other application program and is not limited to any particular application or system. This basic configuration is illustrated in by those components within a dashed line .

Computing device may have additional features or functionality. For example computing device may also include additional data storage devices removable and or non removable such as for example magnetic disks optical disks or tape. Such additional storage is illustrated in by a removable storage and a non removable storage . Computing device may also contain a communication connection that may allow device to communicate with other computing devices such as over a network in a distributed computing environment for example an intranet or the Internet. Communication connection is one example of communication media.

The term computer readable media as used herein may include computer storage media. Computer storage media may include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. System memory removable storage and non removable storage are all computer storage media examples i.e. memory storage. Computer storage media may include but is not limited to RAM ROM electrically erasable read only memory EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store information and which can be accessed by computing device . Any such computer storage media may be part of device . Computing device may also have input device s such as a keyboard a mouse a pen a sound input device a touch input device etc. Output device s such as a display speakers a printer etc. may also be included. The aforementioned devices are examples and others may be used.

The term computer readable media as used herein may also include communication media. Communication media may be embodied by computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal may describe a signal that has one or more characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media may include wired media such as a wired network or direct wired connection and wireless media such as acoustic radio frequency RF infrared and other wireless media.

As stated above a number of program modules and data files may be stored in system memory including operating system . While executing on processing unit programming modules e.g. translation API may perform processes and or methods as described above. The aforementioned process is an example and processing unit may perform other processes. Other programming modules that may be used in accordance with embodiments of the present invention may include electronic mail and contacts applications word processing applications spreadsheet applications database applications slide presentation applications drawing or computer aided application programs etc.

One or more application programs may be loaded into the memory and run on or in association with the operating system . Examples of the application programs include phone dialer programs e mail programs personal information management PIM programs word processing programs spreadsheet programs Internet browser programs messaging programs and so forth. The system also includes a non volatile storage area within the memory . The non volatile storage area may be used to store persistent information that should not be lost if the system is powered down. The application programs may use and store information in the non volatile storage area such as e mail or other messages used by an e mail application and the like. A synchronization application not shown also resides on the system and is programmed to interact with a corresponding synchronization application resident on a host computer to keep the information stored in the non volatile storage area synchronized with corresponding information stored at the host computer. As should be appreciated other applications may be loaded into the memory and run on the mobile computing device .

The system has a power supply which may be implemented as one or more batteries. The power supply might further include an external power source such as an AC adapter or a powered docking cradle that supplements or recharges the batteries. The system may also include a radio that performs the function of transmitting and receiving radio frequency communications. The radio facilitates wireless connectivity between the system and the outside world via a communications carrier or service provider. Transmissions to and from the radio are conducted under control of the operating system . In other words communications received by the radio may be disseminated to the application programs via the operating system and vice versa.

The radio allows the system to communicate with other computing devices such as over a network. The radio is one example of communication media. Communication media may typically be embodied by computer readable instructions data structures program modules or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal means a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal. By way of example and not limitation communication media includes wired media such as a wired network or direct wired connection and wireless media such as acoustic RF infrared and other wireless media. The term computer readable media as used herein includes both storage media and communication media.

This embodiment of the system provides notifications using the visual indicator that can be used to provide visual notifications and or an audio interface producing audible notifications via the audio transducer . In the illustrated embodiment the visual indicator is a light emitting diode LED and the audio transducer is a speaker. These devices may be directly coupled to the power supply so that when activated they remain on for a duration dictated by the notification mechanism even though the processor and other components might shut down for conserving battery power. The LED may be programmed to remain on indefinitely until the user takes action to indicate the powered on status of the device. The audio interface is used to provide audible signals to and receive audible signals from the user. For example in addition to being coupled to the audio transducer the audio interface may also be coupled to a microphone to receive audible input such as to facilitate a telephone conversation. In accordance with embodiments of the present invention the microphone may also serve as an audio sensor to facilitate control of notifications as will be described below. The system may further include a video interface that enables an operation of an on board camera to record still images video stream and the like.

A mobile computing device implementing the system may have additional features or functionality. For example the mobile computing device may also include additional data storage devices removable and or non removable such as magnetic disks optical disks or tape. Such additional storage is illustrated in by the non volatile storage area . Computer storage media may include volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data.

Data information generated or captured by the mobile computing device and stored via the system may be stored locally on the mobile computing device as described above or the data may be stored on any number of storage media that may be accessed by the device via the radio or via a wired connection between the mobile computing device and a separate computing device associated with the mobile computing device for example a server computer in a distributed computing network such as the Internet. As should be appreciated such data information may be accessed via the mobile computing device via the radio or via a distributed computing network. Similarly such data information may be readily transferred between computing devices for storage and use according to well known data information transfer and storage means including electronic mail and collaborative data information sharing systems.

Generally consistent with embodiments of the invention program modules may include routines programs components data structures and other types of structures that may perform particular tasks or that may implement particular abstract data types. Moreover embodiments of the invention may be practiced with other computer system configurations including hand held devices multiprocessor systems microprocessor based or programmable consumer electronics minicomputers mainframe computers and the like. Embodiments of the invention may also be practiced in distributed computing environments where tasks are performed by remote processing devices that are linked through a communications network. In a distributed computing environment program modules may be located in both local and remote memory storage devices.

Furthermore embodiments of the invention may be practiced in an electrical circuit comprising discrete electronic elements packaged or integrated electronic chips containing logic gates a circuit utilizing a microprocessor or on a single chip containing electronic elements or microprocessors. Embodiments of the invention may also be practiced using other technologies capable of performing logical operations such as for example AND OR and NOT including but not limited to mechanical optical fluidic and quantum technologies. In addition embodiments of the invention may be practiced within a general purpose computer or in any other circuits or systems.

Embodiments of the invention for example may be implemented as a computer process method a computing system or as an article of manufacture such as a computer program product or computer readable media. The computer program product may be a computer storage media readable by a computer system and encoding a computer program of instructions for executing a computer process. The computer program product may also be a propagated signal on a carrier readable by a computing system and encoding a computer program of instructions for executing a computer process. Accordingly the present invention may be embodied in hardware and or in software including firmware resident software micro code etc. . In other words embodiments of the present invention may take the form of a computer program product on a computer usable or computer readable storage medium having computer usable or computer readable program code embodied in the medium for use by or in connection with an instruction execution system. A computer usable or computer readable medium may be any medium that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device.

The computer usable or computer readable medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus device or propagation medium. More specific computer readable medium examples a non exhaustive list the computer readable medium may include the following an electrical connection having one or more wires a portable computer diskette a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory an optical fiber and a portable compact disc read only memory CD ROM . Note that the computer usable or computer readable medium could even be paper or another suitable medium upon which the program is printed as the program can be electronically captured via for instance optical scanning of the paper or other medium then compiled interpreted or otherwise processed in a suitable manner if necessary and then stored in a computer memory.

Embodiments of the invention may be practiced via a system on a chip SOC where each or many of the components illustrated in may be integrated onto a single integrated circuit. Such an SOC device may include one or more processing units graphics units communications units system virtualization units and various application functionalities all of which may be integrated or burned onto the chip substrate as a single integrated circuit. When operating via an SOC the functionality described herein may operate via application specific logic integrated with other components of the computing device system X on the single integrated circuit chip .

Embodiments of the present invention for example are described above with reference to block diagrams and or operational illustrations of methods systems and computer program products according to embodiments of the invention. The functions acts noted in the blocks may occur out of the order as shown in any flowchart. For example two blocks shown in succession may in fact be executed substantially concurrently or the blocks may sometimes be executed in the reverse order depending upon the functionality acts involved.

While certain embodiments of the invention have been described other embodiments may exist. Furthermore although embodiments of the present invention have been described as being associated with data stored in memory and other storage mediums data can also be stored on or read from other types of computer readable media such as secondary storage devices like hard disks floppy disks or a CD ROM a carrier wave from the Internet or other forms of RAM or ROM. Further the disclosed methods stages may be modified in any manner including by reordering stages and or inserting or deleting stages without departing from the invention.

All rights including copyrights in the code included herein are vested in and the property of the Applicants. The Applicants retain and reserve all rights in the code included herein and grant permission to reproduce the material only in connection with reproduction of the granted patent and for no other purpose.

While certain embodiments of the invention have been described other embodiments may exist. While the specification includes examples the invention s scope is indicated by the following claims. Furthermore while the specification has been described in language specific to structural features and or methodological acts the claims are not limited to the features or acts described above. Rather the specific features and acts described above are disclosed as example for embodiments of the invention.

