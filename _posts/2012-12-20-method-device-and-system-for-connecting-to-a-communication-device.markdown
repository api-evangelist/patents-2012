---

title: Method, device, and system for connecting to a communication device
abstract: A method and apparatus include a first server that communicates with a second server to cause a call back request to be communicated to an endpoint so that the endpoint can initiate a call back connection with the first server or a third server. Such a call back connection may occur near real time or in substantially real time so that updates can be supplied to an endpoint running an application supported by the server quickly and efficiently. The endpoint may register with the second server such that the second server is able to utilize notification messages for providing call back request information to the endpoint to advise the endpoint of a call back request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09444931&OS=09444931&RS=09444931
owner: Unify GmbH & Co. KG
number: 09444931
owner_city: Munich
owner_country: DE
publication_date: 20121220
---
The present invention relates to communication systems that utilize cellular phones mobile computer devices tablets laptops or other terminal devices. More particularly the present invention relates to a system method and device configured to permit a first server to request a connection from an endpoint to a second server. In one embodiment an application server may request a connection from an endpoint via a Session Initiation Protocol SIP communication server.

SIP devices may offer a wide range of applications and services to users of those devices. Typically internet technologies and related protocols such as Hypertext Transfer Protocol HTTP and Hypertext Transfer Protocol Secure HTTPS are often the primary method by which applications and services are provided to users of such devices. But SIP devices usually require a degree of interaction whereby it is necessary for the application server to initiate a communication to the SIP device or to trigger a SIP device to initiate a connection to the application server at any given time.

In corporate communication network environments it is common for SIP devices to be placed behind a firewall or a network address translation server for security reasons. Such security measures can render the SIP devices inaccessible to an application server though the SIP device may still access the application server by initiating a communication with that server. As a result the application server may not be able to initiate a communication as required for certain applications which can cause problems for the SIP device and user trying to utilize such an application. For instance the application may not be able to perform its operation when the SIP device is not within a corporate network or may not reliably run when the SIP device is in such a network. As another example the SIP device may only be able to act as a client in the interface to the application server such that the SIP device always has to be the entity that establishes the connection to the application server.

To address such an issue SIP devices may poll an application server at specific times or predefined intervals. Alternatively the SIP device may utilize a long polling method that permits the application server to hold a request and wait for information to be available for sending to the device so that that a reduced number of polling requests from the SIP device may need to be sent. Such polling utilizes substantial resources as many messages are transmitted between devices to perform the polling that are often unnecessary. Additionally a server may need to utilize its resources to address whether an update is needed in response to such polling even when no update is needed. Further such polling prevents substantially real time updating of an application occurring as updates only occur on a scheduled bases predefined by the polling schema utilized by the device.

Yet another option is to utilize a contact proxy so that the load associated with supporting the polling of SIP devices can be off loaded by the application server to another device. For instance the application server may send call back requests to the proxy which may record the call back requests for different SIP devices. The SIP device may then get a notification via polling of the proxy server and the application server may subsequently receive the requested callback from the SIP device. Use of such a proxy has the same downsides as use of polling noted above as substantial network resources may be used for the transmission of polling messages and also may prevent real time or substantially real time updating of the SIP device.

We have determined that an improved communication device method and system are needed to improve the ability of SIP capable devices to communicate with different devices such as an application server. Some embodiments of our apparatuses and methods can permit application services to be offered to SIP devices that are behind a firewall or a network address translation server.

A method system and communication terminal and communication apparatus are provided. An embodiment of the method may be configured for initiating a call back connection between a first communication endpoint and a first server. The method may include the step of one of a second server and the first communication endpoint sends a first message to the first server. The first message identifies a first unique identification of the first communication endpoint. The second server is communicatively connected to the first communication endpoint. Subsequently a second server receives a second message. The second message comprises information directing the first communication endpoint to initiate a call back connection with the first server. The information directing the first communication endpoint to initiate the call back connection with the first server is comprised of the unique identification of the first communication endpoint. The second server sends a third message to the first communication endpoint. The third message comprises at least a portion of the information directing the first communication endpoint to initiate the call back connection with the first server of the second message. In response to receiving the third message the first communication endpoint initiates the call back connection with the first server.

In some embodiments of the method the first server sends the second message to the second server. In other embodiments a third server sends the second message to the second server. The third server may be a contact triggering server for example.

The information directing the first communication endpoint to initiate the call back connection with the first server can include different types of information to meet a particular set of design criteria. For instance the information directing the first communication endpoint to initiate the call back connection with the first server can be comprised of a unique request identification defined by the first server for tracking a request to a subsequent call back connection. The information directing the first communication endpoint to initiate the call back connection with the first server may also be comprised of at least one of an address of the first server and an identification of a port of the first server and wherein the second sever sends the first message to the first server.

In some embodiments of the method the first communication endpoint is communicatively connected to a firewall apparatus. The firewall apparatus and the first communication endpoint may be connected to a first network to which the firewall apparatus provides at least one firewall service. The firewall apparatus may be a network address translation server or a computer device that hosts a firewall for example.

In some embodiments of the method the second message may be a SOAP message and the third message may be an SIP NOTIFY message. In other embodiments the second and third messages may be configured for other types of messaging formats.

Embodiments of the method may also include the step of the first communication endpoint registering with the second server such that the first communication endpoint subscribes to receive messages that the second server receives from the first server. Alternatively embodiments of the method may include the steps of the first communication endpoint registering with the second server and the first communication endpoint sending a subscription message to the second server so that the first communication endpoint subscribes to receive messages that the second server receives from the first server.

Embodiments of the communication system may include a first communication endpoint a first server and a second server. The first server and second server may be communicatively connected. The first communication endpoint and the second server may be communicatively connected. The first communication endpoint may be within a first network. One of the second server and the first communication endpoint may send a first message to the first server. The first message identifies a first unique identification of the first communication endpoint. The second server receives a second message that comprises information directing the first communication endpoint to initiate the call back connection with the first server. The information directing the first communication endpoint to initiate the call back connection with the first server is comprised of the unique identification of the first communication endpoint. The second server sends a third message to the first communication endpoint that comprises at least a portion of the information directing the first communication endpoint to initiate the call back connection with the first server of the second message. In response to receiving the third message the first communication endpoint initiates the call back connection with the first server.

In some embodiments of the system the first server sends the second message to the second server. In other embodiments a third server communicatively connected to the first server sends the second message to the second server.

The information directing the first communication endpoint to initiate the call back connection with the first server may be comprised of a unique request identification defined by the first server for tracking a request to a subsequent call back connection. The information directing the first communication endpoint to initiate the call back connection with the first server may also be comprised of at least one of an address of the first server and a port of the first server.

Some embodiments of the system may also include a firewall apparatus. The firewall apparatus may host at least one firewall service for the first communication endpoint. The firewall apparatus is communicatively connected to the first communication endpoint and the second server. Examples of a firewall apparatus may be a computer device that hosts a firewall service or a network address translation server.

In some embodiments of the system the first communication endpoint may register with the second server. The first communication endpoint may subsequently send a subscription message to the second server so that the first communication endpoint subscribes to receive messages that the second server receives from the first server.

A communication endpoint is also provided. An embodiment of the communication endpoint may comprise a transceiver unit non transitory memory having an application and a processor unit. The processor unit may be communicatively connected to the memory to execute the application. The processor unit may also be communicatively connected to the transceiver unit. The endpoint may be configured so that at least one of i the communication endpoint sends a first message to a first server that hosts a service supporting the application and ii the communication endpoint registers with a second server such that the second server sends the first message to the first server. The first message identifies a first unique identification of the communication endpoint. The communication endpoint may receive a second message from the second server that is comprised of at least a portion of information the second server received in a third message from the first server that directs the first communication endpoint to initiate the call back connection with the first server. In response to receiving the second message the first communication endpoint initiates the call back connection with the first server.

Other details objects and advantages of the invention will become apparent as the following description of certain present preferred embodiments thereof and certain present preferred methods of practicing the same proceeds.

Referring to a communication system may include a communication endpoint of a first network . The first network may be a wide area network or local area network such as an enterprise network or private network maintained by a corporation or other business. The first network may also include a firewall apparatus that hosts or helps implement a firewall for the network. The firewall apparatus may include a network address translation NAT server for example or may include other firewall related nodes for supporting a firewall to provide a level of security to devices of the first network .

The first communication endpoint may be an SIP communication endpoint. For instance the first communication endpoint may be a tablet a smart phone a mobile cellular phone an internet appliance a laptop computer a mobile computer device or other communication terminal. The first communication endpoint may include a processor unit that is communicatively connected to a first transceiver unit at least one input device memory a microphone a display unit and a speaker . The first transceiver unit may include a receiver unit and a transmitter unit for transmission and reception of data via a cellular network a wireless network connection or other network connection.

The processor unit may be a central processing unit such as a microprocessor interconnected microprocessors or other hardware processor element. The speaker may emit audio and the microphone may be an input device that records audio emitted by a user for receiving that audio data. The display unit may be a liquid crystal display or other display device. The display unit may be configured as a touch screen display that functions to output data visually while also permitting a user to provide input by touching different portions of the display. The input device may be a button keyboard mouse or other type of input device a user may utilize to provide input.

The memory may be a non transitory computer readable medium that has at least one application stored thereon that defines a method that is performed by the endpoint when the processor unit runs or executes the application . The memory may include a hard drive a flash drive an optical disk or a hard disk or other type of computer readable medium that stores data for a non transitory period of time.

The first communication endpoint may have an application that requires communication with an application server during the execution of the application. The application server may help facilitate one or more services available to a user of the communication endpoint when running the application .

The first communication endpoint may be communicatively connected to an SIP communication server so that it can receive and send messages to the SIP communication server . The SIP communication server may communicate with the first communication endpoint to help facilitate the establishment of communication sessions such as phone calls text messages or other types of communication sessions.

An optional contact triggering server such as a server that supports another application run on the endpoint may also be able to communicate with the first communication endpoint via communications with the SIP communication server .

The application server SIP communication server and contact triggering server may each include a first transceiver unit that is communicatively connected to a processor unit . The processor unit may also be connected to memory such as non transitory memory. The memory may have at least one application stored thereon. The application can include program code that defines instructions that define a method that the server performs when the processor unit executes the application . It should be understood that the memory may also include one or more databases or other data that contains information that may be accessed to route calls redirect communications or provide other services hosted by the server. The first transceiver unit may be configured to permit communications to be established between the server and other devices such as other servers or communication terminal devices. For instance the server may send data to different communication endpoints via the first transceiver unit so that one or more communication sessions such as application sessions for supporting an application being run on an endpoint may be established or maintained.

Embodiments of the system may be configured so that communication endpoints such as SIP endpoints may be notified of a request from an application server for a callback via an SIP request message such as an SIP NOTIFY message with an event package that provides the state of the application server callback requests e.g. pending or not for that device. Such a request message may request the endpoint to contact a preconfigured application server based on the event package name identified in the request message. Embodiments of the system may be configured so that such a request message also identifies one or more alternative application server addresses a path to the application function within the server a functional component within the application server to communicate with a time slot for making the call back a layer 2 protocol to use for the call back connection e.g. HTTP or HTTPS or a layer 3 protocol to user for the call back connection e.g. Application Programming Interface protocol .

The first communication endpoint may register with the SIP communication server . By registering with the SIP communication server the first communication endpoint may also subscribe to the event package with the SIP communication server so that the registration also causes the subscription to occur. For example the first communication endpoint may send an SIP REGISTER message to the SIP communication server that includes an event package name supported by the application server in the accept header filed of the SIP REGISTER message. The name of the event package being included in the accept header of the SIP REGISTER message indicates support of the event package by the first communication endpoint .

One example of such an accept header may be Accept application application server contact me. In this example the event package is called application server contact me . It should be understood that there are numerous names or other type of indicia such as codes or acronyms that may be used to identify an event package within the SIP REGISTER message. Additionally it is contemplated that multiple different event packages may be identified for indicating a support of multiple different applications supported by different application servers to which an endpoint may need to communicate.

The SIP REGISTER message from the first communication endpoint may include at least one device identifier e.g. a Media Access Control MAC address phone number or a code identifying an address of the device that uniquely identifies the endpoint. In the event the endpoint s address does not serve as a unique identifier it may also include its address in the SIP REGISTER message.

The SIP communication server stores the first communication endpoint identifier provided via the SIP REGISTER message for its registering contact binding. The device identifier is used by the SIP communication server in order to identify a specific device registered with that server in case multiple devices share the same address.

In alternative embodiments the first communication endpoint may send a separate SIP SUBSCRIBE request to the SIP communication server after registering with this server. The SIP SUBSCRIBE request may identify the one or more application servers or other severs in an event package to which the endpoint requests a subscription. In response to the subscription the SIP communication server may send notifications or forward messages received from those identified application servers.

The first communication endpoint may be configured so that when it starts up it must send its device identifier to the application server so that the application server may support one or more applications that may be run on one or more endpoints. In some embodiments it is contemplated that the message sent to the application server may also include an address for the SIP communication server to indicate to the application server that at least certain types of communications that the application server may want to send to the first communication endpoint should be sent by the application server to the SIP communication server . In other embodiments the application server may be preconfigured to know of this contact reference or may alternatively receive a message from the SIP communication server or other network node to advise the application server that call back messages or other messages sent by the application server to the first communication endpoint should be sent to the SIP communication server . The SIP communication server could for example send at least one message to the application server or otherwise communicate to the application server that the first communication endpoint is registered with the SIP communication server and provide a unique identifier to the application server along with information requesting that the application server send messages intended for the first communication endpoint to the SIP communication server .

The message may be sent by the first communication endpoint to the application server at a number of possible times. For example upon a starting up or turning on of the first communication endpoint the endpoint may send a message to the application server that provides the application server with a message that identifies the endpoints unique identification. As another option such a message maybe sent by the first communication endpoint to the application server after the application is first actuated for running on the first communication endpoint after the endpoint is turned on. Such an occurrence may occur at a startup of the endpoint or may occur after the endpoint has started up and has been in use by a user for some period of time.

After the application server receives the message from the first communication endpoint or the SIP communication server that provides the application server with the endpoint s unique identifier and optionally also identifies the SIP communication server as a contact reference for the first communication endpoint the application server may determine that an update communication should be sent to the first communication endpoint . As a result the application server may send a callback request message intended for the first communication endpoint to the SIP communication server so that the first communication endpoint may initiate a relatively real time callback to receive the update as soon as possible. Such a callback request message may be sent as a Simple Object Access Protocol SOAP message that is sent by the application server to the SIP communication server.

The SOAP message sent to the SIP communication server that is intended for the first communication endpoint may include information to indicate to the SIP communication server that the first communication endpoint should be notified that it should establish a connection with the application server to receive an update of information or data. The SOAP message may include for example an address of the first communication endpoint the endpoint s unique identifier if that identifier is not the endpoint s address a request identification that is used by the application server to track and co relate a notification request to a subsequent connection by the first communication endpoint . If provided the request identification should be a unique identification. The address of the application server such as the IP address of the application server which may be used by the first communication endpoint to establish the requested call back connection to the appropriate server can also be included in the SOAP message. The address that is provided should be an IP address or a Fully Qualified Domain Name FQDN . In some embodiments the address of the application server may be omitted if a suitable address is already configured on the endpoint as the address for use when making a call back connection. Additionally the IP port number that may be used for establishing the requested call back may be provided in the SOAP message to help facilitate the call back connection. The information included in the SOAP message may be included in such a way that is it to be unmodified by the SIP communication server when the server sends such data to the first communication endpoint so that such data is not lost or changed to be inaccurate as such a change or loss of data may result in failing to provide the endpoint with sufficient information for making the requested call back connection.

Whenever the application server determines that it needs to initiate a connection to the first communication endpoint that is not reachable directly by the application server e.g. the endpoint is not reachable because it can only act as a client or the endpoint is not reachable due to a firewall or NAT server the application server may send a SOAP message to the SIP communication server that is addressed to the first communication endpoint . The first communication endpoint may be identified as the target device in such a message by including the unique identifier of that device to indicate it is the target of the message sent to the SIP communication server . The SIP communication server may locate the contact binding based on the received unique identifier of the first communication endpoint and determine that the received identifier matches the identifier for this endpoint. Thereafter the SIP communication server may send an SIP NOTIFY message for the subscription appropriate to the connection request by the application server to the first communication endpoint that contains information from the SOAP message sent by the application server such as the request identifier address of the application server application server port number or other information indicating a call back connection should be made to the application server . When the first communication endpoint receives the SIP NOTIFY message the endpoint may initiate the call back connection to the requested application server . Such a connection may be initiated using an address for the applicable application server that is included within the SIP NOTIFY message for example. Alternatively only information indicating a call back connection for a particular application is requested is within the SIP NOTIFY message and the first communication endpoint may use an address preconfigured on the endpoint if no such address is included in the SIP NOTIFY message or even if an address was provided in the SIP NOTIFY message.

The SIP NOTIFY message sent by the SIP communication server to the first communication endpoint may indicate a call back connection is requested based on the information contained therein. For instance such an SIP NOTIFY message may contain information relating to the event package name that is defined for the application server s usage and a contact me payload that contains the address of the application server the port of the application server and a unique request identifier the application server sent to the SIP communication server . Below is an example of an SIP NOTIFY message that may be sent by the SIP communication server to the first communication endpoint that has a registered directory number of 7546658000 

The contact me payload may be provided in any of a number of formats. It should be understood that the payload may also be referred to as a body . For instance a simple label value ABNF structure may be used but of course other structures such as an XML based body or other structure may be used as alternatives. An example of a simple label value ABNF structure is provided below with the noted hostport and IPv4 address being in accordance with the SIP Session Initiation Protocol standards set forth in RFC 3261 which is prepared by the Internet Engineering Task Force and is copyrighted by the Internet Society available at http www.ietf.org rfc rfc3261.txt 

As noted above the format of the event package and the contact me payload for the event package should be capable of containing the required information. As one of ordinary skill in the art will appreciate there are many ways in which such message content may be formatted. It should be understood that the format of such a message may be any type of format that is suitable to meet a particular design objective.

The application server may not directly send the call back request notification message to the SIP communication server for requesting the first communication endpoint to initiate a call back request connection. For example another server such as a contact triggering server shown in broken line in may send the message to the SIP communication server to initiate the call back request instead of such a message being sent by the application server. The contact triggering server may provide such a message to support load balancing to help reduce network traffic issues or as part of survivability service in the event a communication failure prevents the application server from sending such a message to the SIP communication server . In the event the contact trigger server sends the message to the SIP communication server the message may be a SOAP message similar to the message discussed above. The contact triggering server may know to send such a message based on its independent monitoring of the application server or based upon receipt of a message from the application server requesting the contact triggering server to send such a message for requesting the first communication endpoint to initiate a call back connection. The SIP communication server may respond to such a message from the contact triggering server similarly to how it responds to such a message received from the application server as noted above.

For security reasons it can be beneficial for the first communication endpoint to allow itself to be configured from an application server identified on a list of trusted application servers or a list of trusted application server addresses. The first communication endpoint may be configured to support a protection option that disables a non trusted application server s address from being usable.

Embodiments of our communication system method device and apparatus may be configured to avoid the polling techniques and their impact on network traffic which consume execution resources even when there are no waiting requests since the application server must check each device to determine that there are no waiting requests under a polling scheme. Further near real time updating and call backs may be achieved as there is no delay in updating or call backs due to a wait for a next scheduled polling time to occur. Further embodiments of our system method device and apparatus permit authenticated SIP interfaces to be utilized and permit an automatically secured communication via an encryption mechanism in use over that SIP interface e.g. SIP Transport Layer Security SIP TLS . Further the SIP NOTIFY requests sent from the SIP communication server can be challenged by the endpoint for authentication form the SIP communication server which further facilitates security of the system.

Embodiments of our communication system method device and apparatus are also an improvement over open web socket systems that may be utilized as such sockets can often be open for a long period of time even when notifications only occur infrequently or relatively infrequently. Web sockets are not needed for embodiments of the system for example and therefore no resources needed for opening a web socket or the maintenance of such web socket is needed. Further the above noted advantages also provide improved security relative to a web socket based approach.

It should be appreciated that different variations can be made to the above noted embodiments to meet different design objectives. For instance multiple endpoints may register with the SIP communication server for receiving SIP NOTIFY messages or other message formats that provide instructions to initiate a call back to an application server. As another example a communication system may have multiple different sets of endpoints and SIP communication servers within the same wide area network. Each set of endpoints and a server to which those endpoints are registered may be within a respective branch network of an enterprise network for example. As yet another example the application server may include a plurality of servers that all support the same application or suite of applications that are run on a particular endpoint.

While certain present preferred embodiments of the communication device communication system computer readable medium and methods of making and using the same have been shown and described above it is to be distinctly understood that the invention is not limited thereto but may be otherwise variously embodied and practiced within the scope of the following claims.

