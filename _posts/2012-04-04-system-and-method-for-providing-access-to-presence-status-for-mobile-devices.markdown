---

title: System and method for providing access to presence status for mobile devices
abstract: A system and method are provided for enabling access to presence status for mobile devices. The method comprises receiving, via an application programming interface, a subscription request, the subscription request requesting a presence data for at least one mobile device; registering a subscription for a subscriber device according to the subscription request; obtaining network data from one or more network infrastructure nodes associated with providing service to the at least one mobile device; determining that at least a portion of the network data is associated with the subscription; and providing the at least a portion of the network data to the subscriber device via the application programming interface.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09264504&OS=09264504&RS=09264504
owner: BlackBerry Limited
number: 09264504
owner_city: Waterloo, Ontario
owner_country: CA
publication_date: 20120404
---
This application is a continuation in part of U.S. patent application Ser. No. 13 408 891 filed on Feb. 29 2012 the contents of which are incorporated herein by reference.

The following relates to systems and methods for providing access to presence status for mobile devices.

Applications developed for mobile devices may depend on or otherwise utilize device presence information about particular devices. For example a server may also wish to send data to a mobile device based on presence information for example only when that mobile device is in coverage. A mobile device may also wish to know the coverage status of another device. Currently client side applications may be relied upon to report device presence information to a server associated with the particular client application. However relying on the client application to determine device presence information and provide this information to the server can be inefficient and or require complex low level programming on the part of the application developer.

It will be appreciated that for simplicity and clarity of illustration where considered appropriate reference numerals may be repeated among the figures to indicate corresponding or analogous elements. In addition numerous specific details are set forth in order to provide a thorough understanding of the examples described herein. However it will be understood by those of ordinary skill in the art that the examples described herein may be practiced without these specific details. In other instances well known methods procedures and components have not been described in detail so as not to obscure the examples described herein. Also the description is not to be considered as limiting the scope of the examples described herein.

It will be appreciated that the examples and corresponding diagrams used herein are for illustrative purposes only. Different configurations and terminology can be used without departing from the principles expressed herein. For instance components and modules can be added deleted modified or arranged with differing connections without departing from these principles.

It has been found that allowing application developers to use network or cloud based resources and application programming interfaces APIs enables rapid deployment of applications. By providing an API front end in an application development platform that exposes data from a proxy or other entity having access to data in a network infrastructure applications and application servers can query and receive device presence information for a particular device the presence information being mined from the network infrastructure. The API exposes information available to the device presence proxy deployed in or otherwise in communication with the network infrastructure to enable the applications and application servers to obtain device presence information mined from the network infrastructure.

It has also been recognized that the presence information mined from the network can also be used in a publisher subscription delivery model to allow an asynchronous delivery of presence information for one or more particular devices to a subscriber according to a subscription with an entity having access to the presence information.

The device presence proxy the application server or both the device presence proxy and application server may be hosted by a cloud based platform to enable applications and application servers to be developed using the cloud based platform with such application servers hosted in the cloud. In this way rapid application development can be supported by reducing the low level programming required to obtain network presence information concerning one or more mobile devices.

The device presence information mined from the network infrastructure may include coverage status roaming status transport type date of a previous transport change time of a previous transport change last authentication result for the mobile device last time of authentication etc.

Referring now to an example of a communication system is shown in which a mobile device e.g. A and B each of which may be referred to generically in this disclosure as mobile device can communicate with or otherwise access a network infrastructure for utilizing one or more network services e.g. A and B each of which may be referred to generically in this disclosure as network service s e.g. messaging telephony web access etc. The mobile device A includes an application that may operate with an associated application server . The application server may be hosted by any suitable network or cloud based system or may be custom built and hosted by a particular entity. In the example shown in Application Server is associated with a client application such as Application . Application Server may be communicable with client applications installed on more than one mobile device e.g. Mobile Device A and Mobile Device B. For example the application server may be associated with copies of the application on multiple mobile devices A B. As will be described in one embodiment of the present disclosure Application Server may utilize a single query to the device presence proxy to obtain device presence information for a plurality of mobile devices. Also shown in is an Application which does not have a corresponding application server . The application server is operable to communicate with a device presence proxy by having access to a device presence API . The device presence proxy is included in or otherwise in communication with the network infrastructure for obtaining device presence information and exposing that device presence information via the device presence API made available to the application server . In some implementations the mobile device A may also include a device presence API for communicating with the application server in obtaining device presence information exposed by the device presence proxy .

As noted above some applications may not have a corresponding application server and thus the device presence API may also provide programming instructions to enable particular applications e.g. Application to communicate directly with the device presence API in the device presence proxy in order to obtain network data exposed by the device presence proxy directly as illustrated in dashed lines in . It can be appreciated that the device presence API is shown using a common reference numeral for the sake of illustration and that this API may differ depending on which device contains it. For example instructions included in the device presence API on the mobile device may differ from those included in an application server .

The configuration shown in enables applications and application servers to determine a device s network related presence without having to query the mobile device or rely on reports from the mobile device . Exposing data provided by the network infrastructure can minimize the low level programming required by the application developer to obtain presence information for a particular mobile device that is required or otherwise utilized by an application client and or application server . Moreover applications deployed on the mobile device do not need to have knowledge of the particular device type OS version or memory location in order to determine network based device presence since the device presence API provides a network or cloud based source for such information.

The device presence proxy may be hosted on or otherwise provided by a server apparatus or network component having a processor or processing capabilities. Although the device presence proxy shown in is part of the network infrastructure it can be appreciated that the device presence proxy may instead be independent of and communicable with the network infrastructure .

The device presence proxy has access to for example network infrastructure nodes in the network infrastructure that can determine various device presence status types based on interactions between the mobile device and the network infrastructure e.g. where the network infrastructure nodes are associated with providing network services to the mobile device . The device presence information mined from the network infrastructure may include coverage status roaming status transport type date of a previous transport change time of a previous transport change last authentication result for the mobile device last time of authentication etc.

As illustrated in the device presence proxy and the application server may be hosted or otherwise provided by a cloud based application development platform cloud platform hereinafter . The cloud platform provides a central resource for applications that are deployed on to mobile devices . For example the cloud platform may be accessed by a developer to obtain a programming toolkit for developing an application that can be deployed to various mobile device and for hosting an application server corresponding to the application .

It can be appreciated that the cloud platform may be part of a wider cloud based environment that provides other services. For example as shown in the cloud platform may include a cloud gateway that provides an access point for interfacing with the network infrastructure . As discussed below the cloud gateway may be used to query domains within the network infrastructure that are different from those relied upon for mining device presence information. For example the cloud gateway may also be used to obtain device billing information by accessing a provisioning server. In the configuration shown in the cloud gateway includes the device presence API for communicating with the device presence proxy which in is in the network infrastructure . The cloud gateway may be responsible for managing queries to the network infrastructure and thus may be used to authenticate and authorize requests perform throttling and filtering and to route requests to appropriate data providers e.g. to specific domains and or nodes within the network infrastructure . The cloud gateway may therefore be an existing cloud platform component that is provided the device presence API in order to enable device presence requests to be authorized and routed to the device presence proxy among other requests.

It can be appreciated that depending on the role of the cloud gateway the device presence API provided to the cloud gateway may differ from the device presence API made available to the mobile devices and application servers . For example the mobile devices and application servers may have an API that includes program instructions for communicating with the cloud gateway rather than directly with the device presence proxy in a two tiered configuration. For the purpose of illustration the device presence API will be considered any API that provides the ability to obtain device presence information whether directly from the device presence proxy e.g. as shown in or via another agent or service or entity such as the cloud gateway shown in .

The processor receives an application inquiry from the cloud gateway mobile device or application server via the network interface the application inquiry requesting a presence data for at least one mobile device . Based on the application inquiry the processor sends a network data request to the network infrastructure via the network infrastructure interface to obtain network data from one or more network infrastructure nodes associated with providing service to the at least one mobile device . The processor receives or otherwise obtains a network data response from the network infrastructure which includes the requested network data. The processor then uses the obtained network data to determine an application inquiry response to the application inquiry and sends the inquiry response to the requestor e.g. the cloud gateway mobile device or application server depending on from where the application inquiry originated via the network interface .

The mobile device also includes one or more network interfaces for accessing and utilizing the network services and for enabling the application to communicate with the application server device presence proxy and or cloud gateway . The mobile device also includes a processor for executing program instructions e.g. for utilizing the device presence API enabling the application to be used etc.

In the example shown in the application server uses the device presence API to send an application inquiry to the device presence proxy at either directly or via the cloud gateway . As noted above the application inquiry may originate at the application server or may be facilitated by or forwarded on behalf of the mobile device . As shown in dashed lines the application on the mobile device may send a presence request to the application server at which is received by the application server at . It can also be appreciated that the presence request may also be sent by the mobile device directly to the device presence proxy in other examples.

The device presence proxy receives the application inquiry at and obtains network data at based on a request response mechanism employed in communicating with one or more components or nodes within the network infrastructure . The network data is provided by the network infrastructure at and this data may be mined or otherwise found or determined by the network infrastructure at depending on the nature of the application inquiry etc. For example the device presence proxy may determine a type of presence data from the application inquiry and generate a network data request that can be sent directly to a particular node in the network infrastructure . In other examples more complicated request response mechanisms may be employed in order to obtain the network data response required to generate the application inquiry response . One such example is described below.

The device presence proxy determines a response to the application inquiry at based on the nature of the data exposed by the network infrastructure and sends an inquiry response to the application server directly or via the cloud gateway at . The application server receives the inquiry response at and utilizes the presence data at e.g. to update a presence database or to perform a server based operation such as updating a presence server not shown . It can be appreciated that as shown in dashed lines the application server may also provide presence data to the application at which is received by the mobile device at .

Referring now to an example of a particular network infrastructure is shown. In this example an application A of a first mobile device A places a request for device presence information to an associated application server . In another alternative not shown the application A may place the request for device presence information directly to the device presence proxy . The requested device presence information may pertain to the presence information of the first mobile device A a second mobile device B or any other mobile devices not shown having an application client . The application client A of the first mobile device A identifies the mobile device e.g. second mobile device B for which the presence information is being requested by providing identifying information corresponding to that mobile device. For example a personal identification number PIN associated with that mobile device may be provided by the first mobile device A. The PIN may be a sequence of alphanumeric characters uniquely identifying a mobile device. The request for device presence data which includes the supplied PIN is received by the application server and passed to the cloud gateway for authorization and routing using the device presence API in the application server . Assuming the request is authorized the cloud gateway routes the request to the device presence proxy which in this example includes a global device presence web service in the network infrastructure and node device presence web services in respective nodes of a first domain Domain 1 in the network infrastructure e.g. a relay domain. As shown in the cloud gateway may also be configured to route other requests or otherwise communicate with other domains within the network infrastructure e.g. a second domain Domain 2 having a device provisioning state web server for providing device billing information for a particular mobile device .

The global device presence web service identifies from a plurality of infrastructure nodes the node containing presence information of the mobile device for which the presence information is being requested. For example the first mobile device A may receive network service s A provided by a first infrastructure node A. Hence the global device presence web service identifies the first infrastructure node A to retrieve presence information relevant to the first mobile device A. In another example the application client A of the first mobile device A may want to determine presence information of the second mobile device B. The second mobile device B in this example receives network service s B provided by a second infrastructure node B. Hence the global device presence web service identifies the second infrastructure node B to retrieve presence information relevant to the second mobile device B.

To identify the infrastructure node containing presence information relevant to the mobile device for which the presence information is being requested the global device presence web service may access a route service or a relay database in a storage element . The route service and the relay database are complementary services which both provide PIN routing information that can used to match the supplied PIN to a corresponding node ID. The node ID identifies the infrastructure node which can handle discovery of the relevant presence information. For example the node ID may identify one of a plurality of infrastructure node elements in the corresponding infrastructure node . Current routing information from the relay database may also be included in the route service . If the route service is not available the relay database can be used to look up the current node ID of the PIN.

Once the node device presence web service identifies the node element to which the request will be sent the node device presence web service proxies the request to the identified node element . If the request to the node element times out the request is resubmitted to another node element within the same infrastructure node . Upon receiving the request from the node device presence web service the node element may for example identify a wireless transport handling the mobile device and query that wireless transport for the presence data. The node element may alternatively mine data from the local route service and the local relay database to extract presence information.

The cloud gateway shown in may communicate with the global device presence web service using a Simple Object Access Protocol SOAP . The global device presence web service may also communicate with the plurality of infrastructure nodes using SOAP. The infrastructure node elements may communicate with the local wireless transports through an Inter Relay Protocol IRP communication. Communication between the global device presence web service and the route server may be handled through IRP communications. The relay database may be for example an SQL database. It should be understood that other common protocols may be used for communications between the global presence web service and the cloud gateway between the global presence web service and the infrastructure node elements or between the global presence web service and the route server .

Referring now to a sequence diagram is provided illustrating a process by which the cloud gateway may forward a request for presence information for a mobile device on behalf of an application server . In the example shown in the cloud gateway places a request for presence information at to the global device presence web service . In the request made at the cloud gateway provides a PIN corresponding to the mobile device for which the presence information is being requested. The global device presence web service then places a request to the relay database or route server at to determine PIN routing information. The PIN routing information is obtained by the global device presence web service at . Based on the obtained routing information the global device presence web service identifies the node element corresponding to the one or more identified node IDs at and selects the node element at . Once the appropriate node element has been identified the global device presence web service may then send a request for network data to the node element at via the respective node device presence web service . The global device presence web service receives the presence information from the node element at . The global device presence web service may then return the presence information to the cloud gateway at which may be passed back to the application server or application .

By having access to both the route service and relay database the global device presence web service is provided with the flexibility of having alternative sources of information to identify the infrastructure node corresponding to the mobile device associated with the presence information request. Similarly the infrastructure nodes having access to both local route services and local relay databases are provided with the flexibility of having alternative sources of information to identify the appropriate mobile device information sources such as a wireless transport for determining the appropriate network data.

Referring now to a sequence diagram is provided illustrating one way in which the node element may handle the request provided by the global device presence web service to the node device presence web service at . The request sent at may be translated by a SOAP server in the node element from a request for presence information to a request for network data at . The request for network data sent at is then processed by a server engine . The server engine determines the network data relevant to the presence information at by mining the appropriate wireless transport . The network data is obtained by the server engine at and then obtained by the SOAP server at . At this point the network data may be converted back into presence information. This presence information is then sent to the global device presence web service at as shown in .

It can be appreciated that various types of presence information can be mined from the network infrastructure using the principles discussed herein.

For example transport type and coverage status of a mobile device can be identified. The mobile device transport type can for example be cellular or WiFi. The coverage status can for example be in coverage out of coverage or having uncertain coverage. Transport type and coverage status can be mined from the wireless transport . Using the methods described above transport type and coverage status of a mobile device can be identified by having the global device presence web service select an appropriate node element issue a GetPinCoverage SOAP request to the identified node element and wait for a response. The SOAP request issued by the global device presence web service may include the request entity request ID and mobile device PIN as inputs. The node element identifies the appropriate wireless transport where the coverage status and transport type can be found and extracts the relevant information. The response from the node element may include a request response header which include the request entity request ID mobile device PIN and result status code the coverage state in our or uncertain a coverage timestamp indicating the time of last coverage state change and a transport type cellular or WiFi .

Roaming status of a mobile device can also be identified. The mobile device may be roaming not roaming or of an unknown roaming status. Roaming status can be mined from the local relay database of the infrastructure node being queried. Using the methods described above roaming status of a mobile device can be identified by having the global device presence web service or node device presence web service select an appropriate node element issue a GetPinRoaming SOAP request to the identified node element and wait for a response. The SOAP request issued by the global device presence web service may include the request entity request ID and mobile device PIN as inputs. The node element queries e.g. the local relay database for the roaming status of the mobile device . The response from the node element may include a request response header which include the request entity request ID mobile device PIN and result status code and the roaming status roaming not roaming or unknown .

Referring now to a communication system providing a subscription delivery model is shown. The network information mined or otherwise determined from or provided by one or more nodes in a network infrastructure may be published by a subscription service to one or more subscribers . In the example shown in a device presence proxy provides the subscription service by enabling subscribers to register for a subscription associated with presence information for one or more mobile devices . For example an application running on an electronic device may subscribe to obtain presence information for each contact stored in an address book or contact list under certain criteria e.g. when roaming when not roaming etc. . When the presence information associated with the subscription is available to the subscription service the presence information is delivered to the subscriber in accordance with the terms rules preferences options or criteria of the subscription. In this way the subscriber may be decoupled from the publisher e.g. the network infrastructure such that the presence information is delivered asynchronously and thus not requiring a poll or request to the device presence proxy or other entity providing the subscription service in order to obtain such presence information.

It can be appreciated that the device presence proxy shown in may be the same entity as that shown in and described above or may be a separate entity. In other words the device presence proxy may provide presence information according to both the request response delivery model shown in or the subscription delivery model shown in or subscription services may be provided by another entity. If separate device presence proxies or and are utilized it can be appreciated that the device presence proxy providing the subscription service may have the device presence API and obtain data directly from the network infrastructure similar to the device presence proxies and shown in and or may be operable to communicate with the device presence proxy or to obtain network data to be used in providing subscriptions. Accordingly the configuration shown in is for illustrative purposes only.

It can be appreciated that the one or more criteria can relate to the status of the mobile devices associated with the device presence information which may include the subscriber itself when the subscriber is associated with a mobile device . For example the criteria may include what type of device presence data to deliver with respect to a set of contacts as well as a criterion under which to trigger the deliver such as when the subscriber is not roaming.

The information associated with a particular subscription is stored in a subscriptions module or database subscriptions such that the subscriptions may be referenced in order to deliver the device presence data to a particular subscriber in accordance with a particular subscription .

A network data request may be sent by the device presence proxy in stage . The network data request includes details of one or more subscriptions in order to identify to one or more nodes in the network infrastructure what type of network data and for what mobile device s is are required by the device presence proxy in order to provide the registered subscription services. Alternatively the device presence proxy may send network data requests periodically on behalf of the subscriber in order to provide a subscription service. In either scenario it can be appreciated that obtaining and delivering the network data to the subscriber may be performed transparently to the subscriber such that the subscriber is not required to actively poll the network infrastructure or the device presence proxy . Instead the subscription service coordinates the obtaining and delivery of the device presence information on behalf of the subscriber and thus acts as an intermediary between the subscriber and the network infrastructure i.e. the publisher .

Network data deliveries may therefore occur in stage at appropriate times e.g. when the appropriate presence information becomes available and once obtained by the device presence proxy a subscription delivery is completed in stage using the network data delivered in stage .

Once the subscription has been established the device presence proxy is responsible to obtain network data from the network infrastructure and deliver device presence information in accordance with the subscription. This may be accomplished in various ways depending on how the device presence proxy obtains the network data from the network infrastructure . For example the network infrastructure may periodically provide all presence information available to it for all devices consuming network services with one or more nodes in the network infrastructure . Alternatively the network infrastructure may store a list of mobile devices associated with subscription services and report network data associated with any of the mobile devices on the list when such data becomes available. In yet another alternative the network infrastructure may be mined when polled by the device presence proxy e.g. periodically or according to criteria associated with particular subscriptions. As such the device presence proxy may optionally request delivery of network data according to a subscription at which subscription is recorded by the network infrastructure at .

The network infrastructure provides network services to a mobile device at e.g. messaging telephony web browsing etc. and the mobile device consumes those network services at . While consuming such network services network data may be provided and or recorded by the network infrastructure e.g. as described above with respect to . The network infrastructure determines network data at and provides the network data to the device presence proxy at e.g. according to a list of mobile devices registered for subscriptions and or other criteria established by the device presence proxy .

The device presence proxy receives the network data at and determines if the received network data meets the criteria associated with the subscription registered at . If not the device presence proxy may continue to receive network data mined from the network infrastructure at until the criteria have been met. One the criteria for the subscription have been met device presence data is delivered at to the subscriber which is received by the subscriber at .

It can be appreciated from the example shown in that network data relating to one or more mobile devices which is obtained from the network infrastructure can be delivered to subscribers instead of having the device presence proxy or network infrastructure polled on demand.

Accordingly there is provided a method comprising receiving via an application programming interface a subscription request the subscription request requesting a presence data for at least one mobile device registering a subscription for a subscriber device according to the subscription request obtaining network data from one or more network infrastructure nodes associated with providing service to the at least one mobile device determining that at least a portion of the network data is associated with the subscription and providing the at least a portion of the network data to the subscriber device via the application programming interface.

There is also provided a device presence proxy apparatus comprising a processor and a memory the memory comprising computer executable instructions for receiving via an application programming interface a subscription request the subscription request requesting a presence data for at least one mobile device registering a subscription for a subscriber device according to the subscription request obtaining network data from one or more network infrastructure nodes associated with providing service to the at least one mobile device determining that at least a portion of the network data is associated with the subscription and providing the at least a portion of the network data to the subscriber device via the application programming interface.

There is also provided a computer readable medium comprising computer executable instructions for receiving via an application programming interface a subscription request the subscription request requesting a presence data for at least one mobile device registering a subscription for a subscriber device according to the subscription request obtaining network data from one or more network infrastructure nodes associated with providing service to the at least one mobile device determining that at least a portion of the network data is associated with the subscription and providing the at least a portion of the network data to the subscriber device via the application programming interface.

It will be appreciated that any module or component exemplified herein that executes instructions may include or otherwise have access to computer readable media such as storage media computer storage media or data storage devices removable and or non removable such as for example magnetic disks optical disks or tape. Computer storage media may include volatile and non volatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Examples of computer storage media include RAM ROM EEPROM flash memory or other memory technology CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by an application module or both. Any such computer storage media may be part of the device presence proxy application server cloud platform cloud gateway or mobile device etc. or accessible or connectable thereto. Any application or module herein described may be implemented using computer readable executable instructions that may be stored or otherwise held by such computer readable media.

The steps or operations in the flow charts and diagrams described herein are just for example. There may be many variations to these steps or operations without departing from the principles discussed above. For instance the steps may be performed in a differing order or steps may be added deleted or modified.

Although the above principles have been described with reference to certain specific examples various modifications thereof will be apparent to those skilled in the art as outlined in the appended claims.

