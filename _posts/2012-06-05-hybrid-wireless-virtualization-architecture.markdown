---

title: Hybrid wireless virtualization architecture
abstract: According to one embodiment of the invention, a method for optimizing revenue for an operator of a network comprises receiving control information by a network device. The control information includes a first airtime representing an amount of airtime used for wireless data transmissions to a first group of network devices. The method further involves an operation of computing an airtime allocation for the first group of network devices based on the first airtime and lease rates. The lease rates are prices per unit of airtime to be paid by an operator associated with one or more of the network devices.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09143916&OS=09143916&RS=09143916
owner: Hewlett-Packard Development Company, L.P.
number: 09143916
owner_city: Houston
owner_country: US
publication_date: 20120605
---
This application is based upon and claims the benefit of priority from U.S. Provisional Patent Application No. 61 549 051 filed Oct. 19 2011 the entire contents of which are incorporated herein by reference.

Embodiments of the present disclosure relate to the field of wireless communications and in particular a hybrid wireless virtualization HWV controller adapted to operate across heterogenous virtualized radio technologies for optimizing network operator revenue and or data throughput through use of a common measurement metric.

Until fairly recently cellular telephone networks were implemented and managed separately from wireless networks e.g. wireless local area networks WLANs Wi Fi hot spots etc. . There were a number of reasons why these two networking platforms were initially implemented and managed separately. For instance mobile network operators typically were unable to leverage existing resources e.g. hardware software personnel etc. to support both cellular services and wireless services. The resources needed for supporting transmissions over a cellular band are quite different from resources needed to support transmissions over a wireless frequency band. Furthermore the fiscal benefits in supporting multiple types of communication services were not present at that time.

Recently however there has been a proliferation of dual mode devices into the consumer marketplace. Dual mode devices enable Internet connectivity through different communication services namely cellular services and wireless services. This provides consumers with greater flexibility in downloading data according to a selected characteristic cost effectiveness fastest download rate or most reliable connection.

With the proliferation of dual mode devices mobile network operators have begun to recognize the operational benefits in providing multiple avenues to offload certain data traffic as well as the fiscal benefits that are realized by supporting higher levels of data traffic. For instance mobile network operators are able to lease excess capacity on their underlying physical networks to multiple entities through wireless virtualization. Wireless virtualization refers to the running of multiple virtual networks which are leased to mobile virtual network operators MVNOs by the mobile network operator MNO the entity owning the underlying physical network.

Wireless virtualization is an approach where underlying physical network interfaces are abstracted by more than one virtual interface which enables better sharing of the physical interface and the medium used by the radio associated with that virtual interface. Virtualization usually involves the application of three fundamental concepts for sharing a resource 1 abstraction 2 programmability and 3 isolation. Abstraction ensures that the same interface is available to all the virtual entities using the systems. Programmability ensures that each of the virtual interfaces is able to affect properties of the underlying physical interface without conflicting with the requirements of other virtual entities. Lastly isolation is a property which ensures that the load on one virtual entity does not affect the other and essentially each of the virtual interfaces is able to work independent of each other.

Therefore since networks are designed to provide access to different types of virtualized radio platforms a mechanism is needed for supporting these different types of radios for achieving optimal revenue recovery and or aggregated throughput.

In the following description several specific details are presented to provide a thorough understanding. While the context of the disclosure is directed to provisioning and managing virtualized heterogeneous radios one skilled in the relevant art will recognize however that the concepts and techniques disclosed herein can be practiced without certain details such as one or more operations certain logic or the like. In other instances well known implementations or operations are not shown or described in detail to avoid obscuring aspects of various examples disclosed herein. It should be understood that this disclosure covers all modifications equivalents and alternatives falling within the spirit and scope of the present disclosure.

This disclosure illustrates exemplary embodiments of a hybrid wireless virtualization HWV controller based network architecture. By using the HWV controller or its functionality a unified approach can be taken for provisioning and managing virtualized heterogeneous radios irrespective of their Medium Access Control MAC and Physical Layer PHY mechanisms. It is shown that the airtime occupancy for communications with different slices e.g. different groups of wireless network devices can be used as a single metric for controlling different virtualized platforms. The HWV controller can account and dynamically re provision slice quotas namely airtime constraints for different wireless network devices within a particular slice in order to maximize network operator revenue and or aggregate system throughput performance. In fact simulations have shown that an HWV controller based infrastructure is able to improve the revenue generated from a single virtualized base station BTS and an access point AP by up to forty percent 40 under tested conditions.

The design goals of a hybrid wireless virtualization HWV system controller can be crystallized into the following requirements. First the network architecture should support virtualization and resource allocation across multiple wireless network devices that are owned by the mobile network operator MNO . Such support should be independent of the type of the wireless network device. For example these devices could be second generation 2G base stations 3G base stations 4G base stations access points WiFi hotspots or wireless meshes. Second the HWV controller should be able to dynamically re provision and control the virtualized network such that the network operator benefits irrespective of time varying operating conditions. Lastly in order to ensure that these goals are met a HWV controller should use a common metric for measurement and policy enforcement across multiple virtualized radios owned by the network operator in lieu of multiple metrics.

For the purpose of link and user performance measurements numerous metrics e.g. throughput goodput delay performance have been previously used. These metrics have also been used for resource provisioning on scheduled MAC mechanisms. For example in a WiMAX base station the system administrator can specify the number and types of flows in a service class with each class having a minimum maximum throughput and delay constraints. However these metrics are not suitable for the HWV architectures because they do not translate into the use of the same amount of radio resources on any type of radio.

For example the same amount of throughput can be achieved by using different physical layer PHY rates on two different links. However the link with the slower PHY rate uses more radio resources to achieve the same throughput as that by a link with a faster PHY rate. In order to remove these and other differences in resource usage induced by the MAC layer such as channel access time MAC and PHY overheads MAC enhancements like custom or standard aggregation mechanisms and the nature of the MAC itself scheduled or unscheduled radio airtime is used as a single universal metric for control of the virtualized framework.

In particular t is the fraction of airtime that is used by a radio for wireless transmission and tdirectly translates into the resources on every wireless network device. This fraction of airtime tcan be used as a single metric for resource accounting on a scheduled MAC mechanism as well as unscheduled MAC. Consider that represents the number of resource blocks allocated to slice j by a MAC scheduler of a wireless network device. In this case it can always be experimentally verified that 

This is the case because airtime utilization of a slice is a direct result of such MAC scheduling. In any radio the airtime fraction is also equivalent to the aggregate throughput rateachieved by slice j as a fraction of the assigned average physical ratefor the slice. Hence irrespective of having a scheduled MAC in a base station or an unscheduled CSMA MAC in an AP airtime can be used as a single metric for accounting and controlling slice radio resource usage.

Based on this insight the design of the HWV controller described below takes into account resource usage across different virtualized network components and will be responsible for dynamically re provisioning these components for network operator revenue optimization or plain rate maximization.

The HWV controller is responsible for getting airtime usage and rate feedback from each of the virtualized components namely wireless network devices such as base stations and APs. It is also responsible for re provisioning them so that the network operator s profit is maximized. The virtual base station architecture and the modified SplitAP framework enforce group airtime fairness across slices.

Let the airtime quota requested per slice across a group of base stations be specified by the set Q Q . . . Qn. Let the airtime allocated per slice j at every base station k be given as t . Similar quotas Q Q . . . Q n are specified for the same set of slices over a set of access points APs . Let the airtime allocated per slice j at every access point k be given as t . Similarly let the requested airtime per slice per base station or access point be given as rand r respectively. The requested airtime is updated at runtime for every iteration at which revenue throughput optimization is performed. Corresponding usage flags for base stations and access points are given as uand u .

The overall revenue function across the set of base stations and access points owned by the operator is defined as Rev 2 Recircumflex over v circumflex over 3 

According to one embodiment of the invention the revenue functions are linear namely the product of the slice allocation for a particular resource e.g. base station or AP and a constant C that represents the cost per unit time. For example if a slice gets fifty percent 50 of the AP and through some previous agreement between the MVNO and MNO it is known how much cost C the MVNO is willing to incur for the entire resource the revenue can be estimated based on these factors.

To keep the analysis simple it is contemplated that C is a constant. However based on the agreements between the MNO and MVNO it could be a function of slice airtime allocation.

More specifically the revenue is solved as a linear program because all functions and constraints are linear. However if the cost is made non linear such as a convex relationship for example a convex optimization problem could be solved and still find solutions. Also a current utilization or load amount of airtime used out of the assigned quota to balance allocations is used which helps to improve system performance.

Here and are the utility functions provided by MVNO j for matching their traffic demands on a base station and access point respectively. For now the utility functions can be defined as a linear function of the allocated airtimes given as 4 circumflex over 5 

These equations indicate a purely increasing utility with increasingly allocated capacity. Eventually the values Cand C can be equated to the average physical rates available for the clients belonging to the slices j on base stations and access points. Information of the average physical layer rates and the overall traffic flowing to the clients is available at the controllers of both the virtual base station framework and the SplitAP design and these can be polled regularly by the HWV controller. In an initial evaluation of the setup Cand C may be set to be equal to average of the slice physical layer rates to the clients. This eliminates the pricing component from the objective function and the problem becomes a rate maximization problem. Eventually the revenue optimization function of the controller is demonstrated by substituting linear objective functions of achieved rate for Cand C . The problem being solved at the HWV controller mat be formulated as 

In the above optimization formulation the is used to represent the minimum airtime reservation at the base station k for the slice j. Since the objective function and all of the constraints are convex the formulation can be solved at the HWV controller using any standard convex optimization tool or heuristic.

Herein certain terminology is used to describe features for embodiments of the invention. For example a network device generally refers to a device that includes logic adapted to transmit and or receive signaling and to process information within such signaling. Different embodiments of a network device may include but are not limited or restricted to 1 a wireless client device being any data processing equipment such as a computer with wireless connectivity e.g. tablet laptop desktop server a netbook etc. a wireless communication device e.g. a cellular telephone personal digital assistant PDA television set top box etc. 2 an access point 3 a base station 4 a data transfer device e.g. network switch router controller brouter etc. or the like.

It is contemplated that the network device may include hardware logic including one or more of the following i a processor ii one or more radios e.g. component that handles the wireless data transmission reception iii physical connectors to support wired connectivity and iii a non transitory computer readable storage media e.g. a programmable circuit a semiconductor memory such as a volatile memory such as random access memory RAM or non volatile memory such as read only memory power backed RAM flash memory phase change memory or the like a hard disk drive an optical disc drive or any connector for receiving a portable memory device such as a Universal Serial Bus USB flash drive .

Additionally the term logic is generally defined as hardware and or software. As hardware logic may include processing circuitry e.g. a microcontroller a microprocessor a programmable gate array an application specific integrated circuit etc. semiconductor memory combinatorial logic or the like. As software logic may be one or more software modules such as executable code in the form of an executable application an application programming interface API a subroutine a function a procedure an object method implementation an applet a servlet a routine a source code an object code a shared library dynamic load library or one or more instructions. These software modules may be stored in any type of a suitable non transitory storage medium described above or transitory computer readable transmission media e.g. electrical optical acoustical or other form of propagated signals such as carrier waves infrared signals digital signals .

Additionally the term slice denotes a group of wireless client devices having a common mobile virtualized network operator MVNO . An allocation interval is a period of time between allocation cycles namely the time between neighboring assignments of airtime to MVNO s forming the virtualized network. The allocation interval may be in units of microseconds milliseconds seconds or even longer durations such as minutes hours or days.

The term interconnect is broadly defined as a logical or physical communication path such as for instance electrical wire optical fiber cable bus trace or a wireless channel using infrared radio frequency RF or any other wireless signaling mechanism. The term message constitutes any grouping of data in the form of a packet an Asynchronous Transfer Mode ATM cell a frame or any series of bits having a prescribed format.

Lastly the term or as used herein is to be interpreted as an inclusive or meaning any one or any combination. Therefore A B or C means any of the following A B C A and B A and C B and C A B and C. An exception to this definition will occur only when a combination of elements functions steps or acts are in some way inherently mutually exclusive.

Certain details are set forth below in order to provide a thorough understanding of various embodiments of the invention albeit the invention may be practiced through many embodiments other that those illustrated. Well known logic and operations may not be set forth in detail in order to avoid unnecessarily obscuring this description. Moreover the illustrated embodiments of the invention and the description associated therewith should be considered as examples of the principles of the invention and not intended to limit the invention to those specific embodiments. In the description below like reference numerals are used to describe the same similar or corresponding parts in the several views of the drawings.

As illustrated as an exemplary embodiment a first slice features one or more wireless client devices in wireless communications with a first wireless network device being part of MNO network . First slice also features one or more wireless client devices in wireless communications with both a second wireless network device and third wireless network device that may have radio types different than first wireless network device . Similarly second slice features one or more wireless client devices in communication with first wireless network device and one or more wireless client devices in communication with third wireless network device .

Herein according to this embodiment of the invention both first and second wireless network devices and may be implemented as access points which support wireless communications in accordance with IEEE 802.1x Standards e.g. IEEE 802.11 etc. . However third wireless network device may be implemented as a base station BTS which supports cellular communications in accordance with any 2G 3G 4G compliant standards such as Long Term Evolution LTE or LTE Advanced any Code Division Multiple Access CMDA based standards e.g. CDMA2000 CDMA2000 1x CDMA2000 1xEV DO etc. any Global System for Mobile Communications GSM based standard e.g. Universal Module Telecommunications System UMTS Enhanced Data rates for GSM Evolution EDGE etc. WiMax related standards e.g. IEEE 802.16 IEEE 802.16e or the like.

Wireless network devices and are communicatively coupled to a hybrid wireless virtualization HWV controller which is adapted to receive and process control information from wireless network devices and . This control information may include a fraction of airtime t that is used in wireless communications with wireless client devices in slice j using radios implemented within wireless network devices and . It is contemplated that in provisioning and managing virtualized heterogeneous radios according to one embodiment of the invention at least t is supplied from wireless network devices and to HWV controller . The amount of airtime can be computed by wireless network devices and or based on packet size modulation scheme throughput and MAC retries for communications with slices and .

HWV Controller is positioned by taking into account the allocation interval utilized by MNO network . If MNO network requires a prompt feedback e.g. feedback within one second after receipt of signaling from wireless network devices and or to re compute the airtime allocation HWV controller is located proximate to wireless network devices and . For instance HWV controller may be situated physically proximate to wireless network devices and e.g. physically connected to devices and or or implemented on network although the functionality of HWV controller may be implemented within any device connected to network or in cloud computing provided externally located device s with computing power and communication interface s . Alternatively the functionality of the HWV controller may be implemented within one or more of wireless network devices and .

HWV Controller is adapted to support communications with a data storage device over wired public network such as the Internet. This enables the HWV controller to store airtime allocations computed by HWV controller for previous allocation cycles thereby allowing for the use of heuristic information to optimize revenue or aggregated throughput over MNO network .

Additionally as HWV controller is adapted to support multiple wireless network devices control information further comprises a message that includes t being the total amount of airtime utilized for communications with wireless client devices slice j over one or more radios implemented within wireless network device k e.g. base station .

Upon receipt of airtime usage for computations of optimal revenue realized for airtime allocated in the next allocation cycle HWV controller processes data corresponding to the received airtime usage along with lease rate information associated with MVNOs. The lease rate information is based on cost per prescribed unit of measure such as cost data unit e.g. byte megabyte etc. cost unit of time e.g. millisecond second minute etc. or the like. Based on such processing HWV controller is able to determine airtime allocation to optimize revenue for leasing out capacity on the MNO network . Such information and is provided to wireless network devices e.g. AP and BTS and may be stored on storage device along with pricing information associated with the MVNOs.

Alternatively upon receipt of airtime usage HWV controller may be adapted to process data corresponding to the received airtime usage along with PHY rates associated with different wireless client devices. Based on such data processing HWV controller is able to determine the allocated airtime to different MVNOs to support optimal throughput over MNO network . Such information and is provided to the wireless network devices and may be stored on storage device along with PHY rates associated with the different wireless client devices.

HWV controller further comprises a connector that is adapted to communicate over a public network interconnect to provide airtime allocation data to HTTP based network wide policy database NWPD in response to queries for such information. Connector supports communications through a Simple Network Management Protocol SNMP interface. Alternatively airtime allocation data may be accessed via connector through use of a software driver or an Application Programming Interface API .

According to one embodiment of the invention an optional web service may be adapted to send configuration and provisioning information e.g. operator policies utility functions etc. to NWPD . Web service receives usage and revenue statistics from storage device .

NWPD is responsible for advertising utility functions because it is envisioned that these functions will change based on time varying agreements between the MNO and the MVNOs. HWV controller as well as other HWV controllers in virtualized network would be configured at deployment time with a Uniform Resource Locator URL of NWPD and would be responsible for independently fetching operator policies and utility functions.

It is noted that fetching of information from HWV controller may happen infrequently depending on the time of the lease agreements between the MNO and the MVNO. NWPD is also adapted to advertise the MNO s revenue generation capabilities through different access mechanisms namely cellular or wireless communication logic.

Interposed between HWV controller and MAC scheduler a flow scheduler is adapted to adjust and control a flow of data targeting different wireless client devices hereinafter referred to as data flows based on airtime allocation quotas Q received from HWV controller via a downlink interconnect . Such adjustment and control of data is conducted prior to the handling of data flows by MAC scheduler . Flow scheduler may be located remotely from base station or within base station .

More specifically it is contemplated that base station is coupled to HWV controller through an uplink interconnect and provides airtime usage t namely the total amount of airtime utilized for slice j e.g. the group of wireless client devices pertaining to MVNO 1 for all radios within wireless network device k e.g. base station . HWV controller is adapted to further receive airtime usage from other virtualized end points.

HWV controller re provisions airtime to optimize revenue e.g. maximize revenue maximum rate or maximum anticipated return where the likelihood of revenue recovery varies among the lease rates and or system throughput. HWV controller provides quota Q to flow scheduler . Each quota Q Q . . . Qk identifies airtime allocations for a particular MVNO with a granularity that allows different k wireless network devices to support different amounts of airtime for wireless client devices that are part of a particular slice j. Flow scheduler subsequently alters the data provided to MAC scheduler so that prescribe amounts of airtime are permitted for certain data flows.

Access point is coupled to HWV controller through an uplink and provides airtime usage t namely the total amount of airtime utilized for slice j e.g. MVNO 1 for all of its radios. HWV controller is adapted to further receive airtime usage from other virtualized end points as well before performing airtime allocation.

In general both flow scheduler and traffic shaping logic are adapted to receive on its control path current usage statistics from HWV controller namely PHY rate for clients airtime number of MAC retries etc. and airtime allocation. On the data path flow scheduler and traffic shaping logic shape incoming data traffic and send the shaped traffic to a target device e.g. BTS or AP . Multiple approaches may be using for traffic shaping operations.

A first approach involves flow scheduler and traffic shaping logic to use feedback information to calculate average PHY layer rate goodput for every slice. Then a shaping value is computed by multiplying the airtime allocation by this rate. The aggregate data traffic from the slice is shaped using the shaping value.

The second approach involves flow scheduler and traffic shaping logic computing the shaping value using feedback information as described above. However data traffic is shaped to restrict airtime usage for the clients with the slowest PHY rates.

First communication interface is adapted to receive control information from one or more wireless network devices not shown . According to one embodiment of the disclosure control information includes airtime usage on a per slice basis. This would require the wireless network devices to compute and aggregate airtime usage for each data flow associated with each MVNO. Alternatively the airtime usage on either a per data flow basis or per radio basis may be aggregated and provided to HWV controller which would be adapted to aggregate the airtime usage on a per MVNO basis.

Optionally first communication interface may be adapted to receive PHY rates for each of the wireless client devices associated with each MVNO. The PHY rates are used for assigning greater airtime to those wireless client devices that can support a higher PHY rate. This increases the overall data throughput of the hybrid wireless virtualization HWV system.

Second communication interface is adapted to receive rate information and usage rules for each MVNO. The usage rules define the amount of airtime reserved per allocation cycle by each MVNO. The amount of airtime may be in the form of a total prescribed time e.g. hours minutes seconds milliseconds etc. or may be in the form of a percentage of the total amount of airtime offered by the wireless network device. As an illustrative embodiment for an allocation cycle of a prescribed duration one MVNO may reserve one hour of airtime while another MVNO may reserve 20 minutes of airtime. As another illustrative embodiment one MVNO may reserve twenty percent 20 of the airtime while another MVNO may reserve five percent 5 of the airtime.

According to one embodiment of the invention such usage may be altered based on historical usage monitored by heuristic module . According to another embodiment of the invention heuristic module may be configured to operate as an approximation tool in lieu of optimization module . In particular airtime allocations may be adjusted based on historical static data. For instance MVNOs with the highest lease rate may be configured with the highest allocation of data traffic. Similarly the lowest percentage allocation of airtime may be received for slices or client devices having the lowest PHY rate e.g. average PHY rate median PHY rate etc. .

Additionally according to this embodiment second communication interface is adapted to receive rate information such as lease rates and or predicted likelihood of recovery at prescribed lease rates based on MVNO factors e.g. financial stability of MVNO etc. . The lease rates may be linear e.g. prescribed cost unit of time or non linear. Non linear lease rates may be decreasing or increasing as more airtime is purchased.

Third communication interface is adapted to exchange Internet Protocol IP messages with an external web server so as to provide heuristic information such as airtime usage by each of the MVNOs for one or more previous airtime allocation cycles. Such usage information may be used for invoice generation or providing real time accounting information to each of the MVNOs.

Within memory optimization module heuristic module and communication module are provided to control operations of HWV controller with respect to optimized revenue generation and or throughput aggregation.

Optimization module is adapted to receive airtime usage and lease rate information associated with each MVNO utilizing wireless network devices. As previously stated the airtime allocated per slice j at every wireless network device k may be represented as t base station or t . Furthermore airtime quota meaning a ratio of total airtime reserved by a particular slice may be allocated differently for different base stations. The airtime quota may be specified for base station by Q Q . . . Qn and Q Q . . . Q n for access points. The requested airtime per slice j per base station or access point is given as rand r respectively. The requested airtime may be updated at runtime for every iteration at which the optimization module is utilized. Corresponding usage flags for base station and access points are given as u and u .

Optimization module is also responsible for re provisioning airtime allocations by the wireless network devices so that the network operator s profit is maximized and enforce group airtime fairness across slices.

The overall revenue function across the MNO owned base station s and or access point s is defined as the following wherein Rev t is directed to the revenue from airtime provided for support of cellular communications while Rev t is directed to the revenue from airtime provided for support of wireless communications Rev 8 Recircumflex over v circumflex over 9 

According to one embodiment of the invention the revenue functions Rev t and Rev t may be linear when the lease rates are linear. As a result the revenue determination may be conducted by multiplying the slice allocation for a particular resource e.g. wireless network device by a constant C that represents the cost per unit time. However according to another embodiment of the invention the revenue functions Rev t and Rev t may be non linear if the lease rate is non linear such as a convex relationship in which the leased amount per unit of airtime decreases or a concave relationship in which the leased amount per unit of airtime increases as more airtime is purchased. Also a current utilization or load amount of airtime used out of the assigned quota to balance allocations may be used to improve overall system performance.

According to one embodiment of the invention and are utility of every slice allocation as the lease price which a jMVNO will be willing to pay for prescribed airtime biased by the utilization of resource allocations in the previous allocation cycle. Hence the incentive of an allocation for slice j on a wireless network device WND could be calculated as prev alloc utilization WND 10 BTS prev alloc utilization BTS 11 AP prev alloc utilization AP 12 

The prev alloc utilization j WND indicates the fraction of airtime used by the slice j on the wireless network device WND . These equations indicate an increasing utility incentive with increasingly allocated capacity. Eventually the values Cand C can be equated to the average physical rates available for the wireless client devices belonging to the slices j supported by base stations and access points of the virtualized network respectively. Upon simplifying equation 10 where the notation can be generalized for a situation where there are different radios e.g. base stations APs wireless mesh routers etc. the lease rate a virtual operator j is willing to pay for the kth radio can be denoted as C j k . These values will be negotiated by the virtual operator with the carrier or infrastructure owner offline based on individual contracts or online based on some bidding scheme.

Therefore the corresponding incentive functions and revenue functions can be calculated as the following prev alloc utilization 13 

Further the revenue functions would be calculated as the product of the incentive function and the actual allocation Rev 14 Recircumflex over v circumflex over 15 

In the above optimization solution the is used to represent the minimum airtime reservation at the base station k for the slice j and the is used to represent the minimum airtime reservation at the access point k for the slice j. This optimization is performed based on linear constraints. However it is contemplated that the optimization solution may be performed based on convex constraints with increased airtime utility or concave constraints with decreased airtime utility.

Thereafter a determination is made whether there are any violations to the current allocation virtualization based on the measured airtime usage block . Such violations may include but are not limited or restricted to a particular slice receiving airtime greater than or less than an allocated utilization rate.

If there is a violation such as improper utilization of airtime by the particular slice data flows are throttled based on newly allocated airtime block . Otherwise the data flows are maintained with the same airtime usage breakdown block .

This process is iterative block . For instance the process may be repeated periodically after a prescribed time interval has elapsed. Alternatively the process may be period in response to an event such as a query from the HWV controller. This query may be initiated periodically or randomly by the HWV controller such as in response to an update airtime usage query to the HWV controller from a web service agent. Alternatively the wireless network device may enter into a Sleep mode that in response to an interrupt operating as a provisioning event causes the wireless network device to check airtime usage for the client devices.

Based on the feedback data the HWV controller determines an optimal allocation of airtime based on the feedback data block . The HWV controller receives the airtime usage and has access to payment rates for airtime usage for multiple types of communication e.g. cellular wireless etc. for a variety of different MVNOs. From this information the HWV controller returns optimization information to the wireless network devices where the optimization information is designed to allocate airtime among the slices in efforts to maximize revenue or achieve a maximum throughout rate block .

Next a determination is made as to optimize revenue realized which may involve analysis of revenue parameters for a previous allocation cycle block . Such a determination may involve analysis of parameters associated with each of the wireless client devices associated with slice j as well as other slices. Of course the parameters analyzed may include PHY rates and perhaps other parameters such as MAC retries signal strength measurements and revenue allocations of the wireless client devices. If the computed allocation differs from the current allocation by a prescribed amount e.g. realized revenue is greater than a certain percentage the airtime allocation is altered to increase airtime usage by slice j blocks and . Otherwise the current airtime allocation will be maintained block and . These operations are iterative for each allocation cycle block .

As described above using MNO subnetwork for illustrative purposes wireless network devices and are communicatively coupled HWV controller which is adapted to receive and process control information from wireless network devices and . This control information may include a fraction of airtime t that is used in wireless communications with wireless client devices in slice j using radios implemented within wireless network devices and as described above.

In order to optimize revenue realization across all the controllers in the network we would have to solve a distributed optimization. This may be accomplished by sharing information across multiple HWV controllers . Additional information could be quota allocations previously performed so that HWV controllers could use this global information for enforcing more local constraints.

For example say a slice is willing to pay for only ten hours of aggregate airtime. Upon reaching nine hours of airtime allocation and r is equal to six i.e. six HWV controllers for the slice each HWV controller could take this into consideration and limit slice s airtime to ten minutes each. This could also be made proportional to the number of wireless network devices or the client devices or the traffic and usage patterns observed by the controllers.

HWV controllers could all operate in a distributed peer to peer fashion or use a standard elect a leader approach where one controller acts as the master for the group by sending information to and collecting information from the other controllers. This election could be performed automatically or could be performed manually by a system administrator. Alternative masters could also be assigned to avoid having a single point of failure in the system.

It is to be understood that the above description is intended to be illustrative and not restrictive. Many other embodiments will be apparent to those of skill in the art upon reading and understanding the above description. The scope of the invention should therefore be determined with reference to the appended claims along with the full scope of equivalents to which such claims are entitled.

