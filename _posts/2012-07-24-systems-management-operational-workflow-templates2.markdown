---

title: Systems management operational workflow templates
abstract: Provided are techniques for the specification of templates for the orchestration of workflows such as, but not limited to, computer system server, storage, network, virtualization and cloud infrastructure management operations and tasks. The disclosed techniques support non-scripted native representations of the workflows, the addition of new object types or operation sets or services, atomicity, transactional semantics of workflows and the ability to configure parameters for execution of workflow.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09558474&OS=09558474&RS=09558474
owner: International Business Machines Corporation
number: 09558474
owner_city: Armonk
owner_country: US
publication_date: 20120724
---
The present application is a continuation and claims the benefit of the filing date of an application entitled Systems Management Operational Workflow Templates Ser. No. 13 168 999 filed Jun. 26 2011 assigned to the assignee of the present application and herein incorporated by reference.

The claimed subject matter relates generally to Information Technology IT infrastructure management and more specifically to specification templates for orchestration of workflows such as computer system server storage network virtualization and cloud infrastructure resource management operations and tasks.

Provided are techniques for the specification of templates for the orchestration of workflows such as but not limited to computer system server storage network virtualization and cloud infrastructure management operations and tasks. Today many system and enterprise management software applications support some form of orchestration which simply stated involves an execution of a sequence of simple or complex but typically arbitrary management operations which is termed as workflow. However most forms of orchestration do not support either non scripted native representations of the workflows or the addition of new object types or operation sets or services. Workflows in existing orchestration software are also typically hard coded and support invocation of arbitrary scripts or JAVA operations that are typically opaque to an orchestration engine. As a result existing orchestration cannot support either atomicity or transactional semantics of workflows. In addition existing orchestration software lacks the ability to configure parameters for execution of workflow which influences for example error temporal and automation semantics.

Relational database servers have implemented workflows using relational operations that are orchestrated and automated at runtime. Arbitrary declarative workflow specifications are supported by most relational database servers via structured query language SQL . For example new relational tables may be added at any time without requiring the fundamental model to be re coded. The procedural operational model for SQL is called Relational Algebra which is a set of well defined set of relational database operations that support composition of such operations.

Provided are techniques for defining a set of normalized resources corresponding to a plurality of infrastructure resources defining a set of normalized resource states corresponding to the plurality of infrastructure resources defining a set of normalized operations corresponding to the plurality of infrastructure resources wherein inputs and outputs corresponding to each normalized operation of the set of normalized operations has a defined type of a plurality of types generating a plurality of operational sequences each operation sequence generated by composing a plurality of normalized operations of the set of normalized operations with corresponding normalized resources of the set of normalized resources such that the output of each or the set of normalized operations becomes the input of another of the set of normalized operations wherein a defined type corresponding to each particular input matches a defined type corresponding to the corresponding output generating a workflow plan by composing the plurality of operational sequences in conformity with well defined operational semantics and storing in a computer readable storage medium the workflow plan for execution on a processor.

This summary is not intended as a comprehensive description of the claimed subject matter but rather is intended to provide a brief overview of some of the functionality associated therewith. Other systems methods functionality features and advantages of the claimed subject matter will be or will become apparent to one with skill in the art upon examination of the following figures and detailed description.

As will be appreciated by one skilled in the art aspects of the present invention may be embodied as a system method or computer program product. Accordingly aspects of the present invention may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects that may all generally be referred to herein as a circuit module or system. Furthermore aspects of the present invention may take the form of a computer program product embodied in one or more computer readable medium s having computer readable program code embodied thereon.

Any combination of one or more computer readable medium s may be utilized. The computer readable medium may be a computer readable signal medium or a computer readable storage medium. A computer readable storage medium may be for example but not limited to an electronic magnetic optical electromagnetic infrared or semiconductor system apparatus or device or any suitable combination of the foregoing. More specific examples a non exhaustive list of the computer readable storage medium would include the following an electrical connection having one or more wires a portable computer diskette a hard disk a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or Flash memory an optical fiber a portable compact disc read only memory CD ROM an optical storage device a magnetic storage device or any suitable combination of the foregoing. In the context of this document a computer readable storage medium may be any tangible medium that can contain or store a program for use by or in connection with an instruction execution system apparatus or device.

A computer readable signal medium may include a propagated data signal with computer readable program code embodied therein for example in baseband or as part of a carrier wave. Such a propagated signal may take any of a variety of forms including but not limited to electro magnetic optical or any suitable combination thereof. A computer readable signal medium may be any computer readable medium that is not a computer readable storage medium and that can communicate propagate or transport a program for use by or in connection with an instruction execution system apparatus or device.

Program code embodied on a computer readable medium may be transmitted using any appropriate medium including but not limited to wireless wireline optical fiber cable RF etc. or any suitable combination of the foregoing.

Computer program code for carrying out operations for aspects of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on the user s computer partly on the user s computer as a stand alone software package partly on the user s computer and partly on a remote computer or entirely on the remote computer or server. In the latter scenario the remote computer may be connected to the user s computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

Aspects of the present invention are described below with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and or block diagrams and combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer other programmable data processing apparatus or other devices to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture including instructions which implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer other programmable data processing apparatus or other devices to cause a series of operational steps to be performed on the computer other programmable apparatus or other devices to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

Turning now to the figures is a block diagram of an example of a resource and infrastructure management architecture that may implement the claimed subject matter. A management server includes a central processing unit. CPU or processor coupled to a monitor a keyboard and a pointing device or mouse which together facilitate human interaction with computing system and management server . Also included in management server and attached to management server is a computer readable storage medium CRSM which may either be incorporated into computing system i.e. an internal device or attached externally to management server by means of various commonly available connection devices such as but not limited to a universal serial bus USB port not shown . CRSM is illustrated storing an operating system and a Resource and infrastructure Orchestration system RIOS that may implement the claimed subject matter.

It should be noted that a management server would typically include more elements than the illustrated components but for the sake of simplicity only the illustrated components are shown. RIOS is described in more detail below in conjunction with .

Management server is connected to a management network which may be among other options a local area network LAN or the Internet. A data server coupled to a CRSM and a CRSM is also communicatively coupled to a physical managed network . Management network provides connectivity between management server and logical and virtual resource and physical resources . Examples of devices that may be included in logical and virtual resources include but are not limited to a hypervisor HYVSR a virtual memory VM a storage volume SV a virtual disk VD a virtual LAN VLAN a virtual communication Ethernet or PC port or port a virtual managed network a virtual switch not shown or a virtual Ethernet bridge not shown . Examples of devices that may be included in physical resources include but are not limited to an application server managed network data server with attached CRSMs and a CRSM and a network adaptor NA . Physical systems and resources may be connected to each other via physical managed network such as but not limited to a LAN SAN or converged FCoE LAN.

Although in this example management server logical and virtual resources and physical resources are communicatively coupled via management network they could also be coupled through any number of communication mediums such as but not limited to a wide area network WAN not shown and direct wire not shown . Further it should be noted there are many possible resource and infrastructure management system configurations of which resource and infrastructure management architecture is only one simple example.

Resources and represent a pool of virtual or logical resource elements of physical devices or simply a pool. In the following examples the devices of pool are used as examples of computing resources or objects that may be orchestrated by means of the claimed technology. Collections of similar objects such as CRSM and are referred to as groups. Relationships among different objects including groups such as the relationships among server and CRSM and are referred to as infrastructures or fabrics. A dotted line indicates that logical and virtual resources represent various configurations of physical resources .

In addition in the following example the disclosed techniques are implemented by RIOS executing on management server . It should be understood that many types of resources both hardware and software and systems may benefit form the claimed subject matter but for the sake simplicity the examples are limited to the types and numbers of components described above.

As the inventors herein have realized a Resource and Infrastructure Management operational workflow can be written as a composition of resource management operations with well defined operational semantics and flexible enough to support any hardware and or software infrastructure resource including for example servers storage networks virtualization elements and combinations thereof including a cloud elements.

Throughout the Specification a resource may be an individual atomic or composite objects physical logical or virtual computing objects networking storage or virtualization objects. Typically a resource may exist independently and or may be provisioned independently. Examples of physical resources include server systems storage systems network switches disk drives adapters and so on. Examples of logical and virtual resources include virtual machines storage volumes files virtual disks and so on. An atomic resource is one that cannot be divided. In a hierarchical definition a resource may be a composite unit comprising other sub resources. One examples of a composite resource type is a BladeCenter chassis. A group may be any collection of homogeneous or heterogeneous resources. Examples of groups include server pool multi pathing group HA redundant pair of network adapters virtual machine collection and so on. A fabric Is an aggregate of typically logical connections between resources or groups of resources. Examples of fabrics include VLANs FC SAN zones and so on.

In order to compose resource management operations the resource and infrastructure operational model supports the following 

RIOS also includes an orchestration engine that stores executable logic for the implementation of aspects of the claimed subject matter including the definition of workflows. A Resource Operation Execution Logic ROEL stores executable logic that implements a defined workflow. A runtime stores executable logic for the implementation of aspects of RIDS not handled by orchestration engine and ROLL .

A management database is a computer readable storage medium that stores workflow templates infrastructure objects and modeled infrastructure objects . Workflow templates Infrastructure object and infrastructure objects may store parameters such as but not limited to definitions of runtime semantics and definitions of normalized resources resource states and operations. Such definitions may be composed into libraries that are extendable by the addition of additional definitions of runtime semantics and definitions of normalized resources resource states and operations. Infrastructure objects represents potential resources that may be discovered by discovery execution logic at remote locations such as over the Internet. Functionality associated with components and are explained in more detail below in conjunction with .

The three states include a Static Object Universe SOU  a Static Infrastructure Universe SIU  and a Dynamic infrastructure Universe DIU  . Static Object Universe SOU  is the universe of undeployed manageable resource and system objects known to a particular embodiment of the claimed subject matter SOU  illustrates objects in an undeployed state i.e. with no defined relationships. Objects in this universe are static and in a restful state. Static Infrastructure Universe SIU  is the universe of all Deployed connected resources and composite resources known to a particular embodiment of the claimed subject matter. In this universe the relationships and connections between resources are explicit. In this example SIU  illustrates objects in a deployed state and some relationships among objects . In general objects and the corresponding relationships define an infrastructure such as SIU  . However infrastructure resources in this universe are still static and not performing any useful function Dynamic Infrastructure Universe DIU  is the universe of Activated infrastructure resources that are deployed to perform some useful function in an interconnected way and known to a running computer program embodiment of this invention DIU  illustrates objects in an activated state with some relationships . Because DIU  defines both objects and relationships DIU  represents a dynamic infrastructure.

A core set of infrastructure resources may be broadly classified into physical resources see e.g. systems or platforms disk drives etc. logical resources see e.g. virtual machines storage volumes virtual disks ports etc. groups e.g. disk drive arrays server system pools multi pathing group etc. and fabrics e.g. VLANs FC SAN etc . The rest of the types are composite objects on these basic resource types and in turn represent higher order resources groups and or fabrics. In this example infrastructure resource states are reduced to the 3 key states Undeployed Deployed and Activated. Undeployed implies not usable or exploitable. Deployed implies usable or exploitable. Activated implies being used or exploited at any point in time. For example a server in a reserve pool is undeployed a storage volume attached to a server is deployed and a virtual memory VM that has been started up is in activated state. In some cases the move from deployed to activated may be a no operation or nop but this normalized view across all resources facilitates the definition of an operational workflow. In addition resources may have other states and status in which an administrator is interested they maybe handled as before and are not critical to the operational workflow model.

Infrastructure management operations are strongly typed in that they have well defined Inputs Outputs and Operation Semantics inputs are well defined resource or group or fabric types. Some examples include 

Operations are strongly typed as follows. One embodiment of the signatures for the operations in this calculus are described below using a procedural programming language flavor such as C C or JAVA Unary operations of the calculus have the following signature 

The exact implementation of the application programming interface above depends on the implementation. In general regardless of whether an object is carried around as a reference type and returned as a reference type is up to the implementation. Implementations may vary depending on the language used for implementation. Other embodiments are possible within procedural languages functional languages such as Scheme or logical calculus languages which are beyond the scope of this invention . With the resource state typing and infrastructure management operations being normalized the calculus comprises an enumerated normalized set of operations otherwise termed as a library of operations . In general a core subset of the enumerated set is expected to apply to all resources groups and fabrics. For example Create Delete Deploy Undeploy Activate and De activate are expected to be applicable to all logical resources regardless of whether they are server storage or network resources. It is possible for a subset of the calculus to be applicable to only a subset of the resources for example Backup and Archive may apply only to storage resource objects. The calculus of operations is not a statis and fixed set additional operations discovered subsequently can be added to the set as long as it follows the constraints posed by this model.

Create creates a static database object and possibly a memory object that represents a manageable and provisionabie resource using the attributes defined ports objects and constraints presented in a best practices template for the resource object. Create is generally used for static creation of a logical resource object. For example a cluster is a composite resource object that may be statically created See Reform which is a dynamic re formation of a cluster and applies only to clusters. There may be other add create discover delete or remove operations where end point instances or group instances are added or created within the database or runtime. These operations do not have any defined input end point or group. Any end point group specification is performed as part of the constraints for the operation see below . The output of these operations is an end point or a group.

Delete deletes an in memory and or database object. Delete takes an end point or group as input and return NULL as output. With respect to Get filter criteria may be specified in a SemanticsObject and if the filter when applied turns out to be TRUE then for resources platforms fabrics or groups the corresponding objects are returned. Set performs configuration state changing etc operations on the object. Copy typically applies to logical resources and causes a clone with a new object ID to be created. In this example object has been copied to create a new object .

Update is a typically a nop for all but for physical Platform objects also typically termed as systems or devices . If an object represents an undatable software or hardware platform that requires a systems software or firmware update then Update is applicable. Transform is typically used to transform the type of an object in this example object has been transformed to a new object .

A Deploy typically refers to the deployment of an atomic or composite resource object. An Undeploy typically refers to the removal of a resource object from the infrastructure. An Activate typically refers to activating a resource object to become useful in the environment if applicable otherwise Activate serves as a nop. A De activate refers to de activating a resource object if applicable otherwise De activate serves as a nop.

Add Member adds an object or a sub component to a group or composite object. Fro a composite object the semantics may provide additional constraints on where to add the member. Drop Member drops or removes a member from a group or composite object. Get Member applies filter criteria in the SemanticsObject and if the filter when applied turns out to be TRUE then if a singular object satisfies the filter the member object is returned else NULL or NULL GROUP is returned. NULL GROUP implies more than one object was returned. Set Member involves if applicable modifying the state of a particular member that matches a filter e.g. an identifier in the group or composite object. A Transfer moves an object from one universe to another. In this example Transfer is illustrated moving both a dynamic object and a deployed object between Universe  and Universe  .

In addition there may be a GetSubGroup not shown that applies to sub groupings or sub composite objects within composite objects respectively. Those member objects that result in a filter being TRUE are returned as a group of the same type as the original group If the original object was a heterogeneous group and the filter retained only homogeneous objects the returned group is still a heterogeneous group of the same type as the original group. There may also be a SetSubGroup not shown used to set the states of all members in the group that satisfy a filter criteria. A FormGroup not shown is used when a grouping or composite object supports a dynamic ability to form the group example clusters supports dynamic reformation of the group . A BreakGroup not shown is used to decompose the group object e.g. to break a cluster apart.

In a similar fashion outputs corresponding to Operation 4.0 and an Optional Operation 4.1 provide inputs to an Operation 3.0 outputs corresponding to Operation 3.0 and an Optional Operation 3.1 provide inputs to an Operation 2.0 and outputs corresponding to Operation 3.0 and an Optional Operation 3.1 provide inputs to an Operation 2.0 . Finally outputs corresponding to Operation 2.0 and an Optional Operation 2.1 provide inputs to a Root Operation 1.0 . A sequence of named workflow operations such as workflow and additional operational workflows not shown may be applied with the inputs and outputs of the operations as defined above in what is referred to an ordered composition.

Examples of operations that may support validation with respect to error semantics include ValidateSemantics and ValidateWorkflow . Operations that support blocking semantics Include 

Workflow template includes a format section a parameter section an import section a constant section a variable section and a workflow section . Workflow template provides a number of options to support a full software development cycle as well as customer development test and deployment cycle. Arbitrary types of constants are not allowed and constants are based upon filters and descriptors with implementer designated formats which are string based. Actual operational workflows are based upon previously defined resource types and operations. In addition each workflow represented by a workflow template such as workflow template goes through a PREPARE and EXECUTE cycle. The PREPARE cycle see is used for preparing a workflow runtime plan. The EXECUTE cycle see may be performed iteratively with different control options such as handing control to an end user or as a single shot transaction. Each of sections and illustrates examples of an appropriate syntax for entries in the corresponding sections and .

In this example format section includes attributes that define transactional semantics isolation semantics error return semantics execution semantics scheduling semantics and type semantics . Examples of transactional semantics which define the desired requirements for the corresponding workflow include but are not limited to the following 

WORKFLOW PREPARE ONLY which is typically employed during development and testing ensures that the corresponding workflow is prepared but not executed. TRANSACTION PREPARE ONLY ensures that the corresponding workflow is executed without commits with transactional prepare semantics see . This scenario is equivalent to running a whole workflow as a fully ordered tree of operations with hierarchical recursive execution from the top covering the PREPARE phase only. Please note that the implementation need not follow recursion and could use tree data structure assisted depth first iterative execution. FULL ITERATVE FLOW implies that workflow execution returns to an end user for the end user to inspect the execution thus far and to resume the workflow transaction. FULL ONE SHOT implies that the workflow is to be executed as a one shot transaction.

Scheduling semantics takes the form Scheduling and may be employed to suggest a time to wait before a corresponding workflow starts to be executed as a schedulable job a time to wait between any two partial orders before declaring a problem and so on.

The following is an example of the constant section variable section and workflow section respectively of a particular workflow for virtual machine data disk provisioning i.e. a VMDataDiskProvision template instantiation of workflow template 

The following is an example of the parameter section constant section variable section and workflow section respectively of a particular workflow for image deployment i.e. an ImageDeploy template instantiation of workflow template 

The following is an example of the parameter section import section variable section and workflow section respectively of a particular workflow for provisioning a workload i.e. an ProvisionWorkload template instantiation of workflow template 

Process starts in a Begin Build Workflow block and proceeds immediately to a Get Next Template block an operational template i.e. the current template is retrieved from CRSM . During the first iteration through process a template corresponding to a root node see is retrieved i.e. the current template. During processing associated with a Parse Import block an import section see associated with the template retrieved during processing associated with block is processed so that during processing associated with a Build Context block a workflow context object may be built. During processing associated with a Parse Parameter Par. Constant Con. and Variable Var. Sections block the corresponding sections see and of the current template are used to populate the context created during processing with block

During a Build Operation Op. Node List block any operations specified in a workflow section see is processed to generate a corresponding operation node or leaf. These leaves are organized into as an operation tree. During processing associated with a More Templates a determination is made as to whether or not more workflow templates see and need to be processed if so control returns to Get Next Template block the next referenced template is retrieved from CRSM and processing continues as described above. Briefly the iterations through blocks and may be characterized as walking through the root template to process all the templates referenced in the root template and subsequent templates.

One a determination has been made during processing associated with block that all templates have been processed control proceeds to a Create Workflow Tree block during which the work flows and corresponding operation trees are organized into an ordered workflow tree which is then stored in CRSM for execution. Finally control proceeds to an End Build Workflow block during which process is complete.

During processing associated with a Get Next Leaf block a first leaf from workflow is retrieved. In this example the leaf retrieved first is target end 5.0 and retrieving a leaf involves retrieving a corresponding template for the leaf see . During processing associated with a Retrieve Leaf Inputs block input parameters see for the leaf retrieved during processing associate with block are marshaled. During a Retrieve Next Operation Op. block a first operation corresponding to the leaf see . is retrieved. During processing associated with a Retrieve Op. Inputs block the input parameters for the operation retrieved during block are marshaled and during processing associated with an Execute Op. block the operations is executed. It should be noted that the input parameters retrieved during block may be defined parameters or the results of previously executed operations in the workflow tree. During processing associated with a Save Results block the results of the operation executed during block are saved to management DB so that they are available either as an end result or as input parameters to subsequent operations.

During processing associated with a More Ops. block a determination is made as to whether there are more operations corresponding to the leaf that should be executed. If so control returns to block the template for the next operation is retrieved and processing continues as described above. If not control proceeds to a More Leaves block . During processing associated with block a determination is made as to whether there are more leaves corresponding to workflow tree retrieved during processing associated with block . If so control returns to block the template for the next leaf is retrieved and processing continues as described above.

If during processing associated with block a determination is made that there are no more leafs in the workflow tree control proceeds to a Marshall Results block during which the results of all operations of all processed leaves are collected and save to CRSM . Finally control proceeds to an End Execute Workflow block during which process is complete.

The terminology used herein is for the purpose of describing particular embodiments only and is not intended to be limiting of the invention. As used herein the singular forms a an and the are intended to include the plural forms as well unless the context clearly indicates otherwise. It will be further understood that the terms comprises and or comprising when used in this specification specify the presence of stated features integers steps operations elements and or components but do not preclude the presence or addition of one or more other features integers steps operations elements components and or groups thereof.

The corresponding structures materials acts and equivalents of all means or step plus function elements in the claims below are intended to include any structure material or act for performing the function in combination with other claimed elements as specifically claimed. The description of the present invention has been presented for purposes of illustration and description but is not intended to be exhaustive or limited to the invention in the form disclosed. Many modifications and variations will be apparent to those of ordinary skill in the art without departing from the scope and spirit of the invention. The embodiment was chosen and described in order to best explain the principles of the invention and the practical application and to enable others of ordinary skill in the art to understand the invention for various embodiments with various modifications as are suited to the particular use contemplated.

The flowchart and block diagrams in the Figures illustrate the architecture functionality and operation of possible implementations of systems methods and computer program products according to various embodiments of the present invention. In this regard each block in the flowchart or block diagrams may represent a module segment or portion of code which comprises one or more executable instructions for implementing the specified logical function s . It should also be noted that in some alternative implementations the functions noted in the block may occur out of the order noted in the figures. For example two blocks shown in succession may in fact be executed substantially concurrently or the blocks may sometimes be executed in the reverse order depending upon the functionality involved. It will also be noted that each block of the block diagrams and or flowchart illustration and combinations of blocks in the block diagrams and or flowchart illustration can be implemented by special purpose hardware based systems that perform the specified functions or acts or combinations of special purpose hardware and computer instructions.

