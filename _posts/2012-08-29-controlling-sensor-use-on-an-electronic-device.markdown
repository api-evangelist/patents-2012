---

title: Controlling sensor use on an electronic device
abstract: Described are methods and systems for controlling sensor use on an electronic device, the electronic device having a first sensor defining at least one first sensor axis, the method comprising: detecting a first sensor reading; determining an orientation of the electronic device; and, disabling the detection of the first sensor reading in respect an identified first sensor axis when the first sensor reading in respect of the identified first sensor axis is substantially not expected to change for at least a predetermined amount of time.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09360497&OS=09360497&RS=09360497
owner: BlackBerry Limited
number: 09360497
owner_city: Waterloo
owner_country: CA
publication_date: 20120829
---
The present disclosure relates generally to electronic device orientation and more particularly to controlling sensor use on an electronic device.

An electronic device can include or be associated with one or more sensors such as one or more gyroscopes magnetometers and or accelerometers. The sensors can be used to estimate or calculate the orientation of the electronic device.

A magnetometer is a device that can be used to measure the strength of magnetic fields. An accelerometer is a device that can be used to measure acceleration. A gyroscope is a device that can be used to measure rotation rate. Gyroscopes are sometimes included in electronic devices such as handheld electronic devices in order to provide information about the orientation of such electronic devices. Such orientation information allows the electronic device to know information about its own physical position. For example the gyroscope may allow for recognition of movement within a three dimensional space. One or both of the magnetometer and accelerometer can be included in electronic devices in order to provide information about the orientation of such electronic devices. The orientation information provided by the magnetometer and accelerometer can be relative to the Earth s axes.

The electronic device may use such orientation information as an input signal. That is the electronic device may be operated in a mode in which gyroscope measurements accelerometer measurements and or magnetometer measurements affect the operation of the electronic device.

In one aspect the present disclosure describes a method of controlling sensor use on an electronic device the electronic device having a first sensor defining at least one first sensor axis the first sensor for detecting first sensor readings in respect of the at least one first sensor axis the method comprising detecting a first sensor reading calculating an orientation of the electronic device determining that for an amount of time at least as long as a predetermined amount of time the calculation of the orientation of the electronic device does not use first sensor reading in respect of an identified first sensor axis and disabling the detection of the first sensor reading in respect of the identified first sensor axis.

In another aspect the present disclosure describes an electronic device comprising a memory a first sensor for detecting first sensor readings in respect of at least one first sensor axis and a processor coupled to memory and the first sensor the processor being configured to control sensor use on the electronic device by detecting a first sensor reading calculating an orientation of the electronic device determining that for an amount of time at least as long as a predetermined amount of time the calculation of the orientation of the electronic device does not use first sensor reading in respect of an identified first sensor axis and disabling the detection of the first sensor reading in respect of the identified first sensor axis.

In another aspect the present disclosure describes a computer readable storage medium comprising computer executable instructions for controlling sensor use on an electronic device by detecting a first sensor reading calculating an orientation of the electronic device determining that for an amount of time at least as long as a predetermined amount of time the calculation of the orientation of the electronic device does not use first sensor reading in respect of an identified first sensor axis and disabling the detection of the first sensor reading in respect of the identified first sensor axis.

Electronic devices may sometimes benefit from knowledge about their own orientation. For example electronic devices are sometimes configured to operate based on the orientation of the electronic device. That is the orientation of the electronic device may act as an input to an application system or process whose actions depend on the orientation of the electronic device. For example a display screen on a display of the electronic device may depend on the orientation of the electronic device. By way of example the display screen may toggle between landscape and portrait orientations based on the orientation of the electronic device.

Referring first to an example electronic device is illustrated. In the embodiment illustrated the electronic device is a handheld mobile communication device. However the electronic device may take a variety of forms. By way of example the electronic device may be a global positioning system GPS unit an inertial navigation system INS a mobile communication device such as a mobile phone or smartphone a tablet computer a laptop computer a wearable computer such as a watch a camera or an electronic device of another type.

In some embodiments the electronic device includes a display such as a liquid crystal display LCD and an input interface such as a keyboard or keypad or a navigation tool such as a clickable scroll wheel also referred to as a track wheel or thumbwheel or trackball. Other examples of an input interface can include a touchpad or an optical input device. In some embodiments the display may be a touchscreen display which permits a user to provide input to the electronic device by touching the display . That is the display may act as an input interface to the electronic device providing the electronic device with an electronic signal generated in response to user contact with the touchscreen display.

The electronic device includes one or more sensors which may be used by the electronic device to determine the orientation of the electronic device . In the example embodiment illustrated the electronic device includes a gyroscope an accelerometer and a magnetometer .

The gyroscope measures rotational velocity of the gyroscope . In the embodiment illustrated since the gyroscope is integrated within the electronic device the gyroscope effectively measures rotational velocity of the electronic device . In the illustrated embodiment the gyroscope is illustrated using a circle which is shown using a broken line to reflect the fact that the gyroscope may be internally mounted within the electronic device . While the circular gyroscope is useful for the purposes of illustration the gyroscope will typically take other forms. For example the gyroscope may have a standard electronic chip form factor.

The gyroscope defines one or more sensing axis. In the embodiment illustrated the gyroscope includes three orthogonal sensing axes denoted Gx to represent the gyroscope s x sensing axis Gy to represent the gyroscope s y sensing axis and Gz to represent the gyroscope s z sensing axis . Each sensing axis is orthogonal to the other sensing axes. For example the x sensing axis Gx is orthogonal to the y and z sensing axes Gy and Gz respectively the y sensing axis Gy is orthogonal to the x and z sensing axes Gx and Gz respectively and the z sensing axis Gz is orthogonal to the x and y sensing axes Gx and Gy respectively .

The gyroscope may produce a gyroscope reading for each of the sensing axes Gx Gy Gz. For example a gyroscope reading wmay be produced by the gyroscope based on gyroscope measurements associated with the x sensing axis such as a rotation about the x sensing axis a gyroscope reading wmay be produced by the gyroscope based on gyroscope measurements associated with the y sensing axis such as a rotation about the y sensing axis and a gyroscope reading wmay be produced by the gyroscope based on gyroscope measurements associated with the z sensing axis such as a rotation about the z sensing axis . These gyroscope readings collectively form the gyroscope output. That is the gyroscope output is an electronic signal which is representative of the gyroscope readings w w wfor the sensing axes Gx Gy Gz of the gyroscope . The electronic signal may for example provide the gyroscope readings w w wfor the sensing axes Gx Gy Gz of the gyroscope as measures of an amount of rotation per unit time about each sensing axis. For example the gyroscope may produce an output in terms of radians per second or degrees per second. The gyroscope output may in some embodiments be an analog output. In other embodiments the gyroscope output may be digital. A gyroscope reading captured at a point in time may be referred to as a gyroscope sample. Such samples may be obtained for example at regular intervals. It is understood that a gyroscope reading can be obtained with respect to one axis e.g. the Gx axis independent of obtaining the gyroscope readings with respect to another axis e.g. the Gy axis or with respect to the remaining axes e.g. the Gy axis and the Gz axis . Further the intervals at which the readings for one axis e.g. the Gx axis are obtained can be independent of timing at which the readings for another axis e.g. the Gy axis or the remaining axes e.g. the Gy axis and the Gz axis are obtained.

The gyroscope output may separate the gyroscope readings for each sensing axis at a signal level or at an output interface level or both. For example in some embodiments the gyroscope may have a separate output interface such as a separate pad or pin associated with each sensing axis. Each output interface associated with a sensing axis may provide an output signal representing gyroscope readings for its associated sensing axis thus separating the gyroscope readings for the sensing axes at an output interface level . In other example embodiments a common output interface such as a common pad or pin may be associated with a plurality of sensing axes. That is gyroscope readings for a plurality of sensing axes may be provided on a common output interface such as a common pad or pin .

In some embodiments the gyroscope may be a digital gyroscope provided in an integrated circuit IC having a memory such as Electrically Erasable Programmable Read Only Memory EEPROM or flash memory analog to digital A D converter and a controller such as a suitably programmed microprocessor or Field Programmable Gate Array FPGA . The IC may provide an industry standard interface such as an SPI Serial Peripheral Interface or I2C Inter Integrated Circuit interface for connecting to a printed circuit board PCB of the electronic device .

The sensing axes Gx Gy Gz of the gyroscope may be aligned with the form factor of the electronic device . For example in the embodiment illustrated the axes are aligned such that when the electronic device is oriented on a flat surface such as a table the x and y sensing axes are parallel to the table and the z sensing axis is perpendicular to the table. It is contemplated that the sensing axes x y z may be aligned with different features of the electronic device in other embodiments.

The electronic device may also include an accelerometer . An accelerometer is a device that generates an output signal in dependence on the acceleration of the accelerometer . That is the accelerometer produces an output which reflects the acceleration of the accelerometer. More particularly the accelerometer may generate an output which specifies the magnitude and or direction of acceleration. In the embodiment illustrated since the accelerometer is integrated within the electronic device the accelerometer effectively measures the acceleration of the electronic device .

In the illustrated embodiment the accelerometer is illustrated using a circle which is shown using a broken line to reflect the fact that the accelerometer may be internally mounted within the electronic device . While the circular accelerometer is useful for the purposes of illustration the accelerometer will typically take other forms. For example the accelerometer may have a standard electronic chip form factor.

In some embodiments the accelerometer may be a digital accelerometer provided in an integrated circuit IC having a memory such as Electrically Erasable Programmable Read Only Memory EEPROM or flash memory analog to digital A D converter and a controller such as a suitably programmed microprocessor or Field Programmable Gate Array FPGA . The IC may provide an industry standard interface such as an SPI Serial Peripheral Interface or I2C Inter Integrated Circuit interface for connecting to a printed circuit board PCB of the electronic device .

The accelerometer defines one or more sensing axis. In the embodiment illustrated the accelerometer includes three orthogonal sensing axes denoted Ax to represent the accelerometer s x sensing axis Ay to represent the accelerometer s y sensing axis and Az to represent the accelerometer s z sensing axis . Each sensing axis is orthogonal to the other sensing axes. For example the x sensing axis Ax is orthogonal to the y and z sensing axes Ay and Az respectively the y sensing axis Ay is orthogonal to the x and z sensing axes Ax and Az respectively and the z sensing axis Az is orthogonal to the x and y sensing axes Ax and Ay respectively .

The accelerometer may produce an accelerometer reading for each of the sensing axes Ax Ay Az. For example an accelerometer reading amay be produced by the accelerometer based on accelerometer measurements associated with the x sensing axis such as an acceleration along the x sensing axis an accelerometer reading amay be produced by the accelerometer based on accelerometer measurements associated with the y sensing axis such as an acceleration along the y sensing axis and an accelerometer reading amay be produced by the accelerometer based on accelerometer measurements associated with the z sensing axis such as an acceleration along the z sensing axis . These accelerometer readings collectively form the accelerometer output. That is the accelerometer output is an electronic signal which is representative of the accelerometer readings a a afor the sensing axes Ax Ay Az of the accelerometer . The accelerometer readings with respect to each of the three axes Ax Ay Az of the accelerometer can be taken at intervals which may be predetermined. The intervals for when accelerometer readings can be taken with respect to each of the three axes Ax Ay Az can each be independent of the others.

As shown in the sensing axes Ax Ay Az of the accelerometer may be aligned with the form factor of the electronic device . In the embodiment illustrated the x and y sensing axes Ax and Ay are generally parallel to the front face of the electronic device and the z sensing axis Az is generally perpendicular to the front face of the electronic device. One or more of the sensing axes Ax Ay Az of the accelerometer may be aligned with one or more of the sensing axes Gx Gy Gz of the gyroscope .

The electronic device may also include a magnetometer . The magnetometer which may also be referred to as a digital compass is a measuring instrument that is used to measure the strength and or direction of magnetic fields. That is the magnetometer generates an electronic signal which reflects the direction and or strength of a magnetic field in the vicinity of the magnetometer . Since the magnetometer is mounted within the electronic device the magnetometer effectively reflects the direction and or strength of a magnetic field acting on the electronic device .

In the illustrated embodiment the magnetometer is illustrated using a circle which is shown using a broken line to reflect the fact that the magnetometer may be internally mounted within the electronic device . While the circular magnetometer is useful for the purposes of illustration the magnetometer will typically take other forms. For example the magnetometer may have a standard electronic chip form factor.

In some embodiments the magnetometer may be a digital magnetometer provided in an integrated circuit IC having a memory such as Electrically Erasable Programmable Read Only Memory EEPROM or flash memory analog to digital A D converter and a controller such as a suitably programmed microprocessor or Field Programmable Gate Array FPGA . The IC may provide an industry standard interface such as an SPI Serial Peripheral Interface or I2C Inter Integrated Circuit interface for connecting to a printed circuit board PCB of the electronic device .

The magnetometer is in at least some embodiments a three axis magnetometer that defines three sensing axes Mx My Mz. In the embodiment illustrated the magnetometer includes three orthogonal sensing axes denoted Mx to represent the magnetometer s x sensing axis My to represent the magnetometer s y sensing axis and Mz to represent the magnetometer s z sensing axis . Each sensing axis is orthogonal to the other sensing axes. For example the x sensing axis Mx is orthogonal to the y and z sensing axes My and Mz respectively the y sensing axis My is orthogonal to the x and z sensing axes Mx and Mz respectively and the z sensing axis Mz is orthogonal to the x and y sensing axes Mx and My respectively .

The magnetometer may produce a magnetometer reading for each of the sensing axes Mx My Mz. For example a magnetometer reading mmay be produced by the magnetometer based on magnetometer measurements associated with the x sensing axis such as a magnetic field along the x sensing axis a magnetometer reading mmay be produced by the magnetometer based on magnetometer measurements associated with the y sensing axis such as a magnetic field along the y sensing axis and a magnetometer reading mmay be produced by the magnetometer based on magnetometer measurements associated with the z sensing axis such as a magnetic field along the z sensing axis . These magnetometer readings collectively form the magnetometer output. That is the magnetometer output is an electronic signal which is representative of the magnetometer readings m m mfor the sensing axes Mx My Mz of the magnetometer . The magnetometer readings with respect to each of the three axes Mx My Mz of the magnetometer can be taken at intervals which may be predetermined. The intervals for when magnetometer readings can be taken with respect to each of the three axes Mx My Mz can each be independent of the others.

As shown in the sensing axes Mx My Mz of the magnetometer may be aligned with the form factor of the electronic device . In the embodiment illustrated the x and y sensing axes Mx and My are generally parallel to the front face of the electronic device and the z sensing axis Mz is generally perpendicular to the front face of the electronic device . One or more of the sensing axes Mx My Mz of the magnetometer may be aligned with one or more of the sensing axes Gx Gy Gz of the gyroscope and or one or more sensing axes Ax Ay Az of the accelerometer .

While illustrates three separate sensors e.g. a gyroscope an accelerometer and a magnetometer in some embodiments two or more of these sensors may be provided in a common packaging such as a common electronic chip. For example in some embodiments a single electronic chip may include both an accelerometer and a magnetometer .

Referring now to a block diagram of an example electronic device is illustrated. The electronic device of may include a housing which houses components of the electronic device . Internal components of the electronic device may be constructed on a printed circuit board PCB . The electronic device includes a controller including at least one processor such as a microprocessor which controls the overall operation of the electronic device . The processor interacts with device subsystems such as a wireless communication subsystem for exchanging radio frequency signals with a wireless network to perform communication functions. The processor interacts with additional device subsystems including one or more input interfaces such as a keyboard one or more control buttons one or more microphones one or more cameras a gyroscope an accelerometer a magnetometer and or a touch sensitive overlay associated with a touchscreen display flash memory random access memory RAM read only memory ROM auxiliary input output I O subsystems a data port which may be a serial data port such as a Universal Serial Bus USB data port one or more output interfaces such as a display which may be a liquid crystal display LCD one or more speakers or other output interfaces a short range communication module and other device subsystems generally designated as . Some of the subsystems shown in perform communication related functions whereas other subsystems may provide resident or on device functions.

The electronic device may include a touchscreen display in some example embodiments. The touchscreen display may be constructed using a touch sensitive input surface connected to an electronic controller. The touch sensitive input surface overlays the display and may be referred to as a touch sensitive overlay. The touch sensitive overlay and the electronic controller provide a touch sensitive input interface and the processor interacts with the touch sensitive overlay via the electronic controller. That is the touchscreen display acts as both an input interface and an output interface .

The communication subsystem includes a receiver a transmitter and associated components such as one or more antenna elements and local oscillators LOs and a processing module such as a digital signal processor DSP . The antenna elements and may be embedded or internal to the electronic device and a single antenna may be shared by both receiver and transmitter as is known in the art. The particular design of the wireless communication subsystem depends on the wireless network in which the electronic device is intended to operate.

The electronic device may communicate with any one of a plurality of fixed transceiver base stations of the wireless network within its geographic coverage area. The electronic device may send and receive communication signals over the wireless network after the required network registration or activation procedures have been completed. Signals received by the antenna through the wireless network are input to the receiver which may perform such common receiver functions as signal amplification frequency down conversion filtering channel selection etc. as well as analog to digital A D conversion. A D conversion of a received signal allows more complex communication functions such as demodulation and decoding to be performed in the DSP . In a similar manner signals to be transmitted are processed including modulation and encoding for example by the DSP . These DSP processed signals are input to the transmitter for digital to analog D A conversion frequency up conversion filtering amplification and transmission to the wireless network via the antenna . The DSP not only processes communication signals but may also provide for receiver and transmitter control. For example the gains applied to communication signals in the receiver and the transmitter may be adaptively controlled through automatic gain control algorithms implemented in the DSP .

In some example embodiments the auxiliary input output I O subsystems may include an external communication link or interface for example an Ethernet connection. The electronic device may include other wireless communication interfaces for communicating with other types of wireless networks for example a wireless network such as an orthogonal frequency division multiplexed OFDM network.

In some example embodiments the electronic device also includes a removable memory module typically including flash memory and a memory module interface . Network access may be associated with a subscriber or user of the electronic device via the memory module which may be a Subscriber Identity Module SIM card for use in a GSM network or other type of memory module for use in the relevant wireless network type. The memory module may be inserted in or connected to the memory module interface of the electronic device .

The electronic device may store data in an erasable persistent memory which in one example embodiment is the flash memory . In various example embodiments the data may include service data having information required by the electronic device to establish and maintain communication with the wireless network . The data may also include user application data such as email messages address book and contact information calendar and schedule information notepad documents images and other commonly stored user information stored on the electronic device by its user and other data.

The data stored in the persistent memory e.g. flash memory of the electronic device may be organized at least partially into a number of databases or data stores each containing data items of the same data type or associated with the same application. For example email messages contact records and task items may be stored in individual databases within the electronic device memory.

The data port may be used for synchronization with a user s host computer system. The data port enables a user to set preferences through an external device or software application and extends the capabilities of the electronic device by providing for information or software downloads to the electronic device other than through the wireless network . The alternate download path may for example be used to load an encryption key onto the electronic device through a direct reliable and trusted connection to thereby provide secure device communication.

In some example embodiments the electronic device is provided with a service routing application programming interface API which provides an application with the ability to route traffic through a serial data i.e. USB or Bluetooth Bluetooth is a registered trademark of Bluetooth SIG Inc. connection to the host computer system using standard connectivity protocols. When a user connects their electronic device to the host computer system via a USB cable or Bluetooth connection traffic that was destined for the wireless network is automatically routed to the electronic device using the USB cable or Bluetooth connection. Similarly any traffic destined for the wireless network is automatically sent over the USB cable Bluetooth connection to the host computer for processing.

The electronic device also includes a battery as a power source which is typically one or more rechargeable batteries that may be charged for example through charging circuitry coupled to a battery interface such as the serial data port . The battery provides electrical power to at least some of the electrical circuitry in the electronic device and the battery interface provides a mechanical and electrical connection for the battery . The battery interface is coupled to a regulator not shown which provides power V to the circuitry of the electronic device .

The short range communication module provides for communication between the electronic device and different systems or devices which need not necessarily be similar devices. For example the short range communication module may include an infrared device and associated circuits and components or a wireless bus protocol compliant communication mechanism such as a Bluetooth communication module to provide for communication with similarly enabled systems and devices.

The electronic device includes a gyroscope which is configured to sense rotation of the electronic device . The gyroscope may in at least some embodiments be a three axis gyroscope of the type described above with reference to . The electronic device also includes an accelerometer and or a magnetometer which may be of the types described above with reference to .

A predetermined set of applications that control basic device operations including data and possibly voice communication applications may be installed on the electronic device during or after manufacture. Additional applications and or upgrades to an operating system or software applications may also be loaded onto the electronic device through the wireless network the auxiliary I O subsystem the data port the short range communication module or other suitable device subsystems . The downloaded programs or code modules may be permanently installed for example written into the program memory e.g. the flash memory or written into and executed from the RAM for execution by the processor at runtime.

In some example embodiments the electronic device may provide two principal modes of communication a data communication mode and a voice communication mode. In the data communication mode a received data signal such as a text message an email message or webpage download will be processed by the communication subsystem and input to the processor for further processing. For example a downloaded webpage may be further processed by a web browser or an email message may be processed by the email messaging application and output to the display . A user of the electronic device may also compose data items such as email messages for example using an input interface in conjunction with the display . These composed items may be transmitted through the communication subsystem over the wireless network .

In the voice communication mode the electronic device provides telephony functions and may operate as a typical cellular phone. The overall operation is similar to the data communication mode except that the received signals would be output to the speaker and signals for transmission would be generated by a transducer such as the microphone . The telephony functions are provided by a combination of software firmware i.e. a voice communication module and hardware i.e. the microphone the speaker and input devices . Alternative voice or audio I O subsystems such as a voice message recording subsystem may also be implemented on the electronic device . Although voice or audio signal output may be accomplished primarily through the speaker the display may also be used to provide an indication of the identity of a calling party duration of a voice call or other voice call related information.

The processor operates under stored program control and executes software modules stored in memory such as persistent memory for example in the flash memory . As illustrated in the software modules may include operating system software and one or more additional applications or modules such as for example an orientation determination application .

In the example embodiment of the orientation determination application is illustrated as being implemented as a stand alone application . However in other example embodiments the orientation determination application could be provided by another application or module such as for example the operating system software . Furthermore while the orientation determination application is illustrated with a single block the functions or features provided by the orientation determination application could in at least some embodiments be divided up and implemented by a plurality of applications and or modules.

Further while in the example embodiment of the orientation determination application is illustrated as being associated with the main processor of the electronic device in other embodiments the orientation determination application could be associated with another processor or group of processors. For example in some embodiments the gyroscope accelerometer and or magnetometer may include or be connected to a secondary processor. The secondary processor may provide a narrow set of functions or features and may be used to offload some processing from the main processor . For example in some embodiments the secondary processor is a sensor specific processor which is configured to provide sensor related functions such as those provided by the orientation determination application . For example the secondary processor may be configured to determine an orientation of the electronic device. The orientation determination application is in at least some embodiments configured to determine an orientation for the electronic device .

The electronic device may include a range of additional software applications including for example a notepad application voice communication i.e. telephony application mapping application a media player application or any combination thereof. Each of the software applications may include layout information defining the placement of particular fields and graphic elements e.g. text fields input fields icons etc. in the user interface i.e. the display according to the application.

The software modules or parts thereof may be temporarily loaded into volatile memory such as the RAM . The RAM is used for storing runtime data variables and other types of data or information. Although specific functions are described for various types of memory this is merely one example and a different assignment of functions to types of memory could also be used.

The data may include a past orientation . The past orientation may be an orientation estimate for the electronic device which was previously determined. The past orientation may be used for example to allow the electronic device to determine an orientation of the electronic device from the gyroscope readings obtained from the gyroscope . That is the past orientation may serve as a reference point for determining orientation from gyroscope readings. Gyroscope readings may not taken alone provide the electronic device with enough information to determine the electronic device s orientation. However gyroscope readings when coupled with a reference point such as the past orientation may provide the electronic device with information which allows the electronic device to determine the orientation.

In one or more embodiments the reference point can be calculated using readings from the magnetometer and accelerometer. The gyroscope readings can then be coupled with the reference point to determine the orientation of the electronic device . For example the magnetometer and the accelerometer can be used to provide orientation information with respect to the earth s axes by locating the direction and or intensity of the magnetic field of the earth e.g. the North Pole and the gravitational pull of the earth respectively. Thus if there is no interference with the readings the magnetometer and accelerometer readings together can provide a three dimensional absolute orientation of the electronic device . The measured spatial orientation is then used as the reference point or past orientation . The gyroscope readings provide a rate of rotation of the electronic device around one or more of the gyroscope axes Gx Gy Gz. The electronic device or the processor associated with the electronic device can then combine the gyroscope readings providing a relative rotation measurement with the reference orientation provided by the accelerometer readings and magnetometer readings and calculate a current orientation of the electronic device . The reference point is an example of a past orientation .

Because the past orientation may be current i.e. representative of a current orientation for only a short period of time the past orientation can be stored in a temporary storage. For example the past orientation may be stored in an area of memory which is reserved for storing transient data. Each time a reading is obtained for one or more sensor e.g. accelerometer magnetometer and or gyroscope for one or more axis with respect to that sensor the orientation of the electronic device may be calculated and stored as the past orientation . For example if a reading is obtained with respect to the x axis of the gyroscope indicating rotation of the electronic device about the gyroscope s x axis then the orientation will be calculated as being the past orientation that has been rotated by an amount equal to the obtained rotation about the x axis of the gyroscope . This new orientation calculation can then be stored as the past orientation . By way of further example the absolute orientation of the electronic device can be calculated using readings obtained from the accelerometer and or magnetometer . This absolute orientation can then be stored as the past orientation .

In the following description reference will be made to which illustrates in flowchart form a method of controlling sensor readings. The method may include features which may be provided by an electronic device such as the electronic device of . For example one or more applications or modules associated with an electronic device such as the orientation determination application may contain processor readable instructions for causing a processor associated with the electronic device to perform the method of . That is in at least some example embodiments the electronic device may be configured to perform the method . For example the method may be implemented by a processor of an electronic device .

In at least some embodiments one or more of the functions or features of the method may be performed in whole or in part by another system software application module component or device apart from those specifically listed above. For example in some embodiments the method may be performed by a processor associated with the gyroscope the accelerometer and or the magnetometer . That is in at least some embodiments the method or a portion thereof may be performed by a processor other than the main processor of the electronic device . For example a separate processor may be configured for the specific purpose of performing the method or a portion thereof.

At a gyroscope reading is detected. In an embodiment the gyroscope may detect rotations about one or more of its three axes. For example a gyroscope reading wmay be obtained from the gyroscope based on gyroscope measurements associated with the x sensing axis such as a rotation about the x sensing axis . By way of further alternative examples a gyroscope reading wmay be obtained from the gyroscope based on gyroscope measurements associated with the y sensing axis such as a rotation about the y sensing axis and a gyroscope reading wmay be obtained from the gyroscope based on gyroscope measurements associated with the z sensing axis such as a rotation about the z sensing axis . Detecting a gyroscope reading in respect of an axis of the gyroscope can comprise collecting samples of the rotational velocity measured about that axis.

At the orientation of the electronic device is calculated. For example the orientation of the electronic device can be calculated using the detected gyroscope reading. By way of further example the electronic device may have stored a reference point or past orientation in memory. The past orientation is coupled with the gyroscope reading to provide a new calculation describing the orientation of the electronic device . The rate of rotation provided by the gyroscope reading can be used to provide a corresponding rotation to the past orientation of the electronic device . The new orientation can be stored in memory on the electronic device e.g. in place of the past orientation .

In accordance with one or more embodiments the operation of calculating the orientation of the electronic device can be performed at periodic or predetermined time intervals. Associated with each time interval readings can be taken for one or more of the sensors in respect of one or more of the sensor axes. It is recognized that the readings of one sensor may be taken at different periodic time intervals than the readings from another sensor. The calculation of the orientation of the electronic device can be based on these readings and can also be based on the past orientation stored in memory. For example the orientation of the electronic device can be calculated after and based on each instance of obtaining a reading from one or more sensor in respect of one or more axis of that sensor.

Readings from one or more sensor in respect of one or more axis may indicate that no movement is detected in respect of such one or more axis. The term no movement can be taken to mean movement that is below a predetermined threshold. For example one or more sensor may always be outputting and or detecting a minimal amount of signal in respect of each axis due to environmental interference and or noise. A reading from one or more sensor in respect of one or more axis that indicates no movement will have no effect on the calculation of the orientation of the electronic device . For example the electronic device may be programmed e.g. through instructions stored on memory to ignore readings that are below a certain value in respect of certain axes of certain sensors. A no movement reading from a sensor in respect of an axis of that sensor can still require collection of samples by the sensor in respect of the axis.

At it is determined that for an amount of time at least as long as a predetermined amount of time the calculation of the orientation of the electronic device does not use a gyroscope reading in respect of an identified gyroscope axis. In other words the calculation of the orientation of the electronic device does not use gyroscope readings in respect of an identified gyroscope axis for a certain amount of time which is at least as long as a predetermined amount of time. One or more orientation calculations can be performed during the amount of time that is at least as long as the predetermined amount of time. Similarly the electronic device can obtain one or more readings from one or more axes of one or more sensors including the identified gyroscope axis during the amount of time that is at least as long as the predetermined amount of time. In accordance with one or more embodiments the predetermined amount of time is in the range of 1 to 2 second. In one or more embodiments it can be determined that for an amount of time that is at least as long as a predetermined amount of time the calculation of the orientation of the electronic device does not use a gyroscope reading in respect of more than one identified gyroscope axes.

In one or more embodiments the predetermined amount of time may instead be an adaptive amount of time. For example the adaptive amount of time may depend on the amount of movement that has been measured at one or more sensors of the electronic device during a previous time period. The adaptive amount of time may increase when the amount of movement measured during a previous time period increases. For example the electronic device may move from a stationary state to a state in which it is in transit e.g. being carried in a pocket or bag in which case the adaptive amount of time will increase.

Different predetermined amounts of time and or adaptive amounts of time may be associated with each separate sensing axis of each separate sensor.

In one or more embodiments the predetermined amount of time or the adaptive amount of time may also depend on the processing power and or the amount of time to disable and or enable a sensing axis. For example the predetermined amount of time may be greater for a specific sensing axis of a specific sensor as compared to a second sensing axis of a sensor if the specific sensing axis uses more time to become enabled than a second sensing axis.

In accordance with one or more embodiments the readings from the gyroscope in respect of its x axis indicate that there is no movement of the gyroscope or the electronic device in respect of the gyroscope s x axis Gx for an amount of time at least as long as the predetermined amount of time. During this amount of time the electronic device e.g. the orientation determination application will not have used the reading in respect of the gyroscope s x axis Gx in the calculation of the orientation of the electronic device . During this time readings from one or more of the gyroscope s y axis Gy and z axis Gz may be used in the calculation of the orientation of the electronic device . By way of clarification when no gyroscope reading in respect of the gyroscope s x axis Gx is used to calculate the orientation of the electronic device then the electronic device is considering that it is not rotating about the gyroscope s x axis Gx.

At the electronic device e.g. the processor coupled with the electronic device disables detection of the gyroscope readings in respect of the identified gyroscope axis. In accordance with an exemplary embodiment disabling the detection of the gyroscope readings about the identified gyroscope axis is accomplished by ceasing to obtain data samples of the gyroscope s measurements in respect of the identified sensing axis. For example if at it is determined that for a predetermined amount of time the orientation calculation does not use the gyroscope readings in respect of the gyroscope s x axis Gx then the electronic device would stop obtaining or collecting samples in respect of the gyroscope s x axis Gx. Following this example the readings from the gyroscope s y axis Gy and z axis Gz can still be enabled so that the electronic device would still be collecting or obtaining samples from the gyroscope in respect of the gyroscope s y axis Gy and or z axis Gz. In one or more further embodiments disabling detection of the gyroscope readings in respect of the identified gyroscope axis can mean collecting fewer samples or collecting samples at a decreased rate for the gyroscope in respect of the identified gyroscope axis.

At the accelerometer and magnetometer readings are collected for the electronic device . In accordance with an exemplary embodiment the accelerometer and magnetometer readings are periodically collected at predetermined time intervals. For example the accelerometer and magnetometer readings are periodically collected in order to provide a corrected reference point or past orientation from which the orientation of the electronic device can be calculated. Periodically determining a corrected reference point can be performed in order to limit the drift caused by errors in the gyroscope readings for example.

At it is determined that the accelerometer and magnetometer readings taken at indicate movement above a threshold of the electronic device in respect of the identified sensing axis of the gyroscope. In other words the accelerometer and magnetometer indicate that there is movement that would have been detected by the axis of the gyroscope that has been disabled. For example the accelerometer and or magnetometer readings can provide enough information to calculate a three dimensional orientation of the electronic device . The calculated three dimensional orientation of the electronic device can be compared to the past orientation in order to determine the amount and angle of rotation about the identified sensing axis of the gyroscope in the time since the calculation of the past orientation . It is understood that the past orientation can be the most recently calculated orientation or can be the orientation calculated at the time when the detection of the gyroscope readings in respect of the identified gyroscope axis was disabled . The accelerometer readings and magnetometer readings taken at may be used only to detect whether there is or has been any rotation of the electronic device about the identified sensing axis of the gyroscope in other words in such an embodiment the accelerometer readings and magnetometer readings are not used to update the past orientation . Further in certain configurations of the sensors e.g. the accelerometer magnetometer and gyroscope readings in respect of only a subset of axes of the accelerometer and or magnetometer may be used to determine that there is movement above a threshold of the electronic device in respect of the identified sensing axis of the gyroscope .

At the detection of the gyroscope readings in respect of the identified sensing axis is enabled. In one example enablement of the identified sensing axis of the gyroscope is performed after it is determined at that the accelerometer and or magnetometer readings indicate movement above a threshold in respect of the identified gyroscope axis. In accordance with an exemplary embodiment enablement of the detection of the gyroscope readings in respect of the identified sensing axis can comprise obtaining or collecting e.g. periodically samples from the gyroscope in respect of the identified sensing axis.

The method may be repeated. That is further iterations of the method may be performed. Portions of the method may also be repeated. For example after the identified sensing axis of the gyroscope is disabled at iterations of detecting accelerometer and magnetometer readings at and determining whether there is movement above the threshold in respect of the identified sensing axis at can be performed at predetermined intervals. Each predetermined interval can last for a predetermined amount of time.

While the method is in operation the electronic device can be using readings from the sensors e.g. the accelerometer magnetometer and or gyroscope in respect of the axes that are enabled in order to calculate the orientation of the electronic device .

The gyroscope reading is an example of a first sensor reading and the accelerometer reading and magnetometer reading can be considered the second sensor reading and third sensor reading respectively in respect to method . In one or more alternative embodiments the accelerometer reading may be the first sensor reading and the gyroscope reading and magnetometer reading may be the second and third sensor readings. In one or more alternative embodiments the magnetometer reading may be the first sensor reading and the gyroscope reading and accelerometer reading may be the second and third sensor readings. For example in one or more alternative examples it is a sensing axis of the accelerometer or magnetometer that is disabled as described with reference to the exemplary embodiment shown in . Accordingly the sensor e.g. gyroscope accelerometer magnetometer for which an identified sensing axis is disabled can be referred to as the first sensor.

At a magnetometer reading is detected. For example the magnetometer reading can be detected at one or more of the magnetometer sensing axes. The magnetometer readings can be detected in tandem with one or more accelerometer readings with respect to one or more accelerometer sensing axes. The magnetometer readings and or the accelerometer readings can be detected at predetermined time intervals.

In at least some embodiments magnetometer readings for each axis of the magnetometer may be obtained at . For example a magnetometer reading mmay be obtained from the magnetometer based on magnetometer measurements associated with the x sensing axis such as a magnetic field along the x sensing axis a magnetometer reading mmay be obtained from the magnetometer based on magnetometer measurements associated with the y sensing axis such as a magnetic field along the y sensing axis and a magnetometer reading mmay be obtained from the magnetometer based on magnetometer measurements associated with the z sensing axis such as a magnetic field along the z sensing axis .

At the orientation of the electronic device is calculated. For example the magnetometer reading s and accelerometer reading s can be used to calculate an orientation of the electronic device . By way of further example the orientation calculation that is based on the accelerometer reading s and or magnetometer reading s can be used as the reference point in connection with gyroscope reading s in order to calculate an orientation of the electronic device .

In accordance with an exemplary embodiment the electronic device stores the most recent magnetometer readings in respect of each magnetometer sensing axis Mx My Mz. When a magnetometer reading is obtained in respect of any of its three sensing axes it can be compared to the stored values of the most recent magnetometer readings. If there is no difference or if the difference is below a predetermined threshold between the magnetometer reading and the stored value in respect of an identified magnetometer sensing axis then there is substantially no change in the orientation of the electronic device in respect of the identified magnetometer sensing axis. In such a situation the calculation of the orientation of the electronic device does not take into account i.e. does not use the identified magnetometer sensing axis and instead only updates the past orientation and in one or more embodiments the reference point in respect of the magnetometer sensing axes that have indicated a change. In an alternative embodiment the electronic device does not separately store the most recent magnetometer readings in respect of each magnetometer sensing axis Mx My Mz and instead determines whether there has been no change in respect of an identified magnetometer sensing axis based only on the past orientation .

At it is determined that for an amount of time at least as long as a predetermined amount of time a magnetometer reading from an identified sensing axis of the magnetometer is not used to calculate the orientation of the electronic device . For example the processor could operate a timer that keeps track of the time since when the last reading of the magnetometer in respect of the x axis or of another axis was used in the calculation of the orientation of the electronic device . If there was no change or if the change was below a threshold in the magnetic field in respect of the magnetometer s x axis or of another sensing axis since a previous reading in respect of the magnetometer s x axis or other sensing axis then the reading of the magnetic field in respect of the magnetometer s x axis or other sensing axis indicates that the electronic device did not move in respect of the magnetometer s x axis or other sensing axis . The timer can be used to measure the length of time that has passed since a magnetometer reading from an identified sensing axis of the magnetometer was last used to calculate the orientation of the electronic device . This amount of time can be compared to the predetermined amount of time to determine if the amount of time that magnetometer reading from the identified sensing axis of the magnetometer has not been used in the calculation of the orientation of the electronic device is at least as long as the predetermined amount of time.

At detection of the magnetometer readings in respect of the identified sensing axis e.g. the x axis is disabled. For example during the time the magnetometer readings in respect of the identified sensing axis are disabled few or no samples are obtained for the magnetometer in respect of the identified sensing axis.

At the accelerometer readings are detected. For example samples can be obtained for one or more of the accelerometer sensing axes. This may be performed on predetermined intervals. Magnetometer readings and gyroscope readings for sensing axes that are not disabled can also be obtained. The readings can be used to calculate the orientation of the electronic device for example.

At it is determined that the accelerometer readings indicate a movement above a threshold of the electronic device in respect of the identified magnetometer sensing axis. For example readings from one or more sensing axes of the accelerometer indicate corresponding movement in respect of the identified magnetometer sensing axis. For example the identified magnetometer sensing axis may be the same as or identical to one of the accelerometer sensing axes. Alternatively movement of the electronic device about the identified magnetometer sensing axis can be approximated by one or more of the accelerometer sensing axes depending on the orientation of the three orthogonal accelerometer sensing axes relative to the three orthogonal magnetometer axes. In one or more embodiments the gyroscope readings can indicate movement above a threshold in respect of the identified magnetometer sensing axis.

At the magnetometer readings in respect of the identified sensing axis are enabled. For example the electronic device may now obtain or receive samples from the magnetometer in respect of the identified sensing axis.

In one or more alternative embodiments the accelerometer readings can be detected at and disabled in respect of an identified accelerometer sensing axis at instead of the magnetometer.

The embodiments described are by way of example. Any number of axes on any number of sensors can be disabled if there are enough enabled axes on one or more sensors to detect the orientation of the electronic device . For example the axis or axes can be disabled in order to save power used in the electronic device . By way of further example the sensors that are enabled can be periodically rotated.

In one or more embodiments the axis or orthogonal axes of the gyroscope do not align with the axis or orthogonal axes of one or more other sensors associated with the electronic device . For example the gyroscope can have three orthogonal axes that do not align with the three orthogonal axes of the accelerometer or the three orthogonal axes of the magnetometer . Following the same example the sensing axes are such that the readings from the accelerometer and magnetometer can be used to measure the orientation of the electronic device and in particular can be used to measure a change in rotation in respect of one or more of the sensing axes of the gyroscope .

While the present disclosure is primarily described in terms of methods a person of ordinary skill in the art will understand that the present disclosure is also directed to various apparatus such as a handheld electronic device including components for performing at least some of the aspects and features of the described methods be it by way of hardware components software or any combination of the two or in any other manner. Moreover an article of manufacture for use with the apparatus such as a pre recorded storage device or other similar computer readable storage medium including program instructions recorded thereon which may for example cause a processor to perform one or more of the methods described herein or a computer data signal carrying computer readable program instructions may direct an apparatus to facilitate the practice of the described methods. It is understood that such apparatus articles of manufacture and computer data signals also come within the scope of the present disclosure.

The term computer readable storage medium as used herein means any medium which can store instructions for use by or execution by a computer or other computing device including but not limited to a portable computer diskette a hard disk drive HDD a random access memory RAM a read only memory ROM an erasable programmable read only memory EPROM or flash memory an optical disc such as a Compact Disc CD Digital Versatile Video Disc DVD or Blu ray Disc and a solid state storage device e.g. NAND flash or synchronous dynamic RAM SDRAM .

The embodiments of the present disclosure described above are intended to be examples only. Those of skill in the art may effect alterations modifications and variations to the particular embodiments without departing from the intended scope of the present disclosure. In particular features from one or more of the above described embodiments may be selected to create alternate embodiments comprised of a sub combination of features which may not be explicitly described above. In addition features from one or more of the above described embodiments may be selected and combined to create alternate embodiments comprised of a combination of features which may not be explicitly described above. Features suitable for such combinations and sub combinations would be readily apparent to persons skilled in the art upon review of the present disclosure as a whole. The subject matter described herein and in the recited claims intends to cover and embrace all suitable changes in technology.

