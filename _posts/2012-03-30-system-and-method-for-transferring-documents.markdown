---

title: System and method for transferring documents
abstract: Mobile devices enable users to access data and documents in a convenient portable format. The disclosed method and system enables documents to be transferred/moved onto a mobile device for review or reference by making the transfer simple and straight forward so that it is easy for non-technically literate users (e.g. administrative assistant putting documents on their executive's mobile device). From a sender perspective the transfer mechanism can work whether the mobile device is on a local network (relative to the sender) or on a remote network when the sender does not know the actual location of the mobile device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09053411&OS=09053411&RS=09053411
owner: BlackBerry Limited
number: 09053411
owner_city: Waterloo
owner_country: CA
publication_date: 20120330
---
This application is related to and claims priority from U.S. provisional application Ser. No. 61 473 488 filed on Apr. 8 2011 U.S. provisional application 61 471 594 filed Apr. 4 2011 and PCT Patent application number PCT US2011 056385 filed Oct. 14 2011 the entirety of the disclosures are hereby incorporated by reference for all purposes.

The present disclosure relates to transferring electronic documents and in particular to transferring electronic documents to a mobile device using a mobile device printer driver.

As mobile devices such as e book reader tablet computers and smart phones become everyday tools that enable users to access data and documents in a convenient portable form factor the integration into traditional document delivery mechanisms becomes more imperative. The delivery of documents to the mobile device have been typically limited to downloading via e mail or from network based document sources or data stores such as a website through HTTP or FTP mechanisms. As mobile devices provide a more acceptable reading and presentation experience and move towards replacing paper based documents the need for carrying paper documents can be reduced particularly when operating between a desktop office based work environment and a portable or mobile work environment. The presentation of documents on varying mobile device formats provided by differences in screen size and display resolution can present a sub optimal experience when the document provided has not been generated with constraints of the mobile device in mind. In addition integration of mobile devices into the networked office environment has been limited by lack of easy of integration with existing document delivery infrastructure.

It will be noted that throughout the appended drawings like features are identified by like reference numerals.

In accordance with an aspect there is provided a method of transferring an electronic document from a sending device to a mobile device the method comprising sending from the sending device to a location server a request generated from a mobile device printer driver executed by the sending device the request comprising a target identifier for receiving the electronic document receiving at the sending device from the location server a network identifier of the mobile device associated with the target identifier the network identifier provided to the location server by the mobile device after the mobile device has registered to a network formatting at the sending device the electronic document based on one or more parameters associated with the mobile device and transferring the formatted electronic document from the sending device using the network identifier.

In accordance with another aspect there is provided a sending device for transferring an electronic document the sending device comprising a processor a memory coupled to the processor containing instructions for execution by the processor the instruction for performing sending to a location server a request generated from a mobile device printer driver executed by the sending device the request comprising a target identifier for receiving the electronic document receiving from the location server a network identifier of a mobile device associated with the target identifier the network identifier provided to the location server by the mobile device after the mobile device has registered to a network formatting the electronic document based on one or more parameters associated with the mobile device and transferring the formatted electronic document using the network identifier.

In accordance with yet another aspect there is provided a computer readable memory containing instructions for transferring an electronic document from a sending device to a mobile device the instructions which when executed by a processor perform sending from the sending device to a location server a request generated from a mobile device printer driver executed by the sending device the request comprising a target identifier for receiving the electronic document receiving at the sending device from the location server a network identifier of the mobile device associated with the target identifier the network identifier provided to the location server by the mobile device after the mobile device has registered to a network formatting at the sending device the electronic document based on one or more parameters associated with the mobile device and transferring the formatted electronic document from the sending device using the network identifier.

Embodiments are described below by way of example only with reference to . It will be appreciated that for simplicity and clarity of illustration where considered appropriate reference numerals may be repeated among the figures to indicate corresponding or analogous elements. In addition numerous specific details are set forth in order to provide a thorough understanding of the embodiments described herein. However it will be understood by those of ordinary skill in the art that the embodiments described herein may be practiced without these specific details. In other instances well known methods procedures and components have not been described in detail so as not to obscure the embodiments described herein. Also the description is not to be considered as limiting the scope of the embodiments described herein.

Mobile devices enable a user to access data and documents in a convenient portable format. The disclosed system and method enables documents to be transferred moved onto a mobile device for review or reference by making the transfer simple and straight forward so that it is easy for non technically literate users e.g. administrative assistant putting documents on their executive s mobile device . From a sender s perspective the transfer mechanism can work whether the mobile device is on a local network relative to the sender or on a remote network when the sender does not know the actual location of the mobile device.

By using a printer metaphor the sender can control both the content and the presentation of the electronic document transferred to the mobile device as compared to a file transfer mechanism e.g. FTP that would only allow the sender to control the content i.e. picking the file to be transferred . The use of a mobile device printer driver on the sender device allows the sender to influence presentation aspects such as for example page format margins orientation page range and other similar presentation aspects. The electronic document is transferred to the mobile device in one of one or more pre established file formats e.g. PDF or PS . The sender does not need to be concerned with the presence of an application that supports a particular file format e.g. .DOC .XLS .PPT .PS .PDF on the mobile device .

Each mobile device that is configured to receive electronic documents via the printer driver mechanism exposes one or more share directories in its file system that each is a target for electronic document delivery. Various forms of privileges and access control can be enabled to provide security for the share directory. Each mobile device can support multiple share directories each potentially having different privilege and access control setting e.g. a corporate share directory and a personal share directory on the same mobile device that can be associated with credentials or privileges associated with the sender device or a user of the sender device .

From time to time in response to changes in the mobile device network context for example when connecting to a new network by a wireless interface the mobile device registers with a location server by providing it s current network address such as an Internet Protocol IP address. The mobile device may also provide the names of its one or more share directories and device interface identifiers IDs such as a media access control MAC address associated with the network address. Alternatively this information may be pre configured or stored at the location server . If the mobile device has access through multiple interfaces the registration may include identification of multiple network addresses and device interface IDs.

The location server may be located so that it is accessible by any mobile device that has connectivity to the Internet or any similar widely available connection medium. The location server may maintain mobile device configuration information such as the network address ID device interface ID share directories access privileges dropbox locations associated with one or more mobile devices . The mobile device may be associated with user account identifier such as a user name or e mail address. The account or user identifier may be associated with multiple mobile devices enabling a document to be directed to one or more of the mobile devices. For example one account may have multiple mobile devices such as a tablet device and a smartphone associated with it where a print request may send the document to both devices or only to an active or accessible device. The location server may be a distributed service executed by one or more computers or servers having processors and associated memory for executing instructions.

When the mobile device printer driver on the sender device wants to transfer an electronic document to the mobile device the sender device sends a print request to the location server . The request may contain a device identifier or a user account identifier. In response to the print request the location server may provide one or more network address identifiers and device interface identifier of the target mobile device and may also provide a share directory identifier if one is not already pre selected or the location server may request connection information from the mobile device which is in turn provided to the sender device . A transfer mechanism incorporated in or associated with the mobile device printer driver then uses the mobile device IP address to establish a connection with the mobile device . The transfer mechanism may use a universal resource locator URL identifier associated with the mobile device . The URL may define a hyperlink transfer protocol HTTP HTTP secure HTTPS or file transfer protocol FTP address to allow a session to be initiated between the sender device and the mobile device using secure socket layer or transport layer security SSL TLS . In an HTTP or HTTPS transfer the sender device can utilize HTTP post to transfer the electronic document . Depending on the location of the mobile device relative to the sender device different connection delivery techniques may be required to transfer the electronic document . The sender device can determine if a direct connection can be performed with the mobile device and will initiate a connection to transfer the electronic document . If the mobile device has an IP address on another network then any intervening firewalls and or Network Address Translators NAT or may interfere with connectivity and an alternate connection mechanism may be required to successfully deliver the electronic document . The mechanisms may include the use of protocols such as for example Session Initiation Protocol SIP Session Description Protocol SDP Simple Traversal of User Datagram Protocol through Network Address Translators STUN Traversal Using Relay NAT TURN and Interactive Connectivity Establishment ICE provided by the location server or one or more other servers. When connection to the mobile device is not possible a network dropbox may be utilized to transfer documents to a location by utilizing network storage. The mobile device may periodically check the network dropbox for new electronic documents or access the dropbox based upon receipt of a kicker packet from the sender device providing notification of the presence of a electronic document .

At the sending device such as a personal computer when the user selects to print an electronic document to the mobile device the mobile device print driver sends a request referred to as a print request in this disclosure to the location server . The print request may identify the mobile device by a unique identifier or by a user account which may be associated with more than one mobile device . This print request may be in the form of an HTTP post or a secure HTTPS post. The programming interface for the sender device and the location server may be RESTful Representational state transfer using HTTP . The location server forwards the print request to the mobile device . This message from the location server may be in a different format. For example the location server may communicate the request to the mobile device using session initiation protocol SIP . When the mobile device accepts the request to receive printed electronic document it returns a URL or a secure URL to the location server to grant access to via a transfer mechanism and a location on the mobile device that can be used to transfer the electronic document . The transfer of the information may alternatively utilize SIP. The mobile device may provide security information such as a password token or certificate to the sender device or the mobile device may use the location server or other central server as a certificate authority to connect to the mobile device . The location server forwards the URL to the sender device . The sender device may use this URL to push the file to the mobile device with an HTTP post or an HTTPS post if security is required or other direct peer to peer transfer mechanism such as FTP. The electronic document may be formatted to be compatible with the mobile device based upon desired parameters in the print driver parameters provided in response the location request or by performing a database lookup to determine the appropriate formatting parameters for the target device. For example the size of the document resolution content or the type of document container such as .PDF .PS .DOC may be modified to match the resources of the mobile device and then sent to the mobile device . The transfer process is complete when the mobile device indicates that the transfer is complete . If the transfer is unsuccessful the sender device may request alternate connection mechanism from the location server .

The location server performs a look up to determine the current location of the mobile device and provides location information including for example a network address and a device interface identifier associated with the mobile device to the sender device . Location information may be provided for more than one device if multiple devices are associated with a user account identifier. The location server may also identify one or more directories on the mobile device . A directory may be determined based upon the sender device credentials a document type or selection made by the user upon sending the print request. The device identifier used by the location server may be associated with one or more mobile devices where location server may in turn provide location information for more than one mobile device .

The sending device then may send a ping request comprising an echo request packet to the identified network address or addresses and receives one or more echo responses from the destination associated with the network address. Through the ping mechanism the MAC address associated with the network address can be determined through an address resolution protocol ARP look up . If the MAC address determined by the ARP look up matches the device interface identifier provided by the location server a connection request to the mobile device can be made. The connection request to the mobile device can be sent. Once the connection is established the electronic document which is formatted for the device via the printer driver can be transferred to the mobile device to the designated destination directory.

The location server performs a look up to determine the current location of the device and provides the network address and a device interface identifier and may also provide a directory on the mobile device . The sending device then may send a ping request comprising an echo request packet to the identified network address or addresses and receives one or more echo responses . Through the ping mechanism the MAC address associated with the network address can be determined through an ARP table look up . In this example if the MAC address determined by the ARP look up does not match the device interface identifier provided by the location server an alternate mechanism can be utilized to deliver the electronic document to the mobile device. The sending device can send the electronic document to a dropbox on the location server or a network based or cloud based storage location associated with the mobile device or user. The electronic document transfer may involve additional queries responses between the sender device and location server to determine the appropriate location to transfer the electronic document . The sender device may send a kicker packet using the port number and packet content provided in the registration message to the location server and provided to the sender device in the location information message. The kicker packet may be a User Datagram Protocol UDP packet using the port number and packet content that may be randomly generated by the mobile device . The port and content may be randomly generated to reduce security implications of sending a device specific message that may be utilized in malicious attacks such as a denial of service attack. The mobile device can then periodically poll the network storage or dropbox location or check the dropbox based upon a notification being received at the mobile device to retrieve the electronic document . The electronic document can then be transferred to the design destination folder on the mobile device .

The location server performs a look up to determine the current location of the mobile device and provides the network address and a device interface identifier and may also provide a directory on the mobile device . The sending device then may send a ping request comprising an echo request packet to the identified network address or addresses and receives one or more echo responses . Through the ping mechanism the MAC address associated with the network address can be determined through an ARP table look up . In this example if the MAC address determined by the ARP look up does not match the device identifier provided by the location server an alternate mechanism may be utilized to deliver the electronic document . The sending device sends a connection failure notification to the location server . The location server can then perform characterization to determine traversal options of the firewall NAT device . This may involve determination of a port to allow access to the mobile device or via a relay protocol through the location server such as including the use of protocols such as SIP SDP STUN TURN and ICE. In this example the alternate mechanism may for example be identification of a communication port associated with the network address which is provided to the sender device and a connection is then be attempted by the sender device . The additional connection attempt may or may not involve an ARP network address verification depending on the alternate communication mechanism. If the connection is successfully established the electronic document is transferred to the device . If the connection is not established the electronic document may be uploaded to a network based or cloud based storage location associated with the mobile device as described in relations to . Alternatively if the mobile device determines that the firewall and or NAT device cannot be traversed the registration message may identify that the dropbox is required and to may be bypassed and a drop box utilized as described in connection with by using a notification mechanism such as a kicker message or by the mobile device polling the dropbox .

The printer driver sends a request from the sender device to the location server . The location request includes a mobile device identifier or a user identifier associated with one or more target mobile devices . The location request may also include a sender identifier to determine access rights or directory location for the sender on the mobile device . The location server then provides a response to the sender device the response may identify a location identifier and access method or a drop box identifier where the electronic document can be sent. The location information may also include document format preferences. The electronic document may then be converted into the desired format for the mobile device or may be converted only when a connection is established with the mobile device . If URL connection identifiers are provided YES at the electronic document can be pushed to the file location identified by the URL in the response . When the file transfer is complete the mobile device provides confirmation to the sender device . If URL connection identifier is not provided NO at and alternate connection methods are not available NO at the electronic document may be transferred to an identified network dropbox associated with the mobile device identified in the server response . A kicker packet can then be sent from the sender device to the mobile device to identify that the electronic document is available for retrieval. If alternate connection information or identifiers are provided YES at or defined in the configuration of the printer driver the method continues as shown in .

As shown in if a network address access method is identified or specified in the printer driver the network address of the mobile device is determined . The sender device sends an echo request message such as a ping message to the network address to which an echo response is received . From the ping message a medium access control MAC is determined which can be compared to a mobile device interface identifier that was provided in the response from the location server . If the mobile device ID matches the MAC determined by an ARP table lookup YES at an attempt to connect with the mobile device can be performed . If the connection is successful YES at the electronic document can be sent from the sender device to a directory on the mobile device . If the connection is not successful NO at or the device interface ID and MAC ID do not match NO at the mobile device printer driver may be configured to request an alternate access method from the location server . If an alternate access method can be requested YES at a send failure notification or alternate access request can be sent to the location server . The alternate access method may involve the location server determining accessibility of the mobile device through SIP SDP STUN TURN and ICE traversal methods that would be provided to the sender device . If an alternate access method is not available NO at the electronic document can be transferred to network dropbox designated to mobile device to be accessed by the mobile device . The sender device can then send a kicker packet to the mobile device . The kicker packet notifies the mobile device that a electronic document is available for retrieval.

The mobile device receives a print request from the location server . The mobile device grants the access request by providing a URL to the location server that can be used to directly connect from the sender device to the mobile device . The sender device uses the URL to connect to the mobile device and transfer the file e.g. electronic document by a push mechanism such as and HTTP push or a HTTPS push . The mobile device can then send confirmation when the transfer is competed .

Alternatively a direct connection request can be received from sender device or a server and an electronic document is received and stored in a directory on the mobile device . Alternatively or additionally the mobile device may periodically poll a network based stored location or receive an expected kicker packet and retrieve and store any electronic document that has been stored there . Alternatively the mobile device may be notified via an alternate mechanism such as e mail short message service SMS or other messaging means that an electronic document can be retrieved. A notification mechanism on the mobile device alerts the user when an electronic document is received. A document viewing application may allow the mobile device user to view any documents received. In addition the application may allow the user to move the documents delete documents forward documents and other similar document handling actions.

As shown by way of example in the mobile device may include a radiofrequency RF transceiver comprising a receiver and associated receiver antenna and transmitter and associated transmitter antenna . The mobile device may be in a portable form factor such as a smart phone tablet net book laptop portable computing device or an integrated mobile computer device that may access different networks wirelessly. The RF transceiver for communication with a wireless network using a wireless communication protocols such as for example but not limited to GSM UMTS LTE HSPDA CDMA W CDMA Wi MAX Wi Fi etc. A subscriber identify module SIM card may be provided depending on the access technology supported by the device. Optionally where the device is a voice enabled communications device such as for example a tablet Smartphone or cell phone the device would further include a microphone and a speaker . Short range communications is provided through wireless technologies such as Bluetooth or wired Universal Serial Bus connections to other peripheries or computing devices or by other device sub systems which may enable access tethering using communications functions of another mobile device. In a tethering configuration the mobile device may provide the network information associated with the tethered or master device to be used to access the network. This device may optionally include a Global Positioning System GPS receiver chipset or other location determining subsystem.

The mobile device also includes an operating system and software components to which are described in more detail below. The operating system and the software components to that are executed by the microprocessor are typically stored in a persistent store such as the flash memory which may alternatively be a read only memory ROM or similar storage element not shown . Those skilled in the art will appreciate that portions of the operating system and the software components to such as specific device applications or parts thereof may be temporarily loaded into a volatile store such as the RAM . Other software components can also be included as is well known to those skilled in the art.

The subset of software applications that control basic device operations including data and voice communication applications may be installed on the mobile device during its manufacture. Other software applications include a message application that can be any suitable software program that allows a user of the mobile device to send and receive electronic messages. The software applications can further comprise a networking component directory component and other suitable modules not shown . The networking component can determine which interfaces the mobile device can access for IP connectivity. The directory component can identify directories for storing electronic documents on the device in RAM or network storage based dropbox locations where electronic documents can be retrieved.

Some examples of other software components that may be executed by the operating system may include peer to peer or instant messaging application social networking mapping internet browser calendar address book and phone applications It will be appreciated that the various applications may operate independently or may utilize features of other applications. For example the phone application and messaging application may use the address book for contact details.

Although certain methods apparatus computer readable memory and articles of manufacture have been described herein the scope of coverage of this disclosure is not limited thereto. To the contrary this patent covers all methods apparatus computer readable memory and articles of manufacture fairly falling within the scope of the appended claims either literally or under the doctrine of equivalents.

Although the following discloses example methods system and apparatus including among other components software executed on hardware it should be noted that such methods system and apparatus are merely illustrative and should not be considered as limiting. For example it is contemplated that any or all of these hardware and software components could be embodied exclusively in hardware exclusively in software exclusively in firmware or in any combination of hardware software and or firmware. Accordingly while the following describes example methods and apparatus persons having ordinary skill in the art will readily appreciate that the examples provided are not the only way to implement such methods system and apparatus.

