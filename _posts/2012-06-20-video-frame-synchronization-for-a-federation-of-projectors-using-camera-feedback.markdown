---

title: Video frame synchronization for a federation of projectors using camera feedback
abstract: A method of audio and video synchronization may include capturing an image by each of a plurality of cameras. The images and audio may be compared with each other for synchronization.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09218061&OS=09218061&RS=09218061
owner: The Regents of the University of California
number: 09218061
owner_city: Oakland
owner_country: US
publication_date: 20120620
---
The invention described herein was made in the performance of official duties by one or more employees of the University of California University system under National Science Foundation contract NSF EAGER ECCS 1059764NSF and the invention herein may be manufactured practiced used and or licensed by or for the government of the State of California without the payment of any royalties thereon or therefor. This invention was made with Government support under Grant No. 1059764 awarded by the National Science Foundation. The Government has certain rights in this invention.

The present invention relates to a tiled or superimposed overlaid projection based display that may be embedded in mobile devices that may also be applicable to display walls and to multi user interaction with tiled or superimposed projection based display walls.

Few recent works address systems with multiple projectors and cameras. A few systems process images from a camera by a computer connected to each camera but the systems utilize a centralized server that controls the system.

Accordingly there is a need for a scalable paradigm with a distributed cooperative collaborative system for multi user interaction with tiled or superimposed projection based display walls.

According to one aspect of the present invention a method of audio and video synchronization comprises capturing an image by a sensor attached to a device among a plurality of devices wherein at least one of the plurality of devices has cellular phone local area network or wide area network connectivity and includes at least a projector a sensor and a computing device projecting an image frame by each of the projectors of the plurality of devices wherein the image frame projected by each of the projectors of the plurality of devices is tiled or superimposed and has an encoded or explicit frame number identifying a most lagging or most ahead projector based on a calculated frame difference for each of the plurality of devices wherein the frame difference for each of the plurality of devices is based on the difference in frame number from the most lagging or most ahead projector synchronizing the image frames projected by each of the projectors attached to the plurality of devices and synchronizing the audio of each of the plurality of devices by synchronizing the clocks of the devices by comparing the calculated frame difference for each of the plurality of devices and stalling or advancing the image frames projected by each of the projectors attached to the plurality of devices by the calculated frame difference.

The following detailed description is of the best currently contemplated modes of carrying out exemplary embodiments of the invention. The description is not to be taken in a limiting sense but is made merely for the purpose of illustrating the general principles of the invention since the scope of the invention is best defined by the appended claims.

Broadly an embodiment of the present invention generally provides video frame synchronization for a federation of projectors using camera feedback. The present invention uses visual feedback from cameras instead of feedback via message passing over the network mobile or local area.

Referring to video frame synchronization may include a system with a camera facing a projection area and a pico projector which faces a development board . Referring to video frame synchronization from may include a set of multiple tiled pico projectors. Video frame synchronization may use video or digital projectors.

Referring to video frame synchronization as shown in may include a step of projecting an image frame by each of the projectors of the plurality of devices wherein the image frame projected by each of the projectors of the plurality of devices is tiled or superimposed and has an encoded or explicit frame number. If the image projected by each of the projectors is tiled the view of the camera may be larger than the projector for each of the devices. Therefore the image captured by a sensor attached to a projector in a tiled configuration includes may include an area larger than the image projected by the projector. As an example image frames projected by the projectors may be patterned codes such as Quick Response Codes QR codes but they may be other types of non QR codes. In an exemplary embodiment QR codes or other patterns encoding the frame numbers of the images projected by projectors from different devices may not overlap.

A step may include capturing an image by a sensor attached to a device among a plurality of devices such that at least one of the devices has cellular phone local area network or wide area network connectivity and includes at least a projector a sensor and a computing unit.

Each of the pico projectors may be equipped with a camera covering an entire projected display. Displaying frames may occur at times internal to each projector. The display time of frames may be matched across multiple projectors. The next frames may be displayed based on a calculation based on a frame rate in each individual projector. The frame rate in each individual projector may be set based on an internal clock.

If the devices are in a superimposed configuration the total display space of the area projected by the projectors of the plurality of devices may be divided into a number of discrete regions of at least the number of the plurality of devices. A pattern on one of the regions may be randomly projected by each of the projectors of the plurality of devices. Each of the plurality of devices may determine whether the pattern projected by itself overlaps with the pattern projected by another projector of another of the plurality of devices. One of the regions may be locked by keeping the pattern projected on the region being locked ON and marking the region being locked by the one of the plurality of devices projecting a pattern on the region being locked in response to determining that the pattern projected on the region being locked does not overlap a pattern projected by another of the plurality of devices. The region being locked may be marked as not taken and the pattern may be randomly re projected on another region in response to determining that the pattern projected on the region being locked overlaps a pattern projected by another of the plurality of devices until each of the plurality of devices has locked one of the regions.

In an exemplary embodiment audio and video synchronization may be performed at a granularity of a fraction of a frame. A frame display time of each of the plurality of devices may be calculated using a clock rate found on a respective one of the plurality of devices such that the clock rate is different for each of the plurality of devices. In response to a spatial drift of synchronization a pattern number may be embedded in the image frames in a way that is imperceptible to a viewer. In an exemplary embodiment multiple devices may aggregate at least one of power audio quality and video quality across the multiple devices.

A step may include identifying a most lagging or most ahead projector based on a calculated frame difference for each of the plurality of devices wherein the frame difference for each of the plurality of devices is based on the difference in frame number from the most lagging or most ahead projector. A step may include synchronizing the image frames projected by each of the projectors attached to the plurality of devices and synchronizing the audio of each of the plurality of devices by synchronizing the clocks of the devices by comparing the calculated frame difference for each of the plurality of devices. A step may include stalling or advancing the image frames by the calculated frame difference. For example a most lagging projector may have the smallest frame number of the plurality of video or digital projectors. As an example the image frame captured by a sensor attached to a projector that projects a tiled image may include an area greater than the image frame projected by the projector

Referring to centralized video frame synchronization as shown in may include a step of designating a master device among the plurality of devices wherein the master device includes a sensor which may view all of the image frames projected by the plurality of devices and at least one of the plurality of devices may not have sensor. In an exemplary embodiment of the invention video frame synchronization may include each of a plurality of projectors projecting a sequence of frames at a target frame rate. A step may include identifying a most lagging or most ahead projector based on a calculated frame difference for each of the plurality of devices wherein the frame difference for each of the plurality of devices is based on the difference in frame number from the most lagging or most ahead projector. A step may include sending information via network messages regarding the most lagging or most ahead projector and the calculated frame difference to each of the plurality of devices wherein each of the plurality of devices stall or advance the image frames projected by each of the projectors attached to the plurality of devices using the calculated frame difference. In one embodiment a sensor from one of the plurality of devices may view less than all of the images projected by the devices. Each of the devices may perform independently of one another.

Referring to distributed video synchronization as shown in may include a step of projecting an image frame by each of the projectors such that the image frame is tiled or superimposed and has a frame number. A step may include capturing an image frame by a sensor attached to one of the devices such that each of the devices has network connectivity and includes at least a projector a sensor and a computation unit.

A step may include specifying a reference device among adjacent ones of the devices. In contrast to the above embodiment that uses a projector with maximum frame lag as a reference by the other projectors this embodiment may use adjacent projectors as references. For example a projector s camera may be positioned to view areas of projectors above to the left and above left of the camera s current projection area.

A step may include identifying a most lagging or most ahead projector based on the calculated frame difference for each of the plurality of devices. A most lagging or most ahead projector may be identified based on the calculated frame difference for each of the plurality of devices. The images projected by each of the projectors attached to the plurality of devices may be synchronized by comparing the calculated frame difference for each of the plurality of devices with the frame number of the reference device. In an exemplary embodiment if each device can see every other device via their cameras then each device can synchronize the video and audio of the other devices by themselves. In an exemplary embodiment if each device can only see adjacent devices a reference device is chosen and synchronization is done with respect to adjacent neighbors of the reference device. Then each of the devices adjacent to the reference device may chose themselves as the reference device and synchronize with devices adjacent to them until all the devices are synchronized.

A step may include calculating a frame difference for each of the plurality of devices based on the difference in frame number from the most lagging or most ahead projector.

A step may include synchronizing the image frames projected by each of the projectors attached to the devices and synchronizing the audio of each of the devices by comparing the calculated frame difference for the each of the devices with the frame number of the reference device.

A step may include stalling or advancing the image frames projected by each of the projectors using the calculated frame difference. Synchronization may be re executed using each of the devices adjacent to the reference device as the reference device. A flag may specify whether a projector has joined a set of projectors. Distributed synchronization may be performed in hierarchical stages between multiple groups of the projectors until all of the projectors in all adjacent groups are synchronized with one another.

In an exemplary embodiment if the projectors project superimposed images a total display space of the area projected by the projectors may be divided into a number of discrete UNLOCKED regions of at least the number of the devices. One of the devices may randomly project a pattern on one of the regions by one of the projectors from one of the devices. The regions other than where the devices have projected may be examined and if a region exists where non overlapping patterns exist a device ID may be decoded to mark these regions LOCKED by the respective devices. The region of the device s own projection may be examined to determine if its own pattern overlaps with the pattern projected by another projector. If the device s own pattern does not overlap a pattern projected by another device the region the device is projecting on may be marked as LOCKED by keeping the pattern ON. If the device s own pattern overlaps a pattern projected by another device another region may be chosen randomly and the device s own pattern may be re projected until all of the devices have locked one region.

It should be understood of course that the foregoing relates to exemplary embodiments of the invention and that modifications may be made without departing from the spirit and scope of the invention as set forth in the following claims.

