---

title: Allowing degraded play of protected content using scalable codecs when key/license is not obtained
abstract: Embodiments are directed towards enabling a portion of a protected content stream to be played in a degraded quality or experience at a client device when a key and/or license for some other portion of the content stream is unobtainable, or is not obtained by the client device. A content stream has a plurality of layers, with a baseline layer having a lowest quality level of the plurality of layers that is unencrypted, while at least one other layer is encrypted. When the key to decrypt the encrypted layer(s) is unobtained, at least the baseline unencrypted layer is allowed to still play at the client device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09003558&OS=09003558&RS=09003558
owner: Google Inc.
number: 09003558
owner_city: Mountain View
owner_country: US
publication_date: 20120719
---
This application is a utility patent application based on previously filed U.S. Provisional Patent Application Ser. No. 61 569 755 filed on Dec. 12 2011 the benefit of which is hereby claimed under 35 U.S.C. 119 e and incorporated herein by reference.

The present embodiments relate generally to managing play of protected digital content and more particularly but not exclusively to allowing access and play of a content stream in a degraded quality or experience when a key or license for at least some of the content stream is not obtainable.

Movies music and other forms of digital content are provided to our computers over the Internet virtually everyday. We receive news education and entertainment as well as many other forms of digital content. For a variety of reasons some of this content is protected. Such protections may take the form of requiring a license that at least identifies various rights to use play copy and or distribute the associated content. Other protections may include various levels or types of encryption protection that may necessitate a key in order to decrypt the content. However for any of a variety of reasons the key and or a license providing access and rights to play the content might be unavailable. The consumer might then be unable to play the content resulting in frustration and possible lose of income to the content provider. It is with respect to these considerations and others that the present invention has been made.

The present embodiments now will be described more fully hereinafter with reference to the accompanying drawings which form a part hereof and which show by way of illustration specific aspects in which the embodiments may be practiced. These embodiments may however take many different forms and should not be construed as limited to the embodiments set forth herein rather these embodiments are provided so that this disclosure will be thorough and complete and will fully convey the scope to those skilled in the art. Among other things the present embodiments may include methods or devices. Accordingly the present embodiments may take the form of entirely hardware or a combination of software and hardware aspects. The following detailed description is therefore not to be taken in a limiting sense.

Throughout the specification and claims the following terms take the meanings explicitly associated herein unless the context clearly dictates otherwise. The phrase in one embodiment as used herein does not necessarily refer to the same embodiment though it may. Furthermore the phrase in another embodiment as used herein does not necessarily refer to a different embodiment although it may. Thus as described below various embodiments of the invention may be readily combined without departing from the scope or spirit of the invention.

In addition as used herein the term or is an inclusive or operator and is equivalent to the term and or unless the context clearly dictates otherwise. The term based on is not exclusive and allows for being based on additional factors not described unless the context clearly dictates otherwise. In addition throughout the specification the meaning of a an and the include plural references. The meaning of in includes in and on. 

As used herein the term content includes any digital data that may be communicated over a network to be remotely played by a computing device. Non exhaustive examples of content include but are not limited to movies videos music spoken word pictures illustrations graphics images text and the like. Content is often described by its format or container in which the content is provided. Thus as used here the term container refers to a data stream or file format which encapsulates audio and visual content. This content often consists of interleaved audio and video data in frames with accompanying metadata such as frame timing information audio and or video configuration information encoding information compression information and the like. Also the container is typically arranged to enable content to be presented for playback at a remotely located network device such as a client device. A container may also be named a systems stream or content stream . A non limiting and non exhaustive list of examples of container system content stream formats are MPEG2 TS Moving Picture Experts Group MPEG transport stream TS flash video FLY MOV a QuickTime file format MP4 3GP and ASF Advanced Systems Form WebM Project file format Matroska multimedia container format or the like. A video encoding format such as H.264 VP8 or the like may be encapsulated in the container. The content may be distributed as a digitally rights managed DRM systems stream of data over a network such as Pay per View PPV Video On Demand VoD live streaming or the like for playback by a remote network device. In one embodiment the content may be protected through a license that describes how where when by whom or so forth content that is protected may be accessed distributed copied or the like. Protected content may be protected using a variety of content protection mechanisms.

As used herein the term streaming digital content refers to digital content constantly received by and prepared for presentation for play at a client device while being delivered by a provider typically over a network such as the Internet. With streaming the client device can start playing the digital content before the entire content stream has been transmitted to received by the client device.

As used herein encryption refers to the process of transforming digital content referred to as plaintext using an algorithm called a cipher to make it unreadable to anyone except those possessing special knowledge usually referred to as a key. Decryption is the process of converting encrypted digital content back into its original form. As used herein unencrypted digital content refers to digital content received in plaintext or is otherwise not encrypted and therefore does not need to be decrypted. It should be understood such plaintext digital content may be received in at least one embodiment in a compressed form or encoded form and still be considered as plaintext for the purposes described herein. Moreover as discussed further below digital content may include portions that are encrypted and other portions that are unencrypted within a same stream of digital content. Further different encrypted portions of the stream of digital content may be encrypted using different encryption keys and or employ different licenses. In one embodiment keys usable for decrypted the differently encrypted digital content may be rotated reused or renegotiated.

As used herein the term quality of content or quality of play of content refers to at least one of a spatial resolution temporal resolution a video feature an audio feature a bit rate or a dimensional feature that affects how the content is played including any one or more of how it is displayed sounds or otherwise is visually and or audibly perceived. For example a spatial feature may include a picture size or scalability feature of the content. That is video components of the content may be coded based on a selected spatial resolution to provide less or more resolution. Similarly a temporal or frame rate quality affects such features as motion compensation dependencies with the content. Changing from a higher level or lower level of quality therefore refers to selecting content having a different either higher or lower level of quality than a currently selected level of quality. For example a higher level of quality might refer to content having a higher level of resolution compared to other content having a lower level of resolution. Resolution is merely an example and is not intended to constrain the usage of the terms quality higher lower level of quality.

The following briefly provides a simplified summary of the subject innovations in order to provide a basic understanding of some aspects. This brief description is not intended as an extensive overview. It is not intended to identify key or critical elements or to delineate or otherwise narrow the scope. Its purpose is merely to present some concepts in a simplified form as a prelude to the more detailed description that is presented later.

Briefly stated subject innovations are directed towards enabling a portion of a protected content stream to be played in a degraded quality or experience at a client device when a key and or license for some other portion of the content stream is unobtainable or is not obtained by the client device.

The key and or license may be unavailable for any of a variety of reasons including but not limited to a failed network component a failed key management device or the like. In other situations for example where the client device might have insufficient battery power and or central processing power or other configuration deficiency it may be determined that decryption and or performing an access request for the key license would be impracticable. In addition for whatever reason it may be beneficial to the content provider or the like that the user of the client device have some level of access to the content. This may be to enable a tiered free to try or freemium type of business model for example. However other business reasons may also be applicable.

Approaches disclosed herein employ a content stream that is composed of a plurality of layers where a baseline layer is unencrypted and has a lowest quality level of the plurality of layers. Possible embodiments of such layered content stream are described in more detail below in conjunction with . Some audio and video compression decompression CODEC specifications include support for scalable or layered modes. For example the MPEG 2 standard defines several profiles that include support for signal to noise ratio SNR and or spatial scalable modes. Another example is the H.264 standard with the Scalable Video Coding extension for temporal spatial and SNR scalability. Using a Scalable CODEC different layers within the plurality of layers that compose the content stream may be used separately and or combined with one or more lower layers by the scalable CODEC to progressively increase a quality of the content for play when keys licenses are available and or a client configuration so allows.

In any event when at least a portion of the content stream is received at the client device at least a baseline layer that is unencrypted may be prepared and played. The baseline layer may be played at a degraded quality or experience level. In this manner because no decryption is needed for at least the baseline layer to play a time to first frame for play may be minimized. A key license request process may be performed while playing the content at the degraded quality. Should the key license be unable to be obtained the degraded quality content might still be able to continue to play. When and if the key license becomes available higher quality layers in the content stream may be decrypted and combined with the lower layers to increase a quality level of the played content. In one embodiment the additional layers may be downloaded after obtaining the key license while in another embodiment they may be obtained before or in parallel to the key license request. In yet another embodiment the higher quality layers may be activated without additional stream downloads.

In one embodiment one or more key rotations may be implemented where a different key might be used to decrypt a later portion of the content stream than might have been used for decrypting of an earlier portion of the content stream. By allowing play of the content at a degraded level of quality or a current level of quality the user may still enjoy the content while the client device requests and employs the different key s licenses. In a similar manner when the user fast forwards or seeks a particular location within the content stream to start re start play the disclosed innovations would allow fast time to start from the sought location by playing the degraded quality layers until any new keys licenses are obtained and used to decrypt access the higher encrypted layers of the plurality of layers in the content stream. The layers may then again be unlocked or otherwise combined to provide a higher quality level of play at the client device.

While the above discloses a content stream comprising a plurality of layers having at least one layer unencrypted at a lowest quality level it should be understood that the plurality of layers may be received by the client device in different ways. For example the plurality of layers may be received bundled together lower layers might be sent at least in part at a higher priority rate than higher layers having higher quality levels and being encrypted or in any of a variety of other combinations.

Moreover while the discussions refer generating to protected content that may be streamed to the client device the innovations are not constrained to streamed content. For example in other embodiments the content may have been downloaded onto the client device and or retrieved from a portable storage device such as an optical disk flash drive or the like and for any of a variety of reasons a decryption key license or the like may be unavailable. This may be due to the client device being offline to a network such that access to a remote network device having key license is unavailable. Similarly the remote network device may be failed offline or otherwise unavailable to the client device. In any case it may still be desirable to allow the client device to play the content. However play of the content although not streamed may be enabled in a degraded quality or experience mode until the key license is available.

One embodiment of client devices is described in more detail below in conjunction with . In one embodiment at least some of client devices may operate over a wired and or a wireless network such networks and . As shown client device may include virtually any computing device capable of communicating over a network to send and receive information including instant messages performing various online activities or the like. The set of such devices may include devices that typically connect using a wired or wireless communications medium such as personal computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs or the like. Also client device may include virtually any device usable as a video display device such as a television display monitor display screen projected screen and the like. Additionally client device may include any kind of Consumer Electronic device e.g. a Blu ray player DVD player CD player portable music playing device portable display projector and the like. Moreover client devices may provide access to various computing applications including a browser or other web based application.

Generally however client devices may include virtually any portable computing device capable of receiving and sending messages over a network accessing and or playing content such as network wireless network or the like. Further client devices may include virtually any portable computing device capable of connecting to another computing device and receiving information such as laptop computer smart phone and tablet computers and the like. However portable computer devices are not so limited and may also include other portable devices such as cellular telephones display pagers radio frequency RF devices infrared IR devices Personal Digital Assistants PDAs handheld computers wearable computers integrated devices combining one or more of the preceding devices and the like. As such client devices typically range widely in terms of capabilities and features.

A web enabled client device may include a browser application that is configured to receive and to send web pages web based messages and the like. The browser application may be configured to receive and display graphics text multimedia media content and the like employing virtually any Internet based and or network based protocol including but not limited to a wireless application protocol messages WAP Hypertext Transfer Protocol HTTP or the like. In one embodiment the browser application is enabled to employ Handheld Device Markup Language HDML Wireless Markup Language WML WMLScript JavaScript Standard Generalized Markup Language SGML HyperText Markup Audio Language HTML eXtensible Markup Language XML and the like to display and send a message. In one embodiment a user of a client device may employ the browser application to perform various activities over a network online . However another application may also be used to perform various online activities.

Client devices also may include at least one other client application that is configured to receive and or send content between another computing device. The client application may include a capability to send and or receive content or the like. The client application may further provide information that identifies itself including a type capability name and the like. In one embodiment client devices may identify themselves as part of a class of devices. In another embodiment client devices may uniquely identify themselves through any of a variety of mechanisms including a phone number Mobile Identification Number MIN an electronic serial number ESN Internet Protocol IP Address network address or other mobile device identifier. The information may also indicate a content format that the mobile device is enabled to employ. Such information may be provided in a network packet or the like sent between other client devices CPD or other computing devices. Moreover it should be readily understood that devices and or components within a device that is communicating with a client device may also identify themselves using any of a variety of mechanisms including those used by the client device.

Client devices may further be configured to include a client application that enables an end user to log into an end user account that may be managed by another computing device such as CPD or the like. Such end user account in one non limiting example may be configured to enable the end user to manage one or more online activities including in one non limiting example search activities social networking activities browse various websites communicate with other users or the like. In one embodiment the end user s client device may receive content streamed to the client device for play at the client device. However participation in online activities may also be performed without logging into the end user account.

Wireless network is configured to couple client devices and its components with network . Wireless network may include any of a variety of wireless sub networks that may further overlay stand alone ad hoc networks and the like to provide an infrastructure oriented connection for client devices . Such sub networks may include mesh networks Wireless LAN WLAN networks cellular networks and the like. In one embodiment the system may include more than one wireless network.

Wireless network may further include an autonomous system of terminals gateways routers and the like connected by wireless radio links and the like. These connectors may be configured to move freely and randomly and organize themselves arbitrarily such that the topology of wireless network may change rapidly.

Wireless network may further employ a plurality of access technologies including 2nd 2G 3rd 3G 4th 4G generation radio access for cellular systems WLAN Wireless Router WR mesh and the like. Access technologies such as 2G 3G 4G and future access networks may enable wide area coverage for mobile devices such as client devices with various degrees of mobility. In one non limiting example wireless network may enable a radio connection through a radio network access such as Global System for Mobil communication GSM General Packet Radio Services GPRS Enhanced Data GSM Environment EDGE Wideband Code Division Multiple Access WCDMA and the like. In essence wireless network may include virtually any wireless communication mechanism by which information may travel between client devices and another computing device network and the like.

Network is configured to couple network devices with other computing devices including CPD and through wireless network to client devices . Network is enabled to employ any form of network mechanism for communicating information from one electronic device to another. Also network can include the Internet in addition to LANs WANs direct connections such as through a universal serial bus USB port other forms of network mechanism or any combination thereof. On an interconnected set of LANs including those based on differing architectures and protocols a router acts as a link between LANs enabling messages to be sent from one to another. In addition communication links within LANs typically include twisted wire pair or coaxial cable while communication links between networks may utilize analog telephone lines full or fractional dedicated digital lines including T1 T2 T3 and T4 and or other carrier mechanisms including for example E carriers Integrated Services Digital Networks ISDNs Digital Subscriber Lines DSLs wireless links including satellite links or other communications links known to those skilled in the art. Moreover communication links may further employ any of a variety of digital signaling technologies including without limit for example DS 0 DS 1 DS 2 DS 3 DS 4 OC 3 OC 12 OC 48 or the like. Furthermore remote computers and other related electronic devices could be remotely connected to either LANs or WANs via a modem and temporary telephone link. In one embodiment network may be configured to transport information of an Internet Protocol IP . In essence network includes any communication method by which information may travel between computing devices.

Additionally network mechanisms by way of example network mechanisms include wired media such as twisted pair coaxial cable fiber optics wave guides and other wired media and wireless media such as acoustic RF infrared and other wireless media.

One embodiment of CPD is described in more detail below in conjunction with . Briefly however CPD includes virtually any network device usable to operate as a content server to connect to network to provide content to client devices . In some embodiments CPD may provide a content stream of digital content to a client device. In one embodiment the content stream may comprise a plurality of layers. In one embodiment at least some layers of the content stream may be encrypted while at least some other layers may be unencrypted. In one embodiment the unencrypted layer s may be encoded at a lower quality level a lower resolution or even a lower bit rate than other layers in the content stream. In another embodiment CPD may provide a plurality of layers using a scalable video coding approach. In one embodiment CPD may employ an Annex G extension of the H.264 MPEG 4 AVC video compression standard or the like. In one embodiment different layers within the plurality of layers may be encoded with differing levels of complexity and then later be combined to provide different levels of quality of playable content such as is described in more detail below in conjunction with . Similarly encryption may be performed using varying levels of complexity.

It should be readily recognized that CPD is configured to operate on behalf of a content owner distributor or similar business entity. However while used herein to represent such network devices usable to provide content it is further recognized that other devices may also be employed. For example a content provider may employ a Content Distribution Network Device not shown that operates on behalf of the content provider to provide content. Thus other configurations and variations of devices serving content are also envisaged and other embodiments are not constrained to a single configuration arrangement of devices.

Devices that may operate as CPD include various network devices including but not limited to personal computers desktop computers multiprocessor systems microprocessor based or programmable consumer electronics network PCs server devices network appliances and the like.

Although illustrates CPD as a single computing device the invention is not so limited. For example one or more functions of CPD may be distributed across one or more distinct network devices. Moreover CPD is not limited to a particular configuration. Thus in one embodiment CPD may contain a plurality of network devices to provide content licenses and or decryption keys to a client device such as client devices . Similarly in another embodiment CPD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices of CPD operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the CPD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

In one embodiment CPD may also be configured to manage license requests and or access to decryption keys usable to decrypt portions of the encrypted digital content by a client device for play based on the license.

It should be noted that the encrypted content may be encrypted using any of a variety of symmetric and or asymmetric key technologies. For example possible asymmetric keys technologies include but are not limited to Diffie Hellman RSA Merkle Hellman PGP X.509 elliptic curve techniques EIGamal or the like. Similarly various possible symmetric key technologies include but are not limited to Twofish Serpent AES Rijndael Blowfish CAST5 RC4 3DES and IDEA to name just a few. Moreover the content may be protected using a combination of symmetric and asymmetric key technologies. For example a symmetric content decryption key might be used to encrypt decrypt the content and an asymmetric key technology might be used to encrypt decrypt the content decryption key.

KMD represents one of a variety of network devices for managing access to symmetric and or asymmetric keys. In one embodiment KMD may operate to certify an ownership of a public key named within a digital certificate that provides a public key where the public key is part of a public private key associated with any of a variety of asymmetric key technologies. This allows others such as CPD or the like to rely upon signatures or assertions made by the owner that corresponds to the public key that is certified. In one embodiment KMD may then operate as a trusted third party. Thus in one embodiment KMD may operate as a Certification Authority such as employed by many public key infrastructures PKI schemes. Further KMD may also provide Certificate Revocation Lists CRLs indicating when a public key certificate is no longer valid and might no longer be trusted trustable.

In one embodiment KMD may receive a public key from a content provider or the like and based on various criteria elect to make accessible the public key through a certificate that KMD digitally signs. In one embodiment access to the public key may enable an authorized client device to decrypt a content key that may then be used to decrypt at least a portion of the encrypted content.

In one embodiment KMD or CPD might operate to negotiate a license and or access to a key with client devices . In one embodiment different content decryption keys might be used to encrypt different portions of a provided content. Thus in one embodiment multiple key negotiations may be performed for a given at least one content stream.

It should be understood that while KMD is illustrated as a separate device from CPD in other embodiments the functions of these devices may be integrated.

Although illustrates KMD as single computing devices the invention is not so limited. For example one or more functions of KMD may be distributed across one or more distinct network devices. Moreover KMD is not limited to a particular configuration. Thus in one embodiment KMD may contain a plurality of network devices. Similarly in another embodiment KMD may contain a plurality of network devices that operate using a master slave approach where one of the plurality of network devices operates to manage and or otherwise coordinate operations of the other network devices. In other embodiments the KMD may operate as a plurality of network devices within a cluster architecture a peer to peer architecture and or even within a cloud architecture. Thus the invention is not to be construed as being limited to a single environment and other configurations and architectures are also envisaged.

As shown in the figure client device includes a central processing unit CPU in communication with a mass memory via a bus . Client device also includes a power supply one or more network interfaces an audio interface a display a keypad an illuminator a video interface an input output interface a haptic interface and a global positioning systems GPS receiver .

Power supply provides power to client device . A rechargeable or non rechargeable battery may be used to provide power. The power may also be provided by an external power source such as an alternating current AC adapter or a powered docking cradle that supplements and or recharges a battery.

Client device may optionally communicate with a base station not shown or directly with another computing device. Network interface includes circuitry for coupling client device to one or more networks and is constructed for use with one or more communication protocols and technologies including but not limited to GSM code division multiple access CDMA time division multiple access TDMA user datagram protocol UDP transmission control protocol Internet protocol TCP IP Short Message Service SMS GPRS WAP ultra wide band UWB Institute of Electrical and Electronics Engineers IEEE 802.16 Worldwide Interoperability for Microwave Access WiMax session initiated protocol real time transport protocol SIP RTP or any of a variety of other wired and or wireless communication protocols. Network interface is sometimes known as a transceiver transceiving device or network interface card NIC .

Audio interface is arranged to produce and receive audio signals such as the sound of a human voice. For example audio interface may be coupled to a speaker and microphone not shown to enable telecommunication with others and or generate an audio acknowledgement for some action.

Display may be an LCD gas plasma light emitting diode LED or any other type of display used with a computing device. Display may also include a touch sensitive screen arranged to receive input from an object such as a stylus or a digit from a human hand.

Moreover display may be configured to employ any of a variety of network connection types including but not limited to High Bandwidth Digital Content Protection HDCP connection types Display Port DP Digital Visual Interface DVI and High Definition Multimedia Interface HDMI as well as Gigabit Video Interface GVIF Standard definition SD Unified Display Interface UDI WiDi. At least some of these network connection types provide a form of digital copy protection. A detection of whether display is connected through one of these or other types of network connection types may be determined using a variety of techniques including signature transmissions protocol handshakes authentication procedures or the like. Changing usage of a network connection type may indicate a change in a level of trust of at least one component of client device and therefore might indicate a configuration change to the client device .

Keypad may comprise any input device arranged to receive input from a user. For example keypad may include a push button numeric dial or a keyboard. Keypad may also include command buttons that are associated with selecting and sending images.

Illuminator may provide a status indication and or provide light. Illuminator may remain active for specific periods of time or in response to events. For example when illuminator is active it may backlight the buttons on keypad and stay on while the client device is powered. Also illuminator may backlight these buttons in various patterns when particular actions are performed such as dialing another client device. Illuminator may also cause light sources positioned within a transparent or translucent case of the client device to illuminate in response to actions.

Video interface is arranged to capture video images such as a still photo a video segment an infrared video or the like. For example video interface may be coupled to a digital video camera a web camera or the like. Video interface may comprise a lens an image sensor and other electronics. Image sensors may include a complementary metal oxide semiconductor CMOS integrated circuit charge coupled device CCD or any other integrated circuit for sensing light.

Client device also comprises input output interface for communicating with external devices such as a headset or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like. Haptic interface is arranged to provide tactile feedback to a user of the client device. For example the haptic interface may be employed to vibrate client device in a particular way when another user of a computing device is calling.

GPS transceiver can determine the physical coordinates of client device on the surface of the Earth. GPS transceiver in some embodiments may be optional. GPS transceiver typically outputs a location as latitude and longitude values. However GPS transceiver can also employ other geo positioning mechanisms including but not limited to triangulation assisted GPS AGPS Enhanced Observed Time Difference E OTD Cell Identifier CI Service Area Identifier SAI Enhanced Timing Advance ETA Base Station Subsystem BSS or the like to further determine the physical location of client device on the surface of the Earth. It is understood that under different conditions GPS transceiver can determine a physical location within millimeters for client device and in other cases the determined physical location may be less precise such as within a meter or significantly greater distances. In one embodiment however mobile device may through other components provide other information that may be employed to determine a physical location of the device including for example a Media Access Control MAC address IP address or the like.

Mass memory includes a Random Access Memory RAM a Read only Memory ROM and other storage means. Mass memory illustrates an example of computer readable storage media devices for storage of information such as computer readable instructions data structures program modules or other data. Mass memory stores a basic input output system BIOS for controlling low level operation of client device . The mass memory also stores an operating system for controlling the operation of client device . It will be appreciated that this component may include a general purpose operating system such as a version of UNIX or LINUX or a specialized client communication operating system such as Windows Mobile or the Symbian operating system. The operating system may include or interface with a Java virtual machine module that enables control of hardware components and or operating system operations via Java application programs.

Mass memory further includes one or more data storage which can be utilized by client device to store among other things applications and or other data. For example data storage may also be employed to store information that describes various capabilities of client device . The information may then be provided to another device based on any of a variety of events including being sent as part of a header during a communication sent upon request or the like. Data storage may also be employed to store social networking information including address books buddy lists aliases user profile information or the like. Further data storage may also store messages web page content or any of a variety of user generated content. At least a portion of the information may also be stored on another component of network device including but not limited to computer readable storage device a disk drive or other computer readable storage device not shown within client device .

In some embodiments data storage may act as a buffer for content received from CPD of . As noted above it is recognized that providing of such content may also be performed by another device on behalf of CPD of .

Applications may include computer executable instructions which when executed by client device transmit receive and or otherwise process messages e.g. SMS Multimedia Message Service MMS instant messages IM email and or other messages audio video and enable telecommunication with another user of another client device. Other examples of application programs include calendars search programs email clients IM applications SMS applications voice over Internet Protocol VoIP applications contact managers task managers transcoders database programs word processing programs security applications spreadsheet programs games search programs and so forth. Applications may include for example browser media player Content Selection Module and Scalable Coder Decoder CODEC also sometimes referred to as Compressor Decompressor .

Browser may include virtually any application configured to receive and display graphics text multimedia and the like employing virtually any web based protocol. In one embodiment the browser application is enabled to employ HDML WML WMLScript JavaScript SGML HTML XML and the like to display and send a message. However any of a variety of other web based programming languages may be employed. In one embodiment browser may enable a user of client device to provide and or receive content from another computing device such as CPD of . Although browser is described herein it should be noted that there are a plurality of other applications that may operate as a user agent configured to request and or access content. Thus other user agents may also be included within client device .

Media player represents any of a variety of software and or hardware configurations arranged to receive and play various content. As such in one embodiment media player may also represent a hardware component that might be installed within client device and or coupled electrically to client device to enable client device to access and play content.

CSM represents any of a variety of software and or hardware configurations arranged to receive a stream of digital content where the received at least one stream of content has a plurality of different layers having one or more different levels of defined quality of content. CSM may receive information about a detected configuration of client device from one or more components of client device . For example the operating system and or application programming interfaces APIs hardware components or the like may provide a configuration to CSM . Then using the configuration information CSM selects a level of defined quality of the content for play. In one embodiment CSM may further negotiate one or more licenses and or decryption keys usable to decrypt and enable play of the stream of content at the determined level of quality. In one embodiment some of the received at least one stream of content may be unencrypted. In any event CSM may include one or more rules criteria or the like indicating that at least a lowest level of quality of the content stream might be prepared and enabled for play even when a decryption key s license s are currently unobtainable. In this manner a user may still be allowed to access and play at least a portion of the content stream. When if a key license is made available the one or more encrypted layers may then be decrypted and sent to scalable CODEC to be combined and sent to media player for play.

In one embodiment while CSM is described as enforcing licenses another component entity application hardware component of the like may perform such actions instead. Thus the configuration of is not to be construed as limiting embodiments of the innovation. In any event CSM may provide some of the content to media player for play. In one embodiment media player might receive some of the content in a coded or compressed form. Media player may then employ scalable CODEC to decode and or decompress the received portion of content stream such that the content is readied for play virtually as soon as it is received. CSM may employ a process such as disclosed below in conjunction with to perform at least some of its actions.

Scalable CODEC includes any of a variety of compression decompression mechanisms configured to receive compressed content and decompress the content into a format capable of being rendered for the user s enjoyment. For example scalable CODEC may employ Moving Pictures Experts Group MPEG Joint Photographic Experts Group JPEG wavelets and or any other mechanism that compresses content that may later be decompressed. Further although scalable CODEC may include capabilities for graphical content scalable CODEC may also be configured to receive audio content and as appropriate prepare the audio content for play by a media player as well. Thus scalable CODEC may not be exclusive for graphical content and may also operate on audio graphical content and or content having a combination of audio and graphical information.

In one embodiment scalable CODEC may also be configured to receive scalable video coding content that is encoded in a plurality of layers. In one embodiment the layers of video bitstreams may be derived by dropping packets from a larger video to reduce a bandwidth for one of the layered bitstreams. The layers described further below in conjunction with may represent a lower spatial resolution smaller screen lower temporal resolution lower frame rate lower quality less data e.g. at a same resolution or the like. Scalable CODEC may receive various layers including a baseline profile layer and one or more higher quality profile layers. Scalable CODEC may then combine the layers to produce for play a single stream of content that has a level of quality at the highest layer employed in the combination.

Network device includes central processing unit computer readable storage device network interface unit an input output interface hard disk drive video display adapter and a mass memory all in communication with each other via bus . The mass memory generally includes RAM ROM and one or more permanent non transitory mass storage devices such as hard disk drive tape drive optical drive and or floppy disk drive. The mass memory stores operating system for controlling the operation of network device . Any general purpose operating system may be employed. BIOS is also provided for controlling the low level operation of network device . As illustrated in network device also can communicate with the Internet or some other communications network via network interface unit which is constructed for use with various communication protocols including the TCP IP protocol. Network interface unit is sometimes known as a transceiver transceiving device or network interface card NIC .

Network device also comprises input output interface for communicating with external devices such as a keyboard or other input or output devices not shown in . Input output interface can utilize one or more communication technologies such as USB infrared Bluetooth or the like.

The mass memory as described above illustrates another type of computer readable media namely computer readable storage media and or processor readable storage media. Computer readable storage media devices may include volatile nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions data structures program modules or other data. Examples of computer readable storage media include RAM ROM Electrically Erasable Programmable Read only Memory EEPROM flash memory or other memory technology Compact Disc Read only Memory CD ROM digital versatile disks DVD or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other physical media which can be used to store the desired information and which can be accessed by a computing device.

As shown data storage may include a database text spreadsheet folder file or the like that may be configured to maintain and store user account identifiers user profiles email addresses IM addresses and or other network addresses or the like. Data storage may further include program code data algorithms and the like for use by a processor such as central processing unit to execute and perform actions. In one embodiment at least some of data storage might also be stored on another component of network device including but not limited to computer readable storage device hard disk drive or the like.

Data storage may further store streams of protected content . Streams of protected content represent any of a variety of content that may be protected from access using a license encryption and or the like. In some embodiments streams of protected content may include a plurality of available versions of content. In one embodiment the available versions may include one or more video tracks and or one or more one or more audio tracks. In some embodiments each video track may be in a different video quality or the like. In other embodiments each audio track may be in a different audio quality or the like. Various non limiting non exhaustive examples of streams of protected content are described in more detail below in conjunction with .

The mass memory also stores program code and data. One or more applications are loaded into mass memory and run on operating system . Examples of application programs may include transcoders schedulers calendars database programs word processing programs Hypertext Transfer Protocol HTTP programs customizable user interface programs IPSec applications encryption programs security programs SMS message servers IM message servers email servers account managers and so forth. Web server key manager and content delivery server may also be included as application programs within applications .

Web server represent any of a variety of services that are configured to provide content including messages over a network to another computing device. Thus web server includes for example a web server an FTP server a database server a content server or the like. Web server may provide the content including messages over the network using any of a variety of formats including but not limited to WAP HDML WML SGML HTML XML Compact HTML cHTML Extensible HTML xHTML or the like. Web Server may also be configured to enable a user of a client device such as client devices of to browse content such as streams of protected content and select content for display play on the client device.

Key manager is configured to manage negotiations of decryption keys and or licenses for content streams. In one embodiment key manager may provide decryption keys and or licenses to KMD of . In other embodiments key manager may perform negotiations directly with a client device. In one embodiment key manager may select one or more content decryption keys for use in encrypting different portions of a content stream.

Key manager may also be configured to revoke a license and or invalidate one or more decryption keys based for example on an unauthorized request for a license key or even based on receiving an indication that an integrity of a requesting client device is determined to be compromised.

Content Delivery Server CDS is configured to manage access to streams of protected content . In one embodiment the content may be protected through a license or licenses. In another embodiment the content may be protected by being encrypted. In one embodiment one portion of content may be encrypted using a first content encryption key while another portion of the content may be encrypted using a second content encryption key. Thus to decrypt the protected content a user s client device may need access to a license that indicates how where and or when the protected content may be accessed. The user s client device may also need access to one or more decryption keys usable to decrypt various portions of the protected content. In one embodiment where multiple encryption keys are used to encrypt the content a key rotation scheme may be employed where the client device is provided an indication that the content is encrypted using a different key and that the client device will have to use the different key. However in another embodiment the content may be protected by a license s and not be encrypted using encryption key s .

Moreover in at least one embodiment network device may be configured to provide to a client device such as shown in a content selection module CSM and or a scalable CODEC . For example during an initial registration with a content provider device such as CPD of or the like network device may provide for download or any other form of access CSM and or other components. The receiving client device may then install for execution such components for use with various embodiments described herein.

The operation of certain aspects of various embodiments will now be described with respect to . illustrates non limiting non exhaustive examples of a possible embodiment of a stream of content having layers. It should be understood that the provided stream of content is merely an example and that the innovations described herein are not constrained by this example. The example content shown however is sufficient to disclose an illustrative embodiment for practicing the innovation.

As discussed above the content stream may include one or more layers having one or more different types of scalability including but not limited to temporal spatial SNR and even dimensionality color differences or the like.

Generally temporal scalability may refer to content that is coded at multiple frame rates video or sampling rates audio . For example a base layer may provide video encoded at 7.5 frames per second FPS video while enhancement or higher layers can be added to improve the frame rate to 15 FPS and 30 FPS. For example a bitstream baseline layer might be encrypted with B frames or VP6 VP8 frames such that one might be able to view unencrypted lower layers at one frame per second but with a proper license key might be able to obtain a full 30 FPS. Spatial scalability may include video that is coded at multiple spatial resolutions. For example a base layer may provide video encoded at a resolution of 320 by 240 while multiple enhancement or higher layers may increase the resolution to 640 by 480 and 800 by 600. SNR scalability may refer to content that is coded at multiple degrees of fidelity or clarity. For example a base layer may provide audio encoded at 8 bits per sample while enhancement layers increase the bit depth to 16 and 24 bits per sample. Similarly dimensionality may refer to layers that are encoded to provide different dimensions of viewing. For example a base layer may provide 2 dimensional images while combined with higher or multiple enhancement or higher layers three dimensional viewing may be obtained. Color differences refer generally to providing enhanced coloring to video. For example one or more baseline or lower layers might provide for gray or black white video images while higher layers might enable more coloring brightness contrast or the like to the video image.

Other types of variations may also exist. For example video frames might be encrypted without iFrames for lower layers such as a baseline layer and for higher layers intra frames may be selectively added. In another example intra macro blocks might be encrypted in the higher layers. In another example lower layers might be unencrypted and provide standard definition SD quality while higher encrypted layers provide high definition HD quality or better. Similarly lower layers might have colors skewed slightly to enable degraded viewing a blur filter might have been applied to the lower layers and not to the encrypted higher level quality layers. Similarly audio might be corrupted to a degraded but tolerable level in the baseline layers and higher quality audio provided with higher encrypted layers. It should be clear that the above are merely examples of various mechanisms useable for varying a quality level of the layers of the content stream and the innovation is not limited to these examples.

Moreover it should be recognized that one or more combinations of the above or other mechanisms may be used to vary a level of quality of the layers of the content stream.

In any event as shown in content stream may comprise a plurality of layers . As shown one or more layers and may be unencrypted while other layers shown here as layers may be encrypted using one or more encryption keys. Layer may be herein termed a baseline layer having a lowest quality level of layers in content stream . Often baseline layer may be configured to be a valid bitstream that may be playable by itself. Thus as discussed herein layer may be received and being unencrypted prepared for play within a minimum time to a first frame. However playing of the baseline layer would occur at a degraded quality level using one or more mechanisms such as described above. Based on various configurations of the client device it might be determined that a slightly improved level of quality might be allowed for play. Thus in one embodiment multiple unencrypted layers might be obtained and combined for play such as layers . When and if a key license is obtained higher layers in the plurality of layers may be decrypted and combined and or prepared for play to provide higher levels of quality. Should a key license not be obtained for any reason the client device might still be permitted to play the lower quality lower layers and or .

It is noted however that while the above discloses encrypting a stream having a plurality of layers in another embodiment the higher quality layers may be provided using other mechanisms instead of being directly encrypted. For example in one embodiment the higher quality layers such as layers might be provided unencrypted but restricted from being accessed improperly using Hypertext Transfer Protocol Secure HTTPS to wrap or encrypt the network transfer of the layers. Similarly other mechanisms might also be used to protect the transfer of the layers to the client device such as using time limited uniform resource locator URL where a content provider might elect to respect a URL for a limited amount of time. It should also be noted that while layers appear to indicate that the restricted access information might be a full layer other embodiments might be otherwise. For example in some embodiments a seed might be used to increase a quality of the content.

As shown layers and indicate various points that represent key rotation points . Such points may coincide in one embodiment with defined seek locations. However in other embodiment such key rotation points might be based on other criteria. In any event content in a layer prior to a key rotation point is encrypted using a different key license that content in the layer after the key rotation point. Thus to continue play of the layer of content after a key rotation point the client device will need to access the proper new key license. In one embodiment various layers may have key rotation points that coincide such as key rotation points and . However in another embodiment a key rotation point such as key rotation point might apply to one layer and not another layer . Thus in this example layer might continue to be decrypted and played using a key already obtained although layer might cease to play. In this manner the client device might degrade play quality of the content using layers until the key for layer associated with key rotation point is obtained if at all.

Process may be understood to begin after a start block at block . In one embodiment a user of a client device may have selected a content stream for play at the client device using any of a variety of mechanisms including but not limited to an application a web page interface a media player interface or the like. In any event in one embodiment the client device may receive one or more layers of the content stream as described above where at least one layer of the content stream is unencrypted and is configured at a lower level of quality of content than another layer of the layers of the content stream.

Proceeding to block a quality level to play the received content stream is determined. In one embodiment the determination may be based on a policy and a configuration of the client device. For example in one embodiment the configuration might be based on whether the client device is using its own power supply rather than being plugged into an external power source or has what might be determined to be a slow processor or low level of decryption capability a small low resolution screen minimal security level components activated or the like. Thus in one embodiment a configuration of the client device might be used to initially determine a level of quality usable to play the content. However in another embodiment the policy might be that a highest level of unencrypted content s quality level is selected independent of a client configuration. Thus a variety of criteria might be used to determine a level of quality for play.

Moving to block the unencrypted layers of the content stream may be combined or otherwise used singularly to prepare content at a determined quality level. For example in one embodiment it might be determined that a highest level of quality obtainable without performing decryption might be used based on the received layer s of the content stream. In for example that might include combining layers . However in another embodiment the lowest or baseline layer of unencrypted content might be prepared for play. In one embodiment preparing the content layer s may include but is not limited to decompressing decoding the layer s and as appropriate combining the layers. Preparation might be performed in one embodiment using a scalable CODEC. Process then proceeds to block where the prepared content may be played by the client device. In one embodiment as discussed above the initial playing of the content might be considered at a degraded level of quality using unencrypted content to enable a minimum amount of time to receive and play the first frame of the content including a first frame after a seek is performed.

Processing continues to decision block where a determination is made whether a key license is needed for higher layers of the content where a higher quality layer is available or based on a result of a key license rotation and or a key rotation event. If not then processing flows to decision block otherwise processing flows to decision block .

At decision block a determination is made whether the required key license for the higher layer s of content is acquired. In one embodiment if a key license is required a request may be made to acquire the key license. However for any of a variety of reasons the required key license might not be obtained or is otherwise unobtainable. For example the client device may be offline a KMD such as KMD of might be offline or otherwise unavailable. However other reasons may result in the client device being unable to obtain the required key license. In any event if the license key is not acquired processing flows to block otherwise processing flows to block .

At block in one embodiment the currently playing level of quality might be selectively revised. For example looking at content stream of playing of the content stream might be at a first key rotation point such as key rotation point . At this point a new key might be needed to continue to play at the level of quality obtainable by layers . Thus the quality level might be degraded to what is obtainable using layers . In another example the content might be at key rotation point allowing a degraded play using layers up to layer and degrading from play of up to layer . Similarly where no key is obtained yet play might currently be using up to layer and no change in the quality level might arise and layers up to layer might continue to be played.

In any event the content stream may be prepared for play based on selectively revising the quality level of the content at block of . Moving to block the prepared content stream using the selectively revised quality level is played. Processing loops back to decision block . However in one embodiment where a key is unneeded for another layer of content processing may instead flow to decision block .

At block it is determined that the license key is acquired and the quality level may be selectively increased from what is currently playing. In one embodiment the key license might allow the client device to continue to decrypt prepare and play the layers of the content stream at a current quality level. However in another embodiment acquisition of the key license may enable an increased level of quality of the content stream to be obtained by decrypting and combining various layers in the content stream. In any event processing flows to block where the layers are decrypted combined and prepared for play at the selectively increased quality level. Moving to block the prepared content is played. In one embodiment when transitioning between different quality levels the transition may be coordinated with a currently playing frame to minimize perceivable transitions. Processing then flows to decision block .

At decision block a determination is made whether to continue to play the content. If so then processing loops back to block otherwise processing flows to block where the play of the content is terminated. Processing then returns to a calling process.

It will be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by computer program instructions. These program instructions may be provided to a processor to produce a machine such that the instructions which execute on the processor create means for implementing the actions specified in the flowchart block or blocks. The computer program instructions may be executed by a processor to cause a series of operational steps to be performed by the processor to produce a computer implemented process such that the instructions which execute on the processor to provide steps for implementing the actions specified in the flowchart block or blocks. The computer program instructions may also cause at least some of the operational steps shown in the blocks of the flowchart to be performed in parallel. Moreover some of the steps may also be performed across more than one processor such as might arise in a multi processor computer system a cloud system a multi server system or the like. In addition one or more blocks or combinations of blocks in the flowchart illustration may also be performed concurrently with other blocks or combinations of blocks or even in a different sequence than illustrated without departing from the scope or spirit of the invention.

Accordingly blocks of the flowchart illustration support combinations of means for performing the specified actions combinations of steps for performing the specified actions and program instruction means for performing the specified actions. It will also be understood that each block of the flowchart illustration and combinations of blocks in the flowchart illustration can be implemented by special purpose hardware based systems which perform the specified actions or steps or combinations of special purpose hardware and computer instructions.

The above specification examples and data provide a complete description of the manufacture and use of the composition of the invention. Since many embodiments of the invention can be made without departing from the spirit and scope of the invention the invention resides in the claims hereinafter appended.

