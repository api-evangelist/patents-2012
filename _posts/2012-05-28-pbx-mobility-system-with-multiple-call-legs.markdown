---

title: PBX mobility system with multiple call legs
abstract: A private branch exchange (PBX) mobility system and associated method for re-using of call legs in an enterprise system. The enterprise system includes a session management platform (SMP) having a private branch exchange (PBX) mobility enabler, the PBX mobility enabler having third-party control communications to one or more PBXs over a session control interface, such as a Session Initiation Protocol (SIP) interface. The PBXs are in communication with one or more media servers. The PBX mobility enabler is configured to provide control communications to the PBXs over the session control interfaces to re-use a wireless call leg and connect to other call legs.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08559960&OS=08559960&RS=08559960
owner: Blackberry Limited
number: 08559960
owner_city: Waterloo
owner_country: CA
publication_date: 20120528
---
This application is a continuation of U.S. patent application Ser. No. 12 393 334 filed Feb. 26 2009 hereby incorporated by reference in its entirety.

The present application relates to enterprise systems and in particular to private branch exchange PBX mobility systems having multiple call legs.

Enterprise systems generally refer to systems typically associated with a company or enterprise which handle the control and communications between wireless cellular phone data and Internet. Private Branch eXchange PBX Mobility is a specific implementation of Fixed Mobile Convergence FMC which assists wireless device users in extending an enterprise line e.g. present on users desk phones to the users wireless devices. This allows the users to be accessible over their enterprise line even when they are not near their desk phones.

In some wireless cellular systems in order to place a call on hold and establish a second call the same network resource e.g. allocated channel is used. However the second call requires establishment of a second call leg over that same network resource.

There are some conventional FMC systems which provide for connection of calls. In order to do so a second cellular call is initiated to by the wireless cellular device. Placing a second cellular call to from the wireless device is more expensive up to twice the cost in either network usage or monetary dollars and hence not preferred. Additionally having the calls active on two different cellular calls to the wireless device presents difficulty to the user in merging the calls into an impromptu ad hoc conference.

Another difficulty with some conventional systems is that the FMC server may also be responsible for media handling i.e. for exchanging media information between the multiple devices . This may require complexity in configuration as well as additional communication control interfaces at the FMC server. Further it may be difficult to provide scalability to such systems.

In an example embodiment there is generally provided a session management platform SMP which re uses at least part of an existing cellular call leg to a mobile device to establish a second call to a second destination. The SMP provides multiple logical enterprise lines over a wireless interface to the mobile device.

In another aspect there is provided a method for re using of call legs in an enterprise system the enterprise system including a session management platform SMP having control communications to one or more private branch exchanges PBXs using third party call control over a session control interface to each PBX the PBXs being in communication with one or more media servers the method being implemented by control communications from the SMP to the PBXs over the session control interface. The method includes creating a first call leg to a wireless device over a wireless network wherein media terminates on one of the media servers and call control signaling terminates on the SMP creating a second call leg to a first destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and second call leg together thereby establishing a first call session and creating a third call leg to a second destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and third call leg together thereby establishing a second call session.

In yet another aspect there is provided a session management platform SMP for re using of call legs. The SMP includes a private branch exchange PBX mobility enabler having control communications to one or more private branch exchanges PBXs using third party call control over a session control interface to each PBX the PBXs being in communication with one or more media servers. The PBX mobility enabler is configured to provide control communications to the PBXs over the session control interface to create a first call leg to a wireless device over a wireless network wherein media terminates on one of the media servers and call control signaling terminates on the SMP create a second call leg to a first destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and second call leg together thereby establishing a first call session and create a third call leg to a second destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and third call leg together thereby establishing a second call session.

In yet another aspect there is provided an enterprise system for re using of call legs including one or more media servers one or more private branch exchanges PBXs in communication with the media servers a session management platform SMP having control communications to each of the PBXs over a session control interface. The SMP is configured to provide control communications to the PBXs over the session control interface to create a first call leg to a wireless device over a wireless network wherein media terminates on one of the media servers and call control signaling terminates on the SMP create a second call leg to a first destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and second call leg together thereby establishing a first call session and create a third call leg to a second destination wherein media terminates on one of the media servers and call control signaling terminates on the SMP the SMP utilizing third party call control of the media servers to connect the respective media of the first call leg and third call leg together thereby establishing a second call session.

Other aspects and examples will be apparent to those of ordinary skill in the art from a review of the following detailed description in conjunction with the drawings.

Present example embodiments are not limited to any particular operating system mobile device architecture server architecture or computer programming language.

Example embodiments relates to the control and management of communications made across multiple call legs. Although reference may be made to calls in the description of example embodiments below it will be appreciated that the described systems and methods are applicable to session based communications in general and not limited to voice calls. Reference to calls may for example include voice calls as well as media sessions which may for example include video and or audio. It will also be appreciated that the systems and methods may not be limited to sessions and may be applicable to messaging based communications in some embodiments. Reference to media herein may be understood by those skilled in the art to include a media session.

Reference is now made to which shows in block diagram form an example system generally designated for the control and management of communications. The system includes an enterprise or business system which in many embodiments includes a local area network LAN . In the description below the enterprise or business system may be referred to as an enterprise network . It will be appreciated that the enterprise network may include more than one network and may be located in multiple geographic areas in some embodiments.

The enterprise network may be connected often through a firewall to a wide area network WAN such as the Internet. The enterprise network may also be connected to a public switched telephone network PSTN via direct inward dialing DID trunks or primary rate interface PRI trunks.

The enterprise network may also communicate with a public land mobile network PLMN which may also be referred to as a wireless wide area network WWAN or in some cases a cellular network. The connection with the PLMN may be made via a relay as known in the art.

The enterprise network may also provide a wireless local area network WLAN featuring wireless access points. Other WLANs may exist outside the enterprise network . For example WLAN may be connected to WAN .

The system may include a number of enterprise associated mobile devices only one shown . The mobile devices may include devices equipped for cellular communication through the PLMN mobile devices equipped for Wi Fi communications over one of the WLANs or dual mode devices capable of both cellular and WLAN communications. WLANs may be configured in accordance with one of the IEEE 802.11 specifications.

It will be understood that the mobile devices include one or more radio transceivers and associated processing hardware and software to enable wireless communications with the PLMN and or one of the WLANs . In various embodiments the PLMN and mobile devices may be configured to operate in compliance with any one or more of a number of wireless protocols including GSM GPRS CDMA EDGE UMTS EvDO HSPA 3GPP or a variety of others. It will be appreciated that the mobile device may roam within the PLMN and across PLMNs in known manner as the user moves. In some instances the dual mode mobile devices and or the enterprise network are configured to facilitate roaming between the PLMN and a WLAN and are thus capable of seamlessly transferring sessions such as voice calls from a connection with the cellular interface of the dual mode device to the WLAN interface of the dual mode device and vice versa.

The enterprise network typically includes a number of networked servers computers and other devices. For example the enterprise network may connect one or more desktop or laptop computers one shown . The connection may be wired or wireless in some embodiments. The enterprise network may also connect to one or more digital telephone sets one shown .

The enterprise network may include one or more mail servers such as mail server for coordinating the transmission storage and receipt of electronic messages for client devices operating within the enterprise network . Typical mail servers include the Microsoft Exchange Server and the IBM Lotus Domino server. Each user within the enterprise typically has at least one user account within the enterprise network . Associated with each user account is message address information such as an e mail address. Messages addressed to a user message address are stored on the enterprise network in the mail server . The messages may be retrieved by the user using a messaging application such as an e mail client application. The messaging application may be operating on a user s computer connected to the enterprise network within the enterprise. In some embodiments the user may be permitted to access stored messages using a remote computer for example at another location via the WAN using a VPN connection. Using the messaging application the user may also compose and send messages addressed to others within or outside the enterprise network . The messaging application causes the mail server to send a composed message to the addressee often via the WAN .

The relay serves to route messages received over the PLMN from the mobile device to the corresponding enterprise network . The relay also pushes messages from the enterprise network to the mobile device via the PLMN .

The enterprise network also includes an enterprise server . Together with the relay the enterprise server functions to redirect or relay incoming e mail messages addressed to a user s e mail address within the enterprise network to the user s mobile device and to relay incoming e mail messages composed and sent via the mobile device out to the intended recipients within the WAN or elsewhere. The enterprise server and relay together facilitate push e mail service for the mobile device enabling the user to send and receive e mail messages using the mobile device as though the user were connected to an e mail client within the enterprise network using the user s enterprise related e mail address for example on computer .

As is typical in many enterprises the enterprise network includes a Private Branch eXchange although in various embodiments the PBX may be a standard PBX or an IP PBX for simplicity the description below uses the term PBX to refer to both having a connection with the PSTN for routing incoming and outgoing voice calls for the enterprise. The PBX is connected to the PSTN via DID trunks or PRI trunks for example. The PBX may use ISDN signaling protocols for setting up and tearing down circuit switched connections through the PSTN and related signaling and communications. In some embodiments the PBX may be connected to one or more conventional analog telephones . The PBX is also connected to the enterprise network and through it to telephone terminal devices such as digital telephone sets softphones operating on computers etc. Within the enterprise each individual may have an associated extension number sometimes referred to as a PNP private numbering plan or direct dial phone number. Calls outgoing from the PBX to the PSTN or incoming from the PSTN to the PBX are typically circuit switched calls. Within the enterprise e.g. between the PBX and terminal devices voice calls are often packet switched calls for example Voice over IP VoIP calls. As shown a media server is in communication with the PBX and in some example embodiments the media server is controlled by the PBX.

The enterprise network may further include a Session Management Platform SMP for performing some aspects of messaging or session control like call control and advanced call processing features. The SMP includes a Fixed Mobile Convergence FMC enabler sometimes conveniently referred to as FMC server which includes a PBX Mobility enabler sometimes conveniently referred to as PBX Mobility server . Collectively the SMP PBX and media server may be referred to as the enterprise communications platform generally designated . It will be appreciated that the enterprise communications platform and in particular the SMP is implemented on one or more servers having suitable communications interfaces for connecting to and communicating with the PBX and or DID PRI trunks. Although the SMP may be implemented on a stand alone server it will be appreciated that it may be implemented into an existing control agent server as a logical software component. As will be described below the SMP may be implemented as a multi layer platform.

The enterprise communications platform implements the switching to connect call legs sessions and may provide the conversion between for example a circuit switched call and a VoIP call or to connect legs of other media sessions. In some embodiments in the context of voice calls the enterprise communications platform provides a number of additional functions including automated attendant interactive voice response call forwarding voice mail etc. It may also implement certain usage restrictions on enterprise users such as blocking international calls or 1 900 calls. In many embodiments Session Initiation Protocol SIP may be used to set up manage and terminate media sessions for voice calls. Other protocols may also be employed by the enterprise communications platform for example Web Services Computer Telephony Integration CTI protocol Session Initiation Protocol for Instant Messaging and Presence Leveraging Extensions SIMPLE and various custom Application Programming Interfaces APIs as will be described in greater detail below.

One of the functions of the enterprise communications platform is to extend the features of enterprise telephony to the mobile devices . For example the enterprise communications platform may allow the mobile device to perform functions akin to those normally available on a standard office telephone such as the digital telephone set or analog telephone set . Example features may include direct extension dialing enterprise voice mail conferencing call transfer call park etc.

Reference is now made to which show example embodiments of the enterprise communications system . Again although references are made below to calls or call centric features it will be appreciated that the architectures and systems depicted and described are applicable to session based communications in general and in some instances to messaging based communications.

The third party call control server which includes the FMC and which further includes the PBX Mobility . The third party call control server is coupled to the PBX for example through the LAN enabling packet based communications and more specifically IP based communications. In one embodiment communications between the PBX and the third party call control server are carried out in accordance with SIP. In other words the third party call control server uses SIP based communications to manage the set up tear down and control of media handled by the PBX . The PBX is further coupled to the media server . The PBX interacts with the media server using media handling commands. For example the PBX and media server may communicate using Media Server Markup Language MSML as defined in IETF document Saleem A. Media Server Markup Language Internet Draft draft saleem msml 07 Aug. 7 2008. The media server may be configured to perform Host Media Processing HMP . The media server further includes a media gateway for interfacing between networks having different network protocols and for providing some of the functionality of the media server described herein.

As can be appreciated in some example embodiments only a single session control interface shown as SIP interface is required between the SMP or FMC and the PBX . The specific call control and logic functionality would be implemented by the SMP and communicated over the SIP interface . Thus in order to provide some of the example implementations described herein the specific interface between the PBX and the media server is independent of the SIP interface and for example be PBX or manufacturer specific. As much of the logic is provided by the SMP to control the PBX this configuration may be referred to as Third party Call Control . In some example embodiments this provides a flexibility in system design such that the PBX and media server could be readily substituted without onerous or any configuration of the SIP interface and associated session control signaling.

It can be appreciated that in some example embodiments other types of session protocols may be used by the third party call control server and PBX Mobility server over the SIP interface . In some example embodiments the third party call control server may include H.323 or Computer Telephony Integration CTI or communications protocol conforming to the ECMA 269 or ECMA 323 standards for Computer Supported Telecommunications Applications CSTA .

Other architectures or configurations for the enterprise communications system will be appreciated by those ordinarily skilled in the art.

Reference is now made to which shows a detailed example embodiment of the enterprise communications system with a Third party Call Control architecture. As shown the SMP is a multi layer platform that includes a protocol layer a services layer and an application layer . The protocol layer includes a plurality of interface protocols configured for enabling operation of corresponding applications in the application layer . The services layer includes a plurality of services that can be leveraged by the interface protocols to create richer applications. Finally the application layer includes a plurality of applications that are exposed out to the communication devices and that leverage corresponding ones of the services and interface protocols for enabling the applications.

Specifically the protocol layer preferably includes protocols which allow media to be controlled separate from data. For example the protocol layer can include among other things a Session Initiation Protocol or SIP a Web Services protocol an Application Programming Interface or API a Computer Telephony Integration protocol or CTI and a Session Initiation Protocol for Instant Messaging and Presence Leveraging Extensions SIMPLE protocol . It is contemplated that the interface protocols are plug ins that can interface directly with corresponding servers in the enterprise network which will be further described below.

For the purposes of this disclosure SIP will be utilized although it is appreciated that the system can operate using the above disclosed or additional protocols. As known by those of ordinary skill in the art SIP is the IETF Internet Engineering Task Force standard for multimedia session management and more specifically is an application layer control protocol for establishing maintaining modifying and terminating multimedia sessions between two or more endpoints. As further known by those of ordinary skill in the art the SIP protocol includes two interfaces for signaling SIP Trunk hereinafter referred to as SIP T and SIP Line hereinafter referred to as SIP L . Specifically the SIP T interface is utilized when the endpoint is a non specific entity or not registered i.e. when communicating between two network entities . In contrast the SIP L interface is utilized when the endpoint is registered i.e. when dialing to a specific extension . The specific operation of the system utilizing SIP will be described in further detail below.

The SMP also includes a plurality of enablers among other things a VoIP enabler the FMC enabler which includes the PBX Mobility enabler a conference services enabler a presence enabler and an Instant Messaging or IM enabler . Each of the enablers are used by corresponding services in the services layer that combine one or more of the enablers. Each of the applications in the application layer is then combined with one or more of the services to perform the desired application. For example a phone call service may use the VoIP or PBX enabler and an emergency response application may use the phone call service an Instant Messenger service a video call service and email service and or a conference service.

The application layer may include a conference services application that together with the conference services enabler enables multiple communication devices including desk telephones and personal computers to participate in a conference call through use of a centralized conference server . As seen in the conference server is provided in the enterprise network and is in communication with the conference services enabler preferably through the SIP protocol although it is recognized that additional protocols that control media separate from data may be appropriate such as the Web Services protocol or the CTI protocol . As will be described in further detail below the conference call server is configured for directing media and data streams to and from one or more communication devices i.e. mobile devices telephones and computers . The media server not shown in would be located as in .

Reference is now made to which shows a call diagram implemented in the system which generally provides re use of a cellular call leg in accordance with an example embodiment. Example implementations or variants include but are not limited to three way call call waiting hold and forward as would be understood in a conventional PSTN system . In the example shown the mobile device desires to implement a call to destination as well as destination . Destination and destination are connected through enterprise lines e.g. present on a user s desk phone for example over the PSTN . The mobile device communicates in the cellular network PLMN . The PBX Mobility server assists in facilitating the connectivity between call leg call leg and call leg . Call leg includes a call control signal and further includes media which terminates on the media server . Call leg includes a call control signal which terminates on the PBX Mobility server and further includes media which terminates on the media server . Call leg includes a call control signal which terminates on the PBX Mobility server and further includes media which terminates on the media server . In the example embodiment shown only one call leg is required for call leg such that call leg may be re used when connected to call leg and or call leg . In another words it can be appreciated that in this embodiment another call leg is not created from or to the mobile device .

As can be appreciated some example embodiments are not limited to a mobile device in the cellular network PLMN but rather the mobile device and call leg could be implemented in any number of types of networks wherein it would be advantageous to re use a call leg for example when the particular network has an associated usage cost or for example has relatively low allocated bandwidth.

As shown in the call originates from one of the mobile devices to the first and second target destinations in the PSTN . This may be described as a mobile originated call sequence. The signaling diagram generally provides for re using of the established cellular call leg call leg to the wireless device . Some of the SIP based messages may contain a Session Description Protocol SDP body as would be understood by those skilled in the art.

At step the mobile device sends a SIP INVITE message to the PBX Mobility server indicating that the mobile device wishes to call number Dest corresponding to destination . At step the PBX Mobility server upon receiving this INVITE sends an INVITE for the mobile device s number to the PBX . The PBX initially responds back with 180 and subsequently with a 200OK message that contains SDP. SDP contains media descriptions e.g including media port of the mobile device for the cellular connection to the mobile device on the media server .

At step the PBX Mobility server upon receiving the 200 OK in step above sends an ACK to the PBX and further sends a 100 provisional response message to the mobile device confirming that its INVITE received in step has been received and is being processed. At step the media or cellular call session within call leg between the mobile device and the media server is established at this stage.

At step once call leg is established the PBX Mobility server sends an INVITE for with SDP received in step as payload for 200 OK to the PBX . At step the PBX Mobility server receives 180 ringing followed by 200 OK with SDP from the PBX . These responses are for call leg to Dest . The SDP contains the media descriptions e.g. including media port for the destination Dest on the media server . The call leg to the destination Dest is established at this stage.

At step the PBX Mobility server sends as INVITE with SDP received in step above to the PBX and thereafter receives a 200OK with SDP from the PBX . The PBX Mobility server thereafter sends an ACK to the PBX to acknowledge the receipt of the 200 OK.

The two call legs call leg and call leg are joined at this stage as a call session as a result of SDP shuffling and a PBX anchored cellular call is established. As would be understood by those skilled in the art SDP shuffling includes utilizing the SDP contained in a received offer for one of the call legs call leg for SIP offer answer negotiation to be sent in the offer in another call leg call leg during SIP offer answer negotiation and similarly utilizing the received SDP answer received in call leg as sent answer for call leg thereby joining the media from the two call legs call leg and call leg together establishing an end to end call. The media information for the call is anchored at the media server . PBX Mobility server sends a 200 OK to the mobile device and receives an ACK.

At step the mobile device sends another SIP INVITE message to the PBX Mobility server indicating its intent to call destination Dest . The PBX Mobility server upon reception of this INVITE identifies that a call is already established for this wireless device and may proceed to put the existing destination Dest on hold. Thus at step PBX Mobility server sends an INVITE with hold SDP created based on cached information on the PBX Mobility server for SDP to the PBX for destination Dest . This puts the call leg to the destination Dest on hold.

Still referring to step the PBX responds back with 200OK with SDP to confirm that hold of call leg has succeeded. The PBX Mobility server acknowledges the 200OK by sending an ACK to the PBX .

At step the PBX Mobility server sends another delayed offer INVITE to the PBX to call destination Dest . The PBX initially responds back with a 180 ringing and finally with a 200 OK with SDP as payload for this media session within call leg . The SDP carries the media description for Dest at the media server . Call leg to Dest is established.

At step the PBX Mobility server sends a Re INVITE with SDP received in step to the PBX on the call leg to mobile device . The PBX responds back to the Re INVITE with 200 OK with SDP that carries updated media description for call leg to the mobile device at the media server .

At step PBX Mobility server sends an ACK message carrying the SDP received in step for the call leg for Dest to the PBX . The media of the two call legs call leg and call leg are connected as a call session at this stage due to SDP shuffling with media being anchored at the media server . Dest is on hold in the background. The PBX Mobility server sends a 200 OK to the mobile device and receives an ACK for the same.

The above may be used to provide a conference call or multi party call or three way call between the mobile device dest and dest . This is accomplished by joining call leg call leg and call leg with the PBX Mobility server using Third party Call Control over the PBX with media being mixed at the media server . As would be understood by those skilled in the art reference to mixing of media includes mixing media from two or more sources and for example refers to conference server applications where media from multiple parties is mixed to start a conference bridge.

The above signaling diagram is referred to as a Mobile Originated PBX Initiated MOPI call sequence. Alternatively the call sequence could be Mobile Originated Mobile Initiated MOMI Mobile Terminated PBX Initiated MTPI or Mobile Terminated Mobile Initiated MTMI as would be understood by those skilled in the art. Thus reference to from or to in regards to signaling and communication paths in various embodiments may in fact be reversed to be to or from as appropriate. In some further example embodiments some or all of the above signaling sequence s is originated or initiated by the destination devices dest or dest .

Either the mobile device or the PBX Mobility server may terminate the call session s . Similarly one of the target destination s may terminate the call which may terminate the respective call leg or call leg without terminating the call leg if the other call is still active. This may be readily implemented by those skilled in the art in view of the above.

Reference is now made to which illustrates a call diagram implemented in the system in accordance with another example embodiment. The same reference numbers of the system will be used for reference to various elements for convenience without intending to be limiting. The call diagram of generally provides cellular call leg re use wherein more than one PBX and or more than one media server may be provided. As shown there is provided PBX and PBX as well as Media Server Media Server and Media Server . The PBX Mobility server includes a single control interface to each of PBX and PBX . PBX is associated and has control communication with Media Server and Media Server . PBX is associated and has control communication with Media Server . The specific communication protocols as between the media servers are not described herein as they would be readily implemented by those skilled in the art. In the example shown the mobile device desires to implement a call to destination as well as destination . The PBX Mobility server assists in facilitating the connectivity between call leg call leg and call leg . Call leg includes a call control signal which terminates on the PBX Mobility server and further includes media which terminates on the media server . Call leg includes a call control signal which terminates on the PBX Mobility server and further includes media which terminates on the media server . Call leg includes a call control signal which terminates on the PBX Mobility server and further includes media which terminates on the media server . In the example embodiment shown only one call leg is required for call leg such that call leg or a part thereof such as the media may be re used when connected to call leg and or call leg .

At step the mobile device sends a SIP INVITE message to the PBX Mobility server indicating that the mobile device wishes to call destination . At step the PBX Mobility server upon receiving this INVITE sends an INVITE for the mobile device s number to the PBX . The PBX initially responds back with 180 ringing and subsequently with a 200OK message that contains SDP. SDP contains media descriptions e.g. including media port of the mobile device for the cellular connection to the mobile device on media server .

At step the PBX Mobility server upon receiving the 200 OK in step above sends an ACK to the PBX and further sends a 100 provisional response message to the mobile device confirming that its INVITE received in step has been received and is being processed. At step the media included in call leg between the mobile device and the media server is established at this stage i.e. the media in this example is a cellular call session .

At step once call leg is established the PBX Mobility server sends an INVITE for Dest with SDP received in step as payload for 200 OK to the PBX . At step the PBX Mobility server receives 180 ringing followed by 200 OK with SDP from the PBX . The PBX Mobility server sends an ACK to acknowledge the receipt of the 200 OK. The PBX Mobility server sends an INVITE with SDP to the PBX and receives as 200 OK with SDP from the PBX and the PBX Mobility server further sends a 200 OK to the mobile device .

These responses are for call leg to Dest . The SDP contains the media descriptions e.g. including media port for the destination Dest on the media server . The call leg including media between media server and the destination Dest is established at this stage.

At step the PBX Mobility server sends an ACK to the PBX to acknowledge the receipt of 200 OK received in step above for Dest .

The two call legs call leg and call leg are joined at this stage as a call session as a result of SDP shuffling as described above and a PBX anchored cellular call is established. The media information for the call is anchored at each of media server and media server . Note that further media flow occurs between media server and media server under control from the PBX mobility server as could be implemented by those skilled in the art. The PBX Mobility server sends a 200 OK to the mobile device and receives an ACK.

At step the mobile device sends another SIP INVITE message to the PBX Mobility server indicating its intent to call destination Dest . The PBX Mobility server upon reception of this INVITE identifies that a call is already established for this wireless device and may proceed to put the existing destination Dest on hold. Thus at step PBX Mobility server sends an INVITE with hold SDP created based on cached information on the PBX Mobility server for SDP to the PBX for destination Dest . This puts the call leg to the destination Dest on hold.

Still referring to step the PBX responds back with 200OK with SDP to confirm that hold of call leg has succeeded. The PBX Mobility server acknowledges the 200OK by sending an ACK to the PBX .

At step the PBX Mobility server sends another delayed offer INVITE to the PBX to call destination Dest . The PBX initially responds back with a 180 ringing and finally with a 200 OK with SDP as payload for this call session being call leg . The SDP carries the media description for Dest at the media server . Call leg to Dest is established.

At step the PBX Mobility server sends a Re INVITE with SDP received in step to the PBX on the call leg to mobile device . The PBX responds back to the Re INVITE with 200 OK with SDP that carries updated media description for call leg to the mobile device at the media server .

At step PBX Mobility server sends an ACK message carrying the SDP received in step for the call leg for Dest to the PBX . The two call legs call leg and call leg are connected as a call session at this stage due to SDP shuffling with media being anchored at the media server and media server . Note that further media communication occurs between media server and media server under control from the PBX Mobility server as could be implemented by those skilled in the art. Dest is on hold in the background. The PBX Mobility server sends a 200 OK to the mobile device and receives an ACK for the same. In some example embodiments Dest may be teleconferenced in by media shuffling as between the media servers as could be appreciated by those skilled in the art.

The above signaling diagram is referred to as a Mobile Originated PBX Initiated MOPI call sequence. Alternatively the call sequence could be Mobile Originated Mobile Initiated MOMI Mobile Terminated PBX Initiated MTPI or Mobile Terminated Mobile Initiated MTMI as would be understood by those skilled in the art.

Thus reference is now made to which shows another detailed signaling diagram for implementing the call diagram of illustrating a Mobile Originated Mobile Initiated MOMI sequence. The signaling diagram is similar to the MOPI signaling diagram . In the example shown the mobile device originates the call into the PBXs . As shown the first four messages between the PBX Mobility server and the PBX have their direction reversed when compared to the MOPI signaling diagram . The PBX sends an INVITE for the mobile device s number to the PBX Mobility server . The PBX Mobility server initially responds back with 180 ringing and subsequently with a 200OK message that contains SDP. SDP contains media descriptions e.g. including media port of the mobile device for the cellular connection to the mobile device on media server . The PBX upon receiving the 200 OK sends an ACK to the PBX Mobility server and the PBX Mobility Server further sends a 100 provisional response message to the mobile device confirming that its INVITE has been received and is being processed.

Although some example embodiments have described the entire call leg as being re used it can be appreciated that in some embodiments specific parts of the call leg may be re used for example the media or the call control signal. The call control signaling could be re used for purposes such as establishing another media session based on some of the existing control signaling.

Although systems having three client devices have been described in some example embodiments the system may re use a call leg or a part thereof as between more than three client devices wherein the SMP may be suitably configured by those skilled in the art in view of the above. The multiple devices may further be connected in a conference call by connecting the media of the respective call legs.

Certain adaptations and modifications of the described embodiments can be made. Therefore the above discussed embodiments are considered to be illustrative and not restrictive.

