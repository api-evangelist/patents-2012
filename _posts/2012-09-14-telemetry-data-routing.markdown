---

title: Telemetry data routing
abstract: Among other things, one or more techniques and/or systems are provided for routing telemetry data to one or more receivers. That is, telemetry data, such as activity data associated with a network device (e.g., a switch, a router, etc.), may be routed to one or more receivers in-flight (e.g., while the telemetry data is being processed by a network device, as opposed to being stored within a storage device for processing). In one example, telemetry data may be forked into a first telemetry data stream for a first receiver, a second telemetry data stream for a second receiver, and/or other telemetry data streams. Respective telemetry data streams may be formatted according to a receiver destination policy. In this way, one or more telemetry data streams, forked from the telemetry data in-flight, may be delivered to one or more receivers in-flight.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08953600&OS=08953600&RS=08953600
owner: Microsoft Corporation
number: 08953600
owner_city: Redmond
owner_country: US
publication_date: 20120914
---
Telemetry data collected from network devices such as routers and switches may be used to improve network efficiency by providing insight into activities performed by the network devices. In general telemetry data is pushed from a network device to a recipient by utilizing CPU cycles and resource bandwidth of the network device. Unfortunately pushing telemetry data from the network device may negatively impact the performance of the network device due to relatively low CPU power and memory available for the network device. In this way pushing telemetry data to multiple recipients may reduce operating efficiency of a resource constrained network device.

This summary is provided to introduce a selection of concepts in a simplified form that are further described below in the detailed description. This summary is not intended to identify key factors or essential features of the claimed subject matter nor is it intended to be used to limit the scope of the claimed subject matter.

Among other things one or more systems and or techniques for routing telemetry data to one or more receivers is provided herein. A network device such as a router or switch may generate telemetry data corresponding to activities of the network device. Multiple receivers such as end users or servers may desire to obtain the telemetry data e.g. an IT department may desire the telemetry data for internal IT billing for network usage a network optimization department may desire the telemetry data for internal analysis for future upgrades etc. . Accordingly telemetry data received from the network device may be distributed in flight to one or more receivers e.g. rather than being pushed from the network device . That is in order to mitigate security risks processing overhead and or latency associated with storing telemetry data within a storage device for processing and distribution to multiple receivers the telemetry data may be formatted and delivered in flight to multiple receivers without storing the telemetry data to a storage device such as a disk drive of a server.

In one example of routing telemetry data a first receiver a second receiver and or other receivers for the telemetry data may be identified based upon a duplication policy e.g. duplication policy of . The duplication policy may comprise a number of receivers that are to receive the telemetry data e.g. 8 receivers one or more telemetry stream types utilized by respective receivers e.g. respective receivers request telemetry streams formatted according to an sflow format and a syslog format and or a number of telemetry streams to create e.g. 16 total telemetry streams 8 sflow and 8 syslog . The telemetry data may be forked into a first telemetry data stream for the first receiver a second telemetry data stream for the second receiver and or other telemetry data streams for other receivers. In one example a field within the telemetry data e.g. an arbitrary field such as a vlan tag identifying a previous node that handled a data packet of the telemetry data may be replaced with a first receiver ID associated with the first receiver e.g. a first MAC address and or a second received ID associated with the second receiver e.g. a second MAC address .

A receiver destination policy may be utilized to format the first telemetry data stream and or the second telemetry data stream e.g. destination receiver policy of . For example the receiver destination policy may comprise an entry mapping the first received ID to a telemetry stream type a destination IP address and or a destination port. In this way the first telemetry data stream may be formatted according to the entry for delivery to the first receiver. Similarly the second telemetry data stream may be formatted according to a second entry associated with the second receiver for delivery to the second receiver. It may be appreciated that in one example the first telemetry data stream and or the second telemetry data stream may be formatted in flight without being stored within a storage device such as a disk drive of a server which may mitigate security risks processing overhead and or latency for example.

The following description and annexed drawings set forth certain illustrative aspects and implementations. These are indicative of but a few of the various ways in which one or more aspects may be employed. Other aspects advantages and novel features of the disclosure will become apparent from the following detailed description when considered in conjunction with the annexed drawings.

The claimed subject matter is now described with reference to the drawings wherein like reference numerals are generally used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding of the claimed subject matter. It may be evident however that the claimed subject matter may be practiced without these specific details. In other instances structures and devices are illustrated in block diagram form in order to facilitate describing the claimed subject matter.

Telemetry data may comprise unidirectional data that is pushed from a source such as a network device to a receiver. For example a network device may wrap telemetry data into one or more user datagram protocol UDP packets for delivery to the receiver. Because the network device may not comprise sophisticated CPU and or memory functionality pushing telemetry data to one or more receivers may burden the network device. Accordingly as provided herein telemetry data is routed to one or more receivers in flight which may mitigate resource strain on the network device.

One embodiment of routing telemetry data to one or more receivers is illustrated by an exemplary method in . At the method starts. At telemetry data is received from a network device. In one example the telemetry data is received by a duplication component that may be implemented at least in part via an application specific integrated circuit ASIC of a router or switch. The telemetry data may comprise connection less data e.g. as opposed to state based data such as HTML data unidirectional data data wrapped within a user datagram protocol UDP package and or other types of data transmitted from a source to a receiver.

At a first receiver a second receiver and or other receivers that are to receive the telemetry data may be identified based upon a duplication policy e.g. duplication policy of . In one example the duplication policy may comprise a number of receivers that are to receive the telemetry data e.g. the first receiver the second receiver etc. one or more telemetry stream types utilized by respective receivers e.g. the first receiver may request telemetry data streams formatted according to an sflow format a syslog format and a cflow format the second receiver may request a telemetry data stream formatted according to an sflow format etc. and or a number of telemetry streams to create e.g. 4 total telemetry streams 2 sflow 1 syslog and 1 cflow . A field such as an arbitrary field within the telemetry data may be replaced with a first receiver ID associated with the first receiver e.g. a MAC address of the first receiver and or a second receiver ID associated with the second receiver e.g. a MAC address of the second receiver which may be used to fork e.g. duplicate the telemetry data for delivery to the first receiver and or the second receiver etc. In one example the duplication policy may be specified by a computing device that is external to the duplication component. For example an administrative server may utilize an open flow technology to provide the duplication policy to a switch or router within which the duplication component is implemented.

At the telemetry data may be forked into a first telemetry data stream for the first receiver a second telemetry data stream for the second receiver and or other telemetry data streams for other receivers. The first telemetry data stream and or the second telemetry data stream may be formatted for delivery to the appropriate receiver according to a receiver destination policy e.g. receiver destination policy of . In one example the receiver destination policy may comprise one or more entries used to format a telemetry data stream for delivery to a receiver. An entry may map a receiver ID of a receiver to a telemetry stream type e.g. cflow sflow syslog etc. a destination IP address of the receiver and or a destination port of the receiver. It may be appreciated that the entry may map the receiver ID to other parameters such as a duplication parameter specifying whether the receiver requests further duplication of the telemetry data a delivery parameter specifying whether the telemetry data stream is to be delivered to multiple destinations etc. In one example of formatting the first telemetry data stream the first telemetry data stream may be formatted according to a first telemetry stream type a first destination IP address and or a first destination port that are mapped to the first receiver ID within the receiver destination policy.

Because a receiver may be configured to verify that a telemetry data stream originated from the network device as the source of the telemetry data one or more original properties of the telemetry data such as identification information of the network device may be retained within the telemetry data stream. In this way the first receiver may verify that the first telemetry data stream originated from the network device based upon one or more original properties identifying the network device regardless of whether the telemetry data was formatted as and or delivered through the first telemetry data stream.

Because storing the telemetry data within a storage device before delivery to the one or more receivers may result in security risks processing overhead and or latency in delivering a telemetry data stream the telemetry data stream may be created on the fly or in flight e.g. during processing of the telemetry data within a router and or switch without storing the telemetry data within a storage device such as a disk drive of a server.

At the first telemetry data stream is delivered to the first receiver and the second telemetry data stream is delivered to the second receiver etc. based upon the receiver destination policy. For example additional duplication delivery to one or more IP address and or delivery to one or more ports specified within the receiver destination policy may be performed to deliver a telemetry data stream to a receiver. At the method ends.

One embodiment of routing telemetry data to one or more receivers is illustrated by an exemplary method in . At the method starts. At telemetry data is received from a network device. At one or more receivers for the telemetry data are identified based upon a duplication policy. At for respective receivers a field within the telemetry data is replaced with a receiver ID associated with a receiver to create modified telemetry data at . At a telemetry data stream for the receiver is created based upon the modified telemetry data. At the telemetry data stream may be formatted according to a telemetry stream type a destination IP address and or a destination port mapped to the receiver ID to create a formatted telemetry data stream. At the formatted telemetry data stream is delivered to the receiver. In one example the creating the telemetry data stream the formatting the telemetry data stream and or the delivering of the formatted data stream are performed on the fly or in flight e.g. while the telemetry data and or the telemetry data stream are being processed within a network device such as by an application specified integrated circuit ASIC of a router and or a switch for example without storing the telemetry data within a storage device such as a disk drive of a server. In this way telemetry data may be routed to one or more receivers in flight. At the method ends.

In one example of routing telemetry data e.g. connectionless data unidirectional data data wrapped within a user datagram protocol UDP package etc. the duplication component may be configured to receive the telemetry data from the network device . The duplication component may identify a first receiver a second receiver and or other receivers for the telemetry data based upon the duplication policy . In one example the duplication policy may comprise a number of receivers that are to receive the telemetry data one or more telemetry stream types utilized by respective receivers and or a number of telemetry streams to create. For example the duplication policy may specify that the first receiver requests the telemetry data according to a cflow format the second receiver requests the telemetry data according to an sflow format and a third receiver requests the telemetry data according to a cflow format and a syslog format. In this way the duplication component may replace a field within the telemetry data with one or more receiver IDs e.g. a MAC address corresponding to the first receiver the second receiver and or other receivers identified from the duplication policy .

The duplication component may be configured to fork the telemetry data into a first telemetry data stream for the first receiver e.g. a cflow data stream a second telemetry data stream for the second receiver e.g. an sflow data stream and or other telemetry data streams e.g. a cflow data stream and a syslog data stream for the third receiver . The duplication component may format respective telemetry data streams based upon one or more entries within the receiver destination policy . For example the receiver destination policy comprises an entry mapping a first receiver ID for the first receiver to a first telemetry data stream type e.g. cflow a first destination IP address and or a first destination port. Accordingly the duplication component may format the first telemetry data stream as a cflow data stream type and may route the first telemetry data stream to the first destination IP address at the first destination port. One or more original properties of the telemetry data e.g. identifying the network device may be retained within the first telemetry data stream because the first receiver may verify that the first telemetry data stream originated from the network device . The duplication component may create and or format respective telemetry data streams in flight e.g. within a network device such as the network device or another network device not illustrated without storing the telemetry data within a storage device such as a disk drive of a server. In this way the duplication component may be configured to deliver the first telemetry data stream to the first receiver the second telemetry data stream to the second receiver and or other telemetry data streams to other receivers e.g. a cflow data stream and a syslog data stream to the third receiver .

The second entry may be used to identify one or more receivers that have requested telemetry data from a switch C . For example the second entry may specify that 3 receivers have requested telemetry data from switch C . The second entry may be used to identify one or more telemetry data streams that are to be created from the telemetry data from switch C . For example 9 telemetry data streams are to be created based upon receivers requesting telemetry data according to an sflow format a syslog format and a netflow format e.g. 3 sflow telemetry data streams 3 syslog telemetry data streams and 3 netflow telemetry data streams . It may be appreciated that in one example different receivers may specify different formats of telemetry data e.g. a first receiver may request telemetry data from a router X in an sflow format while a second receiver may request telemetry data from router X in an sflow and netflow format resulting in the creation of 2 sflow telemetry data streams and 1 netflow telemetry data stream .

The second entry may map a receiver ID 2 identifying the second receiver to a telemetry stream type e.g. a netflow format requested by the second receiver a destination IP address e.g. telemetry data is to be routed to 10.2.2.2 and a destination port e.g. telemetry data is to be delivered to port . In this way one or more telemetry data streams e.g. a netflow telemetry data stream may be created formatted and or delivered to the second receiver based upon the second entry .

Still another embodiment involves a computer readable medium comprising processor executable instructions configured to implement one or more of the techniques presented herein. An exemplary computer readable medium that may be devised in these ways is illustrated in wherein the implementation comprises a computer readable medium e.g. a CD R DVD R or a platter of a hard disk drive on which is encoded computer readable data . This computer readable data in turn comprises a set of computer instructions configured to operate according to one or more of the principles set forth herein. In one such embodiment the processor executable computer instructions may be configured to perform a method such as at least some of the exemplary method of and or at least some of exemplary method of for example. In another such embodiment the processor executable instructions may be configured to implement a system such as at least some of the exemplary system of for example. Many such computer readable media may be devised by those of ordinary skill in the art that are configured to operate in accordance with the techniques presented herein.

Although the subject matter has been described in language specific to structural features and or methodological acts it is to be understood that the subject matter defined in the appended claims is not necessarily limited to the specific features or acts described above. Rather the specific features and acts described above are disclosed as example forms of implementing the claims.

As used in this application the terms component module system interface and the like are generally intended to refer to a computer related entity either hardware a combination of hardware and software software or software in execution. For example a component may be but is not limited to being a process running on a processor a processor an object an executable a thread of execution a program and or a computer. By way of illustration both an application running on a controller and the controller can be a component. One or more components may reside within a process and or thread of execution and a component may be localized on one computer and or distributed between two or more computers.

Furthermore the claimed subject matter may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques to produce software firmware hardware or any combination thereof to control a computer to implement the disclosed subject matter. The term article of manufacture as used herein is intended to encompass a computer program accessible from any computer readable device carrier or media. Of course those skilled in the art will recognize many modifications may be made to this configuration without departing from the scope or spirit of the claimed subject matter.

Although not required embodiments are described in the general context of computer readable instructions being executed by one or more computing devices. Computer readable instructions may be distributed via computer readable media discussed below . Computer readable instructions may be implemented as program modules such as functions objects Application Programming Interfaces APIs data structures and the like that perform particular tasks or implement particular abstract data types. Typically the functionality of the computer readable instructions may be combined or distributed as desired in various environments.

In other embodiments device may include additional features and or functionality. For example device may also include additional storage e.g. removable and or non removable including but not limited to magnetic storage optical storage and the like. Such additional storage is illustrated in by storage . In one embodiment computer readable instructions to implement one or more embodiments provided herein may be in storage . Storage may also store other computer readable instructions to implement an operating system an application program and the like. Computer readable instructions may be loaded in memory for execution by processing unit for example.

The term computer readable media as used herein includes computer storage media. Computer storage media includes volatile and nonvolatile removable and non removable media implemented in any method or technology for storage of information such as computer readable instructions or other data. Memory and storage are examples of computer storage media. Computer storage media includes but is not limited to RAM ROM EEPROM flash memory or other memory technology CD ROM Digital Versatile Disks DVDs or other optical storage magnetic cassettes magnetic tape magnetic disk storage or other magnetic storage devices or any other medium which can be used to store the desired information and which can be accessed by device . Any such computer storage media may be part of device .

Device may also include communication connection s that allows device to communicate with other devices. Communication connection s may include but is not limited to a modem a Network Interface Card NIC an integrated network interface a radio frequency transmitter receiver an infrared port a USB connection or other interfaces for connecting computing device to other computing devices. Communication connection s may include a wired connection or a wireless connection. Communication connection s may transmit and or receive communication media.

The term computer readable media may include communication media. Communication media typically embodies computer readable instructions or other data in a modulated data signal such as a carrier wave or other transport mechanism and includes any information delivery media. The term modulated data signal may include a signal that has one or more of its characteristics set or changed in such a manner as to encode information in the signal.

Device may include input device s such as keyboard mouse pen voice input device touch input device infrared cameras video input devices and or any other input device. Output device s such as one or more displays speakers printers and or any other output device may also be included in device . Input device s and output device s may be connected to device via a wired connection wireless connection or any combination thereof. In one embodiment an input device or an output device from another computing device may be used as input device s or output device s for computing device .

Components of computing device may be connected by various interconnects such as a bus. Such interconnects may include a Peripheral Component Interconnect PCI such as PCI Express a Universal Serial Bus USB firewire IEEE 1394 an optical bus structure and the like. In another embodiment components of computing device may be interconnected by a network. For example memory may be comprised of multiple physical memory units located in different physical locations interconnected by a network.

Those skilled in the art will realize that storage devices utilized to store computer readable instructions may be distributed across a network. For example a computing device accessible via a network may store computer readable instructions to implement one or more embodiments provided herein. Computing device may access computing device and download a part or all of the computer readable instructions for execution. Alternatively computing device may download pieces of the computer readable instructions as needed or some instructions may be executed at computing device and some at computing device .

Various operations of embodiments are provided herein. In one embodiment one or more of the operations described may constitute computer readable instructions stored on one or more computer readable media which if executed by a computing device will cause the computing device to perform the operations described. The order in which some or all of the operations are described should not be construed as to imply that these operations are necessarily order dependent. Alternative ordering will be appreciated by one skilled in the art having the benefit of this description. Further it will be understood that not all operations are necessarily present in each embodiment provided herein.

Moreover the word exemplary is used herein to mean serving as an example instance or illustration. Any aspect or design described herein as exemplary is not necessarily to be construed as advantageous over other aspects or designs. Rather use of the word exemplary is intended to present concepts in a concrete fashion. As used in this application the term or is intended to mean an inclusive or rather than an exclusive or . That is unless specified otherwise or clear from context X employs A or B is intended to mean any of the natural inclusive permutations. That is if X employs A X employs B or X employs both A and B then X employs A or B is satisfied under any of the foregoing instances. In addition the articles a and an as used in this application and the appended claims may generally be construed to mean one or more unless specified otherwise or clear from context to be directed to a singular form. Also at least one of A and B and or the like generally means A or B or both A and B.

Also although the disclosure has been shown and described with respect to one or more implementations equivalent alterations and modifications will occur to others skilled in the art based upon a reading and understanding of this specification and the annexed drawings. The disclosure includes all such modifications and alterations and is limited only by the scope of the following claims. In particular regard to the various functions performed by the above described components e.g. elements resources etc. the terms used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. that is functionally equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary implementations of the disclosure. In addition while a particular feature of the disclosure may have been disclosed with respect to only one of several implementations such feature may be combined with one or more other features of the other implementations as may be desired and advantageous for any given or particular application. Furthermore to the extent that the terms includes having has with or variants thereof are used in either the detailed description or the claims such terms are intended to be inclusive in a manner similar to the term comprising. 

