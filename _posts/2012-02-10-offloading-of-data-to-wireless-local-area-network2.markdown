---

title: Offloading of data to wireless local area network
abstract: Methods, systems, and devices are described for intercepting socket calls from applications installed on a mobile device while a first wireless interface is active. The first wireless interface is a cellular interface. Upon determining to release the intercepted socket calls to the socket layer, a second wireless interface is activated. The second wireless interface is a Wireless Local Area Network (WLAN) interface. The sockets calls are released to the socket layer and transmitted using the activated second wireless interface. Upon substantially completing the socket calls, the second wireless interface is deactivated. The intercepting of the socket calls and the activation of the second wireless interface occurs while the mobile device is in an idle mode.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09571952&OS=09571952&RS=09571952
owner: QUALCOMM Incorporatd
number: 09571952
owner_city: San Diego
owner_country: US
publication_date: 20120210
---
The present application for patent claims priority benefit of U.S. patent application Ser. No. 61 478 123 entitled POWER EFFICIENT OFFLOADING OF DATA IN STANDBY TO WIRELESS LOCAL AREA NETWORK WLAN by Arnaud Meylan filed Apr. 22 2011 assigned to the assignee hereof and expressly incorporated by reference herein.

Applications or device applets are now available that operate to provide a wide range of add on services and features to wireless devices. For example it is now possible for wireless devices to download and launch device applets to perform value added functions such as shopping searching position location driving navigation or an array of other functions. Thus the use of device applets may increase the functionality and usability of wireless devices and offers device users features and convenience not originally available on the devices themselves.

A wireless device may interface with one or more communication networks. For example the wireless device may include a variety of radios providing communications using Cellular WiFi Bluetooth or other types of radio access technologies. Accordingly applications executing on the wireless device may interface with a radio to establish a communications channel and the channel may be used by the applications to communicate with the appropriate network.

Applications may continue to interface with radios on the wireless device to establish communication channels even when the device is in an idle mode. A cellular interface may provide a low power consumption rate while the device is in an idle state while a WiFi interface may allow the device to transport data at a lower power consumption rate than the cellular interface. With an increasing number of applications installed on a device cellular data networks may become overloaded by network signaling associated with the setup of communication channels.

Methods systems and devices are described for intercepting socket calls from applications installed on a mobile device. In some embodiments a first wireless interface e.g. a cellular interface is active. Upon determining to release the intercepted socket calls to the socket layer a second wireless interface e.g. Wireless Local Area Network WLAN interface is activated. The sockets calls are released to the socket layer and transmitted using the activated second wireless interface. Upon substantially completing the socket calls the second wireless interface is deactivated. The intercepting of the socket calls and the activation of the second wireless interface occurs while the mobile device is in an idle mode.

In one embodiment activating the second wireless interface may include scanning for an available second wireless network. The second network may be different than a first wireless network. The first wireless network may be associated with the first wireless interface. Upon detecting an available second wireless network the second wireless interface may be activated.

In one example the second wireless interface may be deactivated upon detecting a triggering event. Detecting the triggering event may include determining that the at least one socket call has been substantially performed. In one configuration detecting the triggering event may include determining that a timer has substantially expired.

In one embodiment the first wireless interface may be maintained in an activated state during a period when the second wireless interface is in an activated state. The first wireless interface may also be maintained in an activated state during a period when the second wireless interface is in a deactivated state.

In one configuration the first wireless interface may be deactivated substantially upon determining that the second wireless interface is activated. The first wireless interface may be reactivated substantially upon determining the second wireless interface is deactivated.

In one example a notification pertaining to the second wireless interface becoming active may be disabled. For example one or more applications with a persistent Transmission Control Protocol TCP connection via the first wireless interface may be identified. The one or more applications may be prevented from receiving a notification pertaining to the second wireless interface becoming active. Preventing the one or more applications from receiving the notification may include intercepting the notification pertaining to the second wireless interface becoming active and discarding the notification. Preventing the one or more applications from receiving the notification may also include discarding traffic directed to the second wireless interface that originates from the one or more applications.

In one embodiment determining to release the at least one intercepted socket call to the socket layer may include detecting the occurrence of a releasing triggering event. The releasing triggering event may include at least one of an expiry of a timer a status change of a display a status change of a microphone a status change of a speaker a status change of a global positioning system GPS sensor of the mobile device an indication that a universal serial bus port is in use an indication that an audio equipment is connected to the mobile device an indication that a video equipment is connected to the mobile device a receipt of a maximum number of socket calls or an indication that a Wireless Local Area Network WLAN is complete.

In one example determining to release the at least one intercepted socket call to the socket layer may include identifying an application that originated the at least one socket call as a critical application. Determining to release the at least one intercepted socket call to the socket layer may also include determining the at least one intercepted socket call possesses a delay tolerance that is below a tolerance threshold.

In one configuration instructions for a wrapper may be executed. The executed wrapper may perform the intercepting of the at least one socket call. The wrapper may be located between an application layer and a socket layer of the operating system of the mobile device. In one embodiment the operations performed by the wrapper may be embedded in the socket layer.

A mobile device configured for wireless communication is also described. The device may include a processor and memory in electronic communication with the processor. The memory may include an operating system. The processor may include an application connectivity engine. The engine may be configured to execute instructions to intercept at least one socket call from reaching a socket layer at the mobile device while a first wireless interface is active. The engine may be further configured to execute instructions to activate substantially upon determining to release the at least one intercepted socket call to the socket layer a second wireless interface. In addition the engine may be configured to execute instructions to release the at least one intercepted socket call to the socket layer and transmit the released socket call using the activated second wireless interface.

An apparatus configured to manage socket calls from applications on a mobile device is also described. The apparatus includes means for intercepting at least one socket call from reaching a socket layer at a mobile device while a first wireless interface is active. The apparatus may further include means for activating substantially upon determining to release the at least one intercepted socket call to the socket layer a second wireless interface. The apparatus may further include means for releasing the at least one intercepted socket call to the socket layer and means for transmitting the released socket call using the activated second wireless interface.

A computer program product configured to manage socket calls from applications on a mobile device is also described. The product may include a non transitory computer readable medium. The medium may include code to intercept at least one socket call from reaching a socket layer at a mobile device while a first wireless interface is active. The medium may further include code to activate substantially upon determining to release the at least one intercepted socket call to the socket layer a second wireless interface. In addition the medium may also include code to release the at least one intercepted socket call to the socket layer and code to transmit the released socket call using the activated second wireless interface.

The foregoing has outlined rather broadly the features and technical aspects of examples according to disclosure. Additional features will be described hereinafter. The conception and specific examples disclosed may be readily utilized as a basis for modifying or designing other structures for carrying out the same purposes of the present disclosure. Such equivalent constructions do not depart from the spirit and scope of the appended claims. Features which are believed to be characteristic of the concepts disclosed herein both as to their organization and method of operation will be better understood from the following description when considered in connection with the accompanying figures. Each of the figures is provided for the purpose of illustration and description only and not as a definition of the limits of the claims.

Methods systems and devices are described to intercept requests issued from applications installed on a mobile device while a first wireless interface is active. An operating system OS executing on the mobile device may present the first interface to the applications as being active. An active interface may indicate to the applications that a radio connection is available to be established over a first network.

The intercepted requests may be system calls or sockets calls to establish communication channels for the mobile device. The terms requests system calls and socket calls may be used interchangeably herein. The requests may be captured and held from reaching the OS executing on the mobile device. For example the requests may be held from reaching a Transmission Control Protocol Internet Protocol TCP IP stack of the OS.

In mobile devices such as smartphones personal digital assistants etc. software applications may continue to operate even though the user is not actively using the device e.g. the device is in an idle mode . A mobile device may be in idle mode when certain inputs of the device are not operational or are in a sleep state. The device may be considered to be in a background mode i.e. an idle mode when a user is not using the device. For example when audio inputs such as a microphone are off the device may be in an idle mode. In addition when visual inputs such as a display of the device are off the device may be determined to be in an idle mode. Additional inputs may be used to determine whether or not the mobile device is in an idle mode as will be described below.

Applications such as social networking applications email or other communication applications data feeds etc. popular examples include Facebook Gmail Twitter etc. may continue to send and receive data even though a user is not using the device. Even under an inactivity mode of operation e.g. an idle mode power consumption and spikes in activity may occur from applications that continue to operate even when the device is ostensibly not in use. The activity by these applications may utilize communication resources such as provided by an external network. This may result in an undesired increase is signaling across the external network that may negatively affect the capabilities of the network.

Current operating systems installed on mobile devices may present the applications with an always on cellular radio interface. An always on interface may represent to the applications that they may request the establishment of a radio connection e.g. a communication channel on a cellular data network at any time even when the device is in idle mode. The always on interface may cause mobile devices to overload the cellular data network with frequent radio connections triggered asynchronously by the set of applications running on the device.

While a device is in an idle mode a user may tolerate a delay in the update of the various applications data. Accordingly socket calls from various applications may be intercepted and held from reaching the OS or a socket layer within the OS. The socket calls may then be released to the OS or the socket layer within the OS in a synchronous manner. The synchronous release of socket calls may allow for an improved utilization of radio connections since several applications may synchronously update their information.

A complementary approach addressed by the present systems and methods may include using a wireless local area network WLAN to transmit receive data to from the mobile device instead of a cellular radio to transport data updates for the applications. In some examples applications transmit receive data across the cellular network via a cellular interface presented by the OS. In accordance with the present systems and methods applications may instead transmit receive data across the WLAN on a WLAN interface while the device is in an idle mode. The WLAN interface may be activated and presented to the applications by the OS on the mobile device.

In some embodiments when a number of applications installed on a mobile device request access to a cellular network while the device is in an idle mode an unnecessary amount of network signaling may occur. For example the OS may present the cellular interface as an always on interface. A first application may see the activated cellular interface and initiate a socket call which may require the establishment of a communication channel on the cellular network. After the data has been transmitted received the channel may be discontinued. A second application may also see the always on cellular interface and initiate a socket call to also establish a communication channel to transmit receive data across the cellular network. Each time a communication channel is established the amount of network signaling may increase so that the available bandwidth of the network may decrease. As a result the present systems and methods may intercept requests for access to the cellular network when the device is in an idle mode. When it is determined to release the intercepted requests to the OS a WLAN interface may be activated. The requests may be transmitted on the WLAN interface instead of the cellular interface . When the requests have been substantially performed the WLAN interface may be deactivated to conserve battery power of the device.

The following description provides examples and is not limiting of the scope applicability or configuration set forth in the claims. Changes may be made in the function and arrangement of elements discussed without departing from the spirit and scope of the disclosure. Various embodiments may omit substitute or add various procedures or components as appropriate. For instance the methods described may be performed in an order different from that described and various steps may be added omitted or combined. Also features described with respect to certain embodiments may be combined in other embodiments.

Referring now to a block diagram illustrates an example of a wireless network environment . The network environment may include a mobile device and a communication network . The device may communicate with the network using a number of radio channels . For example a control channel may be established between the device and the network . In addition other types of channels through may also be established. These other types of channels may include data channels voice channels etc.

During operation the device may execute applications which may interface with the network using any of a number of radios. For example an application may issue a request to establish communications with a host in the network . In one example the requests may be a networking system call such as a socket layer call. The request may be intended for the socket layer of an OS on the device . Conventional devices typically allow these types of requests to proceed directly to the OS to be processed. Upon receipt of the request conventional devices begin network signaling processes to establish the control channel through a data connection setup procedure. When data connection setup procedures are executed on the mobile device the level of signaling across the network may increase and battery power is consumed. This may reduce the efficiency of the network and the mobile device .

In one configuration the device may include an architecture to intercept and capture requests from reaching the OS while a first wireless interface is active. This architecture may intercept a request for network access from an application such as a request for cellular network access. Upon intercepting the request the architecture may hold or delay the request from reaching a TCP IP stack of the OS. The TCP IP stack may include communication protocols that may be built into the OS providing the OS with a standard for transmitting data over a network. Upon substantially determining to release the requests to the OS the architecture may activate a second wireless interface. The intercepted requests may be aggregated with other intercepted requests for network access received from additional applications. The aggregated requests may be bundled together and released to a socket layer within the OS in a synchronous manner. In one embodiment the aggregated requests may be released to the OS in a synchronous manner. The requests may then be transmitted using the second wireless interface. In one example the requests may be released upon the occurrence of a particular event e.g. the mobile device becomes active . In one configuration the architecture described above relating to the intercepting determining activating and releasing may be used when the device is in an idle mode.

In one example the activation module may determine when the intercepted requests are to be released to the OS or to a socket layer within the OS . Upon substantially determining to release the requests the activation module may activate a second wireless interface. For example the activation module may activate a WLAN interface. The release module may release the requests when the WLAN interface has been activated.

The determination to release the requests may be based on one or more factors. In one embodiment the determination to release the intercepted requests may include detecting the expiration of a timer that represents the length of time requests have been held or delayed from reaching the OS or from reaching a socket layer within the OS . The requests may also be released upon detecting a maximum number of intercepted requests being held in a queue. In one configuration a request may be released upon determining that a critical application issued the request to the OS . A critical application may be an application with little or no delay tolerance. As a result requests originating from these applications may possess a low delay tolerance. Examples of critical applications may include but are not limited to child tracking applications emergency based applications subscription based applications etc. In one configuration requests sent from critical applications may not be held or delayed from reaching the OS but may instead proceed directly to the socket layer of the operating system after being intercepted by the intercepting module . In addition requests with a delay tolerance that is below a certain threshold may not be delayed from reaching the OS after being intercepted. For example a non critical application may issue a request that is intercepted. Even though the application is non critical the particular request may not possess a delay tolerance e.g. a critical update to the application . As a result the request may be released immediately to the OS after being intercepted.

Additional factors may be employed to determine when to release the intercepted requests and permit application connectivity to a network. For example if there is a trigger to establish a data connection setup procedure such as receiving a system call from a critical application such as an emergency application that cannot be delayed intercepted requests may be released to the OS so that communications channels may be established in conjunction with the emergency application. In another example the intercepted requests may be released to a socket layer within the OS . Requests may also be released if the quality of a radio channel satisfies a threshold e.g. high signal strength SNR or other desirable performance metrics . Requests may be released periodically as predetermined or as selectively determined by the mobile device . Another heuristic to determine to release the requests may be when the user approaches the device before he she turns the screen on in order to operate incognito. In this example an accelerometer may detect the user grabbing the device or a user proximity sensor may indicate the user is approaching. In another aspect while running on batteries requests may be determined to be released when the screen is unlocked e.g. after a PIN is entered correctly . In this aspect requests may not be released when a random button is pressed e.g. device is in a purse or pocket .

In one example a status change of a display of the device may be a factor in the determination to release held requests. For example the display may change from an off state to an on state. A status change of a microphone off to on may also be a factor in the determination to release intercepted requests. Further another factor may include detecting a status change of a Global Positioning System GPS sensor. For example the sensor may change states when it detects movement of the mobile device . Additional factors used to determine when to release intercepted requests may include an indication that a universal serial bus port is in use or an indication that an audio equipment is connected to the device . In addition an indication that video equipment is connected to the mobile device may also serve as a determining factor to release the requests to the OS of the mobile device . Further an indication that a connection to a certain network is available may trigger the release of the requests. For example an indication that a connection to a Wi Fi type of network may cause the requests to be released. Similarly an indication that a radio connection to a cellular network is already open may also trigger the release of the requests to the OS of the device . In yet another aspect requests may be released according to some combination of the above or other factors. Although the preceding description is with respect to an application programming interface API architecture the concepts may equally apply in hardware firmware or any combination of hardware and software.

Employing the techniques and structures disclosed herein the mobile device may employ a software layer for illustrative purposes called a wrapper which provides an application program interface API to capture system calls or socket calls from applications and hold them from reaching an OS . In one configuration the application connectivity engine may execute the wrapper . In one example the wrapper may intercept a request e.g. system call socket call etc. for network access originating from an application in the application layer . In one embodiment the wrapper may include the intercepting module of . The wrapper may delay the request from reaching the OS executing on the device . The OS may present an activated first wireless interface to the applications. The wrapper may hold the intercepted request in a queue and prevent them from reaching the OS . The wrapper may aggregate the intercepted request with other requests intercepted from additional applications. The wrapper may hold or delay the requests from reaching a socket layer of the operating system . When a request for network access reaches the socket layer the process to establish a communication channel using one or more of the radios may be initiated according to the interface. For example the first wireless interface may be a cellular interface. When socket calls are released when the cellular interface is active setup procedures may be initiated to establish a radio connection with a cellular network. The setup procedures may include signaling techniques that reduce the available bandwidth of the cellular network.

The socket layer may process the requests and notify a particular radio to begin the connection setup procedure to establish a connection between the application that initiated the request and the network . For example the socket layer may issue calls or requests to establish a binding between a particular application and a radio for example radio . Radio may begin transmitting signals to the network to begin the connection setup procedure by establishing a control channel which may be an example of the control channel of .

When the requests are substantially determined to be released to the socket layer the OS may activate a second wireless interface prior to the requests being released . For example the OS may include or cause the activation module of to activate the second wireless interface. The wrapper may include the releasing module of and upon being notified that the second wireless interface is active the wrapper may release the intercepted requests to the socket layer of the OS . Data may be transmitted to from the applications using a second wireless network via the second wireless interface. An example of the second wireless network may include a WLAN.

Thus the device architecture provides for intercepting requests to access a network while a first wireless interface is active activating a second wireless interface upon determining to release the requests to the OS and releasing the requests to the OS . The activation of the second wireless interface may serve to reduce the network signaling on the cellular network that accompanies the release of requests on a cellular interface.

In one aspect processor includes at least one of a central processing unit CPU processor gate array hardware logic memory elements and or hardware executing software. The processor operates to control the operation of the device so that system calls for network access initiated by applications executing at the application layer may be held from reaching the OS until a second wireless interface is activated and then released to the OS or released to a socket layer within the OS . In one implementation the processor may execute computer readable instructions related to performing any of a number of functions. For example the processor may operate to analyze information received or communicated from the device to effectuate the interception of requests and activation of the second wireless interface. In another aspect the processor may operate to generate information that may be utilized by the memory radio unit application layer the wrapper OS and or application connectivity engine to effectuate the activation of a second wireless interface upon determining to release intercepted requests to the OS 

The radio unit may include hardware and or a processor executing software that may provide a number of radios interfaces that may be used to interface the device with a number of external entities such as external communication networks using a number of channels . For instance radio unit may provide radios interfaces to communicate using cellular WLAN WiFi Bluetooth or any other technologies to communicate with communication networks using the channels 

The application layer may include hardware and or a processor executing software that may store and or execute one or more applications on the device . In one implementation the application layer may allow applications to initiate networking function calls to request networking services such as requesting connection to a radio interface for the purpose of communicating with an external network or system.

The OS may include a socket layer. The socket layer may include hardware and or a processor executing software that may perform socket layer functions. In one implementation the socket layer functions may include such functions as connect bind and setsockopt . A connect function operates to establish a connection between two hosts using a particular radio interface. For example the particular radio interface may be selected from the number of candidate radios provided by the radio unit . In one aspect the socket layer may perform a variety of socket layer functions or commands. The OS may also include a number of wireless interfaces through . As previously described the OS may activate deactivate the various interfaces. Data may be transmitted received from by the device using at least one of the activated wireless interfaces. Examples of the wireless interfaces may include a cellular interface a WLAN interface etc.

The application connectivity engine may include hardware and or a processor executing software that may execute the wrapper to cause the wrapper to intercept a request for network access from an application executing on the mobile device . The wrapper may also delay the intercepted request from reaching the OS . The OS may activate a second wireless interface such as a WLAN interface and the wrapper may release the held requests to the OS 

The connectivity engine may cause the wrapper to capture and hold requests for network access in various ways. The engine may also cause the OS to activate the second wireless interface upon determining to release the requests. In one example the engine may cause the activation module of to perform a scan for an available wireless network such as a WLAN. Upon detecting an available WLAN the activation module may cause a radio connection to be established with the WLAN. When the connection is established the OS may activate the WLAN interface to present to the applications. The intercepted requests may be released to the OS . The requests may be released to the socket layer of the OS . The socket layer may initiate procedures to perform communications across the established radio connection between the applications that originated the requests and a remote device such as a server using the WLAN interface.

The memory may include RAM ROM EEPROM or any other type of memory device that operates to allow information to be stored and retrieved at the device . In one implementation the memory may store computer readable instructions executed by the processor . Memory may also store any of a number of other types of data including data generated by any of the processor radio unit application layer wrapper OS and or application connectivity engine . Memory may include a number of different configurations including as random access memory battery backed memory hard disk magnetic tape etc. Various features may also be implemented upon memory such as compression and automatic back up.

In various implementations the device may include a computer program product having one or more program instructions instructions or sets of codes stored or embodied on a non transitory computer readable medium. When the codes are executed by at least one processor for instance processor and or the application connectivity engine their execution may cause the processor and or the connectivity engine to control the device to provide the functions of the activation architecture described herein. For example the non transitory computer readable medium may be a floppy disk CDROM memory card FLASH memory device RAM ROM or any other type of memory device or computer readable medium that interfaces to the device . In another aspect the sets of codes may be downloaded into the device from an external device or communication network resource. The sets of codes when executed operate to provide aspects of the system call interception and wireless interface activation architecture described herein.

As shown the blocks are divided between an application processor and a modem processor but the various functionality may be organized differently from the example of . An application layer may interact with an application connection engine App CnE and a socket layer . The application connection engine may communicate with a modem connection engine Modem CnE . The modem connection engine may manage communication resources such as a radio unit and the number of radios therein. A wrapper may be executed in the application processor between the application layer and the socket layer of the OS . The wrapper may capture data passed between the application layer and the socket layer . For example the wrapper may be placed between the application layer and the socket layer to intercept socket calls sent from the application layer and intended for the socket layer . In one configuration the wrapper may intercept socket calls from the application layer during a period of inactivity by the device while a first wireless interface such as a cellular interface is active. The wrapper may hold the intercepted calls until a determination is made to release the socket calls to the socket layer . Upon determining to release the calls a second wireless interface may be activated such as a WLAN interface. The socket calls may trigger a request to establish a communications channel using a radio within the radio unit .

In another example the wrapper may aggregate system calls intercepted from the application layer during a period of inactivity by the device while the cellular interface is active. The wrapper may hold the intercepted aggregated calls until the WLAN interface is activated. The wrapper may then release the calls to the socket layer . Data may be transmitted received from by the device using a radio connection on the WLAN established by the radio unit .

In one configuration the wrapper may be invisible to the applications at the application layer so that the applications are unaware that their requests are being held from reaching the socket layer . The wrapper may be a separate software component or may be incorporated into another component such as the application connectivity engine or the OS .

In one example prior to time t a determination may be made that the held socket calls are to be released. At time ta second wireless interface may be enabled. The second interface may be a WLAN interface. The interface may be activated upon substantially determining to release the socket calls . At time t the socket calls may be released to the OS or the calls may be released to a socket layer within the OS . As a result the mobile device may perform the socket call operations on the WLAN interface instead of the cellular interface. In one example at time tthe second wireless interface may be deactivated. As a result the radio connection with the WLAN network may be terminated. A mobile device such as the device of or in idle mode with an activated WLAN interface may consume more power than an idle device with an activated cellular interface. For example the paging cycle for a WLAN interface may be around 100 ms and about 2.5 seconds on the cellular interface. Data transmission however is typically more power efficient over the WLAN interface than over the cellular interface. For example the WLAN interface may use much less power than the cellular interface used to transfer most types of content. Thus according to the present systems and methods the WLAN interface may be brought up to carry the release of data and then taken offline to conserve battery power of the device. The WLAN interface may be disabled when the TCP connections are substantially closed or when a connection timer expires. In one embodiment the cellular interface may continue to appear to be available to applications throughout the steps described above.

At block at least one socket call may be intercepted from reaching a socket layer while a first wireless interface is active at the OS . In one example the intercepting module that may include the wrapper may intercept the socket call. The socket call may be a request to perform a communication for the mobile device such as establish a communication channel for the mobile device . The request may be sent from an application executing at the application layer of the mobile device . In one example the socket call may be a request to initiate a data connection setup procedure to enable the application to interface with an external network such as the network . For example the socket call may be a system call to the socket layer of the OS on the mobile device . The active first wireless interface may be a cellular interface. Socket calls such as connect socket calls received by the OS may cause the OS to initiate setup procedures to establish a radio connection on the cellular network.

At block a second wireless interface may be activated at the OS substantially upon determining to release the at least one intercepted socket call to the socket layer within the OS . In one configuration the OS may include the activation module . The activation module may determine to release the at least one socket call and may activate the second wireless interface prior to the release of the socket call. The second interface may be a WLAN interface. Activating the second wireless interface may include the activation module scanning signals to determine if a WLAN is available. Upon detecting an available WLAN a radio connection may be established on the WLAN. For example the modem connectivity engine may execute one or more sets of code for the radio unit to initiate a radio setup procedure. The procedure may include a radio establishing a radio connection on the WLAN. Upon establishing the radio connection on the WLAN the activation module may activate the WLAN interface and generate a notification for the applications in the application layer that indicates the WLAN interface is activated.

At block the at least one intercepted socket call may be released. In one embodiment the releasing module may release the socket call upon receiving the notification that the WLAN interface is activated. The socket call may be released to the socket layer. In one configuration the releasing module may release the socket call upon the occurrence of a releasing triggering event as described previously. If a releasing triggering event occurs before the WLAN interface is activated the releasing module may release the socket call and setup procedures may be initiated to establish a radio connection for the cellular network. In one embodiment the cellular interface may remain active and visible to the applications.

Thus the method may provide for intercepting and holding of socket calls issued by applications while a first wireless interface is active on a mobile device in an idle mode. The requests may be held until it is determined to release the requests. A second wireless interface may be activated upon determining to release the requests. As a result the requests may be released to the socket layer and data may be transmitted received via the second wireless interface instead of the previously active first wireless interface. It should be noted that the method is just one implementation and that the operations of the method may be rearranged or otherwise modified such that other implementations are possible.

At block a request for network access is intercepted. The request may be sent from an application executing at the application layer of the mobile device . In one example the request may be a request to establish a communication channel with an external network such as the network . The request may be a system call to the socket layer of the OS on the device . Upon receiving the request the socket layer may initiate procedures to establish the communication channel and provide a callback function to the application when the channel is established. The request may be intercepted while a first wireless interface such as a cellular interface is available at the OS .

At block a determination may be made as to whether the device is in an idle mode. For example a determination may be made as to whether the device is powered down in a sleep mode etc. The device may also be determined to be in an idle mode if for example the display of the device is inactive audio outputs are inactive etc. If it is determined that the device is active at block the request may be released to the socket layer of the OS . At block a radio connection may be established with a first wireless network. At block the device may engage in communications across the first wireless network using the established radio connection and the active first wireless interface. At block the radio connection with the first wireless network may be terminated upon substantially concluding the communications across the network. The first wireless interface may be a cellular interface and the first wireless network may be a cellular network.

If it is determined that the device is in an idle mode a scan may be performed to determine if a second wireless network is available. At block a radio connection may be established with an available second wireless network. At block a second wireless interface may be activated at the OS for the second wireless network. For example upon establishing the radio connection the OS may activate the interface to allow applications executing in the application layer to communicate across the second wireless network. In one embodiment at block the request may be released to a socket layer of the OS . At block the device may engage in communications across the second wireless network via the second wireless interface. The communications may include transmitting receiving data across the second network using the established radio connection and the second interface. At block the radio connection with the second network may be terminated and the second wireless interface may be deactivated. The radio connection and the second interface may be terminated upon the substantial completion of the socket calls issued from the applications on the second wireless interface.

Thus the method may provide for intercepting and holding requests for network access and activating a second interface upon determining to release the held requests to the OS . By releasing the requests when the second interface is active communications may execute across the second network via the second interface. Signaling may be minimized by avoiding a number of applications releasing requests to the cellular interface and a number of setup procedures being initiated on the cellular network. It should be noted that the method is just one implementation and that the operations of the method may be rearranged or otherwise modified such that other implementations are possible.

At block a request from an application to establish a communication channel for the mobile device may be intercepted. The device may be in an idle mode. In one configuration a first wireless interface may be active at the OS at the time the request is intercepted. The first wireless interface may be associated with a first wireless network. At block a scan may be performed to locate an available second wireless network that is different than the first wireless network. At block a determination may be made as to whether the second wireless network is available. For example the second wireless network may be a WLAN or Wi Fi network. If it is determined that the second wireless network is not available at block the intercepted request may be released to the socket layer of the OS . At block a radio connection may be established with the first wireless network. At block the mobile device may engage in communications across the first wireless network using the established radio connection and the first wireless interface.

At block if it is determined that the second wireless network is available at block a radio connection may be established with the second wireless network. For example a radio within the radio unit may establish communications with a radio of a remote device e.g. server other mobile device etc. to establish a communications channel across the second wireless network. At block a second wireless interface may be activated by the OS for the second wireless network. The interface may allow applications executing on the mobile device to transmit receive data across the second wireless network via the second wireless interface. At block the request may be released to the socket layer of the OS . The request may be released to the socket layer . At block the mobile device may engage in communications across the second wireless network using the established radio connection and the second wireless interface. At block the radio connection with the second wireless network may be terminated. The connection may be terminated when the mobile device substantially terminates communications across the network. For example the connection may be terminated when the socket calls issued from the applications on the device are substantially completed or executed. In addition to terminating the radio connection with the second wireless network the OS may deactivate the second wireless interface. As a result the applications installed on the device become aware that the second wireless network is no longer available when the second interface is deactivated.

Thus the method may provide for scanning for an available WLAN and if a WLAN is available releasing socket calls on a WLAN interface. It should be noted that the method is just one implementation and that the operations of the method may be rearranged or otherwise modified such that other implementations are possible.

The method begins at a block by intercepting a request from a first application. The request may be a socket call to establish a communication channel for the mobile device . The device may be in an idle mode and the request may be intercepted while the OS of the device presents an active first wireless interface to the applications. At block one or more additional applications may be identified that have a persistent or long lived TCP connection on the first wireless interface. For example applications that provide a presence service may have a TCP connection that is kept open for extended periods of time. An example of such an application that may have a long lived TCP connection may include Skype .

At block a radio connection with a second wireless network may be established. At block a second wireless interface may be activated by the OS when the radio connection for the second wireless network is established. At block a notification may be generated indicating that the second wireless interface is activated. The notification may notify applications to use the WLAN interface while it is active. In one example the OS may generate the notification and may transmit the notification to the first application. At block the one or more additional applications with the persistent TCP connection may be prevented from receiving the notification. If these applications are notified when a WLAN becomes available they may close the long lived TCP connection on the cellular interface and re register a WLAN IP address with a server. When the WLAN is terminated these applications may then re register on the cellular interface. As a result two connections to the cellular radio may occur. For example one to close the TCP connection and one to re register the applications after the WLAN is terminated. This may increase the level of signaling on the cellular network.

In one embodiment the application connectivity engine may prevent the one or more applications that have a long lived TCP connection from receiving the notification by disabling the generation of the notification all together. In another embodiment applications installed on the mobile device may register with the OS for notifications regarding interfaces being activated and deactivated. The engine may build a list of applications that have a persistent TCP connection on the cellular interface prior to activating the WLAN. The application connectivity engine may deregister these applications from the notification service or intercept and discard the notification intended for these applications. As another example to prevent the notification from being received by applications with a long lived TCP connection the application connectivity engine may discard a connect or other socket calls from these applications while the WLAN interface is active. The engine may also discard system calls from these applications for a certain time period after the WLAN is deactivated. In one embodiment the engine may execute the wrapper to route write socket calls from these applications to the interface where the TCP connection is established e.g. the cellular interface . No particular handling may be required. As a result the applications may not terminate the persistent TCP connection and attempt to register with the WLAN. Applications which have bound their sockets to certain interfaces through bind or by adding a destination based route in a routing table may not be affected by the activation of the WLAN interface.

At block the request may be released to the socket layer of the OS . At block the mobile device may engage in communications across the second wireless network using the established radio connection and the second wireless interface.

Employing the techniques and structures disclosed herein socket calls from applications are captured and held them from reaching the OS while a first wireless interface is activated which may be a cellular interface. The OS may activate a second wireless interface for example a WLAN interface and notify the applications that the WLAN is activated. The held system calls or socket calls may be released to the OS or to a socket layer within the OS. Activating the second wireless interface reduces the level of signaling that occurs by applications asynchronously requesting radio connections on the first wireless network e.g. cellular network via the first interface.

Those of skill in the art would understand that information and signals may be represented using any of a variety of different technologies and techniques. For example data instructions commands information signals bits symbols and chips that may be referenced throughout the above description may be represented by voltages currents electromagnetic waves magnetic fields or particles optical fields or particles or any combination thereof.

Those of skill would further appreciate that the various illustrative logical blocks modules circuits and algorithm steps described in connection with the embodiments disclosed herein may be implemented as electronic hardware computer software or combinations of both. To clearly illustrate this interchangeability of hardware and software various illustrative components blocks modules circuits and steps have been described above generally in terms of their functionality. Whether such functionality is implemented as hardware or software depends upon the particular application and design constraints imposed on the overall system. Skilled artisans may implement the described functionality in varying ways for each particular application but such implementation decisions should not be interpreted as causing a departure from the scope of the exemplary embodiments of the invention.

The various illustrative logical blocks modules and circuits described in connection with the embodiments disclosed herein may be implemented or performed with a general purpose processor a Digital Signal Processor DSP an Application Specific Integrated Circuit ASIC a Field Programmable Gate Array FPGA or other programmable logic device discrete gate or transistor logic discrete hardware components or any combination thereof designed to perform the functions described herein. A general purpose processor may be a microprocessor but in the alternative the processor may be any conventional processor controller microcontroller or state machine. A processor may also be implemented as a combination of computing devices e.g. a combination of a DSP and a microprocessor a number of microprocessors one or more microprocessors in conjunction with a DSP core or any other such configuration.

The steps of a method or algorithm described in connection with the embodiments disclosed herein may be embodied directly in hardware in a software module executed by a processor or in a combination of the two. A software module may reside in Random Access Memory RAM flash memory Read Only Memory ROM Electrically Programmable ROM EPROM Electrically Erasable Programmable ROM EEPROM registers hard disk a removable disk a CD ROM or any other form of storage medium known in the art. An exemplary storage medium is coupled to the processor such that the processor can read information from and write information to the storage medium. In the alternative the storage medium may be integral to the processor. The processor and the storage medium may reside in an ASIC. The ASIC may reside in a user terminal. In the alternative the processor and the storage medium may reside as discrete components in a user terminal.

In one or more exemplary embodiments the functions described may be implemented in hardware software firmware or any combination thereof. If implemented in software the functions may be stored on or transmitted over as one or more instructions or code on a non transitory computer readable medium. Computer readable media includes both computer storage media and communication media including any medium that facilitates transfer of a computer program from one place to another. A storage media may be any available media that can be accessed by a computer. By way of example and not limitation such computer readable media can comprise RAM ROM EEPROM CD ROM or other optical disk storage magnetic disk storage or other magnetic storage devices or any other medium that can be used to carry or store desired program code in the form of instructions or data structures and that can be accessed by a computer. Also any connection is properly termed a computer readable medium. For example if the software is transmitted from a website server or other remote source using a coaxial cable fiber optic cable twisted pair digital subscriber line DSL or wireless technologies such as infrared radio and microwave then the coaxial cable fiber optic cable twisted pair DSL or wireless technologies such as infrared radio and microwave are included in the definition of medium. Disk and disc as used herein includes compact disc CD laser disc optical disc digital versatile disc DVD floppy disk and blu ray disc where disks usually reproduce data magnetically while discs reproduce data optically with lasers. Combinations of the above should also be included within the scope of computer readable media.

The previous description of the disclosed exemplary embodiments is provided to enable any person skilled in the art to make or use the invention. Various modifications to these exemplary embodiments will be readily apparent to those skilled in the art and the generic principles defined herein may be applied to other embodiments without departing from the spirit or scope of the invention. Thus the invention is not intended to be limited to the exemplary embodiments shown herein but is to be accorded the widest scope consistent with the principles and novel features disclosed herein.

