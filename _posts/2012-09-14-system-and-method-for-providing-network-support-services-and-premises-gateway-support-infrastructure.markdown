---

title: System and method for providing network support services and premises gateway support infrastructure
abstract: A service management system communicates via wide area network with gateway devices located at respective user premises. The service management system remotely manages delivery of application services by the gateway device(s), e.g. by selectively activating or deactivating service logic modules in the gateway devices. The service management system also may selectively provide secure communications and exchange of information among gateway devices and among associated endpoint devices. An exemplary service management system includes a router connected to the network and one or more computer platforms, for implementing management functions. Examples of the functions include a connection manager for controlling system communications with the gateway devices, an authentication manager for authenticating each gateway device and controlling the connection manager and a subscription manager for managing applications services and/or features offered by the gateway devices. A service manager, controlled by the subscription manager, distributes service specific configuration data to authenticated gateway devices.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09270492&OS=09270492&RS=09270492
owner: Prodea Systems, Inc.
number: 09270492
owner_city: Richardson
owner_country: US
publication_date: 20120914
---
This application is a Continuation of U.S. application Ser. No. 12 521 758 filed May 3 2010 which is a United States national phase application of co pending international application Number PCT US2007 019544 filed Sep. 7 2007 which claims the benefit of U.S. provisional application No. 60 882 865 filed Dec. 29 2006 and of U.S. provisional application No. 60 882 862 filed Dec. 29 2006 the disclosures of which are incorporated herein by reference.

The present subject matter relates to a service management system for remotely managing delivery of application services by one or more gateway devices at respective user premises which may also selectively provide secure communications and exchange of information among gateway devices and among endpoint devices associated with the gateway devices.

The digital home is now becoming more complex with the myriad of new and emerging digital devices intended to address many user and consumer needs such as communication entertainment privacy and security etc. However given the complexity of the emerging digital home and digital environments generally users who are technologically challenged may find it a daunting and intimidating task to manage their home networks and interconnected digital devices. Moreover new paradigms are emerging oriented to delivering media content to and the consuming of media content at the home. Many of these paradigms rely on communication of application specific data to and or from the Internet as opposed to conventional telephone or broadcast video type applications. The protection of received Internet sourced media content in addition to user generated media content is additionally an important aspect that may be inadequately addressed by the technologically challenged user. Furthermore with respect to Internet based data most of the content delivery solutions are provided to the digital home networks through availability of the two foot interface i.e. the PC . It is relatively cumbersome to bring this content to the ten foot interface e.g. the television .

Thus a need exists for a technique or devices to simplify the overall management of services and applications available to the digital home or even the small enterprise. Such a technique or devices would reduce the complexity of the maintenance upgrading and operation of even the more basic needs addressed by emerging digital endpoint devices and networks. Approaches that suggest greater functionality in home based appliances fail to reduce or address the complexity of managing and provisioning those appliances. For example while the home gateway server appliance described in U.S. Pat. No. 6 930 598 enables networked electronic devices to communicate with each other without the direct interaction with external networks and provides a mechanism whereby a member of the household may be informed of certain network related events without having to use their home computer or other client devices it does not provide a convenient or simplified way of managing the services and applications executed by or associated with that device. Thus an unmet need exists for a device associated with a user premises that has robust functionality but does not require sophisticated or inordinate attention from the user to manage provision and utilize them.

In practice a customer typically subscribes to basic transport services from a network Service Provider e.g. ISP Internet Service provider cable provider fixed wireless providers ILEC Incumbent Local Exchange Carrier or CLEC Competitive Local Exchange Carrier . For example a customer may have broadband Internet access via cable modem digital subscriber line service or the like. Digital video service may be provided separately. The network service provider manages these basic services at the logical network layer typically at layers 1 2 or 3 of the OSI model. While network services and associated devices may operate minimally at those levels they operate at those levels only to support operations at OSI layers 1 2 or 3. Many applications however involve higher level service logic for applications that view the network transport as a transparent pipe. The current internet applications delivery and management architecture and many devices or management systems based on it require a server with robust processing and storage capability to be located at the network operations center not in the home. For voice over internet protocol VoIP type telephone service for example the VoIP service provider operates a session initiation protocol SIP server or the like and each user has only client functionality. The network transport layers are transparent to the IP packets containing the voice and related signaling. The SIP server however controls the call set up tear down billing and the like for the voice call services. With such an architecture the major capabilities and functionalities connected with providing application services from the server throughout the network reside on the server and supporting elements all of which are located in the network operations center.

It might be helpful to walk through examples of the configuration for application services delivery to a client of an application within a user premises under the typical current network configuration. depicts one possible configuration for a client application to access a particular service that is being hosted of served outside of the user premises based on the typical and currently employed network application service configuration. We identify two regimes in the overall architecture the Service Provider Network regime WAN side and the User Premises Network regime LAN side . The association between the Service Provider Network and the User Premises Network is broken down into three layers Network Interconnect Layer NI Network Function Layer NF and the Application Services Layer AS . These layers do not represent physical communication pathways but are a logical representation of pathways and elements employed in a network based communication.

The separation between the managed Service Provider Network WAN side and the User Premises Network LAN side is depicted as the Network Service provider Demarcation. The Network Service Provider Demarcation at the Network Interconnect Layer represents the logical and physical separation between the user premises and the broad band network. In the present representation of the three functional layers the Network Service Provider Demarcation is extended into the Services and Application Layer to emphasize the functional barrier at that layer between the Service Provider Network and the User Premises Network in currently configured networks.

The NI Layer depicts how the connectivity between a User Premises Network and the Public Service Provider Network is established. On the Service Provider Network side the Wide Area Network services are terminated onto a WAN termination device with the appropriate interface e.g. a Broadband internet service such as ADSL would terminate on to a managed ADSL Terminal Adapter . The WAN termination layer adapts the WAN interface into a compatible LAN interface e.g. Ethernet or WiFi . On the User Premises Network side the LAN Termination interfaces are used to connect to the Local Area Network via a variety of interfaces such as Ethernet WiFi MOCA etc.

The LAN Termination interfaces and the WAN Termination interface could reside on two separate physical devices or they could reside on one physical device. In either case on the User Premises Network side packets or data must flow through the NF Layer between the WAN Termination Interface and the LAN Termination Interface. One or both of these interfaces may reside on a gateway device. Gateway and like router devices are currently available for various premises that allow several computers to communicate with one another and to share a broadband Internet connection. These devices function as routers by matching local network addresses and the hostnames of the local computers with the actual networking hardware detected. As gateways these devices translate local network addresses to those used by the Internet for outgoing communications and do the opposite translation for incoming packets.

The User Premises NF Layer allows for switching of packets between LAN devices and routing or bridging of packets between the LAN and WAN interfaces. It could physically reside on the same device s with the LAN Termination or it could exist at an independent device that could interconnect to the LAN Termination interface via a variety of physical interfaces e.g. Ethernet MOCA etc. . The Service Provider NF Layer provides the Wide Area Network access between the WAN Termination device and the AS Layer where all the applications servers are being hosted. The Internet could be used for this connectivity as could a private packet cell network e.g. Cellular packet network or a private ATM or packet backbone .

The AS Layer represents the functional layer that provides access to applications services by application clients. On the User Premises side the AS Layer provides a Firewall to protect the application client from application level attacks from the open Internet. On the Service Provider side the AS Layer encompasses application services such as Parental Control Backup and Call Processing. These application services exist on a managed Application Service Delivery Platform ASD on a secure network server that can be hosted at a facility that has private and or public data connection paths. The ASD may include three functional modules namely the Application Service Enforcement ASE module the Application Service Logic ASL module and the Application Service Management ASM module.

The ASE module is responsible for enforcing the relevant Application Client privileges to the application services. It gets the policies and permissions of each application client from the ASM module such as provisioning data and subscription data and enforces those policies against the requested actions by the client application.

The ASL module executes the application services that the Application Clients request. Such services could be Call Processing Parental Control Peered Networking Backup etc. The ASL module must interact with the ASM module for monitoring purposes and status information such as Call Data Recording and Billing. It must also interact with the ASE module to provide access to the client applications that have passed the policy enforcement procedures.

The ASM module as described above provides the necessary data to the ASE and ASL modules for them to carry out their respective functions. It also oversees the overall integration and communication among all the modules and the services that are managed by the ASM. The ASM also manages the overall security and integrity of the ASD.

All ASD modules are in constant communication with each other preferably through secure connections. The inter module communication may be managed by the ASM or may be independent of a central management function. Note that the ASE ASL and ASM modules are only examples of functions that may be logically bundled other bundles and other means of bundling these functions are possible.

In the logical hierarchy such as shown in a home gateway device may implement the NI layer functions and the user premises side NF layer functions. The firewall functionality may reside in the gateway or in one or more other elements on the premises network. For example many PCs internally implement firewalls e.g. in close association with the client programming of the endpoint device. As can be seen by the illustrations in however even with a home gateway deployment for a premises network the application services functionality still requires the support and service logic to reside on a server in the network. That is for service provisioning service management and upgrades remote diagnostics for a digital endpoint device such as a PC or SIP phone the home premises still must rely on the application service logic executed by the service providers in their server networks typically according to proprietary platforms. Moreover many other core services e.g. file storage media content access and delivery are offloaded to other 3rd party service providers that provide service logic and support applications at their network server devices.

With the paradigm discussed above relative to it is currently the case that many of the application service providers also find it difficult to provide and support new emerging technologies at the home. That is service providers are challenged to select a platform that can evolve with their applications. With existing service architectures the launch of new services compounds complexity to the core network adding to both capital and operating expenditures.

Thus as new services come to the fold often with the requirement of new equipment e.g. integrated access devices IADs for VoIP and set top boxes for streaming video the management of the customer premises equipment both hardware and software complicates customer support requirements. Managing the home network environment can be an inhibitor to the adoption of new services both from the user perspective and from the perspective of management by the service providers.

A need exists for a new paradigm with improved convenience for the user and easier management for the application service provider. In that regard it would be desirable to provide an arrangement in which one or more aspects of application services facilitated by gateway devices within the user premises are centrally managed.

The disclosure herein addresses one or more of the issues outlined above from a system perspective. The disclosure encompasses a service management system as well as combinations of such a system with one or more gateway devices at user premises.

For example a service management system is disclosed for managing services through gateway devices at respective user premises. The gateway devices provide gateway connectivity to a wide area network and at least some server functionality for service delivery for one or more digital endpoint client devices associated with the gateway device one or more of which may be at respective customer premises. Gateway devices communicate with endpoint devices within respective premises over networks within the customer premises. The service management system includes a router for connection to the wide area network for communications with the gateway devices and one or more computer platforms coupled to the router. The computer platform is configured for implementing a connection manager for controlling system communications with the managed gateway devices via the router and the wide area network. The platform also provides an authentication manager for authenticating each of the gateway devices and controlling the connection manager to establish a signaling communication link through the wide area network with each of the gateway devices upon successful authentication of each respective gateway device. A subscription manager manages applications services and or features of the server functionality to be enabled on each respective authenticated gateway device a service subscription from an application service provider and associated with the respective authenticated gateway device. The computer platform also is configured for implementing a service manager for distributing service specific configuration data to logic implementing the server functionality in authenticated gateway devices via the wide area network responsive to the subscription manager. An application gateway can be configured to execute the application services provided from the application service provider wherein the application gateway executes the application services at the user premises independent of application services executing on the application service provider s network and wherein upon receiving a request to execute the application service on the application gateway at the user premises the service manager communicates with the subscription manager to verify that the request conforms with policy and usage rules associated with the application services in order to authorize execution of the application services on the application gateway. A graphical user interface rendered on a display can be associated with at least one of the at least one computer platform gateway devices and one or more endpoint devices for enabling management and control of application services executed by the application gateway on at least one of the computer platform and the one or more endpoint devices.

Application services an include a service application executed at the application gateway that enables at least one of home automation of connected devices within the user premises home security of the user premises via connected devices within the user premises management of video cameras and associated video data captured within the user premises management of sensors located at or within the user premises management of monitors at or within the user premises home automation of connected devices within the user premises management including monitoring of medical devices within the user premises management of wired and wireless connections to endpoint devices at or within the user premises management of digital rights utilized by endpoint devices at or within the user premises management of context sensitive advertising that is available for rendering on endpoint devices at or within the user premises.

In the disclosed example the authentication manager confirms authentication of the respective gateway device and of application services provided or executed by each respective gateway device from time to time. The authentication manager controls the connection manager to maintain a logical session for the signaling communication link through the wide area network with each respective gateway device as long as the authentication manager continues to confirm the authentication of the respective gateway device. Typically this signaling link remains logically on through the wide area network so long as the gateway device is powered on and authenticated by the service management system.

The signaling communications between the gateway devices and the service management center may utilize a variety of different types of protocols. In the examples the system is configured to communicate via the signaling communication link through the wide area network with each respective gateway device using a peer and presence messaging protocol.

In the example the computer platform comprises a plurality of computers coupled to the router to arrange the system to form a service management center network. Such a network may implement a variety of additional functionalities. For example the service management center network may include a gateway device updater implemented on the at least one computer platform. The updater is configured for downloading service logic modules for implementing application services and or service features to the gateway devices via the wide area network for enabling application services and or service features identified by the service manager at respective gateway devices. The service management center network may also include a location server functionality responsive to the service manager for maintaining information as to accessibility of authenticated gateway devices for enabling peer to peer communications among gateway devices via the wide area network. Another functionality that may be provided is an accessibility test server. Such a server communicates via signaling communication link through the wide area network with each of the gateway devices to determine nature of accessibility of each gateway device through the wide area network. The service management center network may also include a Session Initiation Protocol SIP proxy server functionality and a Session Border Controller functionality configured to support SIP based voice over Internet protocol VoIP telephone services through the wide area network for endpoint devices communicating through a plurality of the gateway devices.

The disclosure also encompasses systems that include both a service management center and one or more of the gateway devices.

In a first example such a disclosed system provides managed services for a plurality of endpoint devices associated with a premises having a local area network and the system includes a gateway device located at the premises coupled for communication with at least one of the endpoint devices which is located at the premises via the local area network. The gateway device is also coupled for communication with a wide area network outside the premises. The gateway device is operable to deliver one or more application services to the plurality of endpoint devices. The gateway device includes one or more service logic modules for causing the gateway device to provide the one or more application services respectively and configuration data for configuring the one or more service logic modules to enable the gateway device to deliver the one or more application services. The service logic modules and the configuration data are logically positioned on the user premises side of a logical Network Service Provider Demarcation between the wide area network and the user premises. Also the gateway device is further operable to provide interoperability among two or more of the endpoint devices. The service management system is coupled to the wide area network for communication with the gateway device. This enables the service management system to remotely manage the delivery of the one or more application services by the gateway device. The service management system selectively activates or deactivates one or more of the service logic modules in the gateway device.

As noted the disclosure also encompasses a system having a number of the gateway devices. In such an arrangement the service management system is further operable to selectively provide secure communications and exchange of information among the gateway devices and among the endpoint devices associated therewith.

The detailed description below also discloses examples of implementations of the gateway devices. For example a gateway device may include a first interface for enabling bi directional communications within the premises via the local area network with one or more of the endpoint devices. A second interface enables bi directional communications for the one or more endpoint devices via the wide area network and for enabling at least some bi directional communications with the service management system via the wide area network. The gateway device includes a processor coupled to the interfaces and storage coupled to the processor for storing programming for the processor including the one or more service logic modules and for storing the configuration data.

In one arrangement for each application service processor execution of the programming provides a number of functions in relation to a respective service for one or more endpoint devices. Examples of such functions include application server communication with a client functionality of one or more endpoint devices for the respective service communicated on top of network layer communications of one or both of the interfaces. The program implemented gateway functions may also include enforcement regarding authorization authentication configuration or use of the respective service via the one or more endpoint devices. The application service is managed based upon the communications with the service management center via the wide area network through the second interface.

A specific example of the software architecture for the gateway devices utilizes a layered approach. Such an architecture includes the service logic modules which provide logic for the application services. The programming further includes logic for interfaces for the application services logic for a services framework and logic for platform management. The interaction and interoperability of the application service interfaces logic the application services logic the services framework logic and the platform management logic is managed responsive to the communications with the service management center via the wide area network through the second interface.

Additional advantages and novel features will be set forth in part in the description which follows and in part will become apparent to those skilled in the art upon examination of the following and the accompanying drawings or may be learned by production or operation of the examples. The advantages of the present teachings may be realized and attained by practice or use of various aspects of the methodologies instrumentalities and combinations set forth in the detailed examples discussed below.

In the following detailed description numerous specific details are set forth by way of examples in order to provide a thorough understanding of the relevant teachings. However it should be apparent to those skilled in the art that the present teachings may be practiced without such details. In other instances well known methods procedures components and circuitry have been described at a relatively high level without detail in order to avoid unnecessarily obscuring aspects of the present teachings.

The various technologies disclosed herein move application service logic formerly resident in a network node into a gateway device in the customer premises. The gateway device is implemented in such a manner as to offer its user many of the applications services such as were previously offered from network side servers from the user premises. As further described below these application services comprise by way of example programming to simplify support services in the digital home including one or more of media delivery content management access control and use tracking file sharing and protection and back up services of both Internet Web generated digital media content and user generated digital media content. The novel gateway device is programmed to simplify various aspects of managing the emerging home business digital networks including the myriad of interconnected digital endpoint devices associated with the gateway device. It is important to note that the endpoint devices need not reside within or be located at the premises to maintain their association with the gateway device.

Therefore although based on a Client Server architecture the exemplary gateway device and service management center move substantial functions performed by the typical network server into the user premises by incorporating those functions into the gateway device but in a way that allows for the server functionality to be externally managed by the service management center from the network side which may be operated by a third party service provider. In this novel architecture both the server functionality and the application services offered via the gateway device may be managed by the service management center. Moreover the server function residing in the gateway device is not only located in the premises but it now resides logically on the pre side of the Network Service Provider demarcation.

The gateway device and the system architecture effectively place a set of application services on a tightly coupled e.g. always on or always available basis secure hardware platform that is externally managed. The gateway device comprises application services programming and associated hardware that is positioned on the user premises side of the Network Service Provider Demarcation which is configured to be managed by an external service management center.

Reference now is made in detail to the examples illustrated in the accompanying drawings and discussed below. is a high level diagram of the architecture of the gateway service management center network as disclosed herein as well as the logical flow of how a specific Application Client residing at a User Premises could interact with an Application Service in a gateway device that is being managed in the gateway service management center network configuration. Heretofore as described above many application services that form part of the Application Service Delivery Platform were logically positioned at the AS Layer but on the network side of the Network Service Provider Demarcation. shows that in the novel architecture many of these application services that were previously offered from network side servers have now been moved across the Network Service Provider Demarcation and now logically reside at the AS Layer in the User Premises Network i.e. on the hardware components located in the user premises such as by example a gateway device. In particular the programming that implements application services is logically positioned on the user premises side of the Network Service Provider Demarcation. The application service on the user premises side that enforces authorization authentication configuration or use of the respective service via an endpoint device is logically depicted in as the ASE module in the AS Layer of the User Premises Network. The ASE module may also communicate via the wide area network with the ASM logic residing in the service management center.

With reference to the core of the logical capacities of the service management center resides on the Service Provider Network and is depicted as the Application Service Management ASM portion of the Application Service Delivery Platform in the AS Layer. The ASM function is implemented in the service management center which is external to the user premises and perforce on the network side of the demarcation line. The ASL and ASE functions maintain logical connectivity or interaction with the Application Service Management ASM function in the service management center typically via communication through a wide area network. This logical connectivity is established through an always on or on an as needed periodic basis secure communication channel between the User Premises AS Layer ASL and ASE and the Service Provider AS Layer ASM at the service management center. The service management center and the communications of the center with one or more of the gateway devices provides an infrastructure support and or management of the application services offered to endpoint devices and their users by the logic implemented in the gateway device s . Effectively the ASD considered in its entirety extends all the way to the User Premises and traverses the Network and Network Service Provider Demarcation. The secure communications channel is established through the NF Layer and the NI layer.

The examples discussed herein also introduce a logical platform management layer to the user premises side which allows for inter layer allocation of local resources. This function guarantees access between the Application Service Logic function on the user premises network and the applications service management function in the service management center by assuring that the local user premises hardware and software modules are functioning at a required state CPU and memory usage bandwidth usage QoS settings etc. in order for the ASL to have the necessary resources to establish its required communications path to the ASM.

The platform manager is also responsible for implementing that part of the managed application services to be performed by the gateway device. In that regard the platform manager secures and manages the overall hardware platform given that in this scenario the NF layer and the AS layer reside on one hardware platform. This secure hardware platform provides a robust and secure operating environment for the AS Layer. So to establish a secure and robust hardware operating environment the platform manager must interface with all the layers above it and allow for bi directional management information flow among all of the functions. For example if the Application Client is a telephony application and the desired application is call processing the application must first connect to the LAN termination interface . Then a connection must be established to the AS Layer through the NF layer 2 . At this point the platform manager determines if there are sufficient resources available for this to take place on the routing and switching modules and if there is not sufficient resources on either the LAN Termination interface or the NF layer functions it would take the necessary corrective measure to free up the required resources so that the application can execute properly e.g. prioritize packets throttle bandwidth attempt to reduce noise on an RF interface or free up time slices on a TDMA interface such as MoCA . Once that is done the connection is established to the AS Layer 3 where the ASE and ASL having been updated by the ASM in the network respond instantaneously to the Application Client completing the service request.

Application services represent functionalities implemented in the higher layer s of the protocol or logical stack above the network layer s that may extend up to the top application layer layer 7 of the OSI model . An application service for example provides application server communication with a client functionality of one or more endpoint devices for the respective service communicated on top of network layer communications through the interfaces. In the examples the services are provided on a subscription service basis to users at the premises. Hence the application service logic provides enforcement regarding authorization authentication configuration and or use of the respective service via the endpoint devices. The application service includes service and feature functions implemented and controlled by the application service logic. Management of the application service is based on communications with the service management center via the wide area network.

The illustrated architecture of the gateway device service management center network enables other features and capabilities that have not previously been available to the user. For instance peer to peer application communication between or among gateways is possible without the need to go through or utilize resources at an external service management center. Communications through the service management center are also possible. In addition given the considerable functionality present in the gateway device and its ability to manage the various endpoint devices associated with it as explained below the user interface with the gateway can be presented and utilized on the home TV. Additionally information from other endpoint devices such as the PC network sources such as an RSS Really Simple Syndication service may now be overlaid on the TV screen so that for example PC messages or weather information can be viewed on the TV screen and the functionality of the PC or other home networked endpoint devices can be accessed from the TV screen.

If configured as a standalone device the NSP TA device is required to have its own CPU Memory physical interfaces and logic control. In order for Network Service Providers to deliver managed services they typically require a management element controlled by the CPU on the NSP TA. To depict these logical elements residing on the hardware components includes an Application Services Layer above the hardware layer. This layer corresponds to the AS Layer of but without reference to any logical elements residing at the network services provider. The management element represented by the Network Service Provider Managed Application allows the network service provider to determine the status of the network hardware device and interfaces as well as maintain a certain degree of security enforcement at the customer premises. As noted the network service functionality is at the NI and NF Layers and generally does not extend to the AS Layer s beyond basic authentication authorization and state management. As with the hardware components the logical elements also have a Network Service Provider Demarcation as shown in . On the WAN side depicted as the Network Service Provider Managed Applications side of the Network Service Provider Demarcation resides the applications that are managed and under the exclusive control of the network service provider the Network Service Provider Logic . The User Interface to Managed Applications is present on the LAN side of the Network Service Provider Demarcation within the Application Services Layer. Within this interface resides programming and logic available to users other than the network service provider referred to as the Network User Controlled Logic. The Network. User Controlled Logic which is depicted at the Application Services Layer in provides a user interface to the Network Service Provider Logic and to the extent permitted by the Network Service Provider Logic interaction with or communication between the user and network service provider through the Network User Controlled Logic and the Network Service Provider Logic and to the NSP TA hardware components. The Network User Controlled Logic allows for the User of the hardware to make certain minimal programming changes relevant to their preferences e.g. user name and password changes local IP addresses changes local interface selection . All user devices typically can only communicate with the NSP TA through one or more of the User Premises Network Interfaces. The user can modify the Network User Controlled Logic through the User Premises Network Interface. The Network Service Provider Demarcation is typically within the NSP TA logically dividing the Network Service Provider Interface and the User Premises Network Interface modules. The network service provider does not have any in depth visibility or significant responsibility beyond the Network Service Provider Demarcation.

The User Network and Application Delivery Apparatus UNA DA shown on the right hand side of is a separate managed gateway device that a managed service provider which may be different than the network service provider would control in delivering a set of application services to the user premises. This device is required to have its own dedicated CPU memory logic control as well as its own dedicated set of interfaces. The UNA DA includes one or more Network Interfaces providing connectivity to the NSP TA as well as to user premises endpoint devices. The interfaces provide the LAN Termination functionality at the NI Layer . One skilled in the art will readily recognize however that the physical connection that connects the UNA DA to the NSP TA also provides connectivity for the UNA DA to the public WAN side network and is the means by which the UNA DA accesses the public network. The end point devices connected to the LAN Interface are on the private LAN side of that interface. The UNA DA also includes a switch router or bridge for the NF Layer.

Programming elements of the UNA DA are depicted at the Application Services Layer of the UNA DA. Certain logical elements depicted as the Application Service Provider Managed Applications and Platform in on which resides inter alfa the programming corresponding to the ASL and ASE of are managed by the managed application service provider s network control center e.g. by the ASM through a wide area network WAN by means of a control channel to the Application Service Provider Managed Applications and Platform. The Application Service Provider Managed Applications and Platform includes a platform management logic module that with other programming in the Platform and the ASM allows the managed application service provider to control the hardware elements of the UNA DA in addition to any other relevant application services logic or hardware that may reside on the user premises. For example this programming enables managed application service provider to control and manage the hardware elements on the UNA DA to ensure proper use and allocation of the UNA DA s processing memory storage and bandwidth to monitor local hardware security and generate needed alarms or protection sequences and to prioritize applications based on a set of established policies. The user would have control over specific parameters of the UNA DA through the User Interface and Platform to Managed Applications User Controlled Logic shown in . These parameters allow the user to control the local behavior of the interfaces and to configure the specific applications to accommodate the user network as configured by the user and to implement the user preferences for those applications.

To identify the separation of and distinguish between the programming and hardware components subject to control by the managed service provider and those subject to control by the user premises identifies a dividing line across the logical elements of the UNA DA and a corresponding dividing line across hardware components referred to as the Applications Service Provider Demarcation. The Applications Service Provider Demarcation is flexible in that it may extend logically through the Application Services Interface and in a hardware context through the Network Interface to other devices that are under the logical control of the Application Services Provider Managed Applications and Platform given that services are not restricted to a specific hardware boundary.

There is no hard requirement for cross management between the UNDA DA and the NSP TA. Under this first scenario the user is responsible for making the configuration changes in the specific user controlled logic modules in order to get the two devices to Communicate with each other. Optionally the two sub systems can be combined together either physically in one hardware device or logically as two separate hardware devices but having one user managed interface.

The two hardware regimes described above NSP TA and the UNA DA may be combined into one managed hardware platform and thereby replace the need for the user to have access to the User Premises Network Interface with the logic residing in the Platform Management logic module of the Application Service Provider Managed Applications and Platform compare to above discussed . This would in effect replace the user access with a managed machine access for aspects of the NSP TA as well as aspects of the application services offered through the UNA DA. Thus the combination creates an integral gateway device providing both network service and application services under centralized management. Although integrated network interconnect functions of the NSP TA may still be managed by the network service provider as in the example of . Those skilled in the art will readily see additional combinations and configurations for the hardware comprising the NSP TA and the UNA DA. For example in a further embodiment all the hardware dedicated to the Network Service Provider Interface may reside and be integral with the hardware comprising the UNA DA. Thus the hardware for the WAN interface may reside on the UNA DA.

It may be helpful now to consider more detailed examples of the gateway device service management center network.

Those skilled in the art will recognize that functions of the service management center which reside in the Application Service Management node on the Service Provider Network as depicted in may be implemented in a variety of different ways on one or more computer hardware platforms connected to the gateway devices via a wide area network. depicts an example wherein the implementation is on Internet or other wide area IP network . The example uses a distributed processing approach in which the elements platforms implementing the service management center are interconnected for communication and for wide area communication and in this way those elements form a network for implementing the service management center.

As shown in the service management center network through the logical capabilities earlier depicted in as the ASM module of the ASD Platform at the AS Layer manages application services for a number of gateway devices .sub. . . . .sub.n located at various users premises. These application services shown as ASL and ASE in implement their functionality within the Application Services Layer through programming that at least in part within the Application Service Provider Managed Applications and Platform of the UNA DA . As shown in secure connectivity to the service management center network is provided in one embodiment via a WAN Termination interface such as Ethernet WAN over a broadband connection via the public Internet or for example via a wireless EvDO Evolution Data Optimized Internet data interface embodied as a PCMCIA personal computer memory wireless card . When the WAN Termination interface is used for example it may provide connectivity to a broadband modem serving as the NSP TA of either as a separate unit or on a board included within the gateway device . If the wireless WAN interface is used there may be no physical NSP TA device and the logic of the gateway device would implement functions of the NSP TA as well.

As will be described in greater detail herein below the service management center generally provides a communications and processing infrastructure for supporting the variety of application services and related communications residing at the gateway devices .sub. . . . .sub.n. In an exemplary embodiment this infrastructure may be configured to provide a secure environment and may be IP based. Preferably this support architecture is designed for high availability redundancy and cost effective scaling.

The secure platform for budding and providing multiple application services for digital endpoints associated with a gateway device requires connectivity between the gateway device and each of a users devices referred interchangeably herein as endpoint devices or digital endpoint devices . This connectivity may be provided by implementation of one or more USB ports interfaces a wired Local Area Network connection such as provided by an Ethernet local area network LAN interface or a wireless network interface via a WiFi LAN access point provided for example in accordance with the I.E.E.E. 802.11b g n wireless or wireless network communications standard. These physical interfaces provide the required network interconnectivity for the endpoint devices to connect to the multiple application services. Although not shown in this connectivity between digital endpoint devices and the gateway device may be accomplished by other means including by way of example through of a virtual private area network connection accessed through a WAN interface.

That is the gateway device interfaces with digital endpoint devices including but not limited to a home automation networking device e.g. X10 Z Wave or ZigBee for wired or wireless home network automation and control of networked home devices such as a switch controller sensor devices automatically controlled window blinds a controlled lighting or lamp unit etc individual or wired or wireless network of personal computing PC and laptop mobile devices . . . that serve as file sources control points and hosts for various other client endpoints one or more television display devices including associated set top boxes STB or digital media adapters DMA one or more VoIP phone devices e.g. SIP phones or other devices not shown that convert IP interfaces to PSTN FXO and FXS interfaces.

As noted earlier the gateway device may provide an interface to the Digital Media Adapter DMA for television TV which enables bidirectional wireline or wireless communication. This interface supports several functions for multiple services including but not limited to media e.g. video and music by enabling the transfer of media e.g. video and music to the TV voice services by providing for Called Line ID and for voice mail control and provide Home Automation Services including status and control of networked home automation devices. The DMA element converts audio and video optionally to a format suitable for a TV. In addition the Digital Media Adapter may be capable of receiving context sensitive commands from a remote control device not shown and forwarding those commands to the gateway device . This enables the use of menus on the TV for controlling application services and various features functions thereof as offered by the gateway device . For example the Media Adapter TV combination is able to provide the following features including but not limited to display of media media control functions when enabled FF REW STOP PAUSE etc display of Calling Line Identification CLID control of voicemail picture viewing control of home automation and user functions for the gateway device .

A Set Top Box as shown in also may handle media format conversion for example NTSC to ATSC television RF signals digital decryption and other DRM digital rights management functions and Video On Demand Purchases etc. The Set Top Box TV combination may thus enable by way of example Media format conversion for example NTSC to ATSC decryption other DRM functions such as expiry of leases prohibition of copying to digital outputs function restriction etc. Video On Demand Purchases and media control functions e.g. FF REW STOP PAUSE etc. .

Whether provided by the DMA interface and the TV or by the set top box and the TV the communications to and from the TV provide a user interface for interaction with the gateway device . The programming of the gateway device supports among other things a graphical user interface GUI via the TV sometimes referred to as the ten foot interface.

With respect to PCs interfacing with the gateway device PCs may serve as among other things file sources control points and hosts for various software clients. Thus the PC programming may work in conjunction with the ASL and ASE programming of the gateway device. Together the PC programming and the ASL and ASE programming provide a more comprehensive and robust user experience. The gateway device may further provide a bidirectional wireline or wireless interface to a PC device for supporting the transfer of media e.g. video and music to the computer for storage and viewing for supporting voice services e.g. by providing for calls from SIP soft clients for file sharing file back up and home storage and home automation control functions. The access point offers wireless data communications with a PC . The gateway device interface through any PC may provide for the bidirectional moving of files and status and control for the endpoint devices including for example status and control of networked home automation devices. In addition using the PC interface users may for example share files on the gateway devices back up or transfer files to the gateway devices or other storage access personal page for notifications RSS shared photos voicemail etc. In addition to the IM and SIP capabilities of the gateway device as described more below PCs may also serve as a host for IM and SIP soft phone clients and other client devices. The client server interaction of the PC with the application service logic of the gateway device offers an alternative GUI for at least some of the services. The PC based GUI is sometimes referred to as the two foot interface.

Although not shown in other digital endpoint devices for which connectivity may be established with the gateway device include but are not limited to personal music or media players hi fi audio equipment with media streaming capability game stations Internet radio devices WiFi phones WiFi or other wirelessly enabled digital cameras facsimile machines electronic picture frames health monitors sensor and monitoring devices etc.

As described in greater detail herein the gateway device includes both a hardware and software infrastructure that enables a bridging of the WAN and LAN networks e.g. a proxy function such that control of any digital endpoint device at the premises from the same or remote location is possible via the gateway device using optionally a secure peer and presence type messaging infrastructure or other communications protocols e.g. HTTPS. For example via any IM capable device or client respectively connected with an Instant Messaging IM or XMPP Extensible Messaging and Presence Protocol network messaging infrastructure e.g. IM networks such as provided by Yahoo Microsoft MSN Skype America Online ICQ and the like shown for purposes of illustration in a user may access any type of functionality at a subordinate digital endpoint device at the premises via the gateway device and service management center by simple use of peer and presence messaging protocols. In one exemplary embodiment a peer and presence communications protocol may be used such as Jabber and or XMPP. Particularly Jabber is a set of streaming XML protocols and technologies that enable any two entities on the Internet to exchange messages presence and other structured information in dose to real time. The Internet Engineering Task Force IETF has formalized the core XML streaming protocols as an approved instant messaging and presence technology under the name of XMPP Extensible Messaging and Presence Protocol the XMPP specifications of which are incorporated by reference herein as IETF RFC 3920 and RFC 3921. Thus the gateway device is provided with functionality for enabling a user to remotely tap into and initiate functionality of a digital endpoint device or application at the premises via the IM based messaging framework. In addition the gateway device and network connectivity to the novel service management center provides in a preferred embodiment a secure peer and presence messaging framework enabling real time communications among peers via other gateway devices .sub. . . . .sub.n. For instance the device provides the ability to construct communication paths between peers with formal communications exchanges available between for example one gateway device .sub. at a first premises and a second gateway device .sub.n located at the remote premises. Thus such an infrastructure provides for content addressing enabling peers through remote gateway devices .sub. . . . .sub.n. to supply and request content such as files media content or other resources of interest to a community of interest.

As noted above the novel system architecture allocates the logical functionality of the ASD Platform between the gateway device and the service management center within an environment that enables communication and feedback at the AS Layer between the gateway device and service management center . Thus the gateway device when operable with the service management center makes possible the management of services for the digital home and facilitates the easy addition of new services or modification of existing services. Such services may include for example facility management home automation media content downloading and Digital Rights Management DRM device updates data backups file sharing media downloading and transmission etc. without the intermediary of a plurality of external service providers who may typically provide these individual services for every digital endpoint device in the home or premises. The programming for these services resides in the Application Service Provider Managed Applications and Platform of the UNA DA . That is as earlier shown the gateway device is integrated with hardware and software modules and respective interfaces that handle all aspects of home automation and digital endpoint service and management for the home in a manner without having to rely on external service providers and in a manner that is essentially seamless to the user. This advantageously is provided by the service management center which is able to access regions of the gateway device that are not accessible to the user e.g. for controlling the transport and storing of digital content and downloading and enabling service applications and upgrades and providing largely invisible support for many tasks performed by users.

For example with the robust capabilities of the Application Service Provider Managed Applications and Platform the gateway device is capable of handling all aspects of the digital home communications e.g. IP voice VoIP phone connectivity. In this example the service logic located and stored at the gateway device may provide soft switch functionality for implementing call processing features at the premises rather than the network for voice communications and enabling management of other service features to be described. With the provision of central office type call services and other service features provided at the gateway devices .sub. . . . .sub.n a distributed soft switch architecture is built. The ASM logical functionality of the service management center in cooperation with the ASE logical functionality of the gateway device may among other things provide manage and regulate for example service subscription registration authentication verification key management and billing aspects of service provision etc. With all of the service logic and intelligence residing at the gateway device a service provider can offer customers a broad spectrum of services including but not limited to media services voice services e.g. VoIP automated file backup services file sharing digital photo management and sharing gaming parental controls home networking and other features and functions within the home or premises e.g. home monitoring and control . Users can access their content and many of the solution s features remotely. Moreover software updates for the in home devices that require updating are handled in an automated fashion by the system infrastructure. The service management center infrastructure additionally provides a web interface for third party service providers to round out the service solutions provided at the gateway device for the premises. For example a third party service provider other than the managed service provider associated with the service management center may be allowed access through the infrastructure to particular endpoint devices to provide additional services such trouble shooting repair and update services.

The composition of the premises gateway device earlier described with reference to is now described in greater detail with reference to . As shown in the gateway device utilizes a layered architecture which enables the encapsulation of similar functionality and the minimization of dependencies between functions in different layers. depict exemplary functionality hardware and logical resident in or corresponding to each of the layers shown in . The layers include a hardware layer and device driver software for allowing the processor to operate other hardware elements of the gateway device . is a functional block diagram illustrating interconnection of exemplary elements of the hardware layer . The logical elements of the NI Layer residing on the gateway device are found in the Hardware Drivers which govern the operation of the Hardware Components . The processor runs an operating system shown at layer which plays a role in each of the NI NF AS and Platform Management Layers . The layered architecture also includes software for systems services and for the platform management layer shown at in this drawing. Logical elements represented by the NF Layer depicted in are comprised of elements from the system services of . In a similar fashion the Platform Management Layer depicted in is implemented in the exemplary architecture of by the platform modules and the platform management layer .

Particular logical elements comprising the ASL and ASE functionalities of the AS Layer represented in and that reside on the gateway device predominately in the Application Service Provider Managed Applications and Platform of the UNA DA shown in are depicted in and comprise logical elements from each of services framework and application services . The layered architecture in facilitates reuse or sharing of logic across the layers to provide a managed service framework . The service management functionality provided by the framework enables deployment of new services as pluggable modules comprising computer readable instructions data structures program modules objects and other configuration data in a plug and play fashion. The layered service architecture additionally provides the gateway device with intra process communication and inter process communication amongst the many services and modules in the service framework layer that enables the provisioning management and execution of many applications and services depicted e.g. services A B . . . N at the gateway device . Additionally provided are the application service interfaces that enable communications from user endpoint devices with service environments. In that regard the interfaces enable the application service logic to act as an appropriate server with respect to client device application or service functionality of the endpoint devices. The application service interfaces also enable corresponding interfaces for the application services with aspects of service environments implemented outside the user premises. In that regard the interfaces enable the application service logic to act as an appropriate client for extending the application or service related communications to a server accessed via the wide area network such as a server of the service management center . For example the gateway device may appear as a SIP server to a SIP client in an end point device e.g. for a VoIP telephone service but the gateway device will appear as a SIP client with respect to some related functions provided by a server such as a SIP directory server provided by the service management center .

As shown in more detail in the base support layer comprises hardware components including a processor device e.g. a system on chip central processing unit CPU that includes processing elements digital signal processor resources and memory. The CPU is also coupled to a random access memory RAM and additionally non volatile hard drive disk magnetic and or optical disk memory storage . Generally the above identified computer readable media provide non volatile storage of computer readable instructions data structures program modules objects service configuration data and other data for use by the gateway device. The non volatile hard drive disk magnetic and or optical disk memory storage may be partitioned into a network side which is the repository for storing all of the service logic and data associated with executing services subscribed to by the user and is invisible to the user and a user side for storing user generated content and applications in which the user has visibility. Although not shown the CPU may be coupled to a microcontroller for controlling a display device.

Additional hardware components include one or more Ethernet LAN and WAN interface cards e.g. 802.11 T1 T3 56 kb X.25 DSL or xDSL which may include broadband connections e.g. ISDN Frame Relay ATM Gigabit Ethernet Ethernet over SONET etc. wireless connections or some combination of any or all of the above. The card referred to as the LAN interface card provides data communication connectivity within the user premises essentially for communication via a user premises network with any endpoint devices operating within the premises. The card referred to as the WAN interface card provides data communication connectivity for the gateway device and endpoint devices communicating through the device with the wide area IP network . For additional or alternative customer premises communications the hardware components may also include one or more USB interfaces and for additional or alternative communications with the wide area network the hardware components may also include the PCMCIA EvDO interface card .

A data encryption decryption unit is additionally provided as part of the architecture for providing data security features. A watchdog timer element or like timer reset element is provided as is one or more LED devices for indicating status and other usable information to users of the gateway device .

As mentioned above the gateway device provides an in premises footprint enabling the service connectivity and local management to client s . The implementation of functions and the related control such as a router with quality of service QoS firewall VoIP gateway voice services and voice mail may be embodied and performed within the CPU .

The discussion of the gateway hardware layer above and the illustration thereof in the drawings provides a high level functional disclosure of an example of the hardware that may be used in the gateway device. Those skilled in the art will recognize that the gateway device may utilize other hardware platforms or configurations.

Continuing as shown in the device driver layer comprises a multitude of driver interfaces including but not limited to a PCMCIA driver for enabling low level communication between the gateway CPU and the PCMCIA network interface card wireless interface an IDE driver for enabling low level communication between the gateway CPU and the local mass memory storage element and LAN WAN drivers for enabling low level communication between the gateway CPU and the respective network interface cards and . The exemplary driver layer also includes an LED driver controller for driving LED s a USB driver allowing CPU to communicate via USB interface and an 802.11b g or n wireless network driver for allowing the CPU to communicate via the access point . The drivers provide the logical connectivity between the low level hardware devices and the operating system which controls the execution of computer programs and provides scheduling input output control file and data management memory management and communication control and related services for the gateway device. With respect to the operating system the gateway computing may support any embedded operating system any real time operating system any open source operating system any proprietary operating system or even any operating systems for mobile computing devices as long as the operational needs of the client discussed herein below can be met. Exemplary operating systems that may be employed include Windows Macintosh Linux or UNIX or even an embedded Linux operating system. For instance the gateway device may be advantageously provided with an embedded operating system that provides operating system functions such as multiple threads first in first out or round robin scheduling semaphores mutexes condition variables message queues etc.

Built upon the system operating system is a system services support layer providing both client like and server like functions that enable a wide range of functionality for the types of services capable of being managed by the gateway device . For instance there is provided a Dynamic Host Configuration Protocol DHCP client and server software modules. The DHCP client particularly requests via a UDP IP User Datagram Protocol Internet Protocol e.g. Ipv4 Ipv6 etc. configured connection information such as the IP address that the gateway device has been dynamically assigned by a DHCP service not shown and or any the subnet mask information the gateway device should be using. The DHCP server dynamically assigns or allocates network IP addresses to subordinate client endpoints on a leased e.g. timed basis. A Virtual Private Network VPN client may communicate via a proxy server in the service control network according to a VPN protocol or some other tunneling or encapsulation protocol. An SMPT client handles incoming outgoing email over TCP in accordance with the Simple Mail Transfer protocol. A Network Time Protocol NTP RFC 1305 generates and correlates timestamps for network events and generally provides time synchronization and distribution for the Internet. A Domain Name Server DNS client and server combination are used by the IP stack to resolve fully qualified host or symbolic names i.e. mapping host names to IP addresses.

An HTTP S server handles secure Hypertext Transfer Protocol HTTP Secure Sockets Layer communications and provides a set of rules for exchanges between a browser client and a server over TCP. It provides for the transfer of information such as hypertext and hypermedia and for the recognition of file types. HTTP provides stateless transactions between the client and server.

A Secure File Transfer Protocol SFTP client and server combination govern the ability for file transfer over TCP. A SAMBA server is an open source program providing Common Internet Files Services CIFS including but not limited to file and print services authentication and authorization name resolution and service announcement browsing . An EvDO PPP driver includes a Point to Point Protocol PPP daemon configuration for wireless broadband services. A PPPoE Point to Point Protocol over Ethernet client combines the Point to Point Protocol PPP commonly used in dialup connections with the Ethernet protocol and it supports and provides authentication and management of multiple broadband subscribers in a local area network without any special support required from either the telephone company or an Internet service provider ISP . The gateway device is thus adapted for connecting multiple computer users on an Ethernet local area network to a remote site through the gateway and can be used to enable all users of an office or home to share a common Digital Subscriber Line DSL cable modem or wireless connection to the Internet. A Secure Shell or SSH server implemented with HTTP protocol provides network protocol functionality adapted for establishing a secure channel between a local and a remote computer and encrypts traffic between secure devices by using public key cryptography to authenticate the remote computer and optionally to allow the remote computer to authenticate the user.

Additionally provided as part of the system services layer is intelligent routing capability provided by an intelligent router device that provides Quality of Service QoS guaranteed bandwidth intelligent routing services for example by enforcing routing protocol rules and supporting unlimited multiple input sources and unlimited multiple destinations and particularly for routing communications to networked digital endpoint devices subordinate to the gateway. A central database server handles all of the database aspects of the system. For example the database server maintains and updates registries and status of connected digital endpoint devices maintains and updates service configuration data services specific data e.g. indexes of backed up files other service specific indexes metadata related to media services etc. and firmware configurations for the devices. The database server may also store billing and transaction detail records and performance diagnostics. The database server logic also satisfies all other database storage needs as will be described in greater detail herein.

Referring back to built on top of the system services layer is the platform module layer . The platform module layer provides a software framework for operating system and communications level platform functionality such as CPU management Timer management memory management functions a firewall a web wall for providing seamless WWW access over visual displays via access technologies enumerated herein e.g. HTTP SMS Short Messaging Service and WAP Wireless Access Protocol QoS management features bandwidth management features and hard disk drive management features. The layered architecture further provides a platform management layer as shown in which together with the platform modules implement the platform management layer logic discussed earlier with regard to .

The features functions in the layer include a platform manager module which will implement unique rules based notification services. On operational failure for example when one of the components or services fails the platform manager would detect this failure and take appropriate action such as implement a sequence of rules to provide notification to a user. A scheduler module manages scheduled device maintenance managing scheduled services e.g. back up services etc. The layer also includes a diagnostics module and a firmware upgrades management module for managing firmware upgrades. A resource management module manages system resources and digital contention amongst the various resources e.g. CPU Bandwidth utilization etc. A display management module and a logger management module store and track gateway log in activity of users and applications e.g. voice call logs at the user premises. The platform management layer in concert with resource and service management components enforces the separation of network side managed service control and user side delegations depending upon service subscriptions and configurations. For example the platform and resource management encompass rules and guidelines provided according to subscribed services that act to enforce manage and control input output operations and use of hard drives space etc. A demarcation point logically depicted as the Application Service Provider Demarcation in is thus defined that provides a hard line between what is owned by the customer and what is owned by the service provider.

The logical platform management layer allows for inter layer allocation of Racal resources. This function guarantees access between the application service management logic implemented at the higher layers in the gateway device and the applications service management function in the service management center by assuring that the local user premises hardware and software modules are functioning at a required state CPU and memory usage bandwidth usage QoS settings etc. . The platform manager is also responsible for implementing that part of the managed application services to be performed by the gateway device. In that regard the platform manager secures and manages the overall hardware platform given that in this scenario the network function layer and the application service layer reside on one hardware platform. This secure hardware platform provides a robust and secure operating environment for the application services layer. So to establish a secure and robust hardware operating environment the platform management layer must interface with all the layers above it and allow for bi directional management information flow among all of the functions.

Referring back to built on top of the platform management layer is the Services Framework which provides a library of application support service processes that facilitate data collection and data distribution to and from the multimedia endpoint devices. The application support service processes include but are not limited to an authentication manager for use in authenticating devices connected to the gateway device a billing manager for collecting and formatting service records and service usage by endpoint devices e.g. calls back up services etc. a fault manager for detecting and managing determined system and or service faults that are monitored and used for performance monitoring and diagnostics a database manager a control channel interface via which the gateway initiates secure communications with the operations support infrastructure a configuration manager for tracking and maintaining device configuration a user manager a service manager for managing service configuration and firmware versions for subscribed services provided at the gateway device and a statistics manager for collecting and formatting features associated with the gateway device. Statistics may relate to use of one or more services and associated time stamped events that are tracked.

Built on top of the Services Framework layer is the Application Services layer providing library of user application services and application support threads including but not limited to file sharing functionality backup services functionality home storage functionality network device management functionality photo editing functionality home automation functionality media services functionality call processing functionality voice mail and interactive voice response functionality presence and networking functionality parental control functionality and intelligent ads management functionality. The multi services applications gateway further provides application service interfaces that are used to enable a variety of user applications and communications modalities.

For instance the SIP Interface is an interface to the generic transactional model defined by the Session Initiation Protocol SIP that provides a standard for initiating modifying or terminating interactive user sessions that involve one or more multimedia elements that can include voice video instant messaging online games etc. by providing access to dialog functionality from the transaction interface. For instance a SIP signaling interface enables connection to a SIP network that is served by a SIP directory server via a Session Border Controller element in the service management center .

The Web Interface enables HTTP interactions requests and responses between two applications. The Web services interface provides the access interface and manages authentication as multi services gateway devices access the service management center via web services. The IM Interface is a client that enables the multi services gateway device to connect to one or more specific IM network s . As further shown in the UpNp Universal Plug and Play interface enables connectivity to other stand alone devices and PCs from many different vendors.

The XMPP interface is provided to implement the protocol for streaming XML elements via the gateway device in order to exchange messages and presence information in close to real time e.g. between two gateway devices. The core features of XMPP provide the building blocks for many types of near real time applications which may be layered as application services on top of the base TCP IP transport protocol layers by sending application specific data qualified by particular XML namespaces. In the example the XMPP interface provides the basic functionality expected of an instant messaging IM and presence application that enable users to perform the following functions including but not limited to 1 Exchange messages with other users 2 Exchange presence information with other devices 3 Manage subscriptions to and from other users 4 Manage items in a contact list in XMPP this is called a roster and 5 Block communications to or from specific other users by assigning and enforcing privileges to communicate and send or share content amongst users buddies and other devices.

As noted provides a functional block diagram of exemplary elements of the hardware layer . For example a system on a chip provides the CPU and associated system components. The CPU is also coupled to a random access memory RAM and flash memory. The system on a chip also includes a hard drive controller controlling a hard disk drive and together the controller and drive form the hard disk example of the storage . An Ethernet switch and associated LAN port s provide the Ethernet LAN interface and the Ethernet switch and associated WAN port provide a landline implementation of the WAN interface L for connection to a broadband modem or the like implementing the NSP TA. The WAN interface may also be wireless as implemented at for example by a wireless WAN module and associated antenna. An example of such an interface would be the EvDO interface discussed earlier. If the gateway device uses the wireless WAN interface there would be no separate NSP TA.

In the example of a USB controller in the system on a chip and one or more associated USB ports provide the USB interface . The USB interface may provide an alternate in premises data communication link instead of or in addition to the wired or wireless Ethernet LAN communications. The system on a chip includes a security engine which performs the functions of the data encryption decryption unit .

The hardware layer may also include an option module. The UNA DA hardware components at layer have multiple interfaces for connection to such an option module. These interfaces by way of example could be a data bus e.g. PCI etc network interface e.g. Ethernet RJ45 MoCA HPNA Coax and Power feeds. The option module allows additional functionality to be added to the base UNA DA functionality of the gateway device. For example this additional functionality could be everything from support for a variety of extra Wide Area Network Interfaces e.g. xDSL DOCSIS Fiber PON Cellular Packet WIMAX etc. Media Processing e.g. Cable TV termination Digital Video Recording Satellite TV Termination etc to Voice Processing FXS FXO Speech Detection Voice to Text etc . The option module may have its own standalone. CPU Memory I O Storage or provide additional functionality by its use of the CPU Memory I O and storage facilities off of the main hardware board. The option module may or may not be managed directly by the Platform Management of the UNA DA.

For the in home services the multi services gateway device connects the various service delivery elements together for enabling the user to experience a connected digital home where information from one source for example voicemail can be viewed and acted on at another endpoint for example the TV . The multi services gateway device thus hosts the various in home device interfaces and facilitates the moving of information from one point to another. Some of the in home endpoint device processing duties performed by the gateway device include but are not limited to 1 detecting new devices and provide IP addresses dynamically or statically 2 functioning as a Network Address Translator NAT Router and Firewall 3 providing a centralized disk storage in the home 4 obtaining configuration files from the service management center and configuring all in home devices 5 acting as a Registrar for SIP based devices 6 receiving calls from and delivering calls to voice devices providing voicemail services 7 decrypting and securely streaming media having digital rights management DRM encoding 8 distributing media to an appropriate in home device 9 compressing and encrypting files for network back up 10 backing up files to the network directly from gateway device 11 handling home automation schedules and changes in status 12 providing in home personal web based portals for each user 13 providing Parental Control Services e.g. URL filtering etc. 14 creating and transmitting billing records of in home devices including recording and uploading multi service billing event records 15 distributing a PC client to PCs in the home used in support of the various services such as monitoring events or diagnostic agents 16 storing and presenting games that users and buddies can play 17 delivering context sensitive advertising to the endpoint device and 18 delivering notifications to the endpoint device and 19 enabling remote access through the web IM client etc. Other duties the gateway device may perform include service maintenance features such as setting and reporting of alarms and statistics for aggregation perform accessibility testing notify a registration server and Location server of the ports it is listening on utilize IM or like peer and presence communications protocol information for call processing and file sharing services receive provisioning information via the registration server utilize a SIP directory server to make receive calls via the SBC network element to from the PSTN and other gateway device devices and download DRM and non DRM based content and facilitating the DRM key exchanges with media endpoints.

While the gateway devices as described above are each equipped with various logic and intelligence for features that enable the gateway devices to provide various integrated digital services to the premises as described herein with respect to the network based elements of the service management center supports and manages multi services gateway devices for instance so as to control the accessibility to functionalities and service features provisioned in the gateway devices and the ability to communicate with other gateway devices and various digital endpoint devices connected thereto. These elements that support and manage the gateway devices comprise the ASM module described above with reference to . These ASM elements may for example provide the necessary data to the ASE and ASL modules so that they may carry out their respective functions oversee the overall integration and communication among all the modules and the services that are managed by the ASM manages the overall security and integrity of the ASD and maintains alarm statistical subscription and provisioning data and data necessary for the integration of services from third party service providers e.g. media content aggregators.

Examples of various ASM functionalities performed at the service management center from the Service Provider Network regime include but are not limited to service initialization of the gateway devices providing security for the gateway devices and the network support infrastructure enabling real time secure access and control to and from the gateway devices distributing updates and new service options to the gateway devices providing service access to and from the gateway devices and remote access to the gateway devices but not limited to such. In support of these services the service management center provides the following additional services and features authentication multi service registration subscription control service authorization alarm management remote diagnostic support billing collection and management web services access remote access to gateway devices e.g. via SIP or Internet web based communications reachability to access challenged gateway devices software updates service data distribution location service for all services SIP VoIP service media services backup services sharing services provisioning gateway interfaces to other service providers Northbound and peering load balancing privacy security and network protection.

The logical network architecture for the service management center network delivering these capabilities is illustrated in . It should be understood that the functional components described in view of may be combined and need not be running on discrete platforms or servers. Rather one server or component may provide all the service management center functionalities for providing managed network of gateway devices . In addition any one of the components shown in may perform any one of the functionalities described herein. Thus the description in the present disclosure associating certain functions with certain components are provided for ease of explanation only and the description is not meant to limit the functionalities as being performed by those components only. Thus the network elements or components shown in illustrate logical architecture only and the present teachings do not require the specific components shown to perform specific functionalities described. Moreover the functional components may use distributed processing to achieve a high availability and redundancy capacity.

The one or more network elements of center illustrated in support the gateway devices that are services points of presence in the user premises such as users homes and the various endpoint devices connected thereto. Examples of functionalities provided in the service management center network are discussed below. Upgrades to gateway device firmware and various endpoint devices may be managed in the service management center network for example by a firmware updater server . VOD video on demand functionalities for example serviced by VOD servers VODs ingest wholesale multi media content and provide DRM based premium content to the multi services gateway device and endpoint devices. The service management center network also may enforce DRM Digital Rights Management policies for example by a conditional access CA server which provides key based access and initiating billing processes. The service management center network may also provide functionalities such as collecting billing information and processing billing events which for instance may be handled by billing aggregator sub system . The service management center network for example using one or more connection manager servers may establish and maintain a signaling control channel with each active multi service gateway device . For message routing functionality of the service management center network for example one or more message router devices may provide intelligent message touting service for the network and maintain gateway device presence and registration status in an internal session manager sub system of the service management center . Publish and subscribe functionality of the service management center network for example a Publish Subscribe Pub Sub server sub system may provide publish and subscribe messaging services or the multi services gateway devices and the elements service management center network .

The service management center network may provide SIP based directory services for voice and other multimedia services for example via its SIP Directory Server . In addition location service functionality for example provided by the Location Server may include IP and Port level services for all inbound services. As discussed more later the location server maintains information as to accessibility of authenticated gateway devices for enabling peer to peer communications among gateway devices via the wide area IP network . DNS services functionality may be provided by a DNS server for all inbound services.

The service management center network may also provide virtual private network VPN functionalities for example handled by its VPN server subsystem and provide VPN connection services for certain inbound services on multi services gateway devices . VPN connection services may be provided on those multi services gateway devices that have accessibility challenges for example those that are behind external firewalls and NATs. The service management center network may also include functionality for determining the nature of the accessibility configuration for the multi services gateway devices . In one embodiment accessibility service may be performed by an accessibility test server that functions in cooperation with the multi services gateway device to determine the nature of the accessibility. For example the accessibility test determines whether the gateway devices are behind a firewall whether NATs is required etc.

The service management center network also functions to provide provisioning services to all elements of service management center network and to multi services gateway devices . Such functionality of the network for example may be implemented by the provisioning server in one embodiment.

Authentication functionality of the service management center network for example provided by an authentication manager provides authentication services to all service management center network elements and to multi services gateway devices . As discussed more later upon successful authentication of a gateway device the authentication manager controls the connection manager to establish a signaling communication link through the wide area IP network with the authenticated gateway device . The authentication manager confirms authentication of the respective gateway device from time to time and the authentication manager controls the connection manager to maintain a session for the signaling communication link through the wide area IP network with the respective gateway device as long as the authentication manager continues to confirm the authentication of the respective gateway device. The signaling connection may be torn down when the device no longer passes authentication either because it becomes inaccessible to the authentication manager or its service status changes.

The gateway devices and service management center implement several methodologies that allow the service provider to manage various subscription application services provided for endpoint devices associated with the gateway devices . In general one subscription management methodology involves sending information indicating configuration data or software currently needed for the one gateway device to implement server functionality for an application service or a feature of an application service based on a service subscription of a customer associated with that gateway device. Several different ways of sending this information are discussed by way of example below. A request from a particular gateway device is received in the service management center indicating that the device needs the configuration data or software to implement the application service or feature thereof. In response the service management center sends the necessary configuration data or software through the wide area network to the gateway device . The gateway device can install the configuration data or software to enable that device to deliver the server functionality for the application service or the feature to its associated one or more endpoint device s that implement the client functions regarding the particular application service.

Subscription functionality of the service management center network for example provided by a subscription manager is one mechanism used to provide management of subscription services to all multi services gateway devices . The subscription manager manages applications services and or features of the server functionality of the gateway device to be enabled on each respective authenticated gateway device based on a service subscription associated with the respective device .

The service management center network may include functionality for providing management services for each of the services provided in the gateway device . For example respective service managers store and serve to distribute service specific configuration data to the multi services gateway devices typically via the signaling communication links established through the wide area IP network upon successful device authentication. The configuration data downloads by the service managers are based on the service subscription of the user or premises associated with the particular gateway device that is to say as indicated by the subscription manager .

The service management center network also includes elements to provide necessary software to the gateway devices through the wide area network as needed to implement customers subscription services. In the example the service management center network includes an updater for transmitting software to the gateway devices. The software resident in the gateway device is sometimes referred to as firmware. Software can be distributed upon request from an individual gateway device or as part of a publication procedure to distribute upgrades to any number of the gateway devices. For this approach the publication subscription Pub Sub server or like functionality provides notifications of available software updates. For example upon detecting an update regarding an application service gateway devices subscribing to an update notification service with regard to the relevant application service are identified. The Pub Sub server sends notification messages through the wide area network to the identified gateway devices . Assuming that a notified gateway device does not yet have the software update installed as part of its resident firmware it sends a request indicating that the gateway device needs the available update. In response to the received request the updater sends the update of the software through the wide area network to the one gateway device . The update enables the gateway device to deliver the subscription application service or feature thereof based on the updated software to one or more endpoint devices implementing client functions related to the subscription application service.

Service access test functionality of the service management center network performs tests to multi services gateway devices to verify the accessibility for each subscribed service. Such functionality may be provided by service access test managers . The service management center network for example in an alarm aggregator subsystem may aggregate alarms received from the multi services gateway devices. The service management center network also may include functionalities to support for instance by alarms diagnostics and network management NWM server network management and network management services. The service management center network enables web interface communication mechanism for example via a web services interface server to for example provide access interface and manage authentication as multi services gateway devices access the service management center for various services including access to configuration data in the service managers .

Additional service management center network functionalities shown in may include providing HTTP redirection services for public web access to the multi services gateway devices which function for example may be provided via a public web redirect server . Public SIP Redirect Proxy functionality provides for instance via a Public SIP Redirect Proxy server SIP redirection and proxy services to public remote SIP phones and devices. The service management center network also may include functionalities to provide a SIP based network border interface and billing services for off net voice calls. Such functionality in one embodiment may be provided in a Session Border Controller device . Another functionality of the service management center network may be providing Session Border Control services to SIP roaming SIP callers in certain situations which functionality for example may be provided by a Roaming Session Border Controller device . The service management center network also functions to provide dynamic NAT services during certain SIP roaming scenarios. Such functionality may be implemented in the Roamer Dynamic NAT Server .

The service management center network further may provide off site backup services for the service management center network to a Wholesale Back up Provider . The service management center network further interoperates with Wholesale VoIP Provider which may provide VoIP call origination termination services for off net voice calls. For instance the service management center network may provide VoIP PSTN gateway that enables a translation between protocols inherent to the Internet e.g. voice over Internet protocol and protocols inherent to the PSTN. Other entities that may be partnered with the service management center network as shown in include the content providers that provide media based content including but not limited to music video and gaming to the service management center network gateway interfaces for billing alarms diagnostic network management NWM and provisioning interfaces for partnered wholesale providers e.g. peering interfaces and service provider customers e.g. North bound interfaces .

In the illustrated example a server or servers of the service management center network are intended to represent a general class of data processing device commonly used to run server programming. Such a device typically utilizes general purpose computer hardware to perform its respective server processing functions and to control the attendant communications via the network s . Each such server for example includes a data communication interface for packet data communication. The server hardware also includes a central processing unit CPU in the form of one or more processors for executing program instructions. The server platform typically includes program storage and data storage for various data files to be processed and or communicated by the server although the server often receives programming and data via network communications. The hardware elements operating systems and programming languages of such servers are conventional in nature and it is presumed that those skilled in the art are adequately familiar therewith.

As shown in a gateway device is fully enabled if a subscriber activation code and optionally the WAN configuration information is provisioned. Thus optionally at step a determination is made as to whether the necessary WAN configuration information is provided. In an example the gateway device comes preconfigured for a certain default WAN configuration but this may not match the appropriate configuration for the particular subscriber. For example the gateway device might have a default configuration to obtain a dynamic IP address from the network but the user may have subscribed to a static IP address in which case a DHCP request would fail and the user would need to input the static IP address. As another example the gateway device might come configured without a PPoE login but the user s configuration requires a PPoE login. In that example the user would need to input this data. Hence in the process flow of if the determination at step is that the subscribers WAN configuration the default configuration already existing in the gateway device then no user input is required. However if the WAN configuration information is not properly provisioned in the gateway device the process proceeds to step where the system obtains from the user the gateway device s WAN configuration. At step a determination is made as to whether the gateway device is fully enabled. If the gateway device is not fully enabled the process is performed at step to obtain an activation identifier ID from the user. It should be understood however that before full activation minimal functionality could be provided.

Once the gateway device is fully enabled at step there is initiated the process of initializing the router firewall and establishing the WAN connection. In one embodiment a Transport Layer Security TLS connection is established with the connection manager server functionality at the service management center network and communications with the service management center network at step . This TLS connection in one embodiment is a signaling channel that is always on for transacting various communications with the service management center network. For example the channel or session may remain logically on at least while the device is authenticated and may remain on for the duration that the gateway device is powered on and providing its services and functionalities as the in premises or in home platform for endpoint devices associated with the premises.

Continuing to step the gateway device then sends an authentication request including an authentication digest using a hardware identifier an activation code and a subscriber ID and waits for an authentication response. At step the process waits until the authentication notice or like response is received. If the authentication response is not received the process terminates as shown at step . If the gateway device becomes authenticated at step the gateway device requests from the service management center the authentication keys and stores them at the gateway device. These keys are used whenever a gateway device has to be authenticated e.g. when conducting a transaction or accessing the service management center network for example through a web services interface or a control signal channel.

Continuing to step the gateway device sends a request to the subscription manager functionality or the like of the service management center network and the gateway device waits until it receives a response. The request from the gateway device includes for example the gateway device identifier information. In response the subscription manager functionality of the service management center network replies with a service descriptor indicating the latest software version and configuration information for that gateway device for example information associated with one or more services currently subscribed in that gateway device the latest software information for the gateway and configuration for all subscribed services. There is also provided an indicator that identifies a change in user specific service data for all of the subscribed services if any.

Continuing to at step the gateway device determines whether its firmware versions are up to date by checking the received software version numbers with version numbers for the firmware modules that currently reside in the gateway device . If necessary the gateway device receives the actual software or configuration data from the service management center for instance through a web services interface over a secure HTTPS connection in one embodiment. At step a determination is made as to whether the configuration data and user data for each service of up to N services that the user may be subscribed to are up to date. For each service if it is determined that the configuration data and user data are not updated the gateway device may receive such data from the service management center network for example over the HTTPS connection.

Continuing to step the gateway device may apply the configuration software updates immediately or schedule them for another time. A user may utilize a GUI to schedule the updates. If certain firmware needs to be updated right away there may be a prompt presented to the user to acknowledge and approve the updates.

At step a gateway device accessibility test is performed to determine if a VPN connection to the service management center network is needed. This may happen if the gateway device is behind a firewall or the like that protects the gateway device from the public access. The test for example may be optional. In one embodiment this test is done on start up and for example for cases when the gateway device is disconnected from the WAN or a new IP address from the WAN is assigned. An accessibility testing functionality of the service management center network for example may send a connection request such as a ping in order to try to reach the gateway device. Different port numbers on a given IP address may be tested for reachability to the gateway device.

Continuing to step a determination is made as to whether accessibility has been challenged e.g. the device lies behind a firewall at a private IP address. If accessibility has been challenged then at step a connection with a VPN is established. Step represents the step of storing the WAN and VPN IP addresses to be used for inbound services. Examples of inbound services may include but not limited to voice service remote web access etc. At step the gateway device sends a message to the service management center network for example which message is routed to service manager and subscription manager of the service management center network . The message informs the service manager and subscription manager about the gateway device s current version and configuration information. Registering with those server functionalities may initiate notification services that enable asynchronous configuration firmware and or user data updates.

At step a general multi purpose registration is performed whereby a service register request message is sent from the service manager to a location server of the service management center network . This request message tells the location server that the gateway device is ready to accept inbound services on a given IP address and port number for the respective service. Thus the information may include the IP Address WAN VPN and or other specific data for informing the location server how to route to the gateway device . In one embodiment a clock on a gateway device may be set when the gateway device re registers with the service management center network .

In one embodiment the connection manager may aggregate a plurality of connection channels and multiplex these signaling channels to the message router device . The connection manager works with the message router and the authentication manager to authenticate the multi services gateway device and allow its access to the network by enabling the establishment of a control channel providing an always on control channel between the multi services gateway device and the services service management center once the gateway device is authenticated. The connection managers also provide network security and protection services e.g. for preventing flooding denial of service DOS attacks etc. In one embodiment there may be interfaces such as APIs for interfacing the connection managers or the like to the message routers and the multi services gateway devices . As the network of multi services gateway devices grow the number of connection managers may grow to meet the demand for concurrent signaling control channel connections.

In one embodiment a message router device s provides control signal message routing services and session management services to the multi services gateway device and the other network elements of the service management center . In one embodiment the message router device has control channel signaling access via the control channel to the firmware upgrade manager server or gateway firmware updater VOD server s a billing system content managers pub subs service accessibility test manager authentication manager service manager subscription manager alarms aggregator network management NWM server and public web proxy redirect and the multi services gateway devices . The message router may also include a session manager subsystem that maintains control channel state information about every gateway device client in the gateway service center network. The message router and session manager enable sessions to be established to each multi services gateway device and each element of the service management center and provide robust routing services between all the components. The message routers may additionally connect to other message routers for geographic based scaling creating a single domain based control channel routing infrastructure. The message routers may additionally connect to IM gateways and other message routers that provide user based IM services which may enable users to interact directly with their multi services gateway device via IM user clients. Thus besides providing routing and session management for all the multi services gateway devices and the network elements the message router element enables control signaling between all the network elements and the multi services gateway devices and connects to IM gateways to provide connectivity to other IM federations.

With respect to authentication functionality the authentication manager component provides authentication services for all the network elements of the service management center network . The service management center network elements query the authentication manager to verify the identity of elements including the multi services gateway device during inter element communications. The gateway device authenticates the service management center at the Web Services Interface . The Web Services Interface for example may return data that the multi services gateway device uses to confirm the identity of the service management center .

The authentication manager functionality may interface to the multi services gateway devices and other network elements such as the message router and session manger servers the accessibility server or the like the service accessibility test mangers the web services interface or the like the provisioning manager server the NWM server or the like pub sub or the like VODs CA servers and the billing system or the like.

As mentioned herein with respect to the connection manager servers or the like functionality in the service management center network provide connection services and enable the establishment of a control channel enabling an always on control channel between the gateway device and the service management center functions of the service management center network. Thus in one embodiment a gateway device establishes a TCP TLS connection to the connection manager functionality in the service management center network as shown at .

As mentioned above once the gateway device is physically connected to the service management center via the network it registers and authenticates itself on the service management center network . In one embodiment this registration and authentication is done through the above established secure connection. Further details regarding TOP control channel and authentication are now described with reference to . In one optional embodiment data link layer security may be established by implementing for example Simple Authentication and Security Layer SASL . The SASL framework provides authentication and data security services in connection oriented protocols via replaceable mechanisms IETF RFC 2222 . This framework particularly provides a structured interface between protocols and mechanisms and allows new protocols to reuse existing mechanisms and allows old protocols to make use of new mechanisms. The framework also provides a protocol for securing subsequent protocol exchanges within a data security layer. At step after establishing the TCP TLS connection between gateway device in the home and the service management center network e.g. connection manager server or the like the SASL authentication process is initiated whereupon the gateway device communicates authentication details to the connection manager server . The connection manager server of the service management center network routes the authentication request to the authentication manager via intermediary of the control message router device and session manager servers or the like as shown at in . Once the authentication details for the gateway device reach the authentication manager the gateway device is authenticated. Additionally control access information is communicated to a Location server which may provide location and IP port information updates to for example other network functionalities or elements such as a file sharing server remote web access server other gateway devices and other elements.

In the example with the security option once secure connection e.g. XMPP connection is established at step authenticated session state between the home gateway device and the service management center network is ensured and messages can safely flow to and from the gateway device . In one embodiment authentication credentials may include user ID subscriber ID and a unique identifier id that is hardware dependent. In an alternate embodiment a unique hardware based ID need not be sent however may be used to hash a string or digest. At this point any requests originating from the gateway device may be serviced.

The authentication procedure between the gateway device and the authentication manager is repeated from time to time to allow the service management center network to confirm authentication of the respective gateway device . The authentication manager could initiate such a repeat authentication but typically this would be initiated by a new authentication request from the gateway device . The gateway device would be programmed to initiate the new request after some predetermined period of time. In turn the authentication manager would be programmed to terminate authentication of the respective gateway device if such a new request was not received within some delay interval following expiration of the time for the expected new request. The signaling connection would be torn down when the device no longer passes authentication in this example when it fails to send the expected new request for confirmation of authentication in a timely manner. If the device later attempts to obtain authentication it would go through the procedure to communicate with the authentication manager as outlined above relative to .

In one example a presence and peering based messaging protocol is used for the gateway device to establish connection with the service management center network . This may comprise an SASL or NON SASL based XMPP Extensible Messaging and Presence Protocol described in IETF RFC 3920 and RFC 3921. For instance using XMPP messages are sent and received between the gateway device and the service management center network e.g. via connection manager and message router functionalities .

In one example during the authentication if the service management center network does not contain the gateway device registration and subscription information the service management center network may prompt the user via the gateway device for the information. Such information may include but is not limited to gateway identifier such as the MAC address name for a fully qualified domain name FQDN which is a complete DNS name such as johndoe.xxx.com subscriber information such as name address email and phone number. Additionally service plan information such as file sharing voice file backup media services personal page home automation billing to which the user is subscribing or desires to subscribe user name and password for the subscriber and billing options and information may be obtained.

In one example before completing the authentication process the service management center network optionally may display to the user via the gateway device a list of the enabled services allowing the user to confirm the services enabled and or allow the user to add to or delete from the services enabled. Once the authentication process is completed the service management center network registers the gateway device with other functionalities in the network for enabling different services. For example for phone service there may be an optional registration or authentication process on the SIP redirect server functionality.

In one example the gateway device and the service management center network utilize keys or tokens for authenticating the gateway device web service interface requests and other services subscriptions for instance to verify that the gateway devices are valid users of the system and services. In one embodiment the authentication keys also referred to as tokens herein are renewable and may change dynamically for each gateway device. For example the authentication manager or the like in the service management center may generate updated keys or tokens for all or a selected number of gateway devices notify those gateway devices periodically or at predetermined times to retrieve the new authentication keys. In another embodiment the gateway devices themselves may request the authentication manager or the like to provide a new or updated key. Yet in another embodiment the updated keys may be pushed to gateway devices. This way the keys or tokens are periodically refreshed. Such dynamically changing keys enhance security for instance making it difficult for hackers to track the changing keys.

Each gateway device may have more than one authentication key for instance for different purposes. For example there may be different keys or tokens for allowing access to different services or features provided by the gateway device. Thus authentication keys are also referred interchangeably as service keys or tokens. These service keys may also dynamically change and are renewable. In one embodiment the gateway device receives the service keys or tokens when individual services are provisioned on the gateway device. Thereafter the service keys may be updated to change periodically at a predetermined intervals or regular intervals. The keys or tokens themselves in one embodiment may be hardware based key. In another example they may be implemented independent of the hardware they are being used on.

In an example the service management center network may also provide web services interface functionality for example shown at in that forms an application programming interface API between the gateway devices and the service management center network as a mechanism to communicate between the gateway devices and the service management center network. That is in addition to the established signaling control channel the gateway devices and the service management center network may utilize web services interface to communicate. For instance the gateway devices and the service management center network may exchange information via secure HTTP or HTTPS using SOAP XML WSDL etc. or the like.

In one example an authentication key is used or embedded in the message in order to validate the communication between one or more gateway devices and the web services interface functionality in the service management center network . In one embodiment the gateway device may request from the service management center network for instance from its authentication manager functionality a temporary key which is to be used when the gateway device requests services via the web services interface . Preferably this key is not a service specific key but rather identifies a particular gateway device to enter the service management center through the web services interface . Every time the gateway device requests a key the authentication manager functionality may store the key and the expiry time of the key. A response message provided from the authentication manager has the key and expiry time. In one example gateway devices are responsible to determine a status of the key compared to the expiry and to request a new key before the expiry time. In another embodiment the web services interface authentication key may be assigned during initial registration and may be renewable as described above with reference to dynamic renewable authentication and service keys.

The web services interface subsequently directs message requests to the appropriate functionality in the service management center network . The incoming requests may be load balanced in one embodiment by the DNS server and loading and performance information may be fed back to the DNS in support of this function. The web services interface may have interfaces e.g. APIs to the gateway device the authentication manager functionality of the service management center network DNS the service managers of the service management center network etc.

In an exemplary embodiment a gateway device may utilize the web services interface to pull data software or information from the service management center network while the service management center network may utilize the signaling control channel to push data such as various notification data to the gateway devices. In an example discussed more below the subscription manager notifies the gateway device of configuration data applicable to a service subscribed to by the customer associated with the particular gateway device. If the gateway device determines that it needs the configuration data not yet resident or not up to date then the gateway device sends a request to the web services interface which is forwarded to the appropriate service manager . The service manager in turn sends the configuration data to the gateway device for loading and future use. A similar procedure can be used to download software e.g. from a gateway updater or other firmware server based on a descriptor from the subscription manager or a published notification from a Pub Sub server.

In one example the service management center network further includes provisioning manager functionality which may handle gateway device registration and subscription activation. depicts conceptually the process of subscriber provisioning in one embodiment. The provisioning manager functionality may interface to 3.sup.rd party order entry or provisioning system that is enabled to accept purchase orders for gateway devices and services provided therein. In another aspect the provisioning manager may interface with a user interface provided in the service management center network for entering and accepting such orders. Thus for example gateway device registration or subscriber provisioning may occur through an internal customer service representative user interface application or a customer subscriber self provisioning web application or through a partner service provider application interface. Other registration methods are possible and they are not limited to those listed methods. For instance the first time registration may occur during power up and initialization stage as explained above or any other way.

In each instance the subscriber information may be input via the provisioning manager or the like functionality. As will be described in more detail provisioning input may include attributes such as the gateway device identification information user information and service plan information. In one embodiment the provisioning input data including subscriber provisioning action data may be classified as accounting business and operational data and may persist in the provisioning manager as shown at . This may be an optional step for example where partner service providers have there own existing systems.

Examples of subscriber information include but are not limited to the following. In addition not all information is required as subscriber information. Examples are subscriber name address billing information email phone social security number SSN etc. gateway device ID e.g. MAC address MON such as e.g. johnsmith rosservice.com. This data may be generated and may have different domain base depending on the provider. This ID may be called the JID jabber ID or BIT Box ID or Family ID a subscriber unique ID Internal Generated Number an assigned gateway device serial number the serial number may be an external identifier of the gateway device a gateway device model number e.g. to link the software configuration to the model a user access password this may be different from the gateway device access key which is operational system generated a user service gateway device binding identifier this may be generated by the system and mailed to user a locale region identifier a list of the subscribed services e.g. voice video remote access backup a list of service specific features e.g. voice call forwarding allowed voice feature 2 etc. a list of service specific user details e.g. voice DN etc. Backup Max GB Max Bandwidth etc.

In a further step as shown at the added gateway device and or user e.g. new subscriber is added to the authentication manager functionality . Thus for example the authentication manager functionality may maintain the following subscriber information data for authenticating users and their gateway device devices the JID BID the gateway device s serial number a user access password a user service gateway device binding identifier the subscriber active disable status the gateway device hardware ID a subscriber hardware binding BOOL a Web interface access key and associated Web interface access key validity time.

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to the subscription manager server or functionality or the like . Thus the subscription manager for example may maintain the following subscriber information data for providing subscription information to gateway devices the model number the JID BID or the like to be able to create and distribute the right package of meta information and to identify the firmware ID configuration and configuration data to the gateway device. Additional exemplary data made available at the subscription manager may include but not limited to user ID gateway device serial number the gateway device model the subscriber locale current gateway device firmware version and a list of services and enabled features for example 

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to one or more service manager servers or devices or functionality or the like . Service data maintained at the service manager may include but is not limited to information identifying configuration files e.g. voice dial plans parental control black lists etc. for the application services and features thereof subscribed to by the customer associated with a gateway device . This data may be in database or versioned files stored on disk. Optionally the following subscriber data may be maintained at the service manager the gateway device s JID BID the provisioned subscriber data for each service e.g. a list comprising Data 1 Data 2 etc. and the generated subscriber data for each service e.g. a list comprising Data 1 Data 2 etc. . It is understood that some services are basic services and some services may not have subscriber data at all. Thus as an example if implementing provisioning of Backup Services the service management center network may generate the following account on behalf of the subscriber Backup Acct ID KEY. The provisioned subscriber data and generated data are communicated to the gateway device .

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to a SIP directory server or like functionality and additionally to the Session Border Controller device or like functionality as shown at step . For example the SIP directory server may be provisioned with data such as the SIP user identifier e.g. www.gw10.ros.com associated gateway DN numbers and any other data as may be required by the Session Border Controller device e.g. realm data or location data for the endpoint device. Additional service data that may be provisioned may include OFFNET ONNET DN Numbers and other SIP Service specific data.

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to the publication subscription Pub Sub server or like functionality . The new subscriber information maintained at the Pub Sub may include the subscriber for gateway device software firmware update events and for service configuration locale events e.g. U.S. dial plans parental controls etc. The Pub Sub server may maintain various event channels and the content for event channels i.e. events per channel and subscribed users for the event channels i.e. users for channel .

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to the billing sub system server or like functionality. The new subscriber information maintained at the billing sub system server may include but not limited to the subscriber name address billing information email phone SSN user ID e.g. johnsmith rosservice.com a subscriber unique ID Internal Generated Number an assigned gateway device serial number the serial number may be an external identifier of the gateway device a locale region identifier and a list of the subscribed services.

In a further step as shown at step the added gateway device and or user e.g. new subscriber is added to the Alarms Diagnostics and Network Management server or like functionality and alarm aggregator sub system. The new subscriber information maintained at the Alarms Diagnostics and Network Management Server may include alarms user identifier and other data required for alarms management system and diagnostics.

Thus the provisioning functionality or the like generally provides provisioning services to all service management center network elements. The managers may send and receive provisioning information via a gateway interface e.g. APIs to and from 3.sup.rd party provides such as wholesale VoIP and backup service providers. The provisioning managers may also send to and receive from the branding customer service provider aka North Bound interfaces . The provisioning manager may provide a graphical user interface for service provider users and customer users to order initialize and provision services. The provisioning manager further may distribute the order or provisioning information to the following functional elements subscription manager authentication manager servers service manager s SIP directory server Pub Sub servers VOD s CAs billing system firmware update manager location server the NWM SBC s content provider s and wholesale providers via the gateway interfaces APIs .

While the provisioning service or functionality was described with respect to registering new gateway devices or subscribers functionality for provisioning new services for existing users or gateway devices may be provided in the similar manner for example by the provisioning manager server or like functionality.

In one embodiment a customer or user self provisions endpoint devices on a particular multi services gateway device . The provisioning system or like functionality may provision how many endpoints and the types of devices that can be self provisioned by the user. In one embodiment the gateway devices are capable of automatically discovering and configuring the gateway device compatible devices belonging to enabled services in the premises such as the home or business for instance with minimal human intervention e.g. for security purposes some devices may need administrator level prompting to proceed with configuration actions . For instance the gateway device compatible endpoint devices are devices that the gateway device can communicate with and thus become the center of management for the services offered trough these endpoint devices. One or more of these endpoint devices may have automatic configuration capabilities such as universal plug and play e.g. uPNP devices . These endpoint devices may include but are not limited to media adaptors SIP phones home automation controllers adaptors that convert IP interfaces to PSTN FXO and FACS interfaces etc. In one example the method of configuration e.g. automatic discovery and configuration may be based on the specific device s current firmware or software or like version. The gateway device in one embodiment also may keep a record or table of configuration information for example for those devices configured automatically. Such information may include for example for media adaptor supported formats and bit rates for home automation controller information pertaining to the type of controller such as Insteon Awave etc.

As another example if the phone service is enabled and if the gateway device detects a new SIP device the gateway device may prompt a user to determine if the detected endpoint device needs to be configured for association with the gateway device. If it does then the gateway device may configure the detected device on its network home network or other premises network . Yet as another example when new drives are added to the gateway device for storage expansion the gateway device may automate initialization of the expanded device storage.

The gateway device may request information from the service management center network for services that the gateway device is subscribing to for example during initialization stage as mentioned above or at any other time. The service management center network contains subscriber and gateway device identification details. Thus the service management center network may respond to the request with the subscription information and version numbers for various configuration data needed for the services that are subscribed. illustrates how a gateway device establishes a service subscription request service request check for instance via the TCP TLS XMPP control channel to the service management center . This service request check may be available to ensure that the multi services gateway device is in sync with the network provisioning and subscription management systems as to what type s of services are allowed for the user. This results in finite and real time control of services allowed by the gateway device for a user by the application service provider via the service management center . The service check may also be useful to keep track of service configuration data and or the firmware software of the gateway device and to keep the same software base irrespective of the country region but have the ability to load configuration customization information per user based on locale or other criteria.

As an example during the multi services gateway device initialization process the multi services gateway device queries the subscription manager for example via the control channel to determine what services and features are enabled for the multi services gateway device i.e. based on subscription by the associated customer with the application service provider. The service management center network for example using its subscription manager functionality responds with a descriptor including the subscription information associated with this particular gateway. Examples of data that subscription manager functionality may store in one embodiment May include but not limited to JID BID gateway device model number services subscribed to features subscribed to per service revision exception list for each gateway device. The multi services gateway device checks the received subscription information such as version information against the current versions resident on the multi services gateway device . If the multi services gateway device determines that the versions are different it may start initiating one or more downloads of the configuration data through web services interface and the applicable service manager s . Preferably the multi services gateway device s firmware and service configuration are implicit subscriptions and hence the multi services gateway device will receive notifications via the Pub Sub server when new versions of software and or service configuration data are available. The new version notifications indicate the version to download and the same logic of version checking is performed in the multi services gateway device . When downloads are complete the multi services gateway device subsequently enables the subscribed services and features.

The subscription manager functionality also informs all requesting service management center network elements what services and features are enabled on a particular gateway device . The subscription manager functionality also determines what service specific configuration data needs to be downloaded to the requesting multi services gateway device . In an exemplary embodiment the subscription manager functionality determines the data needed by interacting with service manager functionality which stores and distributes specific configuration data for services. The subscription manager functionality may interface to the multi services gateway devices e.g. indirectly and the following functionalities of the service management center network message routers and session manager s the accessibility server the service access test mangers the provisioning manager the NWM VOD s CAs pub sub service manager server and billing sub system. The subscription manager functionality may additionally support some internetworking to other service providers via the gateway interfaces.

In one example the service management center network includes service manager functionality for each specific service. The service manager functionality may store and distribute service specific configuration data for each supported service on a per multi services gateway device basis. Thus service manager functionality may include service specific configuration managers for voice back up or any other services that are provided by the center and the gateway devices . Examples of this configuration data include but are not limited to VoIP configuration data such as location related dial plan information and content media configuration data such as URL links etc. The service manager functionality or servers work with subscription manager functionality to resolve multi services gateway device version requests and ensure that the multi services gateway devices have the correct version of configuration data. In one embodiment there is a service manager for each supported service. In addition there may be a service manager or like functionality for storing and distributing baseline multi services gateway device configuration data. Subscriber data per service may exist inside the service manager and also stored directly in the service component e.g. SIP Redirect SBC device. The service managers or the like functionality or servers or devices may interact with the subscription manager provisioning NWM Web services interface Pub Sub message routers and multi services gateway device. Additionally third party wholesale providers such as a backup service may interface to the service managers via a gateway interface or an API.

In an exemplary application for gateway device services data and or software are distributed to the gateway device to enable it to provide various services. Configuration data is provided to the gateway device from the service management center network . For instance subscription manager functionality of the service management center network for example as part of initialization process queries the service managers functionality to obtain configuration data that can be sent to the gateway device and which versions from configuration perspective to report back to the gateway device . Such configuration data may include a web service interface URL of the service manager for where the gateway device should communicate. The subscription manager functionality then sends the metadata of the configuration data that is information associated with the configuration data back to the gateway device . The gateway device then may update its configuration if needed by accessing the service manager functionality for example via the web services interface using the URL and retrieving the needed configuration data from the service manager s . In another embodiment the service management center network e.g. service manager functionality may push the needed data to the gateway device via the signaling control channel. For each service the service management center network provides configuration data to the gateway device e.g. via service manager functionality and posts a notification if new configuration data is required. When the user invokes the service the gateway device will thus know all that it needs to invoke the service. For instance data that the gateway device needs may be obtained from the service manager functionality . Login information and keys may be obtained from manager for a particular service e.g. for service keys.

As previously mentioned in view of the Publisher Subscribe Pub Sub server or like functionality accepts and maintains subscription requests for gateway device upgrades and device upgrades from networked services support elements and particularly from every gateway device in the system. Networked elements communicate with the Pub Sub system or like functionality and publish information that other elements may have subscribed to. The Pub Sub matching engine matches the published information with users typically gateway devices that have subscribed for notices of new specific information. If the Pub Sub matches a pub publish with a sub subscription a notification message is sent for example via XMPP protocol or like peer and presence messaging protocol on the signaling control channel to the subscribing user notifying them of the new information.

In the scenario depicted in the updater with knowledge of updates to gateway firmware or software or the like endpoint device firmware or software or the like or service configuration files or the like may publish the update information to the Pub Sub server or like functionality for example as shown by the route . The gateway updater may receive a message or notification at that updates are available from other sources. Additionally various service managers or like functionality that handle specific services and associated configuration information and data may publish information in the Pub Sub that updates are available for those services. Thus in one embodiment update manager functionality may publish information on Pub Sub as to the availability of updates for gateway devices and endpoint devices. Similarly specific service managers or like functionality . May publish information on Pub Sub as to the availability of updates for the respective specific services.

In one example the update notice published by the updater service managers and or other software firmware update manager may include but is not limited to new configuration version information for latest firmware or software for the specific service or devices. A matching engine functionality of the Pub Sub server identifies the gateway devices that are subscribed to receive these particular updates e.g. for a specified application service or related feature and generates and sends a notification message to those identified gateway devices that updates are available for example via IM like messaging or any other presence and peering protocol over the public Internet.

As mentioned above consumers may subscribe for updates to digital endpoint devices connected to the gateway device as well in one embodiment. For example a user has a certain type of phone and if there is an update the Pub Sub notification functionality will notify the gateway device of the updates available for that phone type. Thus all of the gateway devices that have that phone will be informed with service upgrades. In one embodiment matching engine functionality of the Pub Sub sends notifications of all the update information concerning operation of the phone device to the subscribers and or notifies the matching gateway device that is the gateway device determined as having this type of phone as one of its endpoint devices of updates for example via signal control channel e.g. using XMPP for example when news or updates are received for this particular phone. The matching engine of the Pub Sub determines all of the subscribers that are subscribed for that service and will put out update notifications to all of the identified subscribers gateway devices.

Thus service managers and or update manager publish update information availability to the Pub Sub functionality the gateway devices subscribe to desired update publication services for example by registering the current versions of its configuration data and software firmware to the Pub Sub and the matching engine functionality of the Pub Sub matches the published data with subscribing gateway devices and sends a notification to each subscribing gateway device .

In one example the service management center network may include a software firmware update manager functionality that keeps the gateway devices updated with compatible software and configuration information for the gateway s and the endpoints connected to the specific gateway device. This functionality is similar to the service manager functionality that handles configuration data and updates for specific services provided in the gateway device. The firmware update manager FUM component or the like functionality may utilize the underlying accessibility framework of the service management center network to reach the gateway device and interoperate with the in home in premises digital devices. In embodiment as mentioned above the gateway devices subscribe for updates on behalf of its endpoint devices.

In one example the firmware update manager or the like functionality and the gateway devices authenticate with each other prior to any transactions. The updates are generally performed automatically. The FUM sends a control signal to the target gateway devices and the gateway device schedules and pulls the data download from the FUM to the gateway device. In one embodiment the FUM may maintain a database of all gateway devices and endpoints behind the gateway device with firmware version information. This database is indexed based upon the unique identifier and account information for each gateway device. To provide this functionality the firmware update manager may have interfaces to the gateway s pub sub provisioning system and network to management servers that may further request a forced update of endpoint or gateway software to the gateway device. The firmware update manager may have network gateway interfaces to other third party partners to gather updates for the partner endpoint devices connected to each gateway.

In one example after device authentication as in as part of the gateway device registration process the gateway device may be instructed to query for its version status as indicated at as shown at sequence in . The steps in sequence include the instruction and communication of the query to the updates including the software firmware details of the particular gateway device and associated endpoint devices. This information from the gateway device is forwarded to the connection manager server and sent to the upgrade manager to determine whether the gateway device is performing with the latest software firmware versions and proper upgrades. Any upgrades deemed necessary or available for the gateway device are forwarded back to the control message router and sent back to the gateway device where the updates are installed. Optionally a package download status sequence may be initiated where the upgrade patch is installed at the gateway device . The gateway device may be reregistered or restarted and the patch installation is verified at step . As part of this sequence the gateway device generates a notification that it is ready to receive firmware updates e.g. future updates which communications are forwarded to the publication subscription pub sub server of the services service management center network.

It should be understood that a software firmware upgrade throttling mechanism may be provided such that dependent upon the load status resource utilization as determined by the provisioning firmware download server the firmware update rate may be modified on the fly. That is as shown in when multiple gateway devices are connected and each are subscribed to receive the firmware upgrades the load status may be determined based on a resource utilization parameter from the firmware upgrades manager server. This update notification rate is then recalculated to a sustainable rate depending upon the update server load.

As described above one or more gateway devices communicate with the FUM or like functionality to download compatible software for itself and the associated endpoint devices. In one embodiment the gateway device is responsible for updating endpoint devices with the downloaded software. A user of the gateway device may have an option that is configurable to have updates automatically downloaded when available or be prompted to initiate the download. For instance when a new version of gateway device firmware is available the FUM or like functionality notifies the gateway device either directly or via pub sub. If the user is configured for automation then the gateway device would initiate download of the firmware. If the user is configured to be prompted then the gateway device notifies the user and waits for an ok from the user. If the user agrees for the update then updater in the service management center would initiate a download of the firmware.

In one embodiment once the software is downloaded the gateway device performs the automated firmware upgrade to install the received software as part of its resident firmware when indications are clear that the upgrade will not be interrupting other functions or services provided in the gateway device. For determining compatibility with other existing functions or services the gateway device performs a basic set of acceptance tests to make sure that the subscribed services are still functional after the upgrade. This may be done for example referring to a matrix or table of information regarding compatibility or interoperability among software firmware hardware or like of various services gateway device components and endpoint devices. In one embodiment this matrix or table of information is received as part of configuration data from the service management center network for example during initialization procedure and during other communication session and may be maintained in the gateway device. In another embodiment the compatibility test may be performed before the upgrades are downloaded thus necessitating only the compatible versions of upgrades to be downloaded. The gateway device in one embodiment has the capability to fall back to a previous release in the event of a software upgrade failure. In one embodiment as described above FUM or like functionality keeps track of the various gateway devices that it communicates with and the firmware version on each gateway device . In another embodiment FUM does not have knowledge of which gateway devices need which upgrade. Rather FUM simply publishes information regarding any updates to the pub sub server or like functionality and it is up to the pub sub server to notify the appropriate gateway devices.

Similarly for the associated endpoint device a user may have the option to automate the download or be prompted to initiate the download when an update is available in the FUM for example. For each gateway device the FUM or like functionality may be responsible for tracking the software version status and upgrade availability for the endpoint devices that each gateway device communicates with. Thus in one embodiment the FUM or like functionality may maintain a matrix that may include but not limited to the following information the gateway device version the services enabled on each gateway device currently connected devices on each gateway device the software version currently on each device the software versions of the endpoint devices that are compatible with the existing gateway device version. When a new version of software or firmware for an end device that is supported on a gateway device is available on the FUM or like functionality the FUM may do the following for each gateway device check to see if the new version is supported on the current version of the gateway device firmware and if the new software load and gateway device version are compatible then FUM notifies the gateway device if that endpoint device is supported on the gateway device. If the user is configured for automation then the gateway device may initiate download of the endpoint device software. If the user is configured to be prompted then the gateway device notifies the user and waits for an OK from the user. If the user agrees for the update then the gateway device may initiate download of the firmware. If the gateway device chooses to download the update then the FUM or like functionality allows the gateway device to download the new version. Once the software or firmware or like is downloaded the gateway device may perform the automated upgrade of the endpoint device when indications are clear that it will be not be interrupting the rest of the functions and services. The gateway device may perform a basic set of acceptance tests to make sure that the end device is still functional after the firmware upgrade in the similar manner described above with reference to the gateway device firmware upgrade. The gateway device also may have the capability to fall back to a previous release in the event of an upgrade failure.

In one example as described above FUM or like functionality keeps track of the various gateway devices that it communicates with and the firmware version on each gateway device and or its endpoint devices. In another embodiment FUM does not have knowledge of which gateway devices need which upgrade. Rather FUM simply publishes information regarding any updates to the pub sub server or like functionality and it is up to the pub sub server to notify the appropriate gateway devices.

With respect to FUM and specific service managers providing update and configuration information to various gateway devices and or network elements there may be a plurality of ways in which such notification may occur. In one embodiment different methods may depend on different categories of configuration and upgrade data organized for example in the individual FUM or service managers or like functionality. Far example data may be classified into different categories such that for one class of data there should be notification available to all gateway devices and or network elements. For this class of data FUM or service managers or like functionality may publish the available information via the pub sub functionality and allow Pub Sub to determine which gateway devices or network elements should be notified and handle sending of notifications. Another class of data may be data that is directed to a subset of elements for example regional data that are directed to gateway devices located in certain regions or locales. For this type of data pub sub feature may also be utilized. Yet another class of data may be data that is solely for a specific gateway device or network element. For this type of data the service mangers or FUM or like functionality need not utilize pub sub feature rather the data may be communicated directly to the individual gateway device directly for instance using an XMPP control channel or to the individual network element via interfaces.

As mentioned earlier the gateway devices and service management center support a communication capability between the appliances. This feature for example may be utilized for enabling secure peer to peer sharing of data between or among the gateway appliances. is an architectural diagram similar to that illustrates an overview for communicating or sharing between the gateway devices. As shown at signaling information is communicated via the signaling control channels for instance using XMPP. Then the gateway appliances .sub. negotiate the subsequent transfer of media over the data path as represented logically by the dotted line . In the example this media or data need not travel via the signaling control channel. Thus for example a HTTPS path may be negotiated between the appliances .sub.. An example of a process or service using this peer to peer communication would be a file backup in which files are backed up on different gateway devices.

Additional aspects of the peering capabilities enabled by the gateway device service management architecture include the ability to store a roster or contact list of distant gateways on either the gateway or within the service management center and utilizing these addresses to maintain the presence and routing information of selected other gateways. This roster information is used to establish and manage access and message routing via XMPP messaging to gateways to locate and address other gateways and set up peering relationships between the gateways.

A gateway may also expose other details about resources or endpoints within the home to other gateways by communicating resource information along with presence information. As an example a gateway may send presence information to selected buddies via the signaling channel and also include information about the resources available to the distant buddy. Examples of resources include digital picture frames that the distant gateway user may direct photos to web cams or other resources enabling direct interaction between an end user connected to one gateway or in automated scenarios the gateway itself and a distant device connected to the local area network of another gateway.

When a user interacts with the resource sharing functions of their gateway the user may select a specific gateway .sub. from their roster represented as a buddy list. When the user selects a buddy additional resource details are displayed to the user providing information about any resources that the end user may utilize via that selected peer gateway device .sub..

The XMPP messaging protocol combined with the roster and XMPP addressing mechanisms may be utilized for either end user interactions or automated interactions between gateways. Automated use of the peering capabilities include directing utility data for usage and network management information to designated collectors within peering groups and then having the designated collector forward the combined information to the service management center. This distributes the collection processing to the gateways and decreases the overall processing and bandwidth utilization in the service management center. Of course the XMPP protocol is discussed here merely by way of example and those skilled in the art will recognize that the gateway to gateway device communications may use other protocols.

The gateway device and its interactions with various endpoint devices and with the service management center have been described with reference to diagrams of methods apparatus systems and computer program products. It will be understood that elements and functions illustrated in the diagrams can be implemented by computer program instructions running on one or more appropriately configured hardware platforms e.g. to operate as a gateway device or as one or more of the enumerated elements of the service management center . Hence operations described above may be carried out by execution of software firmware or microcode operating on a computer other programmable device of any type. Additionally code for implementing such operations may comprise computer instruction in any form e.g. source code object code interpreted code etc. stored in or carried by any computer or machine readable medium.

Program aspects of the technology may bethought of a products typically in the form of executable code and or associated data for implementing desired functionality which is carried on or embodied in a type of machine readable medium. In this way computer program instructions may be provided to a processor of a general purpose computer special purpose computer embedded processor or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus so as to implement functions described above.

Terms regarding computer or machine readable medium or media as used herein therefore relate to any storage medium and any physical or carrier wave transmission medium which participates in providing instructions or code or data to a processor for execution or processing. Storage media include any or all of the memory of the gateway device or associated modules thereof or any of the hardware platforms as may be used in the service management center such as various semiconductor memories tape drives disk drives and the like which may provide storage at any time for the software programming. All or portions of the software may at times be communicated through the Internet or various other telecommunication networks. Such communications for example may enable loading of the software from one computer into another computer for example from the updater hardware platform for a gateway device or from another source into an element of the service management center . Thus another type of media that may bear the software elements includes optical electrical and electromagnetic waves such as used across physical interfaces between local devices through wired and optical landline networks and over various air links. The physical elements that carry such waves such as wired or wireless links optical links or the like also may be considered as media bearing the software. Hence the broad class of media that may bear the instructions or data encompass many forms including but not limited to non volatile storage media volatile storage media as well as carrier wave and physical forms of transmission media.

Those skilled in the art will recognize that the teachings of this disclosure may be modified extended and or applied in a variety of ways. An extension of the system architecture for example provides the ability of various and disparate third party application service providers to provide multiple application services independently. Application services are managed by the managed service provider through the service management center meaning generally authorizing provisioning and monitoring the usage of a particular application service. This can be accomplished in a variety of ways with varying degrees of involvement of or coordination with the service management center. The service management center could manage these items soup to nuts or have minimal involvement. For example the service management center could deal directly with the third party provider to acquire application services at the request of a user and manage the delivery authorization usage monitoring and upgrading of the application service. At the other end of the spectrum the managed service provider may have arrangements with the third party application service provider by which orders or requests from the users may come directly to the third party application service provider and services are delivered to the user by the third party service provider who in turn coordinates with the managed service provider to register and monitor the particular application service placed in the gateway device . It should be noted that this ability to manage application services extends through the gateway device into the endpoint devices registered or associated with the gateway or network.

While the foregoing has described what are considered to be the best mode and or other examples it is understood that various modifications may be made therein and that the subject matter disclosed herein may be implemented in various forms and examples and that the teachings may be applied in numerous applications only some of which have been described herein. It is intended by the following claims to claim any and all applications modifications and variations that fall within the true scope of the present teachings.

