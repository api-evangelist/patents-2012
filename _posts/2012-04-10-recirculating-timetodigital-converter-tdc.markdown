---

title: Re-circulating time-to-digital converter (TDC)
abstract: A re-circulating time-to-digital converter (TDC) can include a triggered reference ring oscillator (TRRO) and a delay module. The triggered reference ring oscillator can, when triggered by a reference signal edge, generate a periodic ring oscillator signal with a ring oscillator period that is a selected ratio of a voltage-controlled oscillator (VCO) period. The delay module can store, in a plurality of latches, samples of a VCO signal docked by the periodic ring oscillator signal. Each latch can generate an output of the sample, and each latch output can represent a time difference polarity between VCO signal and TRRO signal. In another example, the re-circulating TDC can include the triggered reference ring oscillator, a digital frequency lock module, and a TDC post-process module. The digital frequency lock module can generate a ring oscillator control signal, which sets the ring oscillator period for the triggered reference ring oscillator. The TDC post-process module can generate a TDC output, which can be a binary representation of a phase difference between a reference signal and a VCO signal.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09197402&OS=09197402&RS=09197402
owner: INTEL CORPORATION
number: 09197402
owner_city: Santa Clara
owner_country: US
publication_date: 20120410
---
Many electronic devices operate off a periodic dock signal to synchronize the transmission of data between electronic components within the device. Periodic clock signals can be provided by an oscillator such as voltage controlled oscillator VCO . Periodic dock signals are also used in radio devices and wireless devices to generate specified frequencies that can be used for a variety of purposes including upconversion downconversion and transmission on a carrier frequency. A wireless communication device may be allocated a specified range of frequency bands in which data is transmitted. A VCO can be used in a phase locked loop PLL to generate various frequency bands. A time to digital converter TDC can be used in a phase locked loop PLL to lock the frequency of the VOC to specified frequency.

Reference will now be made to the exemplary embodiments illustrated and specific language will be used herein to describe the same. It will nevertheless be understood that no limitation of the scope of the invention is thereby intended 

Before the present invention is disclosed and described it is to be understood that this invention is not limited to the particular structures process steps or materials disclosed herein but is extended to equivalents thereof as would be recognized by those ordinarily skilled in the relevant arts. It should also be understood that terminology employed herein is used for the purpose of describing particular examples only and is not intended to be limiting. The same reference numerals in different drawings represent the same element. Numbers provided in flow charts and processes are provided for clarity in illustrating steps and operations and do not necessarily indicate a particular order or sequence 

An initial overview of technology embodiments is provided below and then specific technology embodiments are described in further detail later. This initial summary is intended to aid readers in understanding the technology more quickly but is not intended to identify key features or essential features of the technology nor is it intended to limit the scope of the claimed subject matter.

For an all digital phase locked loops ADPLLs a time to digital converter TDC can be used for converting phase information of a voltage controlled oscillator VCO into a digital domain. illustrates an ADPLL A architecture suitable for fractional n operation which can include a TDC A. The TDC may include a fractional TDC e.g. a Vernier TDC and an integer TDC . In order to achieve the sub gate delay resolution used in many wireless standards the TDC may be implemented as a delay Vernier. The Vernier TDC can be analogous to a flash analog to digital converter but operating in the time domain. As shown in the Vernier TDC can include delay cells A B M N A B and M N and sampling flip flops FF A B and M N. The Vernier TDC can include an n number of FF and an 2n number of delay cells or delay elements. The output of the plurality of the FFs can generate a different output with each triggering edge of the reference signal. The TDC resolution can determined by a difference between the VCO delay of the VCO signal and the reference delay of the reference signal REF and the FFs can perform a time comparison. However due to variations and in the delay cells as well as setup hold time variations in the FFs the Vernier TDC can have nonlinear characteristics. The variations can create low frequency tones and cause noise folding which can increase the phase noise at an ADPLL output. To reduce the nonlinearity due to variations the TDC delay cells may be matched together such as delay cell A for the VCO signal matched with the delay cell B M N for the VCO signal and delay cell A for the reference signal matched with the delay cell B M N for the reference signal. In order to reduce non linearities from the mismatch of delay cells the delay cells in the Vernier TDC may be sized up where the component s features and process dimensions are larger than other similar components using the same process which can lead to a large area and high power consumption for the TDC. As a result the TDC may occupy a relatively large area of a silicon die and consume a relatively large amount of power becoming a power hungry block of a circuit. Moreover the Vernier TDC does not scale well with process scaling like other digital circuits due to a need to maintain adequate matching between the delay cells. Consequently the power dissipation and area overhead can become a bottleneck to scaling. A re circulating TDC can provide a scaling compatible low power and mismatch and process voltage and temperature PVT insensitive TDC.

The nonlinearity of TDCs such as a Vernier TDC can be corrected by dithering. The amount of dithering can be set by an integral non linearity INL of the TDC. Since the TDC can span at least one complete VCO period in fractional n synthesizers the number of delay stages or delay elements in high resolution TDCs can be large. The number of delay stages can have the effect of worsening the INL. The amount of dithering used to linearize the TDC can then increase the white noise level in the PLL defeating an objective of attaining lower phase noise through increased TDC resolution. White noise can be a random signal or process with a flat power spectral density. In other words the white noise can contain equal power within a fixed bandwidth at any center frequency. Another process to correct the nonlinearity of TDCs can be using digital back end calibration. In digital backend calibration TDC non linearity can be measured and then the non linearity can be calibrated digitally. However digital back end calibration can use a memory and complex digital back end calibration circuits also resulting in relatively large silicon area. In addition digital back end calibrations can be sensitive to temperature drifts and supply changes and may not be practical to implement in devices with specified or rigid standards where the devices may be always connected such as cellular receivers.

A re circulating TDC and an associated method can be used to provide time to digital conversion with reduced TDC non linearity. The re circulating TDC can provide an area efficient low power scalable TDC with reduced process voltage and temperature PVT variation sensitivity. In an example the re circulating TDC can reuse a single delay cell and sampling flip flop for the time comparison. In another example the delay cell can be configured as a triggered ring oscillator with a fixed period which can be slightly shorter than VCO period. Through reusing the delay cell the TDC can achieve linear characteristics with a much smaller area and power consumption compared with a conventional TDC such as the Vernier TDC. In another configuration the frequency locking used for the triggered ring oscillator period adjustment can be performed in digital domain and thus the triggered ring oscillator period adjustment can be automatically calculated and routed to the triggered ring oscillator. In another example the embedded counting system of the TDC can minimize the power consumption and area overheads of a frequency locking mechanism.

The following provides additional details of the examples. In an example the re circulating TDC can re use a single delay cell and flip flops FF . illustrates an example of the re circulating TDC. For simplicity of illustration the re circulating TDC can comprise a 3 bit re circulating TDC. The re circulating TDC can include a triggered reference ring oscillator Ref. Ring OSC a latch e.g. a FF and a delay module e.g. a shift register . The triggered reference ring oscillator can include an enabled control input a reset control input and ringctrl control input. A latch such as a flip flop can be a circuit that has two stable states. The latch can be used to store state information. The latch can be made to change state by signals applied to one or more control inputs and the latch can have one or two outputs. Latches can be used as data storage elements. Edge triggered latches can be clocked by an edge of a control input. A data or delay flip flop D flip flop can have an input D a control clock input clk an output Q. The latch or flip flop may also include a control set reset input. A shift register can include a cascade of latches such as flip flops sharing a same clock which can have an output of any one of the latches but the last latches connected to the data D input of the next one in a chain. The shift register can provide a state value e.g. a logic low a logic high a digital 0 or a digital 1 that shifts by one position in a one dimensional bit array stored in the circuit. The shift register can shift in the data present at the shift register input and shifting out the last bit in the array when enabled to do so by a transition of the dock input. Shift registers can have both parallel and serial inputs and outputs. Although latches flip flops and shift registers are specifically described other circuits performing the same function described herein may also be used.

In an example when the reference signal REF transitions from low to high the triggered Ref. Ring OSC starts oscillating generating a periodic ring oscillator signal . The periodic ring oscillator signal with a ring oscillator period can be a selected ratio of a voltage controlled oscillator VCO period T as illustrated in . For example if the period of the Ref. Ring OSC T is set to 7 8 T the time difference between the VCO signal rising edge and the Ref. Ring OSC signal rising edge decreases by 1 8 Tevery cycle. The FF may be clocked by the rising edge of the periodic ring oscillator signal e.g. an output ringout of triggered Ref. Ring OSC which can store a sample of the VCO signal. The FF compares the VCO phase with the output ringout of triggered Ref. Ring OSC rising edge and the FF output is stored in the shift register as a sample and the sample value or state value shifts within the shift register for different sequential time intervals. Each FF output can represent a time difference polarity between the VCO signal and the periodic ring oscillator signal. For example at a first ringout rising edge A the shift register output TDC0 can store a logic low. At a second ringout rising edge B the shift register output TDC0 can store a logic low. At a third ringout rising edge C the shift register output TDC0 can store a logic low. At a fourth ringout rising edge D the shift register output TDC1 can store a logic high and so on. After the eighth 8th cycle of the Ref. Ring OSC the triggered reference ring oscillator and the ringout can be disabled and the output A H of the shift register can be maintain until the next REF rising edge. In the example illustrated in the shift register output is 00011110. By finding high to low transition the phase of the VCO signal relative to the reference signal can be decoded. In HG B the position of the high to low transition is 6. The transition can represent 6 8 Ttime difference between the VCO and REF rising edge. The TDC can be linear which can be minimally affected by random thermal flicker noise. Since the Ref. Ring OSC can be reset after a pre determined number of cycles e.g. 8 cycles in the oscillator may not be free running oscillator. Therefore the phase noise of the oscillator may not accumulate indefinitely as in a normal ring oscillator and the triggered reference ring oscillator may be no worse than a Vernier TDC for phase noise. Although the example in docks the samples on a rising edge the sample may also be docked on a negative edge.

In another example the period of the Ref. Ring OSC T can be set to 9 8 T which can work in a similar manner to the example of but where the time difference between the VCO signal rising edge and the Ref. Ring OSC signal rising edge increases by 1 8 Tevery cycle. Since TDC measures the negative of the phase difference when T is set to 9 8 T the PLL may flip the polarity of the phase comparison to correct for the negative of the phase difference.

The ring oscillator period can be shorter or longer than the VCO period. The ring oscillator period Tcan be represented by N 1 N T where Tis the VCO period Nis a TDC sample number and the TDC sample number is a positive integer of samples per the VCO period. For a re circulating TDC with a resolution of B bits the TDC sample number Ncan represented by 2. For a B bit re circulating TDC Tcan be set to 2 1 2 Tand ring oscillator period may be automatically adjusted with respect to the ADPLL VCO frequency. Without loss of generality Tcan be set to 2 1 2 T. In another example not described 2 1 2 Tmay be used. By monitoring an instantaneous VCO period Tnormalized to the TDC resolution T 2 the ring oscillator period Tcan be adjusted to a correct value. The operations to set the correct value for Tcan easily be performed in digital domain.

By quantizing three consecutive VCO edges Tcan be estimated. illustrates three VCO edges of the VCO signal including two rising edges T T and one falling edge T relative to a reference edge used to generate instantaneous VCO period T. When two VCO rising edges are detected Tcan be obtained from the difference of the quantized rising edge locations T T . illustrates three VCO edges including two falling edges T T and one rising edge T relative to a reference edge. When two VCO falling edges are detected Tcan be obtained in a similar manner from the difference of the quantized falling edge locations T T . For the measurement of the instantaneous VCO period T 1.5 VCO cycles may be used corresponding to N N 2 ring oscillator periods T e.g. at least N N 2 latches in a delay module or shift register for a specified resolution where Nis a TDC sample number or samples per the VCO period. When the TDC sample number Ncan represented by 2 the number of ring oscillator periods T e.g. cycles or latches in a delay module e.g. a shift register may be represented by 2 2 . For example a 6 bit re circulating TDC can use 96 cycles or latches to determine the Tand the Tcan have a value of 64.

The triggered reference ring oscillator can include an enable input a control input a set reset input and an output. The enable input can allow a signal such as the reference signal REF to trigger the reference ring oscillator to generate a periodic ring oscillator signal ringout on the output. The control input refringctrl can sets the ring oscillator period for the triggered reference ring oscillator. The set reset input can set the initial reference ring oscillator signal to a specified value such a logic low.

The delay module can include a data input a dock input a set reset input and a plurality of outputs. The data input of the delay module can be coupled to the VCO signal where the VCO signal can provide an input for a first latch sreg. The delay module can be configured as a serial in parallel out SIPO shift register. The 97 bit shift register can include 97 latches e.g. flip flops where each latch can generate an output sreg . The set reset input can initialize each of latches to a specified state such a 0000 . . . 0001 sreg of . Each latch of the shift register can latch in the input with an edge e.g. a rising edge or a falling edge of a dock input signal such as the ringout signal. In another example the number of latches for the delay module can be at least 1.5 times the TDC sample number where the TDC sample number is a positive integer of samples per VCO period. For example the TDC sample number can be 64 so the number of latches for the delay module can be at least 96. One additional latch can be added to the delay module to dock the output module and generate a reset signal so the number of latches for the delay module can be at least 97 i.e. N N 2 1 . Other additional latches can be used in the delay module but the additional latches may be redundant without improving the performance of the re circulating TDC.

The output module can include a plurality of inputs a dock input and a plurality of outputs. The output module can be configured as a parallel in parallels out PIPO register. The 96 bit TDC output register can include 96 latches e.g. flip flops where each latch can generate an output tdcout from an input sreg . Each latch of the output module can latch in the input with an edge e.g. a rising edge or a falling edge of a dock input signal such as the sreg signal. In another example the number of latches for the output module can be at least 1.5 times the TDC sample number where the TDC sample number is a positive integer of samples per VCO period. For example the TDC sample number can be 64 so the number of latches for the output module can be at least 96 i.e. N N 2 . Additional latches can be used hi the output module but the additional latches may be redundant without improving the performance of the re circulating TDC.

In another example the output module configured to output the samples of the plurality of latches of the delay module. The outputs can be latched after a sampling time interval. The sampling time interval can be a VCO period normalized time interval plus a state transition time interval. The VCO period normalized time interval can correspond to the instantaneous VCO period Tnormalized to the TDC resolution. The state transition time interval can correspond to the offset between an edge of the VCO signal and an edge of the reference signal after the instantaneous VCO period T. The VCO period normalized time interval can be substantially the TDC sample number times the VCO period where the TDC sample number can be a positive integer of samples per VCO period. The state transition time interval can be a variable time interval represented by a positive integer of samples after the VCO period normalized time interval when a specified latch transitions to a different digital state.

The TDC post processing and frequency lock loop module can include a digital frequency lock module and a TDC post process module . The digital frequency lock module and the TDC post process module is shown as a single module but the digital frequency lock module and the TDC post process module can be separate modules components or circuits. The digital frequency lock module can include a plurality of inputs a dock input and a plurality of control signal outputs. The digital frequency lock module can generate a ring oscillator control signal refringctrl from the samples of VCO signal docked with the periodic ring oscillator signal ringout where the samples can be stored it the output module and the samples can provide an input tdcout to the digital frequency lock module. The ring oscillator control signal can set the ring oscillator period for the triggered reference ring oscillator. The digital frequency lock module can generate a new ring oscillator control signal with an edge e.g. a rising edge or a falling edge of a dock input signal such as the REF signal.

The TDC post process module can include a plurality of inputs a dock input and a plurality of outputs. A TDC post process module can generate a TDC output tdout bin e.g. 6 bit binary output where the TDC output is a binary representation of a phase difference between a reference signal and a VCO signal. The TDC post process module can generate a TDC output tdout bin from the samples of VCO signal docked with the periodic ring oscillator signal ringout where the samples can be stored in the output module and the samples can provide an input tdcout to the TDC post process module. The TDC post process module can generate a new binary representation with an edge e.g. a rising edge or a falling edge of a dock input signal such as the REF signal.

The reset module can include a digitally controlled delay line DCDL and a digital gate such as an OR AND NAND or NOR gate. The reset module can generate a set reset signal to instruct the triggered reference ring oscillator to cease docking the periodic ring oscillator signal reset an oscillator output to a predetermined state and or set the latches of the delay module to a predetermined state. In an example the oscillator output can be reset to logic low. In another example the reset module can reset the triggered reference ring oscillator and the delay module. Each latch of the delay module is set to a predetermined state when the delay module is reset. The triggered reference ring oscillator may be set to a predetermined state when the triggered reference ring oscillator is reset. The DCDL can generate a reset signal when a specified latch from the delay module transitions to a different digital state. For example a specified latch signal such as the sreg signal from the specified latch can generate an edge e.g. a rising edge or a falling edge or state for a reset signal. In another example the specified latch can be a most significant bit MSB of the plurality of latches of the delay module as illustrated in . The DCDL can include a delay element or delay cell with a predetermined or specified delay rd. The digital gate can generate a reset signal from the DCDL or an external reset command analog reset received external to the re circulating TDC. The reset signal can instruct the triggered reference ring oscillator to cease docking the periodic ring oscillator signal.

To speed up an initial frequency acquisition the reference ring oscillator can be characterized at a few discrete tuning settings by triggering the reference ring oscillator and measuring the frequency of oscillation through a counter. The frequency measurement can be performed in production testing or on a power up of the reference ring oscillator and stored on a memory e.g. a read only memory ROM or a random access memory RAM . From settings derived from frequency measurements an initial estimation for a desired channel frequency can be interpolated. The initial estimation and interpolation can reduce the amount of time used for a frequency locking loop to converge. The re circulating TDC may also prevent a feedback loop of a reference ring control signal and or a feedback loop of a PPL from locking to the other stable equilibrium point of 2 1 2 T which can also be used when the phase measurements are inverted. The Ref. Ring OSC output ringout can be sampled on quadrature phases of the VCO in a quadri correlator to determine which of the two frequencies i.e. a VCO signal frequency or a periodic ring oscillator signal frequency is higher and maintaining one signal frequency higher than the other signal frequency. For example the re circulating TDC can reset Tto a minimum delay setting if Tdrifts to become larger than T.

In another embodiment the re circulating TDC can include a tuning module or initialization module not shown for interpolating a desired VCO frequency and or reducing a time for the triggered reference ring oscillator to converge on the desired VCO frequency. The tuning module can include a memory and or a quadri correlator. The memory can store discrete initialization tuning settings for the triggered reference ring oscillator. The quadri correlator can determine a polarity of a frequency difference between the VCO signal and the periodic ring oscillator signal and can maintain one signal frequency either a VCO signal frequency or a periodic ring oscillator signal frequency higher than the other signal frequency.

In an example the power of the re circulating TDC can be reduced by a factor of 3 and the area can be reduced by a factor of 4 compared to a Vernier TDC with non linearity calibration implemented on the same process.

The re circulating TDC can be used in wireless radio transceivers for high data rate standards such as a third generation partnership project 3GPP long term evolution LTE standard e.g. 4G LTE 5G LTE Advanced cellular a WiMAX Worldwide interoperability for Microwave Access or the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16e 802.16m and a WiFi IEEE 802.11 standard . The re circulating TDC can be used to generate a radio frequency RF . The re circulating TDC used in both stand alone radios or as part of a system on chip SoC incorporating one or more wireless protocol. Within a transceiver the re circulating TDC can be used in an all digital frequency synthesizer for local oscillator LO generation forming a linear transceiver. The re circulating TDC can also be used in a wireless digital transmitter for phase modulation.

In another example the re circulating TDC can re use a single delay cell e.g. the triggered Ref. Ring OSC and a flip flop for time comparison. Through the re use of the same elements the re circulating TDC can achieve linear characteristics with much smaller area and power consumption compared with a conventional TDC such as a Vernier TDC. In another example the frequency locking module of the re circulating TDC can track the VCO frequency in real time so that the TDC performance may not degrade even with PVT variations. The re circulating TDC can be more robust to PVT variations minimize the sensitivity to PVT variations and transistor model inaccuracies than other types of TDCs. The frequency locking module of the re circulating TDC may be easily designed from a hardware description language. The embedded counting in the re circulating TDC may not use a high speed counter which can reduce power consumption and silicon area. The re circulating TDC can be used with a voltage controlled oscillator VCO a local oscillator LO a delay locked loop DLL a phase locked loop PLL a quadrature VCO a frequency divider or a combination of the listed components. A re circulating TDC can be fabricated with a digital CMOS process.

The re circulating TDC can enable area efficient low power scalable and PVT insensitive digital PLLs by creating a linear TDC through re using the same delay element. Saving silicon area can reduce the cost of fabricating the re circulating TDC in another example the re circulating TDC can include a triggered ring oscillator and digital logic which can allow the re circulating TDC to be synthesizable and thus design and development cost as well as the time to market can be reduced. The re circulating TDC can be a high resolution TDC a mismatch immune TDC or a mismatch insensitive TDC where the mismatch is between delay cells or delay elements used in other types of TDCs for the VCO signal or the reference signal.

In example a delay module re circulation TDC example a re circulating time to digital converter TDC can include a triggered reference ring oscillator TRRO and a delay module. The triggered reference ring oscillator can when triggered by a reference signal edge generate a periodic ring oscillator signal with a ring oscillator period that is a selected ratio of a voltage controlled oscillator VCO period. The delay module can store in a plurality of latches samples of a VCO signal docked by the periodic ring oscillator signal. Each latch can generate an output of the sample and each latch output can represent a time difference polarity between VCO signal and TRRO signal. The delay module can be configured as a shift register or the plurality of latches to form a cascade of flip flops but other mechanisms which provide similar functionality may also be used. Each of the samples of the VCO dock can include digital state information. The number of latches in the delay module can be at least 1.5 times the TDC sample number. The TDC sample number can be a positive integer of samples per VCO period.

In another example a frequency lock re circulation TDC example the re circulating TDC can include the triggered reference ring oscillator a digital frequency lock module and a TDC post process module. The triggered reference ring oscillator can when triggered by a reference signal edge generate a periodic ring oscillator signal with a ring oscillator period that is a selected ratio of a voltage controlled oscillator VCO period. The digital frequency lock module can generate a ring oscillator control signal which sets the ring oscillator period for the triggered reference ring oscillator. The TDC post process module can generate a TDC output which can be a binary representation of a phase difference between a reference signal and a VCO signal.

In an embodiment of both the delay module re circulation TDC example and the frequency lock re circulation TDC example the ring oscillator period can be shorter than the VCO period and the ring oscillator period Tcan be represented by N 1 N T where Tis the VCO period Nis a TDC sample number and the TDC sample number is a positive integer of samples per the VCO period. In another embodiment of both examples the ring oscillator period can be longer than the VCO period and the ring oscillator period Tcan be represented by N 1 N T where Tis the VCO period Nis a TDC sample number and the TDC sample number is a positive integer of samples per the VCO period. In another embodiment of both examples the ring oscillator period can be substantially within one TDC sample width of a voltage controlled oscillator VCO period where the TDC sample width is one over a TDC sample number Ns times the VCO period and the TDC sample number is a positive integer of samples per VCO period. The re circulating TDC can have a resolution of B bits where the TDC sample number Nis represented by 2.

In another embodiment of the delay module re circulation TDC example the re circulating TDC can further include an output module configured to output the samples of the plurality of latches of the delay module. The outputs can be latched after a sampling time interval. The sampling time interval can be a VCO period normalized time interval plus a state transition time interval. The VCO period normalized time interval can be substantially the TDC sample number times the VCO period where the TDC sample number can be a positive integer of samples per VCO period. The state transition time interval can be a variable time interval after the VCO period normalized time interval when a specified latch transitions to a different digital state. In another embodiment of the delay module re circulation TDC example the re circulating TDC can further include a digital frequency lock module and a TDC post process module. The digital frequency lock module can generate a ring oscillator control signal where the ring oscillator control signal sets the ring oscillator period for the triggered reference ring oscillator. A TDC post process module can generate a TDC output where the TDC output is a binary representation of a phase difference between a reference signal and a VCO signal.

In another embodiment of both the delay module re circulation TDC example and the frequency lock re circulation TDC example the digital frequency lock module can generate an instantaneous VCO period Tnormalized to a TDC resolution and a VCO period normalized error Tfrom the outputs of the output module where the VCO period normalized error is a TDC sample number Nsubtracted from the instantaneous VCO period and the TDC sample number Nis a positive integer of samples per VCO period. In another embodiment of both examples the digital frequency lock module can include an adder an accumulator and a quantizer. The adder can subtract a TDC sample number Nfrom an instantaneous VCO period Tnormalized to a TDC resolution to generate a VCO period normalized error T where the TDC sample number Nis a positive integer of samples per VCO period. The accumulator can generate an integrated error by integrating the VCO period normalized error T. The quantizer can generate the ring oscillator control signal by mapping the integrated error to a control setting. The quantizer can truncate the least significant bits LSB of the integrated error which may increase quantization error because the number of bits used to map the number of bits of the integrated error may be reduced to the number of control bits for the ring oscillator control signal.

In another embodiment of both the delay module re circulation TDC example and the frequency lock re circulation TDC example the triggered reference ring oscillator can be configured to cease clocking the periodic ring oscillator signal and reset an oscillator output with a reset signal. In an example the oscillator output can be reset to logic low. In another embodiment of both examples the re circulating TDC can include a reset module configured to reset the triggered reference ring oscillator and a delay module where each latch of the delay module is set to a predetermined state when the delay module is reset. The triggered reference ring oscillator may be set to a predetermined state when the triggered reference ring oscillator is reset. The reset module can include a digitally controlled delay line DCDL and a digital gate such as an OR gate. The DCDL can generate a reset signal when a specified latch from the delay module transitions to a different digital state. The digital gate can generate a reset signal from the DCDL or an external reset command received external to the re circulating TDC. The reset signal can instruct the triggered reference ring oscillator to cease clocking the periodic ring oscillator signal. The specified latch can be a most significant bit MSB of the plurality of latches of the delay module.

In another embodiment of both the delay module re circulation TDC example and the frequency lock re circulation TDC example the re circulating TDC can include a tuning module configured to interpolate a desired VCO frequency and reduce a time for the triggered reference ring oscillator to converge on the desired VCO frequency. The tuning module can include a memory and or a quadri correlator. The memory can store discrete initialization tuning settings for the triggered reference ring oscillator. The quadri correlator can determine a polarity of a frequency difference between the VCO signal and the periodic ring oscillator signal and can maintain one signal frequency either a VCO signal frequency or a periodic ring oscillator signal frequency higher than the other signal frequency.

In another embodiment of both the delay module re circulation TDC example and the frequency lock re circulation TDC example the re circulating TDC can be configured in a phase locked loop PLL to generate a clock frequency within a band of an Institute of Electrical and Electronics Engineers IEEE 802.11 standard IEEE 802.16 standard and third generation partnership project 3GPP long term evolution LTE standard. In another embodiment of both examples the re circulating TDC can be included in a mobile device configured to connect to at least one of a wireless local area network WLAN a wireless personal area network WPAN and a wireless wide area network WWAN . The mobile device can include an antenna a touch sensitive display screen a speaker a microphone a graphics processor an application processor internal memory a non volatile memory port or combinations these components.

In another example an all digital phase locked loop ADPLL B can include a digital phase frequency detector a digital loop filter a digital to analog converter DAC a voltage controlled oscillator VCO a re circulating TDC B and a differenciator as illustrated in . The digital phase frequency detector can integrate frequency error by comparing a frequency word input to a differentiated TDC output in a feedback loop which can be proportional to a frequency difference between the frequency word and the differentiated TDC output. The digital loop filter can generate a filtered phase error signal by low pass filtering the phase error signal. The DAC can convert the filtered phase error signal into a voltage input for a VCO. The VCO can generate a periodic VCO signal at a specified frequency where the voltage input can be used to converge the VCO frequency to the specified frequency. The re circulating TDC can be configured in any of the examples previously described to generate a TDC output signal from the VCO signal and the reference signal . The differenciator can generate the differentiated TDC output by differentiating the TDC output signal.

Another example provides a method for time to digital conversion using a triggered reference ring oscillator as shown in the flow chart in . The method may be executed as instructions on a machine where the instructions are included on at least one computer readable medium or machine readable medium. The computer readable medium may be a non transitory computer readable storage medium. The machine readable medium may be a non transitory machine readable storage medium. The method includes the operation of when triggered by a reference signal edge clocking from a triggered reference ring oscillator a periodic ring oscillator signal with a ring oscillator period that is a selected ratio of a voltage controlled oscillator VCO period as in block . The operation of sampling a VCO signal clocked by the periodic ring oscillator signal follows as in block . The next operation of the method can be storing the samples in a plurality of latches wherein each latch is configured to store the sample for a different time interval as in block . The method further includes transmitting a digital state of the plurality of latches in parallel as in block .

The method can further include latching the digital state of the plurality of latches including the samples of the VCO signal after a sampling time interval. The sampling time interval can be a VCO period normalized time interval plus a state transition time interval. The VCO period normalized time interval can be substantially the TDC sample number times the VCO period and the TDC sample number can be a positive integer of samples per VCO period. The state transition time interval can be a variable time interval after the VCO period normalized time interval when a specified latch transitions to a different digital state. In another example the method can further include generating a TDC output from the latched the digital state. The TDC output can be a binary representation of a phase difference between a reference signal and the VCO signal. The method can further include generating a ring oscillator control signal from the latched the digital state. The ring oscillator control signal can set the ring oscillator period for the triggered reference ring oscillator. In another example the method can further include stopping the docking of the periodic ring oscillator signal when a specified latch from the plurality of latches transitions to a different digital state. The method can further include resetting each latch of the plurality of latches to a predetermined state when the specified latch from the plurality of latches transitions to a different digital state. The method can further include resetting an oscillator output of the triggered reference ring oscillator to a predetermined or specified state such as logic low when the specified latch from the plurality of latches transitions to a different digital state. The method can further include initially tuning the triggered reference ring oscillator to a frequency substantially dose to a desired VCO frequency to reduce a time for the triggered reference ring oscillator to converge on a desired TRRO frequency. The plurality of latches can be configured as at least one of a shift register and a cascade of flip flops. The ring oscillator period can be substantially within one TDC sample width of a voltage controlled oscillator VCO period. The TDC sample width can be one over a TDC sample number Ntimes the VCO period. The TDC sample number can be a positive integer of samples per VCO period. In an example the ring oscillator period can be shorter than the VCO period and the ring oscillator period Tis represented by N 1 N T where Tis the VCO period and Nis a TDC sample number. In another example the ring oscillator period can be longer than the VCO period and the ring oscillator period Tis represented by N 1 N T where Tis the VCO period Nis a TDC sample number.

In another example the re circulating time to digital converter TDC or the all digital phase locked loop ADPLL can be included in a mobile device or a transmission station. provides an example illustration of a mobile device such as a user equipment UE a mobile station MS a mobile wireless device a mobile communication device a tablet a handset or other type of mobile wireless device. The mobile device can include one or more antennas configured to communicate with transmission station such as a base station BS an evolved Node B eNB or other type of wireless wide area network WWAN access point. The mobile device can be configured to communicate using at least one wireless communication standard including third generation partnership project 3GPP long term evolution LTE WiMAX Worldwide interoperability for Microwave Access or the Institute of Electrical and Electronics Engineers IEEE 802.16 standard e.g. 802.16e 802.18m High Speed Packet Access HSPA Bluetooth and WiFi IEEE 802.11 standard . The mobile device can communicate using separate antennas for each wireless communication standard or shared antennas for multiple wireless communication standards. The mobile device can communicate in a wireless local area network WLAN a wireless personal area network WPAN and or a WWAN.

Various techniques or certain aspects or portions thereof may take the form of program code i.e. instructions embodied in tangible media such as floppy diskettes CD ROMs hard drives or any other machine readable storage medium wherein when the program code is loaded into and executed by a machine such as a computer the machine becomes an apparatus for practicing the various techniques. In the case of program code execution on programmable computers the computing device may include a processor a storage medium readable by the processor including volatile and non volatile memory and or storage elements at least one input device and at least one output device. The volatile and non volatile memory and or storage elements may be a RAM EPROM flash drive optical drive magnetic hard drive or other medium for storing electronic data. The base station and mobile station may also include a transceiver module a counter module a processing module and or a dock module or tinier module. One or more programs that may implement or utilize the various techniques described herein may use an application programming interface API reusable controls and the like. Such programs may be implemented in a high level procedural or object oriented programming language to communicate with a computer system. However the program s may be implemented in assembly or machine language if desired. In any case the language may be a compiled or interpreted language and combined with hardware implementations.

It should be understood that many of the functional units described in this specification have been labeled as modules in order to more particularly emphasize their implementation independence. For example a module may be implemented as a hardware circuit comprising custom VLSI circuits or gate arrays off the shelf semiconductors such as logic chips transistors or other discrete components. A module may also be implemented in programmable hardware devices such as field programmable gate arrays programmable array logic programmable logic devices or the like.

Modules may also be implemented in software for execution by various types of processors. An identified module of executable code may for instance comprise one or more physical or logical blocks of computer instructions which may for instance be organized as an object procedure or function. Nevertheless the executables of an identified module need not be physically located together but may comprise disparate instructions stored in different locations which when joined logically together comprise the module and achieve the stated purpose for the module.

Indeed a module of executable code may be a single instruction or many instructions and may even be distributed over several different code segments among different programs and across several memory devices. Similarly operational data may be identified and illustrated herein within modules and may be embodied in any suitable form and organized within any suitable type of data structure. The operational data may be collected as a single data set or may be distributed over different locations including over different storage devices and may exist at least partially merely as electronic signals on a system or network. The modules may be passive or active including agents operable to perform desired functions.

Reference throughout this specification to an example means that a particular feature structure or characteristic described in connection with the example is included in at least one embodiment of the present invention. Thus appearances of the phrases in an example in various places throughout this specification are not necessarily all referring to the same embodiment.

As used herein a plurality of items structural elements compositional elements and or materials may be presented in a common list for convenience. However these lists should be construed as though each member of the list is individually identified as a separate and unique member. Thus no individual member of such list should be construed as a de facto equivalent of any other member of the same list solely based on their presentation in a common group without indications to the contrary. In addition various embodiments and example of the present invention may be referred to herein along with alternatives for the various components thereof. It is understood that such embodiments examples and alternatives are not to be construed as defacto equivalents of one another but are to be considered as separate and autonomous representations of the present invention.

Furthermore the described features structures or characteristics may be combined in any suitable manner in one or more embodiments. In the following description numerous specific details are provided such as examples of layouts distances network examples etc. to provide a thorough understanding of embodiments of the invention. One skilled in the relevant art will recognize however that the invention can be practiced without one or more of the specific details or with other methods components layouts etc. In other instances well known structures materials or operations are not shown or described in detail to avoid obscuring aspects of the invention.

While the forgoing examples are illustrative of the principles of the present invention in one or more particular applications it will be apparent to those of ordinary skill in the art that numerous modifications in form usage and details of implementation can be made without the exercise of inventive faculty and without departing from the principles and concepts of the invention. Accordingly it is not intended that the invention be limited except as by the claims set forth below.

