---

title: Processing online transactions
abstract: Disclosed are systems and methods for managing transactions in which an order is specified online and payment is received at a point of sale (POS). Methods are disclosed for managing payment for such transactions at a POS, including transactions involving payment for both in-store purchases and online orders. Methods are also disclosed for managing inventory and price changes for such transactions where payment can occur at any time in a pay period following order creation. Also disclosed are methods for processing refunds for online orders for which payment was made at a POS. Finally, methods for preventing fraud and abuse as well as restricting the availability of this payment method for certain items are disclosed.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08849703&OS=08849703&RS=08849703
owner: Wal-Mart Stores, Inc.
number: 08849703
owner_city: Bentonville
owner_country: US
publication_date: 20120831
---
This application claims priority to U.S. Provisional Application Ser. No. 61 624 975 filed Apr. 16 2012 and entitled Novel Approach to Making Payments which is hereby incorporated herein by reference in its entirety. This application is also related to U.S. application Ser. No. 13 600 821 filed Aug. 31 2012 U.S. application Ser. No. 13 600 841 filed Aug. 31 2012 U.S. application Ser. No. 13 600 886 filed Aug. 31 2012 U.S. application Ser. No. 13 600 900 filed Aug. 31 2012 U.S. application Ser. No. 13 600 920 filed Aug. 31 2012 U.S. application Ser. No. 13 600 957 filed Aug. 31 2012 U.S. application Ser. No. 13 601 013 filed Aug. 31 2012 and U.S. application Ser. No. 13 601 029 filed Aug. 31 2012. All applications are incorporated herein by reference for all purposes.

In ecommerce transactions the typical payment method is a credit or debit card. Other electronic accounts may also be used to pay for an online purchase but these accounts are typically linked to some sort of bank or credit account. These payment methods result in additional costs due to transaction processing fraud processing and chargeback exposure.

There are also many unbanked and under banked customers that do not have a credit or debit card and do not qualify for alternatives but want to purchase items online. These customers typically pay with cash for in store transactions. In addition many potential customers are not comfortable entering their credit card information on a web site. In a third party survey of online users 12 18 did not shop online. Of these users 44 cited not wanting to share financial information online as the reason for refraining from online shopping.

It will be readily understood that the components of the present invention as generally described and illustrated in the Figures herein could be arranged and designed in a wide variety of different configurations. Thus the following more detailed description of the embodiments of the invention as represented in the Figures is not intended to limit the scope of the invention as claimed but is merely representative of certain examples of presently contemplated embodiments in accordance with the invention. The presently described embodiments will be best understood by reference to the drawings wherein like parts are designated by like numerals throughout.

The invention has been developed in response to the present state of the art and in particular in response to the problems and needs in the art that have not yet been fully solved by currently available apparatus and methods. Accordingly the invention has been developed to provide apparatus and methods for managing online transactions wherein an option is provided to pay for a transaction at a POS located in a store.

In one aspect an order is created online such as by using a web browser and POS payment is selected as the payment method. An order identifier may be transmitted to the customer who then presents the order identifier at a POS. The POS retrieves order information for the order identifier and receives payment of a purchase price for the order. The POS then transmits acknowledgment of payment of the purchase price to a merchant system that then authorizes fulfillment and otherwise processes the order.

Various methods for supporting these types of transactions are also disclosed and claimed herein. Included are methods for managing the actual transaction as well as methods for processing refunds managing inventory restricting eligibility of items for this form of payment preventing fraud and abuse and managing other aspects of the transaction.

An embodiment in accordance with the present invention may be embodied as an apparatus method or computer program product. Accordingly the present invention may take the form of an entirely hardware embodiment an entirely software embodiment including firmware resident software micro code etc. or an embodiment combining software and hardware aspects. Such embodiments may all generally be referred to herein as a module or system. Furthermore the present invention may take the form of a computer program product embodied in any tangible medium of expression having computer usable program code embodied in the medium.

Any combination of one or more computer usable or computer readable media may be utilized. For example a computer readable medium may include one or more of a portable computer diskette a hard disk a random access memory RAM device a read only memory ROM device an erasable programmable read only memory EPROM or flash memory device a portable compact disc read only memory CDROM an optical storage device and a magnetic storage device. In selected embodiments a computer readable medium may comprise any non transitory medium that can contain store communicate propagate or transport the program for use by or in connection with the instruction execution system apparatus or device.

Computer program code for carrying out operations of the present invention may be written in any combination of one or more programming languages including an object oriented programming language such as Java Smalltalk C or the like and conventional procedural programming languages such as the C programming language or similar programming languages. The program code may execute entirely on a computer system as a stand alone software package on a stand alone hardware unit partly on a remote computer spaced some distance from the computer or entirely on a remote computer or server. In the final scenario the remote computer may be connected to the computer through any type of network including a local area network LAN or a wide area network WAN or the connection may be made to an external computer for example through the Internet using an Internet Service Provider .

The present invention is described below with reference to flowchart illustrations and or block diagrams of methods apparatus systems and computer program products according to embodiments of the invention. It will be understood that each block of the flowchart illustrations and or block diagrams as well as the combinations of blocks in the flowchart illustrations and or block diagrams can be implemented by computer program instructions or code. These computer program instructions may be provided to a processor of a general purpose computer special purpose computer or other programmable data processing apparatus to produce a machine such that the instructions which execute via the processor of the computer or other programmable data processing apparatus create means for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

These computer program instructions may also be stored in a computer readable medium that can direct a computer or other programmable data processing apparatus to function in a particular manner such that the instructions stored in the computer readable medium produce an article of manufacture. This article of manufacture will include instruction means that implement the function act specified in the flowchart and or block diagram block or blocks.

The computer program instructions may also be loaded onto a computer or other programmable data processing apparatus to cause a series of operational steps to be performed on the computer or other programmable apparatus. to produce a computer implemented process such that the instructions which execute on the computer or other programmable apparatus provide processes for implementing the functions acts specified in the flowchart and or block diagram block or blocks.

Embodiments can also be implemented in cloud computing environments. In this description and the following claims cloud computing is defined as a model for enabling ubiquitous convenient on demand network access to a shared pool of configurable computing resources e.g. networks servers storage applications and services that can be rapidly provisioned via virtualization and released with minimal management effort or service provider interaction then scaled accordingly. A cloud model can be composed of various characteristics e.g. on demand self service broad network access resource pooling rapid elasticity measured service etc. service models e.g. Software as a Service SaaS Platform as a Service PaaS Infrastructure as a Service IaaS and deployment models e.g. private cloud community cloud public cloud hybrid cloud etc. .

Computing device includes one or more processor s one or more memory device s one or more interface s one or more mass storage device s one or more input output I O device s and a display device all of which are coupled to a bus . Processor s include one or more processors or controllers that execute instructions stored in memory device s and or mass storage device s . Processor s may also include various types of computer readable media such as cache memory.

Memory device s include various computer readable media such as volatile memory e.g. random access memory RAM and or nonvolatile memory e.g. read only memory ROM . Memory device s may also include rewritable ROM such as flash memory.

Mass storage device s include various computer readable media such as magnetic tapes magnetic disks optical disks solid state memory e.g. flash memory and so forth. As shown in a particular mass storage device is a hard disk drive . Various drives may also be included in mass storage device s to enable reading from and or writing to the various computer readable media. Mass storage device s include removable media and or non removable media.

I O device s include various devices that allow data and or other information to be input to or retrieved from computing device . Example I O device s include cursor control devices keyboards keypads microphones monitors or other display devices speakers printers network interface cards modems lenses CCDs or other image capture devices and the like.

Display device includes any type of device capable of displaying information to one or more users of computing device . Examples of display device include a monitor display terminal video projection device and the like.

Interface s include various interfaces that allow computing device to interact with other systems devices or computing environments. Example interface s include any number of different network interfaces such as interfaces to local area networks LANs wide area networks WANs wireless networks and the Internet. Other interface s include user interface and peripheral device interface . The interface s may also include one or more user interface elements like user interface . The interface s may also include one or more peripheral interfaces such as interfaces for printers pointing devices mice track pad etc. keyboards and the like.

Bus allows processor s memory device s interface s mass storage device s and I O device s to communicate with one another as well as with other devices or components coupled to bus . Bus represents one or more of several types of bus structures such as a system bus PCI bus IEEE 1394 bus USB bus and so forth.

For purposes of illustration programs and other executable program components are shown herein as discrete blocks although it is understood that such programs and components may reside at various times in different storage components of computing device and are executed by processor s . Alternatively the systems and procedures described herein can be implemented in hardware or a combination of hardware software and or firmware. For example one or more application specific integrated circuits ASICs can be programmed to carry out one or more of the systems and procedures described herein.

The merchant systems may connect to a network which may include some or all of a local area network LAN wide area network WAN virtual private network VPN the Internet and other networks.

One or more point of sale POS devices may also be operably connected to the network and have the capacity to communicate with one or more of the merchant systems . Each POS device may be associated with a physical store. The store and corresponding POS device may be owned or controlled by the same entity owning or controlling one of the merchant systems . In some embodiments a POS is operably connected to a POS host . The POS host may interface with the POS to manage store transactions at one or more stores. The POS may also be an automated system such as an automated teller machine ATM that is capable of receiving electronic and cash payments. As such the POS though often located in a store may be located elsewhere. Accordingly references to in store payments at a POS may also be replaced by payment at an ATM or other facility such as a bank or other financial or governmental institution. The POS host may likewise interface with one of the merchant systems to provide information regarding POS transactions to the merchant system.

A POS according to any of the aforementioned implementations may be operable to scan barcodes. For purposes of this disclosure references to barcodes and the scanning of barcodes may refer to a barcode received by email multimedia messaging service MMS message or other means. The barcode will then be reproduced by a customer on a printed page or on the screen of a mobile phone tablet computer or any other electronic device. Scanning of a barcode may be performed by scanning a screen of any of the foregoing devices or by scanning a reproduction of the barcode on a printed page.

A user workstation may also connect to the network . The workstation may be embodied as a general purpose computer tablet computer smart phone or the like. The user workstation may host a browser or other application enabling the ability to request and receive information from the merchant systems as well as the ability to transmit information to the merchant system such as in the form of web pages and other content as known in the art.

A merchant system may include a catalog system which may have a catalog database associated therewith. The catalog system may store information regarding items for sale by the merchant. The catalog system may list inventory for items offered for sale by the merchant. An order management system may create orders for items in response to user requests and track the progress of orders. The order management system may receive notifications from other components in order to update the status of an order. The order management system may likewise transmit information and instructions to other components to facilitate payment and fulfillment of an order. An order database may be associated with the order management system and include records for one or both of pending and concluded orders.

A web interface system may provide an interface to a web browser executed on a client device. The web interface system may enable online browsing of items for sale by a customer receive customer requests to purchase items receive payment information from customers and perform other aspects of online commerce as known in the art. The web interface system may have a web database associated therewith. The web database may include web pages web application programming interfaces APIs scripts and other data to facilitate conducting online transactions over a network by interfacing with a customer browser. The web database may additionally store information regarding customer accounts and programs for managing the user accounts.

One or more fulfillment systems manage the actual retrieval of items from inventory and shipping of items to customers. The fulfillment system may receive instructions to ship items from the order management system . Each fulfillment system may be associated with an actual fulfillment center that includes warehousing for inventory as well as personnel and equipment for packaging and shipping items to customers. A fulfillment system may therefore include any and all computing resources and automated equipment to facilitate these functions. Each fulfillment system may have a database associated therewith that stores information about available inventory and the status of orders to be fulfilled. In some embodiments a single common database stores all information for multiple fulfillment systems .

A payment processing system may interface with one or more financial institutions check printing facilities credit card companies and other financial processing services or entities. The payment processing system may receive user payments issue refunds or receive notification of payments or refunds from other entities. The payment processing system may have a payment database that may store information regarding past and pending payments refunds sales tax information and other financial activities.

A management information system collects information regarding activities of the other components and generates reports either automatically or upon management request. The management information system may also monitor activities of other components and generate alerts based on analysis of these activities. The management information system may have a database associated therewith for storing historical data regarding past activities of the components.

The order record may additionally record item information for the order. The item information may identify one or more items associated with the order. Other item information may include a purchase price for an item any discounts or coupons that apply to an item and other item related information. The item information may include an item identifier corresponding to an item record stored in a catalog database or elsewhere.

The order record may also include a shipping status of the order. This may indicate whether the item is in process at a fulfillment center waiting to be picked up by a carrier in transit arrived or in some other stage of the shipping process.

The order record may include a payment method and payment status . As described in great detail herein orders may be paid for by using conventional electronic payment e.g. credit debit card numbers or by paying in cash at a point of sale POS . Accordingly the payment method indicates which of these methods a customer has selected. As also described in greater detail below in a pay with cash purchase the customer is given a grace period to pay on an order at a POS. Accordingly the payment status may indicate whether payment at a POS has occurred.

An order record may also have a refund preference associated therewith. In a pay with cash order as described hereinbelow a user pays for an order at a POS and therefore an electronic refund to a credit card may not be possible. Accordingly the customer may choose to receive refunds by receiving a check in the mail or by picking up cash at a POS. The refund preference indicates which of these options the customer prefers. The refund preference may also include a mailing address if a check is requested or identify an authorized pick up person if cash at a POS is selected.

A refund status may indicate the status of a refund for example whether a check has been mailed payment has been picked up at a POS an electronic refund has been processed or some other event relating to a refund has occurred. An order record may also store other information relating to an order such as a store preference . The store preference may indicate a store selected by a customer to pay for a purchase or receive payment of a refund.

Some or all of the information associated with an order record may be retrieved from or linked to a user account database . The user account database may be associated with users of an ecommerce website. Accordingly the user account database may be included in the web database . The user account database may include user records for current and past customers of a merchant. The user records may include user preferences that are independent of a particular order or preferences that correspond with a customer s recent order. In some embodiments the data of the user record can be retrieved and edited by a customer independent of placement of an order. User record data may also be edited in the course of an order.

The user record may include one or more of a user identifier contact information shipping information and item information payment preferences such as pay at POS or electronic payment as described above refund preferences as described above a preferred store pending orders for the customer pending refunds order history and finally authentication information such as a user name and password. The pending orders pending refunds and order history may include links to corresponding order records . In some embodiments some or all of this information may be maintained in the order management database or other database and linked to a user record by means of the user ID .

A catalog database may store item records . An item record may store information such as an item ID and item information such as a description reviews related items and other information of interest to a customer. The item record may additionally store a path to the item in an item categorization hierarchy. Alternatively the item record may contain no reference to a hierarchy and a hierarchy definition may be stored elsewhere. The item record may also indicate one or both of a current price and a price history . The price history may record changes to the item price over time. An item record may also indicate eligibility of the item for various payment methods. In particular the eligibility may indicate whether a customer may choose to order the item online or pay for the item at a POS as described in greater detail hereinbelow. The eligibility may also indicate a quantity of the item or other restrictions that can be purchased by a user using online ordering with POS payment such as described in greater detail hereinbelow.

The catalog database may additionally include hierarchy data . The hierarchy data may define an item hierarchy including classes and subclasses of items and assignments of particular items to particular classes and subclasses. For example the class power tools could have a subclass of lawn equipment and the subclass of lawn equipment could have its own subclass of lawnmowers. A particular lawnmower could then be an item assigned to this lawnmower subclass.

In some embodiments eligibility of an item for online ordering with POS payment may be specified according to the hierarchy. For example each class and subclass definition may be defined as a node in a hierarchical tree. Each node will have either descendent nodes or descendent items. Accordingly defining the eligibility assigned to a node may be applied to all descendent nodes and items for that node. The definitions of the eligibility of nodes may be stored as node eligibility data . Exceptions and other overrides to any node eligibility definitions may be applied to specific descendent nodes and items. These overrides may be stored as override data .

Shipping information may also be received from the customer or retrieved from existing records for the customer or order. An estimated arrival time may be calculated for the item according to the shipping information. The arrival time may indicate an estimate of the time required for the item to arrive at a shipping location such as the time it takes to locate the item at a fulfillment center package the item and ship the item to the address specified in the shipping information for a selected shipping method.

A payment method for the customer may be received for the customer or retrieved from an existing record for the customer or order. Examples of payment methods include electronic payment credit debit card or other electronic account a gift card or store credit card or pay at a POS e.g. pay with cash in store . For the purposes of this disclosure pay with cash refers to payment at a POS for an online transaction. In some instances this option is designed to appeal to people who lack electronic banking accounts and therefore may prefer cash as their method of payment at the POS. However the pay with cash option by means of payment at the POS in a store may also refer to payments at a POS made using a credit or debit card check store credit card or other electronic account. In some applications point of sale may refer to the functional unit that processes payment for online transactions. However POS as used herein refers to a POS that is capable of accepting physical tender of cash or check payment as well as electronic payment such as credit and debit cards. Such POS are typically located in a store and may be operated by a cashier. A POS may also be implemented as an automated device. An ATM for example is capable of interacting directly with a customer to receive payment.

If POS payment is not found to be selected the electronic payment is processed and confirmation of purchase may be transmitted to the customer. The calculated arrival estimate may also be transmitted to the customer and fulfillment of the order is authorized or otherwise initiated. Authorization of fulfillment may include transmitting order information such as one or more item identifiers and shipping information to a fulfillment center capable of packaging and shipping one or more items associated with the order.

If POS payment is found to be selected then a pay period may be added to the calculated arrival estimate. The pay period is the time period after which the order is made in which the customer must pay at a POS before the order is automatically canceled due to expiration. In some embodiments the pay period includes an initial period plus a grace period. The initial period may be communicated to the customer whereas the grace period is an additional time interval after the initial period in which payment will be accepted if tendered at a POS.

The arrival estimate as updated according to the pay period may be transmitted to the customer. Purchase terms including a purchase price the pay period and any other purchase terms may be transmitted to the customer. The pay period may be communicated as the date and or time at which payment must be received at a POS before the order is automatically canceled.

The purchase terms may also include a barcode order number or other information used by the user to identify the order at a POS in a store. In some embodiments a customer may specify a payment person indicating who is authorized to tender payment.

To pay for the order a user may present one or more items of information to identify the online order. These may include a barcode an order identifier a customer phone number customer name or other identifying information. Upon receiving this information a cashier may input the information to a POS . Alternatively a user may enter the information at a self checkout POS. In the case of a barcode the POS may include a scanner and retrieve information by scanning the barcode.

Upon receiving this information the POS may transmit the information to a merchant system or other device performing the method . The order identification information is received . The order corresponding to the order identification information may be evaluated to determine whether the pay period has expired. If the payer period is found to have expired the POS may be notified of expiry.

If the payer period is found not to have expired then order information may be transmitted to the POS. In some embodiments the methods disclosed herein may be performed in a batch processing scheme. For example pending orders may be periodically evaluated to determine whether the pay period has expired. If so then the order may be flagged as expired. Accordingly evaluating whether payment acknowledgment was received in the expiry period may include evaluating this flag.

The order information transmitted may include a purchase price. The order information may also include an identity of an authorized payment person for the order. The POS may then receive tender of payment of the purchase price which may include cash check or electronic payment. The POS may then transmit acknowledgment of payment to the merchant system . The merchant system receives the acknowledgment of payment from the POS. In some embodiments upon receiving acknowledgment of payment the merchant system transmits an email or other message to the customer that acknowledges payment.

The updated arrival estimate calculated at step may then again be updated based on when acknowledgment of payment was received from the POS. This may include calculating an expected arrival date based on initiation of fulfillment of the order as of the day acknowledgment of payment was received. This may include taking into account delays which may occur due to backups at a selected fulfillment center time required to retrieve and package the item s time required for a carrier to pick up the packaged item s estimated time in transit to the customer s specified shipping address and any other factors relevant to variations in shipping time. The updated arrival estimate may then be transmitted to the customer such as by means of an email. Fulfillment of the order may then be authorized or otherwise initiated. This may include transmitting order information such as the item s of the order and the customer s shipping information to a fulfillment center.

A payment method may also be received or retrieved as described above. If the payment method is found not to be a POS payment method as described above then electronic payment is processed as known in the art. The shipping information may be evaluated to determine an appropriate fulfillment centers and the order may be enqueued for assignment to a fulfillment center. Orders may be processed on a first in first out basis according to when they were added to the queue. Each order may be assigned to a fulfillment center based on whether the fulfillment center has the order item s in stock proximity of the fulfillment center to the shipping address and backlog of unfulfilled orders assigned to the fulfillment center. Once a fulfillment center is selected authorization to fulfill the order may be transmitted to the fulfillment center along with order information such as item identifiers and the shipping information.

If POS payment is found to have been selected purchase terms such as a payment deadline purchase price and any other relevant terms may be transmitted to the customer. Order information such as a barcode order identifier or other information used by the customer when paying at a POS may also be transmitted to the customer. If acknowledgment of payment is found to have been received from the POS before the deadline then the method proceeds to perform one or more of steps for the order. If not then the order is canceled which may include notifying the customer of cancellation.

The method may include evaluating whether the customer has requested to apply store credit. If so then store credit information may be received such as by receiving a code or other identifier of an account or gift card. Some or all of credit associated with the supplied information may be applied to the purchase price for the order. If the complete purchase price is applied in this manner no further processing may be performed other than to authorize fulfillment of the order.

A payment method selection may also be received or retrieved for the order. If the method of payment is found to not be a POS payment method then electronic payment may be processed and fulfillment authorized or otherwise initiated.

If the selected payment method is found to be a POS payment method then purchase terms including such information as an order identifier a payment deadline purchase price and or other relevant information may be transmitted to the customer. If acknowledgment of payment of the balance due is found to have been received from a POS such as an in store POS prior to expiration of the pay period which may include a grace period then fulfillment of the order is authorized or otherwise initiated.

If acknowledgment of payment of any balance is not found to have been received prior to expiration of the pay period then the order may be canceled and any store credit applied to the order may be restored to the account or card from which it was drawn. Alternatively restoration may include mailing a store credit card to the customer or some other means of restoring the store credit to the customer. In some embodiments restoration may include indicating that a card is available for pick up at a store and authorizing transfer of such a card upon request of the customer and furnishing of authenticating information by the customer. In some embodiments a customer s choice of one of the aforementioned methods or another refund method for store credit may be received and the refund will be made accordingly.

A customer s choice of payment method may also be received or retrieved . If the chosen payment method is not found to be a POS payment then electronic payment may be processed as known in the art and fulfillment may be authorized or otherwise initiated.

If POS payment is found to be the chosen method then the method may include evaluating the shipping information for the order and retrieving from a database store locations and participation status of the stores. Participation status indicates whether the store is capable or otherwise authorized to receive POS payments for online orders. Stores adjacent to the customer based on the shipping address or other address associated with the customer and stores that are capable or otherwise authorized to receive POS payments for online transactions may be identified . The payment deadline purchase price and other information may be transmitted to the customer. The identified adjacent participating stores may also be transmitted to the user to enable the user to locate a store at which to pay for the order.

As with other methods if acknowledgment of payment of the purchase price is found to have been received from a POS then fulfillment is authorized or otherwise initiated. If not the order may be canceled .

In any case shipping information or other information indicating a customer s location may be received or otherwise retrieved. A payment method selection may also be received or retrieved. A request to show adjacent stores may also be received for any of the reasons noted above. A list of stores may be retrieved and filtered according to one or both of the shipping or other geographic information and the payment method. Filtering according to shipping information may include omitting stores outside a certain proximity to the shipping location. Filtering according to payment method may include omitting stores that do not participate in the selected payment method. A list or map illustrating stores remaining following the filtering operation may be transmitted for display to the customer. Where one or both of shipping information and a payment method selection are not available or have not been made by the customer the corresponding filtering step may be omitted in some embodiments.

In particular the method is particularly useful in instances where a POS or a POS host is temporarily not able to communicate with a merchant system or some component thereof such as the order management system . The method may include receiving a request to process a POS payment for an online payment at a POS. This may be performed by a cashier or a user at a self checkout POS. The POS may evaluate whether a merchant system is offline. If not then the POS may interactively process the order as in the various methods described herein. This may include the POS transmitting an order identifier to the merchant system receiving order information from the merchant system and transmitting acknowledgment of payment to the merchant system after tender of payment is detected or otherwise verified.

If the merchant system is found to be offline then a batch processing method according to the following steps may be executed. As noted above in some methods an order identifier may be used by the POS to request order information from a merchant server . Where the merchant server is not available a customer printout of the purchase price may be used to provisionally determine the purchase price for the order. Alternatively a database of pending orders for which POS payment has been selected may be pushed to a POS periodically such that order information can be retrieved without communication with the merchant server.

Tender of payment at the POS may be received . This may include receiving an electronic payment from a credit or debit card detecting tender of cash to an automated bill and coin collector receiving an input from a cashier indicating receipt of payment or some other detection of tender.

The POS may add order information received from the customer such as an order identifier and an amount of tender of payment to a batch file. The batch file may accumulate payment information for tenders of payment for online orders while communication with the merchant server is unavailable.

Once communication with the merchant server is restored the POS may reconcile the batch of received payments with the merchant server. Accordingly the method may include detecting availability of the merchant system . This may be accomplished by the merchant server contacting to the POS upon restoration of communication. Alternatively the POS that has a batch file with unreconciled payments in a batch file may periodically query the merchant server to determine if the merchant server is online until a response is detected .

The POS may transmit the batch file to the merchant system for processing by the merchant system . The merchant system may then evaluate the batch relative to pending orders having POS payment as the payment method.

The method may include detecting duplicate payments. Inasmuch as communication with the merchant system was not possible at the time of payment it is possible that multiple payments could have been received since the POS was unable to determine whether an order has already been paid. Accordingly multiple payments associated with the same order identifier may be detected .

Payments recorded in the batch file may also be evaluated with respect to order records to determine whether order payments have been received for expired orders. Payments recorded in the batch file may also be evaluated with respect to order records to detect payments for unavailable items.

If for any reason an order cannot be fulfilled due to one or more of expiry and unavailability of the item s of the order then appropriate refunds may be authorized and processed . If an order can be fulfilled then fulfillment of the order may be authorized or otherwise initiated. If an order for which payment is noted in the batch file as expired and fulfillment of the order is still possible e.g. inventory is available or otherwise sufficiently abundant in some embodiments fulfillment of the order may be authorized notwithstanding expiry.

Refunds may also be authorized corresponding to a price reduction for one or more items in an order where the price reduction occurred between the time an order is created and payment was received at the POS as described herein below with respect to . In some embodiments refunds may also be authorized corresponding to a price reduction that occurred between the time an order is created and the time the batch is received by the merchant system 

Item information may be received and evaluated until information for the last item of the customer s purchase is found to be received. An aggregate price for all in store selections and online orders may then be aggregated . This may include calculating any tax due and applying any discounts or coupons the customer has used. Tender of payment is received by the POS by detecting payment by cash or check or by processing electronic payment such as a store credit card or a debit or credit card. The POS then informs the merchant system of payment for any online orders in the purchase such as by means of a web API provided by the merchant system . Likewise inventory and accounts associated with the store may be updated to reflect purchases of in store items. This may be accomplished by notifying a POS host of details of the transaction.

If the order is found to be an online order then order information may be retrieved from the merchant system such as by using a web API. The order information retrieved may include one or more item identifiers and a purchase price. If an item corresponding to the online order is found to be available in the store a prompt may be displayed to a cashier or customer to inform the customer that the item is available in store. If the POS finds that the customer has chosen to pick up an item from the store then the POS may inform the merchant system of fulfillment of the order upon payment such as by means of a web API. The POS may detect a user choice to pick up an item from an online order by detecting scanning of a barcode for the item or by a cashier or customer providing an input which will indicate pick up of the item s for the online order.

As for the method if the item is found to be an in store purchase item information is retrieved from a store system such as a POS host. When the last item is found to have been received an aggregate price is calculated which may include calculating any tax and applying any applicable coupons or discounts. Tender of payment is detected by the POS and the POS informs the merchant system such as by means of a web API of payment for any online orders. Likewise store inventory and accounts are updated to reflect purchases of in store items including items from online orders that the customer chose to pick up. This may include notifying a POS host of in store purchases and tender of payment.

Upon receiving the order information the POS may receive payment. If payment is found to have been received prior to closing of the POS transaction then the merchant system may be notified and the status of the order is changed to indicate that payment has been made. If payment is not found to have been received prior to closing the transaction the POS may notify the merchant system which may then change the status of the order to indicate that it is awaiting payment.

If the status of the order is not found to indicate awaiting payment then the method may include evaluating whether the order status indicates payment pending. If so then the cart ID associated with the order may be evaluated . If it is the same as the cart ID received from the POS in the current iteration of the method this indicates that multiple requests were received from the same POS during the same transaction. The POS may therefore be notified of the duplicate and the POS may then cancel the duplicate request for order information.

In case the status is not found to indicate payment pending or the cart ID for order is not found to match the cart ID for the current request being processed in the current iteration of the method an error message may be returned to the POS and the POS may then cancel the request for order information and may not proceed with receiving payment for the online order.

A log of requests may be kept for troubleshooting purposes. In some embodiments the case where an order status is not being paid awaiting payment or payment pending may be impossible to reach as these particular order statuses do not need to be dealt with. In other embodiments the status may revert to awaiting payment within a time period after this status is reached. Alternatively an alert may be transmitted to an employee who may then manually reset the status after viewing a log of activity for the order. In some embodiments each request for information for an order or to update the status of an order received from a POS may be logged in a record associated with the order to enable resolution of error conditions.

Another potential error condition is where a POS for some reason causes the status to change to payment pending and then hangs or loses communication with the merchant system before notification of payment or cancellation without payment can be transmitted to the merchant system . In such instances the status may revert to awaiting payment after a timeout period. Alternatively the order may remain in this state until a customer service representative or other employee reviews the transaction history and reverts the status to awaiting payment or paid based on the present circumstances.

The steps of the method may be distributed among some or all of a POS POS host and a merchant system . An order ID may be received such as by inputting the order ID to a POS according to any of the methods described hereinabove. Receiving the order ID may include receiving the order ID by a merchant system from a POS. Order information corresponding to the order ID may be retrieved which may include transmitting the order information to a POS. If the order is found to be expired the transaction may be canceled . This may include notifying the POS of expiration by the merchant system and canceling or otherwise voiding the transaction initiated at the POS with respect to the online order.

If the order is not found to be expired then payment may be received . This may include receiving tender of payment at the POS in one of multiple forms already mentioned herein and transmitting notice of payment from the POS to the merchant system 

If the order is found to be paid in full as a result of the payment then fulfillment of the order may be authorized or otherwise initiated. If the order is not found to be paid in full i.e. the payment is a partial payment then the payment may be applied to the balance due for the order.

In some embodiments partial payments will not be accepted by the POS for a non layaway order e.g. a pay at POS order . However in some embodiments partial payments for non layaway orders may be received by the POS. In one embodiment if a partial payment is found to have been received for a POS payment order that is not layaway the order is converted to a layaway order. A layaway fee accompanied by customer notification may be added to the balance due for the order in embodiments such that a fee is ordinarily applied to layaway orders.

In the cases of both partial payment for layaway and non layaway orders a payment schedule may be updated according to the partial payment. For example if the customer pays more than a single installment for a layaway order the amount and timing of further payments may be adjusted. For a non layaway order a payment schedule taking into account the partial payment may be generated and transmitted or otherwise communicated to the customer.

In an alternative embodiment if a partial payment is received for a non layaway order for which the POS payment method has been selected during the expiry period the order is not converted to a layaway order. In some embodiments if full payment is not received by the end of the expiry period the order is then converted to a layaway order and a payment schedule may be generated. In addition fees may be assessed and customers may be notified. In other embodiments the order is simply canceled and a refund of the partial payment is initiated. In some embodiments a user may specify at the time of placing the order which of the foregoing methods will be used in response to a partial payment.

In instances where a product has been shipped to a customer a refund may be triggered following both the receipt of a request for a refund and the receipt of the returned product from the customer. As known in the art packaging labeling and prepaid shipping labels may be mailed to the customer in response to a request for a refund. A refund may then be triggered when an input is received indicating that the returned product has been received by the merchant.

Following receipt of a refund trigger the method may include evaluating whether the order for which a refund has been triggered was paid for at a POS. If not an electronic refund may be applied electronically such as by electronically crediting the credit or debit card used to pay for the purchase.

If the order was paid for at a POS then a refund preference may be received or retrieved . In some instances a customer may specify a refund preference in the customer s account or at the time of order placement. In other instances a refund preference may be specified at the time a refund is requested. In some embodiments a customer may be prompted to specify a refund preference and the customer preference may be received after a refund trigger is received .

In some embodiments where no refund preference has been specified the refund may be processed by initiating mailing of a check to a known address for the customer. For example if a refund preference has not been specified or otherwise received within a configurable number of hours after the refund trigger has been received the refund may be processed as if the customer requested mailing of a check.

If the customer preference is found to indicate payment at a POS an identifier for a pick up person may be received or retrieved . As for the refund preference the pick up person ID may be stored in the customer s account specified at the time the order is placed or received in response to prompting at the time of the refund trigger or after the refund trigger. Refund instructions may also be transmitted to the customer. The refund instructions may include barcode and or order identifier. The refund instructions may also identify the authorized pick up person. In some embodiments the refund instructions may indicate the location of one or more stores at which a refund may be received such as described in or .

A customer may then go to a store and present at the POS the barcode order identification number or some other information to identify the customer or order. The barcode may be scanned or any other information may be received by the POS and transmitted to the merchant system . The merchant system may receive the information and use it to look up the order. This may include transmitting data obtained from the barcode or otherwise received to the merchant system which then locates the corresponding order information and returns it to the POS. The order information transmitted to the POS may include an identity for a pick up person and a refund amount.

The identity of the person attempting to obtain the refund may then be verified . This may include receiving an input from a cashier at a POS affirming the identity of the pick up person following inspection of photo ID provided by the person. Verification of the identity may also include receiving a personal identification number PIN or password assigned to or chosen by a customer for purposes of verification. If the identity of the pick up person corresponds to the authorized pick up person designated by the customer then refund is authorized . The POS may then output money or instruct a cashier to refund the money. Upon detection of tender of the refund the POS may transmit notice of the refund to the merchant system which receives the notice and records the fact that a refund was given such as in the order record for the order.

If a cash in store refund is not found to have been requested then a name and or address for a payee may be received or retrieved for the order. As for other refund preferences the payee name and address may be stored in the customer s account specified at the time the order is placed or received in response to prompting at the time of the refund trigger or after the refund trigger. In some embodiments the payee may be constrained to be identical to the customer who placed the order or the person who paid for the order at a POS.

A request for a check may be transmitted to an entity authorized and capable of issuing checks such as a payment processing system as described above a financial institution or other entity. The entity to which the request was made may transmit verification that a check was mailed and this verification may be received by the order management system which notes this fact such as in the order record for the order.

In instances where a product has been shipped to a customer a refund may be triggered following the receipt of a request for a refund and the receipt of the returned product from the customer. As known in the art packaging labeling and prepaid shipping labels may be mailed to the customer in response to a request for a refund. A refund may then be triggered after the returned product is received.

Following receipt of a refund trigger the method may include evaluating whether the order for which a refund has been triggered was paid for at a POS. If not an electronic refund may be applied electronically such as by electronically crediting a credit or debit card.

If the order was paid for at a POS then a refund preference may be received or retrieved . In some instances a customer may specify a refund preference in the customer account or at the time of order placement. In other instances a refund preference may be specified at the time a refund is requested. In some embodiments a customer may be prompted to specify a refund preference and the customer preference may be received after a refund trigger is received .

If the customer preference is found to indicate payment at a POS an identifier for a pick up person may be received or retrieved . As with the refund preference the pick up person ID may be stored in the customer s account specified at the time the order is placed or received in response to prompting at the time of the refund trigger or after the refund trigger. Refund instructions may also be transmitted to the customer. The refund instructions may include barcode and or order identifier. The refund instructions may also identify the authorized pick up person. In some embodiments the refund instructions may indicate the location of one or more stores at which a refund may be received.

A customer may then go to a store and present at the POS the barcode order identification number or some other information to identify the customer or order. The barcode may be scanned or any other information may be received from the POS by the merchant system and used to look up the order. This may include transmitting data obtained from the barcode or otherwise received by the merchant system which then locates the corresponding order information and returns it to the POS.

The method may include evaluating whether a refund is due. This may include evaluating an order record associated with the order by the merchant system to determine whether a refund has previously been issued or whether any payment has actually been made on the order. If a refund is not found to be due then a denial of the refund may be transmitted to the POS or otherwise transmitted to the customer.

If a refund is due the method may include evaluating whether the order is locked. A locked order may indicate that a refund is in process at another POS. If the order is found to be locked then step may be performed. Otherwise the transaction is locked . Locking may include setting a flag in an order record indicating that it is locked. A refund may be authorized . This may include communicating authorization to the POS. A cash refund or other type of refund may then be issued to the customer either automatically or by the cashier. The cashier may input to the POS an indication that a refund has been given. The POS may transmit notice of the refund to the merchant system . The merchant system then receives the notice of refund and may record this fact such as in the order record associated with the order.

In some embodiments if a refund is not actually issued after an order is locked the lock may be released without indicating that a refund was given. In some embodiments the POS may provide notice to the merchant system that the transaction was canceled without an actual refund given. Upon receiving such a notification the merchant system may release the lock. In some embodiments if a notice of refund is not received in some interval such as a number of hours then the lock may be released. Other criteria may also be used to release the lock if notice of refund is not received.

If a cash in store refund is not found to have been requested then a name and or address for a payee may be received or retrieved for the order. As for other refund preferences the payee name and address may be stored in the customer s account specified at the time the order is placed or received in response to prompting at the time of the refund trigger or after the refund trigger. In some embodiments the payee may be constrained to be identical to the customer who placed the order or the person who paid for the order at a POS. A request for a check may be transmitted to an entity authorized and capable of issuing checks such as a payment processing system as described above a financial institution or other entity. The entity to which the request was made may transmit verification that a check was mailed and this verification may be received by the order management system which notes this fact such as in the order record for the order.

The method may include evaluating whether store credit such as a store credit card or gift card was used to pay for all or part of the purchase price for the order. If so then the portion of the purchase price paid with store credit may be refunded to the store credit account from which it was originally drawn or otherwise restored in the form of store credit. Notice of this refund and of the amount of store credit may also be transmitted to the customer.

Regardless of whether store credit was used the method may include evaluating whether a POS payment method was used to pay for the order such as the POS payment methods described herein. This may include evaluating the order record associated with the cancellation request. If a POS payment method was not used then electronic refund may be processed as known in the art for the balance due on the order after any amount paid in store credit has been refunded . The transaction may also be canceled such that the order will not be fulfilled if it has not yet been fulfilled.

If a POS payment method is found to have been used then the method may include evaluating whether the balance of the purchase price was actually paid at a POS. This may include evaluating whether acknowledgment or notice of payment has been received from a POS as recorded in an order record associated with the order. If not then the order may be canceled which may include noting cancellation in the order record for the order. If some or all of the balance has been paid then a refund may be processed . This may include processing the refund according to methods described in one or both of .

The method may include receiving a request for order information from a POS. As noted above a request for order information may include an order identifier and may be generated by the POS in response to input of the order identifier at the POS when the customers attempts to tender payment at a POS in a store. An order corresponding to the order identifier may be evaluated to determine if the order has expired because the deadline for providing payment has passed. If so then the POS and or customer may be notified of expiry. If not then the method may include evaluating whether a price change for any items associated with the order has occurred since the order was set up . If so then the purchase price for the order may be reduced to the current price. In either case the order information with the current price may be transmitted to the POS. Upon receiving acknowledgment of payment of the purchase price fulfillment of the order may be authorized or otherwise initiated.

The remaining steps of the method may be performed after each catalog update or each catalog update in which a price decrease occurs. In some embodiments some or all of the remaining steps of the method may be performed as part of the catalog update process such as by the same script or software module. In some embodiments some or all of the remaining steps of the method may be performed prior to changes to the catalog becoming effective.

The method may include retrieving or otherwise receiving pending online orders for which POS payment is the selected payment method. The orders retrieved may include orders with POS payment for which the order has been created but acknowledgment of payment has not yet been received from the POS.

Price changes between the purchase price of items as recorded in an order and the updated prices of the catalog may be identified and the purchase price for these items in the pending orders may be updated to reflect the current price. In some embodiments all changes to the purchase price for items in an order may be recorded in a price change history for the order. This recording may be used to prevent duplicate price reductions. Notice of changes in price to pending orders may be transmitted to the customers associated with these orders.

Upon checkout a customer may in accordance with other methods described herein provide information identifying the order or the customer which the POS then uses to request order information. The merchant system receives the request for order information and transmits to the POS the current order information including the current purchase price as updated according to any price changes. The POS then receives the information and receives tender of payment of the current purchase price. The POS then transmits acknowledgment of payment to the merchant system . The acknowledgment of payment is received and in response fulfillment of the order is authorized or otherwise initiated.

The method may include retrieving or otherwise receiving pending online orders for which POS payment is the selected payment method. The orders retrieved may include orders with POS payment for which the order has been created but acknowledgment of payment has not yet been received from the POS. In the method pending orders may additionally include retrieving orders for which acknowledgment of payment has been received but the refund window has not yet expired. In some embodiments for a period after one of payment and an end of the expiry period for tendering payment for an online order a refund may be issued for price changes that occur within the refund window. In some embodiments the refund window may include the window between a payment date and when an item actually ships from a fulfillment enter. In some embodiments the refund window includes the latest of some or all of these events or dates.

Price changes between the purchase price of items as recorded in an order and the updated prices of the catalog may be identified and the purchase price for these items in the pending orders may be updated to reflect the current price. In some embodiments all changes to the purchase price for items in an order may be recorded in a price change history for the order. This may be used to prevent duplicate price reductions. Notice of changes in price to pending orders may be transmitted to the customers associated with these orders.

The method may additionally include initiating refunds for orders that were both paid for within the refund window for the order and for which price changes were identified following payment. The refund may be processed according to any of the methods for processing refunds in response to a refund trigger as described hereinabove.

Upon checkout a customer may in accordance with other methods described herein provide information identifying the order or the customer which the POS then uses to request order information. The merchant system receives the request for order information and transmits the current order information including the current purchase price as updated according to any price changes. The POS then receives the information and receives tender of payment of the current purchase price. The POS then transmits acknowledgment of payment to the merchant system . The acknowledgment of payment is received and in response fulfillment of the order is authorized or otherwise initiated.

Accordingly the method may include receiving a selection of one or more items from a customer. This may include adding items to an electronic shopping cart by a customer using a web browser as known in the art of ecommerce. The eligibility of the items may be evaluated . If one of the items is found to not be eligible then at checkout or at other points in the online transactions payment method options will be transmitted for presentation to the customer excluding an option to pay at a POS. Remaining options may include payment with a debit or credit card using store credit or some other means of electronic payment.

If the item is found to be eligible the method may include evaluating the quantity of the item. This may include comparing the quantity to a threshold quantity for the item. If the quantity is not found to be eligible then payment methods may be presented . In some embodiments the quantity used to determine eligibility may include aggregating quantities for multiple items in the order. For example a global threshold for the amount of items that can be eligible may be defined for an individual order. In some embodiments the quantity used to evaluate eligibility may include evaluating an aggregate quantity for the items in other pending i.e. unpaid orders for the customer associated with the order. In some embodiments the quantity may include aggregating quantities of multiple items for all pending orders for the customer.

The method may include evaluating the order amount with respect to a threshold. If the amount exceeds the threshold then payment options are presented . As for the quantity the order amount may include aggregating the amount due for all pending i.e. unpaid orders for the customer.

If the item s item quantities and order amount are found to be eligible then payment methods are transmitted for display to the customer where the payment methods include an option to pay for the order at a POS.

In some embodiments more or less of the attributes evaluated in the method may be used to evaluate the eligibility of the order. In some embodiments if a single item in an order is found to be ineligible an entire order may be deemed ineligible.

To specify eligibility of items selection of a node may be received . An eligibility to be assigned to the node may also be received . The eligibility may indicate one or more of whether the node and its descendants is or is not eligible a quantity threshold or an amount threshold for the node. The eligibility as defined for the node may then be applied for descendent nodes as well as items of the node. In some embodiments application of eligibility may occur at the item where a specific order is analyzed such as discussed below with respect to the method of .

The method may additionally include receiving override selection of a node or item as well as receiving overriding eligibility to be applied to the override selection. The eligibility for the override selection may indicate one or more of whether the selected item is not eligible or selected node and its descendants are not eligible a quantity threshold and an amount threshold for the node or item. The override may obviate any eligibility specified for a parent node in the hierarchy. The override eligibility may be applied to the node or item and any descendent nodes or items immediately after it is received at the time eligibility of an order is determined e.g. the method or at some other time.

An item hierarchy as discussed above may be denormalized or otherwise traversed to determine the eligibility of the item. As noted above an eligibility specification applied to a node of the hierarchy may also be applied to descendent nodes. Accordingly the hierarchy may be analyzed to determine whether any eligibility restriction has been applied to a parent node of any of the selected items. This may include traversing up the hierarchy until a node with an eligibility restriction is encountered. In some embodiments a hierarchy path may be stored as part of an item record indicating the path from an item up through the nodes of the hierarchy to a root node such that traversal is not necessary. In such embodiments the nodes of the path may be analyzed from specific to general until an eligibility restriction is encountered. Any other method for traversing a hierarchy may also be used to determine the item eligibility.

The method may further include applying an override . In some embodiments as noted above an eligibility specification may be defined specifically for an item or node that overrides eligibility specification for a parent node. Accordingly the eligibility determined according to the hierarchy may be overridden according to application of the override for an item based on any override definitions. An override specification may impose additional restrictions as to one or more of eligibility quantity eligibility or amount eligibility. An override specification may also impose fewer eligibility restrictions.

In some embodiments the order of steps and may be altered. For example if an override has been defined it may be applied and analysis of any eligibility defined for the hierarchy or higher levels of the hierarchy may be omitted. If no override is defined then step may be performed.

One or more payment methods may be selected according to the eligibility specification determined for the item based on one or both of steps and . This may include determining eligibility of the items of the order or determining the eligibility of the order as a whole such as according to the method . The selected payment methods may then be transmitted for display to a customer for selection by the customer for payment of the order.

The method may include generating a watermark inventory according to an actual inventory. This may include simply making a copy of the actual inventory. The inventory may list items and the quantity of items available for sale. Portions of the inventory may be associated with individual fulfillment or storage facilities. As noted above upon acknowledgment of payment orders may be assigned to such a facility for fulfillment. The inventory may also include information on expected inflows of items due to receipt of shipments and expected outflows due to orders that have been paid for but not shipped.

A customer by means of a browser or other component may request to view information about an item. This request is received . Information about the item may be transmitted to the customer for display. The transmitted information may include an item description and or the availability of the item according to the watermark inventory. The availability information may include an absolute availability per the watermark inventory i.e. the item is or is not available or an availability date per the watermark inventory i.e. the item is available for purchase now or available as of some future date. The transmitted information may also include a purchase price.

As noted above in some embodiments eligibility of an item for purchase by means of online ordering with payment at a POS may be evaluated. In some embodiments the quantity of an item that can be eligible for purchase in this manner may be evaluated based on both available inventory and a threshold quantity for the item. For example the threshold against which a proposed quantity is compared to determine eligibility may be dynamically changed according to available inventory i.e. reduced as inventory gets low and increased if inventory is high. In some embodiments the watermark inventory may be used for determining how to alter the threshold and in others the actual inventory may be used.

The method may further include receiving an online order for the item that includes a request to pay for the item at an in store POS. Upon receiving such an order the watermark inventory is updated to indicate that the item is not available for purchase. This may include simply decrementing the number available for purchase. If the order is found to be completed such as after receiving acknowledgment of payment from a POS as described herein then the actual inventory may be updated to indicate that the item is no longer available. This may include decrementing the number of units of the item available in the actual inventory.

If the order is found to have been canceled then the watermark inventory may be restored . This may include increasing the number of units of the item available for sale. Cancellation may be due to express cancellation by the customer or cancellation due to failure to pay for the order at a POS within the pay period as described hereinabove.

The method may be used to evaluate customer activity to detect potentially fraudulent activity. In particular the method may be used to prevent usage of the systems and methods described herein to transfer funds from one party to another.

The method may include receiving a request for a refund for an order for which payment was received at a POS. This may include receiving a refund triggering event as described hereinabove. As noted above information such as refund preference and a pick up person may be specified by a customer account or input by the customer at the time an order is made or a refund is requested. The method may include evaluating correspondence between a refund payee and the payer that paid at a POS for the order. If the payee and the payer are different then a flag may be set. In some embodiments a relationship between the payer and payee may be evaluated such as whether they share a last name or if there is any publicly available indication of a relationship between them. This may include evaluating publicly available social site information or other searchable information on the Internet. The flag may be cleared if an apparent personal relationship exists between the payer and payee.

A proximity between a payment store i.e. the store where payment was tendered and a refund store may be evaluated . In some embodiments a customer may be required to specify a choice of refund stores at which a cash refund is to be received. For example a list of stores at which a cash refund may be received may be transmitted for display to the customer and a selection of one or more of the stores may be received as the customer s designation of a refund store. If this store is not within a distance threshold of the location where payment was tendered then a flag may be set or the choice of refund stores may be prohibited. In some embodiments only those stores within a threshold distance from the payment store may be transmitted for display and selection. In other embodiments a customer selection of a refund store is evaluated and the customer is notified that the selection is not appropriate if the selected store is not within the threshold distance from the payment store.

Alternatively or additionally the evaluation of a customer s selection of a refund store may be performed once an attempt to obtain a refund is made at a particular store such as according to the methods described herein. The proximity of this store to the store where payment was made may therefore be evaluated as part of processing the refund. In such embodiments requests for cash refunds originating at a POS that is not within a proscribed proximity to the store where payment was made may be denied.

In some embodiments an aggregation of refunds associated with the customer making the request for refund may be evaluated . If the customer has a pattern of making orders paying for them and then requesting refunds a flag may be set. In some embodiments the customer may be flagged as ineligible for making online orders having POS payment as the selected payment method if the aggregate amount exceeds a threshold. In some embodiments the aggregate amount of refunds for online orders with POS payment option within a certain time period such as a week or month may be compared to a threshold. If the amount of refunds paid out exceeds this threshold a flag may be set. In some embodiments the aggregate amount of refunds paid out at an in store POS may be compared to a threshold and the customer may be flagged as ineligible if this threshold is exceeded.

Accordingly if a customer is flagged as ineligible for future orders the customer will no longer be presented with the option to pay for an online order at a POS. In some embodiments the number of refund requests may likewise be aggregated and compared to a threshold and used to flag the order or flag the customer as ineligible in the same manner as for the amount threshold.

The method may further include taking remedial action according to flags set based on any of the evaluations mentioned herein that may indicate fraud or abuse of the system. Remedial action may include limiting the stores at which a cash refund will be paid to those within a threshold distance of the store where payment was received as noted above. Remedial action may also include limiting the refund to store credit. For this option refund terms indicating this potential limitation may be communicated to the customer prior to payment. Remedial action may further include requiring the payee to be an individual rather than a business or financial institution.

Remedial action may also include requiring that the payee present identification upon pick up of a cash refund verifying that the payee is identical to the individual that provided payment. In such embodiments the identity of the payee may be verified at the POS and transmitted to the merchant system before or after payment is received. Authorization to provide the refund may be transmitted to the POS only after verification of the payee s identity is received. In other embodiments instructions to provide the refund may be transmitted to the POS only upon verification of the payee s identity as identical to the payer s identity.

The functionality of the systems and methods described herein may be divided between different parties. For example the merchant system may be owned or controlled by a different entity than the entity owning or controlling the POS or POS host. Likewise the components of may each be owned or controlled by the same or different entities. Accordingly the methods described herein may additionally include authentication steps whereby the POS authenticates itself to the merchant system when transmitting acknowledgment of payment and where the merchant system authenticates itself when communicating with the POS.

Likewise additional steps for transferring funds between entities may be provided. For example upon receiving payment at a POS for an order an entity owning or controlling the POS may electronically transfer funds to an entity corresponding to the order. The transfer may occur for each order or a monthly weekly or other interval transfer may occur for all transactions in a given period. In some embodiments a clearing house wherein payments received on behalf of an entity are offset by payments due from the entity in order to reduce the amount of money transferred between entities.

The present invention may be embodied in other specific forms without departing from its spirit or essential characteristics. The described embodiments are to be considered in all respects only as illustrative and not restrictive. The scope of the invention is therefore indicated by the appended claims rather than by the foregoing description. All changes which come within the meaning and range of equivalency of the claims are to be embraced within their scope.

