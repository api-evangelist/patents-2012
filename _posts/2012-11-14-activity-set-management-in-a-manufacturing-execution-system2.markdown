---

title: Activity set management in a Manufacturing Execution System
abstract: A Manufacturing Execution System (MES) is provided for execution of workflows in response to specified business objectives. The MES system can maintain a library of activity sets representing industry-specific workflows that can be selected and executed in order to satisfy business-driven goals. The activity sets can comprise both business-level and control-level operations, and can be configured using an intuitive graphical interface that mitigates the need for low-level programming by the end user. In response to receipt of a request from a business-level system such as an ERP system, the MES system can match the request to an activity set, and subsequently execute the workflow defined by the activity set to facilitate satisfying the request.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09551983&OS=09551983&RS=09551983
owner: Rockwell Automation Technologies, Inc.
number: 09551983
owner_city: Mayfield
owner_country: US
publication_date: 20121114
---
This application claims the benefit of U.S. Provisional Patent Application Ser. No. 61 560 214 filed on Nov. 15 2011 and entitled ACTIVITY SET MANAGEMENT IN A MANUFACTURING EXECUTION SYSTEM. The entirety of this application is incorporated herein by reference.

The subject application relates generally to industrial control and more particularly to the use of graphical activity sets to perform Manufacturing and Execution System MES functions in response to specified business objectives.

Industrial controllers and their associated control programming are central to the operation of modern industrial automation systems. These controllers interact with field devices on the plant floor to carry out controlled processes relating to such objectives as manufacture of a product material handling batch processing waste water treatment and other such processes. Industrial controllers store and execute user defined control programs to effect decision making in connection with the controlled process. Such programs can include but are not limited to ladder logic sequential function charts function block diagrams structured text or other such platforms.

The various control systems that make up an enterprise are sometimes collectively managed by a Manufacturing Execution System MES which monitors real time data from the plant floor and issues control management instructions in view of higher level business considerations such as order management resource management inventory scheduling etc.

Plant floor operations including control of industrial processes by the industrial controllers described above represent one component of a larger business enterprise. On a higher level business operations such as financial analysis marketing sales order management long term business planning resource management inventory management and the like collectively represent another element of the enterprise. Many organizations employ an Enterprise Resource Planning ERP system or similar business system to correlate and manage these business level functions in a cohesive manner.

Although business level and plant floor level operations are related to and dependent upon one another the two levels are often only loosely integrated with slow e.g. non real time non automated information exchange between the two. Moreover efforts to integrate higher level business systems with plant side control can be hindered by the need for specialized programming code necessitating involvement of experienced programmers or IT personnel who may have limited understanding of both the business side and plant side operations compared with management or factory personnel.

The above described deficiencies of today s industrial control and business systems are merely intended to provide an overview of some of the problems of conventional systems and are not intended to be exhaustive. Other problems with conventional systems and corresponding benefits of the various non limiting embodiments described herein may become further apparent upon review of the following description.

The following presents a simplified summary in order to provide a basic understanding of some aspects described herein. This summary is not an extensive overview nor is intended to identify key critical elements or to delineate the scope of the various aspects described herein. Its sole purpose is to present some concepts in a simplified form as a prelude to the more detailed description that is presented later.

One or more embodiments of the present disclosure relate to an MES system and associated ERP gateway that facilitate automated interaction between business level and control level systems. To this end industry and process specific activity sets can be provided that define workflows capable of execution by the MES system. These activity sets can encompass both business level operations and control level operations thereby facilitating workflow coordination between all levels of an enterprise in the service of satisfying a particular business objective. Activity sets can be viewed and modified using an intuitive graphical interface thereby allowing non programmers to build meaningful MES workflows without the assistance of an experienced programmer.

According to one or more embodiments an MES system can include a library of generalized activity sets corresponding to executable control and or business workflows. These activity sets can be classified according to industry process and any suitable subcategories thereby allowing industry specific rules or standards to be encoded in the activity sets. Generalized activity sets can be customized for use with a particular control context through tag binding. When a message defining a business goal or objective is received by the MES system from a business level system e.g. an ERP system the message can be analyzed and matched to an activity set by the MES system which can then execute the selected activity set to facilitate satisfaction of the business objective. Relevant reporting can be provided to the business level in connection with execution of the activity set at a desired degree of granularity. Any suitable analysis technique can be employed to match the business request with a suitable activity set including simulation of activity sets in view a current control context.

To the accomplishment of the foregoing and related ends certain illustrative aspects are described herein in connection with the following description and the annexed drawings. These aspects are indicative of various ways which can be practiced all of which are intended to be covered herein. Other advantages and novel features may become apparent from the following detailed description when considered in conjunction with the drawings.

The subject disclosure is now described with reference to the drawings wherein like reference numerals are used to refer to like elements throughout. In the following description for purposes of explanation numerous specific details are set forth in order to provide a thorough understanding thereof. It may be evident however that the subject disclosure can be practiced without these specific details. In other instances well known structures and devices are shown in block diagram form in order to facilitate a description thereof.

As used in this application the terms component system platform layer controller terminal station node interface are intended to refer to a computer related entity or an entity related to or that is part of an operational apparatus with one or more specific functionalities wherein such entities can be either hardware a combination of hardware and software software or software in execution. For example a component can be but is not limited to being a process running on a processor a processor a hard disk drive multiple storage drives of optical or magnetic storage medium including affixed e.g. screwed or bolted or removably affixed solid state storage drives an object an executable a thread of execution a computer executable program and or a computer. By way of illustration both an application running on a server and the server can be a component. One or more components can reside within a process and or thread of execution and a component can be localized on one computer and or distributed between two or more computers. Also components as described herein can execute from various computer readable storage media having various data structures stored thereon. The components may communicate via local and or remote processes such as in accordance with a signal having one or more data packets e.g. data from one component interacting with another component in a local system distributed system and or across a network such as the Internet with other systems via the signal . As another example a component can be an apparatus with specific functionality provided by mechanical parts operated by electric or electronic circuitry which is operated by a software or a firmware application executed by a processor wherein the processor can be internal or external to the apparatus and executes at least a part of the software or firmware application. As yet another example a component can be an apparatus that provides specific functionality through electronic components without mechanical parts the electronic components can include a processor therein to execute software or firmware that provides at least in part the functionality of the electronic components. As further yet another example interface s can include input output I O components as well as associated processor application or Application Programming Interface API components. While the foregoing examples are directed to aspects of a component the exemplified aspects or features also apply to a system platform interface layer controller terminal and the like.

As used herein the terms to infer and inference refer generally to the process of reasoning about or inferring states of the system environment and or user from a set of observations as captured via events and or data. Inference can be employed to identify a specific context or action or can generate a probability distribution over states for example. The inference can be probabilistic that is the computation of a probability distribution over states of interest based on a consideration of data and events. Inference can also refer to techniques employed for composing higher level events from a set of events and or data. Such inference results in the construction of new events or actions from a set of observed events and or stored event data whether or not the events are correlated in close temporal proximity and whether the events and data come from one or several event and data sources.

In addition the term or is intended to mean an inclusive or rather than an exclusive or. That is unless specified otherwise or clear from the context the phrase X employs A or B is intended to mean any of the natural inclusive permutations. That is the phrase X employs A or B is satisfied by any of the following instances X employs A X employs B or X employs both A and B. In addition the articles a and an as used in this application and the appended claims should generally be construed to mean one or more unless specified otherwise or clear from the context to be directed to a singular form.

Furthermore the term set as employed herein excludes the empty set e.g. the set with no elements therein. Thus a set in the subject disclosure includes one or more elements or entities. As an illustration a set of controllers includes one or more controllers a set of data resources includes one or more data resources etc. Likewise the term group as utilized herein refers to a collection of one or more entities e.g. a group of nodes refers to one or more nodes.

Various aspects or features will be presented in terms of systems that may include a number of devices components modules and the like. It is to be understood and appreciated that the various systems may include additional devices components modules etc. and or may not include all of the devices components modules etc. discussed in connection with the figures. A combination of these approaches also can be used.

One or more control systems can operate within respective production areas at the control level. Exemplary types of control systems can include but are not limited to batch control systems e.g. mixing systems continuous control systems e.g. PID control systems or discrete control systems . These control systems can include one or more industrial controllers that facilitate monitoring and control of their respective processes. The controllers exchange data with the field devices using native hardwired I O or via a plant network such as Ethernet IP Data Highway Plus ControlNet Devicenet or the like. A given controller typically receives any combination of digital or analog signals from the field devices indicating a current state of the devices and their associated processes e.g. temperature position part presence or absence fluid level etc. and executes a user defined control program that performs automated decision making for the controlled processes based on the received signals. The controller then outputs appropriate digital and or analog control signaling to the field devices in accordance with the decisions made by the control program. These outputs can include device actuation signals temperature or position control signals operational commands to a machining or material handling robot mixer control signals motor control signals and the like. The control program can comprise any conceivable type of code used to process input signals read into the controller and to control output signals generated by the controller including but not limited to ladder logic sequential function charts function block diagrams structured text or other such platforms.

Manufacturing Execution System MES can monitor and manage control operations on the control level given higher level business considerations. An exemplary MES system can be provided with information relating one or more of scheduling work order management and execution business operating procedures resource management quality criteria inventory management and the like. Given this high level business information MES system can monitor control systems and or and issue control management instructions designed to align operations at the control level with medium term or long term goals of the organization as a whole.

Production areas can represent different areas within a single plant corresponding for example to different segments of a given manufacturing process different products etc. Alternatively or in addition Production areas can represent facilities located at different geographical locations associated with a given enterprise. In such architectures a central MES system can monitor and manage multiple control systems at different geographically diverse facilities providing coordination between the facilities in view of a common business objective.

One or more embodiments of the present innovation can include an MES system capable of receiving a request from an ERP system and mapping the request to one or more executable instructions for delivery to one or more control systems thereby implementing the request on the plant floor in a manner deemed suitable by the MES system given its knowledge of the control system architecture statuses schedules etc. illustrates exemplary data flows between the ERP system the MES system and a control system according to one or more embodiments of the present disclosure. It is to be appreciated that control system can comprise a single self contained control system or multiple distributed control systems. Moreover control system can span multiple geographic locations where individual control systems at the multiple locations report to a common MES system .

ERP system or a similar business system can issue ERP requests to MES system . Such requests can include but are not limited to production requests business goals customer order information resource allocation requests or other such requests. A production request can comprise for example a request from the ERP system to produce a specified quantity of a product. In such cases ERP system may not have knowledge of the particular control architecture or statuses of control system machine availability work schedules or other plant floor variables involved in fulfilling the request. Given its ability to monitor and maintain these control side factors MES system can receive this production request from the ERP system and determine one or more possible workflows for producing the desired amount of the indicated product based on an analysis of the overall control system architecture machine availabilities work schedules or other plant floor variables involved in fulfilling the request. For example the MES system can determine which machines are available and capable of producing the desired amount of the product a suitable control strategy to be executed by the machines to satisfy the order e.g. a batching sequence a number of batches that must be run to produce the desired amount etc. . The ERP can then transform a suitable workflow into an output executable by the control system to implement the workflow using techniques to be described in more detail infra. Upon completion of or during the workflow the MES system can provide the ERP system with report feedback at a desired level of granularity.

A business goal can comprise more complicated request involving correlation of a plurality of factors. For example the ERP system can issue a request to the MES system to minimize energy consumption for the plant as a whole during a specified range of hours while simultaneously maximizing production of an indicated product given the energy constraint. As with the production request this request can be processed by MES system and mapped to an appropriate control system workflow. Other exemplary ERP requests can include customer order requests resource allocation requests or any other business request generated by ERP system .

As noted above MES system can map incoming ERP request to a suitable workflow for execution by the MES system. In connection with generating this workflow MES system can identify machines or devices that can be leveraged to fulfill the business request as well as their associated controllers. MES system can then translate the workflow to an executable output capable of execution by the identified controllers. This executable output can comprise any suitable format understandable by the controllers including without limitation sequential function charts ladder logic function block diagrams structured text distributed control agents and the like. Executable output can also comprise control output signals mapped to tags or other I O associated with the controllers.

In addition to providing workflow instructions MES system can monitor and receive control data from control system . Examples of such control data include production data machine statuses alarms process measurements e.g. telemetry values resource statuses or other data made available by control system . Among other uses MES system can employ this control data to update system models used to select suitable workflows. MES system can also employ the control data to generate report data for provision to ERP system . Report data can include result data relating to implementation of the ERP request presented at a desired level of granularity. For example ERP system may only require an indication that a production request specified by ERP request was fulfilled but does not require details regarding the particular equipment used or number of production cycles run in connection with completing the request. Accordingly MES system can be configured to omit such production details from report data .

It is to be appreciated that any suitable communication protocol can be used to affect the data exchanges described above. For example ERP requests can be received by the MES system in Business to Manufacturing Markup Language b2mML which is an XML implementation of the ANSI ISA 95 family of standards. However other suitable communication formats and protocols are also contemplated and are within the scope of the present disclosure.

The foregoing is intended to provide a general overview of the relationships and types of data exchange between the ERP system MES system and control system according to one or more embodiments of the present disclosure. As noted above MES system can receive an ERP request and map this request to a workflow deemed suitable for fulfilling the request. In one or more embodiments this is achieved in part through the use of activity sets configured and stored on the MES system. An activity set defines a series of activities or a workflow for achieving a particular business goal. The activity set can define the activities in terms of the control or business functions to be performed the order of operation for the steps the designated machines or devices required to perform each step or any other information required to fully define the control activity represented by the activity set. The scope of a given activity set can be limited to a single device or can encompass multiple machines coordinated by the MES system to perform a distributed control operation in response to a received business request.

The workflow defined by an activity set can encompass both control level activities and higher business level activities acting in conjunction thereby coordinating all levels of the enterprise to the end of satisfying the defined business goal. To this end in addition to control operations the activity sets can define interactions to be performed between the MES system and the ERP system relative to the defined sequence of control instructions. For example it may be desired to provide validation feedback to the ERP system when a particular step of the control sequence associated with the activity set has been completed or to provide an error message to the ERP system if a particular step of the control sequence fails or times out. Such feedback steps can be encoded in the activity set together with the control sequence activities. As will be discussed in more detail below the MES system of the present disclosure can include a library of generalized industry specific activity sets which can be bound to a user s particular control context via controller tag mapping during initial configuration. The MES system also provides mechanisms allowing new custom activity sets to be created using an intuitive graphical interface that allows activity sets to be built from a library of control level and business level functional elements.

The business objective is passed to a mapping component of the MES system. Based on criteria to be described in more detail infra the mapping component analyzes the business objective to determine a suitable activity set for achieving the specified business objective . Mapping component then accesses a library of activity sets stored in an activity set database and identifies a suitable activity set from activity sets . The selected activity set is passed to a translation component for translation into a set of control instructions for deployment to appropriate controllers or devices of the control system. Translation component can translate the selected activity set to a set of executable control instructions compatible with the target controller s e.g. sequential function chart ladder logic structured text function block code etc. which can then be deployed to the appropriate controllers or devices. Additionally or alternatively control instructions can comprise analog digital or networked control outputs directed to the appropriate controllers to facilitate initiation of control sequences already stored on the controllers.

In addition to the control activities the activity set can also include sequence steps defining interactions between the MES system and the ERP system relative to the control sequence. Such steps can include business level reporting verification requests directed to business personnel or access to a business level database or other system. For example the activity set can define an ERP reporting step to be triggered in response to completion failure or timeout of a particular control level operation. In another example performance of a control side operation may be dependent upon a business variable stored in a database on the business level of the enterprise e.g. a current energy cost a current price of materials a current customer demand etc. . In such an instance the activity set may define that the MES system should read this business variable prior to execution of the control side operation and make execution of the control side operation contingent on this value. Accordingly the translation component can translate such business related operations defined in the activity set into appropriate business interactions .

Advantageously the MES system of the present disclosure can provide generalized activity sets that can be adapted for use with an end user s control system prior to or during runtime. illustrates binding of activity sets to an organization s control system. MES system can include an activity set database that stores a library of activity templates . Each activity templates can include a set of control and or business operations to be performed parameters and any necessary conditionals associated with the respective operations or any other information necessary to describe the operations represented by the activity template.

Before an activity set can be called by the MES system in response to an ERP request the activity set must be bound to the control context of the user s control system . In one or more embodiments this can be achieved by associating the parameters of the activity set with selected controller tags. Accordingly MES system can include a controller tag database that maintains a set of tag definitions corresponding to controller tags resident on control system e.g. the tags of controllers . In one or more embodiments MES system can access the available controller tags via a communication server which can be an OPC OLE for Processing Control server used to facilitate data exchange between controllers and other devices.

To facilitate tag location the tag definitions can be associated with an organizational model defined on MES system . Organizational model can be for example a hierarchical representation of the organization and associated plant contexts. Organizational model can be based on the S88 or S95 model although any suitable modeling standard is contemplated. The organizational model can represent the organization in terms of hierarchical physical locations organizational levels plant areas devices or any other suitable contexts. The hierarchical levels defined in the model can include but are not limited to an enterprise level site level area level line level and or workcell level. By modeling locations of the controller tags within the hierarchical organizational model MES system can locate controller tags using relative paths that define the tags in terms of their locations and context within the hierarchy.

MES system includes an interface that facilitates user interaction with activity set database and controller tag database . Interface can comprise any suitable graphical interface capable of receiving user commands as input and rendering output to the user. Through the MES interface a user can select an activity template to be configured from activity set database and associate parameters defined within the selected activity set with corresponding controller tags defined in the controller tag database . Binding the parameters of the activity template with selected controller tags yields a bound activity set which can be stored and subsequently matched to an incoming ERP request by the MES system .

Definitions for available controller tags are stored on the MES system for example in the controller tag database of . Available tags can be defined in terms of tag name data type tag path or other suitable information describing the tag. Available controller tags can be rendered via configuration interface as a collective searchable list of available tags from any or all controllers comprising an enterprise. As noted above the list of available controller tags can be populated for example by accessing a communication server such as server of .

The MES system can allow a developer through interface to select the syrup mixing activity set and to select tags from the available controller tags for association with the parameters of the selected activity set . This results in the activity set binding which can be viewed via the interface as a series of rows each representing a single parameter tag binding. For example a given row can include fields representing the selected activity set a parameter defined by the activity set and a controller tag selected for association with the parameter. As will be described in more detail below the MES system can leverage these user defined control bindings to translate activity sets to actionable outputs executable by the controllers.

To facilitate simplified location of a desired activity template one or more embodiments of the MES system described herein can organize activity sets according to control function industry material or any other suitable combination of browsable categories. illustrates an exemplary organization of activity sets according to categories and sub categories. In the exemplary architecture of activity sets are organized according to the process performed by the activity set the industry in which the activity set is applicable and any appropriate subcategories. For example there may be multiple stored activity sets for performing a mixing process as represented by activity sets under the MIXING category . Since some industries may require their manufacturing processes to conform with defined standards particular to the respective industries activity sets under the MIXING category may be further categorized according to industry categories . For example the food and beverage industry may be bound by a different set of standards for mixing than the oil and gas industry. Accordingly MIXING activity sets are further classified under FOOD AND BEVERAGE and OIL AND GAS which branch hierarchically from the MIXING category .

Under each INDUSTRY category MIXING activity sets can be further classified according to any desired set of sub categories. In this example MIXING activity sets for FOOD AND BEVERAGE can be further classified according to the material being mixed such as ICE CREAM or SYRUP . A similar classification structure for DIE CASTING activity sets is also depicted in . In this way activity sets stored in the MES system can not only define industrial control functions but can also encode within the functions any necessary standards associated with the particular industry as well as control variations tailored to a given material or other process sub category. Such activity set classifications can allow workflows to be defined within the MES system without the need for low level programming. Given the classification structure depicted in one or more embodiments of the MES system described herein can allow a developer to quickly locate a suitable activity set during configuration and to customize the selected activity set for use with the user s particular control context through tag binding.

According to one or more embodiments the business request can be received by an ERP gateway associated with MES system . The ERP gateway can provide a flexible mechanism for interfacing MES system with substantially any type of business system for exchange of business and production information. The ERP gateway can manage format transformation and parsing of the business request into one or more executable elements that can be mapped by the MES system to one or more suitable activity sets.

To facilitate flexible configuration of the MES system for operation with a range of ERP or other business systems ERP gateway can include a ERP interface which can be configured prior to deployment for compatibility with a specific business system in use. An associated graphical interface can guide a developer through this configuration process. In one or more embodiments ERP gateway can be pre bundled with selectable configurations corresponding to common existing ERP or other business systems. Graphical interface can also allow selection of an expected data format e.g. b2mML in which data is to be exchanged between the MES system and the ERP system. During runtime business request can be received by the configured ERP interface and transformed by an associated transform component from a data format used by the ERP system e.g. B2mML to a format understandable by MES system . In one or more embodiments the transform component can convert the business request for communication to the MES system using Java Message Service JMS although any suitable messaging format is within the scope of the present disclosure.

The transformed business request can then be analyzed by parsing component in order to identify elements within the request that can be matched to one or more activity sets. For example if the business request is a customer order for a defined quantity of a specified product parsing component can identify the specified product the quantity and any timeframe information included in the request e.g. a deadline to fulfill the order . In another example if the business request is a mandate that production of a specified product is to be given production priority given a defined energy constraint during peak energy hours parsing component can break down the request to identify the preferred product to be optimized the energy constraint e.g. the maximum desired energy consumption for the plant as a whole and the hours for which the energy constraint is to be in effect. These identified elements of the transformed business request can then be passed to the MES system as an executable request for association with one or more activity sets. Optionally the ERP gateway can additionally store details of the received business request in a request history database for future reference. This request history can be accessed by the graphical interface to facilitate review of previously received ERP requests.

Executable request is passed to a mapping component of the MES system which analyzes the request in view of the current control context of the plant in order to match a subset of activity sets with the request . Activity sets can comprise customized activity sets that have been bound to selected controller tags of the control system as described above in connection with . Based on the elements in executable request and the control context mapping component can select a suitable subset of activity sets capable of satisfying the business request . Control context can include such pre configured or substantially real time information as machine statuses and availability the architecture and capabilities of the control system current machine or system downtime information work schedules or other information relevant to execution of the business request. Control context information can be provided manually by a user or generated automatically based on real time monitoring of the control system by the MES system .

As an example of how control context can be used to facilitate selection of an activity set consider a business request representing a customer order for a specified quantity of a selected product. In this example the order is received from an ERP system as business request . Since ERP system has no knowledge of the particular control context on the plant floor for fulfilling this request the request includes no indication of which particular machines or process lines are to be used to satisfy the order. Upon receiving executable request corresponding to business request mapping component can leverage the control context information to identify machines capable of fulfilling the request the process that must be executed on these machines to produce the desired quantity of the product and the current status and availability of the respective machines. Based on this information mapping component can select one or more suitable activity sets corresponding to the identified process for execution on the identified machines. In some cases the activity sets may include different activity sets corresponding to the same process but intended for execution on different machines e.g. two different mixers having different control characteristics . If the different machines are capable of producing the ordered product mapping component can leverage control context to determine a preferred machine on which to execute the order based on efficiency respective machine availabilities maintenance cycles load balancing or other such considerations made available by control context . In another example the same activity set may be executable on different machines. Therefore rather than selecting an activity set corresponding to a preferred machine MES system can select the activity set common to the different machines and select a target machine for the activity set based on the control context . Moreover since a product quantity is associated with the customer order this product quantity information can be passed from the executable request to the selected activity set as a variable since the selected activity set may be generalized in terms of product quantity.

In one or more embodiments interface can also afford the user the opportunity to modify a rendered activity set prior to deployment via modification component . For example the user may decide that a particular step of the activity set should be omitted or an order of steps changed given current plant conditions known to the user. Such modification can be made via interface using modification component . For example if the activity set is rendered as an SFC interface can allow the user to modify the SFC using drag and drop interactions with the graphical functional steps comprising the SFC based activity set. Such graphical interactions can mitigate the need for low level programming expertise when modifying the activity sets. After all desired modifications are made to the selected activity set the modification component can afford the user the option of saving the changes back to the activity set database e.g. activity set database of to render the changes permanent or alternatively to apply the changes only to the present deployment of the activity set.

Upon selection of a preferred activity set from the candidate activity sets and after any desired modifications the selected activity set can be translated by control translation component to a set of instructions or signals executable by the target controllers or devices of the control system. That is the steps of the selected activity set can deployed as executable instructions to the controllers or devices required to perform the steps of the activity set. Alternatively MES system can render the activity set as human readable instructions for carrying out the activity set and thereby satisfying the original business request.

Although the foregoing examples have presumed pre defined classes of industry specific activity sets which can be selectively bound to the controller tags of the user s control system one or more embodiments of the MES system described herein can also include the capability to build custom activity sets for storage in the activity set database. illustrates creation of such custom activity sets. MES system can include an activity set builder accessible via the MES interface . Activity set builder can provide access to a workflow builder database which includes preconfigured base components that can be used to construct an activity set. These base components can include both control related blocks and business related blocks so that activity sets can be built relating process control steps with business side reporting approval record keeping and or data retrieval steps according to developer preferences. Base components stored in the activity builder database can include functional components e.g. function blocks representing units of control or business related functionality such as reporting data retrieval error handling approvals sign offs or other such functionality. The base components can also include operators and or sequence flow connectors for linking the functional components in a desired operational sequence and relationship. Activity set builder can allow activity sets to be constructed from the base components in a graphical drag and drop manner thereby facilitating intuitive configuration of MES interactions with the business level ERP system and the control level systems without the need for low level programming to be written. Any necessary parameters for subsequent binding to controller tags can also be defined and associated with selected workflow steps of the activity set. The resulting custom activity set can then be saved to the activity set database for subsequent user selection and controller tag binding as described above in connection with . After a custom activity set has been created by a developer MES interface can allow the developer to classify the new activity set at a selected location within the activity set classification hierarchy e.g. the hierarchy exemplified in or to create a new classification within the storage hierarchy for storage of the new activity set.

When the executable request is received simulation component can execute an iterative simulation based on an organizational model of the enterprise and current control context . Organizational model can comprise a simulation model of the enterprise that leverages both historical data and real time data to maintain an up to date representation of the enterprise. Control context can comprise information similar to control context of including machine statuses system capabilities downtime information work schedule etc. Based on one or both of the current control context and the organizational model simulation component can simulate execution of the executable request under a plurality of possible scenarios. For example multiple simulations can be run corresponding to execution of the request on different machines production lines or facilities to determine optimal equipment or locations for fulfilling the request. Scenarios can also be run for different materials work shifts or other variables. Results of the simulations can be compared in terms of one or more specified selection criteria including most cost efficient most energy efficient fastest turn around or any other suitable criterion. These selection criteria can be specified within the original business request or can be preconfigured as part of the MES system configuration. Based on the results generated by the simulation component mapping component can select an activity set that most closely matches the optimal simulation scenario identified by the simulation component. The selected activity set can then be processed as described above in connection with .

According to one or more embodiments simulation component can also run simulations on the activity sets themselves in view of the current control context . In such embodiments simulation component can simulate multiple activity sets adjusting the parameters and constraints of the simulations in accordance with current control conditions indicated by the control context . Mapping Component can then select the activity set for which a most favorable simulation result was obtained given a specified selection criterion.

At it is determined whether the message is in a format compatible with an MES system in receipt of the message. If not the message is transformed to a format compatible with the MES system at . For example the MES system can convert the message from b2mML format to a format compatible with JMS Java Message Service for transfer of the message to the MES system. In one or more embodiments this transformation can be performed by the ERP gateway prior to delivery to the MES system. Alternatively the MES system itself can transform the message.

After transformation of the message or if no transformation is necessary the method proceeds to step where the MES system identifies a stored activity set capable of satisfying the business objective encoded in the message and associates the message with the identified activity set. The activity set can define a workflow comprising one or both of control level operations and business level operations to be performed in a defined sequence under the coordination of the MES system. Upon receipt of the message from the ERP system the MES system can access a library of such activity sets and select an activity set capable of satisfying the business objective.

At it is determined whether more than one activity set has been identified as being suitable for carrying out the business objective. If more than one activity set has been identified a preferred activity set is selected from the candidate sets at . In one or more embodiments the preferred activity set can be selected manually. In such cases the candidate activity sets can be rendered visually to a user for selection. The MES system can visualize the candidate activity sets as graphical workflows to convey the sets in an intuitive manner.

Once the candidate activity sets have been narrowed to a single suitable activity set a determination is made at as to whether modifications to the activity set are required. For example a user may determine that the stored version of the workflow does not take into account a current atypical control side condition e.g. an unplanned change in work schedules a machine outage or defective control component an unexpected resource shortage etc. . If a modification is required the MES system can allow the user to modify the activity set via manual input at . Since the activity set can be displayed as a graphical workflow changes can be made to the activity set without extensive programming expertise. For example if the activity set is rendered as a sequential function chart SFC the associated workflow can be modified using drag and drop interaction with the function blocks comprising the SFC.

At the selected activity set is executed by the MES system. This can comprise converting the control side workflow operations defined in the activity set into control instructions executable by the controllers or devices involved in the workflow. These instructions can then be deployed to the controllers by the MES system. Similarly any business level interactions defined in the activity set can be achieved through suitable data exchanges between the MES system and relevant business level systems including the ERP system . At results of the activity set execution are reported to the ERP system. The MES system can be configured to report these results at any desired level of granularity. For instance business personnel may only be interested only in a general confirmation that the business objective was satisfied. Consequently the MES system can provide this confirmation while omitting details regarding the control sequence used to achieve the result e.g. which machines were employed how many batches were run to fulfill a customer order etc. .

At parameters defined in the general activity set are bound to selected controller tags of a user s control system. In one or more embodiments the MES system can determine available controller tags by accessing a communication server e.g. an OPC server communicatively connected to the various controllers comprising the control system. Alternatively the MES system can poll the controllers directly for available tag information. The MES system can present the available controller tags together with relevant information about the tags such as tag names data types tag path information user comments associated with the tags or other such information. In one or more embodiments tag path information for the available tags can be presented in the context of a hierarchical model of the enterprise which models the enterprise in terms of hierarchical physical locations or organizational levels encompassing all or part of the enterprise e.g. an enterprise level site level area level line level and or workcell level .

After the activity set parameters have been bound to selected controller tags the bound activity set can be stored in an activity set database at for subsequent selection and execution by the MES system in response to a business request. When a business request is received at the MES system e.g. from an ERP system or other business level system the MES can match the business request with the bound activity set and execute the activity set in order to satisfy the business request where the controller tag binding determines how execution of the activity set is translated into plant floor interactions e.g. which machines are used to satisfy the request what processes are run on the selected machines etc. .

At the MES interface can receive input selecting a subset of the operations for inclusion in a workflow via interaction with the graphical icons. In one or more embodiments this interaction can comprise drag and drop interaction with the graphical icons. At the selected workflow operations can be arranged and related using graphical operators and or graphical connecting lines. In this way a workflow can be constructed intuitively without requiring low level programming expertise thereby mitigating the need for an experienced programmer to develop MES operations for handling business requests. The graphical MES interface can thereby place greater control of MES configuration in the hands of business level and plant level personnel who typically have greater understanding of the business and control operations than IT personnel. After the workflow has been built it can be saved as an activity set at for subsequent execution by the MES system. For example in response to receipt of a business objective from an ERP system the MES system can match the business objective with the stored activity set and execute the activity set to facilitate achieving the objective.

Embodiments systems and components described herein as well as industrial control systems and industrial automation environments in which various aspects set forth in the subject specification can be carried out can include computer or network components such as servers clients programmable logic controllers PLCs communications modules mobile computers wireless components control components and so forth which are capable of interacting across a network. Computers and servers include one or more processors electronic integrated circuits that perform logic operations employing electric signals configured to execute instructions stored in media such as random access memory RAM read only memory ROM a hard drives as well as removable memory devices which can include memory sticks memory cards flash drives external hard drives and so on.

Similarly the term PLC as used herein can include functionality that can be shared across multiple components systems and or networks. As an example one or more PLCs can communicate and cooperate with various network devices across the network. This can include substantially any type of control communications module computer Input Output I O device sensor actuator and human machine interface HMI that communicate via the network which includes control automation and or public networks. The PLC can also communicate to and control various other devices such as I O modules including analog digital programmed intelligent I O modules other programmable controllers communications modules sensors actuators output devices and the like.

The network can include public networks such as the internet intranets and automation networks such as control and information protocol CIP networks including DeviceNet ControlNet and Ethernet IP. Other networks include Ethernet DH DH Remote I O Fieldbus Modbus Profibus CAN wireless networks serial protocols and so forth. In addition the network devices can include various possibilities hardware and or software components . These include components such as switches with virtual local area network VLAN capability LANs WANs proxies gateways routers firewalls virtual private network VPN devices servers clients computers configuration tools monitoring tools and or other devices.

With reference to an example environment for implementing various aspects of the aforementioned subject matter includes a computer . The computer includes a processing unit a system memory and a system bus . The system bus couples system components including but not limited to the system memory to the processing unit . The processing unit can be any of various available processors. Dual microprocessors and other multiprocessor architectures also can be employed as the processing unit .

The system bus can be any of several types of bus structure s including the memory bus or memory controller a peripheral bus or external bus and or a local bus using any variety of available bus architectures including but not limited to 8 bit bus Industrial Standard Architecture ISA Micro Channel Architecture MSA Extended ISA EISA Intelligent Drive Electronics IDE VESA Local Bus VLB Peripheral Component Interconnect PCI Universal Serial Bus USB Advanced Graphics Port AGP Personal Computer Memory Card International Association bus PCMCIA and Small Computer Systems Interface SCSI .

The system memory includes volatile memory and nonvolatile memory . The basic input output system BIOS containing the basic routines to transfer information between elements within the computer such as during start up is stored in nonvolatile memory . By way of illustration and not limitation nonvolatile memory can include read only memory ROM programmable ROM PROM electrically programmable ROM EPROM electrically erasable PROM EEPROM or flash memory. Volatile memory includes random access memory RAM which acts as external cache memory. By way of illustration and not limitation RAM is available in many forms such as synchronous RAM SRAM dynamic RAM DRAM synchronous DRAM SDRAM double data rate SDRAM DDR SDRAM enhanced SDRAM ESDRAM Synchlink DRAM SLDRAM and direct Rambus RAM DRRAM .

Computer also includes removable non removable volatile non volatile computer storage media. illustrates for example a disk storage . Disk storage includes but is not limited to devices like a magnetic disk drive floppy disk drive tape drive Jaz drive Zip drive LS 100 drive flash memory card or memory stick. In addition disk storage can include storage media separately or in combination with other storage media including but not limited to an optical disk drive such as a compact disk ROM device CD ROM CD recordable drive CD R Drive CD rewritable drive CD RW Drive or a digital versatile disk ROM drive DVD ROM . To facilitate connection of the disk storage to the system bus a removable or non removable interface is typically used such as interface .

It is to be appreciated that describes software that acts as an intermediary between users and the basic computer resources described in suitable operating environment . Such software includes an operating system . Operating system which can be stored on disk storage acts to control and allocate resources of the computer . System applications take advantage of the management of resources by operating system through program modules and program data stored either in system memory or on disk storage . It is to be appreciated that one or more embodiments of the subject disclosure can be implemented with various operating systems or combinations of operating systems.

A user enters commands or information into the computer through input device s . Input devices include but are not limited to a pointing device such as a mouse trackball stylus touch pad keyboard microphone joystick game pad satellite dish scanner TV tuner card digital camera digital video camera web camera and the like. These and other input devices connect to the processing unit through the system bus via interface port s . Interface port s include for example a serial port a parallel port a game port and a universal serial bus USB . Output device s use some of the same type of ports as input device s . Thus for example a USB port may be used to provide input to computer and to output information from computer to an output device . Output adapter is provided to illustrate that there are some output devices like monitors speakers and printers among other output devices which require special adapters. The output adapters include by way of illustration and not limitation video and sound cards that provide a means of connection between the output device and the system bus . It should be noted that other devices and or systems of devices provide both input and output capabilities such as remote computer s .

Computer can operate in a networked environment using logical connections to one or more remote computers such as remote computer s . The remote computer s can be a personal computer a server a router a network PC a workstation a microprocessor based appliance a peer device or other common network node and the like and typically includes many or all of the elements described relative to computer . For purposes of brevity only a memory storage device is illustrated with remote computer s . Remote computer s is logically connected to computer through a network interface and then physically connected via communication connection . Network interface encompasses communication networks such as local area networks LAN and wide area networks WAN . LAN technologies include Fiber Distributed Data Interface FDDI Copper Distributed Data Interface CDDI Ethernet IEEE 802.3 Token Ring IEEE 802.5 and the like. WAN technologies include but are not limited to point to point links circuit switching networks like Integrated Services Digital Networks ISDN and variations thereon packet switching networks and Digital Subscriber Lines DSL .

Communication connection s refers to the hardware software employed to connect the network interface to the system bus . While communication connection is shown for illustrative clarity inside computer it can also be external to computer . The hardware software necessary for connection to the network interface includes for exemplary purposes only internal and external technologies such as modems including regular telephone grade modems cable modems and DSL modems ISDN adapters and Ethernet cards.

What has been described above includes examples of the subject innovation. It is of course not possible to describe every conceivable combination of components or methodologies for purposes of describing the disclosed subject matter but one of ordinary skill in the art may recognize that many further combinations and permutations of the subject innovation are possible. Accordingly the disclosed subject matter is intended to embrace all such alterations modifications and variations that fall within the spirit and scope of the appended claims.

In particular and in regard to the various functions performed by the above described components devices circuits systems and the like the terms including a reference to a means used to describe such components are intended to correspond unless otherwise indicated to any component which performs the specified function of the described component e.g. a functional equivalent even though not structurally equivalent to the disclosed structure which performs the function in the herein illustrated exemplary aspects of the disclosed subject matter. In this regard it will also be recognized that the disclosed subject matter includes a system as well as a computer readable medium having computer executable instructions for performing the acts and or events of the various methods of the disclosed subject matter.

In addition while a particular feature of the disclosed subject matter may have been disclosed with respect to only one of several implementations such feature may be combined with one or more other features of the other implementations as may be desired and advantageous for any given or particular application. Furthermore to the extent that the terms includes and including and variants thereof are used in either the detailed description or the claims these terms are intended to be inclusive in a manner similar to the term comprising. 

In this application the word exemplary is used to mean serving as an example instance or illustration. Any aspect or design described herein as exemplary is not necessarily to be construed as preferred or advantageous over other aspects or designs. Rather use of the word exemplary is intended to present concepts in a concrete fashion.

Various aspects or features described herein may be implemented as a method apparatus or article of manufacture using standard programming and or engineering techniques. The term article of manufacture as used herein is intended to encompass a computer program accessible from any computer readable device carrier or media. For example computer readable media can include but are not limited to magnetic storage devices e.g. hard disk floppy disk magnetic strips . . . optical disks e.g. compact disk CD digital versatile disk DVD . . . smart cards and flash memory devices e.g. card stick key drive . . . .

