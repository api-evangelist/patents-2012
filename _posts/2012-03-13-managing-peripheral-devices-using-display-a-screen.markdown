---

title: Managing peripheral devices using display a screen
abstract: An information processing apparatus for displaying a peripheral device management screen to manage a peripheral device includes a storage unit, a management screen forming unit, an installation determination unit, a display determination unit, and a display control unit. The storage unit stores peripheral device management information that defines information to instruct execution of processing relating to the peripheral device from the peripheral device management screen. The management screen forming unit determines a configuration and a content of the peripheral device management screen based on the defined information. The installation determination unit determines whether to install the peripheral device management information. The display determination unit determines whether to automatically display the peripheral device management screen in response to the peripheral device management information being installed based on an installation determination result. The display control unit executes control to display the peripheral device management screen based on a display determination result.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08682194&OS=08682194&RS=08682194
owner: Canon Kabushiki Kaisha
number: 08682194
owner_city: Tokyo
owner_country: JP
publication_date: 20120313
---
The present invention relates to a peripheral device control system that includes an information processing apparatus and a peripheral device.

In recent years a peripheral device control system having a peripheral device connected to an information processing apparatus has been effectively utilized in various forms at home or in office through the use of a variety of interfaces such as a universal serial bus USB Ethernet registered trademark and a wireless local area network LAN . Examples of peripheral devices are a printer a copying machine a facsimile hereinafter FAX a scanner a digital camera a digital video camera and a multifunction peripheral of these devices.

In Windows 7 registered trademark by Microsoft Corporation of U.S. a new function for managing a peripheral device connected to an information processing apparatus such as a personal computer hereinafter referred to as PC has been introduced. It is a Device Stage that has a link function to a Devices and Printers folder serving as a window to display devices connected to the PC and applications and services unique to each peripheral device. The Device and Stage is a trademark of Microsoft Corporation of U.S. A screen of the Devices and Printers folder can be displayed from a start menu of the Windows. A Device Stage screen of each peripheral device can also be opened from the Devices and Printers folder.

The Devices Stage can provide a visual screen enabling a user to easily access functions or services relating to the device. An example of a peripheral device is a printer. For example a function of displaying a list of documents to be printed or a property screen of the printer can be provided on the Device Stage screen. In this example information of the peripheral device printer can be checked by activating a print queue or the property screen of the printer from the Device Stage screen.

Along with popularization of the Internet various on line services connecting the information processing apparatus or the peripheral device to the Internet to use the Internet have been provided. For example setting a link of a support site provided by a maker in the Internet on the Device Stage screen enables the user to easily access a site relating to the device.

A content of the Device Stage is metadata containing only a file of an Extensible Markup Language XML format or a resource file of an image or an icon. By customizing the metadata namely the XML file the image file or the icon file for each peripheral device display or a function of the Device Stage for each peripheral device can be customized.

Control of an operation is described in the XML file. However the XML file cannot have any function or variable similar to that mounted on software such as a general program because it is a static text file. For some pieces of information supported by an operating system OS however variables usable in the XML file are prepared. For example a variable for a printer name driver friendly name allocated to a printer queue or a viable for a Windows Image ACQUISITION WIA driver name allocated to a WIA driver for a scanner function using a WIA is provided from the OS.

Further processing can be controlled under conditions of a path of registry a content of information in the registry and architecture of a processor. The XML file contains information unique to each peripheral device. This information associates each peripheral device with metadata for each peripheral device. The metadata is stored in a web server or a compact disk read only memory CD ROM . The PC acquires the metadata from such a medium. In an exemplary embodiment the Device Stage the meta data and the XML file may respectively be referred to as a device management screen device management information or a device management file and device management control information or a device management control file.

As an example of a peripheral device a multifunction printer hereinafter MFP including a printer a FAX a scanner and a storage is described. Conventionally when the MFP is connected to a PC including the Windows 7 and this PC is connected to the Internet Device Stage metadata hereinafter referred to as metadata for the MFP is installed in the PC through the following procedure.

 1 2 The PC checks whether metadata containing an XML file in which the unique information acquired in 1 1 is written is present in a web server or a CD ROM for storing metadata hereinafter it is presumed that the metadata is present .

 1 4 The downloaded metadata is installed in the PC. In an environment where the metadata for the MFP has already been installed in the PC through the process of 1 1 to 1 4 when presence of new metadata for the MFP is confirmed in the web server or the CD ROM this new metadata is installed in the PC through the following procedure.

 2 2 The PC checks whether metadata containing an XML file in which the unique information acquired in 2 1 is written is present in the web server or the CD ROM for storing metadata hereinafter it is presumed that the metadata is present .

 2 3 With respect to the metadata installed in the PC and the metadata present in the web server or the CD ROM date information written in XML files contained in the metadata is compared with each other hereinafter it is presumed that the metadata present in the web server is newer .

 2 4 At the time of activating the Devices and Printers folder notification indicating installation permission of new metadata is displayed on the screen of the folder hereinafter it is presumed that installation has been executed according to a content of the notification . Even when metadata for a plurality of peripheral devices can be installed no name of a target device is displayed in the notification.

 2 6 The downloaded metadata is installed in the PC. A conventional example of managing information unique to each peripheral device by metadata is a technology discussed in Japanese Patent Application Laid Open No. 2011 14026.

When the metadata for the MFP is installed in the PC if a design of an icon file contained in the metadata is different from that of an icon file which has been used to display the MFP on the screen of the Devices and Printers folder whether following the procedures of 1 1 to 1 4 or 2 1 to 2 6 the metadata is installed an icon of the MFP displayed on the Devices and Printers folder screen is changed. Thus the installation of the metadata for the MFP can be recognized from a displayed content on the screen of the Devices and Printers folder.

However when a design of an icon file contained in newly installed metadata for the MFP is similar to that of an icon file used thus far for displaying the MFP on the screen of the Devices and Printers folder the installation of the new metadata cannon be recognized in the following environments.

In this case the metadata for the MFP present on an information server apparatus is automatically installed in the PC. Thus the installation of the metadata for the MFP cannot be recognized.

 2 In a case where a plurality of peripheral devices including the MFP are connected to the PC and the metadata for the MFP has been installed in the PC

In this case new metadata for the MFP is installed in the PC through the procedures 2 1 to 2 6 . In 2 4 a notification is displayed on the upper part of the screen of the Devices and Printers folder screen. Thus installation of the new metadata can be recognized. However since the displayed notification contains no name of the target device the peripheral devices in which the new metadata has been installed cannot be recognized. When a peripheral device connected to the PC is only the MFP in 2 4 it can be determined that the notification displayed on the upper part of the screen of the Devices and Printers folder is made for the MFP. Thus in this case the installation of the new metadata in the MFP can be recognized.

The present invention is directed to a highly operable peripheral device control system that can provide a device management screen for providing appropriate display or a function according to a user s use environment and appropriately notifying when metadata for a peripheral device connected to a PC is installed in the PC the user of the installation target peripheral device.

According to an aspect of the present invention an information processing apparatus for displaying a peripheral device management screen to manage a peripheral device includes a storage unit configured to store in a storage part peripheral device management information in which information to instruct execution of at least one processing relating to the peripheral device from the peripheral device management screen is defined a management screen forming unit configured to determine a configuration and a content of the peripheral device management screen based on the information defined in the peripheral device management information an installation determination unit configured to determine whether to install the peripheral device management information a display determination unit configured to determine whether to automatically display the peripheral device management screen in response to the peripheral device management information being installed based on an installation determination result of the installation determination unit and a display control unit configured to execute control to display the peripheral device management screen based on a display determination result of the display determination unit.

 1 The highly operable peripheral device control system that can provide the device management screen for providing appropriate displays or functions according to the user s use environment can be achieved. 2 When the metadata for the peripheral device connected to the PC is installed in the PC the user can be appropriately notified of the installation target peripheral device thus providing high user operability.

Further features and aspects of the present invention will become apparent from the following detailed description of exemplary embodiments with reference to the attached drawings.

Various exemplary embodiments features and aspects of the invention will be described in detail below with reference to the drawings.

Among information of the OS of the Windows 7 cited below those not specifically described are disclosed in the Internet specifically in a site of Microsoft Developer Network MSDN http msdn.microsoft.com en us library default.aspx as of Sep. 15 of 2010 and thus unnecessary description is omitted.

Information of a USB below is disclosed in a site of Universal Serial Bus http www.usb.org home as of Sep. 15 of 2010 and thus unnecessary description is omitted.

Information of Web Services in Devices WSD below is disclosed in a site of Hardware Developer Central registered trademark http www.microsoft.com whdc connect rally rallywsd.mspx and thus unnecessary description is omitted.

Peripheral devices can be a printer a copying machine a facsimile a scanner a digital camera and an apparatus including a combined function of these. The MFP which has a hardware configuration described below referring to is connected to the PC via a USB interface or the network to execute bidirectional communication. An application has an executable file . EXE for the Windows. As an example of an embodiment application the application has a function of displaying a device management screen illustrated in .

The peripheral device control system includes a printer driver illustrated in and a FAX driver not illustrated . The network is a home network for a general household built where a user customer of the MFP lives. The network is an office network built in an ABC company. The PC connected to the network includes a web server having a web server function and provides a web site of the ABC company via the Internet. A CD ROM can be inserted into the PC and stores software or an electronic file.

File storage units and in the web server and the CD ROM store icon data not illustrated or image data not illustrated described below referring to and a device management file not illustrated containing a device management control file described below referring to . Such data are distributed from these units. An analog telephone line is used for facsimile transmission reception by the PC via the MFP . A flash memory is loaded in a flash memory loading slot not illustrated of the MFP so that it can be referred to as a storage from the PC .

The MFP has the hardware configuration illustrated in . The example of the MFP illustrated in is described. In a CPU of the MFP which includes a microprocessor controls a RAM a communication unit a recording unit an operation unit a display unit a reading unit a facsimile control unit and an external storage unit according to a program stored in a ROM . The ROM stores a program for causing the MFP to execute recording printing or notifying the PC of a state of a printing operation under control of the printer driver described below referring to . Further the ROM stores a program for causing the MFP to execute facsimile transmission or reception or notifying the PC of a state of facsimile transmission or reception under control of the FAX driver not illustrated . In addition the ROM stores a program for causing the MFP to execute image reading or notifying the PC of a state of a reading operation under control of a scanner driver not illustrated .

The RAM temporarily stores print data mainly transmitted from the PC which is printed by the recording unit . The RAM temporarily stores image data read by the reading unit facsimile transmission data transmitted from the PC or facsimile reception data received by the facsimile control unit. The communication unit which includes the USB interface a connection port for the network and a connection port for the analog telephone line controls analog communication of the USB the Ethernet and the facsimile.

The recording unit includes a recording unit having an ink jet recording head each color ink a carriage and a recording paper conveying mechanism and an electric circuit having an application specific integrated circuit ASIC for generating a printing pulse by the recording head based on the print data. By a printing operation or a facsimile transmission operation on a printable application a displayed content image data of a file opened in the application is temporarily stored as an EMF spool file in the HDD of the PC converted into print data or facsimile transmission data containing a MFP control command via the printer driver or the FAX driver and then transmitted to the MFP via the USB interface or the network .

The print data received by the MFP is converted into a printing pulse by the recording unit to be recorded on recording paper. The facsimile data received by the MFP is converted based on a facsimile communication protocol by the facsimile control unit to be transmitted to an opposite facsimile device via the analog telephone line . The operation unit which includes various buttons such as a power button and a reset button can operate the MFP . The display unit which includes a touch panel liquid crystal display can display or input a state of the MFP various settings or telephone numbers.

The reading unit which includes an electric circuit having a color image sensor or an ASIC for image processing controls a scanner function. The facsimile control unit which includes a facsimile modem or an analog communication circuit controls facsimile transmission or reception according to the facsimile communication protocol. The external storage control unit which includes a flash memory loading slot or a storage interface circuit controls the loaded flash memory.

A device driver group includes a standard driver group normally included in the OS and an IHV driver group provided from the IHV. An application DDI interface includes an application programming interface API and a device driver interface DDI . The application is normally included in the OS for device management. An application is printable as described below. An application group includes the device management and the application . The device management can manage execute and display a Devices and Printers folder described below referring to and a device management screen described below referring to via the application DDI interface .

A user interface UI module provides and controls a user interface of the printer driver. A language monitor controls data transmission reception as a data communication interface. A status monitor displays a remaining ink amount of the MFP a warning or an error state. A port monitor transmits data received from the language monitor to an appropriate port or receives data transmitted from the MFP via a class driver . The class driver is a low level module nearest to the port. According to an embodiment the class driver is a printer class driver of the independent protocol of the WSD or the IHV and controls the port USB or network port . The printer driver is available from the ABC company that manufactures the MFP .

An area displays a notification relating to the Devices and Printers folder . For example with respect to one or more peripheral devices device among the peripheral devices displayed in the Devices and Printers folder if a device management file for the peripheral device which is newer than the device management file for the peripheral device present in the device management file storage unit is present in the PC or the CD ROM a notification indicating permission of acquiring the new device management file for the peripheral device is displayed in this area. When there is no content for notification nothing is displayed in the area.

In a device management screen is activated to be displayed when the peripheral device in the Devices and Printers folder illustrated in is selected. The MFP can be managed by using this device management screen . In the upper part of the device management screen a device icon a device name and manufacturing source information are displayed. In the device name a device name of the peripheral device of the Devices and Printers folder is displayed. In the manufacturing source information a character string designated in a element illustrated in is displayed.

In the lower part of the device management screen a link to a function associated with the peripheral device is displayed. A print queue button and a print setting button are displayed. In a element illustrated in elements and indicating a button and a function are described. Data of the device icon data of a print queue button icon icon data of a print setting button icon and icon data of the peripheral device in the Devices and Printers folder illustrated in are integrated as a device management file together with a device management control file illustrated in and stored as apart of data in the device management file storage unit not illustrated .

In an element true information is set which indicates setting as to whether to automatically activate the device management screen when a device management file including the device management control file is installed. In an element Printer information indicating a category of the device is set.

Such information is used when installing the device management control file . In the device management control file information necessary for constituting the device management screen is described. The device management screen is activated for display when the MFP is connected to the PC . To display the printer queue button and the print setting button illustrated in on the device management screen elements and indicating the button and the function are set in an element .

Under the element in an element Open Printer Queue a character string of Open Printer Queue to be displayed on the printer queue button is set. In an element openPrinterQueue a code of openPrinterQueue is set to indicate a function program for displaying a printer queue folder.

Under the element in an element PrintingPrefernces a character string of Printing Preferences to be displayed on the print setting button is set. In the element printingPreferences a code of printingPreferences is set to indicate a function program for displaying the print setting dialog illustrated in .

The device management screen is activated and displayed by connecting the MFP to the PC via the USB interface or the network or selecting a device in the Devices and Printers folder illustrated in . An example where the device management screen is activated and displayed by connecting the MFP to the PC via the USB interface or the network is mainly described.

In step S the device management sets FALSE in a device management file unupdated flag which is prepared in a predetermined position of the HDD of the PC . In step S the device management sets in a counter i created in the RAM of the PC . In step S the device management selects an i th 1st device. In step S as to the device selected in step S the device management checks installation of a device management file described below referring to . When there is no more device to be processed NO in step S the processing proceeds to step S. When there is more device to be processed YES in step S in step S the device management increments the counter i by 1 and the processing proceeds to step S.

In step S the device management checks a setting value of a device management file unupdated flag. When TRUE is set in the device management file unupdated flag YES in step S the processing proceeds to step S. When TRUE is not set NO in step S the processing proceeds to step S. In step S the device management displays a Devices and Printers folder screen that notifies permission of updating the device management file. When the user updates the device management file according to the notification YES in step S the processing proceeds to step S. When the user does not update NO in step S the processing proceeds to step S.

In step S the device management checks device ID stored in step S in the processing for checking installation of the device management file which is described below referring to . In step S the device management file installs the device management file which is described below referring to . In step S FALSE is set in the device management file unupdated flag. The processing then proceeds to step S to complete the Devices and Printers folder activation. In step S after the device management displays the Devices and Printers folder screen the processing proceeds to step S to complete the Devices and Printers folder activation.

In step S the device management checks device ID of the device MFP connected via the USB interface or the network . In step S the device management searches a device management control file for the device MFP connected to the PC based on information of a manufacturing source MFG and a model MDL contained in the device ID. In the device management control file illustrated in the manufacturing source MFG ABC and the model MDL Kmmn corresponding to the device MFP are respectively described in the element and the element . Based on the information described in the element and the element the device management searches the device management control file for the device MFP from the file storage unit or in the CD ROM inserted into the PC .

In step S the device management determines whether the device management control file has been found from the file storage unit or . When the device management control file has been found YES in step S the processing proceeds to step S. When the device management control file has not been found NO in step S the processing proceeds to step S to end the processing for checking the installation of the device management file. In step S the device management checks whether the device management control file for the device MFP has already been stored in a predetermined position in the HDD of the PC . When the device management control file for the device MFP has been stored YES in step S the processing proceeds to step S. When the device management control file for the device MFP has not been stored in the predetermined position in the HDD of the PC NO in step S in step S the device management executes processing for installing the device management file which is described below referring to .

In step S the device management compares the last updating dates of the device management control file described in the element between the device management control file for the MFP searched for in step S and the device management control file for the MFP stored in the predetermined position in the HDD of the PC . When the date described in the element of the device management control file for the MFP searched for in step S is newer YES in step S the processing proceeds to step S. When the date described in the element for the MFP searched for in step S is not newer NO in step S the processing proceeds to step S to end the processing for checking the installation of the device management file.

In step S the device management sets TRUE in the device management file unupdated flag which is prepared in the predetermined position in the HDD of the PC . In step S the device management stores the device ID checked in step S in a predetermined position in the HDD of the PC . Then the processing proceeds to step S to end the processing for checking the installation of the device management file.

In step S the device management checks a value set in the element in the device management control file acquired in step S. When the value set in the element is TRUE YES in step S the processing proceeds to step S. When the value set in the element is not TRUE NO in step S the processing proceeds to step S to complete the processing for installing the device management file. In step S the device management forms a device management screen according to a described content of the device management control file and the processing proceeds to step S.

In step S to clearly show that the device management control file has been updated the device management activates the device management screen. Then the processing proceeds to step S to complete the processing for installing the device management file.

A second exemplary embodiment will be described where in the system configuration of the first exemplary embodiment a plurality of peripheral devices e.g. MFP and printer are connected to one PC PC via the USB interface or the network . In this case when a device management file is simultaneously installed in the plurality of peripheral devices activation of all device management screens for the peripheral devices may not be desirable. In such a case it is desired that a device management screen of a peripheral device frequently used daily be activated in view of a use state of each peripheral device.

In step S the device management sets FALSE in a device management file unupdated flag which is prepared in a predetermined position of the HDD of the PC . In step S the device management sets in a counter i created in the RAM of the PC . In step S the device management selects an i th 1st peripheral device. In step S for the peripheral device selected in step S the device management checks installation of a device management file described below referring to . When there is no more peripheral device to be processed NO in step S the processing proceeds to step S. When there is more peripheral device to be processed YES in step S in step S the device management increments the counter i by 1 and the processing proceeds to step S.

In step S the device management checks a setting value of the device management file unupdated flag. When TRUE is set in the device management file unupdated flag YES in step S the processing proceeds to step S. When TRUE is not set in the device management file unupdated flag NO in step S the processing proceeds to step S. In step S the device management displays a Devices and Printers folder screen that notifies permission of updating the device management file. When the user updates the device management file according to the notification YES in step S the processing proceeds to step S. When the user does not update the device management file NO in step S the processing proceeds to step S to complete the processing for activating the Devices and Printers folder.

In step S the device management updates and installs the device management file which is described below referring to . In step S FALSE is set in the device management file unupdated flag. The processing then proceeds to step S to complete the Devices and Printers folder activation. In step S after the Devices and Printers folder screen is displayed by the device management the processing proceeds to step S to complete the Devices and Printers folder activation.

In step S the device management checks device ID of the peripheral device MFP connected via the USB interface or the network . In step S the device management searches a device management control file for the peripheral device MFP connected to the PC based on information of a manufacturing source MFG and a model MDL contained in the device ID. In the device management control file illustrated in the manufacturing source MFG ABC and the model MDL Kmmn corresponding to the peripheral device MFP are respectively described in the element and the element .

Based on the information described in the element and the element the device management searches the device management control file for the peripheral device MFP from the file storage unit or in the CD ROM inserted into the PC . In step S the device management determines whether the device management control file has been found from the file storage unit or . When the device management control file has been found YES in step S the processing proceeds to step S. When the device management control file has not been found NO in step S the processing proceeds to step S to end the processing for checking the installation of the device management file.

In step S the device management checks whether the device management control file for the peripheral device MFP has been stored in a predetermined position in the HDD of the PC . When the device management control file for the peripheral device MFP has been stored YES in step S the processing proceeds to step S. When the device management control file for the peripheral device MFP has not been stored in the predetermined position in the HDD of the PC NO in step S in step S the device management executes processing for installing the device management file which is described below referring to .

In step S the device management compares the last updating dates of the device management control file described in the element between the device management control file for the peripheral device MFP searched for in step S and the device management control file for the peripheral device MFP stored in the predetermined position in the HDD of the PC . When the date described in the element of the device management control file for the peripheral device MFP searched for in step S is newer YES in step S the processing proceeds to step S. When the date described in the element for the peripheral device searched for in step S is not newer NO in step S in step S the device management executes processing for automatically checking activation of a device management screen which is described below referring to and the processing proceeds to step S to end the processing for checking the installation of the device management file.

In step S the device management sets TRUE in the device management file unupdated flag which is prepared in the predetermined position in the HDD of the PC . In step S the device management adds the device ID checked in step S to a management file unupdated list stored in a predetermined position of the HDD of the PC . Then the processing proceeds to step S to end the processing for checking the installation of the device management file.

In step S based on the device ID acquired in step S the device management checks a setting value of an automatic display flag for next activation time of Devices and Printers stored in a predetermined position of the HDD of the PC . When TRUE is set in the automatic display flag for next activation time of Devices and Printers YES in step S the processing proceeds to step S. When TRUE is not set in the automatic display flag for next activation time of Devices and Printers NO in step S the processing proceeds to step S to end the processing for automatically checking activation of the device management screen.

In step S the device management checks whether power for the peripheral device MFP is ON. When the power for the peripheral device is ON YES in step S the processing proceeds to step S. When the power for the peripheral device is not ON NO in step S the processing proceeds to step S to end the processing for automatically checking activation of the device management screen.

In step S the device management forms a device management screen according to a described content of the device management control file . After the device management screen is activated in step S the processing proceeds to step S. In step S the device management sets FALSE in the automatic display flag for next activation time of Devices and Printers stored in the predetermined position of the HDD of the PC . Then the processing proceeds to step S to end the processing for automatically checking activation of the device management screen.

In step S the device management file acquires a management file unupdated list which is stored in a predetermined position of the HDD of the PC. In step S the device management sets in a counter j created in the RAM of the PC . In step S the device management acquires j th 1st device ID of the management file unupdated list. In step S the device management executes processing for installing a device management file described below referring to . When there is no more device ID to be processed in the management file unupdated list NO in step S the processing proceeds to step S. When there is more device ID to be processed YES in step S in step S the device management increments the counter j by 1 and the processing proceeds to step S. In step S the device management initializes the management file unupdated list. The processing then proceeds to step S to end the processing for updating and installing the device management file.

In step S the device management sets FALSE in the automatic display flag for next activation time of Devices and Printers which is stored in the predetermined position of the HDD of the PC and the processing proceeds to step S. In step S based on the device ID information checked in step S illustrated in or in step S illustrated in the device management acquires the device management control file for the device MFP from the file storage unit or in the CD ROM inserted into the web server or the PC to store it in a predetermined position in the HDD of the PC . In step S the device management checks a value set in the element in the device management control file acquired in step S. When the value set in the element is TRUE YES in step S the processing proceeds to step S. When the value set in the element is not TRUE NO in step S the processing proceeds to step S to end the processing for installing the device management file.

In step S the device management executes processing for automatically displaying a device management control screen which is described below referring to and the processing proceeds to step S. In step S the device management checks a setting value of an automatic display determination flag stored in a predetermined position in the HDD of the PC . When TRUE is set in the automatic display determination flag YES in step S the processing proceeds to step S. When TRUE is not set in the automatic display determination flag NO in step S the processing proceeds to step S to end the processing for installing the device management file.

In step S the device management forms a device management screen according to a described content of the device management control file and activates the device management screen in step S. Then the processing proceeds to step S to end the processing for installing the device management file.

In step S as to the device management control file stored in the predetermined position in the HDD of the PC the device management checks a value indicating category information of the device described in the element . When the value stored in the element is a printer YES in step S the processing proceeds to step S. When the value stored in the element is not a printer NO in step S the processing proceeds to step S.

In step S the device management checks a connection status of the peripheral device and the processing proceeds to step S. In step S the device management checks whether the peripheral device MFP is the only printer installed in the PC . When the peripheral device MFP is the only printer installed in the PC YES in step S the processing proceeds to step S. When the peripheral device is not the only printer installed in the PC NO in step S the processing proceeds to step S to check whether the peripheral device MFP is designated as a normally used printer. When the peripheral device MFP is designated as a normally used printer YES in step S the processing proceeds to step S. When the peripheral device is not designated as a normally used printer NO in step S the processing proceeds to step S to check whether the peripheral device MFP is directly connected to the PC via an interface such as the USB interface or a Bluetooth interface not illustrated .

When the peripheral device MFP is directly connected to the PC YES in step S the processing proceeds to step S. When the peripheral device is not directly connected to the PC NO in step S the processing proceeds to step S to check whether the PC is connected to a home network. When the PC is connected to a home network YES in step S the processing proceeds to step S. When the PC is not connected to a home network NO in step S the processing proceeds to step S to check whether subnet masks of the peripheral device MFP and the PC are similar.

When the subnet masks of the peripheral device MFP and the PC are similar YES in step S the processing proceeds to step S. When the subnet masks of the peripheral device and the PC are not similar NO in step S the processing proceeds to step S to check whether the peripheral device MFP is the only printer present in the network. When the peripheral device MFP is the only printer present in the network YES in step S the processing proceeds to step S. When the peripheral device is not the only printer present in the network NO in step S the processing proceeds to step S.

In step S the device management checks a power state of the peripheral device MFP to check whether power is ON. When the power is ON in the peripheral device MFP YES in step S the processing proceeds to step S. When the power is not ON in the peripheral device NO in step S the processing proceeds to step S to set TRUE in the automatic display flag for next activation time of Devices and Printers stored in the predetermined position in the HDD of the PC . Then the processing proceeds to step S.

In step S the device management sets FALSE to the automatic display determination flag stored in the predetermined position in the HDD of the PC . The processing then proceeds to step S to end the processing for determining automatic displaying of the device management control screen. In step S the device management sets TRUE in the automatic display determination flag stored in the predetermined position in the HDD of the PC . The processing then proceeds to step S to end the processing for determining automatic displaying of the device management control screen.

According to a third exemplary embodiment by processing illustrated in described below and screens illustrated in described below a user can be notified of a peripheral device targeted to install a device management file. illustrates a Devices and Printers folder and a device management screen. In the Devices and Printers folder is displayed on a PC and a printer or a FAX usable in the PC is displayed for each driver in the folder. In this embodiment a peripheral device named XYZ Defg a peripheral device named ABC Kmmn and a peripheral device named LMN Opqr are displayed as usable peripheral devices.

In the Devices and Printers folder the peripheral device having an icon indicated by a dotted line is unusable while the peripheral device and the peripheral device indicated by solid lines are usable. NEW displayed on the peripheral device indicates that a new device management file for the peripheral device has been installed.

An area is a region for displaying a notification relating to the Devices and Printers folder . For example as to one or more peripheral devices device among the peripheral devices displayed in the Devices and Printers folder when a device management file for the peripheral device which is newer than the device management file for the peripheral device present in a device management file storage unit is present in a PC or a CD ROM a notification indicating permission of acquiring the new device management file for the peripheral device is displayed in this area. When there is no content for the notification nothing is displayed in the area.

In a screen is a screen for displaying a list of peripheral devices for which a new device management file can be acquired. Device names and for which a new device management file can be acquired have check boxes for selecting whether to acquire a new device management file. A button is a button for acquiring a new device management file. When the button is pressed processing for acquiring a new device management file in and is executed. A button is a button for canceling the processing for acquiring the new device management file. When the button is pressed the processing for acquiring the new device management file is canceled.

In step S the device management file acquires the management file unupdated list stored in the predetermined position of the HDD of the PC . Based on device ID described in the management file unupdated list the device management forms a selection screen for a device management file updating and installing target device to be displayed in the PC . When a device management file updating and installing target device is selected on the selection screen for the device management file updating and installing target device and the button is pressed in step S based on information of the device selected by the user in step S the device management creates an updating and installing target device list.

In step S the device management sets in a counter j created in the RAM of the PC . In step S the device management acquires j th 1st device ID of the updating and installing target device list. In step S the device management executes processing for installing the device management file illustrated in . When there is no more device ID to be processed in the updating and installing target device list NO in step S the processing proceeds to step S. When there is more device ID to be processed YES in step S in step S the device management increments the counter j by 1 and the processing proceeds to step S.

In step S the device management initializes the management file unupdated list. The processing then proceeds to step S. In step S the device management initializes the updating and installing target device list. The processing then proceeds to step S to end the processing for updating and installing the device management file.

Aspects of the present invention can also be realized by a computer of a system or apparatus or devices such as a CPU or MPU that reads out and executes a program recorded on a memory device to perform the functions of the above described embodiment s and by a method the steps of which are performed by a computer of a system or apparatus by for example reading out and executing a program recorded on a memory device to perform the functions of the above described embodiment s . For this purpose the program is provided to the computer for example via a network or from a recording medium of various types serving as the memory device e.g. computer readable medium . In an example a computer readable storage medium may store a program that causes an image forming apparatus to perform a method described herein. In another example a central processing unit CPU may be configured to control at least one unit utilized in a method or apparatus described herein.

While the present invention has been described with reference to exemplary embodiments it is to be understood that the invention is not limited to the disclosed exemplary embodiments. The scope of the following claims is to be accorded the broadest interpretation so as to encompass all modifications equivalent structures and functions.

This application claims priority from Japanese Patent Application No. 2011 075375 filed Mar. 30 2011 which is hereby incorporated by reference herein in its entirety.

