---

title: Method and apparatus for phone communication using home network
abstract: A method of providing a home network telephony service, in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal provides a phone communication service by using a first electronic device connected to a home network of the first mobile communication terminal is provided. The method includes transmitting a call initiation request message, including an address of the first electronic device, and making a request for a phone call connection using the first electronic device in response to the phone call to the second mobile communication terminal; receiving a response message in response to the call initiation request message from the second mobile communication terminal; and transmitting a call initiation request message including the address of the second electronic device and making a request to the first electronic device to originate a call to the second electronic device.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09385882&OS=09385882&RS=09385882
owner: Samsung Electronics Co., Ltd
number: 09385882
owner_city: 
owner_country: KR
publication_date: 20120118
---
This application claims priority under 35 U.S.C. 119 a to Patent Applications filed in the Korean Intellectual Property Office on Jan. 18 2011 and May 9 2011 and assigned Serial Nos. 10 2011 0005163 and 10 2011 0043690 respectively the entire disclosure of each of which is incorporated herein by reference.

The present invention relates generally to phone communication using a home network and more particularly to a method and an apparatus for authenticating a counterpart when phone communication is performed using the home network.

Generally the home network is realized with a private network based on the Internet Protocol IP and connects various types of devices such as Personal Computers PCs intelligent products and wireless devices used at home with one network through a common virtual computing environment called middleware and controls them.

The middleware enables communication between various digital devices through connecting the devices with a peer to peer scheme and Home AV Interoperability HAVI Universal Plug and Play UPnP Java Intelligent Network Infra structure JINI and Home Wide Web HWW have been suggested for the middleware.

Each device in a computing environment established through the UPnP middleware is allocated a protocol from a server according to Dynamic Host Configuration Protocol DHCP or an address selected by an automatic IP designation function and performs a communication between devices and a search on a network based on the allocated protocol or address.

A UPnP network is the most widely utilized home network technology and defines a UPnP device and a UPnP service based on a protocol between the UPnP device and the UPnP service. The UPnP network includes a Controlled Device CD which is a home network device connected to an IP based home network and controlled and a Control Point CP which is a device for controlling the CD. The control point is a device for controlling the controlled device and is an element for requesting an event and receiving the event. The controlled device is a device performing a determined function based on the request of the control point and is an element for transmitting an event to a control point requesting the event when a state of the controlled device is changed.

An operation between devices in the existing UPnP network includes an advertisement process a discovery process a description process a control process and an eventing process.

The advertisement process is a process of reporting a new controlled device to other devices on a home network when the new controlled device is connected to the home network. The discovery process is a process of searching for controlled devices operated on the home network when the new control point is connected to the home network in order for the control point to control the controlled device. The description process is a process of parsing a service description eXtensible Markup Language XML file or a device description XML file through an IP address of a controlled device acquired in the discovery process and recognizing a function of a newly added device in more detail. The control process is a process of transmitting a control message action request for requesting a predetermined service to a corresponding controlled device and receiving a response message result variable value corresponding to the control message by using a Simple Object Access Protocol SOAP according to the UPnP device architecture when the control point desires to provide a specific service through the controlled device. The eventing process is a process of identifying an information change state of the controlled device which has provided the predetermined service according to a control instruction transmitted from the control point.

The UPnP telephony system includes a telephony service provider a UPnP telephony control point the control point a telephony terminal and an electronic device . The telephony terminal and the electronic device are located in a space in which a communication with the control point can be performed by using a UPNP protocol.

The telephony service provider provides a telephony service and provides the telephony terminal with an interface for transmitting receiving a call.

The UPnP telephony control point is a logical software module for controlling a UPnP telephony server and a UPnP telephony client by using a UPnP action. The UPnP telephony control point may be included in a device such as a PC or a Personal Digital Assistant PDA independently of the telephony terminal and the electronic device but may be included in a physical device such as the telephony terminal or the electronic device . When the UPnP telephony control point is included in a physical device such as the telephony terminal or the electronic device the UPnP telephony control point may directly control the UPnP telephony server or the UPnP telephony client without using a UPnP action.

The UPnP telephony control point determines media a protocol and a transmission format to be used in call transmission reception by using information on a capability of a call data transmission agent included in the UPnP telephony server or the UPnP telephony client . The UPnP telephony control point then generates and transmits a profile including the determined media protocol and transmission format to the UPnP telephony server or the UPnP telephony client to set an environment of a call data transmission agent included in the telephony terminal or the electronic device .

The telephony terminal is a physical device such as a PC including Voice over IP VoIP configured with a Computer Engineering CE device including a telephone or software and a mobile communication terminal connected via a communication network and includes the UPnP telephony server configured with software. Moreover the telephony terminal controls call transmission reception with the telephony service provider providing the telephony service by using an interface provided by the corresponding telephony service provider .

The electronic device is a CE device such as a video phone capable of inputting and outputting voice or a video of a user and may include a physical device such as a PC or a television and includes the UPnP telephony client configured with software. Thus an embodiment of the present invention may enable a user to conveniently transmit and receive a call by using a home network system.

In because the video transmitted to the mobile phone is retransmitted to the television a resolution of the video is optimized to a size of a screen of the mobile phone. When a low resolution video is enlarged and displayed in the television the deterioration of video quality is inevitable.

A configuration protocol of may be specified in a scheme of controlling a mobile phone of a counterpart and receiving or controlling information on a network of the counterpart by using a message in a general scheme of REpresentational State Transfer REST using HyperText Transfer Protocol HTTP .

However when the configuration protocol of the home network telephony service is specified using the REST scheme any person can easily find out an IP address of a REST server of the home network. The person can then arbitrarily access the REST server and make a request for and acquire network information on the home network and control a device connected to the home network by using the acquired network information.

Further the aforementioned problems occur when Short Message Service SMS is used instead of a server in the REST scheme.

Accordingly an aspect of the present invention is designed to solve the above stated problems occurring in the prior art and to provide at least the advantages described below. An aspect of the present invention is to provide a method and an apparatus for authenticating a device making a request for an access to a home network in a home network telephony service.

Another aspect of the present invention provides a method and an apparatus for preventing an unauthenticated device from accessing a home network.

Furthermore the present invention provides a method and an apparatus for providing a legal user with network information only when another user makes a consent.

In accordance with an aspect of the present invention a method of providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal provides a phone communication service by using a first electronic device connected to a home network of the first mobile communication terminal is provided. The method includes transmitting a call initiation request message including an address of the first electronic device and making a request for a phone call connection using the first electronic device in response to the phone call to the second mobile communication terminal receiving a response message in response to the call initiation request message from the second mobile communication terminal and transmitting a call initiation request message including the address of the second electronic device and making a request to the first electronic device to originate a call to the second electronic device when the response message includes information indicating that a call connection waiting is set and an address of a second electronic device connected to a home network of the second mobile communication terminal wherein the call connection waiting is a waiting state for the phone call connection between the second electronic device and the first electronic device without permission of the second mobile communication terminal according to transmission of a call initiation request to the second electronic device by the first electronic device.

In accordance with another aspect of the present invention a method of providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal provides a phone communication service by using a first electronic device connected to a home network of the first mobile communication terminal is provided. The method includes receiving a call initiation request message including an address of a second electronic device connected to a home network of the second mobile communication terminal and making a request for a phone call connection using the second electronic device in response to the phone call from the second mobile communication terminal identifying if a call connection waiting is set transmitting a call connection waiting request message including the address of the second electronic device to the first electronic device when the call connection waiting is set and transmitting a response message including information indicating that the call connection waiting is set and an address of the first electronic device to the second mobile communication terminal wherein the call connection waiting is a waiting state for the phone call connection between the first electronic device and the second electronic device without permission of the first mobile communication terminal according to transmission of a call initiation request to the first electronic device by the second electronic device.

In accordance with another aspect of the present invention a method of providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal switches the phone call to a first electronic device connected to a home network of the first mobile communication terminal to provide a phone communication service. The method includes transmitting a home network telephony service initialization message including first identification information on the first mobile communication terminal and a first authentication key used for authentication of the first mobile communication terminal to the second mobile communication terminal receiving a response message including second identification information on the second mobile communication terminal the first authentication key and a second authentication key in response to the home network telephony service initialization message from the second mobile communication terminal transmitting a request message including authentication information using the first authentication key and the second authentication key an address of the first electronic device and the first identification information and making a request for a phone call connection using the first electronic device in response to the phone call to the second mobile communication terminal and connecting the phone call using the first electronic device.

In accordance with another aspect of the present invention a method of providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal switches the phone call to a first electronic device connected to a home network of the first mobile communication terminal to provide a phone communication service is provided. The method includes receiving a home network telephony service initialization message including second identification information on the second mobile communication terminal and a second authentication key from the second mobile communication terminal transmitting a response message including first identification information on the first mobile communication terminal a first authentication key and the second authentication key and responding to the home network telephony service initialization message to the second mobile communication terminal receiving a request message making a request for a phone call connection using a second electronic device connected to a home network of the second mobile communication terminal in response to the phone call and including authentication information using the first authentication key and the second authentication key the second identification information and an address of the second electronic device performing an authentication which identifies the second identification information included in the request message and identifies that the authentication information is included in the request message and connecting a phone call using the first electronic device and the second electronic device when the authentication is successfully performed.

In accordance with another aspect of the present invention a system for providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal provides a phone communication service by using a first electronic device connected to a home network of the first mobile communication terminal is provided. The system includes the first mobile communication terminal for transmitting a call initiation request message including an address of the first electronic device and information on a type of phone communication data to be allocated to the first electronic device and making a request for a phone call connection using the first electronic device in response to the phone call to the second mobile communication terminal receiving a response message in response to the call initiation request message from the second mobile communication terminal and transmitting a call initiation request message including the address of the second electronic device and making a request to the first electronic device to originate a call to the second electronic device when the response message includes information indicating that a call connection waiting is set and an address of a second electronic device connected to a home network of the second mobile communication terminal and the first electronic device for providing the address of the first electronic device according to a request of the first mobile communication terminal and transmitting a call connection request message to the second electronic device to connect a call corresponding to the phone call when receiving the call initiation request message wherein the call connection waiting is a waiting state for the phone call connection between the second electronic device and the first electronic device without permission of the second mobile communication terminal according to transmission of a call initiation request to the second electronic device by the first electronic device.

In accordance with another aspect of the present invention a system for providing a home network telephony service in which a first mobile communication terminal having a phone call connection with a second mobile communication terminal provides a phone communication service by using a first electronic device connected to a home network of the first mobile communication terminal is provided. The system includes the first mobile communication terminal for receiving a call initiation request message including an address of a second electronic device connected to a home network of the second mobile communication terminal and information on a type of phone communication data to be allocated to the second electronic device and making a request for a phone call connection using the second electronic device in response to the phone call from the second mobile communication terminal identifying if a call connection waiting is set transmitting a call connection waiting request message including the address of the second electronic device to the first electronic device when the call connection waiting is set and transmitting a response message including information indicating that the call connection waiting is set and an address of the first electronic device to the second mobile communication terminal and the first electronic device for providing the address of the first electronic device according to a request of the first mobile communication terminal and setting the call connection waiting when receiving the call connection waiting request message and connecting a phone call with the second electronic device without permission of the first mobile communication terminal when receiving a call connection request message from the second electronic device.

Hereinafter various embodiments of the present invention will be described in detail with reference to the accompanying drawings. In the following description the same elements will be designated by the same reference numerals although they are shown in different drawings. Further in the following description of the present invention a detailed description of known functions and configurations incorporated herein will be omitted when it may make the subject matter of the present invention rather unclear.

The present invention authenticates both end telephony terminals and enhances a security of a home network when network information is provided to the both end telephony terminals in order to switch a phone call to the home network in a home network telephony service in which a telephony terminal having the phone communication connection switches the phone call to electronic devices existing in the home network and providing the telephony service through the electronic device in the home network.

To this end when the home network telephony service is started an embodiment of the present invention exchanges authentication information on both end telephony terminals or transmits authentication information to a phone communication counterpart together with home network information when the phone communication counterpart makes a request for the home network information or a response to the request of the home network information from the phone communication counterpart is made the received authentication information is authenticated and continues the service when the received authentication information is successfully authenticated. Identification information or authentication key of the telephony terminal may be used as the authentication information. The authentication information may be transmitted received through a short text message or a REST message. Further embodiments of the present invention may be applied to various middleware used in various home networks but an embodiment of the present invention will be described based on an example of a home network using the UPnP.

Referring to the telephony terminal includes a CP an authentication module a telephony controller a transmitter receiver a storage unit a user input unit . Further the telephony terminal may additionally include a REST server client .

The telephony controller controls an operation according to a telephony communication and performs an operation for providing the home network telephony service according to a control of the control point module . The telephony controller may perform at least one communication call among a mobile communication wired phone communication and VoIP. The telephony controller according to the embodiment of the present invention may also include an SMS transmission reception module .

The transmitter receiver transmits and receives messages or data to and from a network or other devices transfers the received message or data to the telephony controller and transmits a message or data input in the telephony controller . The transmitter receiver supports the mobile communication or IP communication.

The storage unit stores a program for processing and controlling the telephony terminal reference data various renewable storage data and the like and provides the stored program and data to a working memory of the telephony controller and the control point module . The storage unit may store various home network information. For example the home network information includes a list of home network devices an address of a home network device and detailed information on a home network device.

The user input unit is a device for providing an input interface between a user and the telephone terminal and includes for example a keypad and a touch screen. Further the user input unit may include a microphone or a camera.

The control point module is a software module for controlling a telephony server and a telephony client by using UPnP. The telephony control point module may be included in another device separated from the telephony terminal but it is assumed that the telephony control point module is included in the telephony terminal in the embodiment of the present invention.

The control point module decides on media a protocol and a transmission format to be used in call transmission and reception using information on a capability of a call data transmission agent included in the telephony controller . The control point module generates a profile in which the decided media protocol and transmission format are defined and transmits the generated profile to a home network device including a UPnP telephony client or a UPnP telephony server to set an environment of the call data transmission agent included in the telephony terminal or the home network device. The home network device including the UPnP telephony client or the UPnP telephony server includes for example a television and a PC.

The control point module controls operations of various elements included in the telephony terminal in order to provide the home network telephony service according to the present invention. That is the control point module controls the REST server client or the telephony controller to generate various messages for providing the home network telephony service and transmit the generated messages through the transmitter receiver . The control point module ensures makes the various messages received through the transmitter receiver are processed in relevant elements. Moreover the control point module controls the authentication module to perform a process of generating and authenticating an authentication key.

The authentication module generates an authentication key under a control of the control point module and authenticates an authentication key transferred from another device. According to an embodiment of the present invention the authentication key may use random numbers.

The REST server client is a type of an IP based server client which can be included in the telephony terminal for support of the home network telephony service and generates and processes various messages necessary for providing the home network telephony service under a control of the control point module . In another embodiment of the present invention the REST server client may be substituted with another type of IP based server client.

The telephony terminal may be implemented in various devices such as a mobile communication terminal a PC and a PDA but it is assumed that the telephony terminal is a mobile communication terminal in the embodiment below. Accordingly the mobile communication terminal described in the following embodiment is similar to the telephony terminal.

Referring to mobile communication terminals and used by a user include REST servers and which is a type of HTTP server as well as modules and capable of transmitting receiving a short message of a counterpart. Authentication modules and within the mobile communication terminals and serve to authenticate whether control signals or devices transferred through the short message or the REST message are transmitted to an authenticated transmission device. Phone communication modules and and SMS transmission reception modules and correspond to the telephony controller of the telephony terminal illustrated in .

That is in a state in which a phone call for mobile communication between the first mobile communication terminal and the second mobile communication terminal is connected step when the first mobile communication terminal would like to switch a phone call to the home network telephony service the control point module must acquire network information on a home network having a phone call connection with the second mobile communication terminal .

Accordingly in step the control point module transmits an address request message for the REST server to the second mobile communication terminal by using the SMS transmission reception module . The address request message corresponds to a type of an initiation message of the home network telephony service and includes identification information e.g. a telephone number on the first mobile communication terminal .

When the second mobile communication terminal receives the address request message the second mobile communication terminal determines whether the identification information i.e. the telephone number included in the address request message for the REST server is identical to a telephone number of the first mobile communication terminal having a phone call connection in step through the authentication module under the control of the control point module . The second mobile communication terminal is aware of the telephone number of the first mobile communication terminal in advance according to the connection of the phone call. As a result of the identification when the identification information i.e. the telephone number is identical to the telephone number of the first mobile communication terminal the control point module configures an address response message including a Uniform Resource Identifier URI address of the REST server and transmits the configured address response message by using the SMS transmission reception module to the first mobile communication terminal in step . The address response message includes identification information e.g. a telephone number on the second mobile communication terminal .

When the first mobile communication terminal receives the address response message in step the first mobile communication terminal determines whether the identification information i.e. the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . When the identification information i.e. the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal the first mobile communication terminal processes the address response message as an effective message.

The control point module of the first mobile communication terminal then controls the REST server client configures a device search request device control message for the device connected to the home network and transmits the device search request device control message to the second mobile communication terminal in step . The device search request device control message includes the telephone number of the second mobile communication terminal .

When the second mobile communication terminal receives the device search request device control message the second mobile communication terminal determines whether the telephone number included in device search request device control message is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . As a result of the identification when the telephone number included in device search request device control message is identical to the telephone number of the first mobile communication terminal the control point module configures a response message including a device list device control event by using the REST server client and transmits the configured response message to the first mobile communication terminal in step . The response message includes the telephone number of the second mobile communication terminal .

When the first mobile communication terminal receives the response message in step the first mobile communication terminal determines whether the telephone number included in the response message is identical to the telephone number of the second mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . When the telephone number included in the response message is identical to the telephone number of the second mobile communication terminal the first mobile communication terminal processes the response message as an effective message.

When the first mobile communication terminal is in a telephone call connection state with the second mobile communication terminal in step the first mobile communication terminal searches for a telephony device of the home network to which the first mobile communication terminal currently belongs by using the included control point module in steps and . The telephony device may be a first television .

The first mobile communication terminal makes a request for an IP address of the REST server of the second mobile communication terminal by using the short message in step . The first mobile communication terminal may get the IP address of a counterpart by using a Network Address Book NAB service without using the short message. An address request message includes the telephone number of the first mobile communication terminal .

The second mobile communication terminal determines whether the telephone number included in the address request message for the REST server is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . When the telephone number included in the address request message for the REST server is not identical to the telephone number of the first mobile communication terminal the second mobile communication terminal either ignores the address request message or transmits an error message.

When the telephone number included in the address request message for the REST server is identical to the telephone number of the first mobile communication terminal the second mobile communication terminal transfers the IP address of the REST server of the second mobile communication terminal to the first mobile communication terminal by using the short message. An address response message including the IP address includes the telephone number of the second mobile communication terminal .

When the first mobile communication terminal receives the address response message the first mobile communication terminal determines whether the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . When the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal the first mobile communication terminal processes the address response message as an effective message. However when the telephone number included in the address response message is not identical to the telephone number of the second mobile communication terminal the first mobile communication terminal either ignores the address request message or transmits an error message.

When the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal as a result of the identification the first mobile communication terminal makes a request for information on the UPnP device list of the counterpart home network to the second mobile communication terminal by using the REST message in step . A home network device list request message includes the telephone number of the first mobile communication terminal .

The first mobile communication terminal adds the IP address of the REST server of the second mobile communication terminal to an address book of the first mobile communication terminal so that it does not again transmit the short message in the future. When the IP address of the REST server is changed the second mobile communication terminal transmits the error message serving as the response to step and transfers the IP address by using the short message again.

The second mobile communication terminal receiving the request for the information on the UPnP device list of the home network in step authenticates the first mobile communication terminal by using the telephone number included in the home network device list request message.

When the second mobile communication terminal successfully authenticates the first mobile communication terminal the second mobile communication terminal searches for a UPnP device within the home network by using an M SEARCH message according to a scheme defined in the UPnP Telephony DA 1.1 in steps and . The found device connected to the home network may be for example a second television . The second mobile communication terminal then transfers information on the home network device to the first mobile communication terminal in step . The home network device list response message including the list of the home network devices includes the telephone number of the second mobile communication terminal .

The processes up to step are preparatory processes for connection of the high definition home network telephony service and the processes after step are operated after a user actually controls the device for the high definition home network telephony service.

In step the first mobile communication terminal receiving the home network device list authenticates the second mobile communication terminal by using the telephone number included in the home network device list response message and determines if the home network device list response message is effective. When it is determined that the home network device list response message is effective the first mobile communication terminal selects the home network device i.e. the first television for providing the home network telephony service according to the selection of the user in step . The first mobile communication terminal then acquires an SIP URI address of the first television in steps and .

The first mobile communication terminal transfers the SIP URI address of the first television to the second mobile communication terminal by using the REST message for performing the home network telephony service in step . A call initiation request message including the SIP URI address of the first television is a message requesting a call switch according to the provision of the home network telephony service. The call initiation request message includes the telephone number of the first mobile communication terminal .

The second mobile communication terminal receiving the call initiation request message in step determines whether the call initiation request message is transferred from an appropriate user in step . That is the second mobile communication terminal determines whether the telephone number included in the call initiation request message is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step .

As a result of the authentication when the second mobile communication terminal determines that the call initiation request message is appropriate the second mobile communication terminal selects a device e.g. the second television to perform the home network telephony service according to an input of the user in step . The second mobile communication terminal then generates the call initiation request message i.e. EnhancedInitiatecall TVI s SIP URI for the initiation of the home network telephony service and transfers the address of the first television to the second television in step .

The second television transfers a response indicating whether the call initiation request message received in step is normally processed to the second mobile communication terminal in step . The second mobile communication terminal configures a response indicating whether the received call initiation request message is normally processed in response to the request made in step according to the contents of the response in step and transfers the configured response to the first mobile communication terminal in step .

In step the first mobile communication terminal and the second mobile communication terminal modify the phone call. For example the phone call is set such that a voice communication is maintained through the first mobile communication terminal and the second mobile communication terminal and video according to the phone communication is transmitted and received through the first television and the second television in step . The first television and the second television are connected through the home network and a backbone network connected to the home network. The voice communication and the video communication are processed with one session.

In the embodiment an example of the case in which the short message is used along with the REST message has been described. However steps and may be performed through the short message according to another embodiment of the present invention. The short message transmitted to the second mobile communication terminal in step may include information indicating an initialization message for the home network telephony service and the telephone number of the first mobile communication terminal instead of information making the request of the address of the REST server. Moreover the short message transmitted to the first mobile communication terminal in step may include content of the response to the initialization message and the telephone number of the second mobile communication terminal . Even if the message used in steps and is the short message content included in the corresponding message may be the same as the aforementioned content.

A process of providing the home network telephony service according to different embodiments of the present invention will be described with reference to . It is assumed that an additional authentication key in addition to identification information of a corresponding mobile communication terminal is used as authentication information in the second embodiment of the present invention.

The authentication modules and in the mobile communication terminals and authenticate whether control signals or devices transferred through the short message or the REST message are transmitted to an authenticated transmission device. The phone communication modules and and the SMS transmission reception modules and correspond to the telephony controller of the telephony terminal illustrated in .

Referring to when the first mobile communication terminal is in a telephone call connection state with the second mobile communication terminal for the mobile communication in step the first mobile communication terminal desires to switch a phone call to the home network telephony service the control point module must acquire network information on the home network connected with the second mobile communication terminal .

Accordingly in step the control point module transmits an address request message for the REST server to the second mobile communication terminal by using the SMS transmission reception module . The address request message corresponds to a type of an initiation message of the home network telephony service and includes identification information e.g. a telephone number and an authentication key R on the first mobile communication terminal . The authentication key Rmay be random numbers and is generated by the authentication module .

When the second mobile communication terminal receives the address request message the second mobile communication terminal determines whether the identification information i.e. the telephone number included in the address request message for the REST server is identical to a telephone number of the first mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . The second mobile communication terminal has been aware of the telephone number of the first mobile communication terminal in advance according to the connection of the phone call. As a result of the identification when the identification information i.e. the telephone number is identical to the telephone number of the first mobile communication terminal the control point module generates an authentication key Rthrough the authentication module . The authentication key Rmay be random numbers.

The control point module configures an address response message including a URI address of the REST server and identification information of the second mobile communication terminal e.g. a telephone number the authentication key R and the authentication key R and transmits the configured address response message by using the SMS transmission reception module to the first mobile communication terminal in step .

When the first mobile communication terminal receives the address response message in step the first mobile communication terminal determines whether the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . Moreover the first mobile communication terminal determines whether the authentication key Rgenerated in step is included in the address response message. As a result of the identification when the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal and the authentication key Rgenerated in step is included in the address response message the first mobile communication terminal processes the address response message as the effective message.

The control point module of the first mobile communication terminal then controls the REST server client configures a device search request device control message for the device connected to the home network and transmits the device search request device control message to the second mobile communication terminal in step . The device search request device control message includes the telephone number of the first mobile communication terminal and hash values of the authentication key Rand the authentication key Rshared through the steps and .

When the second mobile communication terminal receives the device search request device control message the second mobile communication terminal authenticates the first mobile communication terminal by using the telephone number included in a device search request device control message and the hash values of the authentication key Rand the authentication key Rthrough the authentication module under the control of the control point module . When the second mobile communication terminal successfully authenticates the first mobile communication terminal the control point module configures a response message including a device list device control event by using the REST server client and transmits the configured response message to the first mobile communication terminal in step . The response message includes the telephone number of the second mobile communication terminal and the hash values of the authentication key Rand the authentication key R.

When the first mobile communication terminal receives the response message in step the first mobile communication terminal authenticates the second mobile communication terminal by using the telephone number and the hash values of the authentication key Rand the authentication key Rincluded in the response message through the authentication module under the control of the control point module . When the first mobile communication terminal successfully authenticates the second mobile communication terminal the first mobile communication terminal processes the response message as an effective message.

When the first mobile communication terminal is in a telephone call connection state with the second mobile communication terminal in step the first mobile communication terminal searches for a telephony device of the home network to which the first mobile communication terminal currently belongs by using the included control point module in steps and . The telephony device may be the first television .

The first mobile communication terminal makes a request for an IP address of the REST server of the second mobile communication terminal by using the short message in step . The first mobile communication terminal may get the IP address of a counterpart by using a Network Address Book NAB service without using the short message. An address request message includes the telephone number and the authentication key Rof the first mobile communication terminal .

The second mobile communication terminal determines whether the telephone number included in the address request message for the REST server is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step through the authentication module under the control of the control point module . When the telephone number included in the address request message for the REST server is not identical to the telephone number of the first mobile communication terminal the second mobile communication terminal ignores the address request message or transmits an error message.

When the telephone number included in the address request message for the REST server is identical to the telephone number of the first mobile communication terminal the second mobile communication terminal generates the authentication key Rthrough the REST server . The authentication key Rmay be random numbers. The second mobile communication terminal configures an address response message including a URI address of the REST server and the identification information e.g. the telephone number the authentication key R and the authentication key R of the second mobile communication and transmits the configured address response message to the first mobile communication terminal by using the SMS transmission reception module in step .

When the first mobile communication terminal receives the address response message the first mobile communication terminal determines whether the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal in the phone communication connection in step through the authentication module under the control of the control point module . Further the first mobile communication terminal determines whether the authentication key Rgenerated in step is included in the address response message. As a result of the identification when the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal and the authentication key Rgenerated in step is included in the address response message the first mobile communication terminal processes the address response message as an effective message. However when the telephone number included in the address response message is not identical to the telephone number of the second mobile communication terminal the first mobile communication terminal either ignores the address request message or transmits an error message.

The first mobile communication terminal adds the IP address of the REST server of the second mobile communication terminal to an address book of the first mobile communication terminal so that it does not transmit the short message in the future again. When the IP address of the REST server is changed the second mobile communication terminal transmits the error message serving as the response to step and transfers the IP address by using the short message again.

As a result of the identification when the telephone number included in the address response message is identical to the telephone number of the second mobile communication terminal the first mobile communication terminal makes a request for information on the UPnP device list of a counterpart home network to the second mobile communication terminal in step by using the REST message. A home network device list request message includes the telephone number of the second mobile communication terminal and the hash values of the authentication key Rand the authentication key Rshared through steps and .

The second mobile communication terminal receiving the home network device list request message in step authenticates the first mobile communication terminal by using the telephone number included in the home network device list request message and the hash values of the authentication key Rand the authentication key Rin step . That is the second mobile communication terminal determines whether the telephone number included in the home network device list request message is identical to the telephone number of the first mobile communication terminal and identifies the authentication key Rand the authentication key Rfrom the hash values of the authentication key Rand the authentication key R.

When the second mobile communication terminal successfully authenticates the first mobile communication terminal the second mobile communication terminal searches for a UPnP device within the home network by using an M SEARCH message according to a scheme defined in the UPnP Telephony DA 1.1 in steps and . The found device connected to the home network may be a second television . The second mobile communication terminal then transfers information on the home network device to the first mobile communication terminal in step . The home network device list response message including the list of the home network devices includes the telephone number of the second mobile communication terminal and the hash values of the authentication key Rand the authentication key R.

The steps up to step are preparatory steps for connection of the high definition home network telephony service and the steps after step are operated after a user actually controls the device for the high definition home network telephony service.

In step the first mobile communication terminal receiving the home network device list authenticates the corresponding home network device list response message as an effective message by using the telephone number and the hash values of the authentication key Rand the authentication key Rincluded in the home network device list response message.

The first mobile communication terminal then selects the home network device i.e. the first television for providing the home network telephony service according to the selection of the user in step . The first mobile communication terminal then acquires an SIP URI address of the first television in steps and .

The first mobile communication terminal transfers the SIP URI address of the first television to the second mobile communication terminal by using the REST message for performing the home network telephony service in step . A call initiation request message including the SIP URI address of the first television is a message requesting a call switch according to the provision of the home network telephony service. The call initiation request message includes the telephone number of the first mobile communication terminal and the hash values of the authentication key Rand the authentication key R.

The second mobile communication terminal receiving the call initiation request message in step determines whether the call initiation request message is transferred from an appropriate user in step . That is the second mobile communication terminal determines whether the telephone number included in the call initiation request message is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step and identifies the hash values of the authentication key Rand the authentication key R.

As a result of the authentication when the second mobile communication terminal determines that the call initiation request message is appropriate the second mobile communication terminal selects a device e.g. the second television to perform the home network telephony service according to an input of the user in step . The second mobile communication terminal then transfers the address of the first television to the second television by sending a call initiation message for the initiation of the home network telephony service to the second television in step .

The second television transmits a response indicating whether the call initiation message received in step has been processed normally to the second mobile communication terminal in step . The second mobile communication terminal configures a response indicating whether the received call initiation message has been processed normally in response to the request made in step according to contents of the response in step and transfers the configured response to the first mobile communication terminal in step .

In step the first mobile communication terminal and the second mobile communication terminal modify the phone call. For example it is set such that a voice communication is maintained through the first mobile communication terminal and the second mobile communication terminal and the video according to the phone communication is transmitted received through the first television and the second television in step in step . The first television and the second television are connected through the home network and a backbone network connected to the home network. The voice communication and the video communication are processed with one session.

In the embodiment an example of the case where the short message is used along with the REST message has been described. However steps and may be performed through the short message as illustrated in .

The short message transmitted to the second mobile communication terminal in step may include information indicating an initialization message for the home network telephony service the telephone number of the first mobile communication terminal and the authentication key R instead of information making the request of the address of the REST server. Moreover the short message transmitted to the first mobile communication terminal in step may include contents of the response to the initialization message the telephone number of the second mobile communication terminal the authentication key RA and the authentication key R.

Even when the message used in steps and is the short message contents or information included in the corresponding message may be the same as in steps and .

The process illustrated in is similar to that of but differs in that steps and use the short message. A short message transmitted to the second mobile communication terminal in step may include information indicating an initialization message for the home network telephony service the telephone number of the first mobile communication terminal and the authentication key Rinstead of information making the request of the address of the REST server. Further the short message transmitted to the first mobile communication terminal in step may include contents of the response to the initialization message the telephone number of the second mobile communication terminal the authentication key RA and the authentication key R.

Even if the message used in steps and is the short message contents or information included in the corresponding message may be the same as steps and of and the processing procedure is similar to except for the usage of the SMS transmission reception modules and .

Next a process of providing the home network telephony service according to an embodiments of the present invention will be described with reference to . It is assumed in the third embodiment of the present invention that the mobile communication terminals to provide the home network telephony service authenticate each other as illustrated in the first and second embodiments of the present invention.

Call connection to the televisions and is waiting in advance such that the connection between the mobile communication terminals and the second mobile communication terminal and the home network devices i.e. the televisions and subject to the a call switch is rapidly performed. A detailed process will be described with reference to . illustrate an example in which the first mobile communication terminal making a request for a call switch for the home network telephony service makes a request for a call connecting waiting to the second mobile communication terminal and illustrates an example in which the first mobile communication terminal performs the call connection waiting.

Referring to the first mobile communication terminal and the second mobile communication terminal perform an initialization process for the home network telephony service in step . The initialization process for the home network telephony service is a process of initiating the home network telephone service between two phone communication connected communication terminals and setting a home network telephony service environment. For example the initialization process for the home network telephony service corresponds to steps to steps to or steps to .

When the initialization process for the home network telephony service is completed the first mobile communication terminal acquires an SIP URI address from one network device i.e. the first television corresponding to a selection of the user in order to provide the home network telephony service in steps and .

The first mobile communication terminal transfers the SIP URI address of the first television to the second mobile communication terminal by using the short message for performing the home network telephony service in step . A call setting request message including the SIP URI address of the first television is a message for making a request for an environment set up according to the provision of the home network telephony service and includes the telephone number of the first mobile communication terminal and the hash values of the authentication key Rand the authentication key R. Further the call setting request message according to the third embodiment of the present invention includes a value of a cookie for a call connection waiting request and a call connection waiting.

The second mobile communication terminal receiving the call setting request message in step determines whether the call setting request message is transmitted from an appropriate user in step . That is the second mobile communication terminal determines whether the telephone number included in the call setting request message is identical to the telephone number of the first mobile communication terminal and identifies the hash values of the authentication key Rand the authentication key R.

As a result of the identification when the second mobile communication terminal determines that the call setting request is appropriate the second mobile communication terminal acquires the SIP URI address from a device i.e. the second television to perform the home network telephony service according to an input of a user in steps and .

The second mobile communication terminal then transmits a call connection waiting request message to the second television in step . The call connection waiting request message includes a value of a cookie for waiting of the received call connection.

When the second television successfully receives the call connection waiting request message the second television transmits a response to the call connection waiting request message to the second mobile communication terminal in step .

The second mobile communication terminal responds indicating that an environment setting for providing the home network telephony service has been completed to the first mobile communication terminal in step . A response message includes the SIP URI address of the second television .

Accordingly the first mobile communication terminal transmits a call initiation request message to the first television according to the home network telephone service in step . The call initiation request message includes the SIP URI address of the second television a type of call and the value of the cookie for the call connection waiting of step .

The first television makes a request for a call connection to the second television according to the home network telephony service in step . A call connection request message includes the value of the cookie for the call connecting waiting of step .

The second television compares the value of the cookie included in the message received in step and the value of the cookie received along with the call connection waiting request message in step . When the value of the cookie included in the message received in step is identical to the value of the cookie received along with the call connection waiting request in step the second television directly connects the phone call with the first television to perform the communication in step without receiving a connection authentication from the second mobile communication terminal .

As described above according to the setting of the call connection waiting request it is possible to omit a step of authenticating every call connection by the user or reduce resources used for authenticating the call connection in the mobile communication terminal.

In the first mobile communication terminal and the second mobile communication terminal perform an initialization step for the home network telephony service in step . The initialization step for the home network telephony service correspond to steps to steps to or steps to .

When the initialization step for the home network telephony service is completed the first mobile communication terminal acquires an SIP URI address from one network device i.e. the first television corresponding to a selection of the user in order to provide the home network telephony service in steps and .

The first mobile communication terminal transmits a call connection waiting request message to the first television in step . The call connection waiting request message includes a value of a cookie for a call connection waiting.

The first mobile communication terminal transfers the SIP URI address of the first television to the second mobile communication terminal by using the short message for performing the home network telephony service in step . A call initiation request message including the SIP URI address of the first television is a message for making a request for a call initiation for the provision of the home network telephony service and includes the telephone number of the first mobile communication terminal and the hash values of the authentication key Rand the authentication key R. Further the call initiation request message according to the third embodiment of the present invention includes a value of a cookie for a call connection waiting.

The second mobile communication terminal receiving the call initiation request message in step determines whether the call initiation request message is transmitted from an appropriate user in step . That is the second mobile communication terminal determines whether the telephone number included in the call initiation request message is identical to the telephone number of the first mobile communication terminal having the phone communication connection in step and identifies the hash values of the authentication key Rand the authentication key R.

As a result of the identification when the second mobile communication terminal determines that the call initiation request is appropriate the second mobile communication terminal transmits a call initiation message for initiation of the home network telephony service to a device i.e. the second television to perform the home network telephony service according to an input of a user in step . The call initiation message includes the address of the first television and the value of the cookie for the call connection waiting received in step .

When the second television successfully receives the call connection waiting request message the second television transmits a response to the call connection waiting request message to the second mobile communication terminal in step .

The second television makes a request for the call initiation according to the home network telephony service to the first television in step . A call initiation request message includes the value of the cookie for the call connection waiting of step .

In step the first television compares the value of the cookie included in the message received in step and the value of the cookie received along with the call connection waiting request message in step . When the value of the cookie included in the message received in step is identical to the value of the cookie received along with the call connection waiting request message in step the first television directly connects the phone call with the second television to perform the communication in step without receiving a connection authentication from the first mobile communication terminal .

As described above according to the setting of the call connection waiting request it is possible to omit a process of authenticating every call connection by the user or reduce resources used for authenticating the call connection in the mobile communication terminal.

According to another embodiment of the present invention even when the initialization process for the telephony service by using the authentication information which is illustrated in the first or second embodiment is not performed the process illustrated in may be performed. That is even when the initialization process of the telephony service is performed by using the address request message the initialization message or the device list request message and the response message with respect to the aforementioned messages including no authentication information the process illustrated in may be performed.

In it is assumed that the mobile communication terminals and have a phone communication connection and home network devices subject to the switch of the phone call are televisions and . illustrates an example in which the second mobile communication terminal performs the call connection waiting and illustrates an example in which the first mobile communication terminal performs the call connection waiting.

Referring to the first mobile communication terminal and the second mobile communication terminal perform the initialization process for the home network telephony service in step . The initialization process for the home network telephony service corresponds to steps to steps to or steps to . Otherwise the initialization process of step may include using no authentication information according to another embodiment of the present invention.

When the initialization process for the home network telephony service is complete the first mobile communication terminal acquires an SIP URI address from one network device i.e. the first television corresponding to a selection of the user in order to provide the home network telephony service in steps and .

The first mobile communication terminal transfers the SIP URI address of the first television to the second mobile communication terminal by using the short message for performing the home network telephony service in step . A call initiation request message including the SIP URI address of the first television is a message for making a request for an environment setting for the provision of the home network telephony service and includes information regarding a call type. Further the call initiation request message includes a call connection waiting request according to the third embodiment of the present invention. The information on the call type includes set up information on the call established by the home network telephony service. For example the information on the call type includes a quality of audio and a resolution of video configuring the call provided by the home network telephony service.

The second mobile communication terminal receiving the call initiation request message in step identifies a user preference for the call connection waiting request in step . That is when the home network telephony service is performed the user preference for the omission of a process of receiving a permission for a final call connection from a device including the telephony control point or a user by the home network device subject to the call switch is identified.

The user preference for the call connection waiting request is stored in the second mobile communication terminal in the form of a preference value. Otherwise the second mobile communication terminal displays a message identifying whether to permit or output a guide voice to receive an input of the user regarding whether to permit the call connection waiting request in step . The second mobile communication terminal may receive an input of the selection of the device i.e. the second television to perform the home network telephony service. Otherwise a pre designated device may exist.

Then the second mobile communication terminal acquires the SIP URI address from the device i.e. the second television to perform the home network telephone service in steps and . If the second mobile communication terminal has been aware of the SIP URI address of the second television steps and may be omitted.

As a result of the identification of the user preference in step when the user preference is for the permission of the call connection waiting request the second mobile communication terminal transmits a call connection waiting request message to the second television . The call connection waiting request message includes the SIP URI address of the first television received in step and includes information on the call type.

When the second television successfully receives the call connection waiting request message the second television transmits a response to the call connection waiting request to the second mobile communication terminal .

The second mobile communication terminal responds indicating that an environment setting for providing the home network telephony service to the first mobile communication terminal in step . A response message includes the SIP URI address of the second television and contents of the response to the call connection waiting request. The contents of the response to the call connection waiting request may be a value indicating that the call connection waiting is set according to the permission of the call connection waiting or a value indicating a rejection of the call connection waiting.

When the response message includes the value indicating that the call connection waiting is set the first mobile communication terminal receiving the response message transmits a call initiation request message according to the home network telephony service to the first television in step . The call initiation request message includes the SIP URI address of the second television and the information on the call type.

The first television makes a request for the call connection according to the home network telephony service to the second television in step .

In step the second television compares the SIP URI address of the first television included in the message received in step and the SIP URI address received along with the call connection waiting request in step . When the SIP URI address of the first television included in the message received in step is identical to the SIP URI address received along with the call connection waiting request in step the second television directly connects the phone call with the first television without receiving a connection permission from the second mobile communication terminal to perform the communication in step .

As described above according to the setting of the call connection waiting request it is possible to omit a process of permitting every call connection by the user or reduce resources used for permitting the call connection in the mobile communication terminal.

Referring to when the user rejects the call connection waiting request as a result of the identification of the user preference in step the second mobile communication terminal transmits the call initiation request message to the second television in step . The call initiation request message includes the SIP URI address of the first television received in step and the information on the call type.

When the second television successfully receives the call initiation request message the second television transmits a response to the call initiation request message to the second mobile communication terminal in step .

The second mobile communication terminal responds indicating that an environment setting has been completed for providing the home network telephony service to the first mobile communication terminal in step . The response message includes the SIP URI address of the second television and contents i.e. a value indicating the rejection of the call connection waiting of the response to the call connection waiting request.

The first mobile communication terminal and the second mobile communication terminal modify the phone call when the response message transmitted to the first mobile communication terminal includes the value indicating the rejection of the call connection waiting. For example it is set such that a voice communication is maintained through the first mobile communication terminal and the second mobile communication terminal and the video according to the phone communication is transmitted and received through the first television and the second television .

The second television then transmits the call connection request message according to the home network telephony service to the first television in step and connects the phone call with the first television to perform the communication in step .

Embodiments of the present invention can be implemented by hardware for example a computer software and a combination of the hardware and the software. For example the software can be stored in volatile or non volatile storage devices such as a ROM memories such as a RAM a memory chip a device or an integrated circuit and optically or magnetically recordable and machine readable storage media such as a CD a Digital Versatile Disc DVD a magnetic disk a magnetic tape and the like in re writable or fixed formats. A storage unit which can be included in the mobile communication terminal is an example of a program including instructions for implementation of the embodiments of the present invention or the machine readable storage media suitable for storing the programs. Therefore embodiments of the present invention may include a program that includes a code for implementing the described systems and methods and may further include machine readable storage media for storing such a program. Further the program can be electronically transferred by certain media such as a communication signal transmitted through a wired or wireless connection and embodiments of the present invention further include various equivalents thereof.

While the present invention has been shown and described with reference to certain embodiments and drawings of the portable terminal it will be understood by those skilled in the art that various changes in form and details may be made therein without departing from the spirit and scope of the invention as defined by the appended claims and their equivalents.

