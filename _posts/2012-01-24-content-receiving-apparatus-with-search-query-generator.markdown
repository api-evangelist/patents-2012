---

title: Content receiving apparatus with search query generator
abstract: According to an embodiment, a receiving apparatus includes a memory, a first generator, a second generator, a transmitter, a receiver. The memory stores service information including search criteria set in a memory device and a connection method for connecting with the memory device. The first generator generates a common search query that is a search query expressing search conditions used in searching contents and that includes at least a pair of a common search condition attribute and a common search condition attribute value. The second generator generates a search query according to the search criteria specified in the service information with the use of the generated common search query. The transmitter transmits the generated search query to the memory device based on the connection method specified in the service information. The receiver receives, from the memory device, the attribute information obtained as a result of executing the search query.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08862607&OS=08862607&RS=08862607
owner: Kabushiki Kaisha Toshiba
number: 08862607
owner_city: Tokyo
owner_country: JP
publication_date: 20120124
---
This application is a continuation of PCT international application Ser. No. PCT JP2009 063605 filed on Jul. 30 2009 which designates the United States the entire contents of which are incorporated herein by reference.

In recent years a number of services are available for delivering contents such as pictures or for sharing contents over the Internet. Among such services some services have a single distributor providing contents of various genres while some services are specialized in genres of expertise such as sports news music movies etc. It is anticipated that in the future such services will go on increasing. Besides in addition to the Internet services for providing high quality pictures have also started over a closed IP network called NGN Next Generation Network that has bandwidth assurance. Thus if the conventional broadcasting services such as terrestrial broadcasting services BS broadcasting services or CS broadcasting services are also taken into account then the contents accessible to the users have explosively increased. Moreover due to the increase in the capacity of memory devices and the decrease in the cost thereof the local disks of AV devices which reproduce pictures have become capable of storing an enormous number of contents. Along with such diversification and ubiquitousness of services as well as with an explosive increase in the contents it is becoming extremely difficult for the users to efficiently find out the intended contents. Given such a situation a technology has been developed in which contents that are related to the selected contents are searched for in a local disk or over a network by referring to metadata of those contents and then the display of contents is controlled for example JP A No. 2008 227947 KOKAI .

However in the technology disclosed in JP A No. 2008 227947 KOKAI at the time of searching for contents over a network there is a possibility that the contents cannot be retrieved depending on what type of services are available over the network. That is as far as the search criteria such as acceptable search conditions metadata formats transmission protocols searchable contents genres or search formulae for searching contents or metadata there can be a disparity between the services. Take the example of search conditions. It happens that a particular service allows a search by keywords only but another service allows a search by keywords as well as a search by genres. Moreover even among the services that allow a search by genres it is often the case that the definitions of genres are not the same. Besides it is often the case the services allowing a search by keywords implicitly point to full text searching of metadata. However there are some services which also allow a search by specification of titles synopsis keywords or cast along with the specification of keywords. By taking into account such a variety among the services if an inter service search across a plurality of services is to be performed in a receiving apparatus that receives contents the search formula for searching the intended contents needs to be incorporating the search criteria of all services. However it is not an easy task to project without any discrepancies a search formula for searching the intended contents onto a search formula incorporating the search criteria of all services. Hence when each of a plurality of services has different search criteria the user may not be able to accurately search for the intended contents.

According to an embodiment a receiving apparatus includes a memory a first generator a second generator a transmitter a receiver. The memory is configured to store service information including search criteria set in a memory device and a connection method for connecting with the memory device. The memory device stores attribute information including attributes of contents in a searchable condition and is connectable via a network. The first generator is configured to generate a common search query that is a search query expressing search conditions used in searching contents and that includes at least a pair of a common search condition attribute and a common search condition attribute value. The common search condition attribute has a common mode of expression of a search condition attribute that represents any of the attribute. The common search condition attribute value is a value which can be taken by the common search condition attribute. The second generator is configured to generate a search query according to the search criteria specified in the service information with the use of the generated common search query. The transmitter is configured to transmit the generated search query to the memory device based on the connection method specified in the service information. The receiver is configured to receive from the memory device the attribute information obtained as a result of executing the search query. The attribute information is metadata. The service information further includes a metadata attribute that is an attribute represented by the metadata which can be provided as a result of executing the search query and a metadata description format that is a description format of the metadata includes a search condition attribute representing the metadata attribute that is specifiable as a search condition in the search query includes a search query description format representing a description format of the search query that can be processed by the memory device and includes a metadata attribute conversion table representing a correspondence relationship between the metadata attributes the search condition attributes and the common search condition attributes. The second generator generates the search query that includes the search condition attributes and that is written in the search query description format. The search condition attributes is obtained by conversion of the common search condition attributes included in the common search query with the use of the metadata attribute conversion table.

Exemplary embodiments of a receiving apparatus according to the present invention are described below in detail with reference to the accompanying drawings.

First of all the explanation is given about a hardware configuration of the receiving apparatus according to a first embodiment. The receiving apparatus according to the first embodiment has the hardware configuration of a normal computer that includes a controller such as a CPU Central Processing Unit for controlling the apparatus in entirety a main memory such as a ROM Read Only Memory or a RAM Random Access Memory for storing a variety of data or storing various programs an auxiliary memory such as an HDD Hard Disk Drive or a CD Compact Disk drive device for storing a variety of data such as contents or storing various programs and a bus for interconnecting these components. Besides to the receiving apparatus are connected in a wired or wireless manner a display unit for displaying information an operation input unit such as a keyboard a mouse or a remote controller remote for receiving input of instructions from the user and a communication I F interface for controlling communication with external devices. Herein the communication with external devices is performed via a network such as a LAN Local Area Network an intranet Ethernet registered trademark the Internet a WAN Wide Area Network or an NGN Next Generation Network that is a closed network having bandwidth assurance. The receiving apparatus is implemented as for example a personal computer a digital television a hard disk recorder an STB Set Top Box or a mobile device such as a cellular phone. Such a receiving apparatus obtains contents that are stored in the auxiliary memory or obtains contents from an external device via a network or obtains metadata that represents attribute information including the attributes of the contents and then refers to the metadata for obtaining the contents and then reproduces the contents. Meanwhile in the first embodiment the contents are assumed to represent pictures. However alternatively there can be various other types of contents that represent music pictures books etc.

Explained below are various functions that are implemented in the above mentioned hardware configuration when the CPU of the receiving apparatus runs various programs stored in the main memory or the auxiliary memory. is a diagram illustrating a functional configuration of a receiving apparatus . Herein the receiving apparatus includes a contents metadata displaying unit a selecting unit a second generator an execution control unit an obtaining unit a communicating transmitting receiving unit a metadata accumulation managing unit a contents viewing skipping history accumulation managing unit a service information accumulation managing unit a keyword generation accumulation managing unit a search query execution history accumulation managing unit and a contents metadata displaying unit attribute information accumulation managing unit . Herein the contents metadata displaying unit the selecting unit the second generator the execution control unit the obtaining unit and the communicating unit are generated in the main memory such as the RAM when the CPU runs the programs. The metadata accumulation managing unit the contents viewing skipping history accumulation managing unit the service information accumulation managing unit the keyword generation accumulation managing unit and the search query execution history accumulation managing unit constitute a database management system that is built in the auxiliary memory. Such a system can either have XML databases or have relational databases. Moreover it is not necessary to build only a single database management system. Rather a plurality of database management systems can be built by the combined use of SQLite3 Oracle MySQL and the like. Besides the database management system can be built in a single physical auxiliary memory or a plurality of physical auxiliary memories such as NAS or SAN can be used as the database management system. Besides instead of a database management system if the accumulation managing units include means for obtaining unit information entry that is the data stored in the respective accumulation managing units then the accumulation managing units can be merely configured with a group of files in the CSV format or the like.

The communicating unit is connected to a network and functions as a network interface for communicating with contents delivery servers and that are also connected to the network . In the first embodiment although only a single network interface is provided it is also possible to have a plurality of network interfaces. The contents delivery servers and are memory devices for storing contents or storing metadata of the contents in a searchable condition and have interfaces for sending the contents or the metadata to the receiving apparatus via the network . The interfaces are assumed to have a URL Uniform Resource Locator including the character string of a search query and are assumed to send the metadata in hyper text that is displayed on a Web browser written in HTML HyperText Markup Language . Alternatively the interfaces can be configured to send the metadata in XML Extensible Markup Language documents of the RSS format. Still alternatively the interfaces can be configured to send information on a search query and on metadata which represents the search result of executing that search query using SOAP Simple Object Access Protocol that makes use of the request body and the response body of HTTP. In the first embodiment it is assumed that the contents delivery servers and send the metadata by performing unicast communication of text format based on the TCP HTTP protocol. However it is not the only possible case. For example a search query and the metadata thereof can also be present in the binary format. Besides the communication between the receiving apparatus and the contents delivery servers and is not limited to the unicast communication of text format based on the TCP HTTP protocol. Alternatively the metadata can also be sent using multicast communication. In that case the receiving apparatus makes use of IMGP Internet Group Management Protocol or MLD Multicast Listener Discovery and performs signaling communication to participate in or withdraw from the multicast address to which the metadata is delivered. Meanwhile in although only the two contents delivery servers and are illustrated it is also possible to connect a larger number of contents delivery servers to the network for communicating with the receiving apparatus . In the first embodiment with the aim of making it easier to explain the exemplary case of having different search criteria for searching the contents the explanation is given with reference to only the two contents delivery servers and .

The metadata accumulation managing unit stores therein as common metadata the metadata that differs from service to service and manages the common metadata by means of controlling the operations of storing accessing and deletion with respect to the common metadata. Herein a service represents an entity that stores contents or the metadata of those contents in a searchable condition. Thus with reference to not only the contents delivery servers and represent services but also the metadata accumulation managing unit that stores therein the metadata represents a service. The common metadata points to the metadata having the same display format in the receiving apparatus . For example in the case of contents representing pictures the TV Anytime association has developed standard specifications for a metadata description format which can be used as the common metadata. Alternatively a minimal set of metadata can be defined for the contents metadata displaying unit to use in display and in internal control and that set of metadata can be used as the common metadata. A minimal set of metadata includes for example a contents identifier for identifying contents a title a summary synopsis a length of contents a date of release broadcast information regarding age limit a genre a keyword tag and a service identifier for identifying the source service. As far as the genres are concerned for example subdivisions such as sports entertainment economics or the like have genre codes assigned thereto in advance in a specifiable manner. Meanwhile as the common metadata it is also possible to obtain and use the union of sets of contents included in all target services.

Meanwhile in the case when the metadata accumulation managing unit stores therein the metadata obtained from a plurality of services as the common metadata it is necessary to include at least the service identifiers in the common metadata. Herein the common metadata can be the metadata obtained from the contents delivery servers and or can be generated by the metadata accumulation managing unit from the metadata obtained from the contents delivery servers and . For example when the metadata includes a synopsis the metadata accumulation managing unit performs morphological analysis of the sentences in the synopsis extracts information regarding keywords or character names and generates common metadata in which the extracted information is included and stores that common metadata.

The media type mediaType is information representing a type of contents such as video music books photographs etc. The common metadata can be configured either to include only a single particular media type or to include a value obtained by performing OR concatenation of a plurality of media types. In the example illustrated in the media type is video video . The media subtype mediaSubType is information that is defined for each media type and that represents a granular level of the type of contents. When the media type is video the media subtype can be program information group information representing a set of programs chapter information information representing a single point on the time line in a program segmentation information information representing a single interval on the time line in a program or license information. In the example illustrated in the media subtype is program information programInfo .

Along with the media type mediaType and the media subtype mediaSubType contents identifier contentId contents name name contents explanation synopsis and contents keyword keyword are also defined as the common metadata attributes independent of media type media subtype. The contents identifier contentId is an identifier for identifying the contents. The contents name name represents the name assigned to the contents. The contents explanation synopsis represents the summary or the characteristics of the contents. The contents keyword keyword represents keywords included in the contents. The common metadata attributes described later correspond to the media type video and the media subtype programInfo . In the example illustrated in the program information includes a video format format an age limit parentalRate a genre genre a contents length duration a release broadcast starting date and time startDate a release broadcast ending date and time endDate and a thumbnail image imagePath .

Meanwhile the common metadata can be an object such as a structure or a class in a software program or can be expressed in for example the XML eXtensible Markup Language format as illustrated in .

When the media type is video the program information is not limited to information including the video format format the age limit parentalRate the genre genre the contents length duration the release broadcast starting date and time startDate the release broadcast ending date and time endDate and the thumbnail image imagePath as described above. Rather the program information can include a greater number of common metadata attributes. For example as illustrated in when the common metadata is expressed in the XML format the configuration can be such that the XML schema representing the common metadata can be edited so as to dynamically modify the common metadata attributes that constitute the common contents metadata. Moreover in the first embodiment the configuration is such that the common metadata attributes included in the common contents metadata are defined with two values of media type sub media type. However the definition need not have two values but can also have a single value. Besides if the media type to be used remains limited to program information related to video it is also possible to have a configuration in which the common metadata attributes are not defined with the media type sub media type.

Returning to the explanation with reference to the contents viewing skipping history accumulation managing unit stores therein reproduction history information which includes the history of contents reproduced by the contents metadata displaying unit and skipping history information which indicates the history of skipped reproduction and manages such information by controlling the storing access and deletion with respect to that information. Herein skipping represents a case when contents that are being reproduced are stopped from getting reproduced within a definite period of time. The reproduction history information as well as the skipping history information includes the contents identifier of the target contents for reproduction. Meanwhile when the reproduction history information and the skipping history information are to be managed together in the same table the reproduction history information as well as the skipping history information further includes type information indicating whether the information type points to the reproduction history information or the skipping history information. In contrast when the reproduction history information and the skipping history information are to be managed in separate tables the reproduction history information and the skipping history information may not include the type information. Moreover the reproduction history information as well as the skipping history information further includes a service identifier that is used in identifying the services at the source from which the target contents for reproduction are obtained. However when the metadata stored in the metadata accumulation managing unit includes the service identifier the reproduction history information and the skipping history information may not include the service identifier.

The service information accumulation managing unit stores therein on a service by service basis service information that includes search criteria regarding the target service in which the receiving apparatus searches for contents and that includes a connection method communication protocol access path etc. for establishing connection with that service. The service information accumulation managing unit manages such service information by controlling the operations of storing accessing and deletion of the service information. As the information representing search criteria the service information includes information about the interfaces that are used in obtaining metadata at the time of searching for the contents provided by the service. More particularly the service information is defined on a service by service basis and includes attributes search condition attributes representing metadata attributes that are specifiable as search conditions in search queries and includes values that can be taken by the search condition attributes search condition attribute values unit information genre age limit list of valid values such as evaluation values etc. includes a metadata format representing the description format of metadata that can be provided by the service as the result of executing search queries includes metadata attributes representing attributes of the metadata and includes values that can be taken by the metadata attributes metadata attribute values similar to the search condition attributes unit information genre age limit list of valid values such as evaluation values etc. and includes a search query format representing the description format of search queries that can be processed by the service. As the search query format it is also possible to include search rules such as concatenation methods of search conditions. As the metadata format metadata attribute names corresponding to the common metadata attributes and metadata attribute values corresponding to the common metadata attributes can be maintained in the form of a conversion table or can be maintained by providing the analysis processing in a script language such as Java registered trademark Script Python Perl Ruby or the like. Meanwhile the service information can also include an attribute conversion table that is used in converting the common search condition attributes as well as converting the search condition attributes and the metadata attributes of each service into the common metadata attributes. Similarly the service information can also include an attribute value conversion table that is used in converting the search condition attributes defined on a service by service basis into common search condition attributes. Herein the common search condition attributes point to the search condition attributes having the same display format in the receiving apparatus . The term common is used to integratedly deal with the expressions of the search condition attributes or the search condition attribute values that differ from service to service. The attribute conversion table can either be a correspondence table or be a program written in a script language or the like that represents the correspondence relation between the common search condition attributes the search condition attributes and the metadata attributes of each service and the common metadata attributes. In an identical manner the attribute value conversion table can either be a correspondence table or be a program written in a script language or the like that represents the correspondence relation between the search condition attributes defined on a service by service basis and the common search condition attributes. The manner in which the attribute conversion table and the attribute value conversion table are put to use is described later.

Besides the service information can further include a variety of information such as service identifiers used in identifying the services names of the services display attributes such as icons representing the services authentication attributes such as users IDs or passwords input by the users of the receiving apparatus for using the services subdivisions of genres associated genres of the contents supported by the services and quality of the contents. Meanwhile when it is said that a service supports contents it means that the service stores therein the contents and the corresponding metadata and is able to provide those contents to the receiving apparatus . Moreover instead of the associated genres the service information can include subdivisions of the genres of those contents which are not supported by the corresponding service. Furthermore when a common search condition attribute value of the common search condition attribute corresponds to all contents having attributes thereof specified in the metadata that is stored in a service which has a connection method thereof specified in the service information then the service information can further include the pair of that common search condition attribute and the common search condition attribute value. For example regarding a service that stores the metadata of contents related to news under the assumption that the genre news can be applied in an implicit manner that particular genre and a genre code representing news is included in the service information. Moreover the service information can also include the following information address information such as the URLs of published portal sites IP address families put to use protocols and protocol dependent information HTTP methods or HTTP extension headers that are used . In addition the service information can further include the following information that is statistically obtained from the information stored in the search query execution history accumulation managing unit described later average response time information that includes the average of response time average size information that includes the average of the sizes of metadata and average total count information that includes the average of the number of sets of metadata obtained when a particular search condition such as a genre is specified.

The keyword generation accumulation managing unit stores therein keyword information that represents keywords extracted by the obtaining unit from the metadata and manages the keyword information by means of controlling the operations of storing accessing and deletion with respect to the keyword information. Alternatively a server not illustrated which has an interface for providing keywords appended with statistical information or weight information to the receiving apparatus can be disposed in the network so that the keyword generation accumulation managing unit can obtain the keyword information including those keywords from the server and manage that keyword information. Meanwhile the keyword information can also include the date of extraction of the keywords extraction date and time or the genre codes representing the genres belonging to the contents including the keywords. In that case for example the keyword information can be configured in such a way that it becomes possible to extract the talked about keywords from the contents on a genre by genre basis or to extract the keywords that were of high interest during a certain period for example in the past one week . For example the statistical information represents the frequency of appearance of the keywords which appear in the topics on a genre by genre basis while the weight information represents that higher the interest greater is the weight. Thus by managing the keyword information along with such statistical information or weight information when a search by genre is to be simulatedly performed with respect to a service that does not hold genres in the search condition attributes the second generator described later can obtain the keyword information including those genres from the keyword generation accumulation managing unit .

The search query execution history accumulation managing unit stores therein execution result information that includes the result of execution of search queries executed by the obtaining unit and manages the execution result information by means of controlling the operations of storing accessing and deletion with respect to the execution result information. The execution result information includes for example the latency time response time from the start of executing a search query to the reception of metadata as the response and includes information regarding the number of received sets of metadata. Moreover the search query execution history accumulation managing unit obtains statistical information from execution history information refers to the statistical information and extracts the attribute information of the service for which the search query was executed and stores the attribute information as service information in the service information accumulation managing unit . Herein for example the statistical information represents the average response time from the execution of the search query to the reception of metadata as the response or represents the number of contents that match with the search conditions specified in a search query and that are retained on a service by service basis. Moreover the attribute information of services indicates for example which particular service retains only the contents belonging to particular genres or which service does not retain the contents belonging to particular genres.

The contents metadata displaying unit attribute information accumulation managing unit stores therein attribute information hereinafter referred to as display attribute information that is related to the display at the time when the contents metadata displaying unit displays the contents or the metadata on the display unit and manages the display attribute information by means of controlling the operations of storing accessing and deletion with respect to the display attribute information. Herein the display attribute information includes screen size information indicating the size of a screen aspect ratio information indicating the aspect ratio and format information indicating the format of the contents displayable on the display unit. Besides when the contents metadata displaying unit has a function of controlling the display on a user by user basis the display attribute information can also include information such as age limit information indicating the age limits related to the display control on a user by user basis.

The contents metadata displaying unit includes a first generator that provides a GUI Graphical User Interface for controlling the display of information on the display unit and for processing the operations that are input by the user via the operation input unit as control signals. More particularly the contents metadata displaying unit displays the metadata on the display unit receives the input of operations from the user via the operation input unit identifies the contents selected according to the operation input and reproduces the contents by means of displaying on the display unit. Moreover the contents metadata displaying unit stores in the contents viewing skipping history accumulation managing unit the reproduction history information that includes the history of reproduced contents or the skipping history information that indicates the history of skipped reproduction along with operation history thereof. Furthermore the contents metadata displaying unit generates a screen that enables the user to expressly generate a common search query and displays that screen on the display unit. Herein a common search query has one or more common search conditions for searching the contents intended by the user and represents search queries having the same mode of expression in the receiving apparatus . As described above the term common is used to integratedly deal with the expressions of the search condition attributes or the search condition attribute values that differ from service to service.

In response to the operation input received from the user the first generator of the contents metadata displaying unit generates a common search query that includes the search conditions for searching the contents related to the contents being reproduced or that includes the search conditions expressly specified by the user on the screen illustrated in and outputs the common search query to the selecting unit or to the second generator .

Explained below with reference to is a data configuration of a common search query. As illustrated in a common search query includes a media type mediaType a media subtype mediaSubType names of target common metadata attributes for retrieval target metadata attribute names for retrieval requestField retrieval range retrieval start index from and number of retrievals count a sort key sortKey a sort order sortOrder and a common search condition list predicateBag . The target metadata attribute names for retrieval requestField are expressed in a list format and for example in the example illustrated in four values of name synopsis genre and imagePath are listed. It indicates that as the metadata attributes of the program information video.programInfo when the media type is video only the contents name title the synopsis the genre and the thumbnail image are obtained. The sort key sortKey is a common metadata attribute name used as a sorting condition in sorting. The sort order sortOrder is a sorting condition indicating the order of sorting. In the example illustrated in it is specified that the sort order is in descending order DESC that is in the order of new releases and is specified that the sort key is the release broadcast starting date and time startDate of the common metadata attributes. Moreover in the example illustrated in the common search condition list predicateBag is expressed in the form of a list of OR sets of the common search conditions and the relationship between a plurality of common search conditions is expressed in the form of Boolean expressions. A common search condition predicate constituting the common search condition list predicateBag includes three values namely a common search condition attribute name key an operation operation and a common search condition attribute value value . In the common search condition attribute name a common metadata attribute name is specified. The operation expresses the relationship between the common search condition attribute name and the common search condition attribute value using an inequality sign such as or . Meanwhile in the operation it is possible not only to specify an inequality sign but also to define a reserved keyword such as LIKE representing a partial match in SQL.

For example assume that the values as illustrated in are set in the common search condition list predicateBag and in the common search condition predicate included in the common search condition list predicateBag . In this example as an common search condition attribute name key genre representing the genre is specified and as the common search condition attribute value value thereof a common genre code 0x01010222 representing news reporting is specified. Meanwhile the genre codes having the same mode of expression in the receiving apparatus are referred to as common genre codes. Besides as the common search condition attribute name key keyword representing the keyword is specified and as the common search condition attribute values value thereof major league and Japanese players are specified. Such a common search condition indicates that those contents are searched which have news or sports as their genre and which include major league and Japanese players as keywords. Such a common search condition can be expressed in the form of a Boolean expression as for example illustrated in .

In the first embodiment the common search condition list predicateBag is expressed in the form of a list of OR sets of the common search conditions and the OR sets are subjected to AND concatenation. However the configuration of a common search query is not limited to such a configuration. Rather it is also possible to have a configuration in which as in the case of SQL AND sets or OR sets can be combined in a multistage manner. That is it is also possible to have a configuration that enables implementation of more flexible Boolean expressions. Moreover as in the case of genre codes described above regarding the common search condition attributes for which a certain number of data sets that are expressible as enumeration can be taken as values it is also possible to define a common code set.

Returning to the explanation with reference to the selecting unit obtains the common search query generated via the GUI for example via the screen illustrated in that is provided by the contents metadata displaying unit refers to the service information stored in the service information accumulation managing unit and when the common search condition attributes specified in the common search query include a genre selects a service that has the service information including associated genres equivalent to the common search condition attribute values herein the common genre codes . For example in a common search query if Genre is included as the common search condition attribute and if news reporting is included as the common search condition attribute value of that common search condition attribute then the selecting unit refers to the associated genres included in the service information illustrated in and if one of the associated genres includes a subdivision of genres corresponding to a common search condition attribute value selects the service of that service information as the target service for searching. In contrast if none of the associated genres include a subdivision of genres corresponding to a common search condition attribute value the selecting unit does not select the service having that service information as the target service for searching. Moreover if the genre is not included as a common search condition attribute expressed in the common search query the selecting unit does not select a target service for searching. In this way it can happen that the selecting unit does not select any target service for searching.

Besides regarding the contents displayed on the display unit by the contents metadata displaying unit the selecting unit extracts keywords from the metadata of those contents and generates a common search query by combining the common search condition attributes such as keywords or genres in those contents refers to the service information stored in the service information accumulation managing unit and selects a service that corresponds to at least one of the common genre codes representing the common search condition attribute values corresponding to Genre from among the common search condition attributes and that has the service information including genre subdivisions as associated genres. The common search query can be generated in response to the operation input of the user received through the operation input unit or can be generated at some particular timing. Meanwhile the selecting unit can also select more than one service. In that case based on the degree of matching of the common search condition attribute values or the usage frequencies of the services the selecting unit can perform weighting of the selected services and give out priority information. Herein the degree of matching can be determined for example from a simple match count among a plurality of common condition attribute values such as common genre codes video formats average contents length information or price range information in the case of fee based services. Alternatively the degree of matching can be determined by calculating the extent of matching in a simplistic form by calculating the difference in the average contents length information or the difference in the price range information described above . In order to calculate the usage frequencies of services the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit is referred to. Alternatively it is also possible to have an upper limit for the number of selectable services so that the services over the upper limit are not selected. In that case the services can be selected on the basis of the above mentioned priority information. The service information of the selected services can either be added as a search condition in the common search query or be treated separately from the common search query.

The second generator obtains via the selecting unit the common search query output by the contents metadata displaying unit and generates a search query with respect to each target service for searching by referring to the common search query. At that time the second generator can express the common search query in the form of a Boolean expression of product of sums of the common search conditions and in the case of generating a search query with respect to a service associated with the database management system can use the Boolean expression without modification as a constraint clause in an SQL statement. Moreover when the contents delivery servers and are providing as a service a commonly used basic search function in a WebAPI or the like the second generator can expand the Boolean expression of product of sums described above in a product sum type expression and generate a search query in each product term. Meanwhile as a target service for searching in the case when the selecting unit is able to select a service the selected service becomes the target service for searching. However if the selecting unit is not able to select a service or if the common search query is directly obtained from the contents metadata displaying unit then the second generator can generate a search query with respect to all of the services for which that service information is stored in the service information accumulation managing unit or can randomly select a predetermined number of services and generate a search query for each of the selected service or can select the services by referring to the usage frequencies of services which are obtained from the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit and generate a search query for each of the selected services or can select the services that are selected as the target services for searching by the user by means of an operation input from the operation input unit and generate a search query for each of the selected services. At the time of generating a search query the second generator refers to the attribute conversion table expressing the correspondence relationship between the common search condition attributes and the search condition attributes and refers to a search condition attribute value conversion table expressing the correspondence relationship between the common search condition attribute values and the search condition attribute values and generates search queries from the common search query according to the search query format specified in the service information and thus converts the common search query into search query consistent with the search criteria of the services.

Given below is the explanation about the method of conversion using the attribute conversion table and the attribute value conversion table. is a diagram illustrating a configuration when the attribute conversion table and the attribute value conversion table are configured in an integrated manner. In a represents the attribute conversion table and b represents the attribute value conversion table. Herein the common metadata is assumed to have the data configuration as illustrated in the common search query is assumed to have the data configuration as illustrated in and the service information is assumed to have the data configuration as illustrated in . is a diagram illustrating the common search conditions specified in the common search condition list predicateBag . Regarding the common search conditions illustrated in the second generator converts genre into Category and converts keyword into VQ based on the search condition attributes included in the service information and based on the attribute conversion table illustrated in a of . Moreover based on the search condition attribute values included in the service information and based on the attribute value conversion table illustrated in b of the second generator converts the common genre code 0x01010222 representing news reporting into a character string news . Then the second generator generates a search query as illustrated in .

Meanwhile when the search condition attribute value corresponding to a common genre code specified as the common search condition is not present in the service it can be an option to not include that common genre code as a search condition or to substitute that common genre code by a keyword representing the character string equivalent to the common genre code. For example as an example of a search by genre it is assumed that there is a common search condition as illustrated in but that the search condition attribute value corresponding to a common genre code 0x0102333 representing sports baseball does not exist. In this case based on the attribute value conversion table illustrated in b of the second generator obtains the search attribute name and the search attribute value corresponding to the common genre code 0x0102333 representing sports baseball and in this example converts them into VQ and OR baseball respectively. That is the second generator replaces the search by common genre code with the search by keyword and generates a search query as illustrated in .

Meanwhile it can also happen that the search condition attribute name and the search condition attribute value corresponding to a common genre code do not exist. For example regarding a common genre code 0x01030222 representing music no substitutable keyword is present. Hence in the attribute value conversion table illustrated in b of a null value is specified indicating the facts that the corresponding search condition attribute name and the corresponding search condition attribute value do not exist. In this case on the display unit the second generator can display a message so as to inform the user that the search query cannot be generated using that common genre code. Alternatively from among the keywords represented by the keyword information stored in the keyword generation accumulation managing unit the second generator can search for keywords that match with the search condition attributes and then perform a broad search by keyword using those keywords. Besides if it is the case that the original common search condition that has been specified gets specified when the search condition attributes falling under the common search condition attributes included in the common search query are divided in a plurality of search queries then the second generator can generate a plurality of search queries from the common search query.

The execution control unit determines the execution order of one or more search queries generated by the second generator . At that time the execution control unit can determine the execution order either according to the number of search conditions applied in the search queries or by referring to the usage frequencies of services that are obtained from the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit . Alternatively the execution control unit can determine the execution order either according to the response time obtained from the execution history information stored in the search query execution history accumulation managing unit or according to the statistical information or the weight information that is appended to the keyword information stored in the keyword generation accumulation managing unit . Besides the execution control unit can determine the actual execution order based on a more statically established execution order policy in which for example the services that are associated with the database management system embedded in the receiving apparatus are searched with top priority.

The obtaining unit sends the search queries for which the execution control unit has determined the execution order to the contents delivery servers and and instructs the contents delivery servers and to execute the search queries. Then the obtaining unit sends receives the metadata obtained as the result of search query execution from the contents delivery servers and and performs suitable analysis processing on the metadata to obtain common metadata. At that time the obtaining unit stores in the search query execution history accumulation managing unit the above mentioned execution result information that includes the entire information or the partial information specified in the search queries and that includes the number of received sets of metadata retrieval count . Moreover the obtaining unit analyzes the received metadata by means of morphological analysis extracts keywords and stores in the keyword generation accumulation managing unit keyword information that indicates the keywords and that includes the search conditions specified at the time of obtaining the metadata or includes service identifiers of the target services for searching that are necessary for referring to the service information.

Thus the contents that have the attributes represented by the metadata that is retrieved in the above mentioned manner are the contents matching with the search conditions. That is when the metadata is retrieved by executing a search query in each service it means that the contents matching with the search conditions are retrieved.

Explained below with reference to is the sequence of a metadata obtaining operation performed in the receiving apparatus according to the first embodiment. Herein the explanation is based on the premise that the receiving apparatus has already been switched ON and is in a state of being able to communicate with the contents delivery servers and over the network via the communicating unit . Firstly it is assumed that the contents metadata displaying unit of the receiving apparatus is displaying some contents on the display unit and is reproducing the contents. There for example if the user operates the operation input unit and performs an operation input for searching the contents then a contents search request message is sent to the receiving apparatus as a response to the operation input Step S . At that time the contents search request message can be configured to not include any particular search conditions but to only indicate that request issued to search for contents related to contents being reproduced . Alternatively if an operation input is performed to specify the search conditions such as keywords or genre codes then the contents search request message can be configured to include those search conditions. Moreover the screen illustrated in can be displayed on the display unit of the receiving apparatus and the user can be allowed to operate the operation input unit and perform an operation input to specify the search conditions on the screen being displayed.

Upon receiving the contents search request message in the case when the contents search request message only indicates request issued to search for contents related to contents being reproduced the contents metadata displaying unit of the receiving apparatus obtains the metadata corresponding to the contents being reproduced from the metadata accumulation managing unit Step S and generates the common search query using the metadata corresponding to the contents being reproduced Step S . Meanwhile in the case when the search conditions are explicitly specified in the contents search request message the receiving apparatus generates the common search query using those search conditions.

Subsequently the contents metadata displaying unit outputs the common search query which is generated at Step S to the selecting unit Step S . Herein it is assumed that the common search query is expressed as a Boolean expression as given below in Expression 1 with two genres G1 G2 two keywords K1 K2 and two credits C1 C2 as the search conditions. The Boolean expression of the common search query is referred to as a search formula. Moreover the credits point to the information about concerned people such as characters directors or staff. search formula 12 12 12 Expression 1

This search formula is generated by performing implicit OR concatenation of the contents having the same metadata attributes and performing AND concatenation of OR sets having different metadata attributes. However the method of generating the search formula is not limited to the above mentioned method. Alternatively for example all of the search condition attributes can be subjected to AND concatenation or all of the search condition attributes can be subjected to OR concatenation. Moreover it is also an option to include variations of a plurality of search formulae. For example in the case of subjecting all of the search conditions to AND concatenation it is expected that strict search conditions are applied by which the contents having an extremely high degree of similarity with the contents being reproduced are considered to be search targets and it is expected that the number of hits is small. In contrast in the case of subjecting all of the search conditions to OR concatenation it is sufficient if only a single search condition matches. Thus the search conditions are loose thereby leading to the possibility of a greater number of hits of the contents. The method of generating the above mentioned search formula is at an intermediate position of those two situations.

Subsequently by receiving input of the common search query output at Step S the selecting unit selects target services for searching. More particularly for example when the genre G1 specified as the search condition is specified to be news reporting by the genre code the selecting unit performs an operation to select the services that provide contents related to news. That happens when the selecting unit obtains from the service information accumulation managing unit the service information including genre code G1 as the service attribute. Meanwhile the selecting unit can also select target services for searching by referring to the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit . For example from among the services having high usage frequencies that is from among the services providing contents for which the past reproduction is indicated by the reproduction history information or the skipping history information the selecting unit selects as the target services for searching services having the number of provided contents to be equal to or greater than a predetermined number.

Herein the selecting unit obtains from the service information accumulation managing unit the service information including genre code G1 as the service attribute Step S selects as a target service for searching the contents delivery server hereinafter referred to as service S1 that is a service identified by the service information refers to the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit and selects as a target service for searching the contents delivery server hereinafter referred to as service S2 omitted from and selects as a target service for searching the metadata accumulation managing unit hereinafter referred to as service S3 that serves as a local database service. At that time the selection of the local database service can be considered to have been implicitly specified without fail or can be considered to have been automatically selected by the receiving apparatus in view of the cache status of metadata. Subsequently the selecting unit adds the selected services as service conditions in the search formula given above in Expression 1 and updates the search formula as Expression 2 given below Step S . This search formula corresponds to the common search query. search formula 123 12 12 12 Expression 2

Subsequently to the second generator the selecting unit outputs the service information of the services selected as the target services for searching as well as outputs the common search query Step S . The second generator refers to the common search query which is expressed as the search formula in Expression 2 and refers to the service information output at Step S and expands the common search query to search queries on a service by service basis. Herein when the search query format specified in the service information is specified to be describable as a Boolean expression the second generator generates from the common search query the search queries expressed as Boolean expressions in the form of the search formula in Expression 2 and when the search query format is specified to be not describable as a Boolean expression the second generator performs product term expansion of the Boolean expression and uses each product term for generating a plurality of search queries from the common search query. For example assume that the contents delivery server allows the specification of search conditions using only a URL based on the REST style WebAPI and the contents delivery server allows the specification of only such search conditions which are based on the SOAP style WebAPI but which do not allow Boolean expressions in the HTTP request body. In that case regarding the services S1 and S2 the selecting unit performs product term expansion of the search formula in Expression 2 and uses it to generate the search queries. In contrast regarding the service S3 the selecting unit attempts to generate the search queries by using the search formula in Expression 2 without modification as a constraint clause. Given below are the examples of the result of expansion on a service by service basis from the common search query.

Search Query S3 with Respect to the SQL Based Local Database Service the Metadata Accumulation Managing Unit 

Subsequently the second generator obtains from the service information accumulation managing unit the service information corresponding to each of the services S1 and S2 that have been subjected to product term expansion Step S and converts the common search conditions related to the services S1 and S2 into search queries on service by service basis. At that time since the service S1 implicitly has genre code G1 as a service attribute in the above mentioned first example K1 C1 is the search condition that is actually applied in the search queries. The second generator makes use of those two search conditions and generates search queries to be sent to the contents delivery server Step S . When the credit information C1 is specifiable as a search condition for the contents delivery server serving as the service S1 the second generator generates for example from the above mentioned expansion result a search query as given below.

When the credit information C1 is not specifiable as a search condition for the contents delivery server the second generator considers the credit information to be a keyword and generates for example from the above mentioned expansion result a search query as given below.

Besides if the contents delivery server does not supports the AND search the second generator generates for example from the above mentioned expansion result two divided search queries as given below.

In the first embodiment the explanation is given with reference to genres keywords and credits as the search conditions. In the case of including the retrieval count of metadata that is the execution result of search queries it is necessary to perform expansion by dividing the search queries in an identical manner as described above. More particularly assume that the retrieval count of metadata that is the execution result of search queries is implicitly set to 50 sets. In that case depending on the service there are times when it is possible to obtain only a smaller number of sets of metadata than the 50 sets. At that time for example if the service S1 is providing an interface in which the upper limit of retrieval count is specified to be 25 sets in which the offset of the metadata obtained as the result of executing the search queries is set using from and in which the number of sets is set using count then the second generator generates for example two divided search queries as given below.

As the methods of generating search queries with respect to the service S1 three methods are described above. However those are not the only possible methods. As far as a method of expanding a search query that does not have search conditions equivalent to the common search conditions is concerned that method also can be included in the service information. Meanwhile regarding the service S2 that is selected according to the usage frequency the genre is not implicitly applied as a search condition. In the above mentioned first example of the result of expansion of the common search query related to the service S2 G1 K1 C1 becomes the search condition that is actually applied in a search query. If the service S2 has genre as the search condition attribute the second generator expands the common search query in for example a SOAP message as given below.

In the above mentioned example the explanation is based on the premise that the assigning system of genre codes is shared between the service S1 and the common search query. However in the case when the service S2 has an independent system for genre codes then the service information of the service S2 includes conversion table information that is used in converting the common genre codes such as genre code G1 G2 into genre codes in the system of the service S2. The second generator refers to the conversion table information which is included in the service information stored in the service information accumulation managing unit converts the genre codes in the common system into the genre codes in the independent system of the service S2 and then generates search queries using the converted genre codes. For example assume that corresponding to G1 news reporting the genre code of the service S2 is expressed with a character string News . In that case the search queries expanded by the second generator are as follows extract of only the Body element of SOAP .

As still another variation when the service S2 does not have the genres as the search condition attributes the second generator refers to the keyword information stored in the keyword generation accumulation managing unit and expands the genre codes in keyword groups. More particularly the keyword generation accumulation managing unit stores therein keyword information that represents keywords extracted by the obtaining unit from the metadata by means of morphological analysis and that includes search conditions specified at the time of obtaining the metadata or includes service identifiers of the target services for searching that are necessary for referring to the service information. With that it becomes possible to obtain the keyword information that has genres as search condition attributes as well as to obtain the appearance frequencies in a particular period of time. More particularly it becomes possible to extract from the genre news reporting the keywords having high appearance frequencies of late for example names of politicians under the spotlight of late names of cases that have occurred of late or names of the accused people . When the service S2 cannot specify genres as search conditions the second generator treats the genre codes as keys refers to the keyword information stored in the keyword generation accumulation managing unit and the service information stored in the service information accumulation managing unit and generates a substitute keyword list that is a list of keywords that can be substituted for genres. For example herein assume that news keyword A news keyword B and news keyword C are obtained as keywords that can be substituted for genres. Then the second generator uses those keywords and generates a SOAP message as given below extract of only the Body element of SOAP .

In this example the OR search in the service S2 is implemented by explicitly specifying the character string OR in between the keywords. Such search rules are specified in a portion of the service information as the format of search queries.

Moreover in the first embodiment the explanation is given for a specific example in which the service S1 is a commonly used REST style WebAPI the service S2 is a commonly used SOAP style WebAPI and the search query information is specified in a URL. However for example there are available services which as WebAPIs provide a search interface in SQL format. In the first embodiment such services can also be supported in an identical manner to the generation of search queries with respect to the local database services.

Regarding the search queries corresponding to the service S3 that serves as the local database service the second generator refers to the expansion result S3 G1 G2 K1 K2 C1 C2 of the above mentioned search query and refers to the selected service information replaces S3 with S1 S2 and generates an SQL statement from S1 S2 G1 G2 K1 K2 C1 C2 obtained as the result. Most simply an SQL statement is generated as given below.

The above mentioned SQL statement includes a constraint clause in which keywords and credits are exactly matching. Alternatively it is also possible to change that constraint clause to partial matching or to add the title or the synopsis column to the scope of a search by keyword. This is an expansion method that is required in response to a condition when the keywords provided by a contents delivery server are insufficient if the metadata has not been subjected to processing such as morphological analysis. In this case for example the SQL statement is written as given below.

As described above when the common search query includes a plurality of variations such as a search formula having all of the search conditions subjected to AND concatenation the second generator expands each variation in an identical manner in the search queries on a service by service basis.

Subsequently the second generator outputs the list of generated search queries to the execution control unit Step S . Then the execution control unit determines the execution order of a plurality of search queries output at Step S Step S . In order to determine the execution order for example a method can be implemented in which the search queries having a greater number of search conditions applied thereto are priority for searching at a higher execution order. Assume that all of the search conditions are subjected to AND concatenation. Then while searching for contents related to contents being reproduced although the search results are few the metadata having the highest degree of similarity is obtained. Alternatively a method can be implemented in which the reproduction history information or the skipping history information stored in the contents viewing skipping history accumulation managing unit is referred to and the services having higher usage frequencies are given priority for searching at a higher execution order. Still alternatively a method can be implemented in which the average response time or the average number of obtainable sets of metadata is obtained from the execution result information stored in the search query execution history accumulation managing unit the priority is set based on that information and the execution order is determined in such a way that higher the priority higher the execution order. In the first embodiment the execution control unit determines the execution order based on the number of search conditions that are applied. Then in accordance with the execution order that has been determined the execution control unit sequentially outputs the search queries to the obtaining unit Step S . Alternatively the execution control unit can also output at once a list of the search queries along with execution order information indicating the execution order that has been determined.

The obtaining unit sequentially executes the search queries that have been output at Step S. More particularly the obtaining unit sends the search queries to the local database the metadata accumulation managing unit corresponding to the service S3 to the contents delivery server corresponding to the service S1 and to the contents delivery server corresponding to the service S2. The search with respect to the service S3 is carried out by establishing a connection with the database management system in the metadata accumulation managing unit and by issuing the SQL statement generated as search queries Step S . The search with respect to the service S1 is carried out by sending a HTTP request having a search query in the URL to the contents delivery server via the communicating unit and the network Step S . The searching of the service S2 is carried out by sending a HTTP request having a search query in the URL to the contents delivery server via the communicating unit and the network Step S .

Upon executing the SQL statement and obtaining the metadata the metadata accumulation managing unit sends the metadata back to the obtaining unit Step S . The contents delivery server receives the search query via the network and executes that search query so as to obtain the corresponding metadata and then sends that metadata to the receiving apparatus Step S . In an identical manner the contents delivery server receives the search query via the network and executes that search query so as to obtain the corresponding metadata and then sends that metadata to the receiving apparatus Step S .

Upon receiving the metadata from each of the services S1 S2 and S3 the obtaining unit performs analysis processing on the metadata as necessary. In the case when the metadata accumulation managing unit serving as the service S3 is configured to send the metadata back to the obtaining unit in a common metadata format the analysis processing need not be performed on the metadata obtained from the service S3. However regarding the services S1 and S2 since independent XML based metadata formats are used it is necessary to perform the analysis processing on the metadata obtained from those services. Regarding each of the services S1 and S2 the obtaining unit obtains the service information stored in the service information accumulation managing unit Step S performs analysis processing on the metadata based on the metadata format specified in the service information and converts that metadata into metadata in the common metadata format so as to generate the common metadata Step S . Moreover along with analyzing the received metadata the obtaining unit analyzes particular attributes title or program explanation of the metadata by means of morphological analysis extracts the keywords and stores in the keyword generation accumulation managing unit the keyword information that indicates the keywords and that includes the search conditions specified at the time of obtaining the metadata or includes service identifiers of the target services for searching that are necessary for referring to the service information. Then the obtaining unit outputs the common metadata that has been generated to the contents metadata displaying unit Step S .

The contents metadata displaying unit follows for example the output order of the metadata that has been output at Step S and displays only the displayable number of sets on the display unit Step S . At that time the contents metadata displaying unit refers to the display attribute information stored in the contents metadata displaying unit attribute information accumulation managing unit and displays the metadata on the display unit. Meanwhile when the display format of the metadata is a ticker like format for example a list of the search results is displayed from right to left in an automatically scrolling manner there is no need to restrict the number of sets and the contents metadata displaying unit can sequentially display the metadata that has been output by the obtaining unit . As a result the metadata related to the contents being reproduced or the metadata retrieved in response to explicit search instructions gets displayed on the screen of the display unit.

In this way according to the first embodiment in an environment in which there are an enormous number of target services for searching on the side of the receiving apparatus that receives contents it becomes possible to solve various problems that may occur while executing the search for contents in response to instructions from the user. Firstly in the case when the receiving apparatus performs inter service searches across a plurality of services in real time since the target services for searching are large in number the number of search queries that need to be issued or the total number of sets of metadata that need to be received and processed happen to be enormous. That makes it virtually difficult to carry out inter service searches. Meanwhile in the case when inter service searches are carried out not on the side of the receiving apparatus but on the side of the contents delivery servers it is common practice to cyclically obtain the Web page provided by each service temporarily store the Web pages in a database and then use the metadata in an integrated manner in SQL Structured Query Language . However it is difficult to apply such a configuration to the side of the receiving apparatus. That is because it is not realistic to secure a memory region in the receiving apparatus for storing the metadata obtained cyclically from all of a plurality of services. In contrast in the first embodiment the selecting unit narrows down the target services for searching to an appropriate search scope within which the search can be carried out. That enables achieving a solution to the first problem. That is when the future diversification and ubiquitousness of services that deliver contents is taken into account narrowing down of services in a receiving apparatus as described in the first embodiment makes it possible to perform inter service searches across a plurality of services within the scope of the processing capacity of the receiving apparatus.

Secondly with respect to a plurality of services having different search criteria such as different formats of search queries or different acceptable search conditions it is not an easy task to accurately project the original search formula representing the search conditions for searching the intended contents and it is difficult to maintain the intent of the search according to the original search formula. In that regard the second generator refers to the common search query and expands such search queries on a service by service basis that are as close as possible to the original search formula. That enables achieving a solution to the second problem. That is conventionally at the time of conversion into search queries within the search criteria acceptable by each service there is risk of degeneration in the intent of the search according to the original search formula thereby making it difficult to find the intended contents. Herein the odds that such a situation occurs can be lowered.

Thirdly in the case of issuing search queries from the receiving apparatus with respect to a plurality of services as compared to the case when metadata is received from a single service and is then displayed it takes an extremely long time to post the contents. In that regard by controlling the execution order of the search queries that are expanded from the search formula on a service by service basis it becomes possible to post the contents intended by the user in a more efficient manner. That enables achieving a solution to the third problem.

Given below is the explanation of the receiving apparatus according to a second embodiment. The constituent elements that are in common with the above mentioned first embodiment are referred to by the same reference numerals and the explanation thereof is not repeated.

The detecting unit stores usage availability flags which indicate usage availability of services in a corresponding manner with service information in the service information accumulation managing unit . As far as usage availability of services is concerned for example the detecting unit detects the usage availability by establishing a connection with the services on a periodic basis or by receiving from the services asynchronous notification of usage availability information including the usage availability. In the second embodiment the explanation is not given for a sequence of detecting a condition when a service is unavailable for use. However such detection can be carried out by following an operation sequence that is equivalent to an operation sequence given below regarding the operations starting from detecting connections of services up to reflecting information in the service information accumulation managing unit . However as far as determining whether or not a service is unavailable for use is concerned a method is implemented in which the communication timeout or the number of trials at the time of failure serves as the determination criterion and some kind of a threshold value is set for that determination criterion.

The service information accumulation managing unit stores therein the above mentioned service information in a corresponding manner to the usage availability flags and manages the stored information. Herein the service information stored in the metadata accumulation managing unit has a parent child relationship with the service information stored in each of the metadata accumulation managing units and . That is the service identifier of the metadata accumulation managing unit is set in a parent service identifier specified in the service information stored in each of the metadata accumulation managing units and

Explained below is the sequence of a metadata obtaining operation performed in the receiving apparatus according to the second embodiment. is a flowchart for explaining a sequence of a service detecting operation performed during the metadata obtaining operation for detecting available services. Herein the explanation is based on the premise that the receiving apparatus has already been switched ON and is in a state of being able to communicate with the contents delivery servers to over the network via the communicating unit . As the initial state according to the second embodiment it is assumed on the one hand that the contents delivery servers to are accessible from the receiving apparatus and it is assumed on the other hand that the metadata accumulation managing unit which is built in an external memory device connected to the receiving apparatus by a USB cable and the metadata accumulation managing unit which is built in an NAS device are not yet connected to the receiving apparatus .

Firstly once the external memory device having the metadata accumulation managing unit built therein is connected to the receiving apparatus Step S the communicating unit detects a USB cable connection and notifies the detecting unit that a new external device has been connected Step S . Then the detecting unit confirms whether or not the newly connected external memory device has the metadata accumulation managing unit built therein Step S . Herein whether or not the metadata accumulation managing unit which serves as a database management system is built can be confirmed on the premise that the metadata accumulation managing unit is built over a particular path in the external memory device. Alternatively without setting any particular path such a confirmation can be performed by storing in advance in the service information accumulation managing unit a device identifier used in identifying the newly built metadata accumulation managing unit and a database pass generated at the time of building the metadata accumulation managing unit and then by referring to that information. In the second embodiment upon detecting that the metadata accumulation managing unit has been built the detecting unit updates the usage availability flag which is stored in the service information accumulation managing unit in a corresponding manner to the service information of the metadata accumulation managing unit in such a way that the usage availability flag indicates that the service is in a usable state Step S . As a result in the receiving apparatus the metadata accumulation managing unit is activated as a usable service. In an identical sequence the detecting unit detects that the NAS device is connected to the network and that the metadata accumulation managing unit is in a usable state Steps S to S . Meanwhile as described above the service information of each of the metadata accumulation managing units and that is stored in the service information accumulation managing unit includes the service identifier of the metadata accumulation managing unit as a parent service identifier.

Subsequently in an identical manner to Steps S to S explained with reference to in the above mentioned first embodiment the user operates the operation input unit and performs an operation input for searching the contents and the contents metadata displaying unit of the receiving apparatus receives a contents search request message and generates the common search query. Herein in an identical manner to the first embodiment it is assumed that the generated common search query is expressed as a Boolean expression as given in Expression 1 with two genres G1 G2 two keywords K1 K2 and two credits C1 C2 as the search conditions.

Then in an identical manner to Step S illustrated in the selecting unit receives input of the common search query and selects target services for searching. Herein it is assumed that the selecting unit selects only the local database service assumed to be the metadata accumulation managing unit or identical to the first embodiment assumed to be the service S3 . Subsequently from the metadata accumulation managing unit the selecting unit obtains the service information of the metadata accumulation managing unit and also obtains the sets of service information in each of which the service information of the metadata accumulation managing unit is set as the parent service information. Thus herein the selecting unit obtains the service information of each of the metadata accumulation managing units and which serve as the dependent services with the metadata accumulation managing unit as the parent service. Then in an identical manner to Step S illustrated in the selecting unit adds the selected service as a service condition in the search formula in Expression 1 and updates the search formula as Expression 3 given below. This search formula corresponds to the common search query. search formula 3 12 12 12 Expression 3 Moreover the selecting unit adds the service information of the dependent services in the common search query and outputs to the second generator the common search query appended with that service information.

Meanwhile instead of the second generator performing Step S as described above it is also possible that at the time when the detecting unit detects that the NAS device has been connected to the network and detects that the metadata accumulation managing unit is in a usable state Step S can be performed simultaneously with the updating of the usage availability flag that is stored in the service information accumulation managing unit in a corresponding manner to the service information of the metadata accumulation managing unit

As described above the second generator generates the SQL statement as a search query. Then the second generator outputs the generated SQL statement to the execution control unit Step S . If more than one SQL statement is generated then the execution control unit determines the execution order of a plurality of SQL statements in an identical manner to Steps S and S illustrated in and sequentially outputs the SQL statements according to the execution order to the obtaining unit . Herein it is assumed that only a single SQL statement is generated and output to the obtaining unit . Then the obtaining unit executes the SQL statement output by the second generator and appropriately receives metadata from the metadata accumulation managing units and and in an identical manner to Step S illustrated in performs analysis processing on the metadata as necessary and generates the common metadata. Subsequently in an identical manner to Step S illustrated in the obtaining unit outputs the common metadata that has been generated to the contents metadata displaying unit . Then in an identical manner to Step S illustrated in the contents metadata displaying unit follows for example the output order of the metadata and displays it on the display unit.

In this way even in the case when a plurality of target services for searching have a hierarchical relationship therebetween the detecting unit performs the addition and activation of target services for searching in a dynamic manner and the second generator generates search queries according to the hierarchical relationship between the services. As a result inter service searches across a plurality of services can be performed only with respect to the usable services.

Given below is the explanation of the receiving apparatus according to a third embodiment. The constituent elements that are in common with the above mentioned first embodiment or the second embodiment are referred to by the same reference numerals and the explanation thereof is not repeated.

In an identical manner to the above mentioned first embodiment the second generator generates search queries with respect to the target services for searching and outputs the search queries to the execution control unit . In addition in the third embodiment the second generator outputs to the obtaining unit an unapplied search condition list that includes the search conditions which could not be applied in the search queries generated with respect to the target services for searching. If a particular service does not have search condition attributes matching with the common search conditions but has metadata attributes matching with the common search conditions then the common search conditions correspond to the search conditions that could not be applied in the search queries. Thus the unapplied search condition list includes such search conditions.

In an identical manner to the above mentioned first embodiment the obtaining unit sequentially executes the search queries that have been output from the execution control unit obtains metadata performs appropriate analysis processing on the metadata and obtains the common metadata. Moreover the obtaining unit outputs the unapplied search condition list which has been received from the second generator to the filtering unit .

With respect to the common metadata output by the obtaining unit the filtering unit performs filtering by applying those search conditions which are listed in the unapplied search condition list and which could not be applied in the search queries. That is with respect to the common metadata output by the obtaining unit the filtering unit performs filtering by searching for the metadata that matches with the search conditions which could not be applied in the search queries and by deleting the metadata that does not match with those search conditions. That results in narrowing down of the corresponding contents.

As a specific example in a particular service if it is not possible to specify the age limit information as a search query but if the received metadata includes the age limit information and if the common search conditions include the age limit information then with respect to that particular service the obtaining unit executes search queries by excluding the age limit information and outputs to the filtering unit the common metadata that is obtained by means of appropriate analysis processing and an unapplied search condition list that includes the age limit information as the search condition which could not be applied. Then the filtering unit refers to the age limit information reflected in the unapplied search condition list and refers to the age limit information included as an attribute in the common metadata and searches for the corresponding common metadata. Thus the common metadata obtained as the result of searching is the result of filtering. In this way the filtering unit performs filtering of the metadata output by the obtaining unit . Then the filtering unit outputs the common metadata that is obtained as the result of filtering to the display control unit .

The display control unit merges the sets of common metadata that are output from the filtering unit and that are received from a plurality of services and selects the metadata to be displayed on the contents metadata displaying unit by referring to only those search conditions from among the common search conditions specified in the common search query which are applicable to the sets of common metadata that have been merged. For example when the common search conditions include a sorting condition the display control unit follows that sorting condition performs a sorting operation to sort the merged metadata and displays the sorted metadata on the display unit. Herein for example the display control unit performs batch sorting of a certain number of sets of metadata at a time. At that time a certain number of sets of metadata that is to be sorted are cached in the metadata accumulation managing unit . For example the display control unit has an on memory database not illustrated with the same table configuration as that of the metadata accumulation managing unit and sequentially stores the metadata output by the filtering unit in the on memory database.

Explained below with reference to is the sequence of a metadata obtaining operation performed in the receiving apparatus according to the third embodiment. Herein the operations at Step S Step S and Step S are substantially identical to the operations described in the first embodiment. Meanwhile at Step S it is assumed that the common search query is expressed as a Boolean expression as given below in Expression 4 with a single genre G1 a single title T1 a single duration D1 and a sorting condition O1 according to a single release date release broadcast starting date and time or release broadcast ending date and time as the search conditions. search formula 1 1 1 1 Expression 4

More particularly it is assumed that G1 represents the genre code for movie and T1 represents a keyword such as ABC that is included in the title of the movie. Moreover it is assumed that D1 specifies an upper limit for the duration such as within 60 minutes . Alternatively D1 can also be specifying a range of the duration such as from 60 minutes to 120 minutes or can be specifying a lower limit for the duration such as equal to or greater than 30 minutes . Thus the common search conditions can include the search conditions based on such inequalities. Meanwhile O1 generally represents new releases and herein too new releases is specified as the sorting condition.

Subsequently by receiving input of the common search query output at Step S the selecting unit selects target services for searching by performing the operations at Steps S and Step S in an identical manner to the first embodiment. More particular in the third embodiment since the genre code represents movie either those services can be selected which store therein only the contents and the metadata of movies in a searchable manner or those services can be selected which store therein the contents and the metadata of a large number of movies. Such a selection criterion can be implemented when the service information accumulation managing unit manages as service information the search condition attribute such as the intended genre of the services. Since this point has already been explained in the first embodiment the repetition thereof is avoided. Herein it is assumed that as a result the contents delivery server referred to as service S4 and the contents delivery server service S5 are selected as target services for searching. With that the search formula in Expression 4 is updated to a search formula in Expression 5 given below. Thus at Step S the selecting unit treats the search formula in Expression 5 as the common search query and outputs to the second generator that search formula as well as the service information of the services selected as the target services for searching. 45 1 1 1 1 Expression 5

The second generator refers to the common search query which is expressed as the search formula in Expression 5 as well as refers to the service information output at Step S and expands the common search query to search queries on a service by service basis. Herein it is assumed that each of the contents delivery servers and allows the specification of search conditions using only URLs based on REST style WebAPIs and is not compatible to the description of search conditions in a structural manner allowing logical expression such as in SQL. In this case the second generator performs product term expansion of the search formula in Expression 5 and obtains Expressions 6 and 7 as given below. 4 1 1 1 1 Expression 6 5 1 1 1 1 Expression 7 

Then from those search formulae the second generator respectively obtains the service information of the contents delivery server serving as the service S4 and the service information of the contents delivery servers serving as the service S5 from the service information accumulation managing unit Step S and generates the actual search queries URL Step S . Meanwhile it is assumed that in the contents delivery server the title and the genre can be specified as search conditions but sorting conditions according to durations and release dates cannot be specified as search conditions. The second generator refers to the service information stored in the service information accumulation managing unit and determines about the search condition attributes that are supported. At the same time from that service information the second generator refers to the supported metadata attributes and confirms that the metadata that is obtained as a result of executing the search queries includes information regarding the duration and the release date. Herein the second generator makes use of genre G1 and title T1 as specifiable search conditions and generates a search query as given below. At that time the genre movie corresponding to G1 is converted into Movie in conformity with the display format of genres of the contents delivery server .

In contrast it is assumed that in the contents delivery server a sorting condition according to genres can be specified but sorting conditions according to titles durations and release dates cannot be specified as search conditions. The second generator confirms from the service information stored in the service information accumulation managing unit that the keyword is specifiable as a search condition and that the metadata obtained as a result of executing search queries includes information regarding the duration the title and the release date. Herein the second generator substitutes a title with a keyword as a search condition and generates a search query as given below using G1 and T1.

Subsequently the second generator outputs to the execution control unit a list of search queries that have been generated at Step S Step S . In addition the second generator outputs to the obtaining unit an unapplied search condition list that includes the search conditions which could not be applied in the search queries generated with respect to the target services for searching. If there are no search conditions which could not be applied in the search queries generated with respect to the target services for searching then the second generator may not output any unapplied search condition list to the obtaining unit or may output an unapplied search condition list having null values set therein to the obtaining unit . Then in an identical manner to the first embodiment the execution control unit performs the operations at Steps S and S determines the execution order of the search queries and sequentially outputs the search queries to the obtaining unit in accordance with the execution order that has been determined.

The obtaining unit sequentially executes the search queries that have been output. Herein the obtaining unit sends a search query to the contents delivery server serving as the service S4 as well as to the contents delivery server serving as the service S5 Steps S and S . For that the obtaining unit sends via the communicating unit HTTP requests each including a search query in a URL.

Upon receiving a search query via the network the contents delivery server executes that search query obtains the corresponding metadata and sends that metadata to the receiving apparatus Step S . In an identical manner upon receiving a search query via the network the contents delivery server executes that search query obtains the corresponding metadata and sends that metadata to the receiving apparatus Step S .

Returning to the explanation with reference to the obtaining unit receives metadata from the contents delivery server serving as the service S4 as well as from the contents delivery server serving as the service S5 performs appropriate analysis processing on the metadata obtains a set of common metadata from each set of metadata and sequentially sends the sets of common metadata to the filtering unit as well as outputs the unapplied search condition list received from the second generator to the filtering unit Step S .

Upon obtaining the sets of common metadata output at Step S as well as upon obtaining the unapplied search condition list the filtering unit performs a filtering operation using the received information Steps S to S . is a flowchart for explaining a detailed sequence of the filtering operation performed by the filtering unit . Subsequent to Step S illustrated in the filtering unit is able to receive input of the metadata output by the obtaining unit and to receive input of the unapplied search condition list Step S . Then the filtering unit analyzes the information received as input at Step S Step S and determines whether or not the unapplied search condition list has been received Step S . As described above if there are no search conditions which could not be applied in the search queries generated with respect to the target services for searching there are times when the unapplied search condition list is not output from the second generator or there are times when the unapplied search condition list output from the second generator has null values set therein. In such cases the filtering unit determines that the unapplied search condition list has not been received as input. In that case No at Step S the filtering unit does not perform filtering and outputs the metadata received as input at Step S to the display control unit Step S . On the other hand when the unapplied search condition list is received as input Yes at Step S the filtering unit applies the search conditions listed in the unapplied search condition list to the metadata received as input at Step S and performs filtering of that metadata Step S . More particularly for example regarding the contents delivery server the unapplied search conditions are sorting conditions according to durations and release dates. Similarly regarding the contents delivery server the unapplied search conditions are sorting conditions according to titles durations and release dates.

The filtering unit performs filtering by searching in the sets of common metadata for the common metadata that matches with the search conditions with the exception of sorting conditions that could not be applied Step S . The reason for excluding sorting conditions is that the sorting conditions can be applied only after the sets of common metadata that are independently received as input are merged. Herein as an example of a search for example since the search in the contents delivery server is performed by substituting a title with a keyword the result of a full text search is implicitly returned as the execution result of the search queries in the contents delivery server . Hence the sets of metadata received by the receiving apparatus include the specified keyword ABC that is included not only in the metadata attribute title but also in the metadata attributes synopsis or keyword . From such sets of metadata the filtering unit extracts those sets of metadata which have ABC included only in the title. Moreover with respect to the extracted sets of metadata the filtering unit performs filtering by narrowing down the duration to within 60 minutes . In this way the filtering unit refers to the value of each common metadata attribute included in the common metadata and searches for such common metadata which matches with the search conditions.

Subsequently the filtering unit determines whether or not the number of sets of common metadata retrieved as the result of search has reached a predetermined number of sets Step S . If the predetermined number of sets is yet to be reached the filtering unit requests the obtaining unit to obtain further metadata Step S . For example even if it is assumed that the obtaining unit obtains 50 sets of metadata from the contents delivery server there are times when the filtering causes a narrowing down of the sets of metadata to for example less than 10 sets of metadata. In the case when the predetermined number of sets of metadata is required for the sorting operation performed by the latter stage display control unit or for the display operation performed by the contents metadata displaying unit then at Step S the filtering unit gives the obtaining unit a feedback of the result of filtering and requests the obtaining unit to obtain further metadata. In the above mentioned specific example of search queries although the request is issued for obtaining 50 sets of metadata starting from the first set of metadata the obtaining unit receives the feedback and resends the search queries by specifying 50 sets of metadata starting from the 51 st set of metadata. In a case when a total of 100 sets of metadata are requested and if for example obtaining and filtering of 50 sets of metadata yields a result of 10 sets of metadata then the obtaining unit assumes that the number of sets are narrowed down to 20 and may simultaneously issue a plurality of search queries so as to increase the total number of sets of metadata to 250. Meanwhile in the contents delivery server too the search conditions which could not be applied to the search queries are used in the filtering performed by the filtering unit . However since that case is identical to the case of the contents delivery server the explanation is not repeated. Subsequently to the display control unit the filtering unit outputs the common metadata obtained as a result of searching at Step S or outputs the common metadata obtained as a result of searching at Steps S and S Step S .

Returning to the explanation with reference to Step S corresponds to Step S described above Step S corresponds to Step S described above and Steps S and S correspond to Step S described above. Steps S to S are substantially identical to Steps S to S. Meanwhile as far as a sorting condition according to release dates is concerned it is still not applied up to this stage.

The display control unit merges the sets of common metadata that are independently output from the filtering unit Step S and performs a sorting operation for sorting the merged metadata according to the above mentioned sorting condition Step S . More particularly for example the display control unit breaks the metadata which is sequentially output from the filtering unit at regular time intervals and performs a collective sorting operation batch processing so that the metadata output from the filtering unit within each time interval is sorted in descending order of release dates that is sorted in the order of new releases.

Explained below with reference to is a detailed sequence of the sorting operation performed by the display control unit . When it is detected that an operation input of requesting a contents search has been performed via the operation input unit Step S the display control unit resets a timer set regarding a trigger for performing batch processing of metadata a search start trigger and then starts the timer Step S . Until the timer reaches a threshold time set in advance Yes at Step S the display control unit sequentially stores the metadata output from the filtering unit in a cache region for batch processing Step S . Herein it is assumed that the cache region is in fact an on memory database. However that is not the only possible case. Once the timer reaches the threshold time the display control unit performs a collective sorting operation so that the metadata stored in the cache region for batch processing is sorted in descending order of release dates that is sorted in the order of new releases.

Returning to the explanation with reference to subsequent to Step S the display control unit selects a predetermined number of sets of upper level metadata from among the sets of metadata obtained at Step S and outputs the selected sets of metadata to the contents metadata displaying unit Step S .

As described above with respect to metadata that is received independently from a plurality of services and that is a result of executing search queries while excluding some of the search conditions the filtering unit performs filtering by carrying out a search by excluded search conditions and the display control unit performs the sorting operation. With such a configuration when there are present a plurality of target services for searching and when the search interface of each service is different even if the search query for searching intended contents cannot be made compatible to the search interface of each service it still becomes possible to perform a search while maintaining to the extent possible the intent of the search according to the original search formula for searching intended contents.

The present invention is not limited to the above mentioned embodiments but may be embodied with various modified components in implementation without departing from the spirit of the invention. Further the invention can be embodied in various forms by appropriately combining a plurality of components disclosed in the embodiments. For example some of the components presented in the embodiments may be omitted. Further some components in different embodiments may be appropriately combined. In addition various modifications as described below may be made.

In each of the embodiments described above various programs executed in each of the receiving apparatuses and can be saved on a computer connected to a network and downloaded from that computer via the network. Moreover the various programs can be stored as installable or executable files in a computer readable recording medium such as a CD ROM a flexible disk FD a CD R or a DVD Digital Versatile Disk and can be provided in the form of a computer program product.

In each of the embodiments described above the service information can either be stored in advance as preset in the service information accumulation managing unit or be appropriately stored in the service information accumulation managing unit when provided from the contents delivery servers and . Still alternatively based on the execution result information stored in the search query execution history accumulation managing unit the service information accumulation managing unit can automatically generate the service information as described later. That can be achieved by reflecting in the service information the information obtained in an empirical manner when for example only the contents related to news as a subdivision of genres are obtained despite for example the fact that the metadata attributes representing the genres and included in the metadata obtained from the contents delivery servers and do not specify the genre code as a search condition.

In each of the embodiments described above at Step S illustrated in and in the service information selected as the target for searching is added in the search formula as a common search condition. However that is not the only possible case. For example the selected service information can also be separately input to the latter stage second generator .

Moreover in each of the embodiments described above the search conditions that either are generated by the contents metadata displaying unit or are specified by the user can be directly output to the latter stage second generator without using the selecting unit . In that case for example the target services for searching can be in a fixed manner all of the services for which the service information is stored in the service information accumulation managing unit . Alternatively the contents metadata displaying unit can be configured to include an interface that enables the user to select target services for searching so that the services selected via that interface can be treated as the target services for searching.

Furthermore in each of the embodiments described above an upper limit may or may not be set for the services selected as the target services for searching. If an upper limit is set either the value thereof can be internally defined to a fixed value or the receiving apparatus can be configured to include an interface that enables the user to set the value of the upper limit.

In each of the embodiments described above the receiving apparatus executes search queries so as to obtain metadata from contents delivery servers that store therein contents or metadata of the contents in a searchable condition. However that is not the only possible case. Alternatively the metadata can be obtained via an information processing apparatus that stores therein at least the metadata of the contents in a searchable condition.

Moreover in each of the embodiments described above upon obtaining metadata from the services the receiving apparatus can obtain separately from those services the contents having attributes represented by the metadata.

Furthermore in the first embodiment described above the execution control unit determines the execution order of the search queries executed by the second generator and the obtaining unit executes the search queries according to that execution order. Alternatively the configuration can be such that the receiving apparatus does not include the execution control unit and the obtaining unit executes the search queries in the order in which the second generator has generated them.

Moreover in the first embodiment described above the service S1 as well as the service S2 is available on the network . Instead it is also possible that the service S1 and the service S2 are available on different networks. For example one of the contents delivery servers can be installed on the Internet and the other contents delivery server can be installed on either an NGN Next Generation Network or a Home Network. In this way even when the target services for searching are present on different networks as long as the communicating unit has the accessibility to all networks each of the services can be treated as a target service for searching. The same is true in the case of the second and third embodiments.

In the second embodiment described above regarding the services having hierarchical relationship therebetween based on the search query format specified in the service information the receiving apparatus generates a single search query in the above mentioned example a single SQL statement including the hierarchical relationship information as a search condition attribute. Alternatively the receiving apparatus can be configured to include a determining unit that determines whether or not to generate a search query for each service for which the hierarchical relationship is identified in the hierarchical relationship information. In this case the second generator can follow the determination made by the determining unit and accordingly generate search queries using the common search query generated by the contents metadata displaying unit .

In the third embodiment described above the obtaining unit outputs the result of metadata analysis to the filtering unit . Instead the obtaining unit can output the result of metadata analysis to the display control unit without using the filtering unit .

Alternatively regarding a common search condition attribute included in the metadata attributes in a particular service the second generator can determine that the common search condition attribute is a search condition attribute that is applicable as a filter with respect to the received metadata and then can output that common search condition attribute to the filtering unit .

Moreover in the third embodiment described above as the method of establishing the sets of common metadata to be batch processed as the target sets for sorting batch processing the display control unit breaks the metadata at regular time intervals. However as alternative methods the display control unit can break the metadata after every predetermined number of sets or can break the metadata into a plurality of sets of metadata with respect to each target service for searching. In this way various methods can be implemented to determine the unit for performing batch processing. Besides in order to narrow down the metadata to be displayed on the contents metadata displaying unit instead of selecting a predetermined number of sets of upper level metadata from among batch processed common metadata the display control unit can for example refer to the reproduction history information and the skipping history information stored in the contents viewing skipping history accumulation managing unit or refer to the keyword information stored in the keyword generation accumulation managing unit and accordingly assign priority to the contents of services having high reproduction frequencies and sequentially select the common metadata corresponding to those priority contents. Alternatively the receiving apparatus can be configured to have a function of analyzing the preferences of a user by referring to the reproduction history information and the skipping history information stored in the contents viewing skipping history accumulation managing unit . Then the display control unit can refer to the preferences of that user assign priority to the contents of high preference and sequentially select the common metadata corresponding to those priority contents. Still alternatively the receiving apparatus can be configured to have a function that in the case of searching for contents related to the contents being reproduced calculates the degree of similarity from the degree of matching between metadata attributes of the metadata of the contents being reproduced and metadata attributes of the metadata stored in the metadata accumulation managing unit . Consequently priority can be assigned to the contents of high degrees of similarity and the common metadata corresponding to those priority contents can be sequentially selected.

Furthermore in the third embodiment described above for example along with displaying 20 sets of metadata on the display unit the display control unit can store a predetermined number of sets of metadata starting from the 21 st set of metadata that may be referred next in the cache of an on memory database in the metadata accumulation managing unit or in the display control unit . In that case along with the selection of metadata to be displayed as described above the display control unit can also be configured to refer to the reproduction history information and the skipping history information stored in the contents viewing skipping history accumulation managing unit store the number of sets of metadata that the user can trace and accordingly determine the number of sets of metadata to be cached.

Moreover in the third embodiment described above with respect to the common metadata output from the filtering unit the display control unit performs sorting by following a specific sorting condition such as a sorting condition according to release dates. However that is not the only possible case. For example sorting of the common metadata output from the filtering unit can also be performed according to the preferences of a user that are analyzed by referring to the degree of similarity among the contents being reproduced or by referring to the reproduction history information and the skipping history information stored in the contents viewing skipping history accumulation managing unit .

Furthermore in the third embodiment described above the unapplied search condition list is input to the filtering unit via the obtaining unit . However alternatively it is also possible that the second generator directly inputs the unapplied search condition list to the filtering unit .

According to at least one embodiment at the time of searching for contents in a plurality of different services a receiving apparatus enables the user to search for the intended contents even if the search criteria of each service are not the same.

