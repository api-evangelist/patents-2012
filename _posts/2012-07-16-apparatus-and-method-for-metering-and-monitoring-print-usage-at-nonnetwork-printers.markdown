---

title: Apparatus and method for metering and monitoring print usage at non-network printers
abstract: The invention relates to a printer component for monitoring usage on non-network printers. The printer component includes a desktop component installed on a network computer to which a non-network printer is attached. The desktop component is for obtaining printer status information from each non-network printer attached to the network computer. The printer component also includes a server component installed on an external server. A job listener is attached to the network computer to obtain printer status information for each non-network printer. The server component mergers information obtained from the desktop component with previously stored printer information to provide printer status information for all network and non-network printers within an enterprise.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08537402&OS=08537402&RS=08537402
owner: Emerge Print Management, LLC
number: 08537402
owner_city: Tampa
owner_country: US
publication_date: 20120716
---
This application is a continuation application of pending application Ser. No. 11 812 018 filed Jun. 14 2007 the disclosure of which is incorporated by reference herein.

This invention relates to an apparatus and method for metering and monitoring print usages at non network printers within an enterprise and for reporting information obtained into a system for consolidating and responding to real time enterprise printing information.

Presently computer networks in an enterprise organization typically include computer systems and peripherals such as printers connected to the computer systems. Organizations rely on printers for carrying out daily operations. An inoperative printer due to failure or to the lack of components such as toner can disrupt operations and waste time and resources. Thus organizations often desire to determine the extent of usage of a printer to prevent disruptions.

Computer networks typically include network printers that are connected directly to the computer network such that the network printers may be shared by multiple users. Computer networks may also include multiple non network printers that are connected to one or more individual computers such that the non network printers are used by only the computers to which it is connected. Due to the fact that non network printers are not directly accessible via the computer network contemporary methods of usage monitoring over the network are not applicable.

Usage of a printer is typically determined by the page count. Pages can be counted manually by sending service personnel to each printing device to procure the page counts via typical means such as executing a printer test page. This procedure requires a considerable amount of manpower and is costly. Additionally this procedure can be inaccurate due to human errors. One contemporary attempt to provide more accuracy in monitoring printer usage employs the counting of power surges at the printer to determine the number of pages printed. This method requires that every printer utilizes a stepper motor to advance sheets of paper during printing. Pulsing of each of the coils of the stepper motor results in pulses in the supply current which is to be detected by a separate detection circuit. The detection circuit is operably connected to both a power supply of the printer and a data collection unit. This method suffers from the drawback of being limited to particular types of printers as well as inaccuracies in attempting to detect power surges caused only by the coils of the stepper motor during printing. This method suffers from further drawback of requiring costly hardware for every printer in order to detect the power surges and transmit data representative of the power surges for calculation of the printer usage.

Additionally contemporary systems that rely on only print counts do not account for fluctuations in the use of consumable components such as ink or toner. Usage of consumable components is typically dependent on the type of print job that has occurred. In environments that perform large print jobs the necessity to re print the job because of an inadequate amount of ink resulting in a poor quality of the print job can be time consuming and costly. It is undesirable to replace consumable components during busy print times especially where particular print jobs are time sensitive. Attempting to estimate consumption of consumable components based upon printer usage is usually inaccurate for the reasons described above. Additionally over estimates of usage of the consumable component is costly. Moreover supplies for such consumable components can take time to procure resulting in further disruptions.

In order to accurately service all of the printers within the enterprise there is a need to accurately determine the usage of both network and non network printers. There are currently monitoring systems for monitoring the usage of network printers. However these systems typically cannot discover non network printers. While there are also monitoring systems that monitor the usage of non network printers these systems have been unable to accurately count prints and monitor printer usage on computers that are attached to two or more non network printers. For example if a computer system is attached to non network printers and the computer executes a print command for multiple duplicate print batches for example five copies of a five page document these systems typically count the number of copies printed for that print command as five pages instead of twenty five pages. These systems also cannot monitor ink usage for non network printers effectively. Therefore these systems do not accurately report when ink cartridges need to be changed and or the amount of ink remaining in a currently used ink cartridge.

What is needed therefore is a process of collecting accurate data on printer usage of both network and non network printers within an enterprise in order to accurately predict inventory requirements and to maintain peak performance on all printers within the enterprise.

Therefore it is an object of this invention to provide an improvement which overcomes the aforementioned inadequacies of the prior art devices and provides an improvement which is a significant contribution to the advancement of the metering and monitoring print usages at non network printers art.

The foregoing has outlined some of the pertinent objects of the invention. These objects should be construed to be merely illustrative of some of the more prominent features and applications of the intended invention. Many other beneficial results can be attained by applying the disclosed invention in a different manner or modifying the invention within the scope of the disclosure. Accordingly other objects and a fuller understanding of the invention may be had by referring to the summary of the invention and the detailed description of the preferred embodiment in addition to the scope of the invention defined by the claims taken in conjunction with the accompanying drawings.

For the purpose of summarizing this invention the invention relates to a printer component for monitoring usage on non network printers. The printer component includes a desktop component installed on a network computer to which a non network printer is attached. The desktop component is for obtaining printer status information from each non network printer attached to the network computer. The printer component also includes a server component installed on an external server. The server component is configured to patrol the computer network to identify each desktop component and to request printer status information for each non network printer. During installation of the desktop component a job listener is attached to the network computer to obtain printer status information for each non network printer. When printer status information is obtained from the desktop component a socket server is started to listen to a port and return non network printer objects. The server component mergers information obtained from the desktop component with previously stored printer information to provide printer status information for all network and non network printers within an enterprise.

Another embodiment of the invention is directed to a method for monitoring usage on non network printers. The method includes attaching a job listener to a desktop component installed on a network computer to obtain printer status information for each non network printer. The method also includes obtaining printer status information from the desktop component installed on the network computer to which a non network printer is attached by starting a socket server to listen to a port and return non network printer objects the printer status information being for each non network printer attached to the network computer. The method also includes patrolling by a server component installed on an external server the computer network to identify each desktop component and to request printer status information for each non network printer. The method further includes merging by the server component information obtained from the desktop component with previously stored printer information to provide printer status information for all network and non network printers within an enterprise.

Another embodiment of the invention is directed to a computer program product embodied on a computer readable medium the computer program product being configured to execute a method for monitoring usage on non network printers. The method includes attaching a job listener to a desktop component installed on a network computer to obtain printer status information for each non network printer. The method also includes obtaining printer status information from the desktop component installed on the network computer to which a non network printer is attached by starting a socket server to listen to a port and return non network printer objects the printer status information being for each non network printer attached to the network computer. The method also includes patrolling by a server component installed on an external server the computer network to identify each desktop component and to request printer status information for each non network printer. The method further includes merging by the server component information obtained from the desktop component with previously stored printer information to provide printer status information for all network and non network printers within an enterprise.

Another embodiment of the invention is directed to an apparatus for monitoring usage on non network printers. The apparatus includes attaching means for attaching a job listener to a desktop component installed on a network computer to obtain printer status information for each non network printer. The apparatus also includes obtaining means for obtaining printer status information from the desktop component installed on the network computer to which a non network printer is attached by starting a socket server to listen to a port and return non network printer objects the printer status information being for each non network printer attached to the network computer. The apparatus also includes patrolling means for patrolling by a server component installed on an external server the computer network to identify each desktop component and to request printer status information for each non network printer. The apparatus further includes merging means for merging by the server component information obtained from the desktop component with previously stored printer information to provide printer status information for all network and non network printers within an enterprise.

The foregoing has outlined rather broadly the more pertinent and important features of the present invention in order that the detailed description of the invention that follows may be better understood so that the present contribution to the art can be more fully appreciated. Additional features of the invention will be described hereinafter which form the subject of the claims of the invention. It should be appreciated by those skilled in the art that the conception and the specific embodiment disclosed may be readily utilized as a basis for modifying or designing other structures for carrying out the same purposes of the present invention. It should also be realized by those skilled in the art that such equivalent constructions do not depart from the spirit and scope of the invention as set forth in the appended claims.

Reference will now be made to the preferred embodiments of the present invention examples of which are illustrated in the accompanying drawings.

The method of communication between data processing system and each of clients can vary such as for example over the Internet. In one embodiment the method of communication between data processing system and clients can be over the World Wide Web WWW via Hypertext Transfer Protocol HTTP . In an embodiment of printing management system a Uniform Resource Identifier URI scheme is utilized for the communication between data processing system and clients . The URI scheme provides encryption and or authentication requirements for the transfer of data. HTTPS may be utilized for communication between data processing system and clients so that an additional encryption authentication layer is utilized between HTTP and the Transmission Control Protocol TCP . However the present disclosure contemplates the use of other schemes methods and devices for retrieving or delivering data and otherwise communicating between data processing system and clients including wireless communication and hard wired communications.

Desktop machine component includes an application programming interface API an intermediate layer and an upper layer . API may be any source code interface which supports requests for services and provides numerous structures for returning information about computer and the peripherals such as non network printers attached to computer . For example these structures may be used to obtain information on the non network printers status condition and service. Specifically in an embodiment of the invention API obtains a list of all non network printers attaches an observer to each non network printer creates a status and page count file for each non network printer where the page count file is updated when a page is printed by non network printer . In an embodiment of the invention API is implemented in a programming language such as C and it is bundled as an EXE file. API layer is attached to intermediate layer which is further attached to upper layer .

In an embodiment of the invention a Windows API layer such as Win32 API is used at the API layer . Win32 API layer can be developed in Visual C or other programming languages. Win32 API layer extracts data related to the non network printers . In the exemplary embodiment a dynamic link library DLL file is the deliverable of Win32 API layer .

Intermediate layer of desktop machine component may be a Java Native Interface JNI that allows Java code running in a Java virtual machine to call and be called by native applications. JNI Layer can receive data from Win32 API layer and populate the Java object with the data.

Upper layer or Remote Method Invocation RMI Layer is implemented in a programming language such as Java. RMI layer reads the information from files created by API layer transforms the information to a Java object and sends the Java objects to location server component . When NSDP local agent runs a service a process in RMI layer runs a RMI service and registers the RMI service in a RMI registry with a specific name. This service exposes a method which returns the Java objects including information about the attached NSDP printers to the location server component . In an embodiment of the invention RMI service exposes a single method. This service receives NSDP data from the respective machines in the form of Java objects. The RMI service is thread safe.

As noted above location server component patrols the computer network after a specific time interval to locate non network printers . Location server component is a Java RMI client. Location server component looks up the RMI service in the RMI registry with specified name within a provided IP range for each IP address. If location server component finds a response from desktop machine component at an IP address it retrieves the required non network printer information and stores the retrieved information in an XML file which is later uploaded to an external print counts server.

Location server component includes an XML data source which fetches data from Java object and writes the data to the XML file. XML data source may include an XML parser which fetches data from a Java object and writes the data to a XML file. The XML parser can read an XML document identify all the XML tags and upload the data to the data processing system . As described above data processing system includes application server and database that provides for storage and allows for manipulation of all relevant data for the clients . Based upon this data the clients are made aware of printer usage and consumable resource or component usage. The data can be used for other purposes and manipulated accordingly such as utilizing the data for work flow efficiency analysis within the organization.

An embodiment of the present invention includes an NSDP Version Updater which includes a NSDP Version Update Server VUS and NSDP Version Update Client VUC . When configured with default parameters the NSDP Version Updater runs as a backend process. A NSDP configuration file includes information for a HTTP server running the NSDP version service. NSDP Version Updater looks for an update at the HTTP server after a configurable interval of time. If it finds an update NSDP Version Updater downloads a patch.

The VUS uses Java servelet as version update server. The latest version information is kept in an XML file that includes major version information minor version information a name of a patch file the size of the patch file and the destination of the patch file. NSDP VUC is a Swing based desktop application equipped with a built in HTTP client. It has an XML file which includes a current major version a current minor version and a configuration file including an address or URL of the version update server the frequency of a version update check and an application ID and password.

After a specified interval of time VUC requests a version check from the VUS servelet. This check is implemented as a HTTPS request which includes the current version information and the application identifier and password. The VUS authenticates the call and compares the version with available version. If the available version is later than the current version VUS responds with a patch including a size and version information. VUC triggers a graphical user interface based on this request. The swing based graphical user interface shows details of available version and requests that a user accepts the patch. After acceptance is confirmed the VUC downloads unzips and installs the patch. Then the VUC starts the NSDP service on underlying machine . In an embodiment of the invention the VUC is configurable to withdraw user intervention. In that case patch is automatically downloaded and installed.

The NSDP agent is therefore software which includes a combination of a Microsoft Windows Dynamic Linked Library DLL written in C and a socket based Java client written in the Java programming language. The Java program interacts with the Win32 API using the Java Native Interface JNI mechanism. The Win32 API is used to communicate with the Microsoft Windows registry to obtain information about locally attached printers .

As is known to those skilled in the art not all printer models provide meter reads or page count. For these models NSDP agent invokes a job listener that places a status file locally on each computer for every non network printer . The status file includes a page count number for each page printed after the installation of NSDP agent . When NSDP agent is installed the initial value of the page count number is zero. However the value of the page count number it is incremented each time a page is printed on a non network printer .

Non network printers provide a means to obtain an updated status on each print job. Thus the job listener also updates the toner status in the status file. A Patrol application continuously polls NSDP agents to obtain the toner status. Whenever a low toner is detected the Patrol application sends a notification to an alerts database. NSDP agent can handle multiple non network printers attached to a single workstation . Each non network printer is uniquely identified by a combination of the MAC address associated with the printer the make and the model.

In an exemplary embodiment at pre determined time intervals a daemon or the like can be used to invoke RMI client layer to communicate data from the client to the external location server. A property file may be used for storing characteristics pertaining to the external location server to facilitate and or enable communication with the external location server. During a first time period after NSDP local agent application confirms that the external location server is operating NSDP local agent application sends data to the external location server. If at the first predetermined time NSDP local agent application determines that the external location server is not operating then application communicates the data at another pre determined time. It should be noted that the time intervals at which the daemon invokes RMI client layer to communicate data to the external location server may vary to control the flow of data. The ability to vary the time interval is advantageous where the printing system or its workload has changed such as if the client has increased the number of printers or there has been a large increase in the number of print jobs being performed by one or more of the printers. In such instances it can be advantageous to change the time interval to better control the flow of data and allow for timely calculations of printer and or resource usage. The present disclosure also contemplates data communication between the RMI client layer and the location server being in real time on demand and a combination of two or more of real time pre determined time intervals and on demand communication.

Based upon printing management system and the process implemented therein the clients can have their printing needs managed and maintained with minimal or no interruption in printing operation. Clients can be advised of the need for service and or resource replacement based upon the data that is being tracked for the entire printing operation including the non network and network printers. The data collected and stored can be further manipulated by the data processing system to provide for usage warnings service scheduling operation improvement and the like.

The present invention may be realized in hardware software or a combination of hardware and software. The present invention may be realized in a centralized fashion in one computer system or in a distributed fashion where different elements are spread across several interconnected computer systems. Any kind of computer system or other apparatus configured to carry out the methods described herein is suited. A typical combination of hardware and software may be a general purpose computer system with a computer program that when loaded and executed controls the computer system such that it carries out the methods described herein.

It should be appreciated by one skilled in art that the present invention may be utilized in any computer network configuration where there are non network and network printers as described above. The foregoing description has been directed to specific embodiments of this invention. It will be apparent however that other variations and modifications may be made to the described embodiments with the attainment of some or all of their advantages. Therefore it is the object of the appended claims to cover all such variations and modifications as come within the true spirit and scope of the invention.

The present disclosure includes that contained in the appended claims as well as that of the foregoing description. Although this invention has been described in its preferred form with a certain degree of particularity it is understood that the present disclosure of the preferred form has been made only by way of example and that numerous changes in the details of construction and the combination and arrangement of parts may be resorted to without departing from the spirit and scope of the invention.

