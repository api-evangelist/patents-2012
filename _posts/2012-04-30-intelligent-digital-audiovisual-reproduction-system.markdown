---

title: Intelligent digital audiovisual reproduction system
abstract: Payment-based audiovisual playback system characterized by comprising a microprocessor unit, primarily including storage means for storing inter alia in digital form the visual and sound information to be used, and associated, through a number of interfaces, with display means for sound playback which provide a multimedia environment. The unit is controlled by a multitask operating system including a library of integrated tools and services in the storage means. The system is also associated, through an interface, with a telecommunications modem and is connectable to an audiovisual information distribution network by a telecommunications modem and telecommunications links, the telecommunications functions also being managed by the multitask operating system.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=08593925&OS=08593925&RS=08593925
owner: TouchTunes Music Corporation
number: 08593925
owner_city: New York
owner_country: US
publication_date: 20120430
---
This application is a continuation of application Ser. No. 11 698 060 filed Jan. 26 2007 now U.S. Pat. No. 8 184 508 which is a continuation of application Ser. No. 08 817 689 filed Jun. 13 1997 now U.S. Pat. No. 7 188 352 which is a National Phase of PCT FR95 01333 filed Oct. 12 1995 which claims foreign priority to French Application No. 95 08391 filed Jul. 11 1995 and PCT FR94 01185 filed Oct. 12 1994 the entire contents of each of which are incorporated by reference in this application.

These audiovisual reproduction systems are generally found in cafes or pubs. This type of system is composed of a sound reproduction machine usually called a jukebox linked to a monitor which displays video images or video clips. To do this the jukebox is equipped with a compact video disk player and a compact video disk library and includes selection buttons which locate the titles of pieces of music which are available. Payment of a proper fee followed by one or more selections authorizes activation of the system with automatic loading in the player of the disk on which the selected piece is found the desired audiovisual reproduction then being able to start.

These systems although allowing faithful and good quality reproduction nevertheless have major defects. Thus a first defect relates to the space necessary for storing the library this consequently entails that the system will have large dimensions and will be bulky. Likewise these systems which call on mostly mechanical material using sophisticated techniques have high fault rates this is another defect. Finally it is very unusual for all the pieces on a disk to be regularly heard some are almost never played but still cannot be eliminated. Besides this defect the following problem is caused by the companies which manage and distribute these systems placing in the circuit a limited number of identical disks and imposing a certain rotation on their customers this sometimes entails an unpleasant wait for the customers when a disk is not available.

In addition patent application PCT WO 93 18465 discloses computerized jukeboxes which allow reception via a telecommunications network and a modem connecting the jukeboxes to the network digital data comprising remotely loaded songs or musical pieces in a mass storage of the jukeboxes. The communications system is likewise used for remote loading of representative files of digitized graphics information the songs and graphics files being compressed before they are sent over the network. The jukebox processor then uses these files by decompressing them and sending the graphics data to the video circuit and the song data to the audio circuit.

However the processor also manages the man machine interface and management of these different elements is done by sequentially displaying the graphics images representative of the song then by responding to the touch action of the user then checking that the user has paid the prescribed amounts and finally when the required amount has been accounted placing the selection in a queue for its subsequent execution. Otherwise this system can only operate by first displaying the graphics images and then starting performance of the song because the processor cannot according to the flowcharts execute two tasks at one time. Finally the graphics representations are uniquely data of the album cover of the song digitized by a scanner table. In no case does this jukebox allow display of moving images during the broadcast of the song or music. Likewise since the processor is used for digital data decompression and processing for conversion into audio signals it cannot consider the new actions of a user making a new selection. This is apparent notably on page 12 of the PCT application lines 25 to 27. Selection of new songs can only be done when the jukebox is in the attraction mode i.e. in the one in which it displays graphics representations of different songs stored in the jukebox in succession.

U.S. Pat. No. 4 956 768 discloses a broadband server for transmitting music or images formed by a main processor communicating by a DMA channel with a hard disk and output cards each controlled by a supplementary local processor which manages an alternative mode of access to two buffer memories A and B of which one A is used to deliver for example musical data to a user while the other is filled. Each of the output cards is connected to a consultation station which can be local and situated in the same vicinity as the server or at a distance and connected by an audio or video communications network. The server receives data block by block and ensures that the sample parities are correct and rejects a block including more than two successive wrong samples. Each of these blocks is of course designated by a number. Once a block has been accepted it can be stored on the local hard disk by recording its ordinal number which has no relation to its physical address on the hard disk. The consultation stations have audio and video outputs such as loudspeakers or headphones and a television monitor which makes it possible to listen to music or display images in response to requests received from terminals included in the consultation stations. In this system the consultation stations where the first communications processor must have specific software for management of selection requests for musical pieces or video sic . It is only when the request has been made and addressed to the broadband server processor that it can transfer under the authority of the local processor the data in the buffer memories such that this local processor ensures that the data are sent to the consultation stations. Moreover it is added that the output cards and buffer memories are filled only after having received the authorization of the local processor of the card.

Consequently this system can only function within the framework of a multiprocessor device and does not in any way suggest use of this server for a jukebox controlled by a single processor operating in an multitask environment. This system proposed by the U.S. patent thus implements a complex facility which allows delivery of a service to several consultation stations this complex facility is thus costly and incompatible with a system of jukeboxes of which the cost price should be as low as possible.

The object of the invention is to eliminate the various aforementioned defects of the systems of the prior art and it proposes an intelligent digital audiovisual system which allows display of moving images while musical pieces and songs are being played with high reproduction quality as well as possibilities of remote loading without greatly burdening the budget of this apparatus.

This object is achieved by the payment based audiovisual reproduction system developed around a microprocessor device linked to a payment device on the one hand comprising fundamentally mass storage means for among others storage in compressed digital form of the audio and visual information to be used and on the other hand linked via interfaces to digital display means and digital audio reproduction means allowing formation of a multimedia environment being characterized in that the ensemble is managed by a multitask operating system including a library of tools and services integrated in the storage means the kernel of the operating system linking to each of the peripheral means a task and assigning the highest priority to the display task and a second level priority to the audio task at least one temporary storage buffer of the data to be decompressed being linked to the respective display and audio reproduction means to allow processing of data transferred to one of the means during processing of a transfer to another means by the operating system and a scheduling module of the operating system linking a status buffer positioned at a value representative of the activity of a task while the temporary storage buffers contain the data.

According to another feature the audiovisual reproduction system is moreover linked via an interface to a telecommunications modem said system then being connected to a audiovisual data distribution system by the telecommunications modem and telecommunications lines this telecommunications function likewise being managed by the multitask operating system included in the library of tools and services integrated in the storage means with third level priority and linking to this telecommunications task a temporary buffer for storage of data to be transferred and a buffer for indicating the status of this task.

According to another feature the operating system includes a priority resolution module which depending on the priorities assigned to the declared tasks will acknowledge reception of the request for a task or will respond with a busy signal and a scheduling module which depending on the declared active tasks and the availability. of sufficient hardware resources fills a storage request queue.

According to another feature the temporary buffer for storage of data from a man machine interface and a buffer which indicates the status of this task of the man machine interface are linked to an interface task such as selection of zones on a touch screen each zone corresponding to a choice among the data displayed on the display means.

According to another feature the lowest priority task is that of management by the manager based on a remote control with use validated by a key switch for managing the data base for acquiring new selections or all types of command settings by remote control.

According to another feature it includes a system operating status file kept on the hard disk in which the system records data on the insertion of money addition of a selection in the queue the end of a selection to pass to the following selection to allow the system to return to exactly the same location in case of an interruption due to a fault.

According to another feature the display means include basically a video monitor for reproduction of images of the audiovisual information and a touch screen for monitoring and assistance on which at least four control panels can be selected the first title selection panel proceeding to help customers find and select a desired title a second management control panel for control of volume basses trebles or panoramic control on the video monitor a third panel for scanning the title database for private use to allow the system manager or owner to examine the database containing the available titles via the audiovisual data distribution network to control and retrieve said titles a fourth statistics panel for private use for statistical estimations and calculations relative to the titles.

According to another feature the infrared remote control device allows execution of at least one of the functions listed below audio volume control of the played selections audio volume control of an auxiliary played source microphone start stop command microphone audio volume control balance control left channel right channel control of base frequency level control of treble frequency level commands to cancel or skip a musical selection panoramic effects command zoom forward zoom back triggering of reset of the software program.

According to another feature a management mode module allows recording of the operating parameters of the system in a file stored in the hard disk in a machine format which cannot be read by the user the data backed up on the disk being reread each time the system is activated.

According to another feature the system operating parameters file makes it possible to fix the price of a title or number of titles for a predetermined value the inactivity delay before starting the visual promotional mode the inactivity delay before starting an auxiliary source such as a radio for example the inactivity delay before starting the selection sampling mode the location determined in seconds from the beginning where the system will be able to start sampling a selection and the duration in seconds of the sample.

Preferably but in a nonrestrictive manner the audiovisual reproduction system uses the aforementioned listed components.

Microprocessor central unit is a high performance PC compatible system the choice for the embodiment having fallen on an Intel 80486 DX 2 system which has storage means and the following characteristics. compatibility with the local Vesa bus processor cache memory 256 kO RAM of 32 MO high performance parallel and serial ports SVGA microprocessor graphics adapter type SCSI 2 bus type controller and battery backed up static RAM.

This central unit controls and manages audio control circuit telecommunications control circuit input control circuit mass storage control circuit and display means control circuit . The display means consist essentially of 14 inch 35.56 cm flat screen video monitor without interleaving of the SVGA type with high resolution and low radiation which is used for video reproduction for example the covers of the albums of the musical selections graphics or video clips.

Mass storage means using high speed and high capacity SCSI type hard disks are connected to the storage means already present in the microprocessor device. These modules allow storage of digitized and compressed audiovisual data.

High speed 28.8 k bps telecommunications modem adapter is integrated to authorize connection to the audiovisual data distribution network controlled by a central server.

To reproduce the audio data of the musical selections the system includes loudspeakers which receive the signal from amplifier tuner connected to electronic circuit of the music synthesizer type provided to support a large number of input sources while providing an output with CD compact disk type quality such as for example a microprocessor multimedia audio adapter of the Sound Blaster card type SBP32AWE from Creative Labs Inc. on which two buffer memories are added for a purpose to be explained below.

Likewise the control circuit of the display means includes two buffer memories for a purpose to be explained below.

A thermally controlled 240 watt ventilated power supply provides power to the system. This power supply is protected against surges and harmonics.

The audiovisual reproduction system manages via its input controller circuit 14 inch 35.56 cm touch screen Intelli Touch from Elo Touch Systems Inc. which includes a glass coated board using advanced surface wave technology and an AT type bus controller. This touch screen allows after having displayed on video monitor or television screen various selection data used by the customers management command and control information used by the system manager or owner. It is likewise used for maintenance purposes in combination with external keyboard which can be connected to the system which has a keyboard connector for this purpose controlled by key lock via interface circuit .

Input circuit likewise interfaces with the system remote control set composed for example of an infrared remote control from Mind Path Technologies Inc. an emitter which has 15 control keys for the microprocessor system and 8 control keys for the projection device. an infrared receiver with serial adapter from Mind Path Technologies Inc.

Fee payment device from National Rejectors Inc. is likewise connected to input interface circuit . It is also possible to use any other device which allows receipt of any type of payment by coins bills tokens magnetic chip cards or a combination of means of payment.

To house the system a chassis or frame of steel with external customizable fittings is also provided.

Besides these components wireless microphone is connected to audio controller this allows conversion of the latter into a powerful public address system or possibly a karaoke machine. Likewise a wireless loudspeaker system can be used by the system.

Remote control set allows the manager for example from behind the bar access to and control of various commands such as microphone start stop command loudspeaker muting command audio volume control command command to cancel the musical selection being played.

Two buffers are connected to audio controller circuit to allow each to store information corresponding to a quarter of a second of sound in alternation. Likewise two buffers are linked to video controller circuit each able to store a tenth of a second of video each alternately. Finally respective buffer is connected to each of the circuits of communications controller input interface and storage interface .

The system operating software has been developed around a library of tools and services largely oriented to the audiovisual domain in a multimedia environment. This library advantageously includes an efficient multitask operating system which efficiently authorizes simultaneous execution of multiple fragments of code. This operating software thus allows concurrent execution in an orderly manner and avoiding any conflict of operations performed on the display means audio reproduction means as well as management of the telecommunications lines via the distribution network. In addition the software has high flexibility.

Prior to describing and reading this organizational chart in it must be noted that while all these modules described separately seem to be used sequentially in reality the specific tasks of these modules are executed simultaneously in an environment using the multitask operating system. Consequently the organizational chart indicates the specific operations which the module must perform and not a branch toward this module which would invalidate all the operations performed by the other modules.

The first module labeled SSM is the system startup module. This module does only one thing consequently it is loaded automatically when the system is powered up. If the system is started with a correct registration number it then directly enters the in service mode of the module labeled RRM.

The REG module is the registration mode module which when it is activated for the first time or when approval for a new registration is necessary indicates its software serial number and requests that the user enter his coordinates such as the name of the establishment address and telephone number.

The RMM module is the module of the in service mode which is the mode of operation which the system enters when its registration number has been validated. In this mode the system is ready to handle any request which can be triggered by various predefined events such as customers touching the screen when a customer or user touches the screen the system transfers control of the foreground session to the of the customer browsing and selection mode CBSM module telecommunications network server call requests when the system detects a loop on the phone line it broadcasts an asynchronous background procedure the telecommunications services mode of the TSM module requests concerning key switch when the manager turns the key switch the system hands over control of its foreground session to the management mode SMM module reception of a remote control signal when a command is received it is processed in a background session by the system command SMM module while the foreground session remains available for other interventions appearance of end of timing showing inactivity of the system when one of the various timers is activated control is temporarily handed over to the inactivity routines IRM module for processing.

The IRM module is the inactivity routines module. It contains the routines which perform predetermined functions such as album cover display broadcast of parts of musical pieces present in the system reproduction of complete selections for internal promotional proposes audio reproductions for external promotional purposes promotional spoken announcements of new musical selections withdrawal to an auxiliary source which can be called when the system is inactive and when a predefined but adjustable time interval corresponding to a timer has expired.

The SCM module is the system commands module. This module allows execution of functions which command the system to accept a required input by an infrared remote control device these functions being handled instantaneously without the process underway being stopped. A very large number of these functions are possible only some are listed below in a nonrestrictive manner audio volume control of the played selections audio volume control of the auxiliary played source microphone start stop command microphone audio volume control balance control left channel right channel control of base frequency level control of treble frequency level command to cancel or skip a musical selection panoramic effects command zoom forward zoom back triggering of reset of the software program.

The MMM module is the management mode module. This module is triggered when the key switch is turned by the manager. The display of an ordinary screen is replaced by a display specific to system management and system operating parameters. Using this screen system operating parameters such as the following can be controlled master volume level jukebox volume level auxiliary input radio volume level microphone volume level base level treble level title price for a predetermined value inactivity delay before starting the visual promotion mode inactivity delay before starting the auxiliary source radio inactivity delay before starting the selection sampling mode the location in seconds from the beginning where to start sampling sample duration in seconds .

All the values set using this control screen are backed up on disk and reread whenever the system is started.

The file containing the control values on disk is in a non readable machine format. The file occupies only 128 octets of disk space in all.

With this new display the manager can control all the settings which are possible with remote control. He can likewise take control of additional low level commands allowing for example definition of commands to be validated or invalidated on the remote control. He is also able to define a maximum of high and low levels for each system output source these limits defining the range available on the remote control. Using this screen the manager can access the mode of new selection acquisitions by touching a button located on the touch screen which initiates execution of the NSAM statistics module. When the manager has succeeded in defining these commands as well as the system configuration it is then enough to remove the key and the system returns automatically to the in service mode.

The CBSM module is the customer browsing and selection mode module. Access to this module is triggered from the in service mode when the customer touches the screen. The display allows the user to view a menu provided for powerful browsing assisted by digitized voice messages to guide the user in his choice of musical selections.

The TSM module is the telecommunications services mode module between the central server and the audiovisual reproduction system. The module allows management of all management services available on the distribution network. All the tasks specific to telecommunications are managed like the background tasks of the system. These tasks always use only the processing time remaining once the system has completed all its foreground tasks. Thus when the system is busy with one of its higher priority tasks the telecommunications tasks automatically will try to reduce the limitations on system resources and recover all the microprocessor processing time left available.

The SSC module is the system security control module. This module manages security each system is linked to a local controller system according to a preestablished time pattern for acquisition of the approval signal in the form of the registration number authorizing it to operate. In addition if cheating has been detected or the system cannot communicate via the network said system automatically stops working.

The SPMM module allows management of musical selections songs or video queued by the system for execution in the order of selection.

The multitask operating system comprises the essential component for allowing simultaneous execution of multiple code fragments and for managing priorities between the various tasks which arise.

This multitask operating system is organized as shown in around a kernel comprising module for resolving priorities between tasks task scheduling module module for serialization of hardware used and process communications module . Each of the modules communicates with application programming interfaces and database . There are as many programming interfaces as there are applications. Thus module includes first programming interface for key switch second programming interface for remote control third programming interface for touch screen fourth programming interface for keyboard fifth programming interface for payment device sixth programming interface for audio control circuit seventh programming interface for video control circuit and last interface for telecommunications control circuit .

Five tasks with a decreasing order of priority are managed by the kernel of the operating system the first for the video inputs outputs has the highest priority the second of level two relates to audio the third of level three to telecommunications the fourth of level four to interfaces and the fifth of level five to management. These orders of priority will be considered by priority resolution module as and when a task appears and disappears. Thus as soon as a video task appears the other tasks underway are suspended priority is given to this task and all the system resources are assigned to the video task. At the output video task is designed to unload the video files of the mass memory alternately to one of two buffers while other buffer or is used by video controller circuit to produce the display after data decompression. At the input video task is designed to transfer data received in telecommunications buffer to mass storage . It is the same for audio task on the one hand at the input between telecommunications buffer and buffer of mass memory and on the other hand at the output between buffer of mass memory and one of two buffers of audio controller circuit .

Task scheduling module will now be described in conjunction with . In the order of priority this module performs first test to determine if the video task is active i.e. if one of video buffers is empty. In the case of a negative response the task scheduling module passes to the following test which is second test to determine if the audio task is active i.e. if one of video buffers is empty. In the case of a negative response third test determines if the communication task is active i.e. if buffer is empty. After a positive response to one of the tests task scheduling module at stage fills memory request access queue and at stage executes this request by reading or writing between mass storage and the buffer corresponding to the active task then loops back to the first test. When test on communications activity is affirmative scheduler performs test to determine if it is a matter of reading or writing data in the memory. If yes the read or write request is placed in a queue at stage . In the opposite case the scheduler determines at stage if it is transmission or reception and in the case of transmission sends by stage a block of data to the central server. In the case of reception the scheduler verifies at stage that the kernel buffers are free for access and in the affirmative sends a message to the central server to accept reception of a data block at stage . After receiving a block error control of the cyclic redundancy check type CRC is executed. The block is rejected at stage in case of error or accepted in the opposite case at stage by sending a message corresponding to the central server indicating that the block bearing a specific number is rejected or accepted then loops back to the start tests. When there is no higher level task active at stage or the scheduler processes interface or management tasks.

Detection of an active task or ready task is done as shown in by a test respectively to on each of the respective hardware or software buffers of the hard disk of the interface of telecommunications and of audio and of video which are linked to each of respective controller circuits of each of the hardware devices linked to central unit . If one or more of these buffers are filled with data scheduler positions the respective status buffer or buffers for the hard disk for the interface for telecommunications for audio for video corresponding to the material at a logic state indicative of the activity. In the opposite case the scheduler status buffers are returned at stage to a value indicative of inactivity.

Thus in the case in which an electrical fault or hardware failure occurs the system will accordingly restart exactly at the same location where it had been interrupted.

Events which trigger back up of the operating status are insertion of money crediting addition of a selection to the queue end of a selection change from the selection currently being played .

The file is then in a machine format which can only be read by the unit and does not occupy more than 64 octets.

The number and type of active tasks is indicated to scheduler by execution of the selection management module SPMM whose flowchart is shown in . The management exercised by this module begins with test to determine if selections are in the queue.

Consequently if test on the queue determines that selections are waiting when a customer chooses a title he wishes to hear it is automatically written in a queue file of the system on hard disk.

Thus no selection made will ever be lost in case of an electrical failure. The system plays reproduces the selection in its entirety before removing it from the queue file.

When the selection has been reproduced in it entirety it is removed from the queue file and written in the system statistics file with the data and time of purchase as well as the data and time at which it was performed.

Immediately after transfer of the completed selection to the statistics file the system checks if there are others in the queue file. If there is another the system begins immediately to play the selection.

The total time transpired between the end of one selection and the start of the next is less than 0.5 seconds.

Processing is continued by test to determine if the selection contains an audio scenario. If yes at stage this scenario is written in the task queue of scheduler If not or after this entry processing is continued by test to determine if the selection contains moving images. If yes the video scenario is written at stage in the task queue of scheduler . If no or if yes after this entry processing is continued by test to determine if the selection contains still graphics. If yes at stage this graphic presentation scenario is written in the task queue of scheduler . If no or if yes after this entry processing is continued by test to determine if the selection contains an advertising scenario. If yes at stage the scenario is written in the queue of tasks of scheduler . Thus scheduler notified of uncompleted tasks can manage the progression of tasks simultaneously.

Due on the one hand to the task management mode assigning highest priority to the video task on the other hand to the presence of hardware or software buffers assigned to each of the tasks for temporary storage of data and the presence of status buffers relative to each task it has been possible to have all these tasks managed by a single central unit with a multitask operating system which allows video display i.e. moving images compared to a graphic representation in which the data to be processed are less complex. This use of video presentation can likewise be done without adversely affecting audio processing by the fact that audio controller circuit includes buffers large enough to store a quantity of compressed data sufficient to allow transfer of video data to one of video buffers during audio processing while waiting for the following transfer of audio data.

Moreover the multitask operating system which including a library containing a set of tools and services greatly facilitates operation by virtue of its integration in the storage means and the resulting high flexibility. In particular for this reason it is possible to create a multimedia environment by simply and efficiently managing audio reproduction video or graphics display and video animation. In addition since the audiovisual data are digitized and stored in the storage means much less space is used than for a traditional audiovisual reproduction system and consequently the congestion of the system according to the invention is clearly less.

Any modification by one skilled in the art is likewise part of the invention. Thus regarding buffers it should be remembered that they can be present either physically in the circuit to which they are assigned or implemented by software by reserving storage space in the system memory.

