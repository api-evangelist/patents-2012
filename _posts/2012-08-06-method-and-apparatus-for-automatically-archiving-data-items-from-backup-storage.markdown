---

title: Method and apparatus for automatically archiving data items from backup storage
abstract: A method and apparatus for automatically archiving data items from backup storage without having to first restore the data items is provided. In one embodiment, the method comprises processing at least one data item in backup storage using a mapping, wherein the mapping indicates at least one location of the at least one data item and ingesting the at least one data item into an archive database.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09223661&OS=09223661&RS=09223661
owner: Symantec Corporation
number: 09223661
owner_city: Mountain View
owner_country: US
publication_date: 20120806
---
This application is a continuation of U.S. patent application Ser. No. 12 191 785 entitled METHOD AND APPARATUS FOR AUTOMATICALLY ARCHIVING DATA ITEMS FROM BACKUP STORAGE filed Aug. 14 2008 now U.S. Pat. No. 8 239 348 and naming Angshuman Bezbaruah Ankur Panchbudhe Srineet Sridharan and Niels S. van Ingen as the inventors. This application is assigned to Symantec Corporation the assignee of the present invention and is hereby incorporated by reference in its entirety and for all purposes as if completely and fully set forth herein.

Embodiments of the present invention generally relate to data protection and archival systems and more particularly to a method and apparatus for archiving data items from backup storage without using an application resource to first restore the data items.

In a typical computing environment various data items e.g. emails word documents spreadsheets and or the like are backed up to one or more storage device e.g. magnetic tape drives on a regular basis. The backup may be performed to store and or protect important critical data. The data items may be backed up and organized in a proprietary format as backup images. Such backup images however are ill suited for data discovery and or compliance with various laws and or regulations. For example backup images do not index the data items or otherwise facilitate quick retrieval of stored data which is an essential requirement for efficient legal discovery. Furthermore backups are more data protection oriented and have traditionally been performed on magnetic tape storage media. Unfortunately the magnetic tape media does not lend itself to be easily indexed searched and analyzed based on content.

Archival software may be used for legal discovery e.g. E discovery and or legal compliance. Archival software perform an indexing process e.g. Intelligent Indexing on the data items and provide additional functionality by integrating with various tools such as case management tools analytics tools and or the like. Hence the archival software improves E discovery and legal compliance. On the other hand older historical data has been resident in backup tapes for a considerable period of time e.g. before the deployment of archival solutions in organizations . Litigation e.g. current pending and or the like may require that the historical data be migrated to disk based archives and be subject to indexing searching and or advanced analysis. Such migrations may be performed in the event of litigation knowledge of pending litigation and or as part of proactive record management. In order to meet the demands of current future litigation or legal compliance various organizations need to migrate the data items in the backup images to an archive.

Traditionally such a migration requires setting up an application resource e.g. application server such as MICROSOFT Exchange server to facilitate the data migration from a backup image to an archive. For example an administrator must configure an Exchange server and provision data storage to restore emails from a mailbox backup or complete Exchange Database images from an aggregate image backup. Then the administrator uses the archival software to archive the mails from the newly provisioned Exchange server. The organization must also use a specific version of the application resource to perform the restoration process e.g. restoring from an Exchange 5.0 or 5.5 backup image . The archival software uses the appropriate MAPI function calls to extract individual emails from a message store located in the data storage. As a result such a two step process consumes a significant amount of time money and other resources to migrate the data items from the backup image to the archive. The above mentioned process of archiving the data items from the backup image is inefficient and costly because it needs to first restore the data items and then archive the data items.

Therefore there is a need in the art for a method and apparatus for efficiently and automatically archiving data items from backup storage without using an application resource to first restore the data items.

Embodiments of the present invention comprise a method and apparatus for automatically archiving data items from a backup storage. In one embodiment a method for automatically archiving data items from backup storage without using an application resource to first restore the data items comprising processing at least one data item in backup storage using a mapping wherein the mapping indicates at least one location of the at least one data item and ingesting the at least one data item into an archive database.

The backup storage is any type of storage device that facilitates data storage and access such as a magnetic tape drive. According to various embodiments the backup storage includes backup data which may be a backup of data used by a computer network and initiated by the administrator computer . In one embodiment the backup data e.g. a mailbox backup e.g. a brick level backup a file level backup an aggregate data backup e.g. a SharePoint Image an Exchange Database Image and or the like includes various types of data items e.g. emails journal entries contacts notes web documents word documents spreadsheets and or the like .

The administrator computer is any type of computing device e.g. laptop desktop Personal Digital Assistant PDA such as those generally known in the art. The administrator computer includes a Central Processing Unit CPU various support circuits and a memory . The CPU may comprise one or more commercially available microprocessors or microcontrollers that facilitate data processing and storage. The support circuits facilitate the operation of the CPU and include one or more clock circuits power supplies cache input output circuits and the like. The memory comprises at least one of Read Only Memory ROM Random Access Memory RAM disk drive storage optical storage removable storage and the like. The memory includes a migration module and a mapping module .

The archive computer is any type of computing device e.g. laptop desktop Personal Digital Assistant PDA such as those generally known in the art. The archive computer includes a Central Processing Unit CPU various support circuits and a memory . The CPU may comprise one or more commercially available microprocessors or microcontrollers that facilitate data processing and storage. The support circuits facilitate the operation of the CPU and include one or more clock circuits power supplies cache input output circuits and the like. The memory comprises at least one of Read Only Memory ROM Random Access Memory RAM disk drive storage optical storage removable storage and or the like. The memory includes an archive database and an ingest filter .

The network comprises a communication system that connects a computer system by wire cable fiber optic and or wireless link facilitated by various types of well known network elements such as hubs switches routers and the like. The network may employ various well known protocols to communicate information amongst the network resources. For example the network may be a part of the internet or intranet using various communications infrastructure such as Ethernet WiFi WiMax General Packet Radio Service GPRS and the like.

Generally the backup data stores one or more data items of various types e.g. emails word documents aggregate data types spreadsheets and or the like . In one embodiment the backup data may include one or more backup files i.e. a backup image such as a full backup image an incremental backup image a synthetic backup image and or the like generated by enterprise backup software e.g. SYMANTEC NetBackup products SYMANTEC BackupExec products and or the like to represent a storage state of a computing environment according to one or more embodiments. Furthermore the backup files may be organized in a proprietary format in which the enterprise backup software is used to identify various backups within the backup files such as database level backups mailbox level backups volume level backups and or the like.

In one embodiment the backup data may include a mailbox backup e.g. Brick Level mailbox backup for MICROSOFT Exchange or a file level backup. In another embodiment the backup data may also include an aggregate data backup e.g. a database level backup such as MICROSOFT Exchange Database i.e. Information Store Backup MICROSOFT SharePoint Database backup and or the like. In yet another embodiment the backup data may include a volume level backup such as VMWARE Virtual Machine Disk backup MICROSOFT Virtual Hard Drive backup a snapshot a hard disk partition backup an image backup and or the like. As such the backup data may include one or more files of various types for encapsulating and representing a volume an image a hard disk a virtual machine drive and or a backup in a proprietary format. Accordingly such files may include virtual machine files e.g. .VHD .VMDK .VMX and or the like backup files e.g. .BKF .V2I .GHO and or the like and or disk files e.g. .IMG .VCD .ISO and or the like .

Moreover the backup data may include historical data or a data backup taken before the deployment of the archival software within the computing environment. For example the backup data may include backup images that were generated before the proliferation of the archival software. As such the archival software cannot extract individual data items e.g. files and or emails from the backup images. Hence the archival solution is unable to provide a solution for migrating one or more data items from the backup images into an archival repository without having to first restore the one or more data items to the application server. According to one or more embodiment the migration module cooperates with the archival software to accomplish such a migration as described further below.

According to various embodiments of the present invention the migration module includes software code that is configured to automatically archive the data items stored in the backup storage . In one embodiment the migration module may extract the data items from the backup data and subsequently ingest the data items into the archive database without using an application resource e.g. an applications server to restore the data items. In one embodiment the migration module extracts the data items based upon various criteria e.g. type content size and or the like . In one embodiment the migration module utilizes a mapping of the data items to extract the data items from the backup data as explained further below.

According to one or more embodiments the mapping module maps the one or more data items to locations within the backup storage e.g. addresses of data blocks within the backup data . In one embodiment the mapping module generates a mapping that indicates locations of the one or more data items within the backup data . Such a mapping facilitates the extraction of the one or more data items from the backup data by the migration module as explained below. In one embodiment the mapping module utilizes one or more known mapping techniques e.g. SYMANTEC BackupExec Granular Restore Technology GRT VERITAS Mapping Service VxMS and or the like to determine the locations of the one or more data items which are based on the organization of the one or more data items within the backup data i.e. based on the type of backup and or format of the one or more data items that form the backup data . In one embodiment the locations of the one or more data items may be created during a backup process that stores the backup data e.g. VERITAS NetBackup FlashBackup . In another embodiment the locations of the one or more data items may be discovered during a restore process e.g. SYMANTEC BackupExec Granular Restore Technology . Furthermore the mapping may be communicated to the archive computer to provide additional information for archiving the data items.

For example the mapping module uses a known mapping technique for a MICROSOFT Exchange Database backup to identify individual emails based on the format of the database files e.g. an .EDB file log files an .STM file and or the like . Subsequently the mapping module generates a mapping to indicate locations of the individual emails within the backup image e.g. the backup data serialized on magnetic tape . The mapping module may generate the mapping using an implementation of a Data Storage Engine Application Programming Interface API for accessing the individual emails within the backup image.

According to one or more embodiments of the present invention the archive database cooperates with archival software e.g. SYMANTEC Enterprise Vault to maintain content that includes the migrated data items from the backup storage e.g. magnetic tape drives . Generally the archive database is a searchable repository from which unstructured data is retrieved for various purposes e.g. discovery legal compliance case record management and or the like . In addition various software products e.g. enterprise content management software such as DOCUMENTUM Content Server IBM DB2 Records Manager and or the like operate with the archival software to organize and retain unstructured documents emails and other various data items from within a computing environment in the archive database .

The ingest filter may include software code for generating an ingest interface for archiving the data items. In one embodiment the interface includes definitions of various functions for ingesting the data items into the archive database . Once archived the data items are indexed and easily retrievable for use by the various software products. According to one or more embodiments the ingest filter may include an implementation of an Application Programming Interface API associated with various software products such as archival software e.g. SYMANTEC Enterprise Vault e discovery software e.g. SYMANTEC Discovery Accelerator classification software e.g. SYMANTEC Automatic Classification Engine compliance software e.g. SYMANTEC Control Compliance Suite content record management software e.g. DOCUMENTUM Content Server and or the like. In one embodiment SYMANTEC Enterprise Vault Connectors specify various functions that may be used by the various software products to interact with the archive computer e.g. ingest the data items into the archive database organize archived data items into a particular presentation format for legal compliance reporting and or the like .

For example the Enterprise Content Management ECM API for Enterprise Vault may be used for ingesting files and emails into a repository such as the archive database while enabling management of such files and emails through various ECM software products e.g. DOCUMENTUM Content Server IBM DB2 Records Manager and or the like . According to one embodiment the migration module invokes one or more ECM API functions in order to ingest files and or emails into the archive database .

According to one or more embodiments the migration module and the mapping module cooperate to examine the backup data in order to select and apply the appropriate mapping technique to extract the data items. In one embodiment the migration module mounts the backup data and uses the mapping module to identify the type of backup e.g. aggregate database level backup volume level backup mailbox level backup file level backup and or the like . In one embodiment based on the format of the data items the mapping module selects an appropriate mapping technique to determine locations of the data items within the backup data and generate a mapping indicating such locations. As mentioned above the migration module may communicate the mapping to the archive computer .

For example the migration module may determine that the backup data is a mailbox level backup such as a brick level MICROSOFT Exchange mailbox backup because the backup data includes one or more emails that are not organized in an aggregate email database. As another example the mapping module may determine that the backup data is a database level backup such as a MICROSOFT Exchange database image backup since the backup data includes one or more databases in EDB or STM format and various log files. As yet another example the mapping module may determine that the backup data is a virtual hard disk backup such as a VMWARE virtual machine disk because the backup data includes one or more virtual disks in VMDK format.

According to various embodiments of the present invention the migration module utilizes the mapping generated by the mapping module to extract one or more data items from the backup data . In one embodiment as the backup data is streamed from magnetic tape drives the migration module identifies and extracts the data items using the mapping. Furthermore based on the mapping the migration module selects such data items by applying various criteria e.g. type content size and or the like according to one embodiment. If the backup data includes an aggregate data backup the data items may be extracted directly from the backup data e.g. as streamed from the magnetic tape drives using the mapping generated through a granular access technique e.g. SYMANTEC Backup Exec Granular Restore Technology NetBackup FlashBackup and or the like . Alternatively the backup data e.g. a backup image may be copied to a disk staging area e.g. a separate directory on a hard disk and then the data items are extracted individually through the granular access technique.

According to various embodiments of the present invention the migration module communicates the extracted data items to an ingest interface generated by the ingest filter . In one embodiment the migration module invokes appropriate functions on such an ingest interface to archive the data items. For example the migration module may use the ingest interface to store the data items in the archive database set a retention period perform intelligent indexing to facilitate search and retrieval classify the data items e.g. as financial data technical data and or the like and or any other archival or management operation. In another embodiment the migration module may use the ingest interface e.g. ECM API to archive the data items through enterprise content record management software as described above. Furthermore the migration module may use the interface to archive the mapping generated by the mapping module according to one or more embodiments. For example the locations of the data items may also indicate relationships between one or more data items which may enhance the effectiveness of the archival software.

In one embodiment the migration module utilizes a granular restore technique to extract one or more emails from an image that includes a MICROSOFT Exchange Database .EDB file . As an example the migration module uses the ingest interface to store the one or more emails in a table in the archive database . In one embodiment archival software associated with the archive database indexes the one or more emails to facilitate fast search and retrieval for E discovery and or legal compliance purposes. At a later date a computing device may query the archive database to retrieve emails according to one or more criteria such as emails to from the CEO. For example compliance and or content management software may access manage and or otherwise process the emails for various purposes as mentioned above.

As another example the migration module may extract one or more files e.g. spreadsheets databases documents and or the like that contain financial data from a MICROSOFT SharePoint database image. For example the mapping module determines that the backup data is an aggregate data backup of a MICROSOFT SharePoint Server because the backup data includes one or more MICROSOFT Web Parts built on Windows SharePoint Services WSS . The migration module copies the MICROSOFT SharePoint database image to the disk staging area and extracts the financial data e.g. using a granular harvesting technique such as BackupExec Granular Restore Option GRO . Subsequently the migration module uses the ingest interface to archive the financial data. For example the financial data may be organized in a particular structure in order to comply with various laws and regulations. Furthermore compliance software may access the archived financial data and create reports in a particular presentation format for submission to a court of law a government agency an administrative hearing and or the like.

At step a mapping of the data items is processed. In one embodiment a granular access technique e.g. BackupExec GRT may be used to generate the mapping for the one or more data items within the backup image. In another embodiment the mapping may be generated during the backup process e.g. NetBackUp FlashBackup . At step the one or more data items are extracted from the backup image. The step is discussed further below for . At step an ingest interface function for an archival system e.g. the archive computer and the archive database of is selected. At step the one or more data items are archived through the ingest interface. In one embodiment information indicating original locations of the one or more data items is obtained from the backup image and communicated to the archival system. As a result functionality of the archival system is enhanced with knowledge of the original locations of the one or more data items within the backup image.

At step a determination is made as to whether there are more data items in the backup image to be archived. If it is determined that there are no more data items in the backup image to be archived option NO then the method proceeds to step . If at step it is determined that there are more data items in the backup image to be archived option YES then the method proceeds to step . At step a determination is made as to whether there are more backup images to be migrated. If it is determined that there are no more backup images to be migrated option NO then the method proceeds to step . If at step it is determined that there are more backup images to be archived option YES then the method proceeds to step . At step the method ends.

At step a determination is made as to whether the backup image is an aggregate data backup. If it is determined that the backup image is an aggregate data backup option YES then the method proceeds to step . At step a determination is made as to whether copying the backup image to the disk staging area is required. If the backup image is required to be copied to the disk staging area the method proceeds to step . If the backup image is not required to be copied to the disk staging area the method proceeds to step . For example if individual data items may be directly extracted from the tape media then the backup image is not required to be copied to the disk staging area. As another example if the backup image already resides on a random access storage media then the backup image is not required to be copied to the disk staging area. At step the backup image is copied to a disk staging e.g. a separate directory area. At step the data items are extracted from the backup image using a granular access technique e.g. SYMANTEC Backup Exec Granular Restore Technology NetBackup FlashBackup and or the like . The method proceeds to step where the method ends.

If at step it is determined that the backup data is not an aggregate data backup option NO then the method proceeds to step . At step a determination is made as to whether the backup data is a data item level backup e.g. a file level backup a mailbox level backup and or the like . If it is determined that the backup data is a data item level backup option YES then the method proceeds to step . At step the data items are extracted individually. The method proceeds to step where the method ends. If at step it is determined that the backup data is not a data item level backup option NO then the method proceeds to step . At step the method ends.

Thus various embodiments of the present invention have been provided. The inventive methods and apparatus may advantageously provide significant reduction of data migration time. The inventive apparatus advantageously minimizes the space required to store data. In another embodiment the inventive apparatus may be utilized to provide storage efficiency. According to various embodiments of the present invention the inventive methods and apparatus may advantageously be utilized to provide data discovery and or legal compliance.

While the foregoing is directed to embodiments of the present invention other and further embodiments of the invention may be devised without departing from the basic scope thereof and the scope thereof is determined by the claims that follow.

