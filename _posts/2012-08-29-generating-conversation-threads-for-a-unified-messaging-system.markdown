---

title: Generating conversation threads for a unified messaging system
abstract: In one embodiment, a method includes accessing a communication sent from a first user to one or more second users; searching multiple communication threads for a specific thread associated with both the first and second users; and if the specific communication thread is located, then adding the communication to the thread; and for each second user, sending the communication to the second user using a communication protocol selected determined to be appropriate.
url: http://patft.uspto.gov/netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-adv.htm&r=1&f=G&l=50&d=PALL&S1=09113315&OS=09113315&RS=09113315
owner: Facebook, Inc.
number: 09113315
owner_city: Menlo Park
owner_country: US
publication_date: 20120829
---
This application is a continuation under 35 U.S.C. 120 of U.S. patent application Ser. No. 13 330 049 filed 19 Dec. 2011.

The advent of social networking instant messaging and ubiquitous wireless data networks allows individuals to select from a plurality of methods to communicate with their contacts. In the past communications between individuals were limited to physical mail wired telephones fax and wireless telephones. However with the expansion of the Internet coupled with mobile devices capable of maintaining a data connection to the Internet users may select from a plethora of communications means such as cellular phone calls e mail to multiple accounts multiple instant messaging protocols twitter messages voice over IP VoIP calls video chats SMS and MMS messages social networking messages voicemail push to talk PTT and dedicated notification based message clients such as the BLACKBERRY Messenger and KIK Messenger. Typically users are less concerned by the actual communications method used with their contacts and more concerned with the content of the communication and to or from whom it was conveyed.

Mobile devices such as mobile phones tablets and personal computers often communicate through wireless networks provided by cellular carriers. Modern 3G and 4G networks both CMDA2000 based and GPRS based permit simultaneous access of wireless data through the packet switched portion of its wireless cellular network and voice data through the circuit switched portion of its wireless cellular network. Modern wireless cellular networks permit simultaneous communication through the packet switched data portion of their networks and through their short message service SMS channels. Additionally wireless devices may also communicate through one or more wireless LANs such as 802.11 WI FI networks. Based on service coverage and the location of a wireless device a given wireless device may have varying degrees of connectivity. Typically users are less concerned with the actual data channel used to deliver or receive a message and more concerned with the content of the communication and to or from whom it was conveyed.

This disclosure generally relates to transmitting data of disparate communication protocols or data channels between two or more client devices via an intermediate messaging service that aggregates all the communications into a single communications thread regardless of type or transport channel.

In particular embodiments the messaging service applies or more policies to messages transmitted from or to client devices dictating the mode of transmission for a particular device. In particular embodiments where policies dictate transmitting a message via SMS a MS server of the messaging service transmits the SMS to the carrier recipient via a special bind allowing the message to appear as if it initiated from the transmitting device rather than the SMS server. In particular embodiments the transmitting client device transmits the message via SMS after explicit instruction from the messaging service.

In particular embodiments the messaging service connects directly to client device s voicemail boxes and download voicemails to the messaging service backend servers. In particular embodiments client devices download the voicemails from their carrier voice mailbox and transmit them up to the messaging service backend server for aggregation.

In particular embodiments the messaging service provides a common short code CSC that is in direct connection with the messaging servers. A client device lacking a data connection may transmit a message as an SMS to the CSC after which the messaging service may deliver the message in accordance with one or more recipient policies.

These and other features aspects and advantages of the disclosure are described in more detail below in the detailed description and in conjunction with the following figures.

This disclosure is now described in detail with reference to a few embodiments thereof as illustrated in the accompanying drawings. In the following description numerous specific details are set forth in order to provide a thorough understanding of this disclosure. However this disclosure may be practiced without some or all of these specific details. In other instances well known process steps and or structures have not been described in detail in order not to unnecessarily obscure this disclosure. In addition while the disclosure is described in conjunction with the particular embodiments it should be understood that this description is not intended to limit the disclosure to the described embodiments. To the contrary the description is intended to cover alternatives modifications and equivalents as may be included within the spirit and scope of the disclosure as defined by the appended claims.

In network communications one device may push a communication to another device. In particular embodiments with push technology the sending device typically initiates the communication transaction and may transmit the communication to the receiving device without obtaining a permission from the receiving device first. In other words the communication is pushed to the receiving device whether or not the receiving device actually wants to receive the communication.

Push technology may be used under various circumstances. For example in a client server environment a server may push communications to a client. The client may be any type of electronic device capable of network communications. In particular embodiments the client may be a mobile device e.g. a mobile telephone a smart phone a tablet computer etc. capable of wireless communications and the server may push communications sent over a mobile network or a wireless network to the mobile client. Alternatively or in addition in particular embodiments the client may be a non mobile computing device e.g. a desktop computer capable of connecting to a computer network through a wired connection e.g. an Ethernet connection . The server may push communications to the non mobile client over the computer network e.g. the Internet .

In particular embodiments a social networking system implemented for example as a social networking website may push communications to the client devices of its users. A social network in general is a social structure made up of entities such as individuals or organizations that are connected by one or more types of interdependency or relationships such as friendship kinship common interest financial exchange dislike or relationships of beliefs knowledge or prestige. In more recent years social networks have taken advantage of the Internet. There are social networking systems existing on the Internet in the form of social networking websites. Such social networking websites enable their members who are commonly referred to as website users to perform various social activities. For example the social networking website operated by FACEBOOK Inc. at www.facebook.com enables its users to communicate with their friends via emails instant messages or blog postings organize social events share photos receive news of their friends or interesting events play games etc.

In order to maintain connectivity with its users a social networking system may maintain a constant open connection with each of the mobile devices associated with a particular user account. This open data connection allows the social networking system to push notifications to client devices the client devices to request content from the social networking system and the client devices to transmit information back to the social networking system servers. For example a client device may wish to constantly update the social networking system of its location. As another example the client device may wish to perform some sort of action on the social network and may request through HTTP or another suitable protocol a web page for performing the specific action. In other cases the social networking system may wish to push a notification of a message from one social networking user to another. In particular embodiments this open data connection utilizes a TCP IP connection. In particular embodiments the open data connection utilizes a VPN tunnel such as in MICROSOFT Direct Push. In particular embodiments the open data connection utilizes the SMS channels for push notifications. This disclosure contemplates any suitable manner of maintaining an open connection for unidirectional or bidirectional communication between a social networking system and a client device.

By using multiple servers the workload of the social networking website may be shared and balanced among the multiple servers and thus the performance of the social networking website may be improved. For example the social networking website may have hundreds of millions of users around the world and at any given time a great number of these users may be connected to the website through their respective user devices. New users may continually join the website as well. These users may be shared and balanced among multiple channel servers to be serviced. In particular embodiments a hash algorithm may be applied to the user identifier e.g. the username or account number of each user to determine to which channel server a specific user is assigned. In addition or alternatively channel servers may be placed at different physical locations around the world and a user may be assigned to a channel server that is relatively close e.g. in terms of physical distance to the user s device. For example a user located in Japan may be assigned to a channel server located in Japan or China while a user located in England may be assigned to a channel server located in France.

In particular embodiments each client may be associated with a user as a user device. Each client may be a mobile or non mobile device and connected to a network wirelessly or through a wired connection. In particular embodiments when a user connects with the social networking website through his her client i.e. the user device client may establish one or more connections with an edge server . Each connection may be a TCP IP connection. More specifically client may be connected with an edge server that is connected to the channel server to which the user of client is assigned.

In particular embodiments client device may include hardware and software . In particular embodiments hardware may include any number of hardware components such as for example and without limitation processor memory storage transceiver input output device e.g. display touch screen keypad microphone speaker etc. camera global positioning system GPS sensor sensors hub notification control switch RFID reader RF sensor and so on. This disclosure contemplates any suitable hardware components. In particular embodiments some or all of a user s user data may be stored in storage .

In particular embodiments software may include an operating system which may include a kernel and or any number of device drivers corresponding to some of the hardware components available on client device . Operating system may be selected for client device based on the actual type of device client device is. For example if client device is a mobile device e.g. a smart phone then operating system may be a mobile operating system such as for example and without limitation MICROSOFT S WINDOWS MOBILE GOOGLE S ANDROID NOKIA S SYMBIAN APPLE S IOS and SAMSUNG S BADA.

In particular embodiments there may be a connection pool manager residing and executing on client device which may be implemented as computer software. In particular embodiments one or more software applications may be executed on client device . In particular embodiments they may be native applications installed and residing on client device . For example one application e.g. GOOGLE MAPS may enable a device user to view a map search for addresses and businesses and get directions a second application may enable the device user to read send and receive emails a third application e.g. a web browser may enable the device user to browse and search the Internet a fourth application may enable the device user to take photos or record videos using camera a fifth application may allow the device user to receive and initiate VoIP and or cellular network calls and so on. In particular embodiments there may be a software application e.g. notification control that enables the device user to manage the notifications pushed to client device . Each software application may have a user interface and may implement one or more specific functionalities. Each software application may include one or more software modules implementing the individual functionalities. The executable code of software applications including notification control may be stored in a computer readable and non transitory medium e.g. storage or memory on client device .

Client devices and A connect via wireless transmission media to a plurality of RF transceiver stations and A operated by wireless cellular networks and A. In particular embodiments mobile devices and A may obtain connectivity to Internet through one or more wired or wireless networks not operated by wireless cellular network and A operators. For example mobile devices and A may connect to Internet through public or private 802.11 WI FI networks 802.3 wired Ethernet LANs 802.16 WIMAX wireless networks or BLUETOOTH personal area networks not shown . For the purposes of this disclosure mobile devices and A do not distinguish between data connections through the aforementioned non cellular data networks and wireless cellular networks and A so long as they have data connectivity the data delivery channel is considered active and available.

In particular embodiments mobile devices and A may each be associated with a unique user identifier for a messaging service or social networking system. In particular embodiments mobile devices and A may associate with a particular user identifier the first time a user of mobile devices and A log into the messaging service or social networking system. In particular embodiments users with access to accounts on the messaging service or social networking system associated with the user identifiers may access the service system through web clients and A from any terminal having access to Internet . In particular embodiments web clients and A are not associated with any particular user identifier until the user provides login credentials any number users of the messaging service or social networking system may access their respective accounts through a single web client or A. In particular embodiments In particular embodiments mobile devices and A may be installed with a messaging client application that overrides gen

In particular embodiments mobile devices and A connect to a messaging service or social networking system via the notification channel as described above. In particular embodiments a dedicated mobile application maintains the always on data connection between social networking servers or messaging infrastructure. In particular embodiments the mobile application replaces conventional mobile device phone applications controlling dialing email SMS text messaging picture messaging instant messaging voicemail etc. into a unified messaging client. For the purposes of this disclosure mobile devices having an associated user identifier with the social networking system or messaging service as well as a unified messaging application replacing traditional mobile device messaging applications and maintaining an always on notification data channel to the social networking system or messaging service such as mobile devices and A are herein referred to as messaging client devices. 

Mobile devices B and C represent mobile devices connected to wireless cellular networks and A that either lack the messaging client described above in other words plain mobile devices or devices having the messaging client but who have no data connectivity. Thus in certain scenarios users of messaging client devices may send to or receive from mobile devices unassociated with any particular user identifiers on the social networking system or messaging service. In other scenarios messaging client devices may only have connectivity through SMS and voice channels as described in further detail below and cannot connect through a data channel to the social networking system or messaging service.

As one of ordinary skill in the art may recognize wireless cellular networks and A may be provided by the same or different wireless carriers. Wireless cellular networks and A may be of any suitable type including without limitation GSM based cellular networks including but not limited to EDGE GPRS UMTS HSDPA HSUPA LTE and the like or CMDA based cellular networks including but not limited CDMA2000 EVDO LTE and the like . Wireless cellular networks and A connect to the public IP network Internet through their packet switched core networks and A and to the public switched telephone network PSTN or IP based voice branch exchanges through circuit switched networks and A. Each wireless cellular network and A s carrier maintains one or more short message service centers SMSCs and A for receiving storing and delivering SMS text messages and MMS messages. When transmitting an SMS message from one carrier network to another such as from SMSC to SMSC A messages are commonly routed through inter exchange carrier IXC .

In particular embodiments each subscriber to wireless cellular networks and A may have an associate voice mailbox on carrier voicemail servers and A. Typically subscribers dial to a particular number at which point they must authenticate with voicemail servers and A to obtain access to their stored voicemails. In particular embodiments voicemail servers and A may authenticate via caller ID and a password. In particular embodiments the user must enter both his or her cellular number and password. In particular embodiments voicemail servers and A may automatically authenticate using the subscriber s device media access control MAC address. In particular embodiments voicemail servers and A utilize push communications to transmit stored messages as audio files to subscriber devices. In particular embodiments voicemail servers and A utilize push communications to deliver new message notifications. In particular embodiments the push notifications may be through the SMS channel. In particular embodiments voicemail servers and A perform speech to text processing and deliver a transcription of stored voicemails in the form of emails SMS text messages or other text formats. This disclosure contemplates any suitable voicemail servers and A.

Mobile devices A and users of web clients and A connect to social networking system servers through Internet . For the purposes of this disclosure the unified messaging system is implemented by and integrated with a social networking system. However one of ordinary skill in the art can envision a unified messaging system that is untied from a social networking system. In particular embodiments the unified messaging system may integrate with other third party sites such as crowd sourced review sites shopping sites and the like. In particular embodiments the unified messaging system may integrate with a plurality of social networking system email services voice over IP VoIP video chat push to talk PTT or other communication services. This disclosure contemplates a unified messaging system that may integrate with any suitable communications service or protocol. For the purposes of this disclosure the term messaging infrastructure and social networking system are interchangeable.

Messaging infrastructure may include one or more messaging servers collectively providing a unified messaging infrastructure. Mailbox server facilitates delivery organization and storage of messages relayed through social networking servers . Mailbox server maintains a user mailbox A etc. for each user of the social networking system. In particular embodiments users may view their mailbox from messaging client applications on mobile devices and A or by logging in to a social networking website via web clients or A.

Mailbox server is also responsible for organizing all messages into individual conversation threads. For example if user A and user B communicate over the course of their relationship via a plurality of communication methods such as email phone text etc. mailbox server aggregates all the messages exchanged between user A and user B into a single thread. Thus both users A and B may quickly access all their interactions with each other from their mobile device or through a web interface without concerning themselves as to what service was used to deliver or send the message. Similarly users do not need to concern themselves with deciding how to best reach a particular user. These features are described in further detail below.

Mailbox server may in particular embodiments store conversation threads in a thread database A. Thread database A may be a separate server from or in particular embodiments a part of mailbox server . In particular embodiments thread database A may comprise multiple distributed servers to cope with the requirements of storing a large number of messages for potentially hundreds of millions of users. In particular embodiments conversation threads are organized by the participants in the conversation. In the example above a conversation between users A and B would constitute a unique thread having a unique thread identifier thread ID . As another example a conversation between users A B and C could in particular embodiments constitute another unique thread and similarly having its own unique thread ID . In particular embodiments the conversation participants are identified by their unique social networking user identifier. In particular embodiments the conversation participants are identified by their phone number. Particular exemplary methods of sorting messages and associating them with conversation threads is discussed further with reference to .

Mailbox server may in particular embodiments access a policy database B containing a set of policies for each user defining how each user wishes to send or receive messages. For example certain users may wish to only receive messages via email to avoid messaging charges. As another example certain users may wish to reduce data plan charges and transmit messages only via SMS. In particular embodiments users may fine tune their message delivery policies based on any definable factor. For example a user may enter his or her messaging plan details for example that he or she receives 300 free SMS text messages per billing cycle and specify that all messages after 300 are to be transmitted or received via SMS. As one of ordinary skill in the art can envision these policies may be applicable to any conceivable communications service or protocol for example a user may specify that all calls be delivered over a VoIP client when data service is available and only through circuit switched network when a data connection is unavailable. In particular embodiments the social networking system may implement selectable policy modes such as best effort delivering the message through any available communications channel guaranteed delivery delivering the message only through SMS or data protocols that acknowledge reception or reading such as BBM or KIK messenger low bandwidth delivering the message as cheaply as possible and the like. In particular embodiments the policy may be based off the explicit or inferred urgency of a message. For further discussion of an urgency indicator for messages please see commonly owned U.S. patent application Ser. Nos. 13 277 096 and 13 277 121 respectively entitled Urgency Notification Delivery Channel and Inferential Urgency Notification Delivery Channel both filed on 19 Oct. 2011 and herein incorporated by reference. This disclosure contemplates any suitable method of defining message transmission reception policies based on any number of factors.

In particular embodiments messaging infrastructure includes a simple mail transfer protocol SMTP server . SMTP server transmits email to external email accounts. In particular embodiments SMTP server may transmit all emails from a default email address on behalf of a particular user such as usemame facebook.com. In particular embodiments SMTP server may perform email sender spoofing to generate an email message that appears to have originated from a different email account for example an employee may wish for all messages to appear to have gone through his employer s domain. In particular embodiments the user may configure one or more policies in policy db B that dictates what address SMTP server spoofs. Methods of email address spoofing are well known in the art and will not be discussed further here.

In particular embodiments messaging infrastructure includes a common short code CSC server . CSC server receives SMS messages from messaging client devices addressed to a special short code such as 32665. In particular embodiments CSC Server also transmits SMS messages to messaging client devices A as well as non messaging client devices B and C. Short codes also known as short numbers are special telephone numbers significantly shorter than full telephone numbers that can be used to address SMS and MMS messages from certain service provider s mobile phones or fixed phones. Short codes are designed to be easier to read and remember than normal telephone numbers.

In particular embodiments messaging infrastructure includes an SMS server for transmitting SMS messages directly to carrier SMSCs. In particular embodiments the social networking system may establish special relationships with carriers of wireless networks and A to configure special binds between SMS server and carrier SMSCs and A. These special binds permit the messaging infrastructure to transmit an SMS message to a non messaging client mobile device while spoofing the phone number of the sender. For example if messaging client user A transmits an SMS message to a mobile phone number on wireless cellular network A using the CSC server user B receives an SMS from for example 32665 instead of the mobile number of user A. This concern is not an issue when user B utilizes the unified messaging client which will replace the sender number with the appropriate user name. However when transmitting a message using a special carrier bind the recipient mobile phone receives an SMS with the phone number of User A s device in the from field even though the SMS actually originated from SMS server . In particular embodiments SMS server connects to carrier SMSCs via a short message peer to peer SMPP message over Internet . In particular embodiments SMS server may be part of CSC server . In particular embodiments SMS server and CSC server may share a common IXC . This disclosure contemplates any suitable arrangement of servers for the delivery of SMS messages to carrier SMSCs and A.

Social networking system messaging infrastructure may include web servers channel servers and edge servers as previously described with reference to . Client devices and A may be connected to the same or different ones of web channel and edge servers and respectively.

As previously discussed messaging infrastructure maintains a notification channel depicted as the solid line in with both mobile device and A. As previously discussed the notification channel may be a persistent TCP IP connection VPN tunnel or any other suitable persistent data connection. The notifications channel between servers and mobile devices maintains a connection through Internet and the packet switched data core network of mobile device s wireless cellular network . From wireless cellular network the data is transmitted to RF transceiver the cell tower base station Node B and the like that is servicing mobile device . Similarly the notification channel between social networking servers and mobile device A maintains a connection through Internet and packet switched data core network A in mobile device A s wireless cellular network A. Wireless cellular networks and A may be disparate wireless cellular networks or where mobile devices and A are serviced by the same carrier a single wireless cellular network.

As previously discussed the notification channel may be a persistent TCP IP connection and mobile devices and A may periodically send keepalive messages to social networking system messaging infrastructure . In particular embodiments mobile devices and A adjust the keepalive interval based upon an adaptive algorithm. In particular embodiments keepalive messages are transmitted at a pre set interval. In particular embodiments keepalive messages may be transmitted from the server to the handsets. In particular embodiments the notification channel utilizes the packet switched data network for upstream data such as HTTP requests or uploads from mobile devices and A and SMS channels and A for pushing notifications to mobile devices and A. This disclosure contemplates any suitable method of establishing and maintaining a persistent data connection between social networking system and mobile devices and A.

Because of the size constraints of SMS in particular embodiments when transmitting messages via SMS channel B both messaging client mobile devices A as well as messaging infrastructure performs SMS concatenation. In particular embodiments concatenated SMS messages are transmitted in accordance with 3GPP TS 23.040. In particular embodiments concatenated SMS messages are transmitted with a user data header UDH that includes the number of total messages in the sequence and the particular message s number in the sequence. Methods of transmitting messages longer than characters as multiple concatenated SMS messages are well known in the art and will not be discussed in detail here.

Upon selecting the conversations button the application opens a list of conversations arranged in this example temporally with the most recently active conversation first. The conversations are separated into two tabs friends and others . Friends tab displays conversations with contacts that are also members of social networking system. Others tab displays conversations with participants who are not members of social networking system. For example the may have a contact stored as Mom in their client device that does not correspond to a user on the social network. The conversation between the user and his or her mom will be displayed in others tab . As another example the user may receive a call from a telemarketer dialing from 650 555 5555 who is neither a member of the social network nor a stored contact. However because call log data is generated for this incoming call the conversation between the and 650 555 5555 will be displayed in others tab .

The first conversation represents a conversation between six users all members of the social network Joel Seligstein Dan Hield Joe Lei and 2 others. Conversations and represent conversations with individual contacts in these examples Grace O Malley Alex Chang and James White.

For each conversation a brief summary of the conversation is presented in the interface. In one embodiment the summary includes the names of the conversation participants pictures of the conversation participants and an excerpt from the most recent message in the conversation. In one embodiment conversations including multiple participants do not have pictures to save space. The summaries are organized by time date so that conversations with the most recent messages are placed higher in the interface. The name and or picture of the user that the mailbox belongs to the mailbox owner is not displayed in the summary because it is understood that the mailbox only includes conversations in which the mailbox owner is a participant.

When a conversation has a large number of participants in one embodiment only a sub set of the names are presented to simplify the summary. The sub set can be any number of participants from the conversation. For example conversation has six participants. In one embodiment only the names of a sub set of conversation participants are displayed. The name of the mailbox owner is not shown in the summary. The names of the other participants are grouped together and presented as 2 others. 

In one embodiment the brief excerpt may be extracted from the content of the most recent message in the conversation. For example in conversation the excerpt includes the text But do you always have to match your shoes . . . which is the most recent message from this conversation . In other embodiments the brief excerpt is extracted from other information that is not message content such as metadata associated with the message. For example the brief excerpt could be the title of the most recent e mail message in the conversation.

In one embodiment the mailbox server aggregates messages of different formats e mail SMS text instant message and communication protocols voice VoIP video etc. into conversations. Each conversation thus becomes a historical record of all correspondence between a set of users regardless of the format of the messages or log data. For example if Adam sends an online instant message to Bob and also separately sends an e mail to Bob both of these messages are placed into the same conversation. Similarly if Bob leaves Adam a voicemail an indicator of the voicemail such as the date and time it was left or alternatively transcribed text from the voicemail will be placed into the conversation. As another example if Adam calls Bob the log of the call will be placed in the conversation as well. Thus the conversations window groups all communications irrespective of format or protocol in a single history for each of the user s real world contacts.

Shown is a one on one conversation between the user and James White that comprises of a series of messages . Although messages may have been delivered via different accounts and with different communications services such as email IM text etc. each message is merely displayed as a message without further indication of how the message was delivered. Icon indicates a message was marked by James as urgent. Icon indicates that there was an incoming phone call from James White and the entry associated with icon indicates that the call was received yesterday at 11 00 AM and lasted 4 minutes 53 seconds. The conversation can be updated live as new messages are received that update the conversation. As discussed above a conversation is akin to a historical record of all correspondence between a set of users. Through the interface a mailbox owner can scroll backwards in time to view the entire history of the messages in the conversation. In one embodiment some of the messages can have attachments such as pictures videos documents etc. The pictures and video can be shown in the interface with a preview of the attachment instead of just a link to the attachment. For example an attached picture can be shown in the interface with a thumbnail of the picture. For the mailbox owner the conversation appears to include both outgoing and incoming messages and log data.

At Step the user of mobile device initiates a message to a recipient. The user may initiate this communication in a variety of ways. For example referring to the user may select an existing thread from his or her threads with friends and upon being taken to the thread view of select the message button or the call button . The user may perform this same process for threads in the others tab . The user may also select the new message option and enter a phone number or select a contact from his or her locally or remotely stored list of contacts. The user may also actuate keypad and enter a phone number to initiate a voice communication. Regardless of the method the user initiates a communication at Step the client device proceeds to step .

At Step the client device checks whether the communication belongs in an existing thread. For example if a user selects a thread and replies to a message in the thread mobile device is aware that the message belongs in the existing thread. As another example if the user manually selects one or more contacts or enters one or more recipient numbers client device may perform a lookup of locally stored threads for the same recipients. As an example referring to if the user selects new message and enters the number for Alex Chang mobile device may search for locally stored conversation threads having only the user and Alex Chang as participants. In particular embodiments as wireless data speeds increase and latency decreases client device may search existing threads by querying mailbox server . This disclosure contemplates any suitable method of determining whether an outgoing communication belongs in a thread.

At Step if client device finds a thread matching the participants of the outgoing communication client device pulls the thread ID from the thread and appends it to the communication whether the communication is a message or a call log entry. If client device is unable to find a thread having the same participants as the outgoing communication at Step client device generates a unique offline identifier or offline ID for the message.

In particular embodiments the offline ID is an identifier that is unique to each message. In particular embodiments client device generates a UUID for each message it transmits or receives regardless of whether it is part of an existing thread. In particular embodiments client device only generates a UUID for messages that are not part of an existing thread. Given that there are potentially hundreds of millions of users each transmitting thousands of messages an offline ID of sufficient size must be generated to maintain uniqueness. In particular embodiments the offline ID is 128 bits long. In particular embodiments the offline ID is generated by a random number algorithm. In particular embodiments the offline ID is generated based on the client device ID time GPS location or other factors. Methods for generating universally unique identifiers UUIDs are well known in the art and are not further described herein. This disclosure contemplates any suitable method of generating a unique offline ID for a message.

At Step client device builds a message object to transmit to messaging infrastructure . In particular embodiments the message object is a JavaScript Object Notation object. In particular embodiments the message object includes the message body or call log data if the communication is a call the identifiers for the recipients if the message is a new thread the thread ID if the message is part of an existing thread and the offline ID of the message if it exists .

Therefore in particular embodiments message objects for messages belonging to existing threads contain only the body and thread ID in order to reduce message object size and therefore device bandwidth. In particular embodiments messages that do not belong to an existing locally stored thread are transmitted in a message object containing the message body identifiers for the recipients and the message offline ID.

At Step client device transmits the message to the recipient for didactic purposes mobile devices A and B of or to messaging infrastructure based on policies in policy DB B. The individual call flows for the various transmission scenarios are described in further detail with reference to .

Messaging infrastructure periodically synchronizes mailbox with locally stored threads on mobile device . In particular embodiments the synchronization occurs every time a transmission is sent by or received from mobile device . In particular embodiments mobile device synchronizes with messaging server at predetermined intervals such as every thirty minutes. In particular embodiments mobile device synchronizes every time the user accesses the social networking system. This disclosure contemplates any suitable method or interval for synchronizing conversations threads stored locally on mobile device and conversation threads stored remotely in mailbox .

Techniques for synchronizing mailboxes are well known in the art. In particular embodiments mailbox server compares all conversation threads in user mailbox with the locally stored conversation threads on messaging client device and subsequently pushes down new messages or pulls up new messages and places them into threads. In particular embodiments messages residing on client device that merely have an offline ID that is not belonging to an existing thread are pulled from mobile device to mailbox server where the mailbox server creates a new thread for the message as further described below. This disclosure contemplates any suitable method of synchronizing mailbox and a locally stored copy of conversation threads on mobile device .

The process of is also performed by a messaging client device for example device A in when receiving a message directly via an SMS channel. For example a non messaging client device such as device C may transmit an SMS directly from its carrier SMSC via the IXC to the recipient s carrier SMSC A to device A. In such a case recipient mobile device A must generate an offline ID for the message as it will not have a thread ID and transmit the message to the server for synchronization and subsequent storage in mailbox A.

Upon reception of a message to be transmitted to a messaging client device for example device A in or on behalf of a messaging client device for example device at Step mailbox server checks if the message includes a thread ID. If the message includes a thread ID at Step mailbox server simply appends the message to the end of the thread stored in thread database B identified by the thread ID. If the message does not contain a thread ID mailbox server at Step performs a reverse lookup in order to determine if the message belongs in an existing thread. In particular embodiments messaging infrastructure performs a reverse lookup by querying a database of user profiles with a phone number and receiving a social networking user identifier in response. In particular embodiments messaging infrastructure performs a reverse lookup by calling a social networking application programming interface. This disclosure contemplates any suitable method of performing a reverse lookup.

Different data may be transmitted in a message or message object lacking a thread ID depending on the transmitting client device. For example a messaging client device with a data connection may transmit explicit social networking user identifiers for the participants in a message thread the recipients of the message . However in particular scenarios a user may not have explicitly linked a phone number or phone contact with a social networking user ID. For example a particular user may have a contact in his or her mobile device named Mom but not linked to the individual s actual social networking account. In such a scenario messaging client device or A may transmit a message object merely containing the phone number for didactic purposes assume the phone number for Mom is 555 213 6689 and is represented by a user named Jane Smith on the social networking system for thread participant. In particular embodiments users of the social networking system may have published or unpublished phone numbers based on their privacy settings. For example Jane Smith may have listed the number 555 213 6689 on her social networking profile. In such a scenario mailbox server upon receiving a message including a participant identifier of 555 213 6689 calls the social networking API to perform a reverse lookup for users associated with the number 555 213 6689. In this case the social networking API may return the user identifier for Jane Smith and the message may be stored in a thread containing the sender and Jane Smith. 

In particular embodiments whether the social networking API returns user IDs associated with a particular phone number after a reverse lookup operation depends on the privacy settings of the recipient. For example a particular user may wish to separate his or her business phone number from his social networking account avoiding a situation where a business contact is suddenly and unintentionally aware of his identity on the social networking system. Thus the social networking API may consult a privacy database in order to determine whether a number is published or private. For the purposes of this disclosure published means that the number is visible to the sender on the recipient s social networking profile. For example Jane Smith may have privacy settings that allow her immediate family to see the number 555 213 6689 on her profile. In such a scenario if her son transmits a message object having the number to mailbox server the reverse lookup will return Jane Smith s social networking user identifier even though her son has not explicitly linked Mom to Jane Smith in his mobile device. Extending this example a user of a messaging client device may have exchanged messages or calls with Jane Smith without knowing her identity for example in connection with goods or services offered on sales sites such as www.craigslist.org. Upon synchronizing the user s messaging client device with the mailbox server the user will only see the phone number without Jane Smith s associated user ID in order to protect privacy settings.

In particular embodiments a first user may have explicitly linked a phone number to a second user on the first user s mobile device even though the second user has not made the number public to the first user. In the above example assume Jane Smith has not published the number 555 213 6689 on her user profile but her son has made an explicit connection on his mobile device between the number and Jane Smith on the social networking system. In such a scenario mailbox server will only use Jane Smith s social networking user identifier for communications with the user who made the explicit linkage in this case her son. For example if the son transmits a group message to user B and Jane Smith the son s mailbox will contain a conversation thread between himself and Jane Smith but user B s mailbox will only reflect a conversation thread between user B and 555 213 6689.

After resolving performing a reverse lookup and resolving the one or more participant s phone numbers with users of the social network at Step mailbox server searches for threads containing the same set of participants in thread database B. If a matching thread is found at Step the mailbox server appends the new message to the matching thread.

If no matching thread is found at Step mailbox server creates a new thread ID for the message and includes a copy of the message in each of the participants mailboxes. Then based on the type of message and the policies dictating delivery to individual recipients mailbox server applies policy based delivery to the message and for outgoing messages transmits the message to the intended recipient. For an incoming message i.e. received by a messaging client device and transmitted up to messaging infrastructure mailbox server merely updates the recipient mailbox.

The following call flow diagrams illustrate example methods of delivering a message via messaging infrastructure . As a general principle the unified messaging system routes all messages through messaging infrastructure if possible and if not transmits a copy of the message for storage in users mailboxes. As another general principle the unified messaging system transmits as little information as possible through the user of thread IDs. Individual use cases are described in detail below.

At Step mailbox server stores the message in the transmitting user s mailbox and at Step mailbox server stores the message in the recipient s mailbox A. At Step messaging server transmits the message over data channel A to the messaging client residing on mobile device A. The receiving user may view the incoming message via the messaging client on his or her mobile device A.

At Step determines that it should utilize SMS channel B to deliver the message to recipient mobile device A if for example recipient mobile device A lacks a data connection and is therefore offline. Mailbox server transmits the message to SMS server or alternatively CSC server instructing it to transmit the message to the mobile device.

At Step SMS server or CSC server routes the message over an SMPP bind to the recipient carrier SMSC A who then delivers the message as an SMS to recipient mobile device A. Where CSC server is utilized the recipient receives the message as an SMS from the social networking system shortcode. Where a special bind exists between the social networking SMS server and the carrier SMSC A the recipient receives a spoofed SMS having the phone number of mobile device in the from field.

If policy dictates that the message be transmitted over data channel A at Step the messaging client on mobile device transmits the message to mailbox server and requests mailbox server via a REST API call over TLS in particular embodiments to transmit the message. At Step mailbox server stores the message in the transmitting user s mailbox and at Step mailbox server delivers the message by storing the message in the recipient s mailbox A. At Step mailbox server delivers the message to the messaging client residing on mobile device A over data channel A.

If policy dictates that the message be transmitted over SMS channel B at Step the messaging client on mobile device requests its mobile carrier SMSC to transmit the message. In particular embodiments this request is transmitted over the SS7 protocol. At Step recipient mobile device A receives an SMS message from transmitting mobile device s mobile phone number via its cellular carrier. At Step the messaging client on mobile device requests mailbox server to save the message. In particular embodiments this request is a REST API call and in Step mailbox server stores the message in the transmitting user s mailbox . In particular embodiments the new message received by mobile device A is pulled and stored in the recipient user s mailbox A on mailbox server upon the next synchronization operation. In particular embodiments the message is stored in mailbox A upon delivery at Step .

In particular embodiments Steps and its response may be omitted and mailbox server may resolve the delivery policy for a particular user. For example mobile device may simply invoke SendAPI and transmit the message to mailbox server over data channel A. Mailbox server may then resolve the delivery policy for the recipient and independent of any further action from mobile device may route the message to mobile device A as depicted in steps 

At Step the transmitting user s carrier SMSC recognizes that the number is for a different carrier and forwards the SMS to IXC . At the recipient receives the message as an SMS from mobile device s number routed through IXC .

In order to keep the transmitting user s mailbox synchronized at Step the messaging client on mobile device transmits a copy of the message to mailbox and requests it to save the message. In particular embodiments this is via a REST API call over a TLS connection. At Step mailbox server stores the message in the transmitting user s mailbox .

At Step mailbox server transmits a message to SMTP server which then delivers the message as an email at Step .. At Step mailbox server routes the message to phone recipients such as B through SMS server or CSC server as previously described. In particular embodiments a user may configure preferences that dictate that they receive messages through multiple communication channels. Thus a user may receive multiple notifications for the same message. Additionally the application of the method of as well as channel agnostic message threading greatly simplifies group messages. For example a group of users may maintain an ongoing conversation thread on mailbox even though one or more of the participants are utilizing different clients and communication channels. For example a participant at work may find utilizing his email client is the most convenient while a user away from his desk may find using the messaging client on his phone the most convenient. Additionally a user who does not have data connectivity but has SMS network connectivity will not miss messages and may still participate even though he is in a data dead zone such as in the woods.

At Step CSC server decodes the SMS and requests mailbox server to transmit the message. At Step mailbox server stores the message in the outgoing user s mailbox . At Step mailbox server validates the recipient and delivers the message to his or her mailbox. The SMS transmitted to CSC server may include one or more specially formatted identifiers that designate the participants of the conversation. For example the message may include a thread ID social networking user IDs for each participant or phone numbers. Based on the information transmitted in the SMS mailbox server may need to perform different steps in the validation process. For example if the SMS contains a thread ID validation only requires delivering the message to the participants of the thread. As another example if the SMS contains social networking user IDs mailbox server needs to deliver a copy of the SMS to each user s mailbox. Finally if only phone participant phone numbers are included mailbox server must perform a reverse lookup in order to validate the participants.

At Step the recipient may access the message via his or her messaging client on mobile device A or via web interface A.

At Step mailbox server stores the message in the transmitting user s mailbox and at Step mailbox server requests SMS server to send the message as an SMS. At Step SMS server or alternatively CSC server routes the message over an SMPP bind for the recipient carrier A or to an SMS aggregator. At Step the recipient device for example messaging clients A and B receives the SMS. Where the SMS is transmitted from CSC server the shortcode appears in the from field. Where the SMS is transmitted from SMS server the from field is spoofed to display the phone number of the transmitting device A as previously discussed.

At Step the messaging client on mobile device A requests mailbox server to save the message in the user s mailbox A by making a REST API call over a TLS connection. The messaging client on mobile device A transmits the message object to mailbox server in particular embodiments the message object is a JSON objects. At Step mailbox server stores the message in its corresponding thread or creates a new thread for the message in mailbox A.

The method of requires in particular embodiments storage of authentication credentials for voice mailbox in messaging infrastructure . For example when a user initially configures his or her messaging client the client application may prompt the user to enter his authentication credentials for his or her voice mailbox. In particular embodiments the authentication credentials comprise a pin number. In particular embodiments the authentication credentials comprise an email address and password. This disclosure contemplates any suitable method of authenticating a user for accessing a voice mailbox. Upon receiving the authentication credentials mailbox server or another server within messaging infrastructure stores the authentication credentials in association with the social networking user account for the mobile device.

At Step messaging server periodically polls the user s voicemail server over the public IP network . In particular embodiments mailbox server transmits the authentication credentials along with this request. In particular embodiments mailbox server polls voicemail server at predetermined intervals such as for example 30 minutes. In particular embodiments the user may set the predetermined interval. This disclosure contemplates any suitable method of polling voicemail server from mailbox server . In particular embodiments messaging server may utilize both polling of voicemail server as well as receiving messages from client device . In particular embodiments voicemail server may push notifications to client device between polls as discussed in further detail with reference to Step . Utilizing both polling and client notification ensures that messaging server receives a new message notification as soon as a new message arrives.

At Step voicemail server responds after authenticating that mailbox server has access to the user s voice mailbox that there are one or more new voicemails in the user s voice mailbox. Additionally at Step mailbox server downloads the new voicemails over public IP network . In particular embodiments voicemail servers A may be unconnected to the public IP network that is they may be part of a carrier intranet. In such embodiments a specialized network gateway may be installed between mailbox server and voicemail server . This disclosure contemplates any suitable method of integrating with external voicemail servers regardless of whether the servers are hosted on private intranet behind corporate firewalls etc.

At Step mailbox server stores the new voicemail or voicemails in the user s mailbox . In particular embodiments the voicemail is an audio file that may be downloaded and played either at mobile device or over web interface . In particular embodiments the voicemail is a link to an audio file stored on an external server. In particular embodiments mailbox server performs speech to text transcription and the voicemail is stored as a text transcript. This disclosure contemplates any suitable method of storing or processing voicemails downloaded from the user s carrier voice mailbox.

At Step mailbox server delivers the voicemail to mobile device . Mailbox server may utilize any delivery channel either data channel or SMS channel B to deliver the voicemail. As described above the voicemail may be delivered as an audio file a link to an audio file or a text transcription of the voicemail. In particular embodiments where the voicemail is delivered to mobile device via SMS channel B the voicemail is delivered as a text transcription or an MMS message. MMS messages are well known in the art and will not be further discussed here.

The method of Steps through permits users to access their voicemail at any time even when their device lacks a connection to their carrier voice mailbox server. For example a user traveling on a plane will generally shut off his or her mobile device due to federal regulations or lack of connectivity. If the user is on a flight offering in flight WI FI the user may still access his or her voicemail through web interface . Thus the user may still check and receive voicemails even when mobile device has no connectivity.

In particular embodiments new message notifications may be pushed via an SMS channel or other communications channel directly from voicemail server to messaging server . For example when a new message arrives at voicemail server voicemail server may transmit a notification either as an SMS or data packet to messaging server immediately upon reception of the voicemail at Step . In response mailbox server may at Step issue a synchronize or sync request to voicemail server requesting that any new messages be transmitted to mailbox server . In such embodiments after the synch request is processed by voicemail server the message is pushed down in Step as previously discussed.

In particular scenarios carrier voicemail servers A are not connected to the public IP network and are unwilling to install a connection from their voice mailbox servers to mailbox server . In such situations mobile device first pulls down the voicemail from its voice mailbox server and then transmits it to mailbox server .

At Step mobile device polls voicemail server for new messages. In particular embodiments the messaging client application provides authentication credentials to the voicemail server . In particular embodiments voicemail server transmits a notification to mobile device when a new message has arrived. Such implementations are carrier specific and will not be discussed further here. This disclosure contemplates any suitable method of checking for new message at a voicemail server. At Step voicemail server notifies mobile device that there are one or more new voicemails in the user s voice mailbox and transmits the voicemail to the user. At this point the user may listen to the voicemail on his or her mobile device .

At Step the messaging client on mobile device transmits the voicemail to mailbox server and requests its storage in the user s mailbox . At Step mailbox server stores the message in the user s mailbox and performs any necessary processing or transcription as previously described.

As previously described with regard to step voicemail server may utilize a push synchronize model rather than the poll pull model as depicted in . For example upon receiving a new voicemail for the user account associated with mobile device voicemail server may transmit a push notification to mobile device that a new message has arrived. As discussed the push notification may in particular embodiments be transmitted through an SMS channel or other persistent TCP IP connection. In response mobile device may issue a synchronize request to mailbox server which in turn transmits the new message to mobile device . This disclosure contemplates any suitable mechanism of informing mobile device of new messages and any method of delivery of the new messages.

While the foregoing embodiments may be implemented in a variety of network configurations the following illustrates an example network environment for didactic and not limiting purposes. illustrates an example network environment . Network environment includes a network coupling one or more servers and one or more clients to each other. Network environment also includes one or more data storage linked to one or more servers . Particular embodiments may be implemented in network environment . For example social networking system frontend may be written in software programs hosted by one or more servers . For example event database may be stored in one or more storage . In particular embodiments network is an intranet an extranet a virtual private network VPN a local area network LAN a wireless LAN WLAN a wide area network WAN a metropolitan area network MAN a portion of the Internet or another network or a combination of two or more such networks . This disclosure contemplates any suitable network .

One or more links couple a server or a client to network . In particular embodiments one or more links each includes one or more wired wireless or optical links . In particular embodiments one or more links each includes an intranet an extranet a VPN a LAN a WLAN a WAN a MAN a portion of the Internet or another link or a combination of two or more such links . This disclosure contemplates any suitable links coupling servers and clients to network .

In particular embodiments each server may be a unitary server or may be a distributed server spanning multiple computers or multiple datacenters. Servers may be of various types such as for example and without limitation web server news server mail server message server advertising server file server application server exchange server database server or proxy server. In particular embodiments each server may include hardware software or embedded logic components or a combination of two or more such components for carrying out the appropriate functionalities implemented or supported by server . For example a web server is generally capable of hosting websites containing web pages or particular elements of web pages. More specifically a web server may host HTML files or other file types or may dynamically create or constitute files upon a request and communicate them to clients in response to HTTP or other requests from clients . A mail server is generally capable of providing electronic mail services to various clients . A database server is generally capable of providing an interface for managing data stored in one or more data stores.

In particular embodiments one or more data storages may be communicatively linked to one or more servers via one or more links . In particular embodiments data storages may be used to store various types of information. In particular embodiments the information stored in data storages may be organized according to specific data structures. In particular embodiment each data storage may be a relational database. Particular embodiments may provide interfaces that enable servers or clients to manage e.g. retrieve modify add or delete the information stored in data storage .

In particular embodiments each client may be an electronic device including hardware software or embedded logic components or a combination of two or more such components and capable of carrying out the appropriate functions implemented or supported by client . For example and without limitation a client may be a desktop computer system a notebook computer system a netbook computer system a handheld electronic device or a mobile telephone. This disclosure contemplates any suitable clients . A client may enable a network user at client to access network . A client may enable its user to communicate with other users at other clients .

A client may have a web browser such as MICROSOFT INTERNET EXPLORER GOOGLE CHROME or MOZILLA FIREFOX and may have one or more add ons plug ins or other extensions such as TOOLBAR or YAHOO TOOLBAR. A user at client may enter a Uniform Resource Locator URL or other address directing the web browser to a server and the web browser may generate a Hyper Text Transfer Protocol HTTP request and communicate the HTTP request to server . Server may accept the HTTP request and communicate to client one or more Hyper Text Markup Language HTML files responsive to the HTTP request. Client may render a web page based on the HTML files from server for presentation to the user. This disclosure contemplates any suitable web page files. As an example and not by way of limitation web pages may render from HTML files Extensible Hyper Text Markup Language XHTML files or Extensible Markup Language XML files according to particular needs. Such pages may also execute scripts such as for example and without limitation those written in JAVASCRIPT JAVA MICROSOFT SILVERLIGHT combinations of markup language and scripts such as AJAX Asynchronous JAVASCRIPT and XML and the like. Herein reference to a web page encompasses one or more corresponding web page files which a browser may use to render the web page and vice versa where appropriate.

In particular embodiments computer system includes a processor memory storage an input output I O interface a communication interface and a bus . Although this disclosure describes and illustrates a particular computer system having a particular number of particular components in a particular arrangement this disclosure contemplates any suitable computer system having any suitable number of any suitable components in any suitable arrangement.

In particular embodiments processor includes hardware for executing instructions such as those making up a computer program. As an example and not by way of limitation to execute instructions processor may retrieve or fetch the instructions from an internal register an internal cache memory or storage decode and execute them and then write one or more results to an internal register an internal cache memory or storage . In particular embodiments processor may include one or more internal caches for data instructions or addresses. This disclosure contemplates processor including any suitable number of any suitable internal caches where appropriate. As an example and not by way of limitation processor may include one or more instruction caches one or more data caches and one or more translation look aside buffers TLBs . Instructions in the instruction caches may be copies of instructions in memory or storage and the instruction caches may speed up retrieval of those instructions by processor . Data in the data caches may be copies of data in memory or storage for instructions executing at processor to operate on the results of previous instructions executed at processor for access by subsequent instructions executing at processor or for writing to memory or storage or other suitable data. The data caches may speed up read or write operations by processor . The TLBs may speed up virtual address translation for processor . In particular embodiments processor may include one or more internal registers for data instructions or addresses. This disclosure contemplates processor including any suitable number of any suitable internal registers where appropriate. Where appropriate processor may include one or more arithmetic logic units ALUs be a multi core processor or include one or more processors . Although this disclosure describes and illustrates a particular processor this disclosure contemplates any suitable processor.

In particular embodiments memory includes main memory for storing instructions for processor to execute or data for processor to operate on. As an example and not by way of limitation computer system may load instructions from storage or another source such as for example another computer system to memory . Processor may then load the instructions from memory to an internal register or internal cache. To execute the instructions processor may retrieve the instructions from the internal register or internal cache and decode them. During or after execution of the instructions processor may write one or more results which may be intermediate or final results to the internal register or internal cache. Processor may then write one or more of those results to memory . In particular embodiments processor executes only instructions in one or more internal registers or internal caches or in memory as opposed to storage or elsewhere and operates only on data in one or more internal registers or internal caches or in memory as opposed to storage or elsewhere . One or more memory buses which may each include an address bus and a data bus may couple processor to memory . Bus may include one or more memory buses as described below. In particular embodiments one or more memory management units MMUs reside between processor and memory and facilitate accesses to memory requested by processor . In particular embodiments memory includes random access memory RAM . This RAM may be volatile memory where appropriate Where appropriate this RAM may be dynamic RAM DRAM or static RAM SRAM . Moreover where appropriate this RAM may be single ported or multi ported RAM. This disclosure contemplates any suitable RAM. Memory may include one or more memories where appropriate. Although this disclosure describes and illustrates particular memory this disclosure contemplates any suitable memory.

In particular embodiments storage includes mass storage for data or instructions. As an example and not by way of limitation storage may include an HDD a floppy disk drive flash memory an optical disc a magneto optical disc magnetic tape or a Universal Serial Bus USB drive or a combination of two or more of these. Storage may include removable or non removable or fixed media where appropriate. Storage may be internal or external to computer system where appropriate. In particular embodiments storage is non volatile solid state memory. In particular embodiments storage includes read only memory ROM . Where appropriate this ROM may be mask programmed ROM programmable ROM PROM erasable PROM EPROM electrically erasable PROM EEPROM electrically alterable ROM EAROM or flash memory or a combination of two or more of these. This disclosure contemplates mass storage taking any suitable physical form. Storage may include one or more storage control units facilitating communication between processor and storage where appropriate. Where appropriate storage may include one or more storages . Although this disclosure describes and illustrates particular storage this disclosure contemplates any suitable storage.

In particular embodiments I O interface includes hardware software or both providing one or more interfaces for communication between computer system and one or more I O devices. Computer system may include one or more of these I O devices where appropriate. One or more of these I O devices may enable communication between a person and computer system . As an example and not by way of limitation an I O device may include a keyboard keypad microphone monitor mouse printer scanner speaker still camera stylus tablet touch screen trackball video camera another suitable I O device or a combination of two or more of these. An I O device may include one or more sensors. This disclosure contemplates any suitable I O devices and any suitable I O interfaces for them. Where appropriate I O interface may include one or more device or software drivers enabling processor to drive one or more of these I O devices. I O interface may include one or more I O interfaces where appropriate. Although this disclosure describes and illustrates a particular I O interface this disclosure contemplates any suitable I O interface.

In particular embodiments communication interface includes hardware software or both providing one or more interfaces for communication such as for example packet based communication between computer system and one or more other computer systems or one or more networks. As an example and not by way of limitation communication interface may include a network interface controller NIC or network adapter for communicating with an Ethernet or other wire based network or a wireless NIC WNIC or wireless adapter for communicating with a wireless network such as a WI FI network. This disclosure contemplates any suitable network and any suitable communication interface for it. As an example and not by way of limitation computer system may communicate with an ad hoc network a personal area network PAN a local area network LAN a wide area network WAN a metropolitan area network MAN or one or more portions of the Internet or a combination of two or more of these. One or more portions of one or more of these networks may be wired or wireless. As an example computer system may communicate with a wireless PAN WPAN such as for example a BLUETOOTH WPAN a WI FI network a WI MAX network a cellular telephone network such as for example a Global System for Mobile Communications GSM network or other suitable wireless network or a combination of two or more of these. Computer system may include any suitable communication interface for any of these networks where appropriate. Communication interface may include one or more communication interfaces where appropriate. Although this disclosure describes and illustrates a particular communication interface this disclosure contemplates any suitable communication interface.

In particular embodiments bus includes hardware software or both coupling components of computer system to each other. As an example and not by way of limitation bus may include an Accelerated Graphics Port AGP or other graphics bus an Enhanced Industry Standard Architecture EISA bus a front side bus FSB a HYPERTRANSPORT HT interconnect an Industry Standard Architecture ISA bus an INFINIBAND interconnect a low pin count LPC bus a memory bus a Micro Channel Architecture MCA bus a Peripheral Component Interconnect PCI bus a PCI Express PCI X bus a serial advanced technology attachment SATA bus a Video Electronics Standards Association local VLB bus or another suitable bus or a combination of two or more of these. Bus may include one or more buses where appropriate. Although this disclosure describes and illustrates a particular bus this disclosure contemplates any suitable bus or interconnect.

Herein reference to a computer readable non transitory storage medium may include a semiconductor based or other integrated circuit IC such as for example a field programmable gate array FPGA or an application specific IC ASIC a hard disk drive HDD a hybrid hard drive HHD an optical disc an optical disc drive ODD a magneto optical disc a magneto optical drive a floppy disk a floppy disk drive FDD magnetic tape a holographic storage medium a solid state drive SSD a RAM drive a SECURE DIGITAL card a SECURE DIGITAL drive another suitable computer readable non transitory storage medium or a suitable combination of these where appropriate. A computer readable non transitory storage medium may be volatile non volatile or a combination of volatile and non volatile where appropriate. This disclosure contemplates one or more computer readable storage media implementing any suitable storage. In particular embodiments a computer readable storage medium implements one or more portions of processor such as for example one or more internal registers or caches one or more portions of memory one or more portions of storage or a combination of these where appropriate. In particular embodiments a computer readable storage medium implements RAM or ROM. In particular embodiments a computer readable storage medium implements volatile or persistent memory. In particular embodiments one or more computer readable storage media embody software. Herein reference to software may encompass one or more applications bytecode one or more computer programs one or more executables one or more instructions logic machine code one or more scripts or source code and vice versa where appropriate. In particular embodiments software includes one or more application programming interfaces APIs . This disclosure contemplates any suitable software written or otherwise expressed in any suitable programming language or combination of programming languages. In particular embodiments software is expressed as source code or object code. In particular embodiments software is expressed in a higher level programming language such as for example C Perl or a suitable extension thereof. In particular embodiments software is expressed in a lower level programming language such as assembly language or machine code . In particular embodiments software is expressed in JAVA. In particular embodiments software is expressed in Hyper Text Markup Language HTML Extensible Markup Language XML or other suitable markup language.

This disclosure encompasses all changes substitutions variations alterations and modifications to the example embodiments herein that a person having ordinary skill in the art would comprehend. Similarly where appropriate the appended claims encompass all changes substitutions variations alterations and modifications to the example embodiments herein that a person having ordinary skill in the art would comprehend.

The foregoing description of the embodiments has been presented for the purpose of illustration it is not intended to be exhaustive or to limit the disclosure to the precise forms disclosed. Persons skilled in the relevant art can appreciate that many modifications and variations are possible in light of the above disclosure. For example although the foregoing embodiments have been described in the context of a social network system it will apparent to one of ordinary skill in the art that this disclosure may be used with any electronic social network service and even if it is not provided through a website. Any computer based system that provides social networking functionality can be used even if it relies for example on e mail instant messaging or other form of peer to peer communications and any other technique for communicating between users. This disclosure is thus not limited to any particular type of communication system network protocol format or application.

Some portions of this description describe the embodiments in terms of algorithms and symbolic representations of operations on information. These algorithmic descriptions and representations are commonly used by those skilled in the data processing arts to convey the substance of their work effectively to others skilled in the art. These operations while described functionally computationally or logically are understood to be implemented by computer programs or equivalent electrical circuits microcode or the like. Furthermore it has also proven convenient at times to refer to these arrangements of operations as modules without loss of generality. The described operations and their associated modules may be embodied in software firmware hardware or any combinations thereof.

Any of the steps operations or processes described herein may be performed or implemented with one or more hardware or software modules alone or in combination with other devices. In one embodiment a software module is implemented with a computer program product comprising a computer readable medium containing computer program code which can be executed by a computer processor for performing any or all of the steps operations or processes described.

Particular embodiments may also relate to an apparatus for performing the operations herein. This apparatus may be specially constructed for the required purposes and or it may comprise a general purpose computing device selectively activated or reconfigured by a computer program stored in the computer. Such a computer program may be stored in a tangible computer readable storage medium or any type of media suitable for storing electronic instructions and coupled to a computer system bus. Furthermore any computing systems referred to in the specification may include a single processor or may be architectures employing multiple processor designs for increased computing capability.

While the foregoing processes and mechanisms can be implemented by a wide variety of physical systems and in a wide variety of network and computing environments the server or computing systems described below provide example computing system architectures for didactic rather than limiting purposes.

This application has been explained with reference to specific embodiments. For example while particular embodiments have been described as operating in connection with a social network system particular embodiments can be used in connection with any communications facility that allows for communication of messages between users such as an email hosting site. Other embodiments will be evident to those of ordinary skill in the art. It is therefore not intended that this disclosure be limited except as indicated by the appended claims.

Finally the language used in the specification has been principally selected for readability and instructional purposes and it may not have been selected to delineate or circumscribe the inventive subject matter. It is therefore intended that the scope of the invention be limited not by this detailed description but rather by any claims that issue on an application based hereon. Accordingly the disclosure of the embodiments of the invention is intended to be illustrative but not limiting of the scope of the invention which is set forth in the following claims.

